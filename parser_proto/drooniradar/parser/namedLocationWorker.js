(function(){"use strict";const d=11102230246251565e-32,C=134217729,K=(3+8*d)*d;function F(t,y,b,e,w){let u,c,o,s,i=y[0],a=e[0],r=0,n=0;a>i==a>-i?(u=i,i=y[++r]):(u=a,a=e[++n]);let f=0;if(r<t&&n<b)for(a>i==a>-i?(c=i+u,o=u-(c-i),i=y[++r]):(c=a+u,o=u-(c-a),a=e[++n]),u=c,o!==0&&(w[f++]=o);r<t&&n<b;)a>i==a>-i?(c=u+i,s=c-u,o=u-(c-s)+(i-s),i=y[++r]):(c=u+a,s=c-u,o=u-(c-s)+(a-s),a=e[++n]),u=c,o!==0&&(w[f++]=o);for(;r<t;)c=u+i,s=c-u,o=u-(c-s)+(i-s),i=y[++r],u=c,o!==0&&(w[f++]=o);for(;n<b;)c=u+a,s=c-u,o=u-(c-s)+(a-s),a=e[++n],u=c,o!==0&&(w[f++]=o);return(u!==0||f===0)&&(w[f++]=u),f}function V(t,y){let b=y[0];for(let e=1;e<t;e++)b+=y[e];return b}function D(t){return new Float64Array(t)}const X=(3+16*d)*d,Y=(2+12*d)*d,Z=(9+64*d)*d*d,Q=D(4),R=D(8),U=D(12),W=D(16),_=D(4);function $(t,y,b,e,w,u,c){let o,s,i,a,r,n,f,g,h,p,l,v,A,m,P,E,G,M;const S=t-w,k=b-w,B=y-u,L=e-u;m=S*L,n=C*S,f=n-(n-S),g=S-f,n=C*L,h=n-(n-L),p=L-h,P=g*p-(m-f*h-g*h-f*p),E=B*k,n=C*B,f=n-(n-B),g=B-f,n=C*k,h=n-(n-k),p=k-h,G=g*p-(E-f*h-g*h-f*p),l=P-G,r=P-l,Q[0]=P-(l+r)+(r-G),v=m+l,r=v-m,A=m-(v-r)+(l-r),l=A-E,r=A-l,Q[1]=A-(l+r)+(r-E),M=v+l,r=M-v,Q[2]=v-(M-r)+(l-r),Q[3]=M;let q=V(4,Q),J=Y*c;if(q>=J||-q>=J||(r=t-S,o=t-(S+r)+(r-w),r=b-k,i=b-(k+r)+(r-w),r=y-B,s=y-(B+r)+(r-u),r=e-L,a=e-(L+r)+(r-u),o===0&&s===0&&i===0&&a===0)||(J=Z*c+K*Math.abs(q),q+=S*a+L*o-(B*i+k*s),q>=J||-q>=J))return q;m=o*L,n=C*o,f=n-(n-o),g=o-f,n=C*L,h=n-(n-L),p=L-h,P=g*p-(m-f*h-g*h-f*p),E=s*k,n=C*s,f=n-(n-s),g=s-f,n=C*k,h=n-(n-k),p=k-h,G=g*p-(E-f*h-g*h-f*p),l=P-G,r=P-l,_[0]=P-(l+r)+(r-G),v=m+l,r=v-m,A=m-(v-r)+(l-r),l=A-E,r=A-l,_[1]=A-(l+r)+(r-E),M=v+l,r=M-v,_[2]=v-(M-r)+(l-r),_[3]=M;const fr=F(4,Q,4,_,R);m=S*a,n=C*S,f=n-(n-S),g=S-f,n=C*a,h=n-(n-a),p=a-h,P=g*p-(m-f*h-g*h-f*p),E=B*i,n=C*B,f=n-(n-B),g=B-f,n=C*i,h=n-(n-i),p=i-h,G=g*p-(E-f*h-g*h-f*p),l=P-G,r=P-l,_[0]=P-(l+r)+(r-G),v=m+l,r=v-m,A=m-(v-r)+(l-r),l=A-E,r=A-l,_[1]=A-(l+r)+(r-E),M=v+l,r=M-v,_[2]=v-(M-r)+(l-r),_[3]=M;const lr=F(fr,R,4,_,U);m=o*a,n=C*o,f=n-(n-o),g=o-f,n=C*a,h=n-(n-a),p=a-h,P=g*p-(m-f*h-g*h-f*p),E=s*i,n=C*s,f=n-(n-s),g=s-f,n=C*i,h=n-(n-i),p=i-h,G=g*p-(E-f*h-g*h-f*p),l=P-G,r=P-l,_[0]=P-(l+r)+(r-G),v=m+l,r=v-m,A=m-(v-r)+(l-r),l=A-E,r=A-l,_[1]=A-(l+r)+(r-E),M=v+l,r=M-v,_[2]=v-(M-r)+(l-r),_[3]=M;const ur=F(lr,U,4,_,W);return W[ur-1]}function j(t,y,b,e,w,u){const c=(y-u)*(b-w),o=(t-w)*(e-u),s=c-o,i=Math.abs(c+o);return Math.abs(s)>=X*i?s:-$(t,y,b,e,w,u,i)}function T(t,y){var b,e,w=0,u,c,o,s,i,a,r,n=t[0],f=t[1],g=y.length;for(b=0;b<g;b++){e=0;var h=y[b],p=h.length-1;if(a=h[0],a[0]!==h[p][0]&&a[1]!==h[p][1])throw new Error("First and last coordinates in a ring must be the same");for(c=a[0]-n,o=a[1]-f,e;e<p;e++){if(r=h[e+1],s=r[0]-n,i=r[1]-f,o===0&&i===0){if(s<=0&&c>=0||c<=0&&s>=0)return 0}else if(i>=0&&o<=0||i<=0&&o>=0){if(u=j(c,s,o,i,0,0),u===0)return 0;(u>0&&i>0&&o<=0||u<0&&i<=0&&o>0)&&w++}a=r,o=i,c=s}}return w%2!==0}function x(t,y,b={}){const e={type:"Feature"};return(b.id===0||b.id)&&(e.id=b.id),b.bbox&&(e.bbox=b.bbox),e.properties={},e.geometry=t,e}function I(t,y,b={}){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!z(t[0])||!z(t[1]))throw new Error("coordinates must contain numbers");return x({type:"Point",coordinates:t},y,b)}function z(t){return!isNaN(t)&&t!==null&&!Array.isArray(t)}function rr(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return[...t.geometry.coordinates];if(t.type==="Point")return[...t.coordinates]}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return[...t];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function tr(t){return t.type==="Feature"?t.geometry:t}function er(t,y,b={}){if(!t)throw new Error("point is required");if(!y)throw new Error("polygon is required");const e=rr(t),w=tr(y),u=w.type,c=y.bbox;let o=w.coordinates;if(c&&nr(e,c)===!1)return!1;u==="Polygon"&&(o=[o]);let s=!1;for(var i=0;i<o.length;++i){const a=T(e,o[i]);if(a===0)return!b.ignoreBoundary;a&&(s=!0)}return s}function nr(t,y){return y[0]<=t[0]&&y[1]<=t[1]&&y[2]>=t[0]&&y[3]>=t[1]}var ir=er;function H(t,y,b){if(t!==null)for(var e,w,u,c,o,s,i,a=0,r=0,n,f=t.type,g=f==="FeatureCollection",h=f==="Feature",p=g?t.features.length:1,l=0;l<p;l++){i=g?t.features[l].geometry:h?t.geometry:t,n=i?i.type==="GeometryCollection":!1,o=n?i.geometries.length:1;for(var v=0;v<o;v++){var A=0,m=0;if(c=n?i.geometries[v]:i,c!==null){s=c.coordinates;var P=c.type;switch(a=0,P){case null:break;case"Point":if(y(s,r,l,A,m)===!1)return!1;r++,A++;break;case"LineString":case"MultiPoint":for(e=0;e<s.length;e++){if(y(s[e],r,l,A,m)===!1)return!1;r++,P==="MultiPoint"&&A++}P==="LineString"&&A++;break;case"Polygon":case"MultiLineString":for(e=0;e<s.length;e++){for(w=0;w<s[e].length-a;w++){if(y(s[e][w],r,l,A,m)===!1)return!1;r++}P==="MultiLineString"&&A++,P==="Polygon"&&m++}P==="Polygon"&&A++;break;case"MultiPolygon":for(e=0;e<s.length;e++){for(m=0,w=0;w<s[e].length;w++){for(u=0;u<s[e][w].length-a;u++){if(y(s[e][w][u],r,l,A,m)===!1)return!1;r++}m++}A++}break;case"GeometryCollection":for(e=0;e<c.geometries.length;e++)if(H(c.geometries[e],y)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function sr(t,y={}){if(t.bbox!=null&&y.recompute!==!0)return t.bbox;const b=[1/0,1/0,-1/0,-1/0];return H(t,e=>{b[0]>e[0]&&(b[0]=e[0]),b[1]>e[1]&&(b[1]=e[1]),b[2]<e[0]&&(b[2]=e[0]),b[3]<e[1]&&(b[3]=e[1])}),b}var or=sr;let N=null,O=[];const ar=(async()=>{try{N=await(await fetch("/private/borders.geojson")).json(),N&&Array.isArray(N.features)?O=N.features.map(y=>or(y)):(N={features:[]},O=[])}catch(t){N={features:[]},O=[],console.error("Failed to fetch or parse borders GeoJSON:",t)}})();self.onmessage=async t=>{var c,o,s,i;await ar;const{requestId:y,coordinates:b}=t.data,{lat:e,lng:w}=b,u=I([w,e]);for(let a=0;a<N.features.length;a++){const r=N.features[a],[n,f,g,h]=O[a];if(w>=n&&w<=g&&e>=f&&e<=h&&ir(u,r)){self.postMessage({requestId:y,result:((c=r.properties)==null?void 0:c.city)||((o=r.properties)==null?void 0:o.area)||((s=r.properties)==null?void 0:s.county)||((i=r.properties)==null?void 0:i.country)});return}}self.postMessage({requestId:y,result:null})}})();
