var L4=Object.defineProperty;var C4=(n,e,t)=>e in n?L4(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Ge=(n,e,t)=>(C4(n,typeof e!="symbol"?e+"":e,t),t);import{s as zt,y as He,B as mi,n as $e,e as Dt,c as Jl,j as A,l as R,m as T,p as _,C as g,D as B,v as Z,u as Ql,g as eu,a as tu,W as Wc,a7 as Cs,J as nt,K as ui,t as he,o as fe,S as fi,w as p,x as Ee,a8 as Ev,z as dt,k as ee,H as Re,q as te,I as Oe,a9 as Vl,r as Bn,aa as Ha,h as Eo,T as rn,P as P0,N as ls,Q as N0,R as P4,ab as zi,ac as kn,E as un,L as Ua,M as qa,O as ro,ad as Sv,ae as Na,af as Yn,ag as tf,a6 as Tn,ah as D0,ai as N4,aj as Ui,G as Xc,ak as A0,al as D4,am as A4}from"../chunks/scheduler.CT9DnedP.js";import{S as Wt,i as Xt,t as de,a as Ie,b as st,d as ot,m as at,g as bt,c as wt,e as lt,f as jn,h as R0,j as R4}from"../chunks/index.MTjbqClZ.js";import{c as $f,g as Vf,b as zf,O as Ot,U as Li,S as O4,d as x4,a as Hr,e as F4,f as no,h as bc,i as si,j as So,k as B4,$ as Nn,L as wc,m as Gf,C as ws,n as po,B as $4,R as Vr,o as V4,p as z4,q as G4,r as _s,M as Iv,s as Da,t as kc,u as H4,v as Kc,w as Aa,A as U4}from"../chunks/ArrowUp.svelte_svelte_type_style_lang.Dr05Wac7.js";import{w as Pn,d as Ra}from"../chunks/index.5tTuuN-Q.js";import{C as fn,H as O0}from"../chunks/HidableInput.C4G4eboT.js";import{e as Bt,u as vr,d as Jc,o as vs}from"../chunks/each.oOxbSuxO.js";import{g as q4}from"../chunks/entry.DEpoNnm5.js";import{h as xs,u as Qc}from"../chunks/await_block.Bt8bkuq8.js";import{m as Z4}from"../chunks/serverAvailabilityChecker.BscV-ng6.js";const Y4=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global,j4=!1,pR=Object.freeze(Object.defineProperty({__proto__:null,ssr:j4},Symbol.toStringTag,{value:"Module"}));var nf={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(n,e){(function(t,i){i(e)})($f,function(t){var i="1.9.4";function r(f){var S,x,K,ce;for(x=1,K=arguments.length;x<K;x++){ce=arguments[x];for(S in ce)f[S]=ce[S]}return f}var s=Object.create||function(){function f(){}return function(S){return f.prototype=S,new f}}();function o(f,S){var x=Array.prototype.slice;if(f.bind)return f.bind.apply(f,x.call(arguments,1));var K=x.call(arguments,2);return function(){return f.apply(S,K.length?K.concat(x.call(arguments)):arguments)}}var a=0;function l(f){return"_leaflet_id"in f||(f._leaflet_id=++a),f._leaflet_id}function h(f,S,x){var K,ce,Ce,Ze;return Ze=function(){K=!1,ce&&(Ce.apply(x,ce),ce=!1)},Ce=function(){K?ce=arguments:(f.apply(x,arguments),setTimeout(Ze,S),K=!0)},Ce}function d(f,S,x){var K=S[1],ce=S[0],Ce=K-ce;return f===K&&x?f:((f-ce)%Ce+Ce)%Ce+ce}function m(){return!1}function v(f,S){if(S===!1)return f;var x=Math.pow(10,S===void 0?6:S);return Math.round(f*x)/x}function k(f){return f.trim?f.trim():f.replace(/^\s+|\s+$/g,"")}function w(f){return k(f).split(/\s+/)}function E(f,S){Object.prototype.hasOwnProperty.call(f,"options")||(f.options=f.options?s(f.options):{});for(var x in S)f.options[x]=S[x];return f.options}function I(f,S,x){var K=[];for(var ce in f)K.push(encodeURIComponent(x?ce.toUpperCase():ce)+"="+encodeURIComponent(f[ce]));return(!S||S.indexOf("?")===-1?"?":"&")+K.join("&")}var M=/\{ *([\w_ -]+) *\}/g;function C(f,S){return f.replace(M,function(x,K){var ce=S[K];if(ce===void 0)throw new Error("No value provided for variable "+x);return typeof ce=="function"&&(ce=ce(S)),ce})}var D=Array.isArray||function(f){return Object.prototype.toString.call(f)==="[object Array]"};function O(f,S){for(var x=0;x<f.length;x++)if(f[x]===S)return x;return-1}var P="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function F(f){return window["webkit"+f]||window["moz"+f]||window["ms"+f]}var V=0;function $(f){var S=+new Date,x=Math.max(0,16-(S-V));return V=S+x,window.setTimeout(f,x)}var G=window.requestAnimationFrame||F("RequestAnimationFrame")||$,U=window.cancelAnimationFrame||F("CancelAnimationFrame")||F("CancelRequestAnimationFrame")||function(f){window.clearTimeout(f)};function H(f,S,x){if(x&&G===$)f.call(S);else return G.call(window,o(f,S))}function j(f){f&&U.call(window,f)}var Q={__proto__:null,extend:r,create:s,bind:o,get lastId(){return a},stamp:l,throttle:h,wrapNum:d,falseFn:m,formatNum:v,trim:k,splitWords:w,setOptions:E,getParamString:I,template:C,isArray:D,indexOf:O,emptyImageUrl:P,requestFn:G,cancelFn:U,requestAnimFrame:H,cancelAnimFrame:j};function W(){}W.extend=function(f){var S=function(){E(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},x=S.__super__=this.prototype,K=s(x);K.constructor=S,S.prototype=K;for(var ce in this)Object.prototype.hasOwnProperty.call(this,ce)&&ce!=="prototype"&&ce!=="__super__"&&(S[ce]=this[ce]);return f.statics&&r(S,f.statics),f.includes&&(Y(f.includes),r.apply(null,[K].concat(f.includes))),r(K,f),delete K.statics,delete K.includes,K.options&&(K.options=x.options?s(x.options):{},r(K.options,f.options)),K._initHooks=[],K.callInitHooks=function(){if(!this._initHooksCalled){x.callInitHooks&&x.callInitHooks.call(this),this._initHooksCalled=!0;for(var Ce=0,Ze=K._initHooks.length;Ce<Ze;Ce++)K._initHooks[Ce].call(this)}},S},W.include=function(f){var S=this.prototype.options;return r(this.prototype,f),f.options&&(this.prototype.options=S,this.mergeOptions(f.options)),this},W.mergeOptions=function(f){return r(this.prototype.options,f),this},W.addInitHook=function(f){var S=Array.prototype.slice.call(arguments,1),x=typeof f=="function"?f:function(){this[f].apply(this,S)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(x),this};function Y(f){if(!(typeof L>"u"||!L||!L.Mixin)){f=D(f)?f:[f];for(var S=0;S<f.length;S++)f[S]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var q={on:function(f,S,x){if(typeof f=="object")for(var K in f)this._on(K,f[K],S);else{f=w(f);for(var ce=0,Ce=f.length;ce<Ce;ce++)this._on(f[ce],S,x)}return this},off:function(f,S,x){if(!arguments.length)delete this._events;else if(typeof f=="object")for(var K in f)this._off(K,f[K],S);else{f=w(f);for(var ce=arguments.length===1,Ce=0,Ze=f.length;Ce<Ze;Ce++)ce?this._off(f[Ce]):this._off(f[Ce],S,x)}return this},_on:function(f,S,x,K){if(typeof S!="function"){console.warn("wrong listener type: "+typeof S);return}if(this._listens(f,S,x)===!1){x===this&&(x=void 0);var ce={fn:S,ctx:x};K&&(ce.once=!0),this._events=this._events||{},this._events[f]=this._events[f]||[],this._events[f].push(ce)}},_off:function(f,S,x){var K,ce,Ce;if(this._events&&(K=this._events[f],!!K)){if(arguments.length===1){if(this._firingCount)for(ce=0,Ce=K.length;ce<Ce;ce++)K[ce].fn=m;delete this._events[f];return}if(typeof S!="function"){console.warn("wrong listener type: "+typeof S);return}var Ze=this._listens(f,S,x);if(Ze!==!1){var ht=K[Ze];this._firingCount&&(ht.fn=m,this._events[f]=K=K.slice()),K.splice(Ze,1)}}},fire:function(f,S,x){if(!this.listens(f,x))return this;var K=r({},S,{type:f,target:this,sourceTarget:S&&S.sourceTarget||this});if(this._events){var ce=this._events[f];if(ce){this._firingCount=this._firingCount+1||1;for(var Ce=0,Ze=ce.length;Ce<Ze;Ce++){var ht=ce[Ce],pt=ht.fn;ht.once&&this.off(f,pt,ht.ctx),pt.call(ht.ctx||this,K)}this._firingCount--}}return x&&this._propagateEvent(K),this},listens:function(f,S,x,K){typeof f!="string"&&console.warn('"string" type argument expected');var ce=S;typeof S!="function"&&(K=!!S,ce=void 0,x=void 0);var Ce=this._events&&this._events[f];if(Ce&&Ce.length&&this._listens(f,ce,x)!==!1)return!0;if(K){for(var Ze in this._eventParents)if(this._eventParents[Ze].listens(f,S,x,K))return!0}return!1},_listens:function(f,S,x){if(!this._events)return!1;var K=this._events[f]||[];if(!S)return!!K.length;x===this&&(x=void 0);for(var ce=0,Ce=K.length;ce<Ce;ce++)if(K[ce].fn===S&&K[ce].ctx===x)return ce;return!1},once:function(f,S,x){if(typeof f=="object")for(var K in f)this._on(K,f[K],S,!0);else{f=w(f);for(var ce=0,Ce=f.length;ce<Ce;ce++)this._on(f[ce],S,x,!0)}return this},addEventParent:function(f){return this._eventParents=this._eventParents||{},this._eventParents[l(f)]=f,this},removeEventParent:function(f){return this._eventParents&&delete this._eventParents[l(f)],this},_propagateEvent:function(f){for(var S in this._eventParents)this._eventParents[S].fire(f.type,r({layer:f.target,propagatedFrom:f.target},f),!0)}};q.addEventListener=q.on,q.removeEventListener=q.clearAllEventListeners=q.off,q.addOneTimeEventListener=q.once,q.fireEvent=q.fire,q.hasEventListeners=q.listens;var ne=W.extend(q);function J(f,S,x){this.x=x?Math.round(f):f,this.y=x?Math.round(S):S}var ge=Math.trunc||function(f){return f>0?Math.floor(f):Math.ceil(f)};J.prototype={clone:function(){return new J(this.x,this.y)},add:function(f){return this.clone()._add(ie(f))},_add:function(f){return this.x+=f.x,this.y+=f.y,this},subtract:function(f){return this.clone()._subtract(ie(f))},_subtract:function(f){return this.x-=f.x,this.y-=f.y,this},divideBy:function(f){return this.clone()._divideBy(f)},_divideBy:function(f){return this.x/=f,this.y/=f,this},multiplyBy:function(f){return this.clone()._multiplyBy(f)},_multiplyBy:function(f){return this.x*=f,this.y*=f,this},scaleBy:function(f){return new J(this.x*f.x,this.y*f.y)},unscaleBy:function(f){return new J(this.x/f.x,this.y/f.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ge(this.x),this.y=ge(this.y),this},distanceTo:function(f){f=ie(f);var S=f.x-this.x,x=f.y-this.y;return Math.sqrt(S*S+x*x)},equals:function(f){return f=ie(f),f.x===this.x&&f.y===this.y},contains:function(f){return f=ie(f),Math.abs(f.x)<=Math.abs(this.x)&&Math.abs(f.y)<=Math.abs(this.y)},toString:function(){return"Point("+v(this.x)+", "+v(this.y)+")"}};function ie(f,S,x){return f instanceof J?f:D(f)?new J(f[0],f[1]):f==null?f:typeof f=="object"&&"x"in f&&"y"in f?new J(f.x,f.y):new J(f,S,x)}function le(f,S){if(f)for(var x=S?[f,S]:f,K=0,ce=x.length;K<ce;K++)this.extend(x[K])}le.prototype={extend:function(f){var S,x;if(!f)return this;if(f instanceof J||typeof f[0]=="number"||"x"in f)S=x=ie(f);else if(f=pe(f),S=f.min,x=f.max,!S||!x)return this;return!this.min&&!this.max?(this.min=S.clone(),this.max=x.clone()):(this.min.x=Math.min(S.x,this.min.x),this.max.x=Math.max(x.x,this.max.x),this.min.y=Math.min(S.y,this.min.y),this.max.y=Math.max(x.y,this.max.y)),this},getCenter:function(f){return ie((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,f)},getBottomLeft:function(){return ie(this.min.x,this.max.y)},getTopRight:function(){return ie(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(f){var S,x;return typeof f[0]=="number"||f instanceof J?f=ie(f):f=pe(f),f instanceof le?(S=f.min,x=f.max):S=x=f,S.x>=this.min.x&&x.x<=this.max.x&&S.y>=this.min.y&&x.y<=this.max.y},intersects:function(f){f=pe(f);var S=this.min,x=this.max,K=f.min,ce=f.max,Ce=ce.x>=S.x&&K.x<=x.x,Ze=ce.y>=S.y&&K.y<=x.y;return Ce&&Ze},overlaps:function(f){f=pe(f);var S=this.min,x=this.max,K=f.min,ce=f.max,Ce=ce.x>S.x&&K.x<x.x,Ze=ce.y>S.y&&K.y<x.y;return Ce&&Ze},isValid:function(){return!!(this.min&&this.max)},pad:function(f){var S=this.min,x=this.max,K=Math.abs(S.x-x.x)*f,ce=Math.abs(S.y-x.y)*f;return pe(ie(S.x-K,S.y-ce),ie(x.x+K,x.y+ce))},equals:function(f){return f?(f=pe(f),this.min.equals(f.getTopLeft())&&this.max.equals(f.getBottomRight())):!1}};function pe(f,S){return!f||f instanceof le?f:new le(f,S)}function ye(f,S){if(f)for(var x=S?[f,S]:f,K=0,ce=x.length;K<ce;K++)this.extend(x[K])}ye.prototype={extend:function(f){var S=this._southWest,x=this._northEast,K,ce;if(f instanceof re)K=f,ce=f;else if(f instanceof ye){if(K=f._southWest,ce=f._northEast,!K||!ce)return this}else return f?this.extend(me(f)||be(f)):this;return!S&&!x?(this._southWest=new re(K.lat,K.lng),this._northEast=new re(ce.lat,ce.lng)):(S.lat=Math.min(K.lat,S.lat),S.lng=Math.min(K.lng,S.lng),x.lat=Math.max(ce.lat,x.lat),x.lng=Math.max(ce.lng,x.lng)),this},pad:function(f){var S=this._southWest,x=this._northEast,K=Math.abs(S.lat-x.lat)*f,ce=Math.abs(S.lng-x.lng)*f;return new ye(new re(S.lat-K,S.lng-ce),new re(x.lat+K,x.lng+ce))},getCenter:function(){return new re((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new re(this.getNorth(),this.getWest())},getSouthEast:function(){return new re(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(f){typeof f[0]=="number"||f instanceof re||"lat"in f?f=me(f):f=be(f);var S=this._southWest,x=this._northEast,K,ce;return f instanceof ye?(K=f.getSouthWest(),ce=f.getNorthEast()):K=ce=f,K.lat>=S.lat&&ce.lat<=x.lat&&K.lng>=S.lng&&ce.lng<=x.lng},intersects:function(f){f=be(f);var S=this._southWest,x=this._northEast,K=f.getSouthWest(),ce=f.getNorthEast(),Ce=ce.lat>=S.lat&&K.lat<=x.lat,Ze=ce.lng>=S.lng&&K.lng<=x.lng;return Ce&&Ze},overlaps:function(f){f=be(f);var S=this._southWest,x=this._northEast,K=f.getSouthWest(),ce=f.getNorthEast(),Ce=ce.lat>S.lat&&K.lat<x.lat,Ze=ce.lng>S.lng&&K.lng<x.lng;return Ce&&Ze},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(f,S){return f?(f=be(f),this._southWest.equals(f.getSouthWest(),S)&&this._northEast.equals(f.getNorthEast(),S)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function be(f,S){return f instanceof ye?f:new ye(f,S)}function re(f,S,x){if(isNaN(f)||isNaN(S))throw new Error("Invalid LatLng object: ("+f+", "+S+")");this.lat=+f,this.lng=+S,x!==void 0&&(this.alt=+x)}re.prototype={equals:function(f,S){if(!f)return!1;f=me(f);var x=Math.max(Math.abs(this.lat-f.lat),Math.abs(this.lng-f.lng));return x<=(S===void 0?1e-9:S)},toString:function(f){return"LatLng("+v(this.lat,f)+", "+v(this.lng,f)+")"},distanceTo:function(f){return X.distance(this,me(f))},wrap:function(){return X.wrapLatLng(this)},toBounds:function(f){var S=180*f/40075017,x=S/Math.cos(Math.PI/180*this.lat);return be([this.lat-S,this.lng-x],[this.lat+S,this.lng+x])},clone:function(){return new re(this.lat,this.lng,this.alt)}};function me(f,S,x){return f instanceof re?f:D(f)&&typeof f[0]!="object"?f.length===3?new re(f[0],f[1],f[2]):f.length===2?new re(f[0],f[1]):null:f==null?f:typeof f=="object"&&"lat"in f?new re(f.lat,"lng"in f?f.lng:f.lon,f.alt):S===void 0?null:new re(f,S,x)}var ke={latLngToPoint:function(f,S){var x=this.projection.project(f),K=this.scale(S);return this.transformation._transform(x,K)},pointToLatLng:function(f,S){var x=this.scale(S),K=this.transformation.untransform(f,x);return this.projection.unproject(K)},project:function(f){return this.projection.project(f)},unproject:function(f){return this.projection.unproject(f)},scale:function(f){return 256*Math.pow(2,f)},zoom:function(f){return Math.log(f/256)/Math.LN2},getProjectedBounds:function(f){if(this.infinite)return null;var S=this.projection.bounds,x=this.scale(f),K=this.transformation.transform(S.min,x),ce=this.transformation.transform(S.max,x);return new le(K,ce)},infinite:!1,wrapLatLng:function(f){var S=this.wrapLng?d(f.lng,this.wrapLng,!0):f.lng,x=this.wrapLat?d(f.lat,this.wrapLat,!0):f.lat,K=f.alt;return new re(x,S,K)},wrapLatLngBounds:function(f){var S=f.getCenter(),x=this.wrapLatLng(S),K=S.lat-x.lat,ce=S.lng-x.lng;if(K===0&&ce===0)return f;var Ce=f.getSouthWest(),Ze=f.getNorthEast(),ht=new re(Ce.lat-K,Ce.lng-ce),pt=new re(Ze.lat-K,Ze.lng-ce);return new ye(ht,pt)}},X=r({},ke,{wrapLng:[-180,180],R:6371e3,distance:function(f,S){var x=Math.PI/180,K=f.lat*x,ce=S.lat*x,Ce=Math.sin((S.lat-f.lat)*x/2),Ze=Math.sin((S.lng-f.lng)*x/2),ht=Ce*Ce+Math.cos(K)*Math.cos(ce)*Ze*Ze,pt=2*Math.atan2(Math.sqrt(ht),Math.sqrt(1-ht));return this.R*pt}}),ue=6378137,_e={R:ue,MAX_LATITUDE:85.0511287798,project:function(f){var S=Math.PI/180,x=this.MAX_LATITUDE,K=Math.max(Math.min(x,f.lat),-x),ce=Math.sin(K*S);return new J(this.R*f.lng*S,this.R*Math.log((1+ce)/(1-ce))/2)},unproject:function(f){var S=180/Math.PI;return new re((2*Math.atan(Math.exp(f.y/this.R))-Math.PI/2)*S,f.x*S/this.R)},bounds:function(){var f=ue*Math.PI;return new le([-f,-f],[f,f])}()};function oe(f,S,x,K){if(D(f)){this._a=f[0],this._b=f[1],this._c=f[2],this._d=f[3];return}this._a=f,this._b=S,this._c=x,this._d=K}oe.prototype={transform:function(f,S){return this._transform(f.clone(),S)},_transform:function(f,S){return S=S||1,f.x=S*(this._a*f.x+this._b),f.y=S*(this._c*f.y+this._d),f},untransform:function(f,S){return S=S||1,new J((f.x/S-this._b)/this._a,(f.y/S-this._d)/this._c)}};function ae(f,S,x,K){return new oe(f,S,x,K)}var Se=r({},X,{code:"EPSG:3857",projection:_e,transformation:function(){var f=.5/(Math.PI*_e.R);return ae(f,.5,-f,.5)}()}),Me=r({},Se,{code:"EPSG:900913"});function we(f){return document.createElementNS("http://www.w3.org/2000/svg",f)}function Te(f,S){var x="",K,ce,Ce,Ze,ht,pt;for(K=0,Ce=f.length;K<Ce;K++){for(ht=f[K],ce=0,Ze=ht.length;ce<Ze;ce++)pt=ht[ce],x+=(ce?"L":"M")+pt.x+" "+pt.y;x+=S?tt.svg?"z":"x":""}return x||"M0 0"}var Ae=document.documentElement.style,Ne="ActiveXObject"in window,De=Ne&&!document.addEventListener,_t="msLaunchUri"in navigator&&!("documentMode"in document),Fe=Be("webkit"),Pe=Be("android"),je=Be("android 2")||Be("android 3"),Ve=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Ue=Pe&&Be("Google")&&Ve<537&&!("AudioNode"in window),Ke=!!window.opera,We=!_t&&Be("chrome"),ze=Be("gecko")&&!Fe&&!Ke&&!Ne,Et=!We&&Be("safari"),rt=Be("phantom"),ft="OTransition"in Ae,Ut=navigator.platform.indexOf("Win")===0,Qe=Ne&&"transition"in Ae,yt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!je,mt="MozPerspective"in Ae,Ft=!window.L_DISABLE_3D&&(Qe||yt||mt)&&!ft&&!rt,qt=typeof orientation<"u"||Be("mobile"),vt=qt&&Fe,$t=qt&&yt,dn=!window.PointerEvent&&window.MSPointerEvent,sn=!!(window.PointerEvent||dn),pn="ontouchstart"in window||!!window.TouchEvent,Ye=!window.L_NO_TOUCH&&(pn||sn),Vt=qt&&Ke,Mt=qt&&ze,Rt=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,gt=function(){var f=!1;try{var S=Object.defineProperty({},"passive",{get:function(){f=!0}});window.addEventListener("testPassiveEventSupport",m,S),window.removeEventListener("testPassiveEventSupport",m,S)}catch{}return f}(),it=function(){return!!document.createElement("canvas").getContext}(),St=!!(document.createElementNS&&we("svg").createSVGRect),Jt=!!St&&function(){var f=document.createElement("div");return f.innerHTML="<svg/>",(f.firstChild&&f.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),ut=!St&&function(){try{var f=document.createElement("div");f.innerHTML='<v:shape adj="1"/>';var S=f.firstChild;return S.style.behavior="url(#default#VML)",S&&typeof S.adj=="object"}catch{return!1}}(),jt=navigator.platform.indexOf("Mac")===0,gn=navigator.platform.indexOf("Linux")===0;function Be(f){return navigator.userAgent.toLowerCase().indexOf(f)>=0}var tt={ie:Ne,ielt9:De,edge:_t,webkit:Fe,android:Pe,android23:je,androidStock:Ue,opera:Ke,chrome:We,gecko:ze,safari:Et,phantom:rt,opera12:ft,win:Ut,ie3d:Qe,webkit3d:yt,gecko3d:mt,any3d:Ft,mobile:qt,mobileWebkit:vt,mobileWebkit3d:$t,msPointer:dn,pointer:sn,touch:Ye,touchNative:pn,mobileOpera:Vt,mobileGecko:Mt,retina:Rt,passiveEvents:gt,canvas:it,svg:St,vml:ut,inlineSvg:Jt,mac:jt,linux:gn},en=tt.msPointer?"MSPointerDown":"pointerdown",Fn=tt.msPointer?"MSPointerMove":"pointermove",Vn=tt.msPointer?"MSPointerUp":"pointerup",Zt=tt.msPointer?"MSPointerCancel":"pointercancel",cn={touchstart:en,touchmove:Fn,touchend:Vn,touchcancel:Zt},Un={touchstart:It,touchmove:Je,touchend:Je,touchcancel:Je},mn={},tn=!1;function En(f,S,x){return S==="touchstart"&&Gt(),Un[S]?(x=Un[S].bind(this,x),f.addEventListener(cn[S],x,!1),x):(console.warn("wrong event specified:",S),m)}function Ln(f,S,x){if(!cn[S]){console.warn("wrong event specified:",S);return}f.removeEventListener(cn[S],x,!1)}function xt(f){mn[f.pointerId]=f}function qe(f){mn[f.pointerId]&&(mn[f.pointerId]=f)}function kt(f){delete mn[f.pointerId]}function Gt(){tn||(document.addEventListener(en,xt,!0),document.addEventListener(Fn,qe,!0),document.addEventListener(Vn,kt,!0),document.addEventListener(Zt,kt,!0),tn=!0)}function Je(f,S){if(S.pointerType!==(S.MSPOINTER_TYPE_MOUSE||"mouse")){S.touches=[];for(var x in mn)S.touches.push(mn[x]);S.changedTouches=[S],f(S)}}function It(f,S){S.MSPOINTER_TYPE_TOUCH&&S.pointerType===S.MSPOINTER_TYPE_TOUCH&&An(S),Je(f,S)}function wn(f){var S={},x,K;for(K in f)x=f[K],S[K]=x&&x.bind?x.bind(f):x;return f=S,S.type="dblclick",S.detail=2,S.isTrusted=!1,S._simulated=!0,S}var Cn=200;function oi(f,S){f.addEventListener("dblclick",S);var x=0,K;function ce(Ce){if(Ce.detail!==1){K=Ce.detail;return}if(!(Ce.pointerType==="mouse"||Ce.sourceCapabilities&&!Ce.sourceCapabilities.firesTouchEvents)){var Ze=Ni(Ce);if(!(Ze.some(function(pt){return pt instanceof HTMLLabelElement&&pt.attributes.for})&&!Ze.some(function(pt){return pt instanceof HTMLInputElement||pt instanceof HTMLSelectElement}))){var ht=Date.now();ht-x<=Cn?(K++,K===2&&S(wn(Ce))):K=1,x=ht}}}return f.addEventListener("click",ce),{dblclick:S,simDblclick:ce}}function ri(f,S){f.removeEventListener("dblclick",S.dblclick),f.removeEventListener("click",S.simDblclick)}var ci=Jn(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),vn=Jn(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),zn=vn==="webkitTransition"||vn==="OTransition"?vn+"End":"transitionend";function Mi(f){return typeof f=="string"?document.getElementById(f):f}function wi(f,S){var x=f.style[S]||f.currentStyle&&f.currentStyle[S];if((!x||x==="auto")&&document.defaultView){var K=document.defaultView.getComputedStyle(f,null);x=K?K[S]:null}return x==="auto"?null:x}function _n(f,S,x){var K=document.createElement(f);return K.className=S||"",x&&x.appendChild(K),K}function qn(f){var S=f.parentNode;S&&S.removeChild(f)}function Er(f){for(;f.firstChild;)f.removeChild(f.firstChild)}function or(f){var S=f.parentNode;S&&S.lastChild!==f&&S.appendChild(f)}function Ri(f){var S=f.parentNode;S&&S.firstChild!==f&&S.insertBefore(f,S.firstChild)}function ar(f,S){if(f.classList!==void 0)return f.classList.contains(S);var x=qr(f);return x.length>0&&new RegExp("(^|\\s)"+S+"(\\s|$)").test(x)}function yn(f,S){if(f.classList!==void 0)for(var x=w(S),K=0,ce=x.length;K<ce;K++)f.classList.add(x[K]);else if(!ar(f,S)){var Ce=qr(f);$n(f,(Ce?Ce+" ":"")+S)}}function Gn(f,S){f.classList!==void 0?f.classList.remove(S):$n(f,k((" "+qr(f)+" ").replace(" "+S+" "," ")))}function $n(f,S){f.className.baseVal===void 0?f.className=S:f.className.baseVal=S}function qr(f){return f.correspondingElement&&(f=f.correspondingElement),f.className.baseVal===void 0?f.className:f.className.baseVal}function gi(f,S){"opacity"in f.style?f.style.opacity=S:"filter"in f.style&&Sr(f,S)}function Sr(f,S){var x=!1,K="DXImageTransform.Microsoft.Alpha";try{x=f.filters.item(K)}catch{if(S===1)return}S=Math.round(S*100),x?(x.Enabled=S!==100,x.Opacity=S):f.style.filter+=" progid:"+K+"(opacity="+S+")"}function Jn(f){for(var S=document.documentElement.style,x=0;x<f.length;x++)if(f[x]in S)return f[x];return!1}function Ir(f,S,x){var K=S||new J(0,0);f.style[ci]=(tt.ie3d?"translate("+K.x+"px,"+K.y+"px)":"translate3d("+K.x+"px,"+K.y+"px,0)")+(x?" scale("+x+")":"")}function On(f,S){f._leaflet_pos=S,tt.any3d?Ir(f,S):(f.style.left=S.x+"px",f.style.top=S.y+"px")}function Ji(f){return f._leaflet_pos||new J(0,0)}var Yi,Mr,lo;if("onselectstart"in document)Yi=function(){Sn(window,"selectstart",An)},Mr=function(){Xn(window,"selectstart",An)};else{var cs=Jn(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Yi=function(){if(cs){var f=document.documentElement.style;lo=f[cs],f[cs]="none"}},Mr=function(){cs&&(document.documentElement.style[cs]=lo,lo=void 0)}}function uo(){Sn(window,"dragstart",An)}function ks(){Xn(window,"dragstart",An)}var ei,et;function Pt(f){for(;f.tabIndex===-1;)f=f.parentNode;f.style&&(Oi(),ei=f,et=f.style.outlineStyle,f.style.outlineStyle="none",Sn(window,"keydown",Oi))}function Oi(){ei&&(ei.style.outlineStyle=et,ei=void 0,et=void 0,Xn(window,"keydown",Oi))}function Pi(f){do f=f.parentNode;while((!f.offsetWidth||!f.offsetHeight)&&f!==document.body);return f}function _i(f){var S=f.getBoundingClientRect();return{x:S.width/f.offsetWidth||1,y:S.height/f.offsetHeight||1,boundingClientRect:S}}var Zr={__proto__:null,TRANSFORM:ci,TRANSITION:vn,TRANSITION_END:zn,get:Mi,getStyle:wi,create:_n,remove:qn,empty:Er,toFront:or,toBack:Ri,hasClass:ar,addClass:yn,removeClass:Gn,setClass:$n,getClass:qr,setOpacity:gi,testProp:Jn,setTransform:Ir,setPosition:On,getPosition:Ji,get disableTextSelection(){return Yi},get enableTextSelection(){return Mr},disableImageDrag:uo,enableImageDrag:ks,preventOutline:Pt,restoreOutline:Oi,getSizedParentNode:Pi,getScale:_i};function Sn(f,S,x,K){if(S&&typeof S=="object")for(var ce in S)Yr(f,ce,S[ce],x);else{S=w(S);for(var Ce=0,Ze=S.length;Ce<Ze;Ce++)Yr(f,S[Ce],x,K)}return this}var $i="_leaflet_events";function Xn(f,S,x,K){if(arguments.length===1)xr(f),delete f[$i];else if(S&&typeof S=="object")for(var ce in S)Rn(f,ce,S[ce],x);else if(S=w(S),arguments.length===2)xr(f,function(ht){return O(S,ht)!==-1});else for(var Ce=0,Ze=S.length;Ce<Ze;Ce++)Rn(f,S[Ce],x,K);return this}function xr(f,S){for(var x in f[$i]){var K=x.split(/\d/)[0];(!S||S(K))&&Rn(f,K,null,null,x)}}var hs={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Yr(f,S,x,K){var ce=S+l(x)+(K?"_"+l(K):"");if(f[$i]&&f[$i][ce])return this;var Ce=function(ht){return x.call(K||f,ht||window.event)},Ze=Ce;!tt.touchNative&&tt.pointer&&S.indexOf("touch")===0?Ce=En(f,S,Ce):tt.touch&&S==="dblclick"?Ce=oi(f,Ce):"addEventListener"in f?S==="touchstart"||S==="touchmove"||S==="wheel"||S==="mousewheel"?f.addEventListener(hs[S]||S,Ce,tt.passiveEvents?{passive:!1}:!1):S==="mouseenter"||S==="mouseleave"?(Ce=function(ht){ht=ht||window.event,zs(f,ht)&&Ze(ht)},f.addEventListener(hs[S],Ce,!1)):f.addEventListener(S,Ze,!1):f.attachEvent("on"+S,Ce),f[$i]=f[$i]||{},f[$i][ce]=Ce}function Rn(f,S,x,K,ce){ce=ce||S+l(x)+(K?"_"+l(K):"");var Ce=f[$i]&&f[$i][ce];if(!Ce)return this;!tt.touchNative&&tt.pointer&&S.indexOf("touch")===0?Ln(f,S,Ce):tt.touch&&S==="dblclick"?ri(f,Ce):"removeEventListener"in f?f.removeEventListener(hs[S]||S,Ce,!1):f.detachEvent("on"+S,Ce),f[$i][ce]=null}function pi(f){return f.stopPropagation?f.stopPropagation():f.originalEvent?f.originalEvent._stopped=!0:f.cancelBubble=!0,this}function Fr(f){return Yr(f,"wheel",pi),this}function Tr(f){return Sn(f,"mousedown touchstart dblclick contextmenu",pi),f._leaflet_disable_click=!0,this}function An(f){return f.preventDefault?f.preventDefault():f.returnValue=!1,this}function Qi(f){return An(f),pi(f),this}function Ni(f){if(f.composedPath)return f.composedPath();for(var S=[],x=f.target;x;)S.push(x),x=x.parentNode;return S}function co(f,S){if(!S)return new J(f.clientX,f.clientY);var x=_i(S),K=x.boundingClientRect;return new J((f.clientX-K.left)/x.x-S.clientLeft,(f.clientY-K.top)/x.y-S.clientTop)}var Es=tt.linux&&tt.chrome?window.devicePixelRatio:tt.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function ho(f){return tt.edge?f.wheelDeltaY/2:f.deltaY&&f.deltaMode===0?-f.deltaY/Es:f.deltaY&&f.deltaMode===1?-f.deltaY*20:f.deltaY&&f.deltaMode===2?-f.deltaY*60:f.deltaX||f.deltaZ?0:f.wheelDelta?(f.wheelDeltaY||f.wheelDelta)/2:f.detail&&Math.abs(f.detail)<32765?-f.detail*20:f.detail?f.detail/-32765*60:0}function zs(f,S){var x=S.relatedTarget;if(!x)return!0;try{for(;x&&x!==f;)x=x.parentNode}catch{return!1}return x!==f}var Jo={__proto__:null,on:Sn,off:Xn,stopPropagation:pi,disableScrollPropagation:Fr,disableClickPropagation:Tr,preventDefault:An,stop:Qi,getPropagationPath:Ni,getMousePosition:co,getWheelDelta:ho,isExternalTarget:zs,addListener:Sn,removeListener:Xn},Ss=ne.extend({run:function(f,S,x,K){this.stop(),this._el=f,this._inProgress=!0,this._duration=x||.25,this._easeOutPower=1/Math.max(K||.5,.2),this._startPos=Ji(f),this._offset=S.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=H(this._animate,this),this._step()},_step:function(f){var S=+new Date-this._startTime,x=this._duration*1e3;S<x?this._runFrame(this._easeOut(S/x),f):(this._runFrame(1),this._complete())},_runFrame:function(f,S){var x=this._startPos.add(this._offset.multiplyBy(f));S&&x._round(),On(this._el,x),this.fire("step")},_complete:function(){j(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(f){return 1-Math.pow(1-f,this._easeOutPower)}}),Mn=ne.extend({options:{crs:Se,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(f,S){S=E(this,S),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(f),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),S.maxBounds&&this.setMaxBounds(S.maxBounds),S.zoom!==void 0&&(this._zoom=this._limitZoom(S.zoom)),S.center&&S.zoom!==void 0&&this.setView(me(S.center),S.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=vn&&tt.any3d&&!tt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Sn(this._proxy,zn,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(f,S,x){if(S=S===void 0?this._zoom:this._limitZoom(S),f=this._limitCenter(me(f),S,this.options.maxBounds),x=x||{},this._stop(),this._loaded&&!x.reset&&x!==!0){x.animate!==void 0&&(x.zoom=r({animate:x.animate},x.zoom),x.pan=r({animate:x.animate,duration:x.duration},x.pan));var K=this._zoom!==S?this._tryAnimatedZoom&&this._tryAnimatedZoom(f,S,x.zoom):this._tryAnimatedPan(f,x.pan);if(K)return clearTimeout(this._sizeTimer),this}return this._resetView(f,S,x.pan&&x.pan.noMoveStart),this},setZoom:function(f,S){return this._loaded?this.setView(this.getCenter(),f,{zoom:S}):(this._zoom=f,this)},zoomIn:function(f,S){return f=f||(tt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+f,S)},zoomOut:function(f,S){return f=f||(tt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-f,S)},setZoomAround:function(f,S,x){var K=this.getZoomScale(S),ce=this.getSize().divideBy(2),Ce=f instanceof J?f:this.latLngToContainerPoint(f),Ze=Ce.subtract(ce).multiplyBy(1-1/K),ht=this.containerPointToLatLng(ce.add(Ze));return this.setView(ht,S,{zoom:x})},_getBoundsCenterZoom:function(f,S){S=S||{},f=f.getBounds?f.getBounds():be(f);var x=ie(S.paddingTopLeft||S.padding||[0,0]),K=ie(S.paddingBottomRight||S.padding||[0,0]),ce=this.getBoundsZoom(f,!1,x.add(K));if(ce=typeof S.maxZoom=="number"?Math.min(S.maxZoom,ce):ce,ce===1/0)return{center:f.getCenter(),zoom:ce};var Ce=K.subtract(x).divideBy(2),Ze=this.project(f.getSouthWest(),ce),ht=this.project(f.getNorthEast(),ce),pt=this.unproject(Ze.add(ht).divideBy(2).add(Ce),ce);return{center:pt,zoom:ce}},fitBounds:function(f,S){if(f=be(f),!f.isValid())throw new Error("Bounds are not valid.");var x=this._getBoundsCenterZoom(f,S);return this.setView(x.center,x.zoom,S)},fitWorld:function(f){return this.fitBounds([[-90,-180],[90,180]],f)},panTo:function(f,S){return this.setView(f,this._zoom,{pan:S})},panBy:function(f,S){if(f=ie(f).round(),S=S||{},!f.x&&!f.y)return this.fire("moveend");if(S.animate!==!0&&!this.getSize().contains(f))return this._resetView(this.unproject(this.project(this.getCenter()).add(f)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ss,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),S.noMoveStart||this.fire("movestart"),S.animate!==!1){yn(this._mapPane,"leaflet-pan-anim");var x=this._getMapPanePos().subtract(f).round();this._panAnim.run(this._mapPane,x,S.duration||.25,S.easeLinearity)}else this._rawPanBy(f),this.fire("move").fire("moveend");return this},flyTo:function(f,S,x){if(x=x||{},x.animate===!1||!tt.any3d)return this.setView(f,S,x);this._stop();var K=this.project(this.getCenter()),ce=this.project(f),Ce=this.getSize(),Ze=this._zoom;f=me(f),S=S===void 0?Ze:S;var ht=Math.max(Ce.x,Ce.y),pt=ht*this.getZoomScale(Ze,S),Nt=ce.distanceTo(K)||1,Qt=1.42,In=Qt*Qt;function Hn(xi){var bu=xi?-1:1,S4=xi?pt:ht,I4=pt*pt-ht*ht+bu*In*In*Nt*Nt,M4=2*S4*In*Nt,mh=I4/M4,C0=Math.sqrt(mh*mh+1)-mh,T4=C0<1e-9?-18:Math.log(C0);return T4}function fr(xi){return(Math.exp(xi)-Math.exp(-xi))/2}function Hi(xi){return(Math.exp(xi)+Math.exp(-xi))/2}function Qr(xi){return fr(xi)/Hi(xi)}var Pr=Hn(0);function ua(xi){return ht*(Hi(Pr)/Hi(Pr+Qt*xi))}function b4(xi){return ht*(Hi(Pr)*Qr(Pr+Qt*xi)-fr(Pr))/In}function w4(xi){return 1-Math.pow(1-xi,1.5)}var k4=Date.now(),T0=(Hn(1)-Pr)/Qt,E4=x.duration?1e3*x.duration:1e3*T0*.8;function L0(){var xi=(Date.now()-k4)/E4,bu=w4(xi)*T0;xi<=1?(this._flyToFrame=H(L0,this),this._move(this.unproject(K.add(ce.subtract(K).multiplyBy(b4(bu)/Nt)),Ze),this.getScaleZoom(ht/ua(bu),Ze),{flyTo:!0})):this._move(f,S)._moveEnd(!0)}return this._moveStart(!0,x.noMoveStart),L0.call(this),this},flyToBounds:function(f,S){var x=this._getBoundsCenterZoom(f,S);return this.flyTo(x.center,x.zoom,S)},setMaxBounds:function(f){return f=be(f),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),f.isValid()?(this.options.maxBounds=f,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(f){var S=this.options.minZoom;return this.options.minZoom=f,this._loaded&&S!==f&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(f):this},setMaxZoom:function(f){var S=this.options.maxZoom;return this.options.maxZoom=f,this._loaded&&S!==f&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(f):this},panInsideBounds:function(f,S){this._enforcingBounds=!0;var x=this.getCenter(),K=this._limitCenter(x,this._zoom,be(f));return x.equals(K)||this.panTo(K,S),this._enforcingBounds=!1,this},panInside:function(f,S){S=S||{};var x=ie(S.paddingTopLeft||S.padding||[0,0]),K=ie(S.paddingBottomRight||S.padding||[0,0]),ce=this.project(this.getCenter()),Ce=this.project(f),Ze=this.getPixelBounds(),ht=pe([Ze.min.add(x),Ze.max.subtract(K)]),pt=ht.getSize();if(!ht.contains(Ce)){this._enforcingBounds=!0;var Nt=Ce.subtract(ht.getCenter()),Qt=ht.extend(Ce).getSize().subtract(pt);ce.x+=Nt.x<0?-Qt.x:Qt.x,ce.y+=Nt.y<0?-Qt.y:Qt.y,this.panTo(this.unproject(ce),S),this._enforcingBounds=!1}return this},invalidateSize:function(f){if(!this._loaded)return this;f=r({animate:!1,pan:!0},f===!0?{animate:!0}:f);var S=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var x=this.getSize(),K=S.divideBy(2).round(),ce=x.divideBy(2).round(),Ce=K.subtract(ce);return!Ce.x&&!Ce.y?this:(f.animate&&f.pan?this.panBy(Ce):(f.pan&&this._rawPanBy(Ce),this.fire("move"),f.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:S,newSize:x}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(f){if(f=this._locateOptions=r({timeout:1e4,watch:!1},f),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var S=o(this._handleGeolocationResponse,this),x=o(this._handleGeolocationError,this);return f.watch?this._locationWatchId=navigator.geolocation.watchPosition(S,x,f):navigator.geolocation.getCurrentPosition(S,x,f),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(f){if(this._container._leaflet_id){var S=f.code,x=f.message||(S===1?"permission denied":S===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:S,message:"Geolocation error: "+x+"."})}},_handleGeolocationResponse:function(f){if(this._container._leaflet_id){var S=f.coords.latitude,x=f.coords.longitude,K=new re(S,x),ce=K.toBounds(f.coords.accuracy*2),Ce=this._locateOptions;if(Ce.setView){var Ze=this.getBoundsZoom(ce);this.setView(K,Ce.maxZoom?Math.min(Ze,Ce.maxZoom):Ze)}var ht={latlng:K,bounds:ce,timestamp:f.timestamp};for(var pt in f.coords)typeof f.coords[pt]=="number"&&(ht[pt]=f.coords[pt]);this.fire("locationfound",ht)}},addHandler:function(f,S){if(!S)return this;var x=this[f]=new S(this);return this._handlers.push(x),this.options[f]&&x.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),qn(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(j(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var f;for(f in this._layers)this._layers[f].remove();for(f in this._panes)qn(this._panes[f]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(f,S){var x="leaflet-pane"+(f?" leaflet-"+f.replace("Pane","")+"-pane":""),K=_n("div",x,S||this._mapPane);return f&&(this._panes[f]=K),K},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var f=this.getPixelBounds(),S=this.unproject(f.getBottomLeft()),x=this.unproject(f.getTopRight());return new ye(S,x)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(f,S,x){f=be(f),x=ie(x||[0,0]);var K=this.getZoom()||0,ce=this.getMinZoom(),Ce=this.getMaxZoom(),Ze=f.getNorthWest(),ht=f.getSouthEast(),pt=this.getSize().subtract(x),Nt=pe(this.project(ht,K),this.project(Ze,K)).getSize(),Qt=tt.any3d?this.options.zoomSnap:1,In=pt.x/Nt.x,Hn=pt.y/Nt.y,fr=S?Math.max(In,Hn):Math.min(In,Hn);return K=this.getScaleZoom(fr,K),Qt&&(K=Math.round(K/(Qt/100))*(Qt/100),K=S?Math.ceil(K/Qt)*Qt:Math.floor(K/Qt)*Qt),Math.max(ce,Math.min(Ce,K))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new J(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(f,S){var x=this._getTopLeftPoint(f,S);return new le(x,x.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(f){return this.options.crs.getProjectedBounds(f===void 0?this.getZoom():f)},getPane:function(f){return typeof f=="string"?this._panes[f]:f},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(f,S){var x=this.options.crs;return S=S===void 0?this._zoom:S,x.scale(f)/x.scale(S)},getScaleZoom:function(f,S){var x=this.options.crs;S=S===void 0?this._zoom:S;var K=x.zoom(f*x.scale(S));return isNaN(K)?1/0:K},project:function(f,S){return S=S===void 0?this._zoom:S,this.options.crs.latLngToPoint(me(f),S)},unproject:function(f,S){return S=S===void 0?this._zoom:S,this.options.crs.pointToLatLng(ie(f),S)},layerPointToLatLng:function(f){var S=ie(f).add(this.getPixelOrigin());return this.unproject(S)},latLngToLayerPoint:function(f){var S=this.project(me(f))._round();return S._subtract(this.getPixelOrigin())},wrapLatLng:function(f){return this.options.crs.wrapLatLng(me(f))},wrapLatLngBounds:function(f){return this.options.crs.wrapLatLngBounds(be(f))},distance:function(f,S){return this.options.crs.distance(me(f),me(S))},containerPointToLayerPoint:function(f){return ie(f).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(f){return ie(f).add(this._getMapPanePos())},containerPointToLatLng:function(f){var S=this.containerPointToLayerPoint(ie(f));return this.layerPointToLatLng(S)},latLngToContainerPoint:function(f){return this.layerPointToContainerPoint(this.latLngToLayerPoint(me(f)))},mouseEventToContainerPoint:function(f){return co(f,this._container)},mouseEventToLayerPoint:function(f){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(f))},mouseEventToLatLng:function(f){return this.layerPointToLatLng(this.mouseEventToLayerPoint(f))},_initContainer:function(f){var S=this._container=Mi(f);if(S){if(S._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Sn(S,"scroll",this._onScroll,this),this._containerId=l(S)},_initLayout:function(){var f=this._container;this._fadeAnimated=this.options.fadeAnimation&&tt.any3d,yn(f,"leaflet-container"+(tt.touch?" leaflet-touch":"")+(tt.retina?" leaflet-retina":"")+(tt.ielt9?" leaflet-oldie":"")+(tt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var S=wi(f,"position");S!=="absolute"&&S!=="relative"&&S!=="fixed"&&S!=="sticky"&&(f.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var f=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),On(this._mapPane,new J(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(yn(f.markerPane,"leaflet-zoom-hide"),yn(f.shadowPane,"leaflet-zoom-hide"))},_resetView:function(f,S,x){On(this._mapPane,new J(0,0));var K=!this._loaded;this._loaded=!0,S=this._limitZoom(S),this.fire("viewprereset");var ce=this._zoom!==S;this._moveStart(ce,x)._move(f,S)._moveEnd(ce),this.fire("viewreset"),K&&this.fire("load")},_moveStart:function(f,S){return f&&this.fire("zoomstart"),S||this.fire("movestart"),this},_move:function(f,S,x,K){S===void 0&&(S=this._zoom);var ce=this._zoom!==S;return this._zoom=S,this._lastCenter=f,this._pixelOrigin=this._getNewPixelOrigin(f),K?x&&x.pinch&&this.fire("zoom",x):((ce||x&&x.pinch)&&this.fire("zoom",x),this.fire("move",x)),this},_moveEnd:function(f){return f&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return j(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(f){On(this._mapPane,this._getMapPanePos().subtract(f))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(f){this._targets={},this._targets[l(this._container)]=this;var S=f?Xn:Sn;S(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&S(window,"resize",this._onResize,this),tt.any3d&&this.options.transform3DLimit&&(f?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){j(this._resizeRequest),this._resizeRequest=H(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var f=this._getMapPanePos();Math.max(Math.abs(f.x),Math.abs(f.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(f,S){for(var x=[],K,ce=S==="mouseout"||S==="mouseover",Ce=f.target||f.srcElement,Ze=!1;Ce;){if(K=this._targets[l(Ce)],K&&(S==="click"||S==="preclick")&&this._draggableMoved(K)){Ze=!0;break}if(K&&K.listens(S,!0)&&(ce&&!zs(Ce,f)||(x.push(K),ce))||Ce===this._container)break;Ce=Ce.parentNode}return!x.length&&!Ze&&!ce&&this.listens(S,!0)&&(x=[this]),x},_isClickDisabled:function(f){for(;f&&f!==this._container;){if(f._leaflet_disable_click)return!0;f=f.parentNode}},_handleDOMEvent:function(f){var S=f.target||f.srcElement;if(!(!this._loaded||S._leaflet_disable_events||f.type==="click"&&this._isClickDisabled(S))){var x=f.type;x==="mousedown"&&Pt(S),this._fireDOMEvent(f,x)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(f,S,x){if(f.type==="click"){var K=r({},f);K.type="preclick",this._fireDOMEvent(K,K.type,x)}var ce=this._findEventTargets(f,S);if(x){for(var Ce=[],Ze=0;Ze<x.length;Ze++)x[Ze].listens(S,!0)&&Ce.push(x[Ze]);ce=Ce.concat(ce)}if(ce.length){S==="contextmenu"&&An(f);var ht=ce[0],pt={originalEvent:f};if(f.type!=="keypress"&&f.type!=="keydown"&&f.type!=="keyup"){var Nt=ht.getLatLng&&(!ht._radius||ht._radius<=10);pt.containerPoint=Nt?this.latLngToContainerPoint(ht.getLatLng()):this.mouseEventToContainerPoint(f),pt.layerPoint=this.containerPointToLayerPoint(pt.containerPoint),pt.latlng=Nt?ht.getLatLng():this.layerPointToLatLng(pt.layerPoint)}for(Ze=0;Ze<ce.length;Ze++)if(ce[Ze].fire(S,pt,!0),pt.originalEvent._stopped||ce[Ze].options.bubblingMouseEvents===!1&&O(this._mouseEvents,S)!==-1)return}},_draggableMoved:function(f){return f=f.dragging&&f.dragging.enabled()?f:this,f.dragging&&f.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var f=0,S=this._handlers.length;f<S;f++)this._handlers[f].disable()},whenReady:function(f,S){return this._loaded?f.call(S||this,{target:this}):this.on("load",f,S),this},_getMapPanePos:function(){return Ji(this._mapPane)||new J(0,0)},_moved:function(){var f=this._getMapPanePos();return f&&!f.equals([0,0])},_getTopLeftPoint:function(f,S){var x=f&&S!==void 0?this._getNewPixelOrigin(f,S):this.getPixelOrigin();return x.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(f,S){var x=this.getSize()._divideBy(2);return this.project(f,S)._subtract(x)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(f,S,x){var K=this._getNewPixelOrigin(x,S);return this.project(f,S)._subtract(K)},_latLngBoundsToNewLayerBounds:function(f,S,x){var K=this._getNewPixelOrigin(x,S);return pe([this.project(f.getSouthWest(),S)._subtract(K),this.project(f.getNorthWest(),S)._subtract(K),this.project(f.getSouthEast(),S)._subtract(K),this.project(f.getNorthEast(),S)._subtract(K)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(f){return this.latLngToLayerPoint(f).subtract(this._getCenterLayerPoint())},_limitCenter:function(f,S,x){if(!x)return f;var K=this.project(f,S),ce=this.getSize().divideBy(2),Ce=new le(K.subtract(ce),K.add(ce)),Ze=this._getBoundsOffset(Ce,x,S);return Math.abs(Ze.x)<=1&&Math.abs(Ze.y)<=1?f:this.unproject(K.add(Ze),S)},_limitOffset:function(f,S){if(!S)return f;var x=this.getPixelBounds(),K=new le(x.min.add(f),x.max.add(f));return f.add(this._getBoundsOffset(K,S))},_getBoundsOffset:function(f,S,x){var K=pe(this.project(S.getNorthEast(),x),this.project(S.getSouthWest(),x)),ce=K.min.subtract(f.min),Ce=K.max.subtract(f.max),Ze=this._rebound(ce.x,-Ce.x),ht=this._rebound(ce.y,-Ce.y);return new J(Ze,ht)},_rebound:function(f,S){return f+S>0?Math.round(f-S)/2:Math.max(0,Math.ceil(f))-Math.max(0,Math.floor(S))},_limitZoom:function(f){var S=this.getMinZoom(),x=this.getMaxZoom(),K=tt.any3d?this.options.zoomSnap:1;return K&&(f=Math.round(f/K)*K),Math.max(S,Math.min(x,f))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Gn(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(f,S){var x=this._getCenterOffset(f)._trunc();return(S&&S.animate)!==!0&&!this.getSize().contains(x)?!1:(this.panBy(x,S),!0)},_createAnimProxy:function(){var f=this._proxy=_n("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(f),this.on("zoomanim",function(S){var x=ci,K=this._proxy.style[x];Ir(this._proxy,this.project(S.center,S.zoom),this.getZoomScale(S.zoom,1)),K===this._proxy.style[x]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){qn(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var f=this.getCenter(),S=this.getZoom();Ir(this._proxy,this.project(f,S),this.getZoomScale(S,1))},_catchTransitionEnd:function(f){this._animatingZoom&&f.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(f,S,x){if(this._animatingZoom)return!0;if(x=x||{},!this._zoomAnimated||x.animate===!1||this._nothingToAnimate()||Math.abs(S-this._zoom)>this.options.zoomAnimationThreshold)return!1;var K=this.getZoomScale(S),ce=this._getCenterOffset(f)._divideBy(1-1/K);return x.animate!==!0&&!this.getSize().contains(ce)?!1:(H(function(){this._moveStart(!0,x.noMoveStart||!1)._animateZoom(f,S,!0)},this),!0)},_animateZoom:function(f,S,x,K){this._mapPane&&(x&&(this._animatingZoom=!0,this._animateToCenter=f,this._animateToZoom=S,yn(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:f,zoom:S,noUpdate:K}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Gn(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Gs(f,S){return new Mn(f,S)}var er=W.extend({options:{position:"topright"},initialize:function(f){E(this,f)},getPosition:function(){return this.options.position},setPosition:function(f){var S=this._map;return S&&S.removeControl(this),this.options.position=f,S&&S.addControl(this),this},getContainer:function(){return this._container},addTo:function(f){this.remove(),this._map=f;var S=this._container=this.onAdd(f),x=this.getPosition(),K=f._controlCorners[x];return yn(S,"leaflet-control"),x.indexOf("bottom")!==-1?K.insertBefore(S,K.firstChild):K.appendChild(S),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(qn(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(f){this._map&&f&&f.screenX>0&&f.screenY>0&&this._map.getContainer().focus()}}),ki=function(f){return new er(f)};Mn.include({addControl:function(f){return f.addTo(this),this},removeControl:function(f){return f.remove(),this},_initControlPos:function(){var f=this._controlCorners={},S="leaflet-",x=this._controlContainer=_n("div",S+"control-container",this._container);function K(ce,Ce){var Ze=S+ce+" "+S+Ce;f[ce+Ce]=_n("div",Ze,x)}K("top","left"),K("top","right"),K("bottom","left"),K("bottom","right")},_clearControlPos:function(){for(var f in this._controlCorners)qn(this._controlCorners[f]);qn(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var jr=er.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(f,S,x,K){return x<K?-1:K<x?1:0}},initialize:function(f,S,x){E(this,x),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var K in f)this._addLayer(f[K],K);for(K in S)this._addLayer(S[K],K,!0)},onAdd:function(f){this._initLayout(),this._update(),this._map=f,f.on("zoomend",this._checkDisabledLayers,this);for(var S=0;S<this._layers.length;S++)this._layers[S].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(f){return er.prototype.addTo.call(this,f),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var f=0;f<this._layers.length;f++)this._layers[f].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(f,S){return this._addLayer(f,S),this._map?this._update():this},addOverlay:function(f,S){return this._addLayer(f,S,!0),this._map?this._update():this},removeLayer:function(f){f.off("add remove",this._onLayerChange,this);var S=this._getLayer(l(f));return S&&this._layers.splice(this._layers.indexOf(S),1),this._map?this._update():this},expand:function(){yn(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var f=this._map.getSize().y-(this._container.offsetTop+50);return f<this._section.clientHeight?(yn(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=f+"px"):Gn(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Gn(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var f="leaflet-control-layers",S=this._container=_n("div",f),x=this.options.collapsed;S.setAttribute("aria-haspopup",!0),Tr(S),Fr(S);var K=this._section=_n("section",f+"-list");x&&(this._map.on("click",this.collapse,this),Sn(S,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var ce=this._layersLink=_n("a",f+"-toggle",S);ce.href="#",ce.title="Layers",ce.setAttribute("role","button"),Sn(ce,{keydown:function(Ce){Ce.keyCode===13&&this._expandSafely()},click:function(Ce){An(Ce),this._expandSafely()}},this),x||this.expand(),this._baseLayersList=_n("div",f+"-base",K),this._separator=_n("div",f+"-separator",K),this._overlaysList=_n("div",f+"-overlays",K),S.appendChild(K)},_getLayer:function(f){for(var S=0;S<this._layers.length;S++)if(this._layers[S]&&l(this._layers[S].layer)===f)return this._layers[S]},_addLayer:function(f,S,x){this._map&&f.on("add remove",this._onLayerChange,this),this._layers.push({layer:f,name:S,overlay:x}),this.options.sortLayers&&this._layers.sort(o(function(K,ce){return this.options.sortFunction(K.layer,ce.layer,K.name,ce.name)},this)),this.options.autoZIndex&&f.setZIndex&&(this._lastZIndex++,f.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Er(this._baseLayersList),Er(this._overlaysList),this._layerControlInputs=[];var f,S,x,K,ce=0;for(x=0;x<this._layers.length;x++)K=this._layers[x],this._addItem(K),S=S||K.overlay,f=f||!K.overlay,ce+=K.overlay?0:1;return this.options.hideSingleBase&&(f=f&&ce>1,this._baseLayersList.style.display=f?"":"none"),this._separator.style.display=S&&f?"":"none",this},_onLayerChange:function(f){this._handlingClick||this._update();var S=this._getLayer(l(f.target)),x=S.overlay?f.type==="add"?"overlayadd":"overlayremove":f.type==="add"?"baselayerchange":null;x&&this._map.fire(x,S)},_createRadioElement:function(f,S){var x='<input type="radio" class="leaflet-control-layers-selector" name="'+f+'"'+(S?' checked="checked"':"")+"/>",K=document.createElement("div");return K.innerHTML=x,K.firstChild},_addItem:function(f){var S=document.createElement("label"),x=this._map.hasLayer(f.layer),K;f.overlay?(K=document.createElement("input"),K.type="checkbox",K.className="leaflet-control-layers-selector",K.defaultChecked=x):K=this._createRadioElement("leaflet-base-layers_"+l(this),x),this._layerControlInputs.push(K),K.layerId=l(f.layer),Sn(K,"click",this._onInputClick,this);var ce=document.createElement("span");ce.innerHTML=" "+f.name;var Ce=document.createElement("span");S.appendChild(Ce),Ce.appendChild(K),Ce.appendChild(ce);var Ze=f.overlay?this._overlaysList:this._baseLayersList;return Ze.appendChild(S),this._checkDisabledLayers(),S},_onInputClick:function(){if(!this._preventClick){var f=this._layerControlInputs,S,x,K=[],ce=[];this._handlingClick=!0;for(var Ce=f.length-1;Ce>=0;Ce--)S=f[Ce],x=this._getLayer(S.layerId).layer,S.checked?K.push(x):S.checked||ce.push(x);for(Ce=0;Ce<ce.length;Ce++)this._map.hasLayer(ce[Ce])&&this._map.removeLayer(ce[Ce]);for(Ce=0;Ce<K.length;Ce++)this._map.hasLayer(K[Ce])||this._map.addLayer(K[Ce]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var f=this._layerControlInputs,S,x,K=this._map.getZoom(),ce=f.length-1;ce>=0;ce--)S=f[ce],x=this._getLayer(S.layerId).layer,S.disabled=x.options.minZoom!==void 0&&K<x.options.minZoom||x.options.maxZoom!==void 0&&K>x.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var f=this._section;this._preventClick=!0,Sn(f,"click",An),this.expand();var S=this;setTimeout(function(){Xn(f,"click",An),S._preventClick=!1})}}),Qo=function(f,S,x){return new jr(f,S,x)},Br=er.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(f){var S="leaflet-control-zoom",x=_n("div",S+" leaflet-bar"),K=this.options;return this._zoomInButton=this._createButton(K.zoomInText,K.zoomInTitle,S+"-in",x,this._zoomIn),this._zoomOutButton=this._createButton(K.zoomOutText,K.zoomOutTitle,S+"-out",x,this._zoomOut),this._updateDisabled(),f.on("zoomend zoomlevelschange",this._updateDisabled,this),x},onRemove:function(f){f.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(f){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(f.shiftKey?3:1))},_zoomOut:function(f){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(f.shiftKey?3:1))},_createButton:function(f,S,x,K,ce){var Ce=_n("a",x,K);return Ce.innerHTML=f,Ce.href="#",Ce.title=S,Ce.setAttribute("role","button"),Ce.setAttribute("aria-label",S),Tr(Ce),Sn(Ce,"click",Qi),Sn(Ce,"click",ce,this),Sn(Ce,"click",this._refocusOnMap,this),Ce},_updateDisabled:function(){var f=this._map,S="leaflet-disabled";Gn(this._zoomInButton,S),Gn(this._zoomOutButton,S),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||f._zoom===f.getMinZoom())&&(yn(this._zoomOutButton,S),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||f._zoom===f.getMaxZoom())&&(yn(this._zoomInButton,S),this._zoomInButton.setAttribute("aria-disabled","true"))}});Mn.mergeOptions({zoomControl:!0}),Mn.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Br,this.addControl(this.zoomControl))});var Hs=function(f){return new Br(f)},Wr=er.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(f){var S="leaflet-control-scale",x=_n("div",S),K=this.options;return this._addScales(K,S+"-line",x),f.on(K.updateWhenIdle?"moveend":"move",this._update,this),f.whenReady(this._update,this),x},onRemove:function(f){f.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(f,S,x){f.metric&&(this._mScale=_n("div",S,x)),f.imperial&&(this._iScale=_n("div",S,x))},_update:function(){var f=this._map,S=f.getSize().y/2,x=f.distance(f.containerPointToLatLng([0,S]),f.containerPointToLatLng([this.options.maxWidth,S]));this._updateScales(x)},_updateScales:function(f){this.options.metric&&f&&this._updateMetric(f),this.options.imperial&&f&&this._updateImperial(f)},_updateMetric:function(f){var S=this._getRoundNum(f),x=S<1e3?S+" m":S/1e3+" km";this._updateScale(this._mScale,x,S/f)},_updateImperial:function(f){var S=f*3.2808399,x,K,ce;S>5280?(x=S/5280,K=this._getRoundNum(x),this._updateScale(this._iScale,K+" mi",K/x)):(ce=this._getRoundNum(S),this._updateScale(this._iScale,ce+" ft",ce/S))},_updateScale:function(f,S,x){f.style.width=Math.round(this.options.maxWidth*x)+"px",f.innerHTML=S},_getRoundNum:function(f){var S=Math.pow(10,(Math.floor(f)+"").length-1),x=f/S;return x=x>=10?10:x>=5?5:x>=3?3:x>=2?2:1,S*x}}),ea=function(f){return new Wr(f)},lr='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Us=er.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(tt.inlineSvg?lr+" ":"")+"Leaflet</a>"},initialize:function(f){E(this,f),this._attributions={}},onAdd:function(f){f.attributionControl=this,this._container=_n("div","leaflet-control-attribution"),Tr(this._container);for(var S in f._layers)f._layers[S].getAttribution&&this.addAttribution(f._layers[S].getAttribution());return this._update(),f.on("layeradd",this._addAttribution,this),this._container},onRemove:function(f){f.off("layeradd",this._addAttribution,this)},_addAttribution:function(f){f.layer.getAttribution&&(this.addAttribution(f.layer.getAttribution()),f.layer.once("remove",function(){this.removeAttribution(f.layer.getAttribution())},this))},setPrefix:function(f){return this.options.prefix=f,this._update(),this},addAttribution:function(f){return f?(this._attributions[f]||(this._attributions[f]=0),this._attributions[f]++,this._update(),this):this},removeAttribution:function(f){return f?(this._attributions[f]&&(this._attributions[f]--,this._update()),this):this},_update:function(){if(this._map){var f=[];for(var S in this._attributions)this._attributions[S]&&f.push(S);var x=[];this.options.prefix&&x.push(this.options.prefix),f.length&&x.push(f.join(", ")),this._container.innerHTML=x.join(' <span aria-hidden="true">|</span> ')}}});Mn.mergeOptions({attributionControl:!0}),Mn.addInitHook(function(){this.options.attributionControl&&new Us().addTo(this)});var ta=function(f){return new Us(f)};er.Layers=jr,er.Zoom=Br,er.Scale=Wr,er.Attribution=Us,ki.layers=Qo,ki.zoom=Hs,ki.scale=ea,ki.attribution=ta;var ur=W.extend({initialize:function(f){this._map=f},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ur.addTo=function(f,S){return f.addHandler(S,this),this};var qs={Events:q},Ao=tt.touch?"touchstart mousedown":"mousedown",Lr=ne.extend({options:{clickTolerance:3},initialize:function(f,S,x,K){E(this,K),this._element=f,this._dragStartTarget=S||f,this._preventOutline=x},enable:function(){this._enabled||(Sn(this._dragStartTarget,Ao,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Lr._dragging===this&&this.finishDrag(!0),Xn(this._dragStartTarget,Ao,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(f){if(this._enabled&&(this._moved=!1,!ar(this._element,"leaflet-zoom-anim"))){if(f.touches&&f.touches.length!==1){Lr._dragging===this&&this.finishDrag();return}if(!(Lr._dragging||f.shiftKey||f.which!==1&&f.button!==1&&!f.touches)&&(Lr._dragging=this,this._preventOutline&&Pt(this._element),uo(),Yi(),!this._moving)){this.fire("down");var S=f.touches?f.touches[0]:f,x=Pi(this._element);this._startPoint=new J(S.clientX,S.clientY),this._startPos=Ji(this._element),this._parentScale=_i(x);var K=f.type==="mousedown";Sn(document,K?"mousemove":"touchmove",this._onMove,this),Sn(document,K?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(f){if(this._enabled){if(f.touches&&f.touches.length>1){this._moved=!0;return}var S=f.touches&&f.touches.length===1?f.touches[0]:f,x=new J(S.clientX,S.clientY)._subtract(this._startPoint);!x.x&&!x.y||Math.abs(x.x)+Math.abs(x.y)<this.options.clickTolerance||(x.x/=this._parentScale.x,x.y/=this._parentScale.y,An(f),this._moved||(this.fire("dragstart"),this._moved=!0,yn(document.body,"leaflet-dragging"),this._lastTarget=f.target||f.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),yn(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(x),this._moving=!0,this._lastEvent=f,this._updatePosition())}},_updatePosition:function(){var f={originalEvent:this._lastEvent};this.fire("predrag",f),On(this._element,this._newPos),this.fire("drag",f)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(f){Gn(document.body,"leaflet-dragging"),this._lastTarget&&(Gn(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Xn(document,"mousemove touchmove",this._onMove,this),Xn(document,"mouseup touchend touchcancel",this._onUp,this),ks(),Mr();var S=this._moved&&this._moving;this._moving=!1,Lr._dragging=!1,S&&this.fire("dragend",{noInertia:f,distance:this._newPos.distanceTo(this._startPos)})}});function uu(f,S,x){var K,ce=[1,4,2,8],Ce,Ze,ht,pt,Nt,Qt,In,Hn;for(Ce=0,Qt=f.length;Ce<Qt;Ce++)f[Ce]._code=Di(f[Ce],S);for(ht=0;ht<4;ht++){for(In=ce[ht],K=[],Ce=0,Qt=f.length,Ze=Qt-1;Ce<Qt;Ze=Ce++)pt=f[Ce],Nt=f[Ze],pt._code&In?Nt._code&In||(Hn=Ro(Nt,pt,In,S,x),Hn._code=Di(Hn,S),K.push(Hn)):(Nt._code&In&&(Hn=Ro(Nt,pt,In,S,x),Hn._code=Di(Hn,S),K.push(Hn)),K.push(pt));f=K}return f}function cu(f,S){var x,K,ce,Ce,Ze,ht,pt,Nt,Qt;if(!f||f.length===0)throw new Error("latlngs not passed");hr(f)||(console.warn("latlngs are not flat! Only the first ring will be used"),f=f[0]);var In=me([0,0]),Hn=be(f),fr=Hn.getNorthWest().distanceTo(Hn.getSouthWest())*Hn.getNorthEast().distanceTo(Hn.getNorthWest());fr<1700&&(In=fs(f));var Hi=f.length,Qr=[];for(x=0;x<Hi;x++){var Pr=me(f[x]);Qr.push(S.project(me([Pr.lat-In.lat,Pr.lng-In.lng])))}for(ht=pt=Nt=0,x=0,K=Hi-1;x<Hi;K=x++)ce=Qr[x],Ce=Qr[K],Ze=ce.y*Ce.x-Ce.y*ce.x,pt+=(ce.x+Ce.x)*Ze,Nt+=(ce.y+Ce.y)*Ze,ht+=Ze*3;ht===0?Qt=Qr[0]:Qt=[pt/ht,Nt/ht];var ua=S.unproject(ie(Qt));return me([ua.lat+In.lat,ua.lng+In.lng])}function fs(f){for(var S=0,x=0,K=0,ce=0;ce<f.length;ce++){var Ce=me(f[ce]);S+=Ce.lat,x+=Ce.lng,K++}return me([S/K,x/K])}var cr={__proto__:null,clipPolygon:uu,polygonCenter:cu,centroid:fs};function hu(f,S){if(!S||!f.length)return f.slice();var x=S*S;return f=Ja(f,x),f=Ka(f,x),f}function Xa(f,S,x){return Math.sqrt(xo(f,S,x,!0))}function lh(f,S,x){return xo(f,S,x)}function Ka(f,S){var x=f.length,K=typeof Uint8Array<"u"?Uint8Array:Array,ce=new K(x);ce[0]=ce[x-1]=1,na(f,ce,S,0,x-1);var Ce,Ze=[];for(Ce=0;Ce<x;Ce++)ce[Ce]&&Ze.push(f[Ce]);return Ze}function na(f,S,x,K,ce){var Ce=0,Ze,ht,pt;for(ht=K+1;ht<=ce-1;ht++)pt=xo(f[ht],f[K],f[ce],!0),pt>Ce&&(Ze=ht,Ce=pt);Ce>x&&(S[Ze]=1,na(f,S,x,K,Ze),na(f,S,x,Ze,ce))}function Ja(f,S){for(var x=[f[0]],K=1,ce=0,Ce=f.length;K<Ce;K++)Oo(f[K],f[ce])>S&&(x.push(f[K]),ce=K);return ce<Ce-1&&x.push(f[Ce-1]),x}var Qa;function Cr(f,S,x,K,ce){var Ce=K?Qa:Di(f,x),Ze=Di(S,x),ht,pt,Nt;for(Qa=Ze;;){if(!(Ce|Ze))return[f,S];if(Ce&Ze)return!1;ht=Ce||Ze,pt=Ro(f,S,ht,x,ce),Nt=Di(pt,x),ht===Ce?(f=pt,Ce=Nt):(S=pt,Ze=Nt)}}function Ro(f,S,x,K,ce){var Ce=S.x-f.x,Ze=S.y-f.y,ht=K.min,pt=K.max,Nt,Qt;return x&8?(Nt=f.x+Ce*(pt.y-f.y)/Ze,Qt=pt.y):x&4?(Nt=f.x+Ce*(ht.y-f.y)/Ze,Qt=ht.y):x&2?(Nt=pt.x,Qt=f.y+Ze*(pt.x-f.x)/Ce):x&1&&(Nt=ht.x,Qt=f.y+Ze*(ht.x-f.x)/Ce),new J(Nt,Qt,ce)}function Di(f,S){var x=0;return f.x<S.min.x?x|=1:f.x>S.max.x&&(x|=2),f.y<S.min.y?x|=4:f.y>S.max.y&&(x|=8),x}function Oo(f,S){var x=S.x-f.x,K=S.y-f.y;return x*x+K*K}function xo(f,S,x,K){var ce=S.x,Ce=S.y,Ze=x.x-ce,ht=x.y-Ce,pt=Ze*Ze+ht*ht,Nt;return pt>0&&(Nt=((f.x-ce)*Ze+(f.y-Ce)*ht)/pt,Nt>1?(ce=x.x,Ce=x.y):Nt>0&&(ce+=Ze*Nt,Ce+=ht*Nt)),Ze=f.x-ce,ht=f.y-Ce,K?Ze*Ze+ht*ht:new J(ce,Ce)}function hr(f){return!D(f[0])||typeof f[0][0]!="object"&&typeof f[0][0]<"u"}function el(f){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),hr(f)}function tl(f,S){var x,K,ce,Ce,Ze,ht,pt,Nt;if(!f||f.length===0)throw new Error("latlngs not passed");hr(f)||(console.warn("latlngs are not flat! Only the first ring will be used"),f=f[0]);var Qt=me([0,0]),In=be(f),Hn=In.getNorthWest().distanceTo(In.getSouthWest())*In.getNorthEast().distanceTo(In.getNorthWest());Hn<1700&&(Qt=fs(f));var fr=f.length,Hi=[];for(x=0;x<fr;x++){var Qr=me(f[x]);Hi.push(S.project(me([Qr.lat-Qt.lat,Qr.lng-Qt.lng])))}for(x=0,K=0;x<fr-1;x++)K+=Hi[x].distanceTo(Hi[x+1])/2;if(K===0)Nt=Hi[0];else for(x=0,Ce=0;x<fr-1;x++)if(Ze=Hi[x],ht=Hi[x+1],ce=Ze.distanceTo(ht),Ce+=ce,Ce>K){pt=(Ce-K)/ce,Nt=[ht.x-pt*(ht.x-Ze.x),ht.y-pt*(ht.y-Ze.y)];break}var Pr=S.unproject(ie(Nt));return me([Pr.lat+Qt.lat,Pr.lng+Qt.lng])}var nl={__proto__:null,simplify:hu,pointToSegmentDistance:Xa,closestPointOnSegment:lh,clipSegment:Cr,_getEdgeIntersection:Ro,_getBitCode:Di,_sqClosestPointOnSegment:xo,isFlat:hr,_flat:el,polylineCenter:tl},il={project:function(f){return new J(f.lng,f.lat)},unproject:function(f){return new re(f.y,f.x)},bounds:new le([-180,-90],[180,90])},rl={R:6378137,R_MINOR:6356752314245179e-9,bounds:new le([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(f){var S=Math.PI/180,x=this.R,K=f.lat*S,ce=this.R_MINOR/x,Ce=Math.sqrt(1-ce*ce),Ze=Ce*Math.sin(K),ht=Math.tan(Math.PI/4-K/2)/Math.pow((1-Ze)/(1+Ze),Ce/2);return K=-x*Math.log(Math.max(ht,1e-10)),new J(f.lng*S*x,K)},unproject:function(f){for(var S=180/Math.PI,x=this.R,K=this.R_MINOR/x,ce=Math.sqrt(1-K*K),Ce=Math.exp(-f.y/x),Ze=Math.PI/2-2*Math.atan(Ce),ht=0,pt=.1,Nt;ht<15&&Math.abs(pt)>1e-7;ht++)Nt=ce*Math.sin(Ze),Nt=Math.pow((1-Nt)/(1+Nt),ce/2),pt=Math.PI/2-2*Math.atan(Ce*Nt)-Ze,Ze+=pt;return new re(Ze*S,f.x*S/x)}},uh={__proto__:null,LonLat:il,Mercator:rl,SphericalMercator:_e},ch=r({},X,{code:"EPSG:3395",projection:rl,transformation:function(){var f=.5/(Math.PI*rl.R);return ae(f,.5,-f,.5)}()}),fu=r({},X,{code:"EPSG:4326",projection:il,transformation:ae(1/180,1,-1/180,.5)}),hh=r({},ke,{projection:il,transformation:ae(1,0,-1,0),scale:function(f){return Math.pow(2,f)},zoom:function(f){return Math.log(f)/Math.LN2},distance:function(f,S){var x=S.lng-f.lng,K=S.lat-f.lat;return Math.sqrt(x*x+K*K)},infinite:!0});ke.Earth=X,ke.EPSG3395=ch,ke.EPSG3857=Se,ke.EPSG900913=Me,ke.EPSG4326=fu,ke.Simple=hh;var $r=ne.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(f){return f.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(f){return f&&f.removeLayer(this),this},getPane:function(f){return this._map.getPane(f?this.options[f]||f:this.options.pane)},addInteractiveTarget:function(f){return this._map._targets[l(f)]=this,this},removeInteractiveTarget:function(f){return delete this._map._targets[l(f)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(f){var S=f.target;if(S.hasLayer(this)){if(this._map=S,this._zoomAnimated=S._zoomAnimated,this.getEvents){var x=this.getEvents();S.on(x,this),this.once("remove",function(){S.off(x,this)},this)}this.onAdd(S),this.fire("add"),S.fire("layeradd",{layer:this})}}});Mn.include({addLayer:function(f){if(!f._layerAdd)throw new Error("The provided object is not a Layer.");var S=l(f);return this._layers[S]?this:(this._layers[S]=f,f._mapToAdd=this,f.beforeAdd&&f.beforeAdd(this),this.whenReady(f._layerAdd,f),this)},removeLayer:function(f){var S=l(f);return this._layers[S]?(this._loaded&&f.onRemove(this),delete this._layers[S],this._loaded&&(this.fire("layerremove",{layer:f}),f.fire("remove")),f._map=f._mapToAdd=null,this):this},hasLayer:function(f){return l(f)in this._layers},eachLayer:function(f,S){for(var x in this._layers)f.call(S,this._layers[x]);return this},_addLayers:function(f){f=f?D(f)?f:[f]:[];for(var S=0,x=f.length;S<x;S++)this.addLayer(f[S])},_addZoomLimit:function(f){(!isNaN(f.options.maxZoom)||!isNaN(f.options.minZoom))&&(this._zoomBoundLayers[l(f)]=f,this._updateZoomLevels())},_removeZoomLimit:function(f){var S=l(f);this._zoomBoundLayers[S]&&(delete this._zoomBoundLayers[S],this._updateZoomLevels())},_updateZoomLevels:function(){var f=1/0,S=-1/0,x=this._getZoomSpan();for(var K in this._zoomBoundLayers){var ce=this._zoomBoundLayers[K].options;f=ce.minZoom===void 0?f:Math.min(f,ce.minZoom),S=ce.maxZoom===void 0?S:Math.max(S,ce.maxZoom)}this._layersMaxZoom=S===-1/0?void 0:S,this._layersMinZoom=f===1/0?void 0:f,x!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var fo=$r.extend({initialize:function(f,S){E(this,S),this._layers={};var x,K;if(f)for(x=0,K=f.length;x<K;x++)this.addLayer(f[x])},addLayer:function(f){var S=this.getLayerId(f);return this._layers[S]=f,this._map&&this._map.addLayer(f),this},removeLayer:function(f){var S=f in this._layers?f:this.getLayerId(f);return this._map&&this._layers[S]&&this._map.removeLayer(this._layers[S]),delete this._layers[S],this},hasLayer:function(f){var S=typeof f=="number"?f:this.getLayerId(f);return S in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(f){var S=Array.prototype.slice.call(arguments,1),x,K;for(x in this._layers)K=this._layers[x],K[f]&&K[f].apply(K,S);return this},onAdd:function(f){this.eachLayer(f.addLayer,f)},onRemove:function(f){this.eachLayer(f.removeLayer,f)},eachLayer:function(f,S){for(var x in this._layers)f.call(S,this._layers[x]);return this},getLayer:function(f){return this._layers[f]},getLayers:function(){var f=[];return this.eachLayer(f.push,f),f},setZIndex:function(f){return this.invoke("setZIndex",f)},getLayerId:function(f){return l(f)}}),du=function(f,S){return new fo(f,S)},ds=fo.extend({addLayer:function(f){return this.hasLayer(f)?this:(f.addEventParent(this),fo.prototype.addLayer.call(this,f),this.fire("layeradd",{layer:f}))},removeLayer:function(f){return this.hasLayer(f)?(f in this._layers&&(f=this._layers[f]),f.removeEventParent(this),fo.prototype.removeLayer.call(this,f),this.fire("layerremove",{layer:f})):this},setStyle:function(f){return this.invoke("setStyle",f)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var f=new ye;for(var S in this._layers){var x=this._layers[S];f.extend(x.getBounds?x.getBounds():x.getLatLng())}return f}}),gu=function(f,S){return new ds(f,S)},go=W.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(f){E(this,f)},createIcon:function(f){return this._createIcon("icon",f)},createShadow:function(f){return this._createIcon("shadow",f)},_createIcon:function(f,S){var x=this._getIconUrl(f);if(!x){if(f==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var K=this._createImg(x,S&&S.tagName==="IMG"?S:null);return this._setIconStyles(K,f),(this.options.crossOrigin||this.options.crossOrigin==="")&&(K.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),K},_setIconStyles:function(f,S){var x=this.options,K=x[S+"Size"];typeof K=="number"&&(K=[K,K]);var ce=ie(K),Ce=ie(S==="shadow"&&x.shadowAnchor||x.iconAnchor||ce&&ce.divideBy(2,!0));f.className="leaflet-marker-"+S+" "+(x.className||""),Ce&&(f.style.marginLeft=-Ce.x+"px",f.style.marginTop=-Ce.y+"px"),ce&&(f.style.width=ce.x+"px",f.style.height=ce.y+"px")},_createImg:function(f,S){return S=S||document.createElement("img"),S.src=f,S},_getIconUrl:function(f){return tt.retina&&this.options[f+"RetinaUrl"]||this.options[f+"Url"]}});function fh(f){return new go(f)}var Fo=go.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(f){return typeof Fo.imagePath!="string"&&(Fo.imagePath=this._detectIconPath()),(this.options.imagePath||Fo.imagePath)+go.prototype._getIconUrl.call(this,f)},_stripUrl:function(f){var S=function(x,K,ce){var Ce=K.exec(x);return Ce&&Ce[ce]};return f=S(f,/^url\((['"])?(.+)\1\)$/,2),f&&S(f,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var f=_n("div","leaflet-default-icon-path",document.body),S=wi(f,"background-image")||wi(f,"backgroundImage");if(document.body.removeChild(f),S=this._stripUrl(S),S)return S;var x=document.querySelector('link[href$="leaflet.css"]');return x?x.href.substring(0,x.href.length-11-1):""}}),mu=ur.extend({initialize:function(f){this._marker=f},addHooks:function(){var f=this._marker._icon;this._draggable||(this._draggable=new Lr(f,f,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),yn(f,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Gn(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(f){var S=this._marker,x=S._map,K=this._marker.options.autoPanSpeed,ce=this._marker.options.autoPanPadding,Ce=Ji(S._icon),Ze=x.getPixelBounds(),ht=x.getPixelOrigin(),pt=pe(Ze.min._subtract(ht).add(ce),Ze.max._subtract(ht).subtract(ce));if(!pt.contains(Ce)){var Nt=ie((Math.max(pt.max.x,Ce.x)-pt.max.x)/(Ze.max.x-pt.max.x)-(Math.min(pt.min.x,Ce.x)-pt.min.x)/(Ze.min.x-pt.min.x),(Math.max(pt.max.y,Ce.y)-pt.max.y)/(Ze.max.y-pt.max.y)-(Math.min(pt.min.y,Ce.y)-pt.min.y)/(Ze.min.y-pt.min.y)).multiplyBy(K);x.panBy(Nt,{animate:!1}),this._draggable._newPos._add(Nt),this._draggable._startPos._add(Nt),On(S._icon,this._draggable._newPos),this._onDrag(f),this._panRequest=H(this._adjustPan.bind(this,f))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(f){this._marker.options.autoPan&&(j(this._panRequest),this._panRequest=H(this._adjustPan.bind(this,f)))},_onDrag:function(f){var S=this._marker,x=S._shadow,K=Ji(S._icon),ce=S._map.layerPointToLatLng(K);x&&On(x,K),S._latlng=ce,f.latlng=ce,f.oldLatLng=this._oldLatLng,S.fire("move",f).fire("drag",f)},_onDragEnd:function(f){j(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",f)}}),ia=$r.extend({options:{icon:new Fo,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(f,S){E(this,S),this._latlng=me(f)},onAdd:function(f){this._zoomAnimated=this._zoomAnimated&&f.options.markerZoomAnimation,this._zoomAnimated&&f.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(f){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&f.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(f){var S=this._latlng;return this._latlng=me(f),this.update(),this.fire("move",{oldLatLng:S,latlng:this._latlng})},setZIndexOffset:function(f){return this.options.zIndexOffset=f,this.update()},getIcon:function(){return this.options.icon},setIcon:function(f){return this.options.icon=f,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var f=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(f)}return this},_initIcon:function(){var f=this.options,S="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),x=f.icon.createIcon(this._icon),K=!1;x!==this._icon&&(this._icon&&this._removeIcon(),K=!0,f.title&&(x.title=f.title),x.tagName==="IMG"&&(x.alt=f.alt||"")),yn(x,S),f.keyboard&&(x.tabIndex="0",x.setAttribute("role","button")),this._icon=x,f.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Sn(x,"focus",this._panOnFocus,this);var ce=f.icon.createShadow(this._shadow),Ce=!1;ce!==this._shadow&&(this._removeShadow(),Ce=!0),ce&&(yn(ce,S),ce.alt=""),this._shadow=ce,f.opacity<1&&this._updateOpacity(),K&&this.getPane().appendChild(this._icon),this._initInteraction(),ce&&Ce&&this.getPane(f.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Xn(this._icon,"focus",this._panOnFocus,this),qn(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&qn(this._shadow),this._shadow=null},_setPos:function(f){this._icon&&On(this._icon,f),this._shadow&&On(this._shadow,f),this._zIndex=f.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(f){this._icon&&(this._icon.style.zIndex=this._zIndex+f)},_animateZoom:function(f){var S=this._map._latLngToNewLayerPoint(this._latlng,f.zoom,f.center).round();this._setPos(S)},_initInteraction:function(){if(this.options.interactive&&(yn(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),mu)){var f=this.options.draggable;this.dragging&&(f=this.dragging.enabled(),this.dragging.disable()),this.dragging=new mu(this),f&&this.dragging.enable()}},setOpacity:function(f){return this.options.opacity=f,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var f=this.options.opacity;this._icon&&gi(this._icon,f),this._shadow&&gi(this._shadow,f)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var f=this._map;if(f){var S=this.options.icon.options,x=S.iconSize?ie(S.iconSize):ie(0,0),K=S.iconAnchor?ie(S.iconAnchor):ie(0,0);f.panInside(this._latlng,{paddingTopLeft:K,paddingBottomRight:x.subtract(K)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function dh(f,S){return new ia(f,S)}var Is=$r.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(f){this._renderer=f.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(f){return E(this,f),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&f&&Object.prototype.hasOwnProperty.call(f,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Bo=Is.extend({options:{fill:!0,radius:10},initialize:function(f,S){E(this,S),this._latlng=me(f),this._radius=this.options.radius},setLatLng:function(f){var S=this._latlng;return this._latlng=me(f),this.redraw(),this.fire("move",{oldLatLng:S,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(f){return this.options.radius=this._radius=f,this.redraw()},getRadius:function(){return this._radius},setStyle:function(f){var S=f&&f.radius||this._radius;return Is.prototype.setStyle.call(this,f),this.setRadius(S),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var f=this._radius,S=this._radiusY||f,x=this._clickTolerance(),K=[f+x,S+x];this._pxBounds=new le(this._point.subtract(K),this._point.add(K))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(f){return f.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function _u(f,S){return new Bo(f,S)}var ra=Bo.extend({initialize:function(f,S,x){if(typeof S=="number"&&(S=r({},x,{radius:S})),E(this,S),this._latlng=me(f),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(f){return this._mRadius=f,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var f=[this._radius,this._radiusY||this._radius];return new ye(this._map.layerPointToLatLng(this._point.subtract(f)),this._map.layerPointToLatLng(this._point.add(f)))},setStyle:Is.prototype.setStyle,_project:function(){var f=this._latlng.lng,S=this._latlng.lat,x=this._map,K=x.options.crs;if(K.distance===X.distance){var ce=Math.PI/180,Ce=this._mRadius/X.R/ce,Ze=x.project([S+Ce,f]),ht=x.project([S-Ce,f]),pt=Ze.add(ht).divideBy(2),Nt=x.unproject(pt).lat,Qt=Math.acos((Math.cos(Ce*ce)-Math.sin(S*ce)*Math.sin(Nt*ce))/(Math.cos(S*ce)*Math.cos(Nt*ce)))/ce;(isNaN(Qt)||Qt===0)&&(Qt=Ce/Math.cos(Math.PI/180*S)),this._point=pt.subtract(x.getPixelOrigin()),this._radius=isNaN(Qt)?0:pt.x-x.project([Nt,f-Qt]).x,this._radiusY=pt.y-Ze.y}else{var In=K.unproject(K.project(this._latlng).subtract([this._mRadius,0]));this._point=x.latLngToLayerPoint(this._latlng),this._radius=this._point.x-x.latLngToLayerPoint(In).x}this._updateBounds()}});function gh(f,S,x){return new ra(f,S,x)}var Xr=Is.extend({options:{smoothFactor:1,noClip:!1},initialize:function(f,S){E(this,S),this._setLatLngs(f)},getLatLngs:function(){return this._latlngs},setLatLngs:function(f){return this._setLatLngs(f),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(f){for(var S=1/0,x=null,K=xo,ce,Ce,Ze=0,ht=this._parts.length;Ze<ht;Ze++)for(var pt=this._parts[Ze],Nt=1,Qt=pt.length;Nt<Qt;Nt++){ce=pt[Nt-1],Ce=pt[Nt];var In=K(f,ce,Ce,!0);In<S&&(S=In,x=K(f,ce,Ce))}return x&&(x.distance=Math.sqrt(S)),x},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return tl(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(f,S){return S=S||this._defaultShape(),f=me(f),S.push(f),this._bounds.extend(f),this.redraw()},_setLatLngs:function(f){this._bounds=new ye,this._latlngs=this._convertLatLngs(f)},_defaultShape:function(){return hr(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(f){for(var S=[],x=hr(f),K=0,ce=f.length;K<ce;K++)x?(S[K]=me(f[K]),this._bounds.extend(S[K])):S[K]=this._convertLatLngs(f[K]);return S},_project:function(){var f=new le;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,f),this._bounds.isValid()&&f.isValid()&&(this._rawPxBounds=f,this._updateBounds())},_updateBounds:function(){var f=this._clickTolerance(),S=new J(f,f);this._rawPxBounds&&(this._pxBounds=new le([this._rawPxBounds.min.subtract(S),this._rawPxBounds.max.add(S)]))},_projectLatlngs:function(f,S,x){var K=f[0]instanceof re,ce=f.length,Ce,Ze;if(K){for(Ze=[],Ce=0;Ce<ce;Ce++)Ze[Ce]=this._map.latLngToLayerPoint(f[Ce]),x.extend(Ze[Ce]);S.push(Ze)}else for(Ce=0;Ce<ce;Ce++)this._projectLatlngs(f[Ce],S,x)},_clipPoints:function(){var f=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(f))){if(this.options.noClip){this._parts=this._rings;return}var S=this._parts,x,K,ce,Ce,Ze,ht,pt;for(x=0,ce=0,Ce=this._rings.length;x<Ce;x++)for(pt=this._rings[x],K=0,Ze=pt.length;K<Ze-1;K++)ht=Cr(pt[K],pt[K+1],f,K,!0),ht&&(S[ce]=S[ce]||[],S[ce].push(ht[0]),(ht[1]!==pt[K+1]||K===Ze-2)&&(S[ce].push(ht[1]),ce++))}},_simplifyPoints:function(){for(var f=this._parts,S=this.options.smoothFactor,x=0,K=f.length;x<K;x++)f[x]=hu(f[x],S)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(f,S){var x,K,ce,Ce,Ze,ht,pt=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(f))return!1;for(x=0,Ce=this._parts.length;x<Ce;x++)for(ht=this._parts[x],K=0,Ze=ht.length,ce=Ze-1;K<Ze;ce=K++)if(!(!S&&K===0)&&Xa(f,ht[ce],ht[K])<=pt)return!0;return!1}});function sl(f,S){return new Xr(f,S)}Xr._flat=el;var mo=Xr.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return cu(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(f){var S=Xr.prototype._convertLatLngs.call(this,f),x=S.length;return x>=2&&S[0]instanceof re&&S[0].equals(S[x-1])&&S.pop(),S},_setLatLngs:function(f){Xr.prototype._setLatLngs.call(this,f),hr(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return hr(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var f=this._renderer._bounds,S=this.options.weight,x=new J(S,S);if(f=new le(f.min.subtract(x),f.max.add(x)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(f))){if(this.options.noClip){this._parts=this._rings;return}for(var K=0,ce=this._rings.length,Ce;K<ce;K++)Ce=uu(this._rings[K],f,!0),Ce.length&&this._parts.push(Ce)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(f){var S=!1,x,K,ce,Ce,Ze,ht,pt,Nt;if(!this._pxBounds||!this._pxBounds.contains(f))return!1;for(Ce=0,pt=this._parts.length;Ce<pt;Ce++)for(x=this._parts[Ce],Ze=0,Nt=x.length,ht=Nt-1;Ze<Nt;ht=Ze++)K=x[Ze],ce=x[ht],K.y>f.y!=ce.y>f.y&&f.x<(ce.x-K.x)*(f.y-K.y)/(ce.y-K.y)+K.x&&(S=!S);return S||Xr.prototype._containsPoint.call(this,f,!0)}});function pu(f,S){return new mo(f,S)}var Kr=ds.extend({initialize:function(f,S){E(this,S),this._layers={},f&&this.addData(f)},addData:function(f){var S=D(f)?f:f.features,x,K,ce;if(S){for(x=0,K=S.length;x<K;x++)ce=S[x],(ce.geometries||ce.geometry||ce.features||ce.coordinates)&&this.addData(ce);return this}var Ce=this.options;if(Ce.filter&&!Ce.filter(f))return this;var Ze=sa(f,Ce);return Ze?(Ze.feature=b(f),Ze.defaultOptions=Ze.options,this.resetStyle(Ze),Ce.onEachFeature&&Ce.onEachFeature(f,Ze),this.addLayer(Ze)):this},resetStyle:function(f){return f===void 0?this.eachLayer(this.resetStyle,this):(f.options=r({},f.defaultOptions),this._setLayerStyle(f,this.options.style),this)},setStyle:function(f){return this.eachLayer(function(S){this._setLayerStyle(S,f)},this)},_setLayerStyle:function(f,S){f.setStyle&&(typeof S=="function"&&(S=S(f.feature)),f.setStyle(S))}});function sa(f,S){var x=f.type==="Feature"?f.geometry:f,K=x?x.coordinates:null,ce=[],Ce=S&&S.pointToLayer,Ze=S&&S.coordsToLatLng||Ms,ht,pt,Nt,Qt;if(!K&&!x)return null;switch(x.type){case"Point":return ht=Ze(K),vu(Ce,f,ht,S);case"MultiPoint":for(Nt=0,Qt=K.length;Nt<Qt;Nt++)ht=Ze(K[Nt]),ce.push(vu(Ce,f,ht,S));return new ds(ce);case"LineString":case"MultiLineString":return pt=oa(K,x.type==="LineString"?0:1,Ze),new Xr(pt,S);case"Polygon":case"MultiPolygon":return pt=oa(K,x.type==="Polygon"?1:2,Ze),new mo(pt,S);case"GeometryCollection":for(Nt=0,Qt=x.geometries.length;Nt<Qt;Nt++){var In=sa({geometry:x.geometries[Nt],type:"Feature",properties:f.properties},S);In&&ce.push(In)}return new ds(ce);case"FeatureCollection":for(Nt=0,Qt=x.features.length;Nt<Qt;Nt++){var Hn=sa(x.features[Nt],S);Hn&&ce.push(Hn)}return new ds(ce);default:throw new Error("Invalid GeoJSON object.")}}function vu(f,S,x,K){return f?f(S,x):new ia(x,K&&K.markersInheritOptions&&K)}function Ms(f){return new re(f[1],f[0],f[2])}function oa(f,S,x){for(var K=[],ce=0,Ce=f.length,Ze;ce<Ce;ce++)Ze=S?oa(f[ce],S-1,x):(x||Ms)(f[ce]),K.push(Ze);return K}function aa(f,S){return f=me(f),f.alt!==void 0?[v(f.lng,S),v(f.lat,S),v(f.alt,S)]:[v(f.lng,S),v(f.lat,S)]}function ji(f,S,x,K){for(var ce=[],Ce=0,Ze=f.length;Ce<Ze;Ce++)ce.push(S?ji(f[Ce],hr(f[Ce])?0:S-1,x,K):aa(f[Ce],K));return!S&&x&&ce.length>0&&ce.push(ce[0].slice()),ce}function Wi(f,S){return f.feature?r({},f.feature,{geometry:S}):b(S)}function b(f){return f.type==="Feature"||f.type==="FeatureCollection"?f:{type:"Feature",properties:{},geometry:f}}var u={toGeoJSON:function(f){return Wi(this,{type:"Point",coordinates:aa(this.getLatLng(),f)})}};ia.include(u),ra.include(u),Bo.include(u),Xr.include({toGeoJSON:function(f){var S=!hr(this._latlngs),x=ji(this._latlngs,S?1:0,!1,f);return Wi(this,{type:(S?"Multi":"")+"LineString",coordinates:x})}}),mo.include({toGeoJSON:function(f){var S=!hr(this._latlngs),x=S&&!hr(this._latlngs[0]),K=ji(this._latlngs,x?2:S?1:0,!0,f);return S||(K=[K]),Wi(this,{type:(x?"Multi":"")+"Polygon",coordinates:K})}}),fo.include({toMultiPoint:function(f){var S=[];return this.eachLayer(function(x){S.push(x.toGeoJSON(f).geometry.coordinates)}),Wi(this,{type:"MultiPoint",coordinates:S})},toGeoJSON:function(f){var S=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(S==="MultiPoint")return this.toMultiPoint(f);var x=S==="GeometryCollection",K=[];return this.eachLayer(function(ce){if(ce.toGeoJSON){var Ce=ce.toGeoJSON(f);if(x)K.push(Ce.geometry);else{var Ze=b(Ce);Ze.type==="FeatureCollection"?K.push.apply(K,Ze.features):K.push(Ze)}}}),x?Wi(this,{geometries:K,type:"GeometryCollection"}):{type:"FeatureCollection",features:K}}});function c(f,S){return new Kr(f,S)}var y=c,N=$r.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(f,S,x){this._url=f,this._bounds=be(S),E(this,x)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(yn(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){qn(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(f){return this.options.opacity=f,this._image&&this._updateOpacity(),this},setStyle:function(f){return f.opacity&&this.setOpacity(f.opacity),this},bringToFront:function(){return this._map&&or(this._image),this},bringToBack:function(){return this._map&&Ri(this._image),this},setUrl:function(f){return this._url=f,this._image&&(this._image.src=f),this},setBounds:function(f){return this._bounds=be(f),this._map&&this._reset(),this},getEvents:function(){var f={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(f.zoomanim=this._animateZoom),f},setZIndex:function(f){return this.options.zIndex=f,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var f=this._url.tagName==="IMG",S=this._image=f?this._url:_n("img");if(yn(S,"leaflet-image-layer"),this._zoomAnimated&&yn(S,"leaflet-zoom-animated"),this.options.className&&yn(S,this.options.className),S.onselectstart=m,S.onmousemove=m,S.onload=o(this.fire,this,"load"),S.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(S.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),f){this._url=S.src;return}S.src=this._url,S.alt=this.options.alt},_animateZoom:function(f){var S=this._map.getZoomScale(f.zoom),x=this._map._latLngBoundsToNewLayerBounds(this._bounds,f.zoom,f.center).min;Ir(this._image,x,S)},_reset:function(){var f=this._image,S=new le(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),x=S.getSize();On(f,S.min),f.style.width=x.x+"px",f.style.height=x.y+"px"},_updateOpacity:function(){gi(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var f=this.options.errorOverlayUrl;f&&this._url!==f&&(this._url=f,this._image.src=f)},getCenter:function(){return this._bounds.getCenter()}}),z=function(f,S,x){return new N(f,S,x)},se=N.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var f=this._url.tagName==="VIDEO",S=this._image=f?this._url:_n("video");if(yn(S,"leaflet-image-layer"),this._zoomAnimated&&yn(S,"leaflet-zoom-animated"),this.options.className&&yn(S,this.options.className),S.onselectstart=m,S.onmousemove=m,S.onloadeddata=o(this.fire,this,"load"),f){for(var x=S.getElementsByTagName("source"),K=[],ce=0;ce<x.length;ce++)K.push(x[ce].src);this._url=x.length>0?K:[S.src];return}D(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(S.style,"objectFit")&&(S.style.objectFit="fill"),S.autoplay=!!this.options.autoplay,S.loop=!!this.options.loop,S.muted=!!this.options.muted,S.playsInline=!!this.options.playsInline;for(var Ce=0;Ce<this._url.length;Ce++){var Ze=_n("source");Ze.src=this._url[Ce],S.appendChild(Ze)}}});function ve(f,S,x){return new se(f,S,x)}var Le=N.extend({_initImage:function(){var f=this._image=this._url;yn(f,"leaflet-image-layer"),this._zoomAnimated&&yn(f,"leaflet-zoom-animated"),this.options.className&&yn(f,this.options.className),f.onselectstart=m,f.onmousemove=m}});function xe(f,S,x){return new Le(f,S,x)}var Xe=$r.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(f,S){f&&(f instanceof re||D(f))?(this._latlng=me(f),E(this,S)):(E(this,f),this._source=S),this.options.content&&(this._content=this.options.content)},openOn:function(f){return f=arguments.length?f:this._source._map,f.hasLayer(this)||f.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(f){return this._map?this.close():(arguments.length?this._source=f:f=this._source,this._prepareOpen(),this.openOn(f._map)),this},onAdd:function(f){this._zoomAnimated=f._zoomAnimated,this._container||this._initLayout(),f._fadeAnimated&&gi(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),f._fadeAnimated&&gi(this._container,1),this.bringToFront(),this.options.interactive&&(yn(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(f){f._fadeAnimated?(gi(this._container,0),this._removeTimeout=setTimeout(o(qn,void 0,this._container),200)):qn(this._container),this.options.interactive&&(Gn(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(f){return this._latlng=me(f),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(f){return this._content=f,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var f={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(f.zoomanim=this._animateZoom),f},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&or(this._container),this},bringToBack:function(){return this._map&&Ri(this._container),this},_prepareOpen:function(f){var S=this._source;if(!S._map)return!1;if(S instanceof ds){S=null;var x=this._source._layers;for(var K in x)if(x[K]._map){S=x[K];break}if(!S)return!1;this._source=S}if(!f)if(S.getCenter)f=S.getCenter();else if(S.getLatLng)f=S.getLatLng();else if(S.getBounds)f=S.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(f),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var f=this._contentNode,S=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof S=="string")f.innerHTML=S;else{for(;f.hasChildNodes();)f.removeChild(f.firstChild);f.appendChild(S)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var f=this._map.latLngToLayerPoint(this._latlng),S=ie(this.options.offset),x=this._getAnchor();this._zoomAnimated?On(this._container,f.add(x)):S=S.add(f).add(x);var K=this._containerBottom=-S.y,ce=this._containerLeft=-Math.round(this._containerWidth/2)+S.x;this._container.style.bottom=K+"px",this._container.style.left=ce+"px"}},_getAnchor:function(){return[0,0]}});Mn.include({_initOverlay:function(f,S,x,K){var ce=S;return ce instanceof f||(ce=new f(K).setContent(S)),x&&ce.setLatLng(x),ce}}),$r.include({_initOverlay:function(f,S,x,K){var ce=x;return ce instanceof f?(E(ce,K),ce._source=this):(ce=S&&!K?S:new f(K,this),ce.setContent(x)),ce}});var ct=Xe.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(f){return f=arguments.length?f:this._source._map,!f.hasLayer(this)&&f._popup&&f._popup.options.autoClose&&f.removeLayer(f._popup),f._popup=this,Xe.prototype.openOn.call(this,f)},onAdd:function(f){Xe.prototype.onAdd.call(this,f),f.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Is||this._source.on("preclick",pi))},onRemove:function(f){Xe.prototype.onRemove.call(this,f),f.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Is||this._source.off("preclick",pi))},getEvents:function(){var f=Xe.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(f.preclick=this.close),this.options.keepInView&&(f.moveend=this._adjustPan),f},_initLayout:function(){var f="leaflet-popup",S=this._container=_n("div",f+" "+(this.options.className||"")+" leaflet-zoom-animated"),x=this._wrapper=_n("div",f+"-content-wrapper",S);if(this._contentNode=_n("div",f+"-content",x),Tr(S),Fr(this._contentNode),Sn(S,"contextmenu",pi),this._tipContainer=_n("div",f+"-tip-container",S),this._tip=_n("div",f+"-tip",this._tipContainer),this.options.closeButton){var K=this._closeButton=_n("a",f+"-close-button",S);K.setAttribute("role","button"),K.setAttribute("aria-label","Close popup"),K.href="#close",K.innerHTML='<span aria-hidden="true">&#215;</span>',Sn(K,"click",function(ce){An(ce),this.close()},this)}},_updateLayout:function(){var f=this._contentNode,S=f.style;S.width="",S.whiteSpace="nowrap";var x=f.offsetWidth;x=Math.min(x,this.options.maxWidth),x=Math.max(x,this.options.minWidth),S.width=x+1+"px",S.whiteSpace="",S.height="";var K=f.offsetHeight,ce=this.options.maxHeight,Ce="leaflet-popup-scrolled";ce&&K>ce?(S.height=ce+"px",yn(f,Ce)):Gn(f,Ce),this._containerWidth=this._container.offsetWidth},_animateZoom:function(f){var S=this._map._latLngToNewLayerPoint(this._latlng,f.zoom,f.center),x=this._getAnchor();On(this._container,S.add(x))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var f=this._map,S=parseInt(wi(this._container,"marginBottom"),10)||0,x=this._container.offsetHeight+S,K=this._containerWidth,ce=new J(this._containerLeft,-x-this._containerBottom);ce._add(Ji(this._container));var Ce=f.layerPointToContainerPoint(ce),Ze=ie(this.options.autoPanPadding),ht=ie(this.options.autoPanPaddingTopLeft||Ze),pt=ie(this.options.autoPanPaddingBottomRight||Ze),Nt=f.getSize(),Qt=0,In=0;Ce.x+K+pt.x>Nt.x&&(Qt=Ce.x+K-Nt.x+pt.x),Ce.x-Qt-ht.x<0&&(Qt=Ce.x-ht.x),Ce.y+x+pt.y>Nt.y&&(In=Ce.y+x-Nt.y+pt.y),Ce.y-In-ht.y<0&&(In=Ce.y-ht.y),(Qt||In)&&(this.options.keepInView&&(this._autopanning=!0),f.fire("autopanstart").panBy([Qt,In]))}},_getAnchor:function(){return ie(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Lt=function(f,S){return new ct(f,S)};Mn.mergeOptions({closePopupOnClick:!0}),Mn.include({openPopup:function(f,S,x){return this._initOverlay(ct,f,S,x).openOn(this),this},closePopup:function(f){return f=arguments.length?f:this._popup,f&&f.close(),this}}),$r.include({bindPopup:function(f,S){return this._popup=this._initOverlay(ct,this._popup,f,S),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(f){return this._popup&&(this instanceof ds||(this._popup._source=this),this._popup._prepareOpen(f||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(f){return this._popup&&this._popup.setContent(f),this},getPopup:function(){return this._popup},_openPopup:function(f){if(!(!this._popup||!this._map)){Qi(f);var S=f.layer||f.target;if(this._popup._source===S&&!(S instanceof Is)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(f.latlng);return}this._popup._source=S,this.openPopup(f.latlng)}},_movePopup:function(f){this._popup.setLatLng(f.latlng)},_onKeyPress:function(f){f.originalEvent.keyCode===13&&this._openPopup(f)}});var Ht=Xe.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(f){Xe.prototype.onAdd.call(this,f),this.setOpacity(this.options.opacity),f.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(f){Xe.prototype.onRemove.call(this,f),f.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var f=Xe.prototype.getEvents.call(this);return this.options.permanent||(f.preclick=this.close),f},_initLayout:function(){var f="leaflet-tooltip",S=f+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=_n("div",S),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+l(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(f){var S,x,K=this._map,ce=this._container,Ce=K.latLngToContainerPoint(K.getCenter()),Ze=K.layerPointToContainerPoint(f),ht=this.options.direction,pt=ce.offsetWidth,Nt=ce.offsetHeight,Qt=ie(this.options.offset),In=this._getAnchor();ht==="top"?(S=pt/2,x=Nt):ht==="bottom"?(S=pt/2,x=0):ht==="center"?(S=pt/2,x=Nt/2):ht==="right"?(S=0,x=Nt/2):ht==="left"?(S=pt,x=Nt/2):Ze.x<Ce.x?(ht="right",S=0,x=Nt/2):(ht="left",S=pt+(Qt.x+In.x)*2,x=Nt/2),f=f.subtract(ie(S,x,!0)).add(Qt).add(In),Gn(ce,"leaflet-tooltip-right"),Gn(ce,"leaflet-tooltip-left"),Gn(ce,"leaflet-tooltip-top"),Gn(ce,"leaflet-tooltip-bottom"),yn(ce,"leaflet-tooltip-"+ht),On(ce,f)},_updatePosition:function(){var f=this._map.latLngToLayerPoint(this._latlng);this._setPosition(f)},setOpacity:function(f){this.options.opacity=f,this._container&&gi(this._container,f)},_animateZoom:function(f){var S=this._map._latLngToNewLayerPoint(this._latlng,f.zoom,f.center);this._setPosition(S)},_getAnchor:function(){return ie(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),on=function(f,S){return new Ht(f,S)};Mn.include({openTooltip:function(f,S,x){return this._initOverlay(Ht,f,S,x).openOn(this),this},closeTooltip:function(f){return f.close(),this}}),$r.include({bindTooltip:function(f,S){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Ht,this._tooltip,f,S),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(f){if(!(!f&&this._tooltipHandlersAdded)){var S=f?"off":"on",x={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?x.add=this._openTooltip:(x.mouseover=this._openTooltip,x.mouseout=this.closeTooltip,x.click=this._openTooltip,this._map?this._addFocusListeners():x.add=this._addFocusListeners),this._tooltip.options.sticky&&(x.mousemove=this._moveTooltip),this[S](x),this._tooltipHandlersAdded=!f}},openTooltip:function(f){return this._tooltip&&(this instanceof ds||(this._tooltip._source=this),this._tooltip._prepareOpen(f)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(f){return this._tooltip&&this._tooltip.setContent(f),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(f){var S=typeof f.getElement=="function"&&f.getElement();S&&(Sn(S,"focus",function(){this._tooltip._source=f,this.openTooltip()},this),Sn(S,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(f){var S=typeof f.getElement=="function"&&f.getElement();S&&S.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(f){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var S=this;this._map.once("moveend",function(){S._openOnceFlag=!1,S._openTooltip(f)});return}this._tooltip._source=f.layer||f.target,this.openTooltip(this._tooltip.options.sticky?f.latlng:void 0)}},_moveTooltip:function(f){var S=f.latlng,x,K;this._tooltip.options.sticky&&f.originalEvent&&(x=this._map.mouseEventToContainerPoint(f.originalEvent),K=this._map.containerPointToLayerPoint(x),S=this._map.layerPointToLatLng(K)),this._tooltip.setLatLng(S)}});var hn=go.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(f){var S=f&&f.tagName==="DIV"?f:document.createElement("div"),x=this.options;if(x.html instanceof Element?(Er(S),S.appendChild(x.html)):S.innerHTML=x.html!==!1?x.html:"",x.bgPos){var K=ie(x.bgPos);S.style.backgroundPosition=-K.x+"px "+-K.y+"px"}return this._setIconStyles(S,"icon"),S},createShadow:function(){return null}});function Wn(f){return new hn(f)}go.Default=Fo;var xn=$r.extend({options:{tileSize:256,opacity:1,updateWhenIdle:tt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(f){E(this,f)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(f){f._addZoomLimit(this)},onRemove:function(f){this._removeAllTiles(),qn(this._container),f._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(or(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Ri(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(f){return this.options.opacity=f,this._updateOpacity(),this},setZIndex:function(f){return this.options.zIndex=f,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var f=this._clampZoom(this._map.getZoom());f!==this._tileZoom&&(this._tileZoom=f,this._updateLevels()),this._update()}return this},getEvents:function(){var f={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=h(this._onMoveEnd,this.options.updateInterval,this)),f.move=this._onMove),this._zoomAnimated&&(f.zoomanim=this._animateZoom),f},createTile:function(){return document.createElement("div")},getTileSize:function(){var f=this.options.tileSize;return f instanceof J?f:new J(f,f)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(f){for(var S=this.getPane().children,x=-f(-1/0,1/0),K=0,ce=S.length,Ce;K<ce;K++)Ce=S[K].style.zIndex,S[K]!==this._container&&Ce&&(x=f(x,+Ce));isFinite(x)&&(this.options.zIndex=x+f(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!tt.ielt9){gi(this._container,this.options.opacity);var f=+new Date,S=!1,x=!1;for(var K in this._tiles){var ce=this._tiles[K];if(!(!ce.current||!ce.loaded)){var Ce=Math.min(1,(f-ce.loaded)/200);gi(ce.el,Ce),Ce<1?S=!0:(ce.active?x=!0:this._onOpaqueTile(ce),ce.active=!0)}}x&&!this._noPrune&&this._pruneTiles(),S&&(j(this._fadeFrame),this._fadeFrame=H(this._updateOpacity,this))}},_onOpaqueTile:m,_initContainer:function(){this._container||(this._container=_n("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var f=this._tileZoom,S=this.options.maxZoom;if(f!==void 0){for(var x in this._levels)x=Number(x),this._levels[x].el.children.length||x===f?(this._levels[x].el.style.zIndex=S-Math.abs(f-x),this._onUpdateLevel(x)):(qn(this._levels[x].el),this._removeTilesAtZoom(x),this._onRemoveLevel(x),delete this._levels[x]);var K=this._levels[f],ce=this._map;return K||(K=this._levels[f]={},K.el=_n("div","leaflet-tile-container leaflet-zoom-animated",this._container),K.el.style.zIndex=S,K.origin=ce.project(ce.unproject(ce.getPixelOrigin()),f).round(),K.zoom=f,this._setZoomTransform(K,ce.getCenter(),ce.getZoom()),m(K.el.offsetWidth),this._onCreateLevel(K)),this._level=K,K}},_onUpdateLevel:m,_onRemoveLevel:m,_onCreateLevel:m,_pruneTiles:function(){if(this._map){var f,S,x=this._map.getZoom();if(x>this.options.maxZoom||x<this.options.minZoom){this._removeAllTiles();return}for(f in this._tiles)S=this._tiles[f],S.retain=S.current;for(f in this._tiles)if(S=this._tiles[f],S.current&&!S.active){var K=S.coords;this._retainParent(K.x,K.y,K.z,K.z-5)||this._retainChildren(K.x,K.y,K.z,K.z+2)}for(f in this._tiles)this._tiles[f].retain||this._removeTile(f)}},_removeTilesAtZoom:function(f){for(var S in this._tiles)this._tiles[S].coords.z===f&&this._removeTile(S)},_removeAllTiles:function(){for(var f in this._tiles)this._removeTile(f)},_invalidateAll:function(){for(var f in this._levels)qn(this._levels[f].el),this._onRemoveLevel(Number(f)),delete this._levels[f];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(f,S,x,K){var ce=Math.floor(f/2),Ce=Math.floor(S/2),Ze=x-1,ht=new J(+ce,+Ce);ht.z=+Ze;var pt=this._tileCoordsToKey(ht),Nt=this._tiles[pt];return Nt&&Nt.active?(Nt.retain=!0,!0):(Nt&&Nt.loaded&&(Nt.retain=!0),Ze>K?this._retainParent(ce,Ce,Ze,K):!1)},_retainChildren:function(f,S,x,K){for(var ce=2*f;ce<2*f+2;ce++)for(var Ce=2*S;Ce<2*S+2;Ce++){var Ze=new J(ce,Ce);Ze.z=x+1;var ht=this._tileCoordsToKey(Ze),pt=this._tiles[ht];if(pt&&pt.active){pt.retain=!0;continue}else pt&&pt.loaded&&(pt.retain=!0);x+1<K&&this._retainChildren(ce,Ce,x+1,K)}},_resetView:function(f){var S=f&&(f.pinch||f.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),S,S)},_animateZoom:function(f){this._setView(f.center,f.zoom,!0,f.noUpdate)},_clampZoom:function(f){var S=this.options;return S.minNativeZoom!==void 0&&f<S.minNativeZoom?S.minNativeZoom:S.maxNativeZoom!==void 0&&S.maxNativeZoom<f?S.maxNativeZoom:f},_setView:function(f,S,x,K){var ce=Math.round(S);this.options.maxZoom!==void 0&&ce>this.options.maxZoom||this.options.minZoom!==void 0&&ce<this.options.minZoom?ce=void 0:ce=this._clampZoom(ce);var Ce=this.options.updateWhenZooming&&ce!==this._tileZoom;(!K||Ce)&&(this._tileZoom=ce,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),ce!==void 0&&this._update(f),x||this._pruneTiles(),this._noPrune=!!x),this._setZoomTransforms(f,S)},_setZoomTransforms:function(f,S){for(var x in this._levels)this._setZoomTransform(this._levels[x],f,S)},_setZoomTransform:function(f,S,x){var K=this._map.getZoomScale(x,f.zoom),ce=f.origin.multiplyBy(K).subtract(this._map._getNewPixelOrigin(S,x)).round();tt.any3d?Ir(f.el,ce,K):On(f.el,ce)},_resetGrid:function(){var f=this._map,S=f.options.crs,x=this._tileSize=this.getTileSize(),K=this._tileZoom,ce=this._map.getPixelWorldBounds(this._tileZoom);ce&&(this._globalTileRange=this._pxBoundsToTileRange(ce)),this._wrapX=S.wrapLng&&!this.options.noWrap&&[Math.floor(f.project([0,S.wrapLng[0]],K).x/x.x),Math.ceil(f.project([0,S.wrapLng[1]],K).x/x.y)],this._wrapY=S.wrapLat&&!this.options.noWrap&&[Math.floor(f.project([S.wrapLat[0],0],K).y/x.x),Math.ceil(f.project([S.wrapLat[1],0],K).y/x.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(f){var S=this._map,x=S._animatingZoom?Math.max(S._animateToZoom,S.getZoom()):S.getZoom(),K=S.getZoomScale(x,this._tileZoom),ce=S.project(f,this._tileZoom).floor(),Ce=S.getSize().divideBy(K*2);return new le(ce.subtract(Ce),ce.add(Ce))},_update:function(f){var S=this._map;if(S){var x=this._clampZoom(S.getZoom());if(f===void 0&&(f=S.getCenter()),this._tileZoom!==void 0){var K=this._getTiledPixelBounds(f),ce=this._pxBoundsToTileRange(K),Ce=ce.getCenter(),Ze=[],ht=this.options.keepBuffer,pt=new le(ce.getBottomLeft().subtract([ht,-ht]),ce.getTopRight().add([ht,-ht]));if(!(isFinite(ce.min.x)&&isFinite(ce.min.y)&&isFinite(ce.max.x)&&isFinite(ce.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Nt in this._tiles){var Qt=this._tiles[Nt].coords;(Qt.z!==this._tileZoom||!pt.contains(new J(Qt.x,Qt.y)))&&(this._tiles[Nt].current=!1)}if(Math.abs(x-this._tileZoom)>1){this._setView(f,x);return}for(var In=ce.min.y;In<=ce.max.y;In++)for(var Hn=ce.min.x;Hn<=ce.max.x;Hn++){var fr=new J(Hn,In);if(fr.z=this._tileZoom,!!this._isValidTile(fr)){var Hi=this._tiles[this._tileCoordsToKey(fr)];Hi?Hi.current=!0:Ze.push(fr)}}if(Ze.sort(function(Pr,ua){return Pr.distanceTo(Ce)-ua.distanceTo(Ce)}),Ze.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Qr=document.createDocumentFragment();for(Hn=0;Hn<Ze.length;Hn++)this._addTile(Ze[Hn],Qr);this._level.el.appendChild(Qr)}}}},_isValidTile:function(f){var S=this._map.options.crs;if(!S.infinite){var x=this._globalTileRange;if(!S.wrapLng&&(f.x<x.min.x||f.x>x.max.x)||!S.wrapLat&&(f.y<x.min.y||f.y>x.max.y))return!1}if(!this.options.bounds)return!0;var K=this._tileCoordsToBounds(f);return be(this.options.bounds).overlaps(K)},_keyToBounds:function(f){return this._tileCoordsToBounds(this._keyToTileCoords(f))},_tileCoordsToNwSe:function(f){var S=this._map,x=this.getTileSize(),K=f.scaleBy(x),ce=K.add(x),Ce=S.unproject(K,f.z),Ze=S.unproject(ce,f.z);return[Ce,Ze]},_tileCoordsToBounds:function(f){var S=this._tileCoordsToNwSe(f),x=new ye(S[0],S[1]);return this.options.noWrap||(x=this._map.wrapLatLngBounds(x)),x},_tileCoordsToKey:function(f){return f.x+":"+f.y+":"+f.z},_keyToTileCoords:function(f){var S=f.split(":"),x=new J(+S[0],+S[1]);return x.z=+S[2],x},_removeTile:function(f){var S=this._tiles[f];S&&(qn(S.el),delete this._tiles[f],this.fire("tileunload",{tile:S.el,coords:this._keyToTileCoords(f)}))},_initTile:function(f){yn(f,"leaflet-tile");var S=this.getTileSize();f.style.width=S.x+"px",f.style.height=S.y+"px",f.onselectstart=m,f.onmousemove=m,tt.ielt9&&this.options.opacity<1&&gi(f,this.options.opacity)},_addTile:function(f,S){var x=this._getTilePos(f),K=this._tileCoordsToKey(f),ce=this.createTile(this._wrapCoords(f),o(this._tileReady,this,f));this._initTile(ce),this.createTile.length<2&&H(o(this._tileReady,this,f,null,ce)),On(ce,x),this._tiles[K]={el:ce,coords:f,current:!0},S.appendChild(ce),this.fire("tileloadstart",{tile:ce,coords:f})},_tileReady:function(f,S,x){S&&this.fire("tileerror",{error:S,tile:x,coords:f});var K=this._tileCoordsToKey(f);x=this._tiles[K],x&&(x.loaded=+new Date,this._map._fadeAnimated?(gi(x.el,0),j(this._fadeFrame),this._fadeFrame=H(this._updateOpacity,this)):(x.active=!0,this._pruneTiles()),S||(yn(x.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:x.el,coords:f})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),tt.ielt9||!this._map._fadeAnimated?H(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(f){return f.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(f){var S=new J(this._wrapX?d(f.x,this._wrapX):f.x,this._wrapY?d(f.y,this._wrapY):f.y);return S.z=f.z,S},_pxBoundsToTileRange:function(f){var S=this.getTileSize();return new le(f.min.unscaleBy(S).floor(),f.max.unscaleBy(S).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var f in this._tiles)if(!this._tiles[f].loaded)return!1;return!0}});function hi(f){return new xn(f)}var vi=xn.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(f,S){this._url=f,S=E(this,S),S.detectRetina&&tt.retina&&S.maxZoom>0?(S.tileSize=Math.floor(S.tileSize/2),S.zoomReverse?(S.zoomOffset--,S.minZoom=Math.min(S.maxZoom,S.minZoom+1)):(S.zoomOffset++,S.maxZoom=Math.max(S.minZoom,S.maxZoom-1)),S.minZoom=Math.max(0,S.minZoom)):S.zoomReverse?S.minZoom=Math.min(S.maxZoom,S.minZoom):S.maxZoom=Math.max(S.minZoom,S.maxZoom),typeof S.subdomains=="string"&&(S.subdomains=S.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(f,S){return this._url===f&&S===void 0&&(S=!0),this._url=f,S||this.redraw(),this},createTile:function(f,S){var x=document.createElement("img");return Sn(x,"load",o(this._tileOnLoad,this,S,x)),Sn(x,"error",o(this._tileOnError,this,S,x)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(x.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(x.referrerPolicy=this.options.referrerPolicy),x.alt="",x.src=this.getTileUrl(f),x},getTileUrl:function(f){var S={r:tt.retina?"@2x":"",s:this._getSubdomain(f),x:f.x,y:f.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var x=this._globalTileRange.max.y-f.y;this.options.tms&&(S.y=x),S["-y"]=x}return C(this._url,r(S,this.options))},_tileOnLoad:function(f,S){tt.ielt9?setTimeout(o(f,this,null,S),0):f(null,S)},_tileOnError:function(f,S,x){var K=this.options.errorTileUrl;K&&S.getAttribute("src")!==K&&(S.src=K),f(x,S)},_onTileRemove:function(f){f.tile.onload=null},_getZoomForUrl:function(){var f=this._tileZoom,S=this.options.maxZoom,x=this.options.zoomReverse,K=this.options.zoomOffset;return x&&(f=S-f),f+K},_getSubdomain:function(f){var S=Math.abs(f.x+f.y)%this.options.subdomains.length;return this.options.subdomains[S]},_abortLoading:function(){var f,S;for(f in this._tiles)if(this._tiles[f].coords.z!==this._tileZoom&&(S=this._tiles[f].el,S.onload=m,S.onerror=m,!S.complete)){S.src=P;var x=this._tiles[f].coords;qn(S),delete this._tiles[f],this.fire("tileabort",{tile:S,coords:x})}},_removeTile:function(f){var S=this._tiles[f];if(S)return S.el.setAttribute("src",P),xn.prototype._removeTile.call(this,f)},_tileReady:function(f,S,x){if(!(!this._map||x&&x.getAttribute("src")===P))return xn.prototype._tileReady.call(this,f,S,x)}});function Vi(f,S){return new vi(f,S)}var Ts=vi.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(f,S){this._url=f;var x=r({},this.defaultWmsParams);for(var K in S)K in this.options||(x[K]=S[K]);S=E(this,S);var ce=S.detectRetina&&tt.retina?2:1,Ce=this.getTileSize();x.width=Ce.x*ce,x.height=Ce.y*ce,this.wmsParams=x},onAdd:function(f){this._crs=this.options.crs||f.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var S=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[S]=this._crs.code,vi.prototype.onAdd.call(this,f)},getTileUrl:function(f){var S=this._tileCoordsToNwSe(f),x=this._crs,K=pe(x.project(S[0]),x.project(S[1])),ce=K.min,Ce=K.max,Ze=(this._wmsVersion>=1.3&&this._crs===fu?[ce.y,ce.x,Ce.y,Ce.x]:[ce.x,ce.y,Ce.x,Ce.y]).join(","),ht=vi.prototype.getTileUrl.call(this,f);return ht+I(this.wmsParams,ht,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+Ze},setParams:function(f,S){return r(this.wmsParams,f),S||this.redraw(),this}});function $o(f,S){return new Ts(f,S)}vi.WMS=Ts,Vi.wms=$o;var Jr=$r.extend({options:{padding:.1},initialize:function(f){E(this,f),l(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),yn(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var f={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(f.zoomanim=this._onAnimZoom),f},_onAnimZoom:function(f){this._updateTransform(f.center,f.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(f,S){var x=this._map.getZoomScale(S,this._zoom),K=this._map.getSize().multiplyBy(.5+this.options.padding),ce=this._map.project(this._center,S),Ce=K.multiplyBy(-x).add(ce).subtract(this._map._getNewPixelOrigin(f,S));tt.any3d?Ir(this._container,Ce,x):On(this._container,Ce)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var f in this._layers)this._layers[f]._reset()},_onZoomEnd:function(){for(var f in this._layers)this._layers[f]._project()},_updatePaths:function(){for(var f in this._layers)this._layers[f]._update()},_update:function(){var f=this.options.padding,S=this._map.getSize(),x=this._map.containerPointToLayerPoint(S.multiplyBy(-f)).round();this._bounds=new le(x,x.add(S.multiplyBy(1+f*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),ol=Jr.extend({options:{tolerance:0},getEvents:function(){var f=Jr.prototype.getEvents.call(this);return f.viewprereset=this._onViewPreReset,f},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Jr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var f=this._container=document.createElement("canvas");Sn(f,"mousemove",this._onMouseMove,this),Sn(f,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Sn(f,"mouseout",this._handleMouseOut,this),f._leaflet_disable_events=!0,this._ctx=f.getContext("2d")},_destroyContainer:function(){j(this._redrawRequest),delete this._ctx,qn(this._container),Xn(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var f;this._redrawBounds=null;for(var S in this._layers)f=this._layers[S],f._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Jr.prototype._update.call(this);var f=this._bounds,S=this._container,x=f.getSize(),K=tt.retina?2:1;On(S,f.min),S.width=K*x.x,S.height=K*x.y,S.style.width=x.x+"px",S.style.height=x.y+"px",tt.retina&&this._ctx.scale(2,2),this._ctx.translate(-f.min.x,-f.min.y),this.fire("update")}},_reset:function(){Jr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(f){this._updateDashArray(f),this._layers[l(f)]=f;var S=f._order={layer:f,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=S),this._drawLast=S,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(f){this._requestRedraw(f)},_removePath:function(f){var S=f._order,x=S.next,K=S.prev;x?x.prev=K:this._drawLast=K,K?K.next=x:this._drawFirst=x,delete f._order,delete this._layers[l(f)],this._requestRedraw(f)},_updatePath:function(f){this._extendRedrawBounds(f),f._project(),f._update(),this._requestRedraw(f)},_updateStyle:function(f){this._updateDashArray(f),this._requestRedraw(f)},_updateDashArray:function(f){if(typeof f.options.dashArray=="string"){var S=f.options.dashArray.split(/[, ]+/),x=[],K,ce;for(ce=0;ce<S.length;ce++){if(K=Number(S[ce]),isNaN(K))return;x.push(K)}f.options._dashArray=x}else f.options._dashArray=f.options.dashArray},_requestRedraw:function(f){this._map&&(this._extendRedrawBounds(f),this._redrawRequest=this._redrawRequest||H(this._redraw,this))},_extendRedrawBounds:function(f){if(f._pxBounds){var S=(f.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new le,this._redrawBounds.extend(f._pxBounds.min.subtract([S,S])),this._redrawBounds.extend(f._pxBounds.max.add([S,S]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var f=this._redrawBounds;if(f){var S=f.getSize();this._ctx.clearRect(f.min.x,f.min.y,S.x,S.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var f,S=this._redrawBounds;if(this._ctx.save(),S){var x=S.getSize();this._ctx.beginPath(),this._ctx.rect(S.min.x,S.min.y,x.x,x.y),this._ctx.clip()}this._drawing=!0;for(var K=this._drawFirst;K;K=K.next)f=K.layer,(!S||f._pxBounds&&f._pxBounds.intersects(S))&&f._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(f,S){if(this._drawing){var x,K,ce,Ce,Ze=f._parts,ht=Ze.length,pt=this._ctx;if(ht){for(pt.beginPath(),x=0;x<ht;x++){for(K=0,ce=Ze[x].length;K<ce;K++)Ce=Ze[x][K],pt[K?"lineTo":"moveTo"](Ce.x,Ce.y);S&&pt.closePath()}this._fillStroke(pt,f)}}},_updateCircle:function(f){if(!(!this._drawing||f._empty())){var S=f._point,x=this._ctx,K=Math.max(Math.round(f._radius),1),ce=(Math.max(Math.round(f._radiusY),1)||K)/K;ce!==1&&(x.save(),x.scale(1,ce)),x.beginPath(),x.arc(S.x,S.y/ce,K,0,Math.PI*2,!1),ce!==1&&x.restore(),this._fillStroke(x,f)}},_fillStroke:function(f,S){var x=S.options;x.fill&&(f.globalAlpha=x.fillOpacity,f.fillStyle=x.fillColor||x.color,f.fill(x.fillRule||"evenodd")),x.stroke&&x.weight!==0&&(f.setLineDash&&f.setLineDash(S.options&&S.options._dashArray||[]),f.globalAlpha=x.opacity,f.lineWidth=x.weight,f.strokeStyle=x.color,f.lineCap=x.lineCap,f.lineJoin=x.lineJoin,f.stroke())},_onClick:function(f){for(var S=this._map.mouseEventToLayerPoint(f),x,K,ce=this._drawFirst;ce;ce=ce.next)x=ce.layer,x.options.interactive&&x._containsPoint(S)&&(!(f.type==="click"||f.type==="preclick")||!this._map._draggableMoved(x))&&(K=x);this._fireEvent(K?[K]:!1,f)},_onMouseMove:function(f){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var S=this._map.mouseEventToLayerPoint(f);this._handleMouseHover(f,S)}},_handleMouseOut:function(f){var S=this._hoveredLayer;S&&(Gn(this._container,"leaflet-interactive"),this._fireEvent([S],f,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(f,S){if(!this._mouseHoverThrottled){for(var x,K,ce=this._drawFirst;ce;ce=ce.next)x=ce.layer,x.options.interactive&&x._containsPoint(S)&&(K=x);K!==this._hoveredLayer&&(this._handleMouseOut(f),K&&(yn(this._container,"leaflet-interactive"),this._fireEvent([K],f,"mouseover"),this._hoveredLayer=K)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,f),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(f,S,x){this._map._fireDOMEvent(S,x||S.type,f)},_bringToFront:function(f){var S=f._order;if(S){var x=S.next,K=S.prev;if(x)x.prev=K;else return;K?K.next=x:x&&(this._drawFirst=x),S.prev=this._drawLast,this._drawLast.next=S,S.next=null,this._drawLast=S,this._requestRedraw(f)}},_bringToBack:function(f){var S=f._order;if(S){var x=S.next,K=S.prev;if(K)K.next=x;else return;x?x.prev=K:K&&(this._drawLast=K),S.prev=null,S.next=this._drawFirst,this._drawFirst.prev=S,this._drawFirst=S,this._requestRedraw(f)}}});function al(f){return tt.canvas?new ol(f):null}var _o=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(f){return document.createElement("<lvml:"+f+' class="lvml">')}}catch{}return function(f){return document.createElement("<"+f+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),yu={_initContainer:function(){this._container=_n("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Jr.prototype._update.call(this),this.fire("update"))},_initPath:function(f){var S=f._container=_o("shape");yn(S,"leaflet-vml-shape "+(this.options.className||"")),S.coordsize="1 1",f._path=_o("path"),S.appendChild(f._path),this._updateStyle(f),this._layers[l(f)]=f},_addPath:function(f){var S=f._container;this._container.appendChild(S),f.options.interactive&&f.addInteractiveTarget(S)},_removePath:function(f){var S=f._container;qn(S),f.removeInteractiveTarget(S),delete this._layers[l(f)]},_updateStyle:function(f){var S=f._stroke,x=f._fill,K=f.options,ce=f._container;ce.stroked=!!K.stroke,ce.filled=!!K.fill,K.stroke?(S||(S=f._stroke=_o("stroke")),ce.appendChild(S),S.weight=K.weight+"px",S.color=K.color,S.opacity=K.opacity,K.dashArray?S.dashStyle=D(K.dashArray)?K.dashArray.join(" "):K.dashArray.replace(/( *, *)/g," "):S.dashStyle="",S.endcap=K.lineCap.replace("butt","flat"),S.joinstyle=K.lineJoin):S&&(ce.removeChild(S),f._stroke=null),K.fill?(x||(x=f._fill=_o("fill")),ce.appendChild(x),x.color=K.fillColor||K.color,x.opacity=K.fillOpacity):x&&(ce.removeChild(x),f._fill=null)},_updateCircle:function(f){var S=f._point.round(),x=Math.round(f._radius),K=Math.round(f._radiusY||x);this._setPath(f,f._empty()?"M0 0":"AL "+S.x+","+S.y+" "+x+","+K+" 0,"+65535*360)},_setPath:function(f,S){f._path.v=S},_bringToFront:function(f){or(f._container)},_bringToBack:function(f){Ri(f._container)}},Vo=tt.vml?_o:we,Zs=Jr.extend({_initContainer:function(){this._container=Vo("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Vo("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){qn(this._container),Xn(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Jr.prototype._update.call(this);var f=this._bounds,S=f.getSize(),x=this._container;(!this._svgSize||!this._svgSize.equals(S))&&(this._svgSize=S,x.setAttribute("width",S.x),x.setAttribute("height",S.y)),On(x,f.min),x.setAttribute("viewBox",[f.min.x,f.min.y,S.x,S.y].join(" ")),this.fire("update")}},_initPath:function(f){var S=f._path=Vo("path");f.options.className&&yn(S,f.options.className),f.options.interactive&&yn(S,"leaflet-interactive"),this._updateStyle(f),this._layers[l(f)]=f},_addPath:function(f){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(f._path),f.addInteractiveTarget(f._path)},_removePath:function(f){qn(f._path),f.removeInteractiveTarget(f._path),delete this._layers[l(f)]},_updatePath:function(f){f._project(),f._update()},_updateStyle:function(f){var S=f._path,x=f.options;S&&(x.stroke?(S.setAttribute("stroke",x.color),S.setAttribute("stroke-opacity",x.opacity),S.setAttribute("stroke-width",x.weight),S.setAttribute("stroke-linecap",x.lineCap),S.setAttribute("stroke-linejoin",x.lineJoin),x.dashArray?S.setAttribute("stroke-dasharray",x.dashArray):S.removeAttribute("stroke-dasharray"),x.dashOffset?S.setAttribute("stroke-dashoffset",x.dashOffset):S.removeAttribute("stroke-dashoffset")):S.setAttribute("stroke","none"),x.fill?(S.setAttribute("fill",x.fillColor||x.color),S.setAttribute("fill-opacity",x.fillOpacity),S.setAttribute("fill-rule",x.fillRule||"evenodd")):S.setAttribute("fill","none"))},_updatePoly:function(f,S){this._setPath(f,Te(f._parts,S))},_updateCircle:function(f){var S=f._point,x=Math.max(Math.round(f._radius),1),K=Math.max(Math.round(f._radiusY),1)||x,ce="a"+x+","+K+" 0 1,0 ",Ce=f._empty()?"M0 0":"M"+(S.x-x)+","+S.y+ce+x*2+",0 "+ce+-x*2+",0 ";this._setPath(f,Ce)},_setPath:function(f,S){f._path.setAttribute("d",S)},_bringToFront:function(f){or(f._path)},_bringToBack:function(f){Ri(f._path)}});tt.vml&&Zs.include(yu);function la(f){return tt.svg||tt.vml?new Zs(f):null}Mn.include({getRenderer:function(f){var S=f.options.renderer||this._getPaneRenderer(f.options.pane)||this.options.renderer||this._renderer;return S||(S=this._renderer=this._createRenderer()),this.hasLayer(S)||this.addLayer(S),S},_getPaneRenderer:function(f){if(f==="overlayPane"||f===void 0)return!1;var S=this._paneRenderers[f];return S===void 0&&(S=this._createRenderer({pane:f}),this._paneRenderers[f]=S),S},_createRenderer:function(f){return this.options.preferCanvas&&al(f)||la(f)}});var y0=mo.extend({initialize:function(f,S){mo.prototype.initialize.call(this,this._boundsToLatLngs(f),S)},setBounds:function(f){return this.setLatLngs(this._boundsToLatLngs(f))},_boundsToLatLngs:function(f){return f=be(f),[f.getSouthWest(),f.getNorthWest(),f.getNorthEast(),f.getSouthEast()]}});function p4(f,S){return new y0(f,S)}Zs.create=Vo,Zs.pointsToPath=Te,Kr.geometryToLayer=sa,Kr.coordsToLatLng=Ms,Kr.coordsToLatLngs=oa,Kr.latLngToCoords=aa,Kr.latLngsToCoords=ji,Kr.getFeature=Wi,Kr.asFeature=b,Mn.mergeOptions({boxZoom:!0});var b0=ur.extend({initialize:function(f){this._map=f,this._container=f._container,this._pane=f._panes.overlayPane,this._resetStateTimeout=0,f.on("unload",this._destroy,this)},addHooks:function(){Sn(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Xn(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){qn(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(f){if(!f.shiftKey||f.which!==1&&f.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Yi(),uo(),this._startPoint=this._map.mouseEventToContainerPoint(f),Sn(document,{contextmenu:Qi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(f){this._moved||(this._moved=!0,this._box=_n("div","leaflet-zoom-box",this._container),yn(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(f);var S=new le(this._point,this._startPoint),x=S.getSize();On(this._box,S.min),this._box.style.width=x.x+"px",this._box.style.height=x.y+"px"},_finish:function(){this._moved&&(qn(this._box),Gn(this._container,"leaflet-crosshair")),Mr(),ks(),Xn(document,{contextmenu:Qi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(f){if(!(f.which!==1&&f.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var S=new ye(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(S).fire("boxzoomend",{boxZoomBounds:S})}},_onKeyDown:function(f){f.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Mn.addInitHook("addHandler","boxZoom",b0),Mn.mergeOptions({doubleClickZoom:!0});var w0=ur.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(f){var S=this._map,x=S.getZoom(),K=S.options.zoomDelta,ce=f.originalEvent.shiftKey?x-K:x+K;S.options.doubleClickZoom==="center"?S.setZoom(ce):S.setZoomAround(f.containerPoint,ce)}});Mn.addInitHook("addHandler","doubleClickZoom",w0),Mn.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var k0=ur.extend({addHooks:function(){if(!this._draggable){var f=this._map;this._draggable=new Lr(f._mapPane,f._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),f.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),f.on("zoomend",this._onZoomEnd,this),f.whenReady(this._onZoomEnd,this))}yn(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Gn(this._map._container,"leaflet-grab"),Gn(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var f=this._map;if(f._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var S=be(this._map.options.maxBounds);this._offsetLimit=pe(this._map.latLngToContainerPoint(S.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(S.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;f.fire("movestart").fire("dragstart"),f.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(f){if(this._map.options.inertia){var S=this._lastTime=+new Date,x=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(x),this._times.push(S),this._prunePositions(S)}this._map.fire("move",f).fire("drag",f)},_prunePositions:function(f){for(;this._positions.length>1&&f-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var f=this._map.getSize().divideBy(2),S=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=S.subtract(f).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(f,S){return f-(f-S)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var f=this._draggable._newPos.subtract(this._draggable._startPos),S=this._offsetLimit;f.x<S.min.x&&(f.x=this._viscousLimit(f.x,S.min.x)),f.y<S.min.y&&(f.y=this._viscousLimit(f.y,S.min.y)),f.x>S.max.x&&(f.x=this._viscousLimit(f.x,S.max.x)),f.y>S.max.y&&(f.y=this._viscousLimit(f.y,S.max.y)),this._draggable._newPos=this._draggable._startPos.add(f)}},_onPreDragWrap:function(){var f=this._worldWidth,S=Math.round(f/2),x=this._initialWorldOffset,K=this._draggable._newPos.x,ce=(K-S+x)%f+S-x,Ce=(K+S+x)%f-S-x,Ze=Math.abs(ce+x)<Math.abs(Ce+x)?ce:Ce;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=Ze},_onDragEnd:function(f){var S=this._map,x=S.options,K=!x.inertia||f.noInertia||this._times.length<2;if(S.fire("dragend",f),K)S.fire("moveend");else{this._prunePositions(+new Date);var ce=this._lastPos.subtract(this._positions[0]),Ce=(this._lastTime-this._times[0])/1e3,Ze=x.easeLinearity,ht=ce.multiplyBy(Ze/Ce),pt=ht.distanceTo([0,0]),Nt=Math.min(x.inertiaMaxSpeed,pt),Qt=ht.multiplyBy(Nt/pt),In=Nt/(x.inertiaDeceleration*Ze),Hn=Qt.multiplyBy(-In/2).round();!Hn.x&&!Hn.y?S.fire("moveend"):(Hn=S._limitOffset(Hn,S.options.maxBounds),H(function(){S.panBy(Hn,{duration:In,easeLinearity:Ze,noMoveStart:!0,animate:!0})}))}}});Mn.addInitHook("addHandler","dragging",k0),Mn.mergeOptions({keyboard:!0,keyboardPanDelta:80});var E0=ur.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(f){this._map=f,this._setPanDelta(f.options.keyboardPanDelta),this._setZoomDelta(f.options.zoomDelta)},addHooks:function(){var f=this._map._container;f.tabIndex<=0&&(f.tabIndex="0"),Sn(f,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Xn(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var f=document.body,S=document.documentElement,x=f.scrollTop||S.scrollTop,K=f.scrollLeft||S.scrollLeft;this._map._container.focus(),window.scrollTo(K,x)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(f){var S=this._panKeys={},x=this.keyCodes,K,ce;for(K=0,ce=x.left.length;K<ce;K++)S[x.left[K]]=[-1*f,0];for(K=0,ce=x.right.length;K<ce;K++)S[x.right[K]]=[f,0];for(K=0,ce=x.down.length;K<ce;K++)S[x.down[K]]=[0,f];for(K=0,ce=x.up.length;K<ce;K++)S[x.up[K]]=[0,-1*f]},_setZoomDelta:function(f){var S=this._zoomKeys={},x=this.keyCodes,K,ce;for(K=0,ce=x.zoomIn.length;K<ce;K++)S[x.zoomIn[K]]=f;for(K=0,ce=x.zoomOut.length;K<ce;K++)S[x.zoomOut[K]]=-f},_addHooks:function(){Sn(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Xn(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(f){if(!(f.altKey||f.ctrlKey||f.metaKey)){var S=f.keyCode,x=this._map,K;if(S in this._panKeys){if(!x._panAnim||!x._panAnim._inProgress)if(K=this._panKeys[S],f.shiftKey&&(K=ie(K).multiplyBy(3)),x.options.maxBounds&&(K=x._limitOffset(ie(K),x.options.maxBounds)),x.options.worldCopyJump){var ce=x.wrapLatLng(x.unproject(x.project(x.getCenter()).add(K)));x.panTo(ce)}else x.panBy(K)}else if(S in this._zoomKeys)x.setZoom(x.getZoom()+(f.shiftKey?3:1)*this._zoomKeys[S]);else if(S===27&&x._popup&&x._popup.options.closeOnEscapeKey)x.closePopup();else return;Qi(f)}}});Mn.addInitHook("addHandler","keyboard",E0),Mn.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var S0=ur.extend({addHooks:function(){Sn(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Xn(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(f){var S=ho(f),x=this._map.options.wheelDebounceTime;this._delta+=S,this._lastMousePos=this._map.mouseEventToContainerPoint(f),this._startTime||(this._startTime=+new Date);var K=Math.max(x-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),K),Qi(f)},_performZoom:function(){var f=this._map,S=f.getZoom(),x=this._map.options.zoomSnap||0;f._stop();var K=this._delta/(this._map.options.wheelPxPerZoomLevel*4),ce=4*Math.log(2/(1+Math.exp(-Math.abs(K))))/Math.LN2,Ce=x?Math.ceil(ce/x)*x:ce,Ze=f._limitZoom(S+(this._delta>0?Ce:-Ce))-S;this._delta=0,this._startTime=null,Ze&&(f.options.scrollWheelZoom==="center"?f.setZoom(S+Ze):f.setZoomAround(this._lastMousePos,S+Ze))}});Mn.addInitHook("addHandler","scrollWheelZoom",S0);var v4=600;Mn.mergeOptions({tapHold:tt.touchNative&&tt.safari&&tt.mobile,tapTolerance:15});var I0=ur.extend({addHooks:function(){Sn(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Xn(this._map._container,"touchstart",this._onDown,this)},_onDown:function(f){if(clearTimeout(this._holdTimeout),f.touches.length===1){var S=f.touches[0];this._startPos=this._newPos=new J(S.clientX,S.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(Sn(document,"touchend",An),Sn(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",S))},this),v4),Sn(document,"touchend touchcancel contextmenu",this._cancel,this),Sn(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function f(){Xn(document,"touchend",An),Xn(document,"touchend touchcancel",f)},_cancel:function(){clearTimeout(this._holdTimeout),Xn(document,"touchend touchcancel contextmenu",this._cancel,this),Xn(document,"touchmove",this._onMove,this)},_onMove:function(f){var S=f.touches[0];this._newPos=new J(S.clientX,S.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(f,S){var x=new MouseEvent(f,{bubbles:!0,cancelable:!0,view:window,screenX:S.screenX,screenY:S.screenY,clientX:S.clientX,clientY:S.clientY});x._simulated=!0,S.target.dispatchEvent(x)}});Mn.addInitHook("addHandler","tapHold",I0),Mn.mergeOptions({touchZoom:tt.touch,bounceAtZoomLimits:!0});var M0=ur.extend({addHooks:function(){yn(this._map._container,"leaflet-touch-zoom"),Sn(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Gn(this._map._container,"leaflet-touch-zoom"),Xn(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(f){var S=this._map;if(!(!f.touches||f.touches.length!==2||S._animatingZoom||this._zooming)){var x=S.mouseEventToContainerPoint(f.touches[0]),K=S.mouseEventToContainerPoint(f.touches[1]);this._centerPoint=S.getSize()._divideBy(2),this._startLatLng=S.containerPointToLatLng(this._centerPoint),S.options.touchZoom!=="center"&&(this._pinchStartLatLng=S.containerPointToLatLng(x.add(K)._divideBy(2))),this._startDist=x.distanceTo(K),this._startZoom=S.getZoom(),this._moved=!1,this._zooming=!0,S._stop(),Sn(document,"touchmove",this._onTouchMove,this),Sn(document,"touchend touchcancel",this._onTouchEnd,this),An(f)}},_onTouchMove:function(f){if(!(!f.touches||f.touches.length!==2||!this._zooming)){var S=this._map,x=S.mouseEventToContainerPoint(f.touches[0]),K=S.mouseEventToContainerPoint(f.touches[1]),ce=x.distanceTo(K)/this._startDist;if(this._zoom=S.getScaleZoom(ce,this._startZoom),!S.options.bounceAtZoomLimits&&(this._zoom<S.getMinZoom()&&ce<1||this._zoom>S.getMaxZoom()&&ce>1)&&(this._zoom=S._limitZoom(this._zoom)),S.options.touchZoom==="center"){if(this._center=this._startLatLng,ce===1)return}else{var Ce=x._add(K)._divideBy(2)._subtract(this._centerPoint);if(ce===1&&Ce.x===0&&Ce.y===0)return;this._center=S.unproject(S.project(this._pinchStartLatLng,this._zoom).subtract(Ce),this._zoom)}this._moved||(S._moveStart(!0,!1),this._moved=!0),j(this._animRequest);var Ze=o(S._move,S,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=H(Ze,this,!0),An(f)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,j(this._animRequest),Xn(document,"touchmove",this._onTouchMove,this),Xn(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Mn.addInitHook("addHandler","touchZoom",M0),Mn.BoxZoom=b0,Mn.DoubleClickZoom=w0,Mn.Drag=k0,Mn.Keyboard=E0,Mn.ScrollWheelZoom=S0,Mn.TapHold=I0,Mn.TouchZoom=M0,t.Bounds=le,t.Browser=tt,t.CRS=ke,t.Canvas=ol,t.Circle=ra,t.CircleMarker=Bo,t.Class=W,t.Control=er,t.DivIcon=hn,t.DivOverlay=Xe,t.DomEvent=Jo,t.DomUtil=Zr,t.Draggable=Lr,t.Evented=ne,t.FeatureGroup=ds,t.GeoJSON=Kr,t.GridLayer=xn,t.Handler=ur,t.Icon=go,t.ImageOverlay=N,t.LatLng=re,t.LatLngBounds=ye,t.Layer=$r,t.LayerGroup=fo,t.LineUtil=nl,t.Map=Mn,t.Marker=ia,t.Mixin=qs,t.Path=Is,t.Point=J,t.PolyUtil=cr,t.Polygon=mo,t.Polyline=Xr,t.Popup=ct,t.PosAnimation=Ss,t.Projection=uh,t.Rectangle=y0,t.Renderer=Jr,t.SVG=Zs,t.SVGOverlay=Le,t.TileLayer=vi,t.Tooltip=Ht,t.Transformation=oe,t.Util=Q,t.VideoOverlay=se,t.bind=o,t.bounds=pe,t.canvas=al,t.circle=gh,t.circleMarker=_u,t.control=ki,t.divIcon=Wn,t.extend=r,t.featureGroup=gu,t.geoJSON=c,t.geoJson=y,t.gridLayer=hi,t.icon=fh,t.imageOverlay=z,t.latLng=me,t.latLngBounds=be,t.layerGroup=du,t.map=Gs,t.marker=dh,t.point=ie,t.polygon=pu,t.polyline=sl,t.popup=Lt,t.rectangle=p4,t.setOptions=E,t.stamp=l,t.svg=la,t.svgOverlay=xe,t.tileLayer=Vi,t.tooltip=on,t.transformation=ae,t.version=i,t.videoOverlay=ve;var y4=window.L;t.noConflict=function(){return window.L=y4,this},window.L=t})})(nf,nf.exports);var yi=nf.exports;const Ct=Vf(yi);function W4(n){n("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),n("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),n("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),n.WGS84=n["EPSG:4326"],n["EPSG:3785"]=n["EPSG:3857"],n.GOOGLE=n["EPSG:3857"],n["EPSG:900913"]=n["EPSG:3857"],n["EPSG:102113"]=n["EPSG:3857"]}var Zo=1,Yo=2,Sa=3,X4=4,rf=5,x0=6378137,K4=6356752314e-3,F0=.0066943799901413165,Nl=484813681109536e-20,At=Math.PI/2,J4=.16666666666666666,Q4=.04722222222222222,e5=.022156084656084655,Yt=1e-10,Xi=.017453292519943295,Ps=57.29577951308232,ai=Math.PI/4,zl=Math.PI*2,Ai=3.14159265359,Or={};Or.greenwich=0;Or.lisbon=-9.131906111111;Or.paris=2.337229166667;Or.bogota=-74.080916666667;Or.madrid=-3.687938888889;Or.rome=12.452333333333;Or.bern=7.439583333333;Or.jakarta=106.807719444444;Or.ferro=-17.666666666667;Or.brussels=4.367975;Or.stockholm=18.058277777778;Or.athens=23.7163375;Or.oslo=10.722916666667;const t5={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}};var B0=/[\s_\-\/\(\)]/g;function Io(n,e){if(n[e])return n[e];for(var t=Object.keys(n),i=e.toLowerCase().replace(B0,""),r=-1,s,o;++r<t.length;)if(s=t[r],o=s.toLowerCase().replace(B0,""),o===i)return n[s]}function sf(n){var e={},t=n.split("+").map(function(a){return a.trim()}).filter(function(a){return a}).reduce(function(a,l){var h=l.split("=");return h.push(!0),a[h[0].toLowerCase()]=h[1],a},{}),i,r,s,o={proj:"projName",datum:"datumCode",rf:function(a){e.rf=parseFloat(a)},lat_0:function(a){e.lat0=a*Xi},lat_1:function(a){e.lat1=a*Xi},lat_2:function(a){e.lat2=a*Xi},lat_ts:function(a){e.lat_ts=a*Xi},lon_0:function(a){e.long0=a*Xi},lon_1:function(a){e.long1=a*Xi},lon_2:function(a){e.long2=a*Xi},alpha:function(a){e.alpha=parseFloat(a)*Xi},gamma:function(a){e.rectified_grid_angle=parseFloat(a)},lonc:function(a){e.longc=a*Xi},x_0:function(a){e.x0=parseFloat(a)},y_0:function(a){e.y0=parseFloat(a)},k_0:function(a){e.k0=parseFloat(a)},k:function(a){e.k0=parseFloat(a)},a:function(a){e.a=parseFloat(a)},b:function(a){e.b=parseFloat(a)},r:function(a){e.a=e.b=parseFloat(a)},r_a:function(){e.R_A=!0},zone:function(a){e.zone=parseInt(a,10)},south:function(){e.utmSouth=!0},towgs84:function(a){e.datum_params=a.split(",").map(function(l){return parseFloat(l)})},to_meter:function(a){e.to_meter=parseFloat(a)},units:function(a){e.units=a;var l=Io(t5,a);l&&(e.to_meter=l.to_meter)},from_greenwich:function(a){e.from_greenwich=a*Xi},pm:function(a){var l=Io(Or,a);e.from_greenwich=(l||parseFloat(a))*Xi},nadgrids:function(a){a==="@null"?e.datumCode="none":e.nadgrids=a},axis:function(a){var l="ewnsud";a.length===3&&l.indexOf(a.substr(0,1))!==-1&&l.indexOf(a.substr(1,1))!==-1&&l.indexOf(a.substr(2,1))!==-1&&(e.axis=a)},approx:function(){e.approx=!0}};for(i in t)r=t[i],i in o?(s=o[i],typeof s=="function"?s(r):e[s]=r):e[i]=r;return typeof e.datumCode=="string"&&e.datumCode!=="WGS84"&&(e.datumCode=e.datumCode.toLowerCase()),e}var Gl=1,Mv=2,Tv=3,Ec=4,Lv=5,Hf=-1,n5=/\s/,i5=/[A-Za-z]/,r5=/[A-Za-z84_]/,eh=/[,\]]/,Cv=/[\d\.E\-\+]/;function ao(n){if(typeof n!="string")throw new Error("not a string");this.text=n.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=Gl}ao.prototype.readCharicter=function(){var n=this.text[this.place++];if(this.state!==Ec)for(;n5.test(n);){if(this.place>=this.text.length)return;n=this.text[this.place++]}switch(this.state){case Gl:return this.neutral(n);case Mv:return this.keyword(n);case Ec:return this.quoted(n);case Lv:return this.afterquote(n);case Tv:return this.number(n);case Hf:return}};ao.prototype.afterquote=function(n){if(n==='"'){this.word+='"',this.state=Ec;return}if(eh.test(n)){this.word=this.word.trim(),this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in afterquote yet, index '+this.place)};ao.prototype.afterItem=function(n){if(n===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=Gl;return}if(n==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=Gl,this.currentObject=this.stack.pop(),this.currentObject||(this.state=Hf);return}};ao.prototype.number=function(n){if(Cv.test(n)){this.word+=n;return}if(eh.test(n)){this.word=parseFloat(this.word),this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in number yet, index '+this.place)};ao.prototype.quoted=function(n){if(n==='"'){this.state=Lv;return}this.word+=n};ao.prototype.keyword=function(n){if(r5.test(n)){this.word+=n;return}if(n==="["){var e=[];e.push(this.word),this.level++,this.root===null?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,this.state=Gl;return}if(eh.test(n)){this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in keyword yet, index '+this.place)};ao.prototype.neutral=function(n){if(i5.test(n)){this.word=n,this.state=Mv;return}if(n==='"'){this.word="",this.state=Ec;return}if(Cv.test(n)){this.word=n,this.state=Tv;return}if(eh.test(n)){this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in neutral yet, index '+this.place)};ao.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===Hf)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function s5(n){var e=new ao(n);return e.output()}function $0(n,e,t){Array.isArray(e)&&(t.unshift(e),e=null);var i=e?{}:n,r=t.reduce(function(s,o){return _a(o,s),s},i);e&&(n[e]=r)}function _a(n,e){if(!Array.isArray(n)){e[n]=!0;return}var t=n.shift();if(t==="PARAMETER"&&(t=n.shift()),n.length===1){if(Array.isArray(n[0])){e[t]={},_a(n[0],e[t]);return}e[t]=n[0];return}if(!n.length){e[t]=!0;return}if(t==="TOWGS84"){e[t]=n;return}if(t==="AXIS"){t in e||(e[t]=[]),e[t].push(n);return}Array.isArray(t)||(e[t]={});var i;switch(t){case"UNIT":case"PRIMEM":case"VERT_DATUM":e[t]={name:n[0].toLowerCase(),convert:n[1]},n.length===3&&_a(n[2],e[t]);return;case"SPHEROID":case"ELLIPSOID":e[t]={name:n[0],a:n[1],rf:n[2]},n.length===4&&_a(n[3],e[t]);return;case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":n[0]=["name",n[0]],$0(e,t,n);return;default:for(i=-1;++i<n.length;)if(!Array.isArray(n[i]))return _a(n,e[t]);return $0(e,t,n)}}var o5=.017453292519943295;function a5(n,e){var t=e[0],i=e[1];!(t in n)&&i in n&&(n[t]=n[i],e.length===3&&(n[t]=e[2](n[t])))}function Ls(n){return n*o5}function l5(n){if(n.type==="GEOGCS"?n.projName="longlat":n.type==="LOCAL_CS"?(n.projName="identity",n.local=!0):typeof n.PROJECTION=="object"?n.projName=Object.keys(n.PROJECTION)[0]:n.projName=n.PROJECTION,n.AXIS){for(var e="",t=0,i=n.AXIS.length;t<i;++t){var r=[n.AXIS[t][0].toLowerCase(),n.AXIS[t][1].toLowerCase()];r[0].indexOf("north")!==-1||(r[0]==="y"||r[0]==="lat")&&r[1]==="north"?e+="n":r[0].indexOf("south")!==-1||(r[0]==="y"||r[0]==="lat")&&r[1]==="south"?e+="s":r[0].indexOf("east")!==-1||(r[0]==="x"||r[0]==="lon")&&r[1]==="east"?e+="e":(r[0].indexOf("west")!==-1||(r[0]==="x"||r[0]==="lon")&&r[1]==="west")&&(e+="w")}e.length===2&&(e+="u"),e.length===3&&(n.axis=e)}n.UNIT&&(n.units=n.UNIT.name.toLowerCase(),n.units==="metre"&&(n.units="meter"),n.UNIT.convert&&(n.type==="GEOGCS"?n.DATUM&&n.DATUM.SPHEROID&&(n.to_meter=n.UNIT.convert*n.DATUM.SPHEROID.a):n.to_meter=n.UNIT.convert));var s=n.GEOGCS;n.type==="GEOGCS"&&(s=n),s&&(s.DATUM?n.datumCode=s.DATUM.name.toLowerCase():n.datumCode=s.name.toLowerCase(),n.datumCode.slice(0,2)==="d_"&&(n.datumCode=n.datumCode.slice(2)),(n.datumCode==="new_zealand_geodetic_datum_1949"||n.datumCode==="new_zealand_1949")&&(n.datumCode="nzgd49"),(n.datumCode==="wgs_1984"||n.datumCode==="world_geodetic_system_1984")&&(n.PROJECTION==="Mercator_Auxiliary_Sphere"&&(n.sphere=!0),n.datumCode="wgs84"),n.datumCode.slice(-6)==="_ferro"&&(n.datumCode=n.datumCode.slice(0,-6)),n.datumCode.slice(-8)==="_jakarta"&&(n.datumCode=n.datumCode.slice(0,-8)),~n.datumCode.indexOf("belge")&&(n.datumCode="rnb72"),s.DATUM&&s.DATUM.SPHEROID&&(n.ellps=s.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),n.ellps.toLowerCase().slice(0,13)==="international"&&(n.ellps="intl"),n.a=s.DATUM.SPHEROID.a,n.rf=parseFloat(s.DATUM.SPHEROID.rf,10)),s.DATUM&&s.DATUM.TOWGS84&&(n.datum_params=s.DATUM.TOWGS84),~n.datumCode.indexOf("osgb_1936")&&(n.datumCode="osgb36"),~n.datumCode.indexOf("osni_1952")&&(n.datumCode="osni52"),(~n.datumCode.indexOf("tm65")||~n.datumCode.indexOf("geodetic_datum_of_1965"))&&(n.datumCode="ire65"),n.datumCode==="ch1903+"&&(n.datumCode="ch1903"),~n.datumCode.indexOf("israel")&&(n.datumCode="isr93")),n.b&&!isFinite(n.b)&&(n.b=n.a);function o(h){var d=n.to_meter||1;return h*d}var a=function(h){return a5(n,h)},l=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",Ls],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",Ls],["x0","false_easting",o],["y0","false_northing",o],["long0","central_meridian",Ls],["lat0","latitude_of_origin",Ls],["lat0","standard_parallel_1",Ls],["lat1","standard_parallel_1",Ls],["lat2","standard_parallel_2",Ls],["azimuth","Azimuth"],["alpha","azimuth",Ls],["srsCode","name"]];l.forEach(a),!n.long0&&n.longc&&(n.projName==="Albers_Conic_Equal_Area"||n.projName==="Lambert_Azimuthal_Equal_Area")&&(n.long0=n.longc),!n.lat_ts&&n.lat1&&(n.projName==="Stereographic_South_Pole"||n.projName==="Polar Stereographic (variant B)")?(n.lat0=Ls(n.lat1>0?90:-90),n.lat_ts=n.lat1):!n.lat_ts&&n.lat0&&n.projName==="Polar_Stereographic"&&(n.lat_ts=n.lat0,n.lat0=Ls(n.lat0>0?90:-90))}function Pv(n){var e=s5(n),t=e.shift(),i=e.shift();e.unshift(["name",i]),e.unshift(["type",t]);var r={};return _a(e,r),l5(r),r}function pr(n){var e=this;if(arguments.length===2){var t=arguments[1];typeof t=="string"?t.charAt(0)==="+"?pr[n]=sf(arguments[1]):pr[n]=Pv(arguments[1]):pr[n]=t}else if(arguments.length===1){if(Array.isArray(n))return n.map(function(i){Array.isArray(i)?pr.apply(e,i):pr(i)});if(typeof n=="string"){if(n in pr)return pr[n]}else"EPSG"in n?pr["EPSG:"+n.EPSG]=n:"ESRI"in n?pr["ESRI:"+n.ESRI]=n:"IAU2000"in n?pr["IAU2000:"+n.IAU2000]=n:console.log(n);return}}W4(pr);function u5(n){return typeof n=="string"}function c5(n){return n in pr}var h5=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function f5(n){return h5.some(function(e){return n.indexOf(e)>-1})}var d5=["3857","900913","3785","102113"];function g5(n){var e=Io(n,"authority");if(e){var t=Io(e,"epsg");return t&&d5.indexOf(t)>-1}}function m5(n){var e=Io(n,"extension");if(e)return Io(e,"proj4")}function _5(n){return n[0]==="+"}function p5(n){if(u5(n)){if(c5(n))return pr[n];if(f5(n)){var e=Pv(n);if(g5(e))return pr["EPSG:3857"];var t=m5(e);return t?sf(t):e}if(_5(n))return sf(n)}else return n}function V0(n,e){n=n||{};var t,i;if(!e)return n;for(i in e)t=e[i],t!==void 0&&(n[i]=t);return n}function Fs(n,e,t){var i=n*e;return t/Math.sqrt(1-i*i)}function nu(n){return n<0?-1:1}function Kt(n){return Math.abs(n)<=Ai?n:n-nu(n)*zl}function ys(n,e,t){var i=n*t,r=.5*n;return i=Math.pow((1-i)/(1+i),r),Math.tan(.5*(At-e))/i}function Hl(n,e){for(var t=.5*n,i,r,s=At-2*Math.atan(e),o=0;o<=15;o++)if(i=n*Math.sin(s),r=At-2*Math.atan(e*Math.pow((1-i)/(1+i),t))-s,s+=r,Math.abs(r)<=1e-10)return s;return-9999}function v5(){var n=this.b/this.a;this.es=1-n*n,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=Fs(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function y5(n){var e=n.x,t=n.y;if(t*Ps>90&&t*Ps<-90&&e*Ps>180&&e*Ps<-180)return null;var i,r;if(Math.abs(Math.abs(t)-At)<=Yt)return null;if(this.sphere)i=this.x0+this.a*this.k0*Kt(e-this.long0),r=this.y0+this.a*this.k0*Math.log(Math.tan(ai+.5*t));else{var s=Math.sin(t),o=ys(this.e,t,s);i=this.x0+this.a*this.k0*Kt(e-this.long0),r=this.y0-this.a*this.k0*Math.log(o)}return n.x=i,n.y=r,n}function b5(n){var e=n.x-this.x0,t=n.y-this.y0,i,r;if(this.sphere)r=At-2*Math.atan(Math.exp(-t/(this.a*this.k0)));else{var s=Math.exp(-t/(this.a*this.k0));if(r=Hl(this.e,s),r===-9999)return null}return i=Kt(this.long0+e/(this.a*this.k0)),n.x=i,n.y=r,n}var w5=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"];const k5={init:v5,forward:y5,inverse:b5,names:w5};function E5(){}function z0(n){return n}var S5=["longlat","identity"];const I5={init:E5,forward:z0,inverse:z0,names:S5};var M5=[k5,I5],sc={},Sc=[];function Nv(n,e){var t=Sc.length;return n.names?(Sc[t]=n,n.names.forEach(function(i){sc[i.toLowerCase()]=t}),this):(console.log(e),!0)}function T5(n){if(!n)return!1;var e=n.toLowerCase();if(typeof sc[e]<"u"&&Sc[sc[e]])return Sc[sc[e]]}function L5(){M5.forEach(Nv)}const C5={start:L5,add:Nv,get:T5};var Dn={};Dn.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};Dn.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};Dn.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};Dn.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};Dn.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"};Dn.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};Dn.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};Dn.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"};Dn.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};Dn.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};Dn.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};Dn.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"};Dn.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};Dn.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"};Dn.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."};Dn.clrk80ign={a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"};Dn.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"};Dn.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};Dn.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};Dn.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"};Dn.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"};Dn.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"};Dn.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"};Dn.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"};Dn.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};Dn.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};Dn.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};Dn.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};Dn.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};Dn.hough={a:6378270,rf:297,ellipseName:"Hough"};Dn.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};Dn.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};Dn.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};Dn.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};Dn.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"};Dn.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};Dn.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};Dn.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"};Dn.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"};Dn.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};Dn.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};Dn.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var P5=Dn.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};Dn.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function N5(n,e,t,i){var r=n*n,s=e*e,o=(r-s)/r,a=0;i?(n*=1-o*(J4+o*(Q4+o*e5)),r=n*n,o=0):a=Math.sqrt(o);var l=(r-s)/s;return{es:o,e:a,ep2:l}}function D5(n,e,t,i,r){if(!n){var s=Io(Dn,i);s||(s=P5),n=s.a,e=s.b,t=s.rf}return t&&!e&&(e=(1-1/t)*n),(t===0||Math.abs(n-e)<Yt)&&(r=!0,e=n),{a:n,b:e,rf:t,sphere:r}}var Gi={};Gi.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"};Gi.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"};Gi.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"};Gi.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"};Gi.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"};Gi.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"};Gi.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"};Gi.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"};Gi.militargeographische_institut={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"};Gi.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"};Gi.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"};Gi.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"};Gi.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"};Gi.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"};Gi.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"};Gi.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"};Gi.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"};Gi.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};function A5(n,e,t,i,r,s,o){var a={};return n===void 0||n==="none"?a.datum_type=rf:a.datum_type=X4,e&&(a.datum_params=e.map(parseFloat),(a.datum_params[0]!==0||a.datum_params[1]!==0||a.datum_params[2]!==0)&&(a.datum_type=Zo),a.datum_params.length>3&&(a.datum_params[3]!==0||a.datum_params[4]!==0||a.datum_params[5]!==0||a.datum_params[6]!==0)&&(a.datum_type=Yo,a.datum_params[3]*=Nl,a.datum_params[4]*=Nl,a.datum_params[5]*=Nl,a.datum_params[6]=a.datum_params[6]/1e6+1)),o&&(a.datum_type=Sa,a.grids=o),a.a=t,a.b=i,a.es=r,a.ep2=s,a}var Dv={};function R5(n,e){var t=new DataView(e),i=F5(t),r=B5(t,i),s=$5(t,r,i),o={header:r,subgrids:s};return Dv[n]=o,o}function O5(n){if(n===void 0)return null;var e=n.split(",");return e.map(x5)}function x5(n){if(n.length===0)return null;var e=n[0]==="@";return e&&(n=n.slice(1)),n==="null"?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:n,mandatory:!e,grid:Dv[n]||null,isNull:!1}}function pa(n){return n/3600*Math.PI/180}function F5(n){var e=n.getInt32(8,!1);return e===11?!1:(e=n.getInt32(8,!0),e!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function B5(n,e){return{nFields:n.getInt32(8,e),nSubgridFields:n.getInt32(24,e),nSubgrids:n.getInt32(40,e),shiftType:of(n,56,64).trim(),fromSemiMajorAxis:n.getFloat64(120,e),fromSemiMinorAxis:n.getFloat64(136,e),toSemiMajorAxis:n.getFloat64(152,e),toSemiMinorAxis:n.getFloat64(168,e)}}function of(n,e,t){return String.fromCharCode.apply(null,new Uint8Array(n.buffer.slice(e,t)))}function $5(n,e,t){for(var i=176,r=[],s=0;s<e.nSubgrids;s++){var o=z5(n,i,t),a=G5(n,i,o,t),l=Math.round(1+(o.upperLongitude-o.lowerLongitude)/o.longitudeInterval),h=Math.round(1+(o.upperLatitude-o.lowerLatitude)/o.latitudeInterval);r.push({ll:[pa(o.lowerLongitude),pa(o.lowerLatitude)],del:[pa(o.longitudeInterval),pa(o.latitudeInterval)],lim:[l,h],count:o.gridNodeCount,cvs:V5(a)}),i+=176+o.gridNodeCount*16}return r}function V5(n){return n.map(function(e){return[pa(e.longitudeShift),pa(e.latitudeShift)]})}function z5(n,e,t){return{name:of(n,e+8,e+16).trim(),parent:of(n,e+24,e+24+8).trim(),lowerLatitude:n.getFloat64(e+72,t),upperLatitude:n.getFloat64(e+88,t),lowerLongitude:n.getFloat64(e+104,t),upperLongitude:n.getFloat64(e+120,t),latitudeInterval:n.getFloat64(e+136,t),longitudeInterval:n.getFloat64(e+152,t),gridNodeCount:n.getInt32(e+168,t)}}function G5(n,e,t,i){for(var r=e+176,s=16,o=[],a=0;a<t.gridNodeCount;a++){var l={latitudeShift:n.getFloat32(r+a*s,i),longitudeShift:n.getFloat32(r+a*s+4,i),latitudeAccuracy:n.getFloat32(r+a*s+8,i),longitudeAccuracy:n.getFloat32(r+a*s+12,i)};o.push(l)}return o}function As(n,e){if(!(this instanceof As))return new As(n);e=e||function(h){if(h)throw h};var t=p5(n);if(typeof t!="object"){e("Could not parse to valid json: "+n);return}var i=As.projections.get(t.projName);if(!i){e("Could not get projection name from: "+n);return}if(t.datumCode&&t.datumCode!=="none"){var r=Io(Gi,t.datumCode);r&&(t.datum_params=t.datum_params||(r.towgs84?r.towgs84.split(","):null),t.ellps=r.ellipse,t.datumName=r.datumName?r.datumName:t.datumCode)}t.k0=t.k0||1,t.axis=t.axis||"enu",t.ellps=t.ellps||"wgs84",t.lat1=t.lat1||t.lat0;var s=D5(t.a,t.b,t.rf,t.ellps,t.sphere),o=N5(s.a,s.b,s.rf,t.R_A),a=O5(t.nadgrids),l=t.datum||A5(t.datumCode,t.datum_params,s.a,s.b,o.es,o.ep2,a);V0(this,t),V0(this,i),this.a=s.a,this.b=s.b,this.rf=s.rf,this.sphere=s.sphere,this.es=o.es,this.e=o.e,this.ep2=o.ep2,this.datum=l,this.init(),e(null,this)}As.projections=C5;As.projections.start();function H5(n,e){return n.datum_type!==e.datum_type||n.a!==e.a||Math.abs(n.es-e.es)>5e-11?!1:n.datum_type===Zo?n.datum_params[0]===e.datum_params[0]&&n.datum_params[1]===e.datum_params[1]&&n.datum_params[2]===e.datum_params[2]:n.datum_type===Yo?n.datum_params[0]===e.datum_params[0]&&n.datum_params[1]===e.datum_params[1]&&n.datum_params[2]===e.datum_params[2]&&n.datum_params[3]===e.datum_params[3]&&n.datum_params[4]===e.datum_params[4]&&n.datum_params[5]===e.datum_params[5]&&n.datum_params[6]===e.datum_params[6]:!0}function Av(n,e,t){var i=n.x,r=n.y,s=n.z?n.z:0,o,a,l,h;if(r<-At&&r>-1.001*At)r=-At;else if(r>At&&r<1.001*At)r=At;else{if(r<-At)return{x:-1/0,y:-1/0,z:n.z};if(r>At)return{x:1/0,y:1/0,z:n.z}}return i>Math.PI&&(i-=2*Math.PI),a=Math.sin(r),h=Math.cos(r),l=a*a,o=t/Math.sqrt(1-e*l),{x:(o+s)*h*Math.cos(i),y:(o+s)*h*Math.sin(i),z:(o*(1-e)+s)*a}}function Rv(n,e,t,i){var r=1e-12,s=r*r,o=30,a,l,h,d,m,v,k,w,E,I,M,C,D,O=n.x,P=n.y,F=n.z?n.z:0,V,$,G;if(a=Math.sqrt(O*O+P*P),l=Math.sqrt(O*O+P*P+F*F),a/t<r){if(V=0,l/t<r)return $=At,G=-i,{x:n.x,y:n.y,z:n.z}}else V=Math.atan2(P,O);h=F/l,d=a/l,m=1/Math.sqrt(1-e*(2-e)*d*d),w=d*(1-e)*m,E=h*m,D=0;do D++,k=t/Math.sqrt(1-e*E*E),G=a*w+F*E-k*(1-e*E*E),v=e*k/(k+G),m=1/Math.sqrt(1-v*(2-v)*d*d),I=d*(1-v)*m,M=h*m,C=M*w-I*E,w=I,E=M;while(C*C>s&&D<o);return $=Math.atan(M/Math.abs(I)),{x:V,y:$,z:G}}function U5(n,e,t){if(e===Zo)return{x:n.x+t[0],y:n.y+t[1],z:n.z+t[2]};if(e===Yo){var i=t[0],r=t[1],s=t[2],o=t[3],a=t[4],l=t[5],h=t[6];return{x:h*(n.x-l*n.y+a*n.z)+i,y:h*(l*n.x+n.y-o*n.z)+r,z:h*(-a*n.x+o*n.y+n.z)+s}}}function q5(n,e,t){if(e===Zo)return{x:n.x-t[0],y:n.y-t[1],z:n.z-t[2]};if(e===Yo){var i=t[0],r=t[1],s=t[2],o=t[3],a=t[4],l=t[5],h=t[6],d=(n.x-i)/h,m=(n.y-r)/h,v=(n.z-s)/h;return{x:d+l*m-a*v,y:-l*d+m+o*v,z:a*d-o*m+v}}}function wu(n){return n===Zo||n===Yo}function Z5(n,e,t){if(H5(n,e)||n.datum_type===rf||e.datum_type===rf)return t;var i=n.a,r=n.es;if(n.datum_type===Sa){var s=G0(n,!1,t);if(s!==0)return;i=x0,r=F0}var o=e.a,a=e.b,l=e.es;if(e.datum_type===Sa&&(o=x0,a=K4,l=F0),r===l&&i===o&&!wu(n.datum_type)&&!wu(e.datum_type))return t;if(t=Av(t,r,i),wu(n.datum_type)&&(t=U5(t,n.datum_type,n.datum_params)),wu(e.datum_type)&&(t=q5(t,e.datum_type,e.datum_params)),t=Rv(t,l,o,a),e.datum_type===Sa){var h=G0(e,!0,t);if(h!==0)return}return t}function G0(n,e,t){if(n.grids===null||n.grids.length===0)return console.log("Grid shift grids not found"),-1;var i={x:-t.x,y:t.y},r={x:Number.NaN,y:Number.NaN},s=[];e:for(var o=0;o<n.grids.length;o++){var a=n.grids[o];if(s.push(a.name),a.isNull){r=i;break}if(a.mandatory,a.grid===null){if(a.mandatory)return console.log("Unable to find mandatory grid '"+a.name+"'"),-1;continue}for(var l=a.grid.subgrids,h=0,d=l.length;h<d;h++){var m=l[h],v=(Math.abs(m.del[1])+Math.abs(m.del[0]))/1e4,k=m.ll[0]-v,w=m.ll[1]-v,E=m.ll[0]+(m.lim[0]-1)*m.del[0]+v,I=m.ll[1]+(m.lim[1]-1)*m.del[1]+v;if(!(w>i.y||k>i.x||I<i.y||E<i.x)&&(r=Y5(i,e,m),!isNaN(r.x)))break e}}return isNaN(r.x)?(console.log("Failed to find a grid shift table for location '"+-i.x*Ps+" "+i.y*Ps+" tried: '"+s+"'"),-1):(t.x=-r.x,t.y=r.y,0)}function Y5(n,e,t){var i={x:Number.NaN,y:Number.NaN};if(isNaN(n.x))return i;var r={x:n.x,y:n.y};r.x-=t.ll[0],r.y-=t.ll[1],r.x=Kt(r.x-Math.PI)+Math.PI;var s=H0(r,t);if(e){if(isNaN(s.x))return i;s.x=r.x-s.x,s.y=r.y-s.y;var o=9,a=1e-12,l,h;do{if(h=H0(s,t),isNaN(h.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}l={x:r.x-(h.x+s.x),y:r.y-(h.y+s.y)},s.x+=l.x,s.y+=l.y}while(o--&&Math.abs(l.x)>a&&Math.abs(l.y)>a);if(o<0)return console.log("Inverse grid shift iterator failed to converge."),i;i.x=Kt(s.x+t.ll[0]),i.y=s.y+t.ll[1]}else isNaN(s.x)||(i.x=n.x+s.x,i.y=n.y+s.y);return i}function H0(n,e){var t={x:n.x/e.del[0],y:n.y/e.del[1]},i={x:Math.floor(t.x),y:Math.floor(t.y)},r={x:t.x-1*i.x,y:t.y-1*i.y},s={x:Number.NaN,y:Number.NaN},o;if(i.x<0||i.x>=e.lim[0]||i.y<0||i.y>=e.lim[1])return s;o=i.y*e.lim[0]+i.x;var a={x:e.cvs[o][0],y:e.cvs[o][1]};o++;var l={x:e.cvs[o][0],y:e.cvs[o][1]};o+=e.lim[0];var h={x:e.cvs[o][0],y:e.cvs[o][1]};o--;var d={x:e.cvs[o][0],y:e.cvs[o][1]},m=r.x*r.y,v=r.x*(1-r.y),k=(1-r.x)*(1-r.y),w=(1-r.x)*r.y;return s.x=k*a.x+v*l.x+w*d.x+m*h.x,s.y=k*a.y+v*l.y+w*d.y+m*h.y,s}function U0(n,e,t){var i=t.x,r=t.y,s=t.z||0,o,a,l,h={};for(l=0;l<3;l++)if(!(e&&l===2&&t.z===void 0))switch(l===0?(o=i,"ew".indexOf(n.axis[l])!==-1?a="x":a="y"):l===1?(o=r,"ns".indexOf(n.axis[l])!==-1?a="y":a="x"):(o=s,a="z"),n.axis[l]){case"e":h[a]=o;break;case"w":h[a]=-o;break;case"n":h[a]=o;break;case"s":h[a]=-o;break;case"u":t[a]!==void 0&&(h.z=o);break;case"d":t[a]!==void 0&&(h.z=-o);break;default:return null}return h}function Ov(n){var e={x:n[0],y:n[1]};return n.length>2&&(e.z=n[2]),n.length>3&&(e.m=n[3]),e}function j5(n){q0(n.x),q0(n.y)}function q0(n){if(typeof Number.isFinite=="function"){if(Number.isFinite(n))return;throw new TypeError("coordinates must be finite numbers")}if(typeof n!="number"||n!==n||!isFinite(n))throw new TypeError("coordinates must be finite numbers")}function W5(n,e){return(n.datum.datum_type===Zo||n.datum.datum_type===Yo||n.datum.datum_type===Sa)&&e.datumCode!=="WGS84"||(e.datum.datum_type===Zo||e.datum.datum_type===Yo||e.datum.datum_type===Sa)&&n.datumCode!=="WGS84"}function Ic(n,e,t,i){var r;Array.isArray(t)?t=Ov(t):t={x:t.x,y:t.y,z:t.z,m:t.m};var s=t.z!==void 0;if(j5(t),n.datum&&e.datum&&W5(n,e)&&(r=new As("WGS84"),t=Ic(n,r,t,i),n=r),i&&n.axis!=="enu"&&(t=U0(n,!1,t)),n.projName==="longlat")t={x:t.x*Xi,y:t.y*Xi,z:t.z||0};else if(n.to_meter&&(t={x:t.x*n.to_meter,y:t.y*n.to_meter,z:t.z||0}),t=n.inverse(t),!t)return;if(n.from_greenwich&&(t.x+=n.from_greenwich),t=Z5(n.datum,e.datum,t),!!t)return e.from_greenwich&&(t={x:t.x-e.from_greenwich,y:t.y,z:t.z||0}),e.projName==="longlat"?t={x:t.x*Ps,y:t.y*Ps,z:t.z||0}:(t=e.forward(t),e.to_meter&&(t={x:t.x/e.to_meter,y:t.y/e.to_meter,z:t.z||0})),i&&e.axis!=="enu"?U0(e,!0,t):(t&&!s&&delete t.z,t)}var Z0=As("WGS84");function _h(n,e,t,i){var r,s,o;return Array.isArray(t)?(r=Ic(n,e,t,i)||{x:NaN,y:NaN},t.length>2?typeof n.name<"u"&&n.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"?typeof r.z=="number"?[r.x,r.y,r.z].concat(t.slice(3)):[r.x,r.y,t[2]].concat(t.slice(3)):[r.x,r.y].concat(t.slice(2)):[r.x,r.y]):(s=Ic(n,e,t,i),o=Object.keys(t),o.length===2||o.forEach(function(a){if(typeof n.name<"u"&&n.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"){if(a==="x"||a==="y"||a==="z")return}else if(a==="x"||a==="y")return;s[a]=t[a]}),s)}function Y0(n){return n instanceof As?n:n.oProj?n.oProj:As(n)}function Ur(n,e,t){n=Y0(n);var i=!1,r;return typeof e>"u"?(e=n,n=Z0,i=!0):(typeof e.x<"u"||Array.isArray(e))&&(t=e,e=n,n=Z0,i=!0),e=Y0(e),t?_h(n,e,t):(r={forward:function(s,o){return _h(n,e,s,o)},inverse:function(s,o){return _h(e,n,s,o)}},i&&(r.oProj=e),r)}var j0=6,xv="AJSAJS",Fv="AFAFAF",va=65,Dr=73,ns=79,bl=86,wl=90;const X5={forward:Bv,inverse:K5,toPoint:$v};function Bv(n,e){return e=e||5,e6(J5({lat:n[1],lon:n[0]}),e)}function K5(n){var e=Uf(zv(n.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function $v(n){var e=Uf(zv(n.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function ph(n){return n*(Math.PI/180)}function W0(n){return 180*(n/Math.PI)}function J5(n){var e=n.lat,t=n.lon,i=6378137,r=.00669438,s=.9996,o,a,l,h,d,m,v,k=ph(e),w=ph(t),E,I;I=Math.floor((t+180)/6)+1,t===180&&(I=60),e>=56&&e<64&&t>=3&&t<12&&(I=32),e>=72&&e<84&&(t>=0&&t<9?I=31:t>=9&&t<21?I=33:t>=21&&t<33?I=35:t>=33&&t<42&&(I=37)),o=(I-1)*6-180+3,E=ph(o),a=r/(1-r),l=i/Math.sqrt(1-r*Math.sin(k)*Math.sin(k)),h=Math.tan(k)*Math.tan(k),d=a*Math.cos(k)*Math.cos(k),m=Math.cos(k)*(w-E),v=i*((1-r/4-3*r*r/64-5*r*r*r/256)*k-(3*r/8+3*r*r/32+45*r*r*r/1024)*Math.sin(2*k)+(15*r*r/256+45*r*r*r/1024)*Math.sin(4*k)-35*r*r*r/3072*Math.sin(6*k));var M=s*l*(m+(1-h+d)*m*m*m/6+(5-18*h+h*h+72*d-58*a)*m*m*m*m*m/120)+5e5,C=s*(v+l*Math.tan(k)*(m*m/2+(5-h+9*d+4*d*d)*m*m*m*m/24+(61-58*h+h*h+600*d-330*a)*m*m*m*m*m*m/720));return e<0&&(C+=1e7),{northing:Math.round(C),easting:Math.round(M),zoneNumber:I,zoneLetter:Q5(e)}}function Uf(n){var e=n.northing,t=n.easting,i=n.zoneLetter,r=n.zoneNumber;if(r<0||r>60)return null;var s=.9996,o=6378137,a=.00669438,l,h=(1-Math.sqrt(1-a))/(1+Math.sqrt(1-a)),d,m,v,k,w,E,I,M,C,D=t-5e5,O=e;i<"N"&&(O-=1e7),I=(r-1)*6-180+3,l=a/(1-a),E=O/s,M=E/(o*(1-a/4-3*a*a/64-5*a*a*a/256)),C=M+(3*h/2-27*h*h*h/32)*Math.sin(2*M)+(21*h*h/16-55*h*h*h*h/32)*Math.sin(4*M)+151*h*h*h/96*Math.sin(6*M),d=o/Math.sqrt(1-a*Math.sin(C)*Math.sin(C)),m=Math.tan(C)*Math.tan(C),v=l*Math.cos(C)*Math.cos(C),k=o*(1-a)/Math.pow(1-a*Math.sin(C)*Math.sin(C),1.5),w=D/(d*s);var P=C-d*Math.tan(C)/k*(w*w/2-(5+3*m+10*v-4*v*v-9*l)*w*w*w*w/24+(61+90*m+298*v+45*m*m-252*l-3*v*v)*w*w*w*w*w*w/720);P=W0(P);var F=(w-(1+2*m+v)*w*w*w/6+(5-2*v+28*m-3*v*v+8*l+24*m*m)*w*w*w*w*w/120)/Math.cos(C);F=I+W0(F);var V;if(n.accuracy){var $=Uf({northing:n.northing+n.accuracy,easting:n.easting+n.accuracy,zoneLetter:n.zoneLetter,zoneNumber:n.zoneNumber});V={top:$.lat,right:$.lon,bottom:P,left:F}}else V={lat:P,lon:F};return V}function Q5(n){var e="Z";return 84>=n&&n>=72?e="X":72>n&&n>=64?e="W":64>n&&n>=56?e="V":56>n&&n>=48?e="U":48>n&&n>=40?e="T":40>n&&n>=32?e="S":32>n&&n>=24?e="R":24>n&&n>=16?e="Q":16>n&&n>=8?e="P":8>n&&n>=0?e="N":0>n&&n>=-8?e="M":-8>n&&n>=-16?e="L":-16>n&&n>=-24?e="K":-24>n&&n>=-32?e="J":-32>n&&n>=-40?e="H":-40>n&&n>=-48?e="G":-48>n&&n>=-56?e="F":-56>n&&n>=-64?e="E":-64>n&&n>=-72?e="D":-72>n&&n>=-80&&(e="C"),e}function e6(n,e){var t="00000"+n.easting,i="00000"+n.northing;return n.zoneNumber+n.zoneLetter+t6(n.easting,n.northing,n.zoneNumber)+t.substr(t.length-5,e)+i.substr(i.length-5,e)}function t6(n,e,t){var i=Vv(t),r=Math.floor(n/1e5),s=Math.floor(e/1e5)%20;return n6(r,s,i)}function Vv(n){var e=n%j0;return e===0&&(e=j0),e}function n6(n,e,t){var i=t-1,r=xv.charCodeAt(i),s=Fv.charCodeAt(i),o=r+n-1,a=s+e,l=!1;o>wl&&(o=o-wl+va-1,l=!0),(o===Dr||r<Dr&&o>Dr||(o>Dr||r<Dr)&&l)&&o++,(o===ns||r<ns&&o>ns||(o>ns||r<ns)&&l)&&(o++,o===Dr&&o++),o>wl&&(o=o-wl+va-1),a>bl?(a=a-bl+va-1,l=!0):l=!1,(a===Dr||s<Dr&&a>Dr||(a>Dr||s<Dr)&&l)&&a++,(a===ns||s<ns&&a>ns||(a>ns||s<ns)&&l)&&(a++,a===Dr&&a++),a>bl&&(a=a-bl+va-1);var h=String.fromCharCode(o)+String.fromCharCode(a);return h}function zv(n){if(n&&n.length===0)throw"MGRSPoint coverting from nothing";for(var e=n.length,t=null,i="",r,s=0;!/[A-Z]/.test(r=n.charAt(s));){if(s>=2)throw"MGRSPoint bad conversion from: "+n;i+=r,s++}var o=parseInt(i,10);if(s===0||s+3>e)throw"MGRSPoint bad conversion from: "+n;var a=n.charAt(s++);if(a<="A"||a==="B"||a==="Y"||a>="Z"||a==="I"||a==="O")throw"MGRSPoint zone letter "+a+" not handled: "+n;t=n.substring(s,s+=2);for(var l=Vv(o),h=i6(t.charAt(0),l),d=r6(t.charAt(1),l);d<s6(a);)d+=2e6;var m=e-s;if(m%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+n;var v=m/2,k=0,w=0,E,I,M,C,D;return v>0&&(E=1e5/Math.pow(10,v),I=n.substring(s,s+v),k=parseFloat(I)*E,M=n.substring(s+v),w=parseFloat(M)*E),C=k+h,D=w+d,{easting:C,northing:D,zoneLetter:a,zoneNumber:o,accuracy:E}}function i6(n,e){for(var t=xv.charCodeAt(e-1),i=1e5,r=!1;t!==n.charCodeAt(0);){if(t++,t===Dr&&t++,t===ns&&t++,t>wl){if(r)throw"Bad character: "+n;t=va,r=!0}i+=1e5}return i}function r6(n,e){if(n>"V")throw"MGRSPoint given invalid Northing "+n;for(var t=Fv.charCodeAt(e-1),i=0,r=!1;t!==n.charCodeAt(0);){if(t++,t===Dr&&t++,t===ns&&t++,t>bl){if(r)throw"Bad character: "+n;t=va,r=!0}i+=1e5}return i}function s6(n){var e;switch(n){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+n}function Oa(n,e,t){if(!(this instanceof Oa))return new Oa(n,e,t);if(Array.isArray(n))this.x=n[0],this.y=n[1],this.z=n[2]||0;else if(typeof n=="object")this.x=n.x,this.y=n.y,this.z=n.z||0;else if(typeof n=="string"&&typeof e>"u"){var i=n.split(",");this.x=parseFloat(i[0],10),this.y=parseFloat(i[1],10),this.z=parseFloat(i[2],10)||0}else this.x=n,this.y=e,this.z=t||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Oa.fromMGRS=function(n){return new Oa($v(n))};Oa.prototype.toMGRS=function(n){return Bv([this.x,this.y],n)};var o6=1,a6=.25,X0=.046875,K0=.01953125,J0=.01068115234375,l6=.75,u6=.46875,c6=.013020833333333334,h6=.007120768229166667,f6=.3645833333333333,d6=.005696614583333333,g6=.3076171875;function qf(n){var e=[];e[0]=o6-n*(a6+n*(X0+n*(K0+n*J0))),e[1]=n*(l6-n*(X0+n*(K0+n*J0)));var t=n*n;return e[2]=t*(u6-n*(c6+n*h6)),t*=n,e[3]=t*(f6-n*d6),e[4]=t*n*g6,e}function Za(n,e,t,i){return t*=e,e*=e,i[0]*n-t*(i[1]+e*(i[2]+e*(i[3]+e*i[4])))}var m6=20;function Zf(n,e,t){for(var i=1/(1-e),r=n,s=m6;s;--s){var o=Math.sin(r),a=1-e*o*o;if(a=(Za(r,o,Math.cos(r),t)-n)*(a*Math.sqrt(a))*i,r-=a,Math.abs(a)<Yt)return r}return r}function _6(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=qf(this.es),this.ml0=Za(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function p6(n){var e=n.x,t=n.y,i=Kt(e-this.long0),r,s,o,a=Math.sin(t),l=Math.cos(t);if(this.es){var d=l*i,m=Math.pow(d,2),v=this.ep2*Math.pow(l,2),k=Math.pow(v,2),w=Math.abs(l)>Yt?Math.tan(t):0,E=Math.pow(w,2),I=Math.pow(E,2);r=1-this.es*Math.pow(a,2),d=d/Math.sqrt(r);var M=Za(t,a,l,this.en);s=this.a*(this.k0*d*(1+m/6*(1-E+v+m/20*(5-18*E+I+14*v-58*E*v+m/42*(61+179*I-I*E-479*E)))))+this.x0,o=this.a*(this.k0*(M-this.ml0+a*i*d/2*(1+m/12*(5-E+9*v+4*k+m/30*(61+I-58*E+270*v-330*E*v+m/56*(1385+543*I-I*E-3111*E))))))+this.y0}else{var h=l*Math.sin(i);if(Math.abs(Math.abs(h)-1)<Yt)return 93;if(s=.5*this.a*this.k0*Math.log((1+h)/(1-h))+this.x0,o=l*Math.cos(i)/Math.sqrt(1-Math.pow(h,2)),h=Math.abs(o),h>=1){if(h-1>Yt)return 93;o=0}else o=Math.acos(o);t<0&&(o=-o),o=this.a*this.k0*(o-this.lat0)+this.y0}return n.x=s,n.y=o,n}function v6(n){var e,t,i,r,s=(n.x-this.x0)*(1/this.a),o=(n.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+o/this.k0,t=Zf(e,this.es,this.en),Math.abs(t)<At){var m=Math.sin(t),v=Math.cos(t),k=Math.abs(v)>Yt?Math.tan(t):0,w=this.ep2*Math.pow(v,2),E=Math.pow(w,2),I=Math.pow(k,2),M=Math.pow(I,2);e=1-this.es*Math.pow(m,2);var C=s*Math.sqrt(e)/this.k0,D=Math.pow(C,2);e=e*k,i=t-e*D/(1-this.es)*.5*(1-D/12*(5+3*I-9*w*I+w-4*E-D/30*(61+90*I-252*w*I+45*M+46*w-D/56*(1385+3633*I+4095*M+1574*M*I)))),r=Kt(this.long0+C*(1-D/6*(1+2*I+w-D/20*(5+28*I+24*M+8*w*I+6*w-D/42*(61+662*I+1320*M+720*M*I))))/v)}else i=At*nu(o),r=0;else{var a=Math.exp(s/this.k0),l=.5*(a-1/a),h=this.lat0+o/this.k0,d=Math.cos(h);e=Math.sqrt((1-Math.pow(d,2))/(1+Math.pow(l,2))),i=Math.asin(e),o<0&&(i=-i),l===0&&d===0?r=0:r=Kt(Math.atan2(l,d)+this.long0)}return n.x=r,n.y=i,n}var y6=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const oc={init:_6,forward:p6,inverse:v6,names:y6};function Gv(n){var e=Math.exp(n);return e=(e-1/e)/2,e}function Rr(n,e){n=Math.abs(n),e=Math.abs(e);var t=Math.max(n,e),i=Math.min(n,e)/(t||1);return t*Math.sqrt(1+Math.pow(i,2))}function b6(n){var e=1+n,t=e-1;return t===0?n:n*Math.log(e)/t}function w6(n){var e=Math.abs(n);return e=b6(e*(1+e/(Rr(1,e)+1))),n<0?-e:e}function Yf(n,e){for(var t=2*Math.cos(2*e),i=n.length-1,r=n[i],s=0,o;--i>=0;)o=-s+t*r+n[i],s=r,r=o;return e+o*Math.sin(2*e)}function k6(n,e){for(var t=2*Math.cos(e),i=n.length-1,r=n[i],s=0,o;--i>=0;)o=-s+t*r+n[i],s=r,r=o;return Math.sin(e)*o}function E6(n){var e=Math.exp(n);return e=(e+1/e)/2,e}function Hv(n,e,t){for(var i=Math.sin(e),r=Math.cos(e),s=Gv(t),o=E6(t),a=2*r*o,l=-2*i*s,h=n.length-1,d=n[h],m=0,v=0,k=0,w,E;--h>=0;)w=v,E=m,v=d,m=k,d=-w+a*v-l*m+n[h],k=-E+l*v+a*m;return a=i*o,l=r*s,[a*d-l*k,a*k+l*d]}function S6(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(oc.init.apply(this),this.forward=oc.forward,this.inverse=oc.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var n=this.es/(1+Math.sqrt(1-this.es)),e=n/(2-n),t=e;this.cgb[0]=e*(2+e*(-2/3+e*(-2+e*(116/45+e*(26/45+e*(-2854/675)))))),this.cbg[0]=e*(-2+e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))),t=t*e,this.cgb[1]=t*(7/3+e*(-8/5+e*(-227/45+e*(2704/315+e*(2323/945))))),this.cbg[1]=t*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),t=t*e,this.cgb[2]=t*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=t*(-26/15+e*(34/21+e*(8/5+e*(-12686/2835)))),t=t*e,this.cgb[3]=t*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=t*(1237/630+e*(-12/5+e*(-24832/14175))),t=t*e,this.cgb[4]=t*(4174/315+e*(-144838/6237)),this.cbg[4]=t*(-734/315+e*(109598/31185)),t=t*e,this.cgb[5]=t*(601676/22275),this.cbg[5]=t*(444337/155925),t=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+t*(1/4+t*(1/64+t/256))),this.utg[0]=e*(-.5+e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=t*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=t*(13/48+e*(-3/5+e*(557/1440+e*(281/630+e*(-1983433/1935360))))),t=t*e,this.utg[2]=t*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=t*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),t=t*e,this.utg[3]=t*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=t*(49561/161280+e*(-179/168+e*(6601661/7257600))),t=t*e,this.utg[4]=t*(-4583/161280+e*(108847/3991680)),this.gtu[4]=t*(34729/80640+e*(-3418889/1995840)),t=t*e,this.utg[5]=t*(-20648693/638668800),this.gtu[5]=t*(212378941/319334400);var i=Yf(this.cbg,this.lat0);this.Zb=-this.Qn*(i+k6(this.gtu,2*i))}function I6(n){var e=Kt(n.x-this.long0),t=n.y;t=Yf(this.cbg,t);var i=Math.sin(t),r=Math.cos(t),s=Math.sin(e),o=Math.cos(e);t=Math.atan2(i,o*r),e=Math.atan2(s*r,Rr(i,r*o)),e=w6(Math.tan(e));var a=Hv(this.gtu,2*t,2*e);t=t+a[0],e=e+a[1];var l,h;return Math.abs(e)<=2.623395162778?(l=this.a*(this.Qn*e)+this.x0,h=this.a*(this.Qn*t+this.Zb)+this.y0):(l=1/0,h=1/0),n.x=l,n.y=h,n}function M6(n){var e=(n.x-this.x0)*(1/this.a),t=(n.y-this.y0)*(1/this.a);t=(t-this.Zb)/this.Qn,e=e/this.Qn;var i,r;if(Math.abs(e)<=2.623395162778){var s=Hv(this.utg,2*t,2*e);t=t+s[0],e=e+s[1],e=Math.atan(Gv(e));var o=Math.sin(t),a=Math.cos(t),l=Math.sin(e),h=Math.cos(e);t=Math.atan2(o*h,Rr(l,h*a)),e=Math.atan2(l,h*a),i=Kt(e+this.long0),r=Yf(this.cgb,t)}else i=1/0,r=1/0;return n.x=i,n.y=r,n}var T6=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const ac={init:S6,forward:I6,inverse:M6,names:T6};function L6(n,e){if(n===void 0){if(n=Math.floor((Kt(e)+Math.PI)*30/Math.PI)+1,n<0)return 0;if(n>60)return 60}return n}var C6="etmerc";function P6(){var n=L6(this.zone,this.long0);if(n===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(n)-183)*Xi,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,ac.init.apply(this),this.forward=ac.forward,this.inverse=ac.inverse}var N6=["Universal Transverse Mercator System","utm"];const D6={init:P6,names:N6,dependsOn:C6};function jf(n,e){return Math.pow((1-n)/(1+n),e)}var A6=20;function R6(){var n=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*n*n),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(n/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+ai)/(Math.pow(Math.tan(.5*this.lat0+ai),this.C)*jf(this.e*n,this.ratexp))}function O6(n){var e=n.x,t=n.y;return n.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*t+ai),this.C)*jf(this.e*Math.sin(t),this.ratexp))-At,n.x=this.C*e,n}function x6(n){for(var e=1e-14,t=n.x/this.C,i=n.y,r=Math.pow(Math.tan(.5*i+ai)/this.K,1/this.C),s=A6;s>0&&(i=2*Math.atan(r*jf(this.e*Math.sin(n.y),-.5*this.e))-At,!(Math.abs(i-n.y)<e));--s)n.y=i;return s?(n.x=t,n.y=i,n):null}var F6=["gauss"];const Wf={init:R6,forward:O6,inverse:x6,names:F6};function B6(){Wf.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function $6(n){var e,t,i,r;return n.x=Kt(n.x-this.long0),Wf.forward.apply(this,[n]),e=Math.sin(n.y),t=Math.cos(n.y),i=Math.cos(n.x),r=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*t*i),n.x=r*t*Math.sin(n.x),n.y=r*(this.cosc0*e-this.sinc0*t*i),n.x=this.a*n.x+this.x0,n.y=this.a*n.y+this.y0,n}function V6(n){var e,t,i,r,s;if(n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a,n.x/=this.k0,n.y/=this.k0,s=Rr(n.x,n.y)){var o=2*Math.atan2(s,this.R2);e=Math.sin(o),t=Math.cos(o),r=Math.asin(t*this.sinc0+n.y*e*this.cosc0/s),i=Math.atan2(n.x*e,s*this.cosc0*t-n.y*this.sinc0*e)}else r=this.phic0,i=0;return n.x=i,n.y=r,Wf.inverse.apply(this,[n]),n.x=Kt(n.x+this.long0),n}var z6=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const G6={init:B6,forward:$6,inverse:V6,names:z6};function H6(n,e,t){return e*=t,Math.tan(.5*(At+n))*Math.pow((1-e)/(1+e),.5*t)}function U6(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Yt&&(this.k0=.5*(1+nu(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=Yt&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Yt&&Math.abs(Math.cos(this.lat_ts))>Yt&&(this.k0=.5*this.cons*Fs(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/ys(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Fs(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-At,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function q6(n){var e=n.x,t=n.y,i=Math.sin(t),r=Math.cos(t),s,o,a,l,h,d,m=Kt(e-this.long0);return Math.abs(Math.abs(e-this.long0)-Math.PI)<=Yt&&Math.abs(t+this.lat0)<=Yt?(n.x=NaN,n.y=NaN,n):this.sphere?(s=2*this.k0/(1+this.sinlat0*i+this.coslat0*r*Math.cos(m)),n.x=this.a*s*r*Math.sin(m)+this.x0,n.y=this.a*s*(this.coslat0*i-this.sinlat0*r*Math.cos(m))+this.y0,n):(o=2*Math.atan(this.ssfn_(t,i,this.e))-At,l=Math.cos(o),a=Math.sin(o),Math.abs(this.coslat0)<=Yt?(h=ys(this.e,t*this.con,this.con*i),d=2*this.a*this.k0*h/this.cons,n.x=this.x0+d*Math.sin(e-this.long0),n.y=this.y0-this.con*d*Math.cos(e-this.long0),n):(Math.abs(this.sinlat0)<Yt?(s=2*this.a*this.k0/(1+l*Math.cos(m)),n.y=s*a):(s=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*a+this.cosX0*l*Math.cos(m))),n.y=s*(this.cosX0*a-this.sinX0*l*Math.cos(m))+this.y0),n.x=s*l*Math.sin(m)+this.x0,n))}function Z6(n){n.x-=this.x0,n.y-=this.y0;var e,t,i,r,s,o=Math.sqrt(n.x*n.x+n.y*n.y);if(this.sphere){var a=2*Math.atan(o/(2*this.a*this.k0));return e=this.long0,t=this.lat0,o<=Yt?(n.x=e,n.y=t,n):(t=Math.asin(Math.cos(a)*this.sinlat0+n.y*Math.sin(a)*this.coslat0/o),Math.abs(this.coslat0)<Yt?this.lat0>0?e=Kt(this.long0+Math.atan2(n.x,-1*n.y)):e=Kt(this.long0+Math.atan2(n.x,n.y)):e=Kt(this.long0+Math.atan2(n.x*Math.sin(a),o*this.coslat0*Math.cos(a)-n.y*this.sinlat0*Math.sin(a))),n.x=e,n.y=t,n)}else if(Math.abs(this.coslat0)<=Yt){if(o<=Yt)return t=this.lat0,e=this.long0,n.x=e,n.y=t,n;n.x*=this.con,n.y*=this.con,i=o*this.cons/(2*this.a*this.k0),t=this.con*Hl(this.e,i),e=this.con*Kt(this.con*this.long0+Math.atan2(n.x,-1*n.y))}else r=2*Math.atan(o*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,o<=Yt?s=this.X0:(s=Math.asin(Math.cos(r)*this.sinX0+n.y*Math.sin(r)*this.cosX0/o),e=Kt(this.long0+Math.atan2(n.x*Math.sin(r),o*this.cosX0*Math.cos(r)-n.y*this.sinX0*Math.sin(r)))),t=-1*Hl(this.e,Math.tan(.5*(At+s)));return n.x=e,n.y=t,n}var Y6=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"];const j6={init:U6,forward:q6,inverse:Z6,names:Y6,ssfn_:H6};function W6(){var n=this.lat0;this.lambda0=this.long0;var e=Math.sin(n),t=this.a,i=this.rf,r=1/i,s=2*r-Math.pow(r,2),o=this.e=Math.sqrt(s);this.R=this.k0*t*Math.sqrt(1-s)/(1-s*Math.pow(e,2)),this.alpha=Math.sqrt(1+s/(1-s)*Math.pow(Math.cos(n),4)),this.b0=Math.asin(e/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),l=Math.log(Math.tan(Math.PI/4+n/2)),h=Math.log((1+o*e)/(1-o*e));this.K=a-this.alpha*l+this.alpha*o/2*h}function X6(n){var e=Math.log(Math.tan(Math.PI/4-n.y/2)),t=this.e/2*Math.log((1+this.e*Math.sin(n.y))/(1-this.e*Math.sin(n.y))),i=-this.alpha*(e+t)+this.K,r=2*(Math.atan(Math.exp(i))-Math.PI/4),s=this.alpha*(n.x-this.lambda0),o=Math.atan(Math.sin(s)/(Math.sin(this.b0)*Math.tan(r)+Math.cos(this.b0)*Math.cos(s))),a=Math.asin(Math.cos(this.b0)*Math.sin(r)-Math.sin(this.b0)*Math.cos(r)*Math.cos(s));return n.y=this.R/2*Math.log((1+Math.sin(a))/(1-Math.sin(a)))+this.y0,n.x=this.R*o+this.x0,n}function K6(n){for(var e=n.x-this.x0,t=n.y-this.y0,i=e/this.R,r=2*(Math.atan(Math.exp(t/this.R))-Math.PI/4),s=Math.asin(Math.cos(this.b0)*Math.sin(r)+Math.sin(this.b0)*Math.cos(r)*Math.cos(i)),o=Math.atan(Math.sin(i)/(Math.cos(this.b0)*Math.cos(i)-Math.sin(this.b0)*Math.tan(r))),a=this.lambda0+o/this.alpha,l=0,h=s,d=-1e3,m=0;Math.abs(h-d)>1e-7;){if(++m>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+s/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(h))/2)),d=h,h=2*Math.atan(Math.exp(l))-Math.PI/2}return n.x=a,n.y=h,n}var J6=["somerc"];const Q6={init:W6,forward:X6,inverse:K6,names:J6};var ga=1e-7;function e8(n){var e=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],t=typeof n.PROJECTION=="object"?Object.keys(n.PROJECTION)[0]:n.PROJECTION;return"no_uoff"in n||"no_off"in n||e.indexOf(t)!==-1}function t8(){var n,e,t,i,r,s,o,a,l,h,d=0,m,v=0,k=0,w=0,E=0,I=0,M=0;this.no_off=e8(this),this.no_rot="no_rot"in this;var C=!1;"alpha"in this&&(C=!0);var D=!1;if("rectified_grid_angle"in this&&(D=!0),C&&(M=this.alpha),D&&(d=this.rectified_grid_angle*Xi),C||D)v=this.longc;else if(k=this.long1,E=this.lat1,w=this.long2,I=this.lat2,Math.abs(E-I)<=ga||(n=Math.abs(E))<=ga||Math.abs(n-At)<=ga||Math.abs(Math.abs(this.lat0)-At)<=ga||Math.abs(Math.abs(I)-At)<=ga)throw new Error;var O=1-this.es;e=Math.sqrt(O),Math.abs(this.lat0)>Yt?(a=Math.sin(this.lat0),t=Math.cos(this.lat0),n=1-this.es*a*a,this.B=t*t,this.B=Math.sqrt(1+this.es*this.B*this.B/O),this.A=this.B*this.k0*e/n,i=this.B*e/(t*Math.sqrt(n)),r=i*i-1,r<=0?r=0:(r=Math.sqrt(r),this.lat0<0&&(r=-r)),this.E=r+=i,this.E*=Math.pow(ys(this.e,this.lat0,a),this.B)):(this.B=1/e,this.A=this.k0,this.E=i=r=1),C||D?(C?(m=Math.asin(Math.sin(M)/i),D||(d=M)):(m=d,M=Math.asin(i*Math.sin(m))),this.lam0=v-Math.asin(.5*(r-1/r)*Math.tan(m))/this.B):(s=Math.pow(ys(this.e,E,Math.sin(E)),this.B),o=Math.pow(ys(this.e,I,Math.sin(I)),this.B),r=this.E/s,l=(o-s)/(o+s),h=this.E*this.E,h=(h-o*s)/(h+o*s),n=k-w,n<-Math.pi?w-=zl:n>Math.pi&&(w+=zl),this.lam0=Kt(.5*(k+w)-Math.atan(h*Math.tan(.5*this.B*(k-w))/l)/this.B),m=Math.atan(2*Math.sin(this.B*Kt(k-this.lam0))/(r-1/r)),d=M=Math.asin(i*Math.sin(m))),this.singam=Math.sin(m),this.cosgam=Math.cos(m),this.sinrot=Math.sin(d),this.cosrot=Math.cos(d),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(i*i-1)/Math.cos(M))),this.lat0<0&&(this.u_0=-this.u_0)),r=.5*m,this.v_pole_n=this.ArB*Math.log(Math.tan(ai-r)),this.v_pole_s=this.ArB*Math.log(Math.tan(ai+r))}function n8(n){var e={},t,i,r,s,o,a,l,h;if(n.x=n.x-this.lam0,Math.abs(Math.abs(n.y)-At)>Yt){if(o=this.E/Math.pow(ys(this.e,n.y,Math.sin(n.y)),this.B),a=1/o,t=.5*(o-a),i=.5*(o+a),s=Math.sin(this.B*n.x),r=(t*this.singam-s*this.cosgam)/i,Math.abs(Math.abs(r)-1)<Yt)throw new Error;h=.5*this.ArB*Math.log((1-r)/(1+r)),a=Math.cos(this.B*n.x),Math.abs(a)<ga?l=this.A*n.x:l=this.ArB*Math.atan2(t*this.cosgam+s*this.singam,a)}else h=n.y>0?this.v_pole_n:this.v_pole_s,l=this.ArB*n.y;return this.no_rot?(e.x=l,e.y=h):(l-=this.u_0,e.x=h*this.cosrot+l*this.sinrot,e.y=l*this.cosrot-h*this.sinrot),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function i8(n){var e,t,i,r,s,o,a,l={};if(n.x=(n.x-this.x0)*(1/this.a),n.y=(n.y-this.y0)*(1/this.a),this.no_rot?(t=n.y,e=n.x):(t=n.x*this.cosrot-n.y*this.sinrot,e=n.y*this.cosrot+n.x*this.sinrot+this.u_0),i=Math.exp(-this.BrA*t),r=.5*(i-1/i),s=.5*(i+1/i),o=Math.sin(this.BrA*e),a=(o*this.cosgam+r*this.singam)/s,Math.abs(Math.abs(a)-1)<Yt)l.x=0,l.y=a<0?-At:At;else{if(l.y=this.E/Math.sqrt((1+a)/(1-a)),l.y=Hl(this.e,Math.pow(l.y,1/this.B)),l.y===1/0)throw new Error;l.x=-this.rB*Math.atan2(r*this.cosgam-o*this.singam,Math.cos(this.BrA*e))}return l.x+=this.lam0,l}var r8=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const s8={init:t8,forward:n8,inverse:i8,names:r8};function o8(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<Yt)){var n=this.b/this.a;this.e=Math.sqrt(1-n*n);var e=Math.sin(this.lat1),t=Math.cos(this.lat1),i=Fs(this.e,e,t),r=ys(this.e,this.lat1,e),s=Math.sin(this.lat2),o=Math.cos(this.lat2),a=Fs(this.e,s,o),l=ys(this.e,this.lat2,s),h=ys(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>Yt?this.ns=Math.log(i/a)/Math.log(r/l):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=i/(this.ns*Math.pow(r,this.ns)),this.rh=this.a*this.f0*Math.pow(h,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function a8(n){var e=n.x,t=n.y;Math.abs(2*Math.abs(t)-Math.PI)<=Yt&&(t=nu(t)*(At-2*Yt));var i=Math.abs(Math.abs(t)-At),r,s;if(i>Yt)r=ys(this.e,t,Math.sin(t)),s=this.a*this.f0*Math.pow(r,this.ns);else{if(i=t*this.ns,i<=0)return null;s=0}var o=this.ns*Kt(e-this.long0);return n.x=this.k0*(s*Math.sin(o))+this.x0,n.y=this.k0*(this.rh-s*Math.cos(o))+this.y0,n}function l8(n){var e,t,i,r,s,o=(n.x-this.x0)/this.k0,a=this.rh-(n.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(o*o+a*a),t=1):(e=-Math.sqrt(o*o+a*a),t=-1);var l=0;if(e!==0&&(l=Math.atan2(t*o,t*a)),e!==0||this.ns>0){if(t=1/this.ns,i=Math.pow(e/(this.a*this.f0),t),r=Hl(this.e,i),r===-9999)return null}else r=-At;return s=Kt(l/this.ns+this.long0),n.x=s,n.y=r,n}var u8=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const c8={init:o8,forward:a8,inverse:l8,names:u8};function h8(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function f8(n){var e,t,i,r,s,o,a,l=n.x,h=n.y,d=Kt(l-this.long0);return e=Math.pow((1+this.e*Math.sin(h))/(1-this.e*Math.sin(h)),this.alfa*this.e/2),t=2*(Math.atan(this.k*Math.pow(Math.tan(h/2+this.s45),this.alfa)/e)-this.s45),i=-d*this.alfa,r=Math.asin(Math.cos(this.ad)*Math.sin(t)+Math.sin(this.ad)*Math.cos(t)*Math.cos(i)),s=Math.asin(Math.cos(t)*Math.sin(i)/Math.cos(r)),o=this.n*s,a=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(r/2+this.s45),this.n),n.y=a*Math.cos(o)/1,n.x=a*Math.sin(o)/1,this.czech||(n.y*=-1,n.x*=-1),n}function d8(n){var e,t,i,r,s,o,a,l,h=n.x;n.x=n.y,n.y=h,this.czech||(n.y*=-1,n.x*=-1),o=Math.sqrt(n.x*n.x+n.y*n.y),s=Math.atan2(n.y,n.x),r=s/Math.sin(this.s0),i=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(i)-Math.sin(this.ad)*Math.cos(i)*Math.cos(r)),t=Math.asin(Math.cos(i)*Math.sin(r)/Math.cos(e)),n.x=this.long0-t/this.alfa,a=e,l=0;var d=0;do n.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-n.y)<1e-10&&(l=1),a=n.y,d+=1;while(l===0&&d<15);return d>=15?null:n}var g8=["Krovak","krovak"];const m8={init:h8,forward:f8,inverse:d8,names:g8};function yr(n,e,t,i,r){return n*r-e*Math.sin(2*r)+t*Math.sin(4*r)-i*Math.sin(6*r)}function iu(n){return 1-.25*n*(1+n/16*(3+1.25*n))}function ru(n){return .375*n*(1+.25*n*(1+.46875*n))}function su(n){return .05859375*n*n*(1+.75*n)}function ou(n){return n*n*n*(35/3072)}function xa(n,e,t){var i=e*t;return n/Math.sqrt(1-i*i)}function Po(n){return Math.abs(n)<At?n:n-nu(n)*Math.PI}function Mc(n,e,t,i,r){var s,o;s=n/e;for(var a=0;a<15;a++)if(o=(n-(e*s-t*Math.sin(2*s)+i*Math.sin(4*s)-r*Math.sin(6*s)))/(e-2*t*Math.cos(2*s)+4*i*Math.cos(4*s)-6*r*Math.cos(6*s)),s+=o,Math.abs(o)<=1e-10)return s;return NaN}function _8(){this.sphere||(this.e0=iu(this.es),this.e1=ru(this.es),this.e2=su(this.es),this.e3=ou(this.es),this.ml0=this.a*yr(this.e0,this.e1,this.e2,this.e3,this.lat0))}function p8(n){var e,t,i=n.x,r=n.y;if(i=Kt(i-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(r)*Math.sin(i)),t=this.a*(Math.atan2(Math.tan(r),Math.cos(i))-this.lat0);else{var s=Math.sin(r),o=Math.cos(r),a=xa(this.a,this.e,s),l=Math.tan(r)*Math.tan(r),h=i*Math.cos(r),d=h*h,m=this.es*o*o/(1-this.es),v=this.a*yr(this.e0,this.e1,this.e2,this.e3,r);e=a*h*(1-d*l*(1/6-(8-l+8*m)*d/120)),t=v-this.ml0+a*s/o*d*(.5+(5-l+6*m)*d/24)}return n.x=e+this.x0,n.y=t+this.y0,n}function v8(n){n.x-=this.x0,n.y-=this.y0;var e=n.x/this.a,t=n.y/this.a,i,r;if(this.sphere){var s=t+this.lat0;i=Math.asin(Math.sin(s)*Math.cos(e)),r=Math.atan2(Math.tan(e),Math.cos(s))}else{var o=this.ml0/this.a+t,a=Mc(o,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(a)-At)<=Yt)return n.x=this.long0,n.y=At,t<0&&(n.y*=-1),n;var l=xa(this.a,this.e,Math.sin(a)),h=l*l*l/this.a/this.a*(1-this.es),d=Math.pow(Math.tan(a),2),m=e*this.a/l,v=m*m;i=a-l*Math.tan(a)/h*m*m*(.5-(1+3*d)*m*m/24),r=m*(1-v*(d/3+(1+3*d)*d*v/15))/Math.cos(a)}return n.x=Kt(r+this.long0),n.y=Po(i),n}var y8=["Cassini","Cassini_Soldner","cass"];const b8={init:_8,forward:p8,inverse:v8,names:y8};function wo(n,e){var t;return n>1e-7?(t=n*e,(1-n*n)*(e/(1-t*t)-.5/n*Math.log((1-t)/(1+t)))):2*e}var w8=1,k8=2,E8=3,S8=4;function I8(){var n=Math.abs(this.lat0);if(Math.abs(n-At)<Yt?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(n)<Yt?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var e;switch(this.qp=wo(this.e,1),this.mmf=.5/(1-this.es),this.apa=R8(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=wo(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function M8(n){var e,t,i,r,s,o,a,l,h,d,m=n.x,v=n.y;if(m=Kt(m-this.long0),this.sphere){if(s=Math.sin(v),d=Math.cos(v),i=Math.cos(m),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(t=this.mode===this.EQUIT?1+d*i:1+this.sinph0*s+this.cosph0*d*i,t<=Yt)return null;t=Math.sqrt(2/t),e=t*d*Math.sin(m),t*=this.mode===this.EQUIT?s:this.cosph0*s-this.sinph0*d*i}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(i=-i),Math.abs(v+this.lat0)<Yt)return null;t=ai-v*.5,t=2*(this.mode===this.S_POLE?Math.cos(t):Math.sin(t)),e=t*Math.sin(m),t*=i}}else{switch(a=0,l=0,h=0,i=Math.cos(m),r=Math.sin(m),s=Math.sin(v),o=wo(this.e,s),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(a=o/this.qp,l=Math.sqrt(1-a*a)),this.mode){case this.OBLIQ:h=1+this.sinb1*a+this.cosb1*l*i;break;case this.EQUIT:h=1+l*i;break;case this.N_POLE:h=At+v,o=this.qp-o;break;case this.S_POLE:h=v-At,o=this.qp+o;break}if(Math.abs(h)<Yt)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:h=Math.sqrt(2/h),this.mode===this.OBLIQ?t=this.ymf*h*(this.cosb1*a-this.sinb1*l*i):t=(h=Math.sqrt(2/(1+l*i)))*a*this.ymf,e=this.xmf*h*l*r;break;case this.N_POLE:case this.S_POLE:o>=0?(e=(h=Math.sqrt(o))*r,t=i*(this.mode===this.S_POLE?h:-h)):e=t=0;break}}return n.x=this.a*e+this.x0,n.y=this.a*t+this.y0,n}function T8(n){n.x-=this.x0,n.y-=this.y0;var e=n.x/this.a,t=n.y/this.a,i,r,s,o,a,l,h;if(this.sphere){var d=0,m,v=0;if(m=Math.sqrt(e*e+t*t),r=m*.5,r>1)return null;switch(r=2*Math.asin(r),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(v=Math.sin(r),d=Math.cos(r)),this.mode){case this.EQUIT:r=Math.abs(m)<=Yt?0:Math.asin(t*v/m),e*=v,t=d*m;break;case this.OBLIQ:r=Math.abs(m)<=Yt?this.lat0:Math.asin(d*this.sinph0+t*v*this.cosph0/m),e*=v*this.cosph0,t=(d-Math.sin(r)*this.sinph0)*m;break;case this.N_POLE:t=-t,r=At-r;break;case this.S_POLE:r-=At;break}i=t===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(e,t)}else{if(h=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e/=this.dd,t*=this.dd,l=Math.sqrt(e*e+t*t),l<Yt)return n.x=this.long0,n.y=this.lat0,n;o=2*Math.asin(.5*l/this.rq),s=Math.cos(o),e*=o=Math.sin(o),this.mode===this.OBLIQ?(h=s*this.sinb1+t*o*this.cosb1/l,a=this.qp*h,t=l*this.cosb1*s-t*this.sinb1*o):(h=t*o/l,a=this.qp*h,t=l*s)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(t=-t),a=e*e+t*t,!a)return n.x=this.long0,n.y=this.lat0,n;h=1-a/this.qp,this.mode===this.S_POLE&&(h=-h)}i=Math.atan2(e,t),r=O8(Math.asin(h),this.apa)}return n.x=Kt(this.long0+i),n.y=r,n}var L8=.3333333333333333,C8=.17222222222222222,P8=.10257936507936508,N8=.06388888888888888,D8=.0664021164021164,A8=.016415012942191543;function R8(n){var e,t=[];return t[0]=n*L8,e=n*n,t[0]+=e*C8,t[1]=e*N8,e*=n,t[0]+=e*P8,t[1]+=e*D8,t[2]=e*A8,t}function O8(n,e){var t=n+n;return n+e[0]*Math.sin(t)+e[1]*Math.sin(t+t)+e[2]*Math.sin(t+t+t)}var x8=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const F8={init:I8,forward:M8,inverse:T8,names:x8,S_POLE:w8,N_POLE:k8,EQUIT:E8,OBLIQ:S8};function Mo(n){return Math.abs(n)>1&&(n=n>1?1:-1),Math.asin(n)}function B8(){Math.abs(this.lat1+this.lat2)<Yt||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Fs(this.e3,this.sin_po,this.cos_po),this.qs1=wo(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Fs(this.e3,this.sin_po,this.cos_po),this.qs2=wo(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=wo(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>Yt?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function $8(n){var e=n.x,t=n.y;this.sin_phi=Math.sin(t),this.cos_phi=Math.cos(t);var i=wo(this.e3,this.sin_phi),r=this.a*Math.sqrt(this.c-this.ns0*i)/this.ns0,s=this.ns0*Kt(e-this.long0),o=r*Math.sin(s)+this.x0,a=this.rh-r*Math.cos(s)+this.y0;return n.x=o,n.y=a,n}function V8(n){var e,t,i,r,s,o;return n.x-=this.x0,n.y=this.rh-n.y+this.y0,this.ns0>=0?(e=Math.sqrt(n.x*n.x+n.y*n.y),i=1):(e=-Math.sqrt(n.x*n.x+n.y*n.y),i=-1),r=0,e!==0&&(r=Math.atan2(i*n.x,i*n.y)),i=e*this.ns0/this.a,this.sphere?o=Math.asin((this.c-i*i)/(2*this.ns0)):(t=(this.c-i*i)/this.ns0,o=this.phi1z(this.e3,t)),s=Kt(r/this.ns0+this.long0),n.x=s,n.y=o,n}function z8(n,e){var t,i,r,s,o,a=Mo(.5*e);if(n<Yt)return a;for(var l=n*n,h=1;h<=25;h++)if(t=Math.sin(a),i=Math.cos(a),r=n*t,s=1-r*r,o=.5*s*s/i*(e/(1-l)-t/s+.5/n*Math.log((1-r)/(1+r))),a=a+o,Math.abs(o)<=1e-7)return a;return null}var G8=["Albers_Conic_Equal_Area","Albers","aea"];const H8={init:B8,forward:$8,inverse:V8,names:G8,phi1z:z8};function U8(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function q8(n){var e,t,i,r,s,o,a,l,h=n.x,d=n.y;return i=Kt(h-this.long0),e=Math.sin(d),t=Math.cos(d),r=Math.cos(i),o=this.sin_p14*e+this.cos_p14*t*r,s=1,o>0||Math.abs(o)<=Yt?(a=this.x0+this.a*s*t*Math.sin(i)/o,l=this.y0+this.a*s*(this.cos_p14*e-this.sin_p14*t*r)/o):(a=this.x0+this.infinity_dist*t*Math.sin(i),l=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*t*r)),n.x=a,n.y=l,n}function Z8(n){var e,t,i,r,s,o;return n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a,n.x/=this.k0,n.y/=this.k0,(e=Math.sqrt(n.x*n.x+n.y*n.y))?(r=Math.atan2(e,this.rc),t=Math.sin(r),i=Math.cos(r),o=Mo(i*this.sin_p14+n.y*t*this.cos_p14/e),s=Math.atan2(n.x*t,e*this.cos_p14*i-n.y*this.sin_p14*t),s=Kt(this.long0+s)):(o=this.phic0,s=0),n.x=s,n.y=o,n}var Y8=["gnom"];const j8={init:U8,forward:q8,inverse:Z8,names:Y8};function W8(n,e){var t=1-(1-n*n)/(2*n)*Math.log((1-n)/(1+n));if(Math.abs(Math.abs(e)-t)<1e-6)return e<0?-1*At:At;for(var i=Math.asin(.5*e),r,s,o,a,l=0;l<30;l++)if(s=Math.sin(i),o=Math.cos(i),a=n*s,r=Math.pow(1-a*a,2)/(2*o)*(e/(1-n*n)-s/(1-a*a)+.5/n*Math.log((1-a)/(1+a))),i+=r,Math.abs(r)<=1e-10)return i;return NaN}function X8(){this.sphere||(this.k0=Fs(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function K8(n){var e=n.x,t=n.y,i,r,s=Kt(e-this.long0);if(this.sphere)i=this.x0+this.a*s*Math.cos(this.lat_ts),r=this.y0+this.a*Math.sin(t)/Math.cos(this.lat_ts);else{var o=wo(this.e,Math.sin(t));i=this.x0+this.a*this.k0*s,r=this.y0+this.a*o*.5/this.k0}return n.x=i,n.y=r,n}function J8(n){n.x-=this.x0,n.y-=this.y0;var e,t;return this.sphere?(e=Kt(this.long0+n.x/this.a/Math.cos(this.lat_ts)),t=Math.asin(n.y/this.a*Math.cos(this.lat_ts))):(t=W8(this.e,2*n.y*this.k0/this.a),e=Kt(this.long0+n.x/(this.a*this.k0))),n.x=e,n.y=t,n}var Q8=["cea"];const e9={init:X8,forward:K8,inverse:J8,names:Q8};function t9(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function n9(n){var e=n.x,t=n.y,i=Kt(e-this.long0),r=Po(t-this.lat0);return n.x=this.x0+this.a*i*this.rc,n.y=this.y0+this.a*r,n}function i9(n){var e=n.x,t=n.y;return n.x=Kt(this.long0+(e-this.x0)/(this.a*this.rc)),n.y=Po(this.lat0+(t-this.y0)/this.a),n}var r9=["Equirectangular","Equidistant_Cylindrical","eqc"];const s9={init:t9,forward:n9,inverse:i9,names:r9};var Q0=20;function o9(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=iu(this.es),this.e1=ru(this.es),this.e2=su(this.es),this.e3=ou(this.es),this.ml0=this.a*yr(this.e0,this.e1,this.e2,this.e3,this.lat0)}function a9(n){var e=n.x,t=n.y,i,r,s,o=Kt(e-this.long0);if(s=o*Math.sin(t),this.sphere)Math.abs(t)<=Yt?(i=this.a*o,r=-1*this.a*this.lat0):(i=this.a*Math.sin(s)/Math.tan(t),r=this.a*(Po(t-this.lat0)+(1-Math.cos(s))/Math.tan(t)));else if(Math.abs(t)<=Yt)i=this.a*o,r=-1*this.ml0;else{var a=xa(this.a,this.e,Math.sin(t))/Math.tan(t);i=a*Math.sin(s),r=this.a*yr(this.e0,this.e1,this.e2,this.e3,t)-this.ml0+a*(1-Math.cos(s))}return n.x=i+this.x0,n.y=r+this.y0,n}function l9(n){var e,t,i,r,s,o,a,l,h;if(i=n.x-this.x0,r=n.y-this.y0,this.sphere)if(Math.abs(r+this.a*this.lat0)<=Yt)e=Kt(i/this.a+this.long0),t=0;else{o=this.lat0+r/this.a,a=i*i/this.a/this.a+o*o,l=o;var d;for(s=Q0;s;--s)if(d=Math.tan(l),h=-1*(o*(l*d+1)-l-.5*(l*l+a)*d)/((l-o)/d-1),l+=h,Math.abs(h)<=Yt){t=l;break}e=Kt(this.long0+Math.asin(i*Math.tan(l)/this.a)/Math.sin(t))}else if(Math.abs(r+this.ml0)<=Yt)t=0,e=Kt(this.long0+i/this.a);else{o=(this.ml0+r)/this.a,a=i*i/this.a/this.a+o*o,l=o;var m,v,k,w,E;for(s=Q0;s;--s)if(E=this.e*Math.sin(l),m=Math.sqrt(1-E*E)*Math.tan(l),v=this.a*yr(this.e0,this.e1,this.e2,this.e3,l),k=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),w=v/this.a,h=(o*(m*w+1)-w-.5*m*(w*w+a))/(this.es*Math.sin(2*l)*(w*w+a-2*o*w)/(4*m)+(o-w)*(m*k-2/Math.sin(2*l))-k),l-=h,Math.abs(h)<=Yt){t=l;break}m=Math.sqrt(1-this.es*Math.pow(Math.sin(t),2))*Math.tan(t),e=Kt(this.long0+Math.asin(i*m/this.a)/Math.sin(t))}return n.x=e,n.y=t,n}var u9=["Polyconic","poly"];const c9={init:o9,forward:a9,inverse:l9,names:u9};function h9(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function f9(n){var e,t=n.x,i=n.y,r=i-this.lat0,s=t-this.long0,o=r/Nl*1e-5,a=s,l=1,h=0;for(e=1;e<=10;e++)l=l*o,h=h+this.A[e]*l;var d=h,m=a,v=1,k=0,w,E,I=0,M=0;for(e=1;e<=6;e++)w=v*d-k*m,E=k*d+v*m,v=w,k=E,I=I+this.B_re[e]*v-this.B_im[e]*k,M=M+this.B_im[e]*v+this.B_re[e]*k;return n.x=M*this.a+this.x0,n.y=I*this.a+this.y0,n}function d9(n){var e,t=n.x,i=n.y,r=t-this.x0,s=i-this.y0,o=s/this.a,a=r/this.a,l=1,h=0,d,m,v=0,k=0;for(e=1;e<=6;e++)d=l*o-h*a,m=h*o+l*a,l=d,h=m,v=v+this.C_re[e]*l-this.C_im[e]*h,k=k+this.C_im[e]*l+this.C_re[e]*h;for(var w=0;w<this.iterations;w++){var E=v,I=k,M,C,D=o,O=a;for(e=2;e<=6;e++)M=E*v-I*k,C=I*v+E*k,E=M,I=C,D=D+(e-1)*(this.B_re[e]*E-this.B_im[e]*I),O=O+(e-1)*(this.B_im[e]*E+this.B_re[e]*I);E=1,I=0;var P=this.B_re[1],F=this.B_im[1];for(e=2;e<=6;e++)M=E*v-I*k,C=I*v+E*k,E=M,I=C,P=P+e*(this.B_re[e]*E-this.B_im[e]*I),F=F+e*(this.B_im[e]*E+this.B_re[e]*I);var V=P*P+F*F;v=(D*P+O*F)/V,k=(O*P-D*F)/V}var $=v,G=k,U=1,H=0;for(e=1;e<=9;e++)U=U*$,H=H+this.D[e]*U;var j=this.lat0+H*Nl*1e5,Q=this.long0+G;return n.x=Q,n.y=j,n}var g9=["New_Zealand_Map_Grid","nzmg"];const m9={init:h9,forward:f9,inverse:d9,names:g9};function _9(){}function p9(n){var e=n.x,t=n.y,i=Kt(e-this.long0),r=this.x0+this.a*i,s=this.y0+this.a*Math.log(Math.tan(Math.PI/4+t/2.5))*1.25;return n.x=r,n.y=s,n}function v9(n){n.x-=this.x0,n.y-=this.y0;var e=Kt(this.long0+n.x/this.a),t=2.5*(Math.atan(Math.exp(.8*n.y/this.a))-Math.PI/4);return n.x=e,n.y=t,n}var y9=["Miller_Cylindrical","mill"];const b9={init:_9,forward:p9,inverse:v9,names:y9};var w9=20;function k9(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=qf(this.es)}function E9(n){var e,t,i=n.x,r=n.y;if(i=Kt(i-this.long0),this.sphere){if(!this.m)r=this.n!==1?Math.asin(this.n*Math.sin(r)):r;else for(var s=this.n*Math.sin(r),o=w9;o;--o){var a=(this.m*r+Math.sin(r)-s)/(this.m+Math.cos(r));if(r-=a,Math.abs(a)<Yt)break}e=this.a*this.C_x*i*(this.m+Math.cos(r)),t=this.a*this.C_y*r}else{var l=Math.sin(r),h=Math.cos(r);t=this.a*Za(r,l,h,this.en),e=this.a*i*h/Math.sqrt(1-this.es*l*l)}return n.x=e,n.y=t,n}function S9(n){var e,t,i,r;return n.x-=this.x0,i=n.x/this.a,n.y-=this.y0,e=n.y/this.a,this.sphere?(e/=this.C_y,i=i/(this.C_x*(this.m+Math.cos(e))),this.m?e=Mo((this.m*e+Math.sin(e))/this.n):this.n!==1&&(e=Mo(Math.sin(e)/this.n)),i=Kt(i+this.long0),e=Po(e)):(e=Zf(n.y/this.a,this.es,this.en),r=Math.abs(e),r<At?(r=Math.sin(e),t=this.long0+n.x*Math.sqrt(1-this.es*r*r)/(this.a*Math.cos(e)),i=Kt(t)):r-Yt<At&&(i=this.long0)),n.x=i,n.y=e,n}var I9=["Sinusoidal","sinu"];const M9={init:k9,forward:E9,inverse:S9,names:I9};function T9(){}function L9(n){for(var e=n.x,t=n.y,i=Kt(e-this.long0),r=t,s=Math.PI*Math.sin(t);;){var o=-(r+Math.sin(r)-s)/(1+Math.cos(r));if(r+=o,Math.abs(o)<Yt)break}r/=2,Math.PI/2-Math.abs(t)<Yt&&(i=0);var a=.900316316158*this.a*i*Math.cos(r)+this.x0,l=1.4142135623731*this.a*Math.sin(r)+this.y0;return n.x=a,n.y=l,n}function C9(n){var e,t;n.x-=this.x0,n.y-=this.y0,t=n.y/(1.4142135623731*this.a),Math.abs(t)>.999999999999&&(t=.999999999999),e=Math.asin(t);var i=Kt(this.long0+n.x/(.900316316158*this.a*Math.cos(e)));i<-Math.PI&&(i=-Math.PI),i>Math.PI&&(i=Math.PI),t=(2*e+Math.sin(2*e))/Math.PI,Math.abs(t)>1&&(t=1);var r=Math.asin(t);return n.x=i,n.y=r,n}var P9=["Mollweide","moll"];const N9={init:T9,forward:L9,inverse:C9,names:P9};function D9(){Math.abs(this.lat1+this.lat2)<Yt||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=iu(this.es),this.e1=ru(this.es),this.e2=su(this.es),this.e3=ou(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=Fs(this.e,this.sinphi,this.cosphi),this.ml1=yr(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<Yt?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=Fs(this.e,this.sinphi,this.cosphi),this.ml2=yr(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=yr(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function A9(n){var e=n.x,t=n.y,i;if(this.sphere)i=this.a*(this.g-t);else{var r=yr(this.e0,this.e1,this.e2,this.e3,t);i=this.a*(this.g-r)}var s=this.ns*Kt(e-this.long0),o=this.x0+i*Math.sin(s),a=this.y0+this.rh-i*Math.cos(s);return n.x=o,n.y=a,n}function R9(n){n.x-=this.x0,n.y=this.rh-n.y+this.y0;var e,t,i,r;this.ns>=0?(t=Math.sqrt(n.x*n.x+n.y*n.y),e=1):(t=-Math.sqrt(n.x*n.x+n.y*n.y),e=-1);var s=0;if(t!==0&&(s=Math.atan2(e*n.x,e*n.y)),this.sphere)return r=Kt(this.long0+s/this.ns),i=Po(this.g-t/this.a),n.x=r,n.y=i,n;var o=this.g-t/this.a;return i=Mc(o,this.e0,this.e1,this.e2,this.e3),r=Kt(this.long0+s/this.ns),n.x=r,n.y=i,n}var O9=["Equidistant_Conic","eqdc"];const x9={init:D9,forward:A9,inverse:R9,names:O9};function F9(){this.R=this.a}function B9(n){var e=n.x,t=n.y,i=Kt(e-this.long0),r,s;Math.abs(t)<=Yt&&(r=this.x0+this.R*i,s=this.y0);var o=Mo(2*Math.abs(t/Math.PI));(Math.abs(i)<=Yt||Math.abs(Math.abs(t)-At)<=Yt)&&(r=this.x0,t>=0?s=this.y0+Math.PI*this.R*Math.tan(.5*o):s=this.y0+Math.PI*this.R*-Math.tan(.5*o));var a=.5*Math.abs(Math.PI/i-i/Math.PI),l=a*a,h=Math.sin(o),d=Math.cos(o),m=d/(h+d-1),v=m*m,k=m*(2/h-1),w=k*k,E=Math.PI*this.R*(a*(m-w)+Math.sqrt(l*(m-w)*(m-w)-(w+l)*(v-w)))/(w+l);i<0&&(E=-E),r=this.x0+E;var I=l+m;return E=Math.PI*this.R*(k*I-a*Math.sqrt((w+l)*(l+1)-I*I))/(w+l),t>=0?s=this.y0+E:s=this.y0-E,n.x=r,n.y=s,n}function $9(n){var e,t,i,r,s,o,a,l,h,d,m,v,k;return n.x-=this.x0,n.y-=this.y0,m=Math.PI*this.R,i=n.x/m,r=n.y/m,s=i*i+r*r,o=-Math.abs(r)*(1+s),a=o-2*r*r+i*i,l=-2*o+1+2*r*r+s*s,k=r*r/l+(2*a*a*a/l/l/l-9*o*a/l/l)/27,h=(o-a*a/3/l)/l,d=2*Math.sqrt(-h/3),m=3*k/h/d,Math.abs(m)>1&&(m>=0?m=1:m=-1),v=Math.acos(m)/3,n.y>=0?t=(-d*Math.cos(v+Math.PI/3)-a/3/l)*Math.PI:t=-(-d*Math.cos(v+Math.PI/3)-a/3/l)*Math.PI,Math.abs(i)<Yt?e=this.long0:e=Kt(this.long0+Math.PI*(s-1+Math.sqrt(1+2*(i*i-r*r)+s*s))/2/i),n.x=e,n.y=t,n}var V9=["Van_der_Grinten_I","VanDerGrinten","vandg"];const z9={init:F9,forward:B9,inverse:$9,names:V9};function G9(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function H9(n){var e=n.x,t=n.y,i=Math.sin(n.y),r=Math.cos(n.y),s=Kt(e-this.long0),o,a,l,h,d,m,v,k,w,E,I,M,C,D,O,P,F,V,$,G,U,H,j;return this.sphere?Math.abs(this.sin_p12-1)<=Yt?(n.x=this.x0+this.a*(At-t)*Math.sin(s),n.y=this.y0-this.a*(At-t)*Math.cos(s),n):Math.abs(this.sin_p12+1)<=Yt?(n.x=this.x0+this.a*(At+t)*Math.sin(s),n.y=this.y0+this.a*(At+t)*Math.cos(s),n):(V=this.sin_p12*i+this.cos_p12*r*Math.cos(s),P=Math.acos(V),F=P?P/Math.sin(P):1,n.x=this.x0+this.a*F*r*Math.sin(s),n.y=this.y0+this.a*F*(this.cos_p12*i-this.sin_p12*r*Math.cos(s)),n):(o=iu(this.es),a=ru(this.es),l=su(this.es),h=ou(this.es),Math.abs(this.sin_p12-1)<=Yt?(d=this.a*yr(o,a,l,h,At),m=this.a*yr(o,a,l,h,t),n.x=this.x0+(d-m)*Math.sin(s),n.y=this.y0-(d-m)*Math.cos(s),n):Math.abs(this.sin_p12+1)<=Yt?(d=this.a*yr(o,a,l,h,At),m=this.a*yr(o,a,l,h,t),n.x=this.x0+(d+m)*Math.sin(s),n.y=this.y0+(d+m)*Math.cos(s),n):(v=i/r,k=xa(this.a,this.e,this.sin_p12),w=xa(this.a,this.e,i),E=Math.atan((1-this.es)*v+this.es*k*this.sin_p12/(w*r)),I=Math.atan2(Math.sin(s),this.cos_p12*Math.tan(E)-this.sin_p12*Math.cos(s)),I===0?$=Math.asin(this.cos_p12*Math.sin(E)-this.sin_p12*Math.cos(E)):Math.abs(Math.abs(I)-Math.PI)<=Yt?$=-Math.asin(this.cos_p12*Math.sin(E)-this.sin_p12*Math.cos(E)):$=Math.asin(Math.sin(s)*Math.cos(E)/Math.sin(I)),M=this.e*this.sin_p12/Math.sqrt(1-this.es),C=this.e*this.cos_p12*Math.cos(I)/Math.sqrt(1-this.es),D=M*C,O=C*C,G=$*$,U=G*$,H=U*$,j=H*$,P=k*$*(1-G*O*(1-O)/6+U/8*D*(1-2*O)+H/120*(O*(4-7*O)-3*M*M*(1-7*O))-j/48*D),n.x=this.x0+P*Math.sin(I),n.y=this.y0+P*Math.cos(I),n))}function U9(n){n.x-=this.x0,n.y-=this.y0;var e,t,i,r,s,o,a,l,h,d,m,v,k,w,E,I,M,C,D,O,P,F,V,$;return this.sphere?(e=Math.sqrt(n.x*n.x+n.y*n.y),e>2*At*this.a?void 0:(t=e/this.a,i=Math.sin(t),r=Math.cos(t),s=this.long0,Math.abs(e)<=Yt?o=this.lat0:(o=Mo(r*this.sin_p12+n.y*i*this.cos_p12/e),a=Math.abs(this.lat0)-At,Math.abs(a)<=Yt?this.lat0>=0?s=Kt(this.long0+Math.atan2(n.x,-n.y)):s=Kt(this.long0-Math.atan2(-n.x,n.y)):s=Kt(this.long0+Math.atan2(n.x*i,e*this.cos_p12*r-n.y*this.sin_p12*i))),n.x=s,n.y=o,n)):(l=iu(this.es),h=ru(this.es),d=su(this.es),m=ou(this.es),Math.abs(this.sin_p12-1)<=Yt?(v=this.a*yr(l,h,d,m,At),e=Math.sqrt(n.x*n.x+n.y*n.y),k=v-e,o=Mc(k/this.a,l,h,d,m),s=Kt(this.long0+Math.atan2(n.x,-1*n.y)),n.x=s,n.y=o,n):Math.abs(this.sin_p12+1)<=Yt?(v=this.a*yr(l,h,d,m,At),e=Math.sqrt(n.x*n.x+n.y*n.y),k=e-v,o=Mc(k/this.a,l,h,d,m),s=Kt(this.long0+Math.atan2(n.x,n.y)),n.x=s,n.y=o,n):(e=Math.sqrt(n.x*n.x+n.y*n.y),I=Math.atan2(n.x,n.y),w=xa(this.a,this.e,this.sin_p12),M=Math.cos(I),C=this.e*this.cos_p12*M,D=-C*C/(1-this.es),O=3*this.es*(1-D)*this.sin_p12*this.cos_p12*M/(1-this.es),P=e/w,F=P-D*(1+D)*Math.pow(P,3)/6-O*(1+3*D)*Math.pow(P,4)/24,V=1-D*F*F/2-P*F*F*F/6,E=Math.asin(this.sin_p12*Math.cos(F)+this.cos_p12*Math.sin(F)*M),s=Kt(this.long0+Math.asin(Math.sin(I)*Math.sin(F)/Math.cos(E))),$=Math.sin(E),o=Math.atan2(($-this.es*V*this.sin_p12)*Math.tan(E),$*(1-this.es)),n.x=s,n.y=o,n))}var q9=["Azimuthal_Equidistant","aeqd"];const Z9={init:G9,forward:H9,inverse:U9,names:q9};function Y9(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function j9(n){var e,t,i,r,s,o,a,l,h=n.x,d=n.y;return i=Kt(h-this.long0),e=Math.sin(d),t=Math.cos(d),r=Math.cos(i),o=this.sin_p14*e+this.cos_p14*t*r,s=1,(o>0||Math.abs(o)<=Yt)&&(a=this.a*s*t*Math.sin(i),l=this.y0+this.a*s*(this.cos_p14*e-this.sin_p14*t*r)),n.x=a,n.y=l,n}function W9(n){var e,t,i,r,s,o,a;return n.x-=this.x0,n.y-=this.y0,e=Math.sqrt(n.x*n.x+n.y*n.y),t=Mo(e/this.a),i=Math.sin(t),r=Math.cos(t),o=this.long0,Math.abs(e)<=Yt?(a=this.lat0,n.x=o,n.y=a,n):(a=Mo(r*this.sin_p14+n.y*i*this.cos_p14/e),s=Math.abs(this.lat0)-At,Math.abs(s)<=Yt?(this.lat0>=0?o=Kt(this.long0+Math.atan2(n.x,-n.y)):o=Kt(this.long0-Math.atan2(-n.x,n.y)),n.x=o,n.y=a,n):(o=Kt(this.long0+Math.atan2(n.x*i,e*this.cos_p14*r-n.y*this.sin_p14*i)),n.x=o,n.y=a,n))}var X9=["ortho"];const K9={init:Y9,forward:j9,inverse:W9,names:X9};var Ei={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},li={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function J9(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=At-ai/2?this.face=Ei.TOP:this.lat0<=-(At-ai/2)?this.face=Ei.BOTTOM:Math.abs(this.long0)<=ai?this.face=Ei.FRONT:Math.abs(this.long0)<=At+ai?this.face=this.long0>0?Ei.RIGHT:Ei.LEFT:this.face=Ei.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function Q9(n){var e={x:0,y:0},t,i,r,s,o,a,l={value:0};if(n.x-=this.long0,this.es!==0?t=Math.atan(this.one_minus_f_squared*Math.tan(n.y)):t=n.y,i=n.x,this.face===Ei.TOP)s=At-t,i>=ai&&i<=At+ai?(l.value=li.AREA_0,r=i-At):i>At+ai||i<=-(At+ai)?(l.value=li.AREA_1,r=i>0?i-Ai:i+Ai):i>-(At+ai)&&i<=-ai?(l.value=li.AREA_2,r=i+At):(l.value=li.AREA_3,r=i);else if(this.face===Ei.BOTTOM)s=At+t,i>=ai&&i<=At+ai?(l.value=li.AREA_0,r=-i+At):i<ai&&i>=-ai?(l.value=li.AREA_1,r=-i):i<-ai&&i>=-(At+ai)?(l.value=li.AREA_2,r=-i-At):(l.value=li.AREA_3,r=i>0?-i+Ai:-i-Ai);else{var h,d,m,v,k,w,E;this.face===Ei.RIGHT?i=Ia(i,+At):this.face===Ei.BACK?i=Ia(i,+Ai):this.face===Ei.LEFT&&(i=Ia(i,-At)),v=Math.sin(t),k=Math.cos(t),w=Math.sin(i),E=Math.cos(i),h=k*E,d=k*w,m=v,this.face===Ei.FRONT?(s=Math.acos(h),r=ku(s,m,d,l)):this.face===Ei.RIGHT?(s=Math.acos(d),r=ku(s,m,-h,l)):this.face===Ei.BACK?(s=Math.acos(-h),r=ku(s,m,-d,l)):this.face===Ei.LEFT?(s=Math.acos(-d),r=ku(s,m,h,l)):(s=r=0,l.value=li.AREA_0)}return a=Math.atan(12/Ai*(r+Math.acos(Math.sin(r)*Math.cos(ai))-At)),o=Math.sqrt((1-Math.cos(s))/(Math.cos(a)*Math.cos(a))/(1-Math.cos(Math.atan(1/Math.cos(r))))),l.value===li.AREA_1?a+=At:l.value===li.AREA_2?a+=Ai:l.value===li.AREA_3&&(a+=1.5*Ai),e.x=o*Math.cos(a),e.y=o*Math.sin(a),e.x=e.x*this.a+this.x0,e.y=e.y*this.a+this.y0,n.x=e.x,n.y=e.y,n}function ey(n){var e={lam:0,phi:0},t,i,r,s,o,a,l,h,d,m={value:0};if(n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a,i=Math.atan(Math.sqrt(n.x*n.x+n.y*n.y)),t=Math.atan2(n.y,n.x),n.x>=0&&n.x>=Math.abs(n.y)?m.value=li.AREA_0:n.y>=0&&n.y>=Math.abs(n.x)?(m.value=li.AREA_1,t-=At):n.x<0&&-n.x>=Math.abs(n.y)?(m.value=li.AREA_2,t=t<0?t+Ai:t-Ai):(m.value=li.AREA_3,t+=At),d=Ai/12*Math.tan(t),o=Math.sin(d)/(Math.cos(d)-1/Math.sqrt(2)),a=Math.atan(o),r=Math.cos(t),s=Math.tan(i),l=1-r*r*s*s*(1-Math.cos(Math.atan(1/Math.cos(a)))),l<-1?l=-1:l>1&&(l=1),this.face===Ei.TOP)h=Math.acos(l),e.phi=At-h,m.value===li.AREA_0?e.lam=a+At:m.value===li.AREA_1?e.lam=a<0?a+Ai:a-Ai:m.value===li.AREA_2?e.lam=a-At:e.lam=a;else if(this.face===Ei.BOTTOM)h=Math.acos(l),e.phi=h-At,m.value===li.AREA_0?e.lam=-a+At:m.value===li.AREA_1?e.lam=-a:m.value===li.AREA_2?e.lam=-a-At:e.lam=a<0?-a-Ai:-a+Ai;else{var v,k,w;v=l,d=v*v,d>=1?w=0:w=Math.sqrt(1-d)*Math.sin(a),d+=w*w,d>=1?k=0:k=Math.sqrt(1-d),m.value===li.AREA_1?(d=k,k=-w,w=d):m.value===li.AREA_2?(k=-k,w=-w):m.value===li.AREA_3&&(d=k,k=w,w=-d),this.face===Ei.RIGHT?(d=v,v=-k,k=d):this.face===Ei.BACK?(v=-v,k=-k):this.face===Ei.LEFT&&(d=v,v=k,k=-d),e.phi=Math.acos(-w)-At,e.lam=Math.atan2(k,v),this.face===Ei.RIGHT?e.lam=Ia(e.lam,-At):this.face===Ei.BACK?e.lam=Ia(e.lam,-Ai):this.face===Ei.LEFT&&(e.lam=Ia(e.lam,+At))}if(this.es!==0){var E,I,M;E=e.phi<0?1:0,I=Math.tan(e.phi),M=this.b/Math.sqrt(I*I+this.one_minus_f_squared),e.phi=Math.atan(Math.sqrt(this.a*this.a-M*M)/(this.one_minus_f*M)),E&&(e.phi=-e.phi)}return e.lam+=this.long0,n.x=e.lam,n.y=e.phi,n}function ku(n,e,t,i){var r;return n<Yt?(i.value=li.AREA_0,r=0):(r=Math.atan2(e,t),Math.abs(r)<=ai?i.value=li.AREA_0:r>ai&&r<=At+ai?(i.value=li.AREA_1,r-=At):r>At+ai||r<=-(At+ai)?(i.value=li.AREA_2,r=r>=0?r-Ai:r+Ai):(i.value=li.AREA_3,r+=At)),r}function Ia(n,e){var t=n+e;return t<-Ai?t+=zl:t>+Ai&&(t-=zl),t}var ty=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const ny={init:J9,forward:Q9,inverse:ey,names:ty};var af=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],kl=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],Uv=.8487,qv=1.3523,Zv=Ps/5,iy=1/Zv,ya=18,Tc=function(n,e){return n[0]+e*(n[1]+e*(n[2]+e*n[3]))},ry=function(n,e){return n[1]+e*(2*n[2]+e*3*n[3])};function sy(n,e,t,i){for(var r=e;i;--i){var s=n(r);if(r-=s,Math.abs(s)<t)break}return r}function oy(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function ay(n){var e=Kt(n.x-this.long0),t=Math.abs(n.y),i=Math.floor(t*Zv);i<0?i=0:i>=ya&&(i=ya-1),t=Ps*(t-iy*i);var r={x:Tc(af[i],t)*e,y:Tc(kl[i],t)};return n.y<0&&(r.y=-r.y),r.x=r.x*this.a*Uv+this.x0,r.y=r.y*this.a*qv+this.y0,r}function ly(n){var e={x:(n.x-this.x0)/(this.a*Uv),y:Math.abs(n.y-this.y0)/(this.a*qv)};if(e.y>=1)e.x/=af[ya][0],e.y=n.y<0?-At:At;else{var t=Math.floor(e.y*ya);for(t<0?t=0:t>=ya&&(t=ya-1);;)if(kl[t][0]>e.y)--t;else if(kl[t+1][0]<=e.y)++t;else break;var i=kl[t],r=5*(e.y-i[0])/(kl[t+1][0]-i[0]);r=sy(function(s){return(Tc(i,s)-e.y)/ry(i,s)},r,Yt,100),e.x/=Tc(af[t],r),e.y=(5*t+r)*Xi,n.y<0&&(e.y=-e.y)}return e.x=Kt(e.x+this.long0),e}var uy=["Robinson","robin"];const cy={init:oy,forward:ay,inverse:ly,names:uy};function hy(){this.name="geocent"}function fy(n){var e=Av(n,this.es,this.a);return e}function dy(n){var e=Rv(n,this.es,this.a,this.b);return e}var gy=["Geocentric","geocentric","geocent","Geocent"];const my={init:hy,forward:fy,inverse:dy,names:gy};var ir={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},ll={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function _y(){if(Object.keys(ll).forEach((function(t){if(typeof this[t]>"u")this[t]=ll[t].def;else{if(ll[t].num&&isNaN(this[t]))throw new Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);ll[t].num&&(this[t]=parseFloat(this[t]))}ll[t].degrees&&(this[t]=this[t]*Xi)}).bind(this)),Math.abs(Math.abs(this.lat0)-At)<Yt?this.mode=this.lat0<0?ir.S_POLE:ir.N_POLE:Math.abs(this.lat0)<Yt?this.mode=ir.EQUIT:(this.mode=ir.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var n=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(n),this.sw=Math.sin(n)}function py(n){n.x-=this.long0;var e=Math.sin(n.y),t=Math.cos(n.y),i=Math.cos(n.x),r,s;switch(this.mode){case ir.OBLIQ:s=this.sinph0*e+this.cosph0*t*i;break;case ir.EQUIT:s=t*i;break;case ir.S_POLE:s=-e;break;case ir.N_POLE:s=e;break}switch(s=this.pn1/(this.p-s),r=s*t*Math.sin(n.x),this.mode){case ir.OBLIQ:s*=this.cosph0*e-this.sinph0*t*i;break;case ir.EQUIT:s*=e;break;case ir.N_POLE:s*=-(t*i);break;case ir.S_POLE:s*=t*i;break}var o,a;return o=s*this.cg+r*this.sg,a=1/(o*this.sw*this.h1+this.cw),r=(r*this.cg-s*this.sg)*this.cw*a,s=o*a,n.x=r*this.a,n.y=s*this.a,n}function vy(n){n.x/=this.a,n.y/=this.a;var e={x:n.x,y:n.y},t,i,r;r=1/(this.pn1-n.y*this.sw),t=this.pn1*n.x*r,i=this.pn1*n.y*this.cw*r,n.x=t*this.cg+i*this.sg,n.y=i*this.cg-t*this.sg;var s=Rr(n.x,n.y);if(Math.abs(s)<Yt)e.x=0,e.y=n.y;else{var o,a;switch(a=1-s*s*this.pfact,a=(this.p-Math.sqrt(a))/(this.pn1/s+s/this.pn1),o=Math.sqrt(1-a*a),this.mode){case ir.OBLIQ:e.y=Math.asin(o*this.sinph0+n.y*a*this.cosph0/s),n.y=(o-this.sinph0*Math.sin(e.y))*s,n.x*=a*this.cosph0;break;case ir.EQUIT:e.y=Math.asin(n.y*a/s),n.y=o*s,n.x*=a;break;case ir.N_POLE:e.y=Math.asin(o),n.y=-n.y;break;case ir.S_POLE:e.y=-Math.asin(o);break}e.x=Math.atan2(n.x,n.y)}return n.x=e.x+this.long0,n.y=e.y,n}var yy=["Tilted_Perspective","tpers"];const by={init:_y,forward:py,inverse:vy,names:yy};function wy(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var n=1-this.es,e=1/n;this.radius_p=Math.sqrt(n),this.radius_p2=n,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function ky(n){var e=n.x,t=n.y,i,r,s,o;if(e=e-this.long0,this.shape==="ellipse"){t=Math.atan(this.radius_p2*Math.tan(t));var a=this.radius_p/Rr(this.radius_p*Math.cos(t),Math.sin(t));if(r=a*Math.cos(e)*Math.cos(t),s=a*Math.sin(e)*Math.cos(t),o=a*Math.sin(t),(this.radius_g-r)*r-s*s-o*o*this.radius_p_inv2<0)return n.x=Number.NaN,n.y=Number.NaN,n;i=this.radius_g-r,this.flip_axis?(n.x=this.radius_g_1*Math.atan(s/Rr(o,i)),n.y=this.radius_g_1*Math.atan(o/i)):(n.x=this.radius_g_1*Math.atan(s/i),n.y=this.radius_g_1*Math.atan(o/Rr(s,i)))}else this.shape==="sphere"&&(i=Math.cos(t),r=Math.cos(e)*i,s=Math.sin(e)*i,o=Math.sin(t),i=this.radius_g-r,this.flip_axis?(n.x=this.radius_g_1*Math.atan(s/Rr(o,i)),n.y=this.radius_g_1*Math.atan(o/i)):(n.x=this.radius_g_1*Math.atan(s/i),n.y=this.radius_g_1*Math.atan(o/Rr(s,i))));return n.x=n.x*this.a,n.y=n.y*this.a,n}function Ey(n){var e=-1,t=0,i=0,r,s,o,a;if(n.x=n.x/this.a,n.y=n.y/this.a,this.shape==="ellipse"){this.flip_axis?(i=Math.tan(n.y/this.radius_g_1),t=Math.tan(n.x/this.radius_g_1)*Rr(1,i)):(t=Math.tan(n.x/this.radius_g_1),i=Math.tan(n.y/this.radius_g_1)*Rr(1,t));var l=i/this.radius_p;if(r=t*t+l*l+e*e,s=2*this.radius_g*e,o=s*s-4*r*this.C,o<0)return n.x=Number.NaN,n.y=Number.NaN,n;a=(-s-Math.sqrt(o))/(2*r),e=this.radius_g+a*e,t*=a,i*=a,n.x=Math.atan2(t,e),n.y=Math.atan(i*Math.cos(n.x)/e),n.y=Math.atan(this.radius_p_inv2*Math.tan(n.y))}else if(this.shape==="sphere"){if(this.flip_axis?(i=Math.tan(n.y/this.radius_g_1),t=Math.tan(n.x/this.radius_g_1)*Math.sqrt(1+i*i)):(t=Math.tan(n.x/this.radius_g_1),i=Math.tan(n.y/this.radius_g_1)*Math.sqrt(1+t*t)),r=t*t+i*i+e*e,s=2*this.radius_g*e,o=s*s-4*r*this.C,o<0)return n.x=Number.NaN,n.y=Number.NaN,n;a=(-s-Math.sqrt(o))/(2*r),e=this.radius_g+a*e,t*=a,i*=a,n.x=Math.atan2(t,e),n.y=Math.atan(i*Math.cos(n.x)/e)}return n.x=n.x+this.long0,n}var Sy=["Geostationary Satellite View","Geostationary_Satellite","geos"];const Iy={init:wy,forward:ky,inverse:Ey,names:Sy};var Dl=1.340264,Al=-.081106,Rl=893e-6,Ol=.003796,Lc=Math.sqrt(3)/2;function My(){this.es=0,this.long0=this.long0!==void 0?this.long0:0}function Ty(n){var e=Kt(n.x-this.long0),t=n.y,i=Math.asin(Lc*Math.sin(t)),r=i*i,s=r*r*r;return n.x=e*Math.cos(i)/(Lc*(Dl+3*Al*r+s*(7*Rl+9*Ol*r))),n.y=i*(Dl+Al*r+s*(Rl+Ol*r)),n.x=this.a*n.x+this.x0,n.y=this.a*n.y+this.y0,n}function Ly(n){n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a;var e=1e-9,t=12,i=n.y,r,s,o,a,l,h;for(h=0;h<t&&(r=i*i,s=r*r*r,o=i*(Dl+Al*r+s*(Rl+Ol*r))-n.y,a=Dl+3*Al*r+s*(7*Rl+9*Ol*r),i-=l=o/a,!(Math.abs(l)<e));++h);return r=i*i,s=r*r*r,n.x=Lc*n.x*(Dl+3*Al*r+s*(7*Rl+9*Ol*r))/Math.cos(i),n.y=Math.asin(Math.sin(i)/Lc),n.x=Kt(n.x+this.long0),n}var Cy=["eqearth","Equal Earth","Equal_Earth"];const Py={init:My,forward:Ty,inverse:Ly,names:Cy};var Ul=1e-10;function Ny(){var n;if(this.phi1=this.lat1,Math.abs(this.phi1)<Ul)throw new Error;this.es?(this.en=qf(this.es),this.m1=Za(this.phi1,this.am1=Math.sin(this.phi1),n=Math.cos(this.phi1),this.en),this.am1=n/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=Ay,this.forward=Dy):(Math.abs(this.phi1)+Ul>=At?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=Oy,this.forward=Ry)}function Dy(n){var e=Kt(n.x-(this.long0||0)),t=n.y,i,r,s;return i=this.am1+this.m1-Za(t,r=Math.sin(t),s=Math.cos(t),this.en),r=s*e/(i*Math.sqrt(1-this.es*r*r)),n.x=i*Math.sin(r),n.y=this.am1-i*Math.cos(r),n.x=this.a*n.x+(this.x0||0),n.y=this.a*n.y+(this.y0||0),n}function Ay(n){n.x=(n.x-(this.x0||0))/this.a,n.y=(n.y-(this.y0||0))/this.a;var e,t,i,r;if(t=Rr(n.x,n.y=this.am1-n.y),r=Zf(this.am1+this.m1-t,this.es,this.en),(e=Math.abs(r))<At)e=Math.sin(r),i=t*Math.atan2(n.x,n.y)*Math.sqrt(1-this.es*e*e)/Math.cos(r);else if(Math.abs(e-At)<=Ul)i=0;else throw new Error;return n.x=Kt(i+(this.long0||0)),n.y=Po(r),n}function Ry(n){var e=Kt(n.x-(this.long0||0)),t=n.y,i,r;return r=this.cphi1+this.phi1-t,Math.abs(r)>Ul?(n.x=r*Math.sin(i=e*Math.cos(t)/r),n.y=this.cphi1-r*Math.cos(i)):n.x=n.y=0,n.x=this.a*n.x+(this.x0||0),n.y=this.a*n.y+(this.y0||0),n}function Oy(n){n.x=(n.x-(this.x0||0))/this.a,n.y=(n.y-(this.y0||0))/this.a;var e,t,i=Rr(n.x,n.y=this.cphi1-n.y);if(t=this.cphi1+this.phi1-i,Math.abs(t)>At)throw new Error;return Math.abs(Math.abs(t)-At)<=Ul?e=0:e=i*Math.atan2(n.x,n.y)/Math.cos(t),n.x=Kt(e+(this.long0||0)),n.y=Po(t),n}var xy=["bonne","Bonne (Werner lat_1=90)"];const Fy={init:Ny,names:xy};function By(n){n.Proj.projections.add(oc),n.Proj.projections.add(ac),n.Proj.projections.add(D6),n.Proj.projections.add(G6),n.Proj.projections.add(j6),n.Proj.projections.add(Q6),n.Proj.projections.add(s8),n.Proj.projections.add(c8),n.Proj.projections.add(m8),n.Proj.projections.add(b8),n.Proj.projections.add(F8),n.Proj.projections.add(H8),n.Proj.projections.add(j8),n.Proj.projections.add(e9),n.Proj.projections.add(s9),n.Proj.projections.add(c9),n.Proj.projections.add(m9),n.Proj.projections.add(b9),n.Proj.projections.add(M9),n.Proj.projections.add(N9),n.Proj.projections.add(x9),n.Proj.projections.add(z9),n.Proj.projections.add(Z9),n.Proj.projections.add(K9),n.Proj.projections.add(ny),n.Proj.projections.add(cy),n.Proj.projections.add(my),n.Proj.projections.add(by),n.Proj.projections.add(Iy),n.Proj.projections.add(Py),n.Proj.projections.add(Fy)}Ur.defaultDatum="WGS84";Ur.Proj=As;Ur.WGS84=new Ur.Proj("WGS84");Ur.Point=Oa;Ur.toPoint=Ov;Ur.defs=pr;Ur.nadgrid=R5;Ur.transform=Ic;Ur.mgrs=X5;Ur.version="__VERSION__";By(Ur);const $y=Object.freeze(Object.defineProperty({__proto__:null,default:Ur},Symbol.toStringTag,{value:"Module"}));var Vy={exports:{}};const zy=zf($y);(function(n){(function(e){var t,i;t=yi,i=zy,n.exports=e(t,i)})(function(e,t){return t.__esModule&&t.default&&(t=t.default),e.Proj={},e.Proj._isProj4Obj=function(i){return typeof i.inverse<"u"&&typeof i.forward<"u"},e.Proj.Projection=e.Class.extend({initialize:function(i,r,s){var o=e.Proj._isProj4Obj(i);this._proj=o?i:this._projFromCodeDef(i,r),this.bounds=o?r:s},project:function(i){var r=this._proj.forward([i.lng,i.lat]);return new e.Point(r[0],r[1])},unproject:function(i,r){var s=this._proj.inverse([i.x,i.y]);return new e.LatLng(s[1],s[0],r)},_projFromCodeDef:function(i,r){if(r)t.defs(i,r);else if(t.defs[i]===void 0){var s=i.split(":");if(s.length>3&&(i=s[s.length-3]+":"+s[s.length-1]),t.defs[i]===void 0)throw"No projection definition for code "+i}return t(i)}}),e.Proj.CRS=e.Class.extend({includes:e.CRS,options:{transformation:new e.Transformation(1,0,-1,0)},initialize:function(i,r,s){var o,a,l,h;if(e.Proj._isProj4Obj(i)?(a=i,o=a.srsCode,h=r||{},this.projection=new e.Proj.Projection(a,h.bounds)):(o=i,l=r,h=s||{},this.projection=new e.Proj.Projection(o,l,h.bounds)),e.Util.setOptions(this,h),this.code=o,this.transformation=this.options.transformation,this.options.origin&&(this.transformation=new e.Transformation(1,-this.options.origin[0],-1,this.options.origin[1])),this.options.scales)this._scales=this.options.scales;else if(this.options.resolutions){this._scales=[];for(var d=this.options.resolutions.length-1;d>=0;d--)this.options.resolutions[d]&&(this._scales[d]=1/this.options.resolutions[d])}this.infinite=!this.options.bounds},scale:function(i){var r=Math.floor(i),s,o,a,l;return i===r?this._scales[i]:(s=this._scales[r],o=this._scales[r+1],a=o-s,l=i-r,s+a*l)},zoom:function(i){var r=this._closestElement(this._scales,i),s=this._scales.indexOf(r),o,a,l;return i===r?s:r===void 0?-1/0:(a=s+1,o=this._scales[a],o===void 0?1/0:(l=o-r,(i-r)/l+s))},distance:e.CRS.Earth.distance,R:e.CRS.Earth.R,_closestElement:function(i,r){for(var s,o=i.length;o--;)i[o]<=r&&(s===void 0||s<i[o])&&(s=i[o]);return s}}),e.Proj.GeoJSON=e.GeoJSON.extend({initialize:function(i,r){this._callLevel=0,e.GeoJSON.prototype.initialize.call(this,i,r)},addData:function(i){var r;i&&(i.crs&&i.crs.type==="name"?r=new e.Proj.CRS(i.crs.properties.name):i.crs&&i.crs.type&&(r=new e.Proj.CRS(i.crs.type+":"+i.crs.properties.code)),r!==void 0&&(this.options.coordsToLatLng=function(s){var o=e.point(s[0],s[1]);return r.projection.unproject(o)})),this._callLevel++;try{e.GeoJSON.prototype.addData.call(this,i)}finally{this._callLevel--,this._callLevel===0&&delete this.options.coordsToLatLng}}}),e.Proj.geoJson=function(i,r){return new e.Proj.GeoJSON(i,r)},e.Proj.ImageOverlay=e.ImageOverlay.extend({initialize:function(i,r,s){e.ImageOverlay.prototype.initialize.call(this,i,null,s),this._projectedBounds=r},_animateZoom:function(i){var r=this._map.getZoomScale(i.zoom),s=e.point(this._projectedBounds.min.x,this._projectedBounds.max.y),o=this._projectedToNewLayerPoint(s,i.zoom,i.center);e.DomUtil.setTransform(this._image,o,r)},_reset:function(){var i=this._map.getZoom(),r=this._map.getPixelOrigin(),s=e.bounds(this._transform(this._projectedBounds.min,i)._subtract(r),this._transform(this._projectedBounds.max,i)._subtract(r)),o=s.getSize();e.DomUtil.setPosition(this._image,s.min),this._image.style.width=o.x+"px",this._image.style.height=o.y+"px"},_projectedToNewLayerPoint:function(i,r,s){var o=this._map.getSize()._divideBy(2),a=this._map.project(s,r)._subtract(o)._round(),l=a.add(this._map._getMapPanePos());return this._transform(i,r)._subtract(l)},_transform:function(i,r){var s=this._map.options.crs,o=s.transformation,a=s.scale(r);return o.transform(i,a)}}),e.Proj.imageOverlay=function(i,r,s){return new e.Proj.ImageOverlay(i,r,s)},e.Proj})})(Vy);class rs{constructor(e,t){Ge(this,"state");Ge(this,"subscribers",new Set);Ge(this,"customUnmounter",null);this.state=e,this.customUnmounter=t||null}set(e){this.state&&(typeof this.state.onUnmount=="function"?this.state.onUnmount():this.customUnmounter&&this.customUnmounter(this.state)),this.state=e,this.subscribers.forEach(t=>t(this.state))}get current(){return this.state}subscribe(e){return this.subscribers.add(e),e(this.state),()=>{this.subscribers.delete(e)}}update(e){this.set(e(this.state))}}function Cc(n,e){return n.addEventListener(e.on,t=>e.cb(t.detail)),{destroy:()=>n.removeEventListener(e.on,e.cb)}}class Gy{constructor(){Ge(this,"__uiStateStore",new Ot(null));Ge(this,"__lastState",null);this.subscribe(e=>{console.info("UI state:",e)})}set(e){this.__lastState=this.__uiStateStore.current,this.__uiStateStore.set(e)}update(e){this.__lastState=this.__uiStateStore.current,this.__uiStateStore.update(e)}subscribe(e){return this.__uiStateStore.subscribe(e)}get current(){return this.__uiStateStore.current}debug(e){return this.__uiStateStore.debug(e)}goto(e){nn.set(e)}close(){nn.set(null)}back(){nn.set(nn.__lastState),nn.__lastState=null}}let nn=new Gy;var Tt=(n=>(n.AircraftView="AircraftView",n.Sensors="Sensors",n.SensorView="SensorView",n.SensorRelocating="SensorRelocating",n.Geofences="Geofences",n.CreateGeofence="CreateGeofence",n.EditGeofence="EditGeofence",n.ContinueCreateGeofence="ContinueCreateGeofence",n.GeofenceView="GeofenceView",n.DroneList="DroneList",n.Recordings="Recordings",n.KnownDrones="Whitelist",n.AirZones="AirZones",n.Account="Account",n.History="History",n.RectangleHistory="RectangleHistory",n))(Tt||{}),Ki=(n=>(n.Details="details",n.Permissions="permissions",n.Roles="roles",n.PasswordChange="passwordChange",n))(Ki||{});class To{constructor(e,t={}){Ge(this,"ttlSecs",null);Ge(this,"retryPeriodSecs",1);Ge(this,"keepAliveWithZeroSubscribers",!1);Ge(this,"loadingPromiseStore",Pn(void 0));Ge(this,"errorStore",new Ot(!1));Ge(this,"state");Ge(this,"fetcher");Ge(this,"subscribers",new Set);Ge(this,"onNewValuesSubscribers",new Set);Ge(this,"__expirationTimeout",null);Ge(this,"__refetchTimeout",null);Ge(this,"__currentPromise",null);Ge(this,"__firstFetched",!1);Ge(this,"__nthSubscriber",0);this.fetcher=e,t.ttlSecs&&(this.ttlSecs=t.ttlSecs),t.retryPeriodSecs&&(this.retryPeriodSecs=t.retryPeriodSecs),t.keepAliveWithZeroSubscribers&&(this.keepAliveWithZeroSubscribers=t.keepAliveWithZeroSubscribers),t.loadInitially&&this.__tryFetch(!0)}__startTtlCounter(e=!1){this.ttlSecs&&(e&&this.__expirationTimeout||(this.__expirationTimeout&&(clearTimeout(this.__expirationTimeout),this.__expirationTimeout=null),this.__expirationTimeout=setTimeout(()=>{if(this.__expirationTimeout=null,this.subscribers.size===0&&!this.keepAliveWithZeroSubscribers){this.state=void 0,clearTimeout(this.__expirationTimeout),this.__expirationTimeout=null;return}this.__tryFetch()},this.ttlSecs*1e3)))}__newValue(e){this.state=e,this.__firstFetched=!0,this.__startTtlCounter(),this.subscribers.forEach(t=>t(e)),this.onNewValuesSubscribers.forEach(t=>t(e))}__tryFetch(e=!1){if(this.__currentPromise||!e&&this.subscribers.size===0&&!this.keepAliveWithZeroSubscribers&&this.onNewValuesSubscribers.size===0)return;this.__refetchTimeout&&(clearTimeout(this.__refetchTimeout),this.__refetchTimeout=null);const t=this.fetcher(this);this.__currentPromise=t,this.loadingPromiseStore.set(t),t.then(i=>{this.__currentPromise!==t&&this.__firstFetched||(this.__newValue(i),this.errorStore.set(!1))}).catch(i=>{this.__currentPromise===t&&(this.errorStore.set(!0),console.warn("Failed to fetch data (retrying soon):",i),this.__refetchTimeout=setTimeout(()=>{this.__tryFetch()},this.retryPeriodSecs*1e3))}).finally(()=>{this.__currentPromise===t&&(this.__currentPromise=null,this.loadingPromiseStore.set(void 0))})}get current(){return this.state}invalidate(){this.__tryFetch(!0)}onNewValues(e){return this.onNewValuesSubscribers.add(e),this.state!==void 0&&e(this.state),this.__firstFetched||this.__tryFetch(),()=>{this.onNewValuesSubscribers.delete(e)}}set(e){this.__newValue(e)}subscribe(e){return this.__nthSubscriber++,this.__nthSubscriber,this.subscribers.add(e),e(this.state),this.state===void 0&&this.__tryFetch(),this.__startTtlCounter(!0),()=>{this.subscribers.delete(e)}}update(e){this.set(e(this.state))}}const ed={NO_RESTRICTION:0,REQ_AUTHORISATION:1,PROHIBITED:2};class Yv{constructor(e){Ge(this,"feature");this.feature=e}get restriction(){var t,i,r,s,o,a;let e=((i=(t=this.feature)==null?void 0:t.properties)==null?void 0:i.restriction)||"NO_RESTRICTION";return((s=(r=this.feature)==null?void 0:r.properties)==null?void 0:s.reason)=="Sensitive"?e="PROHIBITED":((a=(o=this.feature)==null?void 0:o.properties)==null?void 0:a.reason)!=="Other"&&(e="REQ_AUTHORISATION"),e}get restrictionLevel(){return ed[this.restriction]||ed.NO_RESTRICTION}get reason(){var t,i;const e=((i=(t=this.feature)==null?void 0:t.properties)==null?void 0:i.reason)||null;return e==="Other"?null:e}get lower(){var e,t;return((t=(e=this.feature)==null?void 0:e.properties)==null?void 0:t.lower)||"AGL"}get upper(){var e,t;return((t=(e=this.feature)==null?void 0:e.properties)==null?void 0:t.upper)||null}get name(){var e,t;return((t=(e=this.feature)==null?void 0:e.properties)==null?void 0:t.name)||null}get identifier(){var e,t;return((t=(e=this.feature)==null?void 0:e.properties)==null?void 0:t.identifier)||null}getLocalisedMessage(e){var i,r,s,o,a,l,h,d;if(!e)return((r=(i=this.feature)==null?void 0:i.properties)==null?void 0:r.message)||null;const t=(l=(a=(o=(s=this.feature)==null?void 0:s.properties)==null?void 0:o.extendedProperties)==null?void 0:a.localizedMessages)==null?void 0:l.find(m=>m.language.startsWith(e+"-"));return(t==null?void 0:t.message)||((d=(h=this.feature)==null?void 0:h.properties)==null?void 0:d.message)||null}}const Hy=["EERZout","EYVLOUT"],lc=new To(qy,{ttlSecs:60*60,keepAliveWithZeroSubscribers:!0,loadInitially:!0,retryPeriodSecs:10});function Uy(n){console.log("AirZones: Merging incoming air zones GeoJSON data");const i={type:"FeatureCollection",features:[...n.features||[]].filter(s=>s.properties&&s.properties.identifier?!Hy.includes(s.properties.identifier):!0)};let r;return lc.update(s=>{if(s)return s.addData(i),r=s,s;const o=Ct.geoJson(i,{style:{fillOpacity:0,color:"#0004",weight:2,opacity:.8,className:"interactive-no-pointer"},onEachFeature:(a,l)=>{l.__preCalculateBounds=l.getBounds(),l.__asAirZone=new Yv(a),l.__asAirZone.restriction==="PROHIBITED"?l.setStyle({color:"#d44"}):l.__asAirZone.restriction==="REQ_AUTHORISATION"&&l.setStyle({color:"#88d"})}});return r=o,o}),r}function qy(n){const e=["https://utm.eans.ee/avm/utm/uas.geojson","https://utm.ans.lt/avm/utm/uas.geojson"];return n.set(null),Promise.any(e.map(t=>fetch(t).then(i=>i.json()).then(i=>Uy(i))))}var _r=63710088e-1,jv={centimeters:_r*100,centimetres:_r*100,degrees:360/(2*Math.PI),feet:_r*3.28084,inches:_r*39.37,kilometers:_r/1e3,kilometres:_r/1e3,meters:_r,metres:_r,miles:_r/1609.344,millimeters:_r*1e3,millimetres:_r*1e3,nauticalmiles:_r/1852,radians:1,yards:_r*1.0936};function jo(n,e,t={}){const i={type:"Feature"};return(t.id===0||t.id)&&(i.id=t.id),t.bbox&&(i.bbox=t.bbox),i.properties=e||{},i.geometry=n,i}function Qn(n,e,t={}){if(!n)throw new Error("coordinates is required");if(!Array.isArray(n))throw new Error("coordinates must be an Array");if(n.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!nd(n[0])||!nd(n[1]))throw new Error("coordinates must contain numbers");return jo({type:"Point",coordinates:n},e,t)}function No(n,e,t={}){for(const r of n){if(r.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(r[r.length-1].length!==r[0].length)throw new Error("First and last Position are not equivalent.");for(let s=0;s<r[r.length-1].length;s++)if(r[r.length-1][s]!==r[0][s])throw new Error("First and last Position are not equivalent.")}return jo({type:"Polygon",coordinates:n},e,t)}function lf(n,e,t={}){if(n.length<2)throw new Error("coordinates must be an array of two or more positions");return jo({type:"LineString",coordinates:n},e,t)}function uf(n,e={}){const t={type:"FeatureCollection"};return e.id&&(t.id=e.id),e.bbox&&(t.bbox=e.bbox),t.features=n,t}function Xf(n,e="kilometers"){const t=jv[e];if(!t)throw new Error(e+" units is invalid");return n*t}function Kf(n,e="kilometers"){const t=jv[e];if(!t)throw new Error(e+" units is invalid");return n/t}function td(n){let e=n%360;return e<0&&(e+=360),e}function Fa(n){return n%(2*Math.PI)*180/Math.PI}function qi(n){return n%360*Math.PI/180}function Zy(n,e="kilometers",t="kilometers"){if(!(n>=0))throw new Error("length must be a positive number");return Xf(Kf(n,e),t)}function nd(n){return!isNaN(n)&&n!==null&&!Array.isArray(n)}function Wv(n){return n!==null&&typeof n=="object"&&!Array.isArray(n)}function sr(n){if(!n)throw new Error("coord is required");if(!Array.isArray(n)){if(n.type==="Feature"&&n.geometry!==null&&n.geometry.type==="Point")return[...n.geometry.coordinates];if(n.type==="Point")return[...n.coordinates]}if(Array.isArray(n)&&n.length>=2&&!Array.isArray(n[0])&&!Array.isArray(n[1]))return[...n];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Ma(n){if(Array.isArray(n))return n;if(n.type==="Feature"){if(n.geometry!==null)return n.geometry.coordinates}else if(n.coordinates)return n.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function Pc(n){return n.type==="Feature"?n.geometry:n}function Xv(n,e){return n.type==="FeatureCollection"?"FeatureCollection":n.type==="GeometryCollection"?"GeometryCollection":n.type==="Feature"&&n.geometry!==null?n.geometry.type:n.type}function Wo(n,e,t={}){if(t.final===!0)return Yy(n,e);const i=sr(n),r=sr(e),s=qi(i[0]),o=qi(r[0]),a=qi(i[1]),l=qi(r[1]),h=Math.sin(o-s)*Math.cos(l),d=Math.cos(a)*Math.sin(l)-Math.sin(a)*Math.cos(l)*Math.cos(o-s);return Fa(Math.atan2(h,d))}function Yy(n,e){let t=Wo(e,n);return t=(t+180)%360,t}function ql(n,e,t,i={}){const r=sr(n),s=qi(r[0]),o=qi(r[1]),a=qi(t),l=Kf(e,i.units),h=Math.asin(Math.sin(o)*Math.cos(l)+Math.cos(o)*Math.sin(l)*Math.cos(a)),d=s+Math.atan2(Math.sin(a)*Math.sin(l)*Math.cos(o),Math.cos(l)-Math.sin(o)*Math.sin(h)),m=Fa(d),v=Fa(h);return Qn([m,v],i.properties)}function rr(n,e,t={}){var i=sr(n),r=sr(e),s=qi(r[1]-i[1]),o=qi(r[0]-i[0]),a=qi(i[1]),l=qi(r[1]),h=Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(o/2),2)*Math.cos(a)*Math.cos(l);return Xf(2*Math.atan2(Math.sqrt(h),Math.sqrt(1-h)),t.units)}var jy=rr;function Eu(n,e,t={}){const r=Pc(n).coordinates;let s=0;for(let o=0;o<r.length&&!(e>=s&&o===r.length-1);o++)if(s>=e){const a=e-s;if(a){const l=Wo(r[o],r[o-1])-180;return ql(r[o],a,l,t)}else return Qn(r[o])}else s+=rr(r[o],r[o+1],t);return Qn(r[r.length-1])}function id(n,e,t={}){let i;return t.final?i=rd(sr(e),sr(n)):i=rd(sr(n),sr(e)),i>180?-(360-i):i}function rd(n,e){const t=qi(n[1]),i=qi(e[1]);let r=qi(e[0]-n[0]);r>Math.PI&&(r-=2*Math.PI),r<-Math.PI&&(r+=2*Math.PI);const s=Math.log(Math.tan(i/2+Math.PI/4)/Math.tan(t/2+Math.PI/4)),o=Math.atan2(r,s);return(Fa(o)+360)%360}function Wy(n,e,t,i={}){if(!Wv(i))throw new Error("options is invalid");if(!n)throw new Error("startPoint is required");if(!e)throw new Error("midPoint is required");if(!t)throw new Error("endPoint is required");const r=n,s=e,o=t,a=td(i.mercator!==!0?Wo(s,r):id(s,r));let l=td(i.mercator!==!0?Wo(s,o):id(s,o));l<a&&(l=l+360);const h=l-a;return i.explementary===!0?360-h:h}function Ko(n,e,t){if(n!==null)for(var i,r,s,o,a,l,h,d=0,m=0,v,k=n.type,w=k==="FeatureCollection",E=k==="Feature",I=w?n.features.length:1,M=0;M<I;M++){h=w?n.features[M].geometry:E?n.geometry:n,v=h?h.type==="GeometryCollection":!1,a=v?h.geometries.length:1;for(var C=0;C<a;C++){var D=0,O=0;if(o=v?h.geometries[C]:h,o!==null){l=o.coordinates;var P=o.type;switch(d=t&&(P==="Polygon"||P==="MultiPolygon")?1:0,P){case null:break;case"Point":if(e(l,m,M,D,O)===!1)return!1;m++,D++;break;case"LineString":case"MultiPoint":for(i=0;i<l.length;i++){if(e(l[i],m,M,D,O)===!1)return!1;m++,P==="MultiPoint"&&D++}P==="LineString"&&D++;break;case"Polygon":case"MultiLineString":for(i=0;i<l.length;i++){for(r=0;r<l[i].length-d;r++){if(e(l[i][r],m,M,D,O)===!1)return!1;m++}P==="MultiLineString"&&D++,P==="Polygon"&&O++}P==="Polygon"&&D++;break;case"MultiPolygon":for(i=0;i<l.length;i++){for(O=0,r=0;r<l[i].length;r++){for(s=0;s<l[i][r].length-d;s++){if(e(l[i][r][s],m,M,D,O)===!1)return!1;m++}O++}D++}break;case"GeometryCollection":for(i=0;i<o.geometries.length;i++)if(Ko(o.geometries[i],e,t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function sd(n,e){if(n.type==="Feature")e(n,0);else if(n.type==="FeatureCollection")for(var t=0;t<n.features.length&&e(n.features[t],t)!==!1;t++);}function Jf(n,e){var t,i,r,s,o,a,l,h,d,m,v=0,k=n.type==="FeatureCollection",w=n.type==="Feature",E=k?n.features.length:1;for(t=0;t<E;t++){for(a=k?n.features[t].geometry:w?n.geometry:n,h=k?n.features[t].properties:w?n.properties:{},d=k?n.features[t].bbox:w?n.bbox:void 0,m=k?n.features[t].id:w?n.id:void 0,l=a?a.type==="GeometryCollection":!1,o=l?a.geometries.length:1,r=0;r<o;r++){if(s=l?a.geometries[r]:a,s===null){if(e(null,v,h,d,m)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(s,v,h,d,m)===!1)return!1;break}case"GeometryCollection":{for(i=0;i<s.geometries.length;i++)if(e(s.geometries[i],v,h,d,m)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}v++}}function Kv(n,e){Jf(n,function(t,i,r,s,o){var a=t===null?null:t.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return e(jo(t,r,{bbox:s,id:o}),i,0)===!1?!1:void 0}var l;switch(a){case"MultiPoint":l="Point";break;case"MultiLineString":l="LineString";break;case"MultiPolygon":l="Polygon";break}for(var h=0;h<t.coordinates.length;h++){var d=t.coordinates[h],m={type:l,coordinates:d};if(e(jo(m,r),i,h)===!1)return!1}})}function Xy(n,e){Kv(n,function(t,i,r){var s=0;if(t.geometry){var o=t.geometry.type;if(!(o==="Point"||o==="MultiPoint")){var a,l=0,h=0,d=0;if(Ko(t,function(m,v,k,w,E){if(a===void 0||i>l||w>h||E>d){a=m,l=i,h=w,d=E,s=0;return}var I=lf([a,m],t.properties);if(e(I,i,r,E,s)===!1)return!1;s++,a=m})===!1)return!1}}})}function Ky(n,e,t){var i=t,r=!1;return Xy(n,function(s,o,a,l,h){r===!1&&t===void 0?i=s:i=e(i,s,o,a,l,h),r=!0}),i}function Jy(n,e={}){if(n.bbox!=null&&e.recompute!==!0)return n.bbox;const t=[1/0,1/0,-1/0,-1/0];return Ko(n,i=>{t[0]>i[0]&&(t[0]=i[0]),t[1]>i[1]&&(t[1]=i[1]),t[2]<i[0]&&(t[2]=i[0]),t[3]<i[1]&&(t[3]=i[1])}),t}const io=11102230246251565e-32,tr=134217729,Qy=(3+8*io)*io;function vh(n,e,t,i,r){let s,o,a,l,h=e[0],d=i[0],m=0,v=0;d>h==d>-h?(s=h,h=e[++m]):(s=d,d=i[++v]);let k=0;if(m<n&&v<t)for(d>h==d>-h?(o=h+s,a=s-(o-h),h=e[++m]):(o=d+s,a=s-(o-d),d=i[++v]),s=o,a!==0&&(r[k++]=a);m<n&&v<t;)d>h==d>-h?(o=s+h,l=o-s,a=s-(o-l)+(h-l),h=e[++m]):(o=s+d,l=o-s,a=s-(o-l)+(d-l),d=i[++v]),s=o,a!==0&&(r[k++]=a);for(;m<n;)o=s+h,l=o-s,a=s-(o-l)+(h-l),h=e[++m],s=o,a!==0&&(r[k++]=a);for(;v<t;)o=s+d,l=o-s,a=s-(o-l)+(d-l),d=i[++v],s=o,a!==0&&(r[k++]=a);return(s!==0||k===0)&&(r[k++]=s),k}function e7(n,e){let t=e[0];for(let i=1;i<n;i++)t+=e[i];return t}function au(n){return new Float64Array(n)}const t7=(3+16*io)*io,n7=(2+12*io)*io,i7=(9+64*io)*io*io,ca=au(4),od=au(8),ad=au(12),ld=au(16),dr=au(4);function r7(n,e,t,i,r,s,o){let a,l,h,d,m,v,k,w,E,I,M,C,D,O,P,F,V,$;const G=n-r,U=t-r,H=e-s,j=i-s;O=G*j,v=tr*G,k=v-(v-G),w=G-k,v=tr*j,E=v-(v-j),I=j-E,P=w*I-(O-k*E-w*E-k*I),F=H*U,v=tr*H,k=v-(v-H),w=H-k,v=tr*U,E=v-(v-U),I=U-E,V=w*I-(F-k*E-w*E-k*I),M=P-V,m=P-M,ca[0]=P-(M+m)+(m-V),C=O+M,m=C-O,D=O-(C-m)+(M-m),M=D-F,m=D-M,ca[1]=D-(M+m)+(m-F),$=C+M,m=$-C,ca[2]=C-($-m)+(M-m),ca[3]=$;let Q=e7(4,ca),W=n7*o;if(Q>=W||-Q>=W||(m=n-G,a=n-(G+m)+(m-r),m=t-U,h=t-(U+m)+(m-r),m=e-H,l=e-(H+m)+(m-s),m=i-j,d=i-(j+m)+(m-s),a===0&&l===0&&h===0&&d===0)||(W=i7*o+Qy*Math.abs(Q),Q+=G*d+j*a-(H*h+U*l),Q>=W||-Q>=W))return Q;O=a*j,v=tr*a,k=v-(v-a),w=a-k,v=tr*j,E=v-(v-j),I=j-E,P=w*I-(O-k*E-w*E-k*I),F=l*U,v=tr*l,k=v-(v-l),w=l-k,v=tr*U,E=v-(v-U),I=U-E,V=w*I-(F-k*E-w*E-k*I),M=P-V,m=P-M,dr[0]=P-(M+m)+(m-V),C=O+M,m=C-O,D=O-(C-m)+(M-m),M=D-F,m=D-M,dr[1]=D-(M+m)+(m-F),$=C+M,m=$-C,dr[2]=C-($-m)+(M-m),dr[3]=$;const Y=vh(4,ca,4,dr,od);O=G*d,v=tr*G,k=v-(v-G),w=G-k,v=tr*d,E=v-(v-d),I=d-E,P=w*I-(O-k*E-w*E-k*I),F=H*h,v=tr*H,k=v-(v-H),w=H-k,v=tr*h,E=v-(v-h),I=h-E,V=w*I-(F-k*E-w*E-k*I),M=P-V,m=P-M,dr[0]=P-(M+m)+(m-V),C=O+M,m=C-O,D=O-(C-m)+(M-m),M=D-F,m=D-M,dr[1]=D-(M+m)+(m-F),$=C+M,m=$-C,dr[2]=C-($-m)+(M-m),dr[3]=$;const q=vh(Y,od,4,dr,ad);O=a*d,v=tr*a,k=v-(v-a),w=a-k,v=tr*d,E=v-(v-d),I=d-E,P=w*I-(O-k*E-w*E-k*I),F=l*h,v=tr*l,k=v-(v-l),w=l-k,v=tr*h,E=v-(v-h),I=h-E,V=w*I-(F-k*E-w*E-k*I),M=P-V,m=P-M,dr[0]=P-(M+m)+(m-V),C=O+M,m=C-O,D=O-(C-m)+(M-m),M=D-F,m=D-M,dr[1]=D-(M+m)+(m-F),$=C+M,m=$-C,dr[2]=C-($-m)+(M-m),dr[3]=$;const ne=vh(q,ad,4,dr,ld);return ld[ne-1]}function s7(n,e,t,i,r,s){const o=(e-s)*(t-r),a=(n-r)*(i-s),l=o-a,h=Math.abs(o+a);return Math.abs(l)>=t7*h?l:-r7(n,e,t,i,r,s,h)}function o7(n,e){var t,i,r=0,s,o,a,l,h,d,m,v=n[0],k=n[1],w=e.length;for(t=0;t<w;t++){i=0;var E=e[t],I=E.length-1;if(d=E[0],d[0]!==E[I][0]&&d[1]!==E[I][1])throw new Error("First and last coordinates in a ring must be the same");for(o=d[0]-v,a=d[1]-k,i;i<I;i++){if(m=E[i+1],l=m[0]-v,h=m[1]-k,a===0&&h===0){if(l<=0&&o>=0||o<=0&&l>=0)return 0}else if(h>=0&&a<=0||h<=0&&a>=0){if(s=s7(o,l,a,h,0,0),s===0)return 0;(s>0&&h>0&&a<=0||s<0&&h<=0&&a>0)&&r++}d=m,a=h,o=l}}return r%2!==0}function Qf(n,e,t={}){if(!n)throw new Error("point is required");if(!e)throw new Error("polygon is required");const i=sr(n),r=Pc(e),s=r.type,o=e.bbox;let a=r.coordinates;if(o&&a7(i,o)===!1)return!1;s==="Polygon"&&(a=[a]);let l=!1;for(var h=0;h<a.length;++h){const d=o7(i,a[h]);if(d===0)return!t.ignoreBoundary;d&&(l=!0)}return l}function a7(n,e){return e[0]<=n[0]&&e[1]<=n[1]&&e[2]>=n[0]&&e[3]>=n[1]}var l7=Object.defineProperty,Ya=(n,e)=>l7(n,"name",{value:e,configurable:!0}),Jv=class{constructor(e){this.direction=!1,this.compareProperties=!0;var t,i,r;this.precision=10**-((t=e==null?void 0:e.precision)!=null?t:17),this.direction=(i=e==null?void 0:e.direction)!=null?i:!1,this.compareProperties=(r=e==null?void 0:e.compareProperties)!=null?r:!0}compare(e,t){if(e.type!==t.type||!El(e,t))return!1;switch(e.type){case"Point":return this.compareCoord(e.coordinates,t.coordinates);case"LineString":return this.compareLine(e.coordinates,t.coordinates);case"Polygon":return this.comparePolygon(e,t);case"GeometryCollection":return this.compareGeometryCollection(e,t);case"Feature":return this.compareFeature(e,t);case"FeatureCollection":return this.compareFeatureCollection(e,t);default:if(e.type.startsWith("Multi")){const i=cf(e),r=cf(t);return i.every(s=>r.some(o=>this.compare(s,o)))}}return!1}compareCoord(e,t){return e.length===t.length&&e.every((i,r)=>Math.abs(i-t[r])<this.precision)}compareLine(e,t,i=0,r=!1){if(!El(e,t))return!1;const s=e;let o=t;if(r&&!this.compareCoord(s[0],o[0])){const l=this.fixStartIndex(o,s);if(l)o=l;else return!1}const a=this.compareCoord(s[i],o[i]);return this.direction||a?this.comparePath(s,o):this.compareCoord(s[i],o[o.length-(1+i)])?this.comparePath(s.slice().reverse(),o):!1}fixStartIndex(e,t){let i,r=-1;for(let s=0;s<e.length;s++)if(this.compareCoord(e[s],t[0])){r=s;break}return r>=0&&(i=[].concat(e.slice(r,e.length),e.slice(1,r+1))),i}comparePath(e,t){return e.every((i,r)=>this.compareCoord(i,t[r]))}comparePolygon(e,t){if(this.compareLine(e.coordinates[0],t.coordinates[0],1,!0)){const i=e.coordinates.slice(1,e.coordinates.length),r=t.coordinates.slice(1,t.coordinates.length);return i.every(s=>r.some(o=>this.compareLine(s,o,1,!0)))}return!1}compareGeometryCollection(e,t){return El(e.geometries,t.geometries)&&this.compareBBox(e,t)&&e.geometries.every((i,r)=>this.compare(i,t.geometries[r]))}compareFeature(e,t){return e.id===t.id&&(this.compareProperties?e0(e.properties,t.properties):!0)&&this.compareBBox(e,t)&&this.compare(e.geometry,t.geometry)}compareFeatureCollection(e,t){return El(e.features,t.features)&&this.compareBBox(e,t)&&e.features.every((i,r)=>this.compare(i,t.features[r]))}compareBBox(e,t){return!e.bbox&&!t.bbox||(e.bbox&&t.bbox?this.compareCoord(e.bbox,t.bbox):!1)}};Ya(Jv,"GeojsonEquality");var u7=Jv;function El(n,e){return n.coordinates?n.coordinates.length===e.coordinates.length:n.length===e.length}Ya(El,"sameLength");function cf(n){return n.coordinates.map(e=>({type:n.type.replace("Multi",""),coordinates:e}))}Ya(cf,"explode");function Qv(n,e,t){return new u7(t).compare(n,e)}Ya(Qv,"geojsonEquality");function e0(n,e){if(n===null&&e===null)return!0;if(n===null||e===null)return!1;const t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(var r of t){const s=n[r],o=e[r],a=ud(s)&&ud(o);if(a&&!e0(s,o)||!a&&s!==o)return!1}return!0}Ya(e0,"equal");var ud=Ya(n=>n!=null&&typeof n=="object","isObject");function cd(n,e={}){var t=typeof e=="object"?e.mutate:e;if(!n)throw new Error("geojson is required");var i=Xv(n),r=[];switch(i){case"LineString":r=yh(n,i);break;case"MultiLineString":case"Polygon":Ma(n).forEach(function(o){r.push(yh(o,i))});break;case"MultiPolygon":Ma(n).forEach(function(o){var a=[];o.forEach(function(l){a.push(yh(l,i))}),r.push(a)});break;case"Point":return n;case"MultiPoint":var s={};Ma(n).forEach(function(o){var a=o.join("-");Object.prototype.hasOwnProperty.call(s,a)||(r.push(o),s[a]=!0)});break;default:throw new Error(i+" geometry not supported")}return n.coordinates?t===!0?(n.coordinates=r,n):{type:i,coordinates:r}:t===!0?(n.geometry.coordinates=r,n):jo({type:i,coordinates:r},n.properties,{bbox:n.bbox,id:n.id})}function yh(n,e){var t=Ma(n);if(t.length===2&&!hd(t[0],t[1]))return t;var i=[],r=t.length-1,s=i.length;i.push(t[0]);for(var o=1;o<r;o++){var a=i[i.length-1];t[o][0]===a[0]&&t[o][1]===a[1]||(i.push(t[o]),s=i.length,s>2&&fd(i[s-3],i[s-1],i[s-2])&&i.splice(i.length-2,1))}if(i.push(t[t.length-1]),s=i.length,(e==="Polygon"||e==="MultiPolygon")&&hd(t[0],t[t.length-1])&&s<4)throw new Error("invalid polygon");return e==="LineString"&&s<3||fd(i[s-3],i[s-1],i[s-2])&&i.splice(i.length-2,1),i}function hd(n,e){return n[0]===e[0]&&n[1]===e[1]}function fd(n,e,t){var i=t[0],r=t[1],s=n[0],o=n[1],a=e[0],l=e[1],h=i-s,d=r-o,m=a-s,v=l-o,k=h*v-d*m;return k!==0?!1:Math.abs(m)>=Math.abs(v)?m>0?s<=i&&i<=a:a<=i&&i<=s:v>0?o<=r&&r<=l:l<=r&&r<=o}function c7(n,e,t={}){let i=t.precision;if(i=i==null||isNaN(i)?6:i,typeof i!="number"||!(i>=0))throw new Error("precision must be a positive number");const r=Pc(n).type,s=Pc(e).type;return r!==s?!1:Qv(cd(n),cd(e),{precision:i})}function h7(n,e,t,i,r){e3(n,e,t||0,i||n.length-1,r||f7)}function e3(n,e,t,i,r){for(;i>t;){if(i-t>600){var s=i-t+1,o=e-t+1,a=Math.log(s),l=.5*Math.exp(2*a/3),h=.5*Math.sqrt(a*l*(s-l)/s)*(o-s/2<0?-1:1),d=Math.max(t,Math.floor(e-o*l/s+h)),m=Math.min(i,Math.floor(e+(s-o)*l/s+h));e3(n,e,d,m,r)}var v=n[e],k=t,w=i;for(ul(n,t,e),r(n[i],v)>0&&ul(n,t,i);k<w;){for(ul(n,k,w),k++,w--;r(n[k],v)<0;)k++;for(;r(n[w],v)>0;)w--}r(n[t],v)===0?ul(n,t,w):(w++,ul(n,w,i)),w<=e&&(t=w+1),e<=w&&(i=w-1)}}function ul(n,e,t){var i=n[e];n[e]=n[t],n[t]=i}function f7(n,e){return n<e?-1:n>e?1:0}let d7=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const i=[];if(!Iu(e,t))return i;const r=this.toBBox,s=[];for(;t;){for(let o=0;o<t.children.length;o++){const a=t.children[o],l=t.leaf?r(a):a;Iu(e,l)&&(t.leaf?i.push(a):wh(e,l)?this._all(a,i):s.push(a))}t=s.pop()}return i}collides(e){let t=this.data;if(!Iu(e,t))return!1;const i=[];for(;t;){for(let r=0;r<t.children.length;r++){const s=t.children[r],o=t.leaf?this.toBBox(s):s;if(Iu(e,o)){if(t.leaf||wh(e,o))return!0;i.push(s)}}t=i.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let i=0;i<e.length;i++)this.insert(e[i]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const i=this.data;this.data=t,t=i}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=ma([]),this}remove(e,t){if(!e)return this;let i=this.data;const r=this.toBBox(e),s=[],o=[];let a,l,h;for(;i||s.length;){if(i||(i=s.pop(),l=s[s.length-1],a=o.pop(),h=!0),i.leaf){const d=g7(e,i.children,t);if(d!==-1)return i.children.splice(d,1),s.push(i),this._condense(s),this}!h&&!i.leaf&&wh(i,r)?(s.push(i),o.push(a),a=0,l=i,i=i.children[0]):l?(a++,i=l.children[a],h=!1):i=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const i=[];for(;e;)e.leaf?t.push(...e.children):i.push(...e.children),e=i.pop();return t}_build(e,t,i,r){const s=i-t+1;let o=this._maxEntries,a;if(s<=o)return a=ma(e.slice(t,i+1)),ha(a,this.toBBox),a;r||(r=Math.ceil(Math.log(s)/Math.log(o)),o=Math.ceil(s/Math.pow(o,r-1))),a=ma([]),a.leaf=!1,a.height=r;const l=Math.ceil(s/o),h=l*Math.ceil(Math.sqrt(o));dd(e,t,i,h,this.compareMinX);for(let d=t;d<=i;d+=h){const m=Math.min(d+h-1,i);dd(e,d,m,l,this.compareMinY);for(let v=d;v<=m;v+=l){const k=Math.min(v+l-1,m);a.children.push(this._build(e,v,k,r-1))}}return ha(a,this.toBBox),a}_chooseSubtree(e,t,i,r){for(;r.push(t),!(t.leaf||r.length-1===i);){let s=1/0,o=1/0,a;for(let l=0;l<t.children.length;l++){const h=t.children[l],d=bh(h),m=p7(e,h)-d;m<o?(o=m,s=d<s?d:s,a=h):m===o&&d<s&&(s=d,a=h)}t=a||t.children[0]}return t}_insert(e,t,i){const r=i?e:this.toBBox(e),s=[],o=this._chooseSubtree(r,this.data,t,s);for(o.children.push(e),Il(o,r);t>=0&&s[t].children.length>this._maxEntries;)this._split(s,t),t--;this._adjustParentBBoxes(r,s,t)}_split(e,t){const i=e[t],r=i.children.length,s=this._minEntries;this._chooseSplitAxis(i,s,r);const o=this._chooseSplitIndex(i,s,r),a=ma(i.children.splice(o,i.children.length-o));a.height=i.height,a.leaf=i.leaf,ha(i,this.toBBox),ha(a,this.toBBox),t?e[t-1].children.push(a):this._splitRoot(i,a)}_splitRoot(e,t){this.data=ma([e,t]),this.data.height=e.height+1,this.data.leaf=!1,ha(this.data,this.toBBox)}_chooseSplitIndex(e,t,i){let r,s=1/0,o=1/0;for(let a=t;a<=i-t;a++){const l=Sl(e,0,a,this.toBBox),h=Sl(e,a,i,this.toBBox),d=v7(l,h),m=bh(l)+bh(h);d<s?(s=d,r=a,o=m<o?m:o):d===s&&m<o&&(o=m,r=a)}return r||i-t}_chooseSplitAxis(e,t,i){const r=e.leaf?this.compareMinX:m7,s=e.leaf?this.compareMinY:_7,o=this._allDistMargin(e,t,i,r),a=this._allDistMargin(e,t,i,s);o<a&&e.children.sort(r)}_allDistMargin(e,t,i,r){e.children.sort(r);const s=this.toBBox,o=Sl(e,0,t,s),a=Sl(e,i-t,i,s);let l=Su(o)+Su(a);for(let h=t;h<i-t;h++){const d=e.children[h];Il(o,e.leaf?s(d):d),l+=Su(o)}for(let h=i-t-1;h>=t;h--){const d=e.children[h];Il(a,e.leaf?s(d):d),l+=Su(a)}return l}_adjustParentBBoxes(e,t,i){for(let r=i;r>=0;r--)Il(t[r],e)}_condense(e){for(let t=e.length-1,i;t>=0;t--)e[t].children.length===0?t>0?(i=e[t-1].children,i.splice(i.indexOf(e[t]),1)):this.clear():ha(e[t],this.toBBox)}};function g7(n,e,t){if(!t)return e.indexOf(n);for(let i=0;i<e.length;i++)if(t(n,e[i]))return i;return-1}function ha(n,e){Sl(n,0,n.children.length,e,n)}function Sl(n,e,t,i,r){r||(r=ma(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(let s=e;s<t;s++){const o=n.children[s];Il(r,n.leaf?i(o):o)}return r}function Il(n,e){return n.minX=Math.min(n.minX,e.minX),n.minY=Math.min(n.minY,e.minY),n.maxX=Math.max(n.maxX,e.maxX),n.maxY=Math.max(n.maxY,e.maxY),n}function m7(n,e){return n.minX-e.minX}function _7(n,e){return n.minY-e.minY}function bh(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function Su(n){return n.maxX-n.minX+(n.maxY-n.minY)}function p7(n,e){return(Math.max(e.maxX,n.maxX)-Math.min(e.minX,n.minX))*(Math.max(e.maxY,n.maxY)-Math.min(e.minY,n.minY))}function v7(n,e){const t=Math.max(n.minX,e.minX),i=Math.max(n.minY,e.minY),r=Math.min(n.maxX,e.maxX),s=Math.min(n.maxY,e.maxY);return Math.max(0,r-t)*Math.max(0,s-i)}function wh(n,e){return n.minX<=e.minX&&n.minY<=e.minY&&e.maxX<=n.maxX&&e.maxY<=n.maxY}function Iu(n,e){return e.minX<=n.maxX&&e.minY<=n.maxY&&e.maxX>=n.minX&&e.maxY>=n.minY}function ma(n){return{children:n,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function dd(n,e,t,i,r){const s=[e,t];for(;s.length;){if(t=s.pop(),e=s.pop(),t-e<=i)continue;const o=e+Math.ceil((t-e)/i/2)*i;h7(n,o,e,t,r),s.push(e,o,o,t)}}const y7=Object.freeze(Object.defineProperty({__proto__:null,default:d7},Symbol.toStringTag,{value:"Module"}));var b7=Object.defineProperty,w7=Object.defineProperties,k7=Object.getOwnPropertyDescriptors,gd=Object.getOwnPropertySymbols,E7=Object.prototype.hasOwnProperty,S7=Object.prototype.propertyIsEnumerable,md=(n,e,t)=>e in n?b7(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,_d=(n,e)=>{for(var t in e||(e={}))E7.call(e,t)&&md(n,t,e[t]);if(gd)for(var t of gd(e))S7.call(e,t)&&md(n,t,e[t]);return n},pd=(n,e)=>w7(n,k7(e));function Mu(n,e,t={}){if(!n||!e)throw new Error("lines and pt are required arguments");const i=sr(e);let r=Qn([1/0,1/0],{dist:1/0,index:-1,multiFeatureIndex:-1,location:-1}),s=0;return Kv(n,function(o,a,l){const h=Ma(o);for(let d=0;d<h.length-1;d++){const m=Qn(h[d]);m.properties.dist=rr(e,m,t);const v=sr(m),k=Qn(h[d+1]);k.properties.dist=rr(e,k,t);const w=sr(k),E=rr(m,k,t);let I,M;v[0]===i[0]&&v[1]===i[1]?[I,,M]=[v,void 0,!1]:w[0]===i[0]&&w[1]===i[1]?[I,,M]=[w,void 0,!0]:[I,,M]=T7(m.geometry.coordinates,k.geometry.coordinates,sr(e));let C;I&&(C=Qn(I,{dist:rr(e,I,t),multiFeatureIndex:l,location:s+rr(m,I,t)})),C&&C.properties.dist<r.properties.dist&&(r=pd(_d({},C),{properties:pd(_d({},C.properties),{index:M?d+1:d})})),s+=E}}),r}function I7(n,e){const[t,i,r]=n,[s,o,a]=e;return t*s+i*o+r*a}function M7(n,e){const[t,i,r]=n,[s,o,a]=e;return[i*a-r*o,r*s-t*a,t*o-i*s]}function vd(n){return Math.sqrt(Math.pow(n[0],2)+Math.pow(n[1],2)+Math.pow(n[2],2))}function zo(n,e){const t=I7(n,e)/(vd(n)*vd(e));return Math.acos(Math.min(Math.max(t,-1),1))}function kh(n){const e=qi(n[1]),t=qi(n[0]);return[Math.cos(e)*Math.cos(t),Math.cos(e)*Math.sin(t),Math.sin(e)]}function Go(n){const[e,t,i]=n,r=Fa(Math.asin(i));return[Fa(Math.atan2(t,e)),r]}function T7(n,e,t){const i=kh(n),r=kh(e),s=kh(t),[o,a,l]=s,[h,d,m]=M7(i,r),v=d*l-m*a,k=m*o-h*l,w=h*a-d*o,E=w*d-k*m,I=v*m-w*h,M=k*h-v*d,C=1/Math.sqrt(Math.pow(E,2)+Math.pow(I,2)+Math.pow(M,2)),D=[E*C,I*C,M*C],O=[-1*E*C,-1*I*C,-1*M*C],P=zo(i,r),F=zo(i,D),V=zo(r,D),$=zo(i,O),G=zo(r,O);let U;return F<$&&F<G||V<$&&V<G?U=D:U=O,zo(i,U)>P||zo(r,U)>P?rr(Go(U),Go(i))<=rr(Go(U),Go(r))?[Go(i),!0,!1]:[Go(r),!1,!0]:[Go(U),!1,!1]}function L7(n,e={}){const t=Jy(n),i=(t[0]+t[2])/2,r=(t[1]+t[3])/2;return Qn([i,r],e.properties,e)}var t3={exports:{}};(function(n,e){(function(t,i){n.exports=i()})($f,function(){function t(b,u){(u==null||u>b.length)&&(u=b.length);for(var c=0,y=Array(u);c<u;c++)y[c]=b[c];return y}function i(b,u,c){return u=d(u),function(y,N){if(N&&(typeof N=="object"||typeof N=="function"))return N;if(N!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(z){if(z===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return z}(y)}(b,v()?Reflect.construct(u,c||[],d(b).constructor):u.apply(b,c))}function r(b,u){if(!(b instanceof u))throw new TypeError("Cannot call a class as a function")}function s(b,u,c){if(v())return Reflect.construct.apply(null,arguments);var y=[null];y.push.apply(y,u);var N=new(b.bind.apply(b,y));return c&&k(N,c.prototype),N}function o(b,u){for(var c=0;c<u.length;c++){var y=u[c];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(b,I(y.key),y)}}function a(b,u,c){return u&&o(b.prototype,u),c&&o(b,c),Object.defineProperty(b,"prototype",{writable:!1}),b}function l(b,u){var c=typeof Symbol<"u"&&b[Symbol.iterator]||b["@@iterator"];if(!c){if(Array.isArray(b)||(c=M(b))||u){c&&(b=c);var y=0,N=function(){};return{s:N,n:function(){return y>=b.length?{done:!0}:{done:!1,value:b[y++]}},e:function(Le){throw Le},f:N}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var z,se=!0,ve=!1;return{s:function(){c=c.call(b)},n:function(){var Le=c.next();return se=Le.done,Le},e:function(Le){ve=!0,z=Le},f:function(){try{se||c.return==null||c.return()}finally{if(ve)throw z}}}}function h(){return h=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(b,u,c){var y=function(z,se){for(;!{}.hasOwnProperty.call(z,se)&&(z=d(z))!==null;);return z}(b,u);if(y){var N=Object.getOwnPropertyDescriptor(y,u);return N.get?N.get.call(arguments.length<3?b:c):N.value}},h.apply(null,arguments)}function d(b){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(u){return u.__proto__||Object.getPrototypeOf(u)},d(b)}function m(b,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(u&&u.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),Object.defineProperty(b,"prototype",{writable:!1}),u&&k(b,u)}function v(){try{var b=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(v=function(){return!!b})()}function k(b,u){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(c,y){return c.__proto__=y,c},k(b,u)}function w(b,u,c,y){var N=h(d(1&y?b.prototype:b),u,c);return 2&y&&typeof N=="function"?function(z){return N.apply(c,z)}:N}function E(b){return function(u){if(Array.isArray(u))return t(u)}(b)||function(u){if(typeof Symbol<"u"&&u[Symbol.iterator]!=null||u["@@iterator"]!=null)return Array.from(u)}(b)||M(b)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function I(b){var u=function(c,y){if(typeof c!="object"||!c)return c;var N=c[Symbol.toPrimitive];if(N!==void 0){var z=N.call(c,y);if(typeof z!="object")return z;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(c)}(b,"string");return typeof u=="symbol"?u:u+""}function M(b,u){if(b){if(typeof b=="string")return t(b,u);var c={}.toString.call(b).slice(8,-1);return c==="Object"&&b.constructor&&(c=b.constructor.name),c==="Map"||c==="Set"?Array.from(b):c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?t(b,u):void 0}}function C(b){var u=typeof Map=="function"?new Map:void 0;return C=function(c){if(c===null||!function(N){try{return Function.toString.call(N).indexOf("[native code]")!==-1}catch{return typeof N=="function"}}(c))return c;if(typeof c!="function")throw new TypeError("Super expression must either be null or a function");if(u!==void 0){if(u.has(c))return u.get(c);u.set(c,y)}function y(){return s(c,arguments,d(this).constructor)}return y.prototype=Object.create(c.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),k(y,c)},C(b)}var D=function(){function b(){r(this,b),b.constructor_.apply(this,arguments)}return a(b,[{key:"getEndCapStyle",value:function(){return this._endCapStyle}},{key:"isSingleSided",value:function(){return this._isSingleSided}},{key:"setQuadrantSegments",value:function(u){this._quadrantSegments=u,this._quadrantSegments===0&&(this._joinStyle=b.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=b.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),u<=0&&(this._quadrantSegments=1),this._joinStyle!==b.JOIN_ROUND&&(this._quadrantSegments=b.DEFAULT_QUADRANT_SEGMENTS)}},{key:"getJoinStyle",value:function(){return this._joinStyle}},{key:"setJoinStyle",value:function(u){this._joinStyle=u}},{key:"setSimplifyFactor",value:function(u){this._simplifyFactor=u<0?0:u}},{key:"getSimplifyFactor",value:function(){return this._simplifyFactor}},{key:"getQuadrantSegments",value:function(){return this._quadrantSegments}},{key:"setEndCapStyle",value:function(u){this._endCapStyle=u}},{key:"getMitreLimit",value:function(){return this._mitreLimit}},{key:"setMitreLimit",value:function(u){this._mitreLimit=u}},{key:"setSingleSided",value:function(u){this._isSingleSided=u}}],[{key:"constructor_",value:function(){if(this._quadrantSegments=b.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=b.CAP_ROUND,this._joinStyle=b.JOIN_ROUND,this._mitreLimit=b.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=b.DEFAULT_SIMPLIFY_FACTOR,arguments.length!==0){if(arguments.length===1){var u=arguments[0];this.setQuadrantSegments(u)}else if(arguments.length===2){var c=arguments[0],y=arguments[1];this.setQuadrantSegments(c),this.setEndCapStyle(y)}else if(arguments.length===4){var N=arguments[0],z=arguments[1],se=arguments[2],ve=arguments[3];this.setQuadrantSegments(N),this.setEndCapStyle(z),this.setJoinStyle(se),this.setMitreLimit(ve)}}}},{key:"bufferDistanceError",value:function(u){var c=Math.PI/2/u;return 1-Math.cos(c/2)}}])}();D.CAP_ROUND=1,D.CAP_FLAT=2,D.CAP_SQUARE=3,D.JOIN_ROUND=1,D.JOIN_MITRE=2,D.JOIN_BEVEL=3,D.DEFAULT_QUADRANT_SEGMENTS=8,D.DEFAULT_MITRE_LIMIT=5,D.DEFAULT_SIMPLIFY_FACTOR=.01;var O=function(b){function u(c){var y;return r(this,u),(y=i(this,u,[c])).name=Object.keys({Exception:u})[0],y}return m(u,b),a(u,[{key:"toString",value:function(){return this.message}}])}(C(Error)),P=function(b){function u(c){var y;return r(this,u),(y=i(this,u,[c])).name=Object.keys({IllegalArgumentException:u})[0],y}return m(u,b),a(u)}(O),F=function(){return a(function b(){r(this,b)},[{key:"filter",value:function(b){}}])}();function V(){}function $(){}function G(){}var U,H,j,Q,W,Y,q,ne,J=function(){return a(function b(){r(this,b)},null,[{key:"equalsWithTolerance",value:function(b,u,c){return Math.abs(b-u)<=c}}])}(),ge=function(){return a(function b(u,c){r(this,b),this.low=c||0,this.high=u||0},null,[{key:"toBinaryString",value:function(b){var u,c="";for(u=2147483648;u>0;u>>>=1)c+=(b.high&u)===u?"1":"0";for(u=2147483648;u>0;u>>>=1)c+=(b.low&u)===u?"1":"0";return c}}])}();function ie(){}function le(){}ie.NaN=NaN,ie.isNaN=function(b){return Number.isNaN(b)},ie.isInfinite=function(b){return!Number.isFinite(b)},ie.MAX_VALUE=Number.MAX_VALUE,ie.POSITIVE_INFINITY=Number.POSITIVE_INFINITY,ie.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,typeof Float64Array=="function"&&typeof Int32Array=="function"?(Y=2146435072,q=new Float64Array(1),ne=new Int32Array(q.buffer),ie.doubleToLongBits=function(b){q[0]=b;var u=0|ne[0],c=0|ne[1];return(c&Y)===Y&&1048575&c&&u!==0&&(u=0,c=2146959360),new ge(c,u)},ie.longBitsToDouble=function(b){return ne[0]=b.low,ne[1]=b.high,q[0]}):(U=1023,H=Math.log2,j=Math.floor,Q=Math.pow,W=function(){for(var b=53;b>0;b--){var u=Q(2,b)-1;if(j(H(u))+1===b)return u}return 0}(),ie.doubleToLongBits=function(b){var u,c,y,N,z,se,ve,Le,xe;if(b<0||1/b===Number.NEGATIVE_INFINITY?(se=1<<31,b=-b):se=0,b===0)return new ge(Le=se,xe=0);if(b===1/0)return new ge(Le=2146435072|se,xe=0);if(b!=b)return new ge(Le=2146959360,xe=0);if(N=0,xe=0,(u=j(b))>1)if(u<=W)(N=j(H(u)))<=20?(xe=0,Le=u<<20-N&1048575):(xe=u%(c=Q(2,y=N-20))<<32-y,Le=u/c&1048575);else for(y=u,xe=0;(y=j(c=y/2))!==0;)N++,xe>>>=1,xe|=(1&Le)<<31,Le>>>=1,c!==y&&(Le|=524288);if(ve=N+U,z=u===0,u=b-u,N<52&&u!==0)for(y=0;;){if((c=2*u)>=1?(u=c-1,z?(ve--,z=!1):(y<<=1,y|=1,N++)):(u=c,z?--ve==0&&(N++,z=!1):(y<<=1,N++)),N===20)Le|=y,y=0;else if(N===52){xe|=y;break}if(c===1){N<20?Le|=y<<20-N:N<52&&(xe|=y<<52-N);break}}return Le|=ve<<20,new ge(Le|=se,xe)},ie.longBitsToDouble=function(b){var u,c,y,N,z=b.high,se=b.low,ve=z&1<<31?-1:1;for(y=((2146435072&z)>>20)-U,N=0,c=1<<19,u=1;u<=20;u++)z&c&&(N+=Q(2,-u)),c>>>=1;for(c=1<<31,u=21;u<=52;u++)se&c&&(N+=Q(2,-u)),c>>>=1;if(y===-1023){if(N===0)return 0*ve;y=-1022}else{if(y===1024)return N===0?ve/0:NaN;N+=1}return ve*N*Q(2,y)});var pe=function(b){function u(c){var y;return r(this,u),(y=i(this,u,[c])).name=Object.keys({RuntimeException:u})[0],y}return m(u,b),a(u)}(O),ye=function(b){function u(){var c;return r(this,u),c=i(this,u),u.constructor_.apply(c,arguments),c}return m(u,b),a(u,null,[{key:"constructor_",value:function(){if(arguments.length===0)pe.constructor_.call(this);else if(arguments.length===1){var c=arguments[0];pe.constructor_.call(this,c)}}}])}(pe),be=function(){function b(){r(this,b)}return a(b,null,[{key:"shouldNeverReachHere",value:function(){if(arguments.length===0)b.shouldNeverReachHere(null);else if(arguments.length===1){var u=arguments[0];throw new ye("Should never reach here"+(u!==null?": "+u:""))}}},{key:"isTrue",value:function(){if(arguments.length===1){var u=arguments[0];b.isTrue(u,null)}else if(arguments.length===2){var c=arguments[1];if(!arguments[0])throw c===null?new ye:new ye(c)}}},{key:"equals",value:function(){if(arguments.length===2){var u=arguments[0],c=arguments[1];b.equals(u,c,null)}else if(arguments.length===3){var y=arguments[0],N=arguments[1],z=arguments[2];if(!N.equals(y))throw new ye("Expected "+y+" but encountered "+N+(z!==null?": "+z:""))}}}])}(),re=new ArrayBuffer(8),me=new Float64Array(re),ke=new Int32Array(re),X=function(){function b(){r(this,b),b.constructor_.apply(this,arguments)}return a(b,[{key:"getM",value:function(){return ie.NaN}},{key:"setOrdinate",value:function(u,c){switch(u){case b.X:this.x=c;break;case b.Y:this.y=c;break;case b.Z:this.setZ(c);break;default:throw new P("Invalid ordinate index: "+u)}}},{key:"equals2D",value:function(){if(arguments.length===1){var u=arguments[0];return this.x===u.x&&this.y===u.y}if(arguments.length===2){var c=arguments[0],y=arguments[1];return!!J.equalsWithTolerance(this.x,c.x,y)&&!!J.equalsWithTolerance(this.y,c.y,y)}}},{key:"setM",value:function(u){throw new P("Invalid ordinate index: "+b.M)}},{key:"getZ",value:function(){return this.z}},{key:"getOrdinate",value:function(u){switch(u){case b.X:return this.x;case b.Y:return this.y;case b.Z:return this.getZ()}throw new P("Invalid ordinate index: "+u)}},{key:"equals3D",value:function(u){return this.x===u.x&&this.y===u.y&&(this.getZ()===u.getZ()||ie.isNaN(this.getZ())&&ie.isNaN(u.getZ()))}},{key:"equals",value:function(u){return u instanceof b&&this.equals2D(u)}},{key:"equalInZ",value:function(u,c){return J.equalsWithTolerance(this.getZ(),u.getZ(),c)}},{key:"setX",value:function(u){this.x=u}},{key:"compareTo",value:function(u){var c=u;return this.x<c.x?-1:this.x>c.x?1:this.y<c.y?-1:this.y>c.y?1:0}},{key:"getX",value:function(){return this.x}},{key:"setZ",value:function(u){this.z=u}},{key:"clone",value:function(){try{return null}catch(u){if(u instanceof CloneNotSupportedException)return be.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw u}}},{key:"copy",value:function(){return new b(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.getZ()+")"}},{key:"distance3D",value:function(u){var c=this.x-u.x,y=this.y-u.y,N=this.getZ()-u.getZ();return Math.sqrt(c*c+y*y+N*N)}},{key:"getY",value:function(){return this.y}},{key:"setY",value:function(u){this.y=u}},{key:"distance",value:function(u){var c=this.x-u.x,y=this.y-u.y;return Math.sqrt(c*c+y*y)}},{key:"hashCode",value:function(){var u=17;return u=37*(u=37*u+b.hashCode(this.x))+b.hashCode(this.y)}},{key:"setCoordinate",value:function(u){this.x=u.x,this.y=u.y,this.z=u.getZ()}},{key:"interfaces_",get:function(){return[V,$,G]}}],[{key:"constructor_",value:function(){if(this.x=null,this.y=null,this.z=null,arguments.length===0)b.constructor_.call(this,0,0);else if(arguments.length===1){var u=arguments[0];b.constructor_.call(this,u.x,u.y,u.getZ())}else if(arguments.length===2){var c=arguments[0],y=arguments[1];b.constructor_.call(this,c,y,b.NULL_ORDINATE)}else if(arguments.length===3){var N=arguments[0],z=arguments[1],se=arguments[2];this.x=N,this.y=z,this.z=se}}},{key:"hashCode",value:function(u){return me[0]=u,ke[0]^ke[1]}}])}(),ue=function(){function b(){r(this,b),b.constructor_.apply(this,arguments)}return a(b,[{key:"compare",value:function(u,c){var y=b.compare(u.x,c.x);if(y!==0)return y;var N=b.compare(u.y,c.y);return N!==0?N:this._dimensionsToTest<=2?0:b.compare(u.getZ(),c.getZ())}},{key:"interfaces_",get:function(){return[le]}}],[{key:"constructor_",value:function(){if(this._dimensionsToTest=2,arguments.length===0)b.constructor_.call(this,2);else if(arguments.length===1){var u=arguments[0];if(u!==2&&u!==3)throw new P("only 2 or 3 dimensions may be specified");this._dimensionsToTest=u}}},{key:"compare",value:function(u,c){return u<c?-1:u>c?1:ie.isNaN(u)?ie.isNaN(c)?0:-1:ie.isNaN(c)?1:0}}])}();X.DimensionalComparator=ue,X.NULL_ORDINATE=ie.NaN,X.X=0,X.Y=1,X.Z=2,X.M=3;var _e=function(){function b(){r(this,b),b.constructor_.apply(this,arguments)}return a(b,[{key:"getArea",value:function(){return this.getWidth()*this.getHeight()}},{key:"equals",value:function(u){if(!(u instanceof b))return!1;var c=u;return this.isNull()?c.isNull():this._maxx===c.getMaxX()&&this._maxy===c.getMaxY()&&this._minx===c.getMinX()&&this._miny===c.getMinY()}},{key:"intersection",value:function(u){if(this.isNull()||u.isNull()||!this.intersects(u))return new b;var c=this._minx>u._minx?this._minx:u._minx,y=this._miny>u._miny?this._miny:u._miny;return new b(c,this._maxx<u._maxx?this._maxx:u._maxx,y,this._maxy<u._maxy?this._maxy:u._maxy)}},{key:"isNull",value:function(){return this._maxx<this._minx}},{key:"getMaxX",value:function(){return this._maxx}},{key:"covers",value:function(){if(arguments.length===1){if(arguments[0]instanceof X){var u=arguments[0];return this.covers(u.x,u.y)}if(arguments[0]instanceof b){var c=arguments[0];return!this.isNull()&&!c.isNull()&&c.getMinX()>=this._minx&&c.getMaxX()<=this._maxx&&c.getMinY()>=this._miny&&c.getMaxY()<=this._maxy}}else if(arguments.length===2){var y=arguments[0],N=arguments[1];return!this.isNull()&&y>=this._minx&&y<=this._maxx&&N>=this._miny&&N<=this._maxy}}},{key:"intersects",value:function(){if(arguments.length===1){if(arguments[0]instanceof b){var u=arguments[0];return!this.isNull()&&!u.isNull()&&!(u._minx>this._maxx||u._maxx<this._minx||u._miny>this._maxy||u._maxy<this._miny)}if(arguments[0]instanceof X){var c=arguments[0];return this.intersects(c.x,c.y)}}else if(arguments.length===2){if(arguments[0]instanceof X&&arguments[1]instanceof X){var y=arguments[0],N=arguments[1];return!this.isNull()&&!((y.x<N.x?y.x:N.x)>this._maxx)&&!((y.x>N.x?y.x:N.x)<this._minx)&&!((y.y<N.y?y.y:N.y)>this._maxy)&&!((y.y>N.y?y.y:N.y)<this._miny)}if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var z=arguments[0],se=arguments[1];return!this.isNull()&&!(z>this._maxx||z<this._minx||se>this._maxy||se<this._miny)}}}},{key:"getMinY",value:function(){return this._miny}},{key:"getDiameter",value:function(){if(this.isNull())return 0;var u=this.getWidth(),c=this.getHeight();return Math.sqrt(u*u+c*c)}},{key:"getMinX",value:function(){return this._minx}},{key:"expandToInclude",value:function(){if(arguments.length===1){if(arguments[0]instanceof X){var u=arguments[0];this.expandToInclude(u.x,u.y)}else if(arguments[0]instanceof b){var c=arguments[0];if(c.isNull())return null;this.isNull()?(this._minx=c.getMinX(),this._maxx=c.getMaxX(),this._miny=c.getMinY(),this._maxy=c.getMaxY()):(c._minx<this._minx&&(this._minx=c._minx),c._maxx>this._maxx&&(this._maxx=c._maxx),c._miny<this._miny&&(this._miny=c._miny),c._maxy>this._maxy&&(this._maxy=c._maxy))}}else if(arguments.length===2){var y=arguments[0],N=arguments[1];this.isNull()?(this._minx=y,this._maxx=y,this._miny=N,this._maxy=N):(y<this._minx&&(this._minx=y),y>this._maxx&&(this._maxx=y),N<this._miny&&(this._miny=N),N>this._maxy&&(this._maxy=N))}}},{key:"minExtent",value:function(){if(this.isNull())return 0;var u=this.getWidth(),c=this.getHeight();return u<c?u:c}},{key:"getWidth",value:function(){return this.isNull()?0:this._maxx-this._minx}},{key:"compareTo",value:function(u){var c=u;return this.isNull()?c.isNull()?0:-1:c.isNull()?1:this._minx<c._minx?-1:this._minx>c._minx?1:this._miny<c._miny?-1:this._miny>c._miny?1:this._maxx<c._maxx?-1:this._maxx>c._maxx?1:this._maxy<c._maxy?-1:this._maxy>c._maxy?1:0}},{key:"translate",value:function(u,c){if(this.isNull())return null;this.init(this.getMinX()+u,this.getMaxX()+u,this.getMinY()+c,this.getMaxY()+c)}},{key:"copy",value:function(){return new b(this)}},{key:"toString",value:function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"}},{key:"setToNull",value:function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1}},{key:"disjoint",value:function(u){return!(!this.isNull()&&!u.isNull())||u._minx>this._maxx||u._maxx<this._minx||u._miny>this._maxy||u._maxy<this._miny}},{key:"getHeight",value:function(){return this.isNull()?0:this._maxy-this._miny}},{key:"maxExtent",value:function(){if(this.isNull())return 0;var u=this.getWidth(),c=this.getHeight();return u>c?u:c}},{key:"expandBy",value:function(){if(arguments.length===1){var u=arguments[0];this.expandBy(u,u)}else if(arguments.length===2){var c=arguments[0],y=arguments[1];if(this.isNull())return null;this._minx-=c,this._maxx+=c,this._miny-=y,this._maxy+=y,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}}},{key:"contains",value:function(){if(arguments.length===1){if(arguments[0]instanceof b){var u=arguments[0];return this.covers(u)}if(arguments[0]instanceof X){var c=arguments[0];return this.covers(c)}}else if(arguments.length===2){var y=arguments[0],N=arguments[1];return this.covers(y,N)}}},{key:"centre",value:function(){return this.isNull()?null:new X((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)}},{key:"init",value:function(){if(arguments.length===0)this.setToNull();else if(arguments.length===1){if(arguments[0]instanceof X){var u=arguments[0];this.init(u.x,u.x,u.y,u.y)}else if(arguments[0]instanceof b){var c=arguments[0];this._minx=c._minx,this._maxx=c._maxx,this._miny=c._miny,this._maxy=c._maxy}}else if(arguments.length===2){var y=arguments[0],N=arguments[1];this.init(y.x,N.x,y.y,N.y)}else if(arguments.length===4){var z=arguments[0],se=arguments[1],ve=arguments[2],Le=arguments[3];z<se?(this._minx=z,this._maxx=se):(this._minx=se,this._maxx=z),ve<Le?(this._miny=ve,this._maxy=Le):(this._miny=Le,this._maxy=ve)}}},{key:"getMaxY",value:function(){return this._maxy}},{key:"distance",value:function(u){if(this.intersects(u))return 0;var c=0;this._maxx<u._minx?c=u._minx-this._maxx:this._minx>u._maxx&&(c=this._minx-u._maxx);var y=0;return this._maxy<u._miny?y=u._miny-this._maxy:this._miny>u._maxy&&(y=this._miny-u._maxy),c===0?y:y===0?c:Math.sqrt(c*c+y*y)}},{key:"hashCode",value:function(){var u=17;return u=37*(u=37*(u=37*(u=37*u+X.hashCode(this._minx))+X.hashCode(this._maxx))+X.hashCode(this._miny))+X.hashCode(this._maxy)}},{key:"interfaces_",get:function(){return[V,G]}}],[{key:"constructor_",value:function(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,arguments.length===0)this.init();else if(arguments.length===1){if(arguments[0]instanceof X){var u=arguments[0];this.init(u.x,u.x,u.y,u.y)}else if(arguments[0]instanceof b){var c=arguments[0];this.init(c)}}else if(arguments.length===2){var y=arguments[0],N=arguments[1];this.init(y.x,N.x,y.y,N.y)}else if(arguments.length===4){var z=arguments[0],se=arguments[1],ve=arguments[2],Le=arguments[3];this.init(z,se,ve,Le)}}},{key:"intersects",value:function(){if(arguments.length===3){var u=arguments[0],c=arguments[1],y=arguments[2];return y.x>=(u.x<c.x?u.x:c.x)&&y.x<=(u.x>c.x?u.x:c.x)&&y.y>=(u.y<c.y?u.y:c.y)&&y.y<=(u.y>c.y?u.y:c.y)}if(arguments.length===4){var N=arguments[0],z=arguments[1],se=arguments[2],ve=arguments[3],Le=Math.min(se.x,ve.x),xe=Math.max(se.x,ve.x),Xe=Math.min(N.x,z.x),ct=Math.max(N.x,z.x);return!(Xe>xe)&&!(ct<Le)&&(Le=Math.min(se.y,ve.y),xe=Math.max(se.y,ve.y),Xe=Math.min(N.y,z.y),ct=Math.max(N.y,z.y),!(Xe>xe)&&!(ct<Le))}}}])}(),oe=function(){function b(){r(this,b),b.constructor_.apply(this,arguments)}return a(b,[{key:"isGeometryCollection",value:function(){return this.getTypeCode()===b.TYPECODE_GEOMETRYCOLLECTION}},{key:"getFactory",value:function(){return this._factory}},{key:"getGeometryN",value:function(u){return this}},{key:"getArea",value:function(){return 0}},{key:"isRectangle",value:function(){return!1}},{key:"equalsExact",value:function(u){return this===u||this.equalsExact(u,0)}},{key:"geometryChanged",value:function(){this.apply(b.geometryChangedFilter)}},{key:"geometryChangedAction",value:function(){this._envelope=null}},{key:"equalsNorm",value:function(u){return u!==null&&this.norm().equalsExact(u.norm())}},{key:"getLength",value:function(){return 0}},{key:"getNumGeometries",value:function(){return 1}},{key:"compareTo",value:function(){var u;if(arguments.length===1){var c=arguments[0];return u=c,this.getTypeCode()!==u.getTypeCode()?this.getTypeCode()-u.getTypeCode():this.isEmpty()&&u.isEmpty()?0:this.isEmpty()?-1:u.isEmpty()?1:this.compareToSameClass(c)}if(arguments.length===2){var y=arguments[0],N=arguments[1];return u=y,this.getTypeCode()!==u.getTypeCode()?this.getTypeCode()-u.getTypeCode():this.isEmpty()&&u.isEmpty()?0:this.isEmpty()?-1:u.isEmpty()?1:this.compareToSameClass(y,N)}}},{key:"getUserData",value:function(){return this._userData}},{key:"getSRID",value:function(){return this._SRID}},{key:"getEnvelope",value:function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())}},{key:"checkNotGeometryCollection",value:function(u){if(u.getTypeCode()===b.TYPECODE_GEOMETRYCOLLECTION)throw new P("This method does not support GeometryCollection arguments")}},{key:"equal",value:function(u,c,y){return y===0?u.equals(c):u.distance(c)<=y}},{key:"norm",value:function(){var u=this.copy();return u.normalize(),u}},{key:"reverse",value:function(){var u=this.reverseInternal();return this.envelope!=null&&(u.envelope=this.envelope.copy()),u.setSRID(this.getSRID()),u}},{key:"copy",value:function(){var u=this.copyInternal();return u.envelope=this._envelope==null?null:this._envelope.copy(),u._SRID=this._SRID,u._userData=this._userData,u}},{key:"getPrecisionModel",value:function(){return this._factory.getPrecisionModel()}},{key:"getEnvelopeInternal",value:function(){return this._envelope===null&&(this._envelope=this.computeEnvelopeInternal()),new _e(this._envelope)}},{key:"setSRID",value:function(u){this._SRID=u}},{key:"setUserData",value:function(u){this._userData=u}},{key:"compare",value:function(u,c){for(var y=u.iterator(),N=c.iterator();y.hasNext()&&N.hasNext();){var z=y.next(),se=N.next(),ve=z.compareTo(se);if(ve!==0)return ve}return y.hasNext()?1:N.hasNext()?-1:0}},{key:"hashCode",value:function(){return this.getEnvelopeInternal().hashCode()}},{key:"isEquivalentClass",value:function(u){return this.getClass()===u.getClass()}},{key:"isGeometryCollectionOrDerived",value:function(){return this.getTypeCode()===b.TYPECODE_GEOMETRYCOLLECTION||this.getTypeCode()===b.TYPECODE_MULTIPOINT||this.getTypeCode()===b.TYPECODE_MULTILINESTRING||this.getTypeCode()===b.TYPECODE_MULTIPOLYGON}},{key:"interfaces_",get:function(){return[$,V,G]}},{key:"getClass",value:function(){return b}}],[{key:"hasNonEmptyElements",value:function(u){for(var c=0;c<u.length;c++)if(!u[c].isEmpty())return!0;return!1}},{key:"hasNullElements",value:function(u){for(var c=0;c<u.length;c++)if(u[c]===null)return!0;return!1}}])}();oe.constructor_=function(b){b&&(this._envelope=null,this._userData=null,this._factory=b,this._SRID=b.getSRID())},oe.TYPECODE_POINT=0,oe.TYPECODE_MULTIPOINT=1,oe.TYPECODE_LINESTRING=2,oe.TYPECODE_LINEARRING=3,oe.TYPECODE_MULTILINESTRING=4,oe.TYPECODE_POLYGON=5,oe.TYPECODE_MULTIPOLYGON=6,oe.TYPECODE_GEOMETRYCOLLECTION=7,oe.TYPENAME_POINT="Point",oe.TYPENAME_MULTIPOINT="MultiPoint",oe.TYPENAME_LINESTRING="LineString",oe.TYPENAME_LINEARRING="LinearRing",oe.TYPENAME_MULTILINESTRING="MultiLineString",oe.TYPENAME_POLYGON="Polygon",oe.TYPENAME_MULTIPOLYGON="MultiPolygon",oe.TYPENAME_GEOMETRYCOLLECTION="GeometryCollection",oe.geometryChangedFilter={get interfaces_(){return[F]},filter:function(b){b.geometryChangedAction()}};var ae=function(){function b(){r(this,b)}return a(b,null,[{key:"toLocationSymbol",value:function(u){switch(u){case b.EXTERIOR:return"e";case b.BOUNDARY:return"b";case b.INTERIOR:return"i";case b.NONE:return"-"}throw new P("Unknown location value: "+u)}}])}();ae.INTERIOR=0,ae.BOUNDARY=1,ae.EXTERIOR=2,ae.NONE=-1;var Se=function(){return a(function b(){r(this,b)},[{key:"add",value:function(){}},{key:"addAll",value:function(){}},{key:"isEmpty",value:function(){}},{key:"iterator",value:function(){}},{key:"size",value:function(){}},{key:"toArray",value:function(){}},{key:"remove",value:function(){}}])}(),Me=function(b){function u(c){var y;return r(this,u),(y=i(this,u,[c])).name=Object.keys({NoSuchElementException:u})[0],y}return m(u,b),a(u)}(O),we=function(b){function u(c){var y;return r(this,u),(y=i(this,u,[c])).name=Object.keys({UnsupportedOperationException:u})[0],y}return m(u,b),a(u)}(O),Te=function(b){function u(){return r(this,u),i(this,u,arguments)}return m(u,b),a(u,[{key:"contains",value:function(){}}])}(Se),Ae=function(b){function u(c){var y;return r(this,u),(y=i(this,u)).map=new Map,c instanceof Se&&y.addAll(c),y}return m(u,b),a(u,[{key:"contains",value:function(c){var y=c.hashCode?c.hashCode():c;return!!this.map.has(y)}},{key:"add",value:function(c){var y=c.hashCode?c.hashCode():c;return!this.map.has(y)&&!!this.map.set(y,c)}},{key:"addAll",value:function(c){var y,N=l(c);try{for(N.s();!(y=N.n()).done;){var z=y.value;this.add(z)}}catch(se){N.e(se)}finally{N.f()}return!0}},{key:"remove",value:function(){throw new we}},{key:"size",value:function(){return this.map.size}},{key:"isEmpty",value:function(){return this.map.size===0}},{key:"toArray",value:function(){return Array.from(this.map.values())}},{key:"iterator",value:function(){return new Ne(this.map)}},{key:Symbol.iterator,value:function(){return this.map}}])}(Te),Ne=function(){return a(function b(u){r(this,b),this.iterator=u.values();var c=this.iterator.next(),y=c.done,N=c.value;this.done=y,this.value=N},[{key:"next",value:function(){if(this.done)throw new Me;var b=this.value,u=this.iterator.next(),c=u.done,y=u.value;return this.done=c,this.value=y,b}},{key:"hasNext",value:function(){return!this.done}},{key:"remove",value:function(){throw new we}}])}(),De=function(){function b(){r(this,b)}return a(b,null,[{key:"opposite",value:function(u){return u===b.LEFT?b.RIGHT:u===b.RIGHT?b.LEFT:u}}])}();De.ON=0,De.LEFT=1,De.RIGHT=2;var _t=function(b){function u(c){var y;return r(this,u),(y=i(this,u,[c])).name=Object.keys({EmptyStackException:u})[0],y}return m(u,b),a(u)}(O),Fe=function(b){function u(c){var y;return r(this,u),(y=i(this,u,[c])).name=Object.keys({IndexOutOfBoundsException:u})[0],y}return m(u,b),a(u)}(O),Pe=function(b){function u(){return r(this,u),i(this,u,arguments)}return m(u,b),a(u,[{key:"get",value:function(){}},{key:"set",value:function(){}},{key:"isEmpty",value:function(){}}])}(Se),je=function(b){function u(){var c;return r(this,u),(c=i(this,u)).array=[],c}return m(u,b),a(u,[{key:"add",value:function(c){return this.array.push(c),!0}},{key:"get",value:function(c){if(c<0||c>=this.size())throw new Fe;return this.array[c]}},{key:"push",value:function(c){return this.array.push(c),c}},{key:"pop",value:function(){if(this.array.length===0)throw new _t;return this.array.pop()}},{key:"peek",value:function(){if(this.array.length===0)throw new _t;return this.array[this.array.length-1]}},{key:"empty",value:function(){return this.array.length===0}},{key:"isEmpty",value:function(){return this.empty()}},{key:"search",value:function(c){return this.array.indexOf(c)}},{key:"size",value:function(){return this.array.length}},{key:"toArray",value:function(){return this.array.slice()}}])}(Pe);function Ve(b,u){return b.interfaces_&&b.interfaces_.indexOf(u)>-1}var Ue=function(){return a(function b(u){r(this,b),this.str=u},[{key:"append",value:function(b){this.str+=b}},{key:"setCharAt",value:function(b,u){this.str=this.str.substr(0,b)+u+this.str.substr(b+1)}},{key:"toString",value:function(){return this.str}}])}(),Ke=function(){function b(u){r(this,b),this.value=u}return a(b,[{key:"intValue",value:function(){return this.value}},{key:"compareTo",value:function(u){return this.value<u?-1:this.value>u?1:0}}],[{key:"compare",value:function(u,c){return u<c?-1:u>c?1:0}},{key:"isNan",value:function(u){return Number.isNaN(u)}},{key:"valueOf",value:function(u){return new b(u)}}])}(),We=function(){return a(function b(){r(this,b)},null,[{key:"isWhitespace",value:function(b){return b<=32&&b>=0||b===127}},{key:"toUpperCase",value:function(b){return b.toUpperCase()}}])}(),ze=function(){function b(){r(this,b),b.constructor_.apply(this,arguments)}return a(b,[{key:"le",value:function(u){return this._hi<u._hi||this._hi===u._hi&&this._lo<=u._lo}},{key:"extractSignificantDigits",value:function(u,c){var y=this.abs(),N=b.magnitude(y._hi),z=b.TEN.pow(N);(y=y.divide(z)).gt(b.TEN)?(y=y.divide(b.TEN),N+=1):y.lt(b.ONE)&&(y=y.multiply(b.TEN),N-=1);for(var se=N+1,ve=new Ue,Le=b.MAX_PRINT_DIGITS-1,xe=0;xe<=Le;xe++){u&&xe===se&&ve.append(".");var Xe=Math.trunc(y._hi);if(Xe<0)break;var ct=!1,Lt=0;Xe>9?(ct=!0,Lt="9"):Lt="0"+Xe,ve.append(Lt),y=y.subtract(b.valueOf(Xe)).multiply(b.TEN),ct&&y.selfAdd(b.TEN);var Ht=!0,on=b.magnitude(y._hi);if(on<0&&Math.abs(on)>=Le-xe&&(Ht=!1),!Ht)break}return c[0]=N,ve.toString()}},{key:"sqr",value:function(){return this.multiply(this)}},{key:"doubleValue",value:function(){return this._hi+this._lo}},{key:"subtract",value:function(){if(arguments[0]instanceof b){var u=arguments[0];return this.add(u.negate())}if(typeof arguments[0]=="number"){var c=arguments[0];return this.add(-c)}}},{key:"equals",value:function(){if(arguments.length===1&&arguments[0]instanceof b){var u=arguments[0];return this._hi===u._hi&&this._lo===u._lo}}},{key:"isZero",value:function(){return this._hi===0&&this._lo===0}},{key:"selfSubtract",value:function(){if(arguments[0]instanceof b){var u=arguments[0];return this.isNaN()?this:this.selfAdd(-u._hi,-u._lo)}if(typeof arguments[0]=="number"){var c=arguments[0];return this.isNaN()?this:this.selfAdd(-c,0)}}},{key:"getSpecialNumberString",value:function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null}},{key:"min",value:function(u){return this.le(u)?this:u}},{key:"selfDivide",value:function(){if(arguments.length===1){if(arguments[0]instanceof b){var u=arguments[0];return this.selfDivide(u._hi,u._lo)}if(typeof arguments[0]=="number"){var c=arguments[0];return this.selfDivide(c,0)}}else if(arguments.length===2){var y,N,z,se,ve=arguments[0],Le=arguments[1],xe=null,Xe=null,ct=null,Lt=null;return z=this._hi/ve,Lt=(xe=(ct=b.SPLIT*z)-(xe=ct-z))*(Xe=(Lt=b.SPLIT*ve)-(Xe=Lt-ve))-(se=z*ve)+xe*(N=ve-Xe)+(y=z-xe)*Xe+y*N,Lt=z+(ct=(this._hi-se-Lt+this._lo-z*Le)/ve),this._hi=Lt,this._lo=z-Lt+ct,this}}},{key:"dump",value:function(){return"DD<"+this._hi+", "+this._lo+">"}},{key:"divide",value:function(){if(arguments[0]instanceof b){var u,c,y,N,z=arguments[0],se=null,ve=null,Le=null,xe=null;return u=(y=this._hi/z._hi)-(se=(Le=b.SPLIT*y)-(se=Le-y)),xe=se*(ve=(xe=b.SPLIT*z._hi)-(ve=xe-z._hi))-(N=y*z._hi)+se*(c=z._hi-ve)+u*ve+u*c,new b(xe=y+(Le=(this._hi-N-xe+this._lo-y*z._lo)/z._hi),y-xe+Le)}if(typeof arguments[0]=="number"){var Xe=arguments[0];return ie.isNaN(Xe)?b.createNaN():b.copy(this).selfDivide(Xe,0)}}},{key:"ge",value:function(u){return this._hi>u._hi||this._hi===u._hi&&this._lo>=u._lo}},{key:"pow",value:function(u){if(u===0)return b.valueOf(1);var c=new b(this),y=b.valueOf(1),N=Math.abs(u);if(N>1)for(;N>0;)N%2==1&&y.selfMultiply(c),(N/=2)>0&&(c=c.sqr());else y=c;return u<0?y.reciprocal():y}},{key:"ceil",value:function(){if(this.isNaN())return b.NaN;var u=Math.ceil(this._hi),c=0;return u===this._hi&&(c=Math.ceil(this._lo)),new b(u,c)}},{key:"compareTo",value:function(u){var c=u;return this._hi<c._hi?-1:this._hi>c._hi?1:this._lo<c._lo?-1:this._lo>c._lo?1:0}},{key:"rint",value:function(){return this.isNaN()?this:this.add(.5).floor()}},{key:"setValue",value:function(){if(arguments[0]instanceof b){var u=arguments[0];return this.init(u),this}if(typeof arguments[0]=="number"){var c=arguments[0];return this.init(c),this}}},{key:"max",value:function(u){return this.ge(u)?this:u}},{key:"sqrt",value:function(){if(this.isZero())return b.valueOf(0);if(this.isNegative())return b.NaN;var u=1/Math.sqrt(this._hi),c=this._hi*u,y=b.valueOf(c),N=this.subtract(y.sqr())._hi*(.5*u);return y.add(N)}},{key:"selfAdd",value:function(){if(arguments.length===1){if(arguments[0]instanceof b){var u=arguments[0];return this.selfAdd(u._hi,u._lo)}if(typeof arguments[0]=="number"){var c,y,N,z,se,ve=arguments[0],Le=null;return Le=(N=this._hi+ve)-(z=N-this._hi),y=(se=(Le=ve-z+(this._hi-Le))+this._lo)+(N-(c=N+se)),this._hi=c+y,this._lo=y+(c-this._hi),this}}else if(arguments.length===2){var xe,Xe,ct,Lt,Ht=arguments[0],on=arguments[1],hn=null,Wn=null,xn=null;ct=this._hi+Ht,Xe=this._lo+on,Wn=ct-(xn=ct-this._hi),hn=Xe-(Lt=Xe-this._lo);var hi=(xe=ct+(xn=(Wn=Ht-xn+(this._hi-Wn))+Xe))+(xn=(hn=on-Lt+(this._lo-hn))+(xn+(ct-xe))),vi=xn+(xe-hi);return this._hi=hi,this._lo=vi,this}}},{key:"selfMultiply",value:function(){if(arguments.length===1){if(arguments[0]instanceof b){var u=arguments[0];return this.selfMultiply(u._hi,u._lo)}if(typeof arguments[0]=="number"){var c=arguments[0];return this.selfMultiply(c,0)}}else if(arguments.length===2){var y,N,z=arguments[0],se=arguments[1],ve=null,Le=null,xe=null,Xe=null;ve=(xe=b.SPLIT*this._hi)-this._hi,Xe=b.SPLIT*z,ve=xe-ve,y=this._hi-ve,Le=Xe-z;var ct=(xe=this._hi*z)+(Xe=ve*(Le=Xe-Le)-xe+ve*(N=z-Le)+y*Le+y*N+(this._hi*se+this._lo*z)),Lt=Xe+(ve=xe-ct);return this._hi=ct,this._lo=Lt,this}}},{key:"selfSqr",value:function(){return this.selfMultiply(this)}},{key:"floor",value:function(){if(this.isNaN())return b.NaN;var u=Math.floor(this._hi),c=0;return u===this._hi&&(c=Math.floor(this._lo)),new b(u,c)}},{key:"negate",value:function(){return this.isNaN()?this:new b(-this._hi,-this._lo)}},{key:"clone",value:function(){try{return null}catch(u){if(u instanceof CloneNotSupportedException)return null;throw u}}},{key:"multiply",value:function(){if(arguments[0]instanceof b){var u=arguments[0];return u.isNaN()?b.createNaN():b.copy(this).selfMultiply(u)}if(typeof arguments[0]=="number"){var c=arguments[0];return ie.isNaN(c)?b.createNaN():b.copy(this).selfMultiply(c,0)}}},{key:"isNaN",value:function(){return ie.isNaN(this._hi)}},{key:"intValue",value:function(){return Math.trunc(this._hi)}},{key:"toString",value:function(){var u=b.magnitude(this._hi);return u>=-3&&u<=20?this.toStandardNotation():this.toSciNotation()}},{key:"toStandardNotation",value:function(){var u=this.getSpecialNumberString();if(u!==null)return u;var c=new Array(1).fill(null),y=this.extractSignificantDigits(!0,c),N=c[0]+1,z=y;if(y.charAt(0)===".")z="0"+y;else if(N<0)z="0."+b.stringOfChar("0",-N)+y;else if(y.indexOf(".")===-1){var se=N-y.length;z=y+b.stringOfChar("0",se)+".0"}return this.isNegative()?"-"+z:z}},{key:"reciprocal",value:function(){var u,c,y,N,z=null,se=null,ve=null,Le=null;u=(y=1/this._hi)-(z=(ve=b.SPLIT*y)-(z=ve-y)),se=(Le=b.SPLIT*this._hi)-this._hi;var xe=y+(ve=(1-(N=y*this._hi)-(Le=z*(se=Le-se)-N+z*(c=this._hi-se)+u*se+u*c)-y*this._lo)/this._hi);return new b(xe,y-xe+ve)}},{key:"toSciNotation",value:function(){if(this.isZero())return b.SCI_NOT_ZERO;var u=this.getSpecialNumberString();if(u!==null)return u;var c=new Array(1).fill(null),y=this.extractSignificantDigits(!1,c),N=b.SCI_NOT_EXPONENT_CHAR+c[0];if(y.charAt(0)==="0")throw new IllegalStateException("Found leading zero: "+y);var z="";y.length>1&&(z=y.substring(1));var se=y.charAt(0)+"."+z;return this.isNegative()?"-"+se+N:se+N}},{key:"abs",value:function(){return this.isNaN()?b.NaN:this.isNegative()?this.negate():new b(this)}},{key:"isPositive",value:function(){return this._hi>0||this._hi===0&&this._lo>0}},{key:"lt",value:function(u){return this._hi<u._hi||this._hi===u._hi&&this._lo<u._lo}},{key:"add",value:function(){if(arguments[0]instanceof b){var u=arguments[0];return b.copy(this).selfAdd(u)}if(typeof arguments[0]=="number"){var c=arguments[0];return b.copy(this).selfAdd(c)}}},{key:"init",value:function(){if(arguments.length===1){if(typeof arguments[0]=="number"){var u=arguments[0];this._hi=u,this._lo=0}else if(arguments[0]instanceof b){var c=arguments[0];this._hi=c._hi,this._lo=c._lo}}else if(arguments.length===2){var y=arguments[0],N=arguments[1];this._hi=y,this._lo=N}}},{key:"gt",value:function(u){return this._hi>u._hi||this._hi===u._hi&&this._lo>u._lo}},{key:"isNegative",value:function(){return this._hi<0||this._hi===0&&this._lo<0}},{key:"trunc",value:function(){return this.isNaN()?b.NaN:this.isPositive()?this.floor():this.ceil()}},{key:"signum",value:function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0}},{key:"interfaces_",get:function(){return[G,V,$]}}],[{key:"constructor_",value:function(){if(this._hi=0,this._lo=0,arguments.length===0)this.init(0);else if(arguments.length===1){if(typeof arguments[0]=="number"){var u=arguments[0];this.init(u)}else if(arguments[0]instanceof b){var c=arguments[0];this.init(c)}else if(typeof arguments[0]=="string"){var y=arguments[0];b.constructor_.call(this,b.parse(y))}}else if(arguments.length===2){var N=arguments[0],z=arguments[1];this.init(N,z)}}},{key:"determinant",value:function(){if(typeof arguments[3]=="number"&&typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var u=arguments[0],c=arguments[1],y=arguments[2],N=arguments[3];return b.determinant(b.valueOf(u),b.valueOf(c),b.valueOf(y),b.valueOf(N))}if(arguments[3]instanceof b&&arguments[2]instanceof b&&arguments[0]instanceof b&&arguments[1]instanceof b){var z=arguments[1],se=arguments[2],ve=arguments[3];return arguments[0].multiply(ve).selfSubtract(z.multiply(se))}}},{key:"sqr",value:function(u){return b.valueOf(u).selfMultiply(u)}},{key:"valueOf",value:function(){if(typeof arguments[0]=="string"){var u=arguments[0];return b.parse(u)}if(typeof arguments[0]=="number")return new b(arguments[0])}},{key:"sqrt",value:function(u){return b.valueOf(u).sqrt()}},{key:"parse",value:function(u){for(var c=0,y=u.length;We.isWhitespace(u.charAt(c));)c++;var N=!1;if(c<y){var z=u.charAt(c);z!=="-"&&z!=="+"||(c++,z==="-"&&(N=!0))}for(var se=new b,ve=0,Le=0,xe=0,Xe=!1;!(c>=y);){var ct=u.charAt(c);if(c++,We.isDigit(ct)){var Lt=ct-"0";se.selfMultiply(b.TEN),se.selfAdd(Lt),ve++}else{if(ct!=="."){if(ct==="e"||ct==="E"){var Ht=u.substring(c);try{xe=Ke.parseInt(Ht)}catch(hi){throw hi instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+Ht+" in string "+u):hi}break}throw new NumberFormatException("Unexpected character '"+ct+"' at position "+c+" in string "+u)}Le=ve,Xe=!0}}var on=se;Xe||(Le=ve);var hn=ve-Le-xe;if(hn===0)on=se;else if(hn>0){var Wn=b.TEN.pow(hn);on=se.divide(Wn)}else if(hn<0){var xn=b.TEN.pow(-hn);on=se.multiply(xn)}return N?on.negate():on}},{key:"createNaN",value:function(){return new b(ie.NaN,ie.NaN)}},{key:"copy",value:function(u){return new b(u)}},{key:"magnitude",value:function(u){var c=Math.abs(u),y=Math.log(c)/Math.log(10),N=Math.trunc(Math.floor(y));return 10*Math.pow(10,N)<=c&&(N+=1),N}},{key:"stringOfChar",value:function(u,c){for(var y=new Ue,N=0;N<c;N++)y.append(u);return y.toString()}}])}();ze.PI=new ze(3.141592653589793,12246467991473532e-32),ze.TWO_PI=new ze(6.283185307179586,24492935982947064e-32),ze.PI_2=new ze(1.5707963267948966,6123233995736766e-32),ze.E=new ze(2.718281828459045,14456468917292502e-32),ze.NaN=new ze(ie.NaN,ie.NaN),ze.EPS=123259516440783e-46,ze.SPLIT=134217729,ze.MAX_PRINT_DIGITS=32,ze.TEN=ze.valueOf(10),ze.ONE=ze.valueOf(1),ze.SCI_NOT_EXPONENT_CHAR="E",ze.SCI_NOT_ZERO="0.0E0";var Et=function(){function b(){r(this,b)}return a(b,null,[{key:"orientationIndex",value:function(u,c,y){var N=b.orientationIndexFilter(u,c,y);if(N<=1)return N;var z=ze.valueOf(c.x).selfAdd(-u.x),se=ze.valueOf(c.y).selfAdd(-u.y),ve=ze.valueOf(y.x).selfAdd(-c.x),Le=ze.valueOf(y.y).selfAdd(-c.y);return z.selfMultiply(Le).selfSubtract(se.selfMultiply(ve)).signum()}},{key:"signOfDet2x2",value:function(){if(arguments[3]instanceof ze&&arguments[2]instanceof ze&&arguments[0]instanceof ze&&arguments[1]instanceof ze){var u=arguments[1],c=arguments[2],y=arguments[3];return arguments[0].multiply(y).selfSubtract(u.multiply(c)).signum()}if(typeof arguments[3]=="number"&&typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var N=arguments[0],z=arguments[1],se=arguments[2],ve=arguments[3],Le=ze.valueOf(N),xe=ze.valueOf(z),Xe=ze.valueOf(se),ct=ze.valueOf(ve);return Le.multiply(ct).selfSubtract(xe.multiply(Xe)).signum()}}},{key:"intersection",value:function(u,c,y,N){var z=new ze(u.y).selfSubtract(c.y),se=new ze(c.x).selfSubtract(u.x),ve=new ze(u.x).selfMultiply(c.y).selfSubtract(new ze(c.x).selfMultiply(u.y)),Le=new ze(y.y).selfSubtract(N.y),xe=new ze(N.x).selfSubtract(y.x),Xe=new ze(y.x).selfMultiply(N.y).selfSubtract(new ze(N.x).selfMultiply(y.y)),ct=se.multiply(Xe).selfSubtract(xe.multiply(ve)),Lt=Le.multiply(ve).selfSubtract(z.multiply(Xe)),Ht=z.multiply(xe).selfSubtract(Le.multiply(se)),on=ct.selfDivide(Ht).doubleValue(),hn=Lt.selfDivide(Ht).doubleValue();return ie.isNaN(on)||ie.isInfinite(on)||ie.isNaN(hn)||ie.isInfinite(hn)?null:new X(on,hn)}},{key:"orientationIndexFilter",value:function(u,c,y){var N=null,z=(u.x-y.x)*(c.y-y.y),se=(u.y-y.y)*(c.x-y.x),ve=z-se;if(z>0){if(se<=0)return b.signum(ve);N=z+se}else{if(!(z<0)||se>=0)return b.signum(ve);N=-z-se}var Le=b.DP_SAFE_EPSILON*N;return ve>=Le||-ve>=Le?b.signum(ve):2}},{key:"signum",value:function(u){return u>0?1:u<0?-1:0}}])}();Et.DP_SAFE_EPSILON=1e-15;var rt=function(){return a(function b(){r(this,b)},[{key:"getM",value:function(b){if(this.hasM()){var u=this.getDimension()-this.getMeasures();return this.getOrdinate(b,u)}return ie.NaN}},{key:"setOrdinate",value:function(b,u,c){}},{key:"getZ",value:function(b){return this.hasZ()?this.getOrdinate(b,2):ie.NaN}},{key:"size",value:function(){}},{key:"getOrdinate",value:function(b,u){}},{key:"getCoordinate",value:function(){}},{key:"getCoordinateCopy",value:function(b){}},{key:"createCoordinate",value:function(){}},{key:"getDimension",value:function(){}},{key:"hasM",value:function(){return this.getMeasures()>0}},{key:"getX",value:function(b){}},{key:"hasZ",value:function(){return this.getDimension()-this.getMeasures()>2}},{key:"getMeasures",value:function(){return 0}},{key:"expandEnvelope",value:function(b){}},{key:"copy",value:function(){}},{key:"getY",value:function(b){}},{key:"toCoordinateArray",value:function(){}},{key:"interfaces_",get:function(){return[$]}}])}();rt.X=0,rt.Y=1,rt.Z=2,rt.M=3;var ft=function(){function b(){r(this,b)}return a(b,null,[{key:"index",value:function(u,c,y){return Et.orientationIndex(u,c,y)}},{key:"isCCW",value:function(){if(arguments[0]instanceof Array){var u=arguments[0],c=u.length-1;if(c<3)throw new P("Ring has fewer than 4 points, so orientation cannot be determined");for(var y=u[0],N=0,z=1;z<=c;z++){var se=u[z];se.y>y.y&&(y=se,N=z)}var ve=N;do(ve-=1)<0&&(ve=c);while(u[ve].equals2D(y)&&ve!==N);var Le=N;do Le=(Le+1)%c;while(u[Le].equals2D(y)&&Le!==N);var xe=u[ve],Xe=u[Le];if(xe.equals2D(y)||Xe.equals2D(y)||xe.equals2D(Xe))return!1;var ct=b.index(xe,y,Xe);return ct===0?xe.x>Xe.x:ct>0}if(Ve(arguments[0],rt)){var Lt=arguments[0],Ht=Lt.size()-1;if(Ht<3)throw new P("Ring has fewer than 4 points, so orientation cannot be determined");for(var on=Lt.getCoordinate(0),hn=0,Wn=1;Wn<=Ht;Wn++){var xn=Lt.getCoordinate(Wn);xn.y>on.y&&(on=xn,hn=Wn)}var hi=null,vi=hn;do(vi-=1)<0&&(vi=Ht),hi=Lt.getCoordinate(vi);while(hi.equals2D(on)&&vi!==hn);var Vi=null,Ts=hn;do Ts=(Ts+1)%Ht,Vi=Lt.getCoordinate(Ts);while(Vi.equals2D(on)&&Ts!==hn);if(hi.equals2D(on)||Vi.equals2D(on)||hi.equals2D(Vi))return!1;var $o=b.index(hi,on,Vi);return $o===0?hi.x>Vi.x:$o>0}}}])}();ft.CLOCKWISE=-1,ft.RIGHT=ft.CLOCKWISE,ft.COUNTERCLOCKWISE=1,ft.LEFT=ft.COUNTERCLOCKWISE,ft.COLLINEAR=0,ft.STRAIGHT=ft.COLLINEAR;var Ut=function(){return a(function b(){r(this,b),b.constructor_.apply(this,arguments)},[{key:"getCoordinate",value:function(){return this._minCoord}},{key:"getRightmostSide",value:function(b,u){var c=this.getRightmostSideOfSegment(b,u);return c<0&&(c=this.getRightmostSideOfSegment(b,u-1)),c<0&&(this._minCoord=null,this.checkForRightmostCoordinate(b)),c}},{key:"findRightmostEdgeAtVertex",value:function(){var b=this._minDe.getEdge().getCoordinates();be.isTrue(this._minIndex>0&&this._minIndex<b.length,"rightmost point expected to be interior vertex of edge");var u=b[this._minIndex-1],c=b[this._minIndex+1],y=ft.index(this._minCoord,c,u),N=!1;(u.y<this._minCoord.y&&c.y<this._minCoord.y&&y===ft.COUNTERCLOCKWISE||u.y>this._minCoord.y&&c.y>this._minCoord.y&&y===ft.CLOCKWISE)&&(N=!0),N&&(this._minIndex=this._minIndex-1)}},{key:"getRightmostSideOfSegment",value:function(b,u){var c=b.getEdge().getCoordinates();if(u<0||u+1>=c.length||c[u].y===c[u+1].y)return-1;var y=De.LEFT;return c[u].y<c[u+1].y&&(y=De.RIGHT),y}},{key:"getEdge",value:function(){return this._orientedDe}},{key:"checkForRightmostCoordinate",value:function(b){for(var u=b.getEdge().getCoordinates(),c=0;c<u.length-1;c++)(this._minCoord===null||u[c].x>this._minCoord.x)&&(this._minDe=b,this._minIndex=c,this._minCoord=u[c])}},{key:"findRightmostEdgeAtNode",value:function(){var b=this._minDe.getNode().getEdges();this._minDe=b.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)}},{key:"findEdge",value:function(b){for(var u=b.iterator();u.hasNext();){var c=u.next();c.isForward()&&this.checkForRightmostCoordinate(c)}be.isTrue(this._minIndex!==0||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),this._minIndex===0?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===De.LEFT&&(this._orientedDe=this._minDe.getSym())}}],[{key:"constructor_",value:function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null}}])}(),Qe=function(b){function u(c,y){var N;return r(this,u),(N=i(this,u,[y?c+" [ "+y+" ]":c])).pt=y?new X(y):void 0,N.name=Object.keys({TopologyException:u})[0],N}return m(u,b),a(u,[{key:"getCoordinate",value:function(){return this.pt}}])}(pe),yt=function(){return a(function b(){r(this,b),this.array=[]},[{key:"addLast",value:function(b){this.array.push(b)}},{key:"removeFirst",value:function(){return this.array.shift()}},{key:"isEmpty",value:function(){return this.array.length===0}}])}(),mt=function(b){function u(c){var y;return r(this,u),(y=i(this,u)).array=[],c instanceof Se&&y.addAll(c),y}return m(u,b),a(u,[{key:"interfaces_",get:function(){return[Pe,Se]}},{key:"ensureCapacity",value:function(){}},{key:"add",value:function(c){return arguments.length===1?this.array.push(c):this.array.splice(arguments[0],0,arguments[1]),!0}},{key:"clear",value:function(){this.array=[]}},{key:"addAll",value:function(c){var y,N=l(c);try{for(N.s();!(y=N.n()).done;){var z=y.value;this.array.push(z)}}catch(se){N.e(se)}finally{N.f()}}},{key:"set",value:function(c,y){var N=this.array[c];return this.array[c]=y,N}},{key:"iterator",value:function(){return new Ft(this)}},{key:"get",value:function(c){if(c<0||c>=this.size())throw new Fe;return this.array[c]}},{key:"isEmpty",value:function(){return this.array.length===0}},{key:"sort",value:function(c){c?this.array.sort(function(y,N){return c.compare(y,N)}):this.array.sort()}},{key:"size",value:function(){return this.array.length}},{key:"toArray",value:function(){return this.array.slice()}},{key:"remove",value:function(c){for(var y=0,N=this.array.length;y<N;y++)if(this.array[y]===c)return!!this.array.splice(y,1);return!1}},{key:Symbol.iterator,value:function(){return this.array.values()}}])}(Pe),Ft=function(){return a(function b(u){r(this,b),this.arrayList=u,this.position=0},[{key:"next",value:function(){if(this.position===this.arrayList.size())throw new Me;return this.arrayList.get(this.position++)}},{key:"hasNext",value:function(){return this.position<this.arrayList.size()}},{key:"set",value:function(b){return this.arrayList.set(this.position-1,b)}},{key:"remove",value:function(){this.arrayList.remove(this.arrayList.get(this.position))}}])}(),qt=function(){return a(function b(){r(this,b),b.constructor_.apply(this,arguments)},[{key:"clearVisitedEdges",value:function(){for(var b=this._dirEdgeList.iterator();b.hasNext();)b.next().setVisited(!1)}},{key:"getRightmostCoordinate",value:function(){return this._rightMostCoord}},{key:"computeNodeDepth",value:function(b){for(var u=null,c=b.getEdges().iterator();c.hasNext();){var y=c.next();if(y.isVisited()||y.getSym().isVisited()){u=y;break}}if(u===null)throw new Qe("unable to find edge to compute depths at "+b.getCoordinate());b.getEdges().computeDepths(u);for(var N=b.getEdges().iterator();N.hasNext();){var z=N.next();z.setVisited(!0),this.copySymDepths(z)}}},{key:"computeDepth",value:function(b){this.clearVisitedEdges();var u=this._finder.getEdge();u.getNode(),u.getLabel(),u.setEdgeDepths(De.RIGHT,b),this.copySymDepths(u),this.computeDepths(u)}},{key:"create",value:function(b){this.addReachable(b),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()}},{key:"findResultEdges",value:function(){for(var b=this._dirEdgeList.iterator();b.hasNext();){var u=b.next();u.getDepth(De.RIGHT)>=1&&u.getDepth(De.LEFT)<=0&&!u.isInteriorAreaEdge()&&u.setInResult(!0)}}},{key:"computeDepths",value:function(b){var u=new Ae,c=new yt,y=b.getNode();for(c.addLast(y),u.add(y),b.setVisited(!0);!c.isEmpty();){var N=c.removeFirst();u.add(N),this.computeNodeDepth(N);for(var z=N.getEdges().iterator();z.hasNext();){var se=z.next().getSym();if(!se.isVisited()){var ve=se.getNode();u.contains(ve)||(c.addLast(ve),u.add(ve))}}}}},{key:"compareTo",value:function(b){var u=b;return this._rightMostCoord.x<u._rightMostCoord.x?-1:this._rightMostCoord.x>u._rightMostCoord.x?1:0}},{key:"getEnvelope",value:function(){if(this._env===null){for(var b=new _e,u=this._dirEdgeList.iterator();u.hasNext();)for(var c=u.next().getEdge().getCoordinates(),y=0;y<c.length-1;y++)b.expandToInclude(c[y]);this._env=b}return this._env}},{key:"addReachable",value:function(b){var u=new je;for(u.add(b);!u.empty();){var c=u.pop();this.add(c,u)}}},{key:"copySymDepths",value:function(b){var u=b.getSym();u.setDepth(De.LEFT,b.getDepth(De.RIGHT)),u.setDepth(De.RIGHT,b.getDepth(De.LEFT))}},{key:"add",value:function(b,u){b.setVisited(!0),this._nodes.add(b);for(var c=b.getEdges().iterator();c.hasNext();){var y=c.next();this._dirEdgeList.add(y);var N=y.getSym().getNode();N.isVisited()||u.push(N)}}},{key:"getNodes",value:function(){return this._nodes}},{key:"getDirectedEdges",value:function(){return this._dirEdgeList}},{key:"interfaces_",get:function(){return[V]}}],[{key:"constructor_",value:function(){this._finder=null,this._dirEdgeList=new mt,this._nodes=new mt,this._rightMostCoord=null,this._env=null,this._finder=new Ut}}])}(),vt=function(){return a(function b(){r(this,b)},null,[{key:"intersection",value:function(b,u,c,y){var N=b.x<u.x?b.x:u.x,z=b.y<u.y?b.y:u.y,se=b.x>u.x?b.x:u.x,ve=b.y>u.y?b.y:u.y,Le=c.x<y.x?c.x:y.x,xe=c.y<y.y?c.y:y.y,Xe=c.x>y.x?c.x:y.x,ct=c.y>y.y?c.y:y.y,Lt=((N>Le?N:Le)+(se<Xe?se:Xe))/2,Ht=((z>xe?z:xe)+(ve<ct?ve:ct))/2,on=b.x-Lt,hn=b.y-Ht,Wn=u.x-Lt,xn=u.y-Ht,hi=c.x-Lt,vi=c.y-Ht,Vi=y.x-Lt,Ts=y.y-Ht,$o=hn-xn,Jr=Wn-on,ol=on*xn-Wn*hn,al=vi-Ts,_o=Vi-hi,yu=hi*Ts-Vi*vi,Vo=$o*_o-al*Jr,Zs=(Jr*yu-_o*ol)/Vo,la=(al*ol-$o*yu)/Vo;return ie.isNaN(Zs)||ie.isInfinite(Zs)||ie.isNaN(la)||ie.isInfinite(la)?null:new X(Zs+Lt,la+Ht)}}])}(),$t=function(){return a(function b(){r(this,b)},null,[{key:"arraycopy",value:function(b,u,c,y,N){for(var z=0,se=u;se<u+N;se++)c[y+z]=b[se],z++}},{key:"getProperty",value:function(b){return{"line.separator":`
`}[b]}}])}(),dn=function(){function b(){r(this,b)}return a(b,null,[{key:"log10",value:function(u){var c=Math.log(u);return ie.isInfinite(c)||ie.isNaN(c)?c:c/b.LOG_10}},{key:"min",value:function(u,c,y,N){var z=u;return c<z&&(z=c),y<z&&(z=y),N<z&&(z=N),z}},{key:"clamp",value:function(){if(typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var u=arguments[0],c=arguments[1],y=arguments[2];return u<c?c:u>y?y:u}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var N=arguments[0],z=arguments[1],se=arguments[2];return N<z?z:N>se?se:N}}},{key:"wrap",value:function(u,c){return u<0?c- -u%c:u%c}},{key:"max",value:function(){if(arguments.length===3){var u=arguments[1],c=arguments[2],y=arguments[0];return u>y&&(y=u),c>y&&(y=c),y}if(arguments.length===4){var N=arguments[1],z=arguments[2],se=arguments[3],ve=arguments[0];return N>ve&&(ve=N),z>ve&&(ve=z),se>ve&&(ve=se),ve}}},{key:"average",value:function(u,c){return(u+c)/2}}])}();dn.LOG_10=Math.log(10);var sn=function(){function b(){r(this,b)}return a(b,null,[{key:"segmentToSegment",value:function(u,c,y,N){if(u.equals(c))return b.pointToSegment(u,y,N);if(y.equals(N))return b.pointToSegment(N,u,c);var z=!1;if(_e.intersects(u,c,y,N)){var se=(c.x-u.x)*(N.y-y.y)-(c.y-u.y)*(N.x-y.x);if(se===0)z=!0;else{var ve=(u.y-y.y)*(N.x-y.x)-(u.x-y.x)*(N.y-y.y),Le=((u.y-y.y)*(c.x-u.x)-(u.x-y.x)*(c.y-u.y))/se,xe=ve/se;(xe<0||xe>1||Le<0||Le>1)&&(z=!0)}}else z=!0;return z?dn.min(b.pointToSegment(u,y,N),b.pointToSegment(c,y,N),b.pointToSegment(y,u,c),b.pointToSegment(N,u,c)):0}},{key:"pointToSegment",value:function(u,c,y){if(c.x===y.x&&c.y===y.y)return u.distance(c);var N=(y.x-c.x)*(y.x-c.x)+(y.y-c.y)*(y.y-c.y),z=((u.x-c.x)*(y.x-c.x)+(u.y-c.y)*(y.y-c.y))/N;if(z<=0)return u.distance(c);if(z>=1)return u.distance(y);var se=((c.y-u.y)*(y.x-c.x)-(c.x-u.x)*(y.y-c.y))/N;return Math.abs(se)*Math.sqrt(N)}},{key:"pointToLinePerpendicular",value:function(u,c,y){var N=(y.x-c.x)*(y.x-c.x)+(y.y-c.y)*(y.y-c.y),z=((c.y-u.y)*(y.x-c.x)-(c.x-u.x)*(y.y-c.y))/N;return Math.abs(z)*Math.sqrt(N)}},{key:"pointToSegmentString",value:function(u,c){if(c.length===0)throw new P("Line array must contain at least one vertex");for(var y=u.distance(c[0]),N=0;N<c.length-1;N++){var z=b.pointToSegment(u,c[N],c[N+1]);z<y&&(y=z)}return y}}])}(),pn=function(){return a(function b(){r(this,b)},[{key:"create",value:function(){if(arguments.length===1)arguments[0]instanceof Array||Ve(arguments[0],rt);else if(arguments.length!==2){if(arguments.length===3){var b=arguments[0],u=arguments[1];return this.create(b,u)}}}}])}(),Ye=function(){return a(function b(){r(this,b)},[{key:"filter",value:function(b){}}])}(),Vt=function(){return a(function b(){r(this,b)},null,[{key:"ofLine",value:function(b){var u=b.size();if(u<=1)return 0;var c=0,y=new X;b.getCoordinate(0,y);for(var N=y.x,z=y.y,se=1;se<u;se++){b.getCoordinate(se,y);var ve=y.x,Le=y.y,xe=ve-N,Xe=Le-z;c+=Math.sqrt(xe*xe+Xe*Xe),N=ve,z=Le}return c}}])}(),Mt=a(function b(){r(this,b)}),Rt=function(){function b(){r(this,b)}return a(b,null,[{key:"copyCoord",value:function(u,c,y,N){for(var z=Math.min(u.getDimension(),y.getDimension()),se=0;se<z;se++)y.setOrdinate(N,se,u.getOrdinate(c,se))}},{key:"isRing",value:function(u){var c=u.size();return c===0||!(c<=3)&&u.getOrdinate(0,rt.X)===u.getOrdinate(c-1,rt.X)&&u.getOrdinate(0,rt.Y)===u.getOrdinate(c-1,rt.Y)}},{key:"scroll",value:function(){if(arguments.length===2){if(Ve(arguments[0],rt)&&Number.isInteger(arguments[1])){var u=arguments[0],c=arguments[1];b.scroll(u,c,b.isRing(u))}else if(Ve(arguments[0],rt)&&arguments[1]instanceof X){var y=arguments[0],N=arguments[1],z=b.indexOf(N,y);if(z<=0)return null;b.scroll(y,z)}}else if(arguments.length===3){var se=arguments[0],ve=arguments[1],Le=arguments[2];if(ve<=0)return null;for(var xe=se.copy(),Xe=Le?se.size()-1:se.size(),ct=0;ct<Xe;ct++)for(var Lt=0;Lt<se.getDimension();Lt++)se.setOrdinate(ct,Lt,xe.getOrdinate((ve+ct)%Xe,Lt));if(Le)for(var Ht=0;Ht<se.getDimension();Ht++)se.setOrdinate(Xe,Ht,se.getOrdinate(0,Ht))}}},{key:"isEqual",value:function(u,c){var y=u.size();if(y!==c.size())return!1;for(var N=Math.min(u.getDimension(),c.getDimension()),z=0;z<y;z++)for(var se=0;se<N;se++){var ve=u.getOrdinate(z,se),Le=c.getOrdinate(z,se);if(u.getOrdinate(z,se)!==c.getOrdinate(z,se)&&(!ie.isNaN(ve)||!ie.isNaN(Le)))return!1}return!0}},{key:"minCoordinateIndex",value:function(){if(arguments.length===1){var u=arguments[0];return b.minCoordinateIndex(u,0,u.size()-1)}if(arguments.length===3){for(var c=arguments[0],y=arguments[2],N=-1,z=null,se=arguments[1];se<=y;se++){var ve=c.getCoordinate(se);(z===null||z.compareTo(ve)>0)&&(z=ve,N=se)}return N}}},{key:"extend",value:function(u,c,y){var N=u.create(y,c.getDimension()),z=c.size();if(b.copy(c,0,N,0,z),z>0)for(var se=z;se<y;se++)b.copy(c,z-1,N,se,1);return N}},{key:"reverse",value:function(u){for(var c=u.size()-1,y=Math.trunc(c/2),N=0;N<=y;N++)b.swap(u,N,c-N)}},{key:"swap",value:function(u,c,y){if(c===y)return null;for(var N=0;N<u.getDimension();N++){var z=u.getOrdinate(c,N);u.setOrdinate(c,N,u.getOrdinate(y,N)),u.setOrdinate(y,N,z)}}},{key:"copy",value:function(u,c,y,N,z){for(var se=0;se<z;se++)b.copyCoord(u,c+se,y,N+se)}},{key:"ensureValidRing",value:function(u,c){var y=c.size();return y===0?c:y<=3?b.createClosedRing(u,c,4):c.getOrdinate(0,rt.X)===c.getOrdinate(y-1,rt.X)&&c.getOrdinate(0,rt.Y)===c.getOrdinate(y-1,rt.Y)?c:b.createClosedRing(u,c,y+1)}},{key:"indexOf",value:function(u,c){for(var y=0;y<c.size();y++)if(u.x===c.getOrdinate(y,rt.X)&&u.y===c.getOrdinate(y,rt.Y))return y;return-1}},{key:"createClosedRing",value:function(u,c,y){var N=u.create(y,c.getDimension()),z=c.size();b.copy(c,0,N,0,z);for(var se=z;se<y;se++)b.copy(c,0,N,se,1);return N}},{key:"minCoordinate",value:function(u){for(var c=null,y=0;y<u.size();y++){var N=u.getCoordinate(y);(c===null||c.compareTo(N)>0)&&(c=N)}return c}}])}(),gt=function(){function b(){r(this,b)}return a(b,null,[{key:"toDimensionSymbol",value:function(u){switch(u){case b.FALSE:return b.SYM_FALSE;case b.TRUE:return b.SYM_TRUE;case b.DONTCARE:return b.SYM_DONTCARE;case b.P:return b.SYM_P;case b.L:return b.SYM_L;case b.A:return b.SYM_A}throw new P("Unknown dimension value: "+u)}},{key:"toDimensionValue",value:function(u){switch(We.toUpperCase(u)){case b.SYM_FALSE:return b.FALSE;case b.SYM_TRUE:return b.TRUE;case b.SYM_DONTCARE:return b.DONTCARE;case b.SYM_P:return b.P;case b.SYM_L:return b.L;case b.SYM_A:return b.A}throw new P("Unknown dimension symbol: "+u)}}])}();gt.P=0,gt.L=1,gt.A=2,gt.FALSE=-1,gt.TRUE=-2,gt.DONTCARE=-3,gt.SYM_FALSE="F",gt.SYM_TRUE="T",gt.SYM_DONTCARE="*",gt.SYM_P="0",gt.SYM_L="1",gt.SYM_A="2";var it=function(){return a(function b(){r(this,b)},[{key:"filter",value:function(b){}}])}(),St=function(){return a(function b(){r(this,b)},[{key:"filter",value:function(b,u){}},{key:"isDone",value:function(){}},{key:"isGeometryChanged",value:function(){}}])}(),Jt=function(b){function u(){var c;return r(this,u),c=i(this,u),u.constructor_.apply(c,arguments),c}return m(u,b),a(u,[{key:"computeEnvelopeInternal",value:function(){return this.isEmpty()?new _e:this._points.expandEnvelope(new _e)}},{key:"isRing",value:function(){return this.isClosed()&&this.isSimple()}},{key:"getCoordinates",value:function(){return this._points.toCoordinateArray()}},{key:"copyInternal",value:function(){return new u(this._points.copy(),this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof oe){var c=arguments[0],y=arguments[1];if(!this.isEquivalentClass(c))return!1;var N=c;if(this._points.size()!==N._points.size())return!1;for(var z=0;z<this._points.size();z++)if(!this.equal(this._points.getCoordinate(z),N._points.getCoordinate(z),y))return!1;return!0}return w(u,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){for(var c=0;c<Math.trunc(this._points.size()/2);c++){var y=this._points.size()-1-c;if(!this._points.getCoordinate(c).equals(this._points.getCoordinate(y))){if(this._points.getCoordinate(c).compareTo(this._points.getCoordinate(y))>0){var N=this._points.copy();Rt.reverse(N),this._points=N}return null}}}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this._points.getCoordinate(0)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?gt.FALSE:0}},{key:"isClosed",value:function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))}},{key:"reverseInternal",value:function(){var c=this._points.copy();return Rt.reverse(c),this.getFactory().createLineString(c)}},{key:"getEndPoint",value:function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)}},{key:"getTypeCode",value:function(){return oe.TYPECODE_LINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getLength",value:function(){return Vt.ofLine(this._points)}},{key:"getNumPoints",value:function(){return this._points.size()}},{key:"compareToSameClass",value:function(){if(arguments.length===1){for(var c=arguments[0],y=0,N=0;y<this._points.size()&&N<c._points.size();){var z=this._points.getCoordinate(y).compareTo(c._points.getCoordinate(N));if(z!==0)return z;y++,N++}return y<this._points.size()?1:N<c._points.size()?-1:0}if(arguments.length===2){var se=arguments[0];return arguments[1].compare(this._points,se._points)}}},{key:"apply",value:function(){if(Ve(arguments[0],Ye))for(var c=arguments[0],y=0;y<this._points.size();y++)c.filter(this._points.getCoordinate(y));else if(Ve(arguments[0],St)){var N=arguments[0];if(this._points.size()===0)return null;for(var z=0;z<this._points.size()&&(N.filter(this._points,z),!N.isDone());z++);N.isGeometryChanged()&&this.geometryChanged()}else Ve(arguments[0],it)?arguments[0].filter(this):Ve(arguments[0],F)&&arguments[0].filter(this)}},{key:"getBoundary",value:function(){throw new we}},{key:"isEquivalentClass",value:function(c){return c instanceof u}},{key:"getCoordinateN",value:function(c){return this._points.getCoordinate(c)}},{key:"getGeometryType",value:function(){return oe.TYPENAME_LINESTRING}},{key:"getCoordinateSequence",value:function(){return this._points}},{key:"isEmpty",value:function(){return this._points.size()===0}},{key:"init",value:function(c){if(c===null&&(c=this.getFactory().getCoordinateSequenceFactory().create([])),c.size()===1)throw new P("Invalid number of points in LineString (found "+c.size()+" - must be 0 or >= 2)");this._points=c}},{key:"isCoordinate",value:function(c){for(var y=0;y<this._points.size();y++)if(this._points.getCoordinate(y).equals(c))return!0;return!1}},{key:"getStartPoint",value:function(){return this.isEmpty()?null:this.getPointN(0)}},{key:"getPointN",value:function(c){return this.getFactory().createPoint(this._points.getCoordinate(c))}},{key:"interfaces_",get:function(){return[Mt]}}],[{key:"constructor_",value:function(){if(this._points=null,arguments.length!==0){if(arguments.length===2){var c=arguments[0],y=arguments[1];oe.constructor_.call(this,y),this.init(c)}}}}])}(oe),ut=a(function b(){r(this,b)}),jt=function(b){function u(){var c;return r(this,u),c=i(this,u),u.constructor_.apply(c,arguments),c}return m(u,b),a(u,[{key:"computeEnvelopeInternal",value:function(){if(this.isEmpty())return new _e;var c=new _e;return c.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),c}},{key:"getCoordinates",value:function(){return this.isEmpty()?[]:[this.getCoordinate()]}},{key:"copyInternal",value:function(){return new u(this._coordinates.copy(),this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof oe){var c=arguments[0],y=arguments[1];return!!this.isEquivalentClass(c)&&(!(!this.isEmpty()||!c.isEmpty())||this.isEmpty()===c.isEmpty()&&this.equal(c.getCoordinate(),this.getCoordinate(),y))}return w(u,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){}},{key:"getCoordinate",value:function(){return this._coordinates.size()!==0?this._coordinates.getCoordinate(0):null}},{key:"getBoundaryDimension",value:function(){return gt.FALSE}},{key:"reverseInternal",value:function(){return this.getFactory().createPoint(this._coordinates.copy())}},{key:"getTypeCode",value:function(){return oe.TYPECODE_POINT}},{key:"getDimension",value:function(){return 0}},{key:"getNumPoints",value:function(){return this.isEmpty()?0:1}},{key:"getX",value:function(){if(this.getCoordinate()===null)throw new IllegalStateException("getX called on empty Point");return this.getCoordinate().x}},{key:"compareToSameClass",value:function(){if(arguments.length===1){var c=arguments[0];return this.getCoordinate().compareTo(c.getCoordinate())}if(arguments.length===2){var y=arguments[0];return arguments[1].compare(this._coordinates,y._coordinates)}}},{key:"apply",value:function(){if(Ve(arguments[0],Ye)){var c=arguments[0];if(this.isEmpty())return null;c.filter(this.getCoordinate())}else if(Ve(arguments[0],St)){var y=arguments[0];if(this.isEmpty())return null;y.filter(this._coordinates,0),y.isGeometryChanged()&&this.geometryChanged()}else Ve(arguments[0],it)?arguments[0].filter(this):Ve(arguments[0],F)&&arguments[0].filter(this)}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return oe.TYPENAME_POINT}},{key:"getCoordinateSequence",value:function(){return this._coordinates}},{key:"getY",value:function(){if(this.getCoordinate()===null)throw new IllegalStateException("getY called on empty Point");return this.getCoordinate().y}},{key:"isEmpty",value:function(){return this._coordinates.size()===0}},{key:"init",value:function(c){c===null&&(c=this.getFactory().getCoordinateSequenceFactory().create([])),be.isTrue(c.size()<=1),this._coordinates=c}},{key:"isSimple",value:function(){return!0}},{key:"interfaces_",get:function(){return[ut]}}],[{key:"constructor_",value:function(){this._coordinates=null;var c=arguments[0],y=arguments[1];oe.constructor_.call(this,y),this.init(c)}}])}(oe),gn=function(){function b(){r(this,b)}return a(b,null,[{key:"ofRing",value:function(){if(arguments[0]instanceof Array){var u=arguments[0];return Math.abs(b.ofRingSigned(u))}if(Ve(arguments[0],rt)){var c=arguments[0];return Math.abs(b.ofRingSigned(c))}}},{key:"ofRingSigned",value:function(){if(arguments[0]instanceof Array){var u=arguments[0];if(u.length<3)return 0;for(var c=0,y=u[0].x,N=1;N<u.length-1;N++){var z=u[N].x-y,se=u[N+1].y;c+=z*(u[N-1].y-se)}return c/2}if(Ve(arguments[0],rt)){var ve=arguments[0],Le=ve.size();if(Le<3)return 0;var xe=new X,Xe=new X,ct=new X;ve.getCoordinate(0,Xe),ve.getCoordinate(1,ct);var Lt=Xe.x;ct.x-=Lt;for(var Ht=0,on=1;on<Le-1;on++)xe.y=Xe.y,Xe.x=ct.x,Xe.y=ct.y,ve.getCoordinate(on+1,ct),ct.x-=Lt,Ht+=Xe.x*(xe.y-ct.y);return Ht/2}}}])}(),Be=function(){return a(function b(){r(this,b)},null,[{key:"sort",value:function(){var b=arguments,u=arguments[0];if(arguments.length===1)u.sort(function(Lt,Ht){return Lt.compareTo(Ht)});else if(arguments.length===2)u.sort(function(Lt,Ht){return b[1].compare(Lt,Ht)});else if(arguments.length===3){var c=u.slice(arguments[1],arguments[2]);c.sort();var y=u.slice(0,arguments[1]).concat(c,u.slice(arguments[2],u.length));u.splice(0,u.length);var N,z=l(y);try{for(z.s();!(N=z.n()).done;){var se=N.value;u.push(se)}}catch(Lt){z.e(Lt)}finally{z.f()}}else if(arguments.length===4){var ve=u.slice(arguments[1],arguments[2]);ve.sort(function(Lt,Ht){return b[3].compare(Lt,Ht)});var Le=u.slice(0,arguments[1]).concat(ve,u.slice(arguments[2],u.length));u.splice(0,u.length);var xe,Xe=l(Le);try{for(Xe.s();!(xe=Xe.n()).done;){var ct=xe.value;u.push(ct)}}catch(Lt){Xe.e(Lt)}finally{Xe.f()}}}},{key:"asList",value:function(b){var u,c=new mt,y=l(b);try{for(y.s();!(u=y.n()).done;){var N=u.value;c.add(N)}}catch(z){y.e(z)}finally{y.f()}return c}},{key:"copyOf",value:function(b,u){return b.slice(0,u)}}])}(),tt=a(function b(){r(this,b)}),en=function(b){function u(){var c;return r(this,u),c=i(this,u),u.constructor_.apply(c,arguments),c}return m(u,b),a(u,[{key:"computeEnvelopeInternal",value:function(){return this._shell.getEnvelopeInternal()}},{key:"getCoordinates",value:function(){if(this.isEmpty())return[];for(var c=new Array(this.getNumPoints()).fill(null),y=-1,N=this._shell.getCoordinates(),z=0;z<N.length;z++)c[++y]=N[z];for(var se=0;se<this._holes.length;se++)for(var ve=this._holes[se].getCoordinates(),Le=0;Le<ve.length;Le++)c[++y]=ve[Le];return c}},{key:"getArea",value:function(){var c=0;c+=gn.ofRing(this._shell.getCoordinateSequence());for(var y=0;y<this._holes.length;y++)c-=gn.ofRing(this._holes[y].getCoordinateSequence());return c}},{key:"copyInternal",value:function(){for(var c=this._shell.copy(),y=new Array(this._holes.length).fill(null),N=0;N<this._holes.length;N++)y[N]=this._holes[N].copy();return new u(c,y,this._factory)}},{key:"isRectangle",value:function(){if(this.getNumInteriorRing()!==0||this._shell===null||this._shell.getNumPoints()!==5)return!1;for(var c=this._shell.getCoordinateSequence(),y=this.getEnvelopeInternal(),N=0;N<5;N++){var z=c.getX(N);if(z!==y.getMinX()&&z!==y.getMaxX())return!1;var se=c.getY(N);if(se!==y.getMinY()&&se!==y.getMaxY())return!1}for(var ve=c.getX(0),Le=c.getY(0),xe=1;xe<=4;xe++){var Xe=c.getX(xe),ct=c.getY(xe);if(Xe!==ve==(ct!==Le))return!1;ve=Xe,Le=ct}return!0}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof oe){var c=arguments[0],y=arguments[1];if(!this.isEquivalentClass(c))return!1;var N=c,z=this._shell,se=N._shell;if(!z.equalsExact(se,y)||this._holes.length!==N._holes.length)return!1;for(var ve=0;ve<this._holes.length;ve++)if(!this._holes[ve].equalsExact(N._holes[ve],y))return!1;return!0}return w(u,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){if(arguments.length===0){this._shell=this.normalized(this._shell,!0);for(var c=0;c<this._holes.length;c++)this._holes[c]=this.normalized(this._holes[c],!1);Be.sort(this._holes)}else if(arguments.length===2){var y=arguments[0],N=arguments[1];if(y.isEmpty())return null;var z=y.getCoordinateSequence(),se=Rt.minCoordinateIndex(z,0,z.size()-2);Rt.scroll(z,se,!0),ft.isCCW(z)===N&&Rt.reverse(z)}}},{key:"getCoordinate",value:function(){return this._shell.getCoordinate()}},{key:"getNumInteriorRing",value:function(){return this._holes.length}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"reverseInternal",value:function(){for(var c=this.getExteriorRing().reverse(),y=new Array(this.getNumInteriorRing()).fill(null),N=0;N<y.length;N++)y[N]=this.getInteriorRingN(N).reverse();return this.getFactory().createPolygon(c,y)}},{key:"getTypeCode",value:function(){return oe.TYPECODE_POLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getLength",value:function(){var c=0;c+=this._shell.getLength();for(var y=0;y<this._holes.length;y++)c+=this._holes[y].getLength();return c}},{key:"getNumPoints",value:function(){for(var c=this._shell.getNumPoints(),y=0;y<this._holes.length;y++)c+=this._holes[y].getNumPoints();return c}},{key:"convexHull",value:function(){return this.getExteriorRing().convexHull()}},{key:"normalized",value:function(c,y){var N=c.copy();return this.normalize(N,y),N}},{key:"compareToSameClass",value:function(){if(arguments.length===1){var c=arguments[0],y=this._shell,N=c._shell;return y.compareToSameClass(N)}if(arguments.length===2){var z=arguments[1],se=arguments[0],ve=this._shell,Le=se._shell,xe=ve.compareToSameClass(Le,z);if(xe!==0)return xe;for(var Xe=this.getNumInteriorRing(),ct=se.getNumInteriorRing(),Lt=0;Lt<Xe&&Lt<ct;){var Ht=this.getInteriorRingN(Lt),on=se.getInteriorRingN(Lt),hn=Ht.compareToSameClass(on,z);if(hn!==0)return hn;Lt++}return Lt<Xe?1:Lt<ct?-1:0}}},{key:"apply",value:function(){if(Ve(arguments[0],Ye)){var c=arguments[0];this._shell.apply(c);for(var y=0;y<this._holes.length;y++)this._holes[y].apply(c)}else if(Ve(arguments[0],St)){var N=arguments[0];if(this._shell.apply(N),!N.isDone())for(var z=0;z<this._holes.length&&(this._holes[z].apply(N),!N.isDone());z++);N.isGeometryChanged()&&this.geometryChanged()}else if(Ve(arguments[0],it))arguments[0].filter(this);else if(Ve(arguments[0],F)){var se=arguments[0];se.filter(this),this._shell.apply(se);for(var ve=0;ve<this._holes.length;ve++)this._holes[ve].apply(se)}}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var c=new Array(this._holes.length+1).fill(null);c[0]=this._shell;for(var y=0;y<this._holes.length;y++)c[y+1]=this._holes[y];return c.length<=1?this.getFactory().createLinearRing(c[0].getCoordinateSequence()):this.getFactory().createMultiLineString(c)}},{key:"getGeometryType",value:function(){return oe.TYPENAME_POLYGON}},{key:"getExteriorRing",value:function(){return this._shell}},{key:"isEmpty",value:function(){return this._shell.isEmpty()}},{key:"getInteriorRingN",value:function(c){return this._holes[c]}},{key:"interfaces_",get:function(){return[tt]}}],[{key:"constructor_",value:function(){this._shell=null,this._holes=null;var c=arguments[0],y=arguments[1],N=arguments[2];if(oe.constructor_.call(this,N),c===null&&(c=this.getFactory().createLinearRing()),y===null&&(y=[]),oe.hasNullElements(y))throw new P("holes must not contain null elements");if(c.isEmpty()&&oe.hasNonEmptyElements(y))throw new P("shell is empty but holes are not");this._shell=c,this._holes=y}}])}(oe),Fn=function(b){function u(){return r(this,u),i(this,u,arguments)}return m(u,b),a(u)}(Te),Vn=function(b){function u(c){var y;return r(this,u),(y=i(this,u)).array=[],c instanceof Se&&y.addAll(c),y}return m(u,b),a(u,[{key:"contains",value:function(c){var y,N=l(this.array);try{for(N.s();!(y=N.n()).done;)if(y.value.compareTo(c)===0)return!0}catch(z){N.e(z)}finally{N.f()}return!1}},{key:"add",value:function(c){if(this.contains(c))return!1;for(var y=0,N=this.array.length;y<N;y++)if(this.array[y].compareTo(c)===1)return!!this.array.splice(y,0,c);return this.array.push(c),!0}},{key:"addAll",value:function(c){var y,N=l(c);try{for(N.s();!(y=N.n()).done;){var z=y.value;this.add(z)}}catch(se){N.e(se)}finally{N.f()}return!0}},{key:"remove",value:function(){throw new we}},{key:"size",value:function(){return this.array.length}},{key:"isEmpty",value:function(){return this.array.length===0}},{key:"toArray",value:function(){return this.array.slice()}},{key:"iterator",value:function(){return new Zt(this.array)}}])}(Fn),Zt=function(){return a(function b(u){r(this,b),this.array=u,this.position=0},[{key:"next",value:function(){if(this.position===this.array.length)throw new Me;return this.array[this.position++]}},{key:"hasNext",value:function(){return this.position<this.array.length}},{key:"remove",value:function(){throw new we}}])}(),cn=function(b){function u(){var c;return r(this,u),c=i(this,u),u.constructor_.apply(c,arguments),c}return m(u,b),a(u,[{key:"computeEnvelopeInternal",value:function(){for(var c=new _e,y=0;y<this._geometries.length;y++)c.expandToInclude(this._geometries[y].getEnvelopeInternal());return c}},{key:"getGeometryN",value:function(c){return this._geometries[c]}},{key:"getCoordinates",value:function(){for(var c=new Array(this.getNumPoints()).fill(null),y=-1,N=0;N<this._geometries.length;N++)for(var z=this._geometries[N].getCoordinates(),se=0;se<z.length;se++)c[++y]=z[se];return c}},{key:"getArea",value:function(){for(var c=0,y=0;y<this._geometries.length;y++)c+=this._geometries[y].getArea();return c}},{key:"copyInternal",value:function(){for(var c=new Array(this._geometries.length).fill(null),y=0;y<c.length;y++)c[y]=this._geometries[y].copy();return new u(c,this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof oe){var c=arguments[0],y=arguments[1];if(!this.isEquivalentClass(c))return!1;var N=c;if(this._geometries.length!==N._geometries.length)return!1;for(var z=0;z<this._geometries.length;z++)if(!this._geometries[z].equalsExact(N._geometries[z],y))return!1;return!0}return w(u,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){for(var c=0;c<this._geometries.length;c++)this._geometries[c].normalize();Be.sort(this._geometries)}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()}},{key:"getBoundaryDimension",value:function(){for(var c=gt.FALSE,y=0;y<this._geometries.length;y++)c=Math.max(c,this._geometries[y].getBoundaryDimension());return c}},{key:"reverseInternal",value:function(){for(var c=this._geometries.length,y=new mt(c),N=0;N<c;N++)y.add(this._geometries[N].reverse());return this.getFactory().buildGeometry(y)}},{key:"getTypeCode",value:function(){return oe.TYPECODE_GEOMETRYCOLLECTION}},{key:"getDimension",value:function(){for(var c=gt.FALSE,y=0;y<this._geometries.length;y++)c=Math.max(c,this._geometries[y].getDimension());return c}},{key:"getLength",value:function(){for(var c=0,y=0;y<this._geometries.length;y++)c+=this._geometries[y].getLength();return c}},{key:"getNumPoints",value:function(){for(var c=0,y=0;y<this._geometries.length;y++)c+=this._geometries[y].getNumPoints();return c}},{key:"getNumGeometries",value:function(){return this._geometries.length}},{key:"compareToSameClass",value:function(){if(arguments.length===1){var c=arguments[0],y=new Vn(Be.asList(this._geometries)),N=new Vn(Be.asList(c._geometries));return this.compare(y,N)}if(arguments.length===2){for(var z=arguments[1],se=arguments[0],ve=this.getNumGeometries(),Le=se.getNumGeometries(),xe=0;xe<ve&&xe<Le;){var Xe=this.getGeometryN(xe),ct=se.getGeometryN(xe),Lt=Xe.compareToSameClass(ct,z);if(Lt!==0)return Lt;xe++}return xe<ve?1:xe<Le?-1:0}}},{key:"apply",value:function(){if(Ve(arguments[0],Ye))for(var c=arguments[0],y=0;y<this._geometries.length;y++)this._geometries[y].apply(c);else if(Ve(arguments[0],St)){var N=arguments[0];if(this._geometries.length===0)return null;for(var z=0;z<this._geometries.length&&(this._geometries[z].apply(N),!N.isDone());z++);N.isGeometryChanged()&&this.geometryChanged()}else if(Ve(arguments[0],it)){var se=arguments[0];se.filter(this);for(var ve=0;ve<this._geometries.length;ve++)this._geometries[ve].apply(se)}else if(Ve(arguments[0],F)){var Le=arguments[0];Le.filter(this);for(var xe=0;xe<this._geometries.length;xe++)this._geometries[xe].apply(Le)}}},{key:"getBoundary",value:function(){return oe.checkNotGeometryCollection(this),be.shouldNeverReachHere(),null}},{key:"getGeometryType",value:function(){return oe.TYPENAME_GEOMETRYCOLLECTION}},{key:"isEmpty",value:function(){for(var c=0;c<this._geometries.length;c++)if(!this._geometries[c].isEmpty())return!1;return!0}}],[{key:"constructor_",value:function(){if(this._geometries=null,arguments.length!==0){if(arguments.length===2){var c=arguments[0],y=arguments[1];if(oe.constructor_.call(this,y),c===null&&(c=[]),oe.hasNullElements(c))throw new P("geometries must not contain null elements");this._geometries=c}}}}])}(oe),Un=function(b){function u(){var c;return r(this,u),c=i(this,u),u.constructor_.apply(c,arguments),c}return m(u,b),a(u,[{key:"copyInternal",value:function(){for(var c=new Array(this._geometries.length).fill(null),y=0;y<c.length;y++)c[y]=this._geometries[y].copy();return new u(c,this._factory)}},{key:"isValid",value:function(){return!0}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof oe){var c=arguments[0],y=arguments[1];return!!this.isEquivalentClass(c)&&w(u,"equalsExact",this,1).call(this,c,y)}return w(u,"equalsExact",this,1).apply(this,arguments)}},{key:"getCoordinate",value:function(){if(arguments.length===1&&Number.isInteger(arguments[0])){var c=arguments[0];return this._geometries[c].getCoordinate()}return w(u,"getCoordinate",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return gt.FALSE}},{key:"getTypeCode",value:function(){return oe.TYPECODE_MULTIPOINT}},{key:"getDimension",value:function(){return 0}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return oe.TYPENAME_MULTIPOINT}},{key:"interfaces_",get:function(){return[ut]}}],[{key:"constructor_",value:function(){var c=arguments[0],y=arguments[1];cn.constructor_.call(this,c,y)}}])}(cn),mn=function(b){function u(){var c;return r(this,u),c=i(this,u),u.constructor_.apply(c,arguments),c}return m(u,b),a(u,[{key:"copyInternal",value:function(){return new u(this._points.copy(),this._factory)}},{key:"getBoundaryDimension",value:function(){return gt.FALSE}},{key:"isClosed",value:function(){return!!this.isEmpty()||w(u,"isClosed",this,1).call(this)}},{key:"reverseInternal",value:function(){var c=this._points.copy();return Rt.reverse(c),this.getFactory().createLinearRing(c)}},{key:"getTypeCode",value:function(){return oe.TYPECODE_LINEARRING}},{key:"validateConstruction",value:function(){if(!this.isEmpty()&&!w(u,"isClosed",this,1).call(this))throw new P("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<u.MINIMUM_VALID_SIZE)throw new P("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")}},{key:"getGeometryType",value:function(){return oe.TYPENAME_LINEARRING}}],[{key:"constructor_",value:function(){var c=arguments[0],y=arguments[1];Jt.constructor_.call(this,c,y),this.validateConstruction()}}])}(Jt);mn.MINIMUM_VALID_SIZE=4;var tn=function(b){function u(){var c;return r(this,u),c=i(this,u),u.constructor_.apply(c,arguments),c}return m(u,b),a(u,[{key:"setOrdinate",value:function(c,y){switch(c){case u.X:this.x=y;break;case u.Y:this.y=y;break;default:throw new P("Invalid ordinate index: "+c)}}},{key:"getZ",value:function(){return X.NULL_ORDINATE}},{key:"getOrdinate",value:function(c){switch(c){case u.X:return this.x;case u.Y:return this.y}throw new P("Invalid ordinate index: "+c)}},{key:"setZ",value:function(c){throw new P("CoordinateXY dimension 2 does not support z-ordinate")}},{key:"copy",value:function(){return new u(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+")"}},{key:"setCoordinate",value:function(c){this.x=c.x,this.y=c.y,this.z=c.getZ()}}],[{key:"constructor_",value:function(){if(arguments.length===0)X.constructor_.call(this);else if(arguments.length===1){if(arguments[0]instanceof u){var c=arguments[0];X.constructor_.call(this,c.x,c.y)}else if(arguments[0]instanceof X){var y=arguments[0];X.constructor_.call(this,y.x,y.y)}}else if(arguments.length===2){var N=arguments[0],z=arguments[1];X.constructor_.call(this,N,z,X.NULL_ORDINATE)}}}])}(X);tn.X=0,tn.Y=1,tn.Z=-1,tn.M=-1;var En=function(b){function u(){var c;return r(this,u),c=i(this,u),u.constructor_.apply(c,arguments),c}return m(u,b),a(u,[{key:"getM",value:function(){return this._m}},{key:"setOrdinate",value:function(c,y){switch(c){case u.X:this.x=y;break;case u.Y:this.y=y;break;case u.M:this._m=y;break;default:throw new P("Invalid ordinate index: "+c)}}},{key:"setM",value:function(c){this._m=c}},{key:"getZ",value:function(){return X.NULL_ORDINATE}},{key:"getOrdinate",value:function(c){switch(c){case u.X:return this.x;case u.Y:return this.y;case u.M:return this._m}throw new P("Invalid ordinate index: "+c)}},{key:"setZ",value:function(c){throw new P("CoordinateXY dimension 2 does not support z-ordinate")}},{key:"copy",value:function(){return new u(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+" m="+this.getM()+")"}},{key:"setCoordinate",value:function(c){this.x=c.x,this.y=c.y,this.z=c.getZ(),this._m=c.getM()}}],[{key:"constructor_",value:function(){if(this._m=null,arguments.length===0)X.constructor_.call(this),this._m=0;else if(arguments.length===1){if(arguments[0]instanceof u){var c=arguments[0];X.constructor_.call(this,c.x,c.y),this._m=c._m}else if(arguments[0]instanceof X){var y=arguments[0];X.constructor_.call(this,y.x,y.y),this._m=this.getM()}}else if(arguments.length===3){var N=arguments[0],z=arguments[1],se=arguments[2];X.constructor_.call(this,N,z,X.NULL_ORDINATE),this._m=se}}}])}(X);En.X=0,En.Y=1,En.Z=-1,En.M=2;var Ln=function(b){function u(){var c;return r(this,u),c=i(this,u),u.constructor_.apply(c,arguments),c}return m(u,b),a(u,[{key:"getM",value:function(){return this._m}},{key:"setOrdinate",value:function(c,y){switch(c){case X.X:this.x=y;break;case X.Y:this.y=y;break;case X.Z:this.z=y;break;case X.M:this._m=y;break;default:throw new P("Invalid ordinate index: "+c)}}},{key:"setM",value:function(c){this._m=c}},{key:"getOrdinate",value:function(c){switch(c){case X.X:return this.x;case X.Y:return this.y;case X.Z:return this.getZ();case X.M:return this.getM()}throw new P("Invalid ordinate index: "+c)}},{key:"copy",value:function(){return new u(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.getZ()+" m="+this.getM()+")"}},{key:"setCoordinate",value:function(c){this.x=c.x,this.y=c.y,this.z=c.getZ(),this._m=c.getM()}}],[{key:"constructor_",value:function(){if(this._m=null,arguments.length===0)X.constructor_.call(this),this._m=0;else if(arguments.length===1){if(arguments[0]instanceof u){var c=arguments[0];X.constructor_.call(this,c),this._m=c._m}else if(arguments[0]instanceof X){var y=arguments[0];X.constructor_.call(this,y),this._m=this.getM()}}else if(arguments.length===4){var N=arguments[0],z=arguments[1],se=arguments[2],ve=arguments[3];X.constructor_.call(this,N,z,se),this._m=ve}}}])}(X),xt=function(){function b(){r(this,b)}return a(b,null,[{key:"measures",value:function(u){return u instanceof tn?0:u instanceof En||u instanceof Ln?1:0}},{key:"dimension",value:function(u){return u instanceof tn?2:u instanceof En?3:u instanceof Ln?4:3}},{key:"create",value:function(){if(arguments.length===1){var u=arguments[0];return b.create(u,0)}if(arguments.length===2){var c=arguments[0],y=arguments[1];return c===2?new tn:c===3&&y===0?new X:c===3&&y===1?new En:c===4&&y===1?new Ln:new X}}}])}(),qe=function(b){function u(){var c;return r(this,u),c=i(this,u),u.constructor_.apply(c,arguments),c}return m(u,b),a(u,[{key:"getCoordinate",value:function(c){return this.get(c)}},{key:"addAll",value:function(){if(arguments.length===2&&typeof arguments[1]=="boolean"&&Ve(arguments[0],Se)){for(var c=arguments[1],y=!1,N=arguments[0].iterator();N.hasNext();)this.add(N.next(),c),y=!0;return y}return w(u,"addAll",this,1).apply(this,arguments)}},{key:"clone",value:function(){for(var c=w(u,"clone",this,1).call(this),y=0;y<this.size();y++)c.add(y,this.get(y).clone());return c}},{key:"toCoordinateArray",value:function(){if(arguments.length===0)return this.toArray(u.coordArrayType);if(arguments.length===1){if(arguments[0])return this.toArray(u.coordArrayType);for(var c=this.size(),y=new Array(c).fill(null),N=0;N<c;N++)y[N]=this.get(c-N-1);return y}}},{key:"add",value:function(){if(arguments.length===1){var c=arguments[0];return w(u,"add",this,1).call(this,c)}if(arguments.length===2){if(arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var y=arguments[0],N=arguments[1];return this.add(y,N,!0),!0}if(arguments[0]instanceof X&&typeof arguments[1]=="boolean"){var z=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(z))return null;w(u,"add",this,1).call(this,z)}else if(arguments[0]instanceof Object&&typeof arguments[1]=="boolean"){var se=arguments[0],ve=arguments[1];return this.add(se,ve),!0}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var Le=arguments[0],xe=arguments[1];if(arguments[2])for(var Xe=0;Xe<Le.length;Xe++)this.add(Le[Xe],xe);else for(var ct=Le.length-1;ct>=0;ct--)this.add(Le[ct],xe);return!0}if(typeof arguments[2]=="boolean"&&Number.isInteger(arguments[0])&&arguments[1]instanceof X){var Lt=arguments[0],Ht=arguments[1];if(!arguments[2]){var on=this.size();if(on>0&&(Lt>0&&this.get(Lt-1).equals2D(Ht)||Lt<on&&this.get(Lt).equals2D(Ht)))return null}w(u,"add",this,1).call(this,Lt,Ht)}}else if(arguments.length===4){var hn=arguments[0],Wn=arguments[1],xn=arguments[2],hi=arguments[3],vi=1;xn>hi&&(vi=-1);for(var Vi=xn;Vi!==hi;Vi+=vi)this.add(hn[Vi],Wn);return!0}}},{key:"closeRing",value:function(){if(this.size()>0){var c=this.get(0).copy();this.add(c,!1)}}}],[{key:"constructor_",value:function(){if(arguments.length!==0){if(arguments.length===1){var c=arguments[0];this.ensureCapacity(c.length),this.add(c,!0)}else if(arguments.length===2){var y=arguments[0],N=arguments[1];this.ensureCapacity(y.length),this.add(y,N)}}}}])}(mt);qe.coordArrayType=new Array(0).fill(null);var kt=function(){function b(){r(this,b)}return a(b,null,[{key:"isRing",value:function(u){return!(u.length<4)&&!!u[0].equals2D(u[u.length-1])}},{key:"ptNotInList",value:function(u,c){for(var y=0;y<u.length;y++){var N=u[y];if(b.indexOf(N,c)<0)return N}return null}},{key:"scroll",value:function(u,c){var y=b.indexOf(c,u);if(y<0)return null;var N=new Array(u.length).fill(null);$t.arraycopy(u,y,N,0,u.length-y),$t.arraycopy(u,0,N,u.length-y,y),$t.arraycopy(N,0,u,0,u.length)}},{key:"equals",value:function(){if(arguments.length===2){var u=arguments[0],c=arguments[1];if(u===c)return!0;if(u===null||c===null||u.length!==c.length)return!1;for(var y=0;y<u.length;y++)if(!u[y].equals(c[y]))return!1;return!0}if(arguments.length===3){var N=arguments[0],z=arguments[1],se=arguments[2];if(N===z)return!0;if(N===null||z===null||N.length!==z.length)return!1;for(var ve=0;ve<N.length;ve++)if(se.compare(N[ve],z[ve])!==0)return!1;return!0}}},{key:"intersection",value:function(u,c){for(var y=new qe,N=0;N<u.length;N++)c.intersects(u[N])&&y.add(u[N],!0);return y.toCoordinateArray()}},{key:"measures",value:function(u){if(u===null||u.length===0)return 0;var c,y=0,N=l(u);try{for(N.s();!(c=N.n()).done;){var z=c.value;y=Math.max(y,xt.measures(z))}}catch(se){N.e(se)}finally{N.f()}return y}},{key:"hasRepeatedPoints",value:function(u){for(var c=1;c<u.length;c++)if(u[c-1].equals(u[c]))return!0;return!1}},{key:"removeRepeatedPoints",value:function(u){return b.hasRepeatedPoints(u)?new qe(u,!1).toCoordinateArray():u}},{key:"reverse",value:function(u){for(var c=u.length-1,y=Math.trunc(c/2),N=0;N<=y;N++){var z=u[N];u[N]=u[c-N],u[c-N]=z}}},{key:"removeNull",value:function(u){for(var c=0,y=0;y<u.length;y++)u[y]!==null&&c++;var N=new Array(c).fill(null);if(c===0)return N;for(var z=0,se=0;se<u.length;se++)u[se]!==null&&(N[z++]=u[se]);return N}},{key:"copyDeep",value:function(){if(arguments.length===1){for(var u=arguments[0],c=new Array(u.length).fill(null),y=0;y<u.length;y++)c[y]=u[y].copy();return c}if(arguments.length===5)for(var N=arguments[0],z=arguments[1],se=arguments[2],ve=arguments[3],Le=arguments[4],xe=0;xe<Le;xe++)se[ve+xe]=N[z+xe].copy()}},{key:"isEqualReversed",value:function(u,c){for(var y=0;y<u.length;y++){var N=u[y],z=c[u.length-y-1];if(N.compareTo(z)!==0)return!1}return!0}},{key:"envelope",value:function(u){for(var c=new _e,y=0;y<u.length;y++)c.expandToInclude(u[y]);return c}},{key:"toCoordinateArray",value:function(u){return u.toArray(b.coordArrayType)}},{key:"dimension",value:function(u){if(u===null||u.length===0)return 3;var c,y=0,N=l(u);try{for(N.s();!(c=N.n()).done;){var z=c.value;y=Math.max(y,xt.dimension(z))}}catch(se){N.e(se)}finally{N.f()}return y}},{key:"atLeastNCoordinatesOrNothing",value:function(u,c){return c.length>=u?c:[]}},{key:"indexOf",value:function(u,c){for(var y=0;y<c.length;y++)if(u.equals(c[y]))return y;return-1}},{key:"increasingDirection",value:function(u){for(var c=0;c<Math.trunc(u.length/2);c++){var y=u.length-1-c,N=u[c].compareTo(u[y]);if(N!==0)return N}return 1}},{key:"compare",value:function(u,c){for(var y=0;y<u.length&&y<c.length;){var N=u[y].compareTo(c[y]);if(N!==0)return N;y++}return y<c.length?-1:y<u.length?1:0}},{key:"minCoordinate",value:function(u){for(var c=null,y=0;y<u.length;y++)(c===null||c.compareTo(u[y])>0)&&(c=u[y]);return c}},{key:"extract",value:function(u,c,y){c=dn.clamp(c,0,u.length);var N=(y=dn.clamp(y,-1,u.length))-c+1;y<0&&(N=0),c>=u.length&&(N=0),y<c&&(N=0);var z=new Array(N).fill(null);if(N===0)return z;for(var se=0,ve=c;ve<=y;ve++)z[se++]=u[ve];return z}}])}(),Gt=function(){return a(function b(){r(this,b)},[{key:"compare",value:function(b,u){var c=b,y=u;return kt.compare(c,y)}},{key:"interfaces_",get:function(){return[le]}}])}(),Je=function(){return a(function b(){r(this,b)},[{key:"compare",value:function(b,u){var c=b,y=u;if(c.length<y.length)return-1;if(c.length>y.length)return 1;if(c.length===0)return 0;var N=kt.compare(c,y);return kt.isEqualReversed(c,y)?0:N}},{key:"OLDcompare",value:function(b,u){var c=b,y=u;if(c.length<y.length)return-1;if(c.length>y.length)return 1;if(c.length===0)return 0;for(var N=kt.increasingDirection(c),z=kt.increasingDirection(y),se=N>0?0:c.length-1,ve=z>0?0:c.length-1,Le=0;Le<c.length;Le++){var xe=c[se].compareTo(y[ve]);if(xe!==0)return xe;se+=N,ve+=z}return 0}},{key:"interfaces_",get:function(){return[le]}}])}();kt.ForwardComparator=Gt,kt.BidirectionalComparator=Je,kt.coordArrayType=new Array(0).fill(null);var It=function(){return a(function b(u){r(this,b),this.str=u},[{key:"append",value:function(b){this.str+=b}},{key:"setCharAt",value:function(b,u){this.str=this.str.substr(0,b)+u+this.str.substr(b+1)}},{key:"toString",value:function(){return this.str}}])}(),wn=function(){function b(){r(this,b),b.constructor_.apply(this,arguments)}return a(b,[{key:"getM",value:function(u){return this.hasM()?this._coordinates[u].getM():ie.NaN}},{key:"setOrdinate",value:function(u,c,y){switch(c){case rt.X:this._coordinates[u].x=y;break;case rt.Y:this._coordinates[u].y=y;break;default:this._coordinates[u].setOrdinate(c,y)}}},{key:"getZ",value:function(u){return this.hasZ()?this._coordinates[u].getZ():ie.NaN}},{key:"size",value:function(){return this._coordinates.length}},{key:"getOrdinate",value:function(u,c){switch(c){case rt.X:return this._coordinates[u].x;case rt.Y:return this._coordinates[u].y;default:return this._coordinates[u].getOrdinate(c)}}},{key:"getCoordinate",value:function(){if(arguments.length===1){var u=arguments[0];return this._coordinates[u]}if(arguments.length===2){var c=arguments[0];arguments[1].setCoordinate(this._coordinates[c])}}},{key:"getCoordinateCopy",value:function(u){var c=this.createCoordinate();return c.setCoordinate(this._coordinates[u]),c}},{key:"createCoordinate",value:function(){return xt.create(this.getDimension(),this.getMeasures())}},{key:"getDimension",value:function(){return this._dimension}},{key:"getX",value:function(u){return this._coordinates[u].x}},{key:"getMeasures",value:function(){return this._measures}},{key:"expandEnvelope",value:function(u){for(var c=0;c<this._coordinates.length;c++)u.expandToInclude(this._coordinates[c]);return u}},{key:"copy",value:function(){for(var u=new Array(this.size()).fill(null),c=0;c<this._coordinates.length;c++){var y=this.createCoordinate();y.setCoordinate(this._coordinates[c]),u[c]=y}return new b(u,this._dimension,this._measures)}},{key:"toString",value:function(){if(this._coordinates.length>0){var u=new It(17*this._coordinates.length);u.append("("),u.append(this._coordinates[0]);for(var c=1;c<this._coordinates.length;c++)u.append(", "),u.append(this._coordinates[c]);return u.append(")"),u.toString()}return"()"}},{key:"getY",value:function(u){return this._coordinates[u].y}},{key:"toCoordinateArray",value:function(){return this._coordinates}},{key:"interfaces_",get:function(){return[rt,G]}}],[{key:"constructor_",value:function(){if(this._dimension=3,this._measures=0,this._coordinates=null,arguments.length===1){if(arguments[0]instanceof Array){var u=arguments[0];b.constructor_.call(this,u,kt.dimension(u),kt.measures(u))}else if(Number.isInteger(arguments[0])){var c=arguments[0];this._coordinates=new Array(c).fill(null);for(var y=0;y<c;y++)this._coordinates[y]=new X}else if(Ve(arguments[0],rt)){var N=arguments[0];if(N===null)return this._coordinates=new Array(0).fill(null),null;this._dimension=N.getDimension(),this._measures=N.getMeasures(),this._coordinates=new Array(N.size()).fill(null);for(var z=0;z<this._coordinates.length;z++)this._coordinates[z]=N.getCoordinateCopy(z)}}else if(arguments.length===2){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var se=arguments[0],ve=arguments[1];b.constructor_.call(this,se,ve,kt.measures(se))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var Le=arguments[0],xe=arguments[1];this._coordinates=new Array(Le).fill(null),this._dimension=xe;for(var Xe=0;Xe<Le;Xe++)this._coordinates[Xe]=xt.create(xe)}}else if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var ct=arguments[0],Lt=arguments[1],Ht=arguments[2];this._dimension=Lt,this._measures=Ht,this._coordinates=ct===null?new Array(0).fill(null):ct}else if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var on=arguments[0],hn=arguments[1],Wn=arguments[2];this._coordinates=new Array(on).fill(null),this._dimension=hn,this._measures=Wn;for(var xn=0;xn<on;xn++)this._coordinates[xn]=this.createCoordinate()}}}}])}(),Cn=function(){function b(){r(this,b)}return a(b,[{key:"readResolve",value:function(){return b.instance()}},{key:"create",value:function(){if(arguments.length===1){if(arguments[0]instanceof Array)return new wn(arguments[0]);if(Ve(arguments[0],rt))return new wn(arguments[0])}else{if(arguments.length===2){var u=arguments[1];return u>3&&(u=3),u<2&&(u=2),new wn(arguments[0],u)}if(arguments.length===3){var c=arguments[2],y=arguments[1]-c;return c>1&&(c=1),y>3&&(y=3),y<2&&(y=2),new wn(arguments[0],y+c,c)}}}},{key:"interfaces_",get:function(){return[pn,G]}}],[{key:"instance",value:function(){return b.instanceObject}}])}();Cn.instanceObject=new Cn;var oi=function(b){function u(){var c;return r(this,u),c=i(this,u),u.constructor_.apply(c,arguments),c}return m(u,b),a(u,[{key:"copyInternal",value:function(){for(var c=new Array(this._geometries.length).fill(null),y=0;y<c.length;y++)c[y]=this._geometries[y].copy();return new u(c,this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof oe){var c=arguments[0],y=arguments[1];return!!this.isEquivalentClass(c)&&w(u,"equalsExact",this,1).call(this,c,y)}return w(u,"equalsExact",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"getTypeCode",value:function(){return oe.TYPECODE_MULTIPOLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var c=new mt,y=0;y<this._geometries.length;y++)for(var N=this._geometries[y].getBoundary(),z=0;z<N.getNumGeometries();z++)c.add(N.getGeometryN(z));var se=new Array(c.size()).fill(null);return this.getFactory().createMultiLineString(c.toArray(se))}},{key:"getGeometryType",value:function(){return oe.TYPENAME_MULTIPOLYGON}},{key:"interfaces_",get:function(){return[tt]}}],[{key:"constructor_",value:function(){var c=arguments[0],y=arguments[1];cn.constructor_.call(this,c,y)}}])}(cn),ri=function(){return a(function b(){r(this,b)},[{key:"get",value:function(){}},{key:"put",value:function(){}},{key:"size",value:function(){}},{key:"values",value:function(){}},{key:"entrySet",value:function(){}}])}(),ci=function(b){function u(){var c;return r(this,u),(c=i(this,u)).map=new Map,c}return m(u,b),a(u,[{key:"get",value:function(c){return this.map.get(c)||null}},{key:"put",value:function(c,y){return this.map.set(c,y),y}},{key:"values",value:function(){for(var c=new mt,y=this.map.values(),N=y.next();!N.done;)c.add(N.value),N=y.next();return c}},{key:"entrySet",value:function(){var c=new Ae;return this.map.entries().forEach(function(y){return c.add(y)}),c}},{key:"size",value:function(){return this.map.size()}}])}(ri),vn=function(){function b(){r(this,b),b.constructor_.apply(this,arguments)}return a(b,[{key:"equals",value:function(u){if(!(u instanceof b))return!1;var c=u;return this._modelType===c._modelType&&this._scale===c._scale}},{key:"compareTo",value:function(u){var c=u,y=this.getMaximumSignificantDigits(),N=c.getMaximumSignificantDigits();return Ke.compare(y,N)}},{key:"getScale",value:function(){return this._scale}},{key:"isFloating",value:function(){return this._modelType===b.FLOATING||this._modelType===b.FLOATING_SINGLE}},{key:"getType",value:function(){return this._modelType}},{key:"toString",value:function(){var u="UNKNOWN";return this._modelType===b.FLOATING?u="Floating":this._modelType===b.FLOATING_SINGLE?u="Floating-Single":this._modelType===b.FIXED&&(u="Fixed (Scale="+this.getScale()+")"),u}},{key:"makePrecise",value:function(){if(typeof arguments[0]=="number"){var u=arguments[0];return ie.isNaN(u)||this._modelType===b.FLOATING_SINGLE?u:this._modelType===b.FIXED?Math.round(u*this._scale)/this._scale:u}if(arguments[0]instanceof X){var c=arguments[0];if(this._modelType===b.FLOATING)return null;c.x=this.makePrecise(c.x),c.y=this.makePrecise(c.y)}}},{key:"getMaximumSignificantDigits",value:function(){var u=16;return this._modelType===b.FLOATING?u=16:this._modelType===b.FLOATING_SINGLE?u=6:this._modelType===b.FIXED&&(u=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),u}},{key:"setScale",value:function(u){this._scale=Math.abs(u)}},{key:"interfaces_",get:function(){return[G,V]}}],[{key:"constructor_",value:function(){if(this._modelType=null,this._scale=null,arguments.length===0)this._modelType=b.FLOATING;else if(arguments.length===1){if(arguments[0]instanceof zn){var u=arguments[0];this._modelType=u,u===b.FIXED&&this.setScale(1)}else if(typeof arguments[0]=="number"){var c=arguments[0];this._modelType=b.FIXED,this.setScale(c)}else if(arguments[0]instanceof b){var y=arguments[0];this._modelType=y._modelType,this._scale=y._scale}}}},{key:"mostPrecise",value:function(u,c){return u.compareTo(c)>=0?u:c}}])}(),zn=function(){function b(){r(this,b),b.constructor_.apply(this,arguments)}return a(b,[{key:"readResolve",value:function(){return b.nameToTypeMap.get(this._name)}},{key:"toString",value:function(){return this._name}},{key:"interfaces_",get:function(){return[G]}}],[{key:"constructor_",value:function(){this._name=null;var u=arguments[0];this._name=u,b.nameToTypeMap.put(u,this)}}])}();zn.nameToTypeMap=new ci,vn.Type=zn,vn.FIXED=new zn("FIXED"),vn.FLOATING=new zn("FLOATING"),vn.FLOATING_SINGLE=new zn("FLOATING SINGLE"),vn.maximumPreciseValue=9007199254740992;var Mi=function(b){function u(){var c;return r(this,u),c=i(this,u),u.constructor_.apply(c,arguments),c}return m(u,b),a(u,[{key:"copyInternal",value:function(){for(var c=new Array(this._geometries.length).fill(null),y=0;y<c.length;y++)c[y]=this._geometries[y].copy();return new u(c,this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof oe){var c=arguments[0],y=arguments[1];return!!this.isEquivalentClass(c)&&w(u,"equalsExact",this,1).call(this,c,y)}return w(u,"equalsExact",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?gt.FALSE:0}},{key:"isClosed",value:function(){if(this.isEmpty())return!1;for(var c=0;c<this._geometries.length;c++)if(!this._geometries[c].isClosed())return!1;return!0}},{key:"getTypeCode",value:function(){return oe.TYPECODE_MULTILINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getBoundary",value:function(){throw new we}},{key:"getGeometryType",value:function(){return oe.TYPENAME_MULTILINESTRING}},{key:"interfaces_",get:function(){return[Mt]}}],[{key:"constructor_",value:function(){var c=arguments[0],y=arguments[1];cn.constructor_.call(this,c,y)}}])}(cn),wi=function(){function b(){r(this,b),b.constructor_.apply(this,arguments)}return a(b,[{key:"createEmpty",value:function(u){switch(u){case-1:return this.createGeometryCollection();case 0:return this.createPoint();case 1:return this.createLineString();case 2:return this.createPolygon();default:throw new P("Invalid dimension: "+u)}}},{key:"toGeometry",value:function(u){return u.isNull()?this.createPoint():u.getMinX()===u.getMaxX()&&u.getMinY()===u.getMaxY()?this.createPoint(new X(u.getMinX(),u.getMinY())):u.getMinX()===u.getMaxX()||u.getMinY()===u.getMaxY()?this.createLineString([new X(u.getMinX(),u.getMinY()),new X(u.getMaxX(),u.getMaxY())]):this.createPolygon(this.createLinearRing([new X(u.getMinX(),u.getMinY()),new X(u.getMinX(),u.getMaxY()),new X(u.getMaxX(),u.getMaxY()),new X(u.getMaxX(),u.getMinY()),new X(u.getMinX(),u.getMinY())]),null)}},{key:"createLineString",value:function(){if(arguments.length===0)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var u=arguments[0];return this.createLineString(u!==null?this.getCoordinateSequenceFactory().create(u):null)}if(Ve(arguments[0],rt))return new Jt(arguments[0],this)}}},{key:"createMultiLineString",value:function(){return arguments.length===0?new Mi(null,this):arguments.length===1?new Mi(arguments[0],this):void 0}},{key:"buildGeometry",value:function(u){for(var c=null,y=!1,N=!1,z=u.iterator();z.hasNext();){var se=z.next(),ve=se.getTypeCode();c===null&&(c=ve),ve!==c&&(y=!0),se instanceof cn&&(N=!0)}if(c===null)return this.createGeometryCollection();if(y||N)return this.createGeometryCollection(b.toGeometryArray(u));var Le=u.iterator().next();if(u.size()>1){if(Le instanceof en)return this.createMultiPolygon(b.toPolygonArray(u));if(Le instanceof Jt)return this.createMultiLineString(b.toLineStringArray(u));if(Le instanceof jt)return this.createMultiPoint(b.toPointArray(u));be.shouldNeverReachHere("Unhandled geometry type: "+Le.getGeometryType())}return Le}},{key:"createMultiPointFromCoords",value:function(u){return this.createMultiPoint(u!==null?this.getCoordinateSequenceFactory().create(u):null)}},{key:"createPoint",value:function(){if(arguments.length===0)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof X){var u=arguments[0];return this.createPoint(u!==null?this.getCoordinateSequenceFactory().create([u]):null)}if(Ve(arguments[0],rt))return new jt(arguments[0],this)}}},{key:"getCoordinateSequenceFactory",value:function(){return this._coordinateSequenceFactory}},{key:"createPolygon",value:function(){if(arguments.length===0)return this.createPolygon(null,null);if(arguments.length===1){if(Ve(arguments[0],rt)){var u=arguments[0];return this.createPolygon(this.createLinearRing(u))}if(arguments[0]instanceof Array){var c=arguments[0];return this.createPolygon(this.createLinearRing(c))}if(arguments[0]instanceof mn){var y=arguments[0];return this.createPolygon(y,null)}}else if(arguments.length===2)return new en(arguments[0],arguments[1],this)}},{key:"getSRID",value:function(){return this._SRID}},{key:"createGeometryCollection",value:function(){return arguments.length===0?new cn(null,this):arguments.length===1?new cn(arguments[0],this):void 0}},{key:"getPrecisionModel",value:function(){return this._precisionModel}},{key:"createLinearRing",value:function(){if(arguments.length===0)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var u=arguments[0];return this.createLinearRing(u!==null?this.getCoordinateSequenceFactory().create(u):null)}if(Ve(arguments[0],rt))return new mn(arguments[0],this)}}},{key:"createMultiPolygon",value:function(){return arguments.length===0?new oi(null,this):arguments.length===1?new oi(arguments[0],this):void 0}},{key:"createMultiPoint",value:function(){if(arguments.length===0)return new Un(null,this);if(arguments.length===1){if(arguments[0]instanceof Array)return new Un(arguments[0],this);if(Ve(arguments[0],rt)){var u=arguments[0];if(u===null)return this.createMultiPoint(new Array(0).fill(null));for(var c=new Array(u.size()).fill(null),y=0;y<u.size();y++){var N=this.getCoordinateSequenceFactory().create(1,u.getDimension(),u.getMeasures());Rt.copy(u,y,N,0,1),c[y]=this.createPoint(N)}return this.createMultiPoint(c)}}}},{key:"interfaces_",get:function(){return[G]}}],[{key:"constructor_",value:function(){if(this._precisionModel=null,this._coordinateSequenceFactory=null,this._SRID=null,arguments.length===0)b.constructor_.call(this,new vn,0);else if(arguments.length===1){if(Ve(arguments[0],pn)){var u=arguments[0];b.constructor_.call(this,new vn,0,u)}else if(arguments[0]instanceof vn){var c=arguments[0];b.constructor_.call(this,c,0,b.getDefaultCoordinateSequenceFactory())}}else if(arguments.length===2){var y=arguments[0],N=arguments[1];b.constructor_.call(this,y,N,b.getDefaultCoordinateSequenceFactory())}else if(arguments.length===3){var z=arguments[0],se=arguments[1],ve=arguments[2];this._precisionModel=z,this._coordinateSequenceFactory=ve,this._SRID=se}}},{key:"toMultiPolygonArray",value:function(u){var c=new Array(u.size()).fill(null);return u.toArray(c)}},{key:"toGeometryArray",value:function(u){if(u===null)return null;var c=new Array(u.size()).fill(null);return u.toArray(c)}},{key:"getDefaultCoordinateSequenceFactory",value:function(){return Cn.instance()}},{key:"toMultiLineStringArray",value:function(u){var c=new Array(u.size()).fill(null);return u.toArray(c)}},{key:"toLineStringArray",value:function(u){var c=new Array(u.size()).fill(null);return u.toArray(c)}},{key:"toMultiPointArray",value:function(u){var c=new Array(u.size()).fill(null);return u.toArray(c)}},{key:"toLinearRingArray",value:function(u){var c=new Array(u.size()).fill(null);return u.toArray(c)}},{key:"toPointArray",value:function(u){var c=new Array(u.size()).fill(null);return u.toArray(c)}},{key:"toPolygonArray",value:function(u){var c=new Array(u.size()).fill(null);return u.toArray(c)}},{key:"createPointFromInternalCoord",value:function(u,c){return c.getPrecisionModel().makePrecise(u),c.getFactory().createPoint(u)}}])}(),_n="XY",qn="XYZ",Er="XYM",or="XYZM",Ri={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"},ar="EMPTY",yn=1,Gn=2,$n=3,qr=4,gi=5,Sr=6;for(var Jn in Ri)Ri[Jn].toUpperCase();var Ir=function(){return a(function b(u){r(this,b),this.wkt=u,this.index_=-1},[{key:"isAlpha_",value:function(b){return b>="a"&&b<="z"||b>="A"&&b<="Z"}},{key:"isNumeric_",value:function(b,u){return b>="0"&&b<="9"||b=="."&&!(u!==void 0&&u)}},{key:"isWhiteSpace_",value:function(b){return b==" "||b=="	"||b=="\r"||b==`
`}},{key:"nextChar_",value:function(){return this.wkt.charAt(++this.index_)}},{key:"nextToken",value:function(){var b,u=this.nextChar_(),c=this.index_,y=u;if(u=="(")b=Gn;else if(u==",")b=gi;else if(u==")")b=$n;else if(this.isNumeric_(u)||u=="-")b=qr,y=this.readNumber_();else if(this.isAlpha_(u))b=yn,y=this.readText_();else{if(this.isWhiteSpace_(u))return this.nextToken();if(u!=="")throw new Error("Unexpected character: "+u);b=Sr}return{position:c,value:y,type:b}}},{key:"readNumber_",value:function(){var b,u=this.index_,c=!1,y=!1;do b=="."?c=!0:b!="e"&&b!="E"||(y=!0),b=this.nextChar_();while(this.isNumeric_(b,c)||!y&&(b=="e"||b=="E")||y&&(b=="-"||b=="+"));return parseFloat(this.wkt.substring(u,this.index_--))}},{key:"readText_",value:function(){var b,u=this.index_;do b=this.nextChar_();while(this.isAlpha_(b));return this.wkt.substring(u,this.index_--).toUpperCase()}}])}(),On=function(){return a(function b(u,c){r(this,b),this.lexer_=u,this.token_,this.layout_=_n,this.factory=c},[{key:"consume_",value:function(){this.token_=this.lexer_.nextToken()}},{key:"isTokenType",value:function(b){return this.token_.type==b}},{key:"match",value:function(b){var u=this.isTokenType(b);return u&&this.consume_(),u}},{key:"parse",value:function(){return this.consume_(),this.parseGeometry_()}},{key:"parseGeometryLayout_",value:function(){var b=_n,u=this.token_;if(this.isTokenType(yn)){var c=u.value;c==="Z"?b=qn:c==="M"?b=Er:c==="ZM"&&(b=or),b!==_n&&this.consume_()}return b}},{key:"parseGeometryCollectionText_",value:function(){if(this.match(Gn)){var b=[];do b.push(this.parseGeometry_());while(this.match(gi));if(this.match($n))return b}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePointText_",value:function(){if(this.match(Gn)){var b=this.parsePoint_();if(this.match($n))return b}else if(this.isEmptyGeometry_())return null;throw new Error(this.formatErrorMessage_())}},{key:"parseLineStringText_",value:function(){if(this.match(Gn)){var b=this.parsePointList_();if(this.match($n))return b}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePolygonText_",value:function(){if(this.match(Gn)){var b=this.parseLineStringTextList_();if(this.match($n))return b}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiPointText_",value:function(){var b;if(this.match(Gn)){if(b=this.token_.type==Gn?this.parsePointTextList_():this.parsePointList_(),this.match($n))return b}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiLineStringText_",value:function(){if(this.match(Gn)){var b=this.parseLineStringTextList_();if(this.match($n))return b}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiPolygonText_",value:function(){if(this.match(Gn)){var b=this.parsePolygonTextList_();if(this.match($n))return b}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePoint_",value:function(){for(var b=[],u=this.layout_.length,c=0;c<u;++c){var y=this.token_;if(!this.match(qr))break;b.push(y.value)}if(b.length==u)return b;throw new Error(this.formatErrorMessage_())}},{key:"parsePointList_",value:function(){for(var b=[this.parsePoint_()];this.match(gi);)b.push(this.parsePoint_());return b}},{key:"parsePointTextList_",value:function(){for(var b=[this.parsePointText_()];this.match(gi);)b.push(this.parsePointText_());return b}},{key:"parseLineStringTextList_",value:function(){for(var b=[this.parseLineStringText_()];this.match(gi);)b.push(this.parseLineStringText_());return b}},{key:"parsePolygonTextList_",value:function(){for(var b=[this.parsePolygonText_()];this.match(gi);)b.push(this.parsePolygonText_());return b}},{key:"isEmptyGeometry_",value:function(){var b=this.isTokenType(yn)&&this.token_.value==ar;return b&&this.consume_(),b}},{key:"formatErrorMessage_",value:function(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"}},{key:"parseGeometry_",value:function(){var b=this.factory,u=function(hn){return s(X,E(hn))},c=function(hn){var Wn=hn.map(function(xn){return b.createLinearRing(xn.map(u))});return Wn.length>1?b.createPolygon(Wn[0],Wn.slice(1)):b.createPolygon(Wn[0])},y=this.token_;if(this.match(yn)){var N=y.value;if(this.layout_=this.parseGeometryLayout_(),N=="GEOMETRYCOLLECTION"){var z=this.parseGeometryCollectionText_();return b.createGeometryCollection(z)}switch(N){case"POINT":var se=this.parsePointText_();return se?b.createPoint(s(X,E(se))):b.createPoint();case"LINESTRING":var ve=this.parseLineStringText_().map(u);return b.createLineString(ve);case"LINEARRING":var Le=this.parseLineStringText_().map(u);return b.createLinearRing(Le);case"POLYGON":var xe=this.parsePolygonText_();return xe&&xe.length!==0?c(xe):b.createPolygon();case"MULTIPOINT":var Xe=this.parseMultiPointText_();if(!Xe||Xe.length===0)return b.createMultiPoint();var ct=Xe.map(u).map(function(hn){return b.createPoint(hn)});return b.createMultiPoint(ct);case"MULTILINESTRING":var Lt=this.parseMultiLineStringText_().map(function(hn){return b.createLineString(hn.map(u))});return b.createMultiLineString(Lt);case"MULTIPOLYGON":var Ht=this.parseMultiPolygonText_();if(!Ht||Ht.length===0)return b.createMultiPolygon();var on=Ht.map(c);return b.createMultiPolygon(on);default:throw new Error("Invalid geometry type: "+N)}}throw new Error(this.formatErrorMessage_())}}])}();function Ji(b){if(b.isEmpty())return"";var u=b.getCoordinate(),c=[u.x,u.y];return u.z===void 0||Number.isNaN(u.z)||c.push(u.z),u.m===void 0||Number.isNaN(u.m)||c.push(u.m),c.join(" ")}function Yi(b){for(var u=b.getCoordinates().map(function(z){var se=[z.x,z.y];return z.z===void 0||Number.isNaN(z.z)||se.push(z.z),z.m===void 0||Number.isNaN(z.m)||se.push(z.m),se}),c=[],y=0,N=u.length;y<N;++y)c.push(u[y].join(" "));return c.join(", ")}function Mr(b){var u=[];u.push("("+Yi(b.getExteriorRing())+")");for(var c=0,y=b.getNumInteriorRing();c<y;++c)u.push("("+Yi(b.getInteriorRingN(c))+")");return u.join(", ")}var lo={Point:Ji,LineString:Yi,LinearRing:Yi,Polygon:Mr,MultiPoint:function(b){for(var u=[],c=0,y=b.getNumGeometries();c<y;++c)u.push("("+Ji(b.getGeometryN(c))+")");return u.join(", ")},MultiLineString:function(b){for(var u=[],c=0,y=b.getNumGeometries();c<y;++c)u.push("("+Yi(b.getGeometryN(c))+")");return u.join(", ")},MultiPolygon:function(b){for(var u=[],c=0,y=b.getNumGeometries();c<y;++c)u.push("("+Mr(b.getGeometryN(c))+")");return u.join(", ")},GeometryCollection:function(b){for(var u=[],c=0,y=b.getNumGeometries();c<y;++c)u.push(cs(b.getGeometryN(c)));return u.join(", ")}};function cs(b){var u=b.getGeometryType(),c=lo[u];u=u.toUpperCase();var y=function(N){var z="";if(N.isEmpty())return z;var se=N.getCoordinate();return se.z===void 0||Number.isNaN(se.z)||(z+="Z"),se.m===void 0||Number.isNaN(se.m)||(z+="M"),z}(b);return y.length>0&&(u+=" "+y),b.isEmpty()?u+" "+ar:u+" ("+c(b)+")"}var uo=function(){return a(function b(u){r(this,b),this.geometryFactory=u||new wi,this.precisionModel=this.geometryFactory.getPrecisionModel()},[{key:"read",value:function(b){var u=new Ir(b);return new On(u,this.geometryFactory).parse()}},{key:"write",value:function(b){return cs(b)}}])}(),ks=function(){return a(function b(u){r(this,b),this.parser=new uo(u)},[{key:"write",value:function(b){return this.parser.write(b)}}],[{key:"toLineString",value:function(b,u){if(arguments.length!==2)throw new Error("Not implemented");return"LINESTRING ( "+b.x+" "+b.y+", "+u.x+" "+u.y+" )"}}])}(),ei=function(){function b(){r(this,b),b.constructor_.apply(this,arguments)}return a(b,[{key:"getIndexAlongSegment",value:function(u,c){return this.computeIntLineIndex(),this._intLineIndex[u][c]}},{key:"getTopologySummary",value:function(){var u=new It;return this.isEndPoint()&&u.append(" endpoint"),this._isProper&&u.append(" proper"),this.isCollinear()&&u.append(" collinear"),u.toString()}},{key:"computeIntersection",value:function(u,c,y,N){this._inputLines[0][0]=u,this._inputLines[0][1]=c,this._inputLines[1][0]=y,this._inputLines[1][1]=N,this._result=this.computeIntersect(u,c,y,N)}},{key:"getIntersectionNum",value:function(){return this._result}},{key:"computeIntLineIndex",value:function(){if(arguments.length===0)this._intLineIndex===null&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(arguments.length===1){var u=arguments[0];this.getEdgeDistance(u,0)>this.getEdgeDistance(u,1)?(this._intLineIndex[u][0]=0,this._intLineIndex[u][1]=1):(this._intLineIndex[u][0]=1,this._intLineIndex[u][1]=0)}}},{key:"isProper",value:function(){return this.hasIntersection()&&this._isProper}},{key:"setPrecisionModel",value:function(u){this._precisionModel=u}},{key:"isInteriorIntersection",value:function(){if(arguments.length===0)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(arguments.length===1){for(var u=arguments[0],c=0;c<this._result;c++)if(!this._intPt[c].equals2D(this._inputLines[u][0])&&!this._intPt[c].equals2D(this._inputLines[u][1]))return!0;return!1}}},{key:"getIntersection",value:function(u){return this._intPt[u]}},{key:"isEndPoint",value:function(){return this.hasIntersection()&&!this._isProper}},{key:"hasIntersection",value:function(){return this._result!==b.NO_INTERSECTION}},{key:"getEdgeDistance",value:function(u,c){return b.computeEdgeDistance(this._intPt[c],this._inputLines[u][0],this._inputLines[u][1])}},{key:"isCollinear",value:function(){return this._result===b.COLLINEAR_INTERSECTION}},{key:"toString",value:function(){return ks.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+ks.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()}},{key:"getEndpoint",value:function(u,c){return this._inputLines[u][c]}},{key:"isIntersection",value:function(u){for(var c=0;c<this._result;c++)if(this._intPt[c].equals2D(u))return!0;return!1}},{key:"getIntersectionAlongSegment",value:function(u,c){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[u][c]]}}],[{key:"constructor_",value:function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new X,this._intPt[1]=new X,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0}},{key:"computeEdgeDistance",value:function(u,c,y){var N=Math.abs(y.x-c.x),z=Math.abs(y.y-c.y),se=-1;if(u.equals(c))se=0;else if(u.equals(y))se=N>z?N:z;else{var ve=Math.abs(u.x-c.x),Le=Math.abs(u.y-c.y);(se=N>z?ve:Le)!==0||u.equals(c)||(se=Math.max(ve,Le))}return be.isTrue(!(se===0&&!u.equals(c)),"Bad distance calculation"),se}},{key:"nonRobustComputeEdgeDistance",value:function(u,c,y){var N=u.x-c.x,z=u.y-c.y,se=Math.sqrt(N*N+z*z);return be.isTrue(!(se===0&&!u.equals(c)),"Invalid distance calculation"),se}}])}();ei.DONT_INTERSECT=0,ei.DO_INTERSECT=1,ei.COLLINEAR=2,ei.NO_INTERSECTION=0,ei.POINT_INTERSECTION=1,ei.COLLINEAR_INTERSECTION=2;var et=function(b){function u(){return r(this,u),i(this,u)}return m(u,b),a(u,[{key:"isInSegmentEnvelopes",value:function(c){var y=new _e(this._inputLines[0][0],this._inputLines[0][1]),N=new _e(this._inputLines[1][0],this._inputLines[1][1]);return y.contains(c)&&N.contains(c)}},{key:"computeIntersection",value:function(){if(arguments.length!==3)return w(u,"computeIntersection",this,1).apply(this,arguments);var c=arguments[0],y=arguments[1],N=arguments[2];if(this._isProper=!1,_e.intersects(y,N,c)&&ft.index(y,N,c)===0&&ft.index(N,y,c)===0)return this._isProper=!0,(c.equals(y)||c.equals(N))&&(this._isProper=!1),this._result=ei.POINT_INTERSECTION,null;this._result=ei.NO_INTERSECTION}},{key:"intersection",value:function(c,y,N,z){var se=this.intersectionSafe(c,y,N,z);return this.isInSegmentEnvelopes(se)||(se=new X(u.nearestEndpoint(c,y,N,z))),this._precisionModel!==null&&this._precisionModel.makePrecise(se),se}},{key:"checkDD",value:function(c,y,N,z,se){var ve=Et.intersection(c,y,N,z),Le=this.isInSegmentEnvelopes(ve);$t.out.println("DD in env = "+Le+"  --------------------- "+ve),se.distance(ve)>1e-4&&$t.out.println("Distance = "+se.distance(ve))}},{key:"intersectionSafe",value:function(c,y,N,z){var se=vt.intersection(c,y,N,z);return se===null&&(se=u.nearestEndpoint(c,y,N,z)),se}},{key:"computeCollinearIntersection",value:function(c,y,N,z){var se=_e.intersects(c,y,N),ve=_e.intersects(c,y,z),Le=_e.intersects(N,z,c),xe=_e.intersects(N,z,y);return se&&ve?(this._intPt[0]=N,this._intPt[1]=z,ei.COLLINEAR_INTERSECTION):Le&&xe?(this._intPt[0]=c,this._intPt[1]=y,ei.COLLINEAR_INTERSECTION):se&&Le?(this._intPt[0]=N,this._intPt[1]=c,!N.equals(c)||ve||xe?ei.COLLINEAR_INTERSECTION:ei.POINT_INTERSECTION):se&&xe?(this._intPt[0]=N,this._intPt[1]=y,!N.equals(y)||ve||Le?ei.COLLINEAR_INTERSECTION:ei.POINT_INTERSECTION):ve&&Le?(this._intPt[0]=z,this._intPt[1]=c,!z.equals(c)||se||xe?ei.COLLINEAR_INTERSECTION:ei.POINT_INTERSECTION):ve&&xe?(this._intPt[0]=z,this._intPt[1]=y,!z.equals(y)||se||Le?ei.COLLINEAR_INTERSECTION:ei.POINT_INTERSECTION):ei.NO_INTERSECTION}},{key:"computeIntersect",value:function(c,y,N,z){if(this._isProper=!1,!_e.intersects(c,y,N,z))return ei.NO_INTERSECTION;var se=ft.index(c,y,N),ve=ft.index(c,y,z);if(se>0&&ve>0||se<0&&ve<0)return ei.NO_INTERSECTION;var Le=ft.index(N,z,c),xe=ft.index(N,z,y);return Le>0&&xe>0||Le<0&&xe<0?ei.NO_INTERSECTION:se===0&&ve===0&&Le===0&&xe===0?this.computeCollinearIntersection(c,y,N,z):(se===0||ve===0||Le===0||xe===0?(this._isProper=!1,c.equals2D(N)||c.equals2D(z)?this._intPt[0]=c:y.equals2D(N)||y.equals2D(z)?this._intPt[0]=y:se===0?this._intPt[0]=new X(N):ve===0?this._intPt[0]=new X(z):Le===0?this._intPt[0]=new X(c):xe===0&&(this._intPt[0]=new X(y))):(this._isProper=!0,this._intPt[0]=this.intersection(c,y,N,z)),ei.POINT_INTERSECTION)}}],[{key:"nearestEndpoint",value:function(c,y,N,z){var se=c,ve=sn.pointToSegment(c,N,z),Le=sn.pointToSegment(y,N,z);return Le<ve&&(ve=Le,se=y),(Le=sn.pointToSegment(N,c,y))<ve&&(ve=Le,se=N),(Le=sn.pointToSegment(z,c,y))<ve&&(ve=Le,se=z),se}}])}(ei),Pt=function(){function b(){r(this,b),b.constructor_.apply(this,arguments)}return a(b,[{key:"countSegment",value:function(u,c){if(u.x<this._p.x&&c.x<this._p.x)return null;if(this._p.x===c.x&&this._p.y===c.y)return this._isPointOnSegment=!0,null;if(u.y===this._p.y&&c.y===this._p.y){var y=u.x,N=c.x;return y>N&&(y=c.x,N=u.x),this._p.x>=y&&this._p.x<=N&&(this._isPointOnSegment=!0),null}if(u.y>this._p.y&&c.y<=this._p.y||c.y>this._p.y&&u.y<=this._p.y){var z=ft.index(u,c,this._p);if(z===ft.COLLINEAR)return this._isPointOnSegment=!0,null;c.y<u.y&&(z=-z),z===ft.LEFT&&this._crossingCount++}}},{key:"isPointInPolygon",value:function(){return this.getLocation()!==ae.EXTERIOR}},{key:"getLocation",value:function(){return this._isPointOnSegment?ae.BOUNDARY:this._crossingCount%2==1?ae.INTERIOR:ae.EXTERIOR}},{key:"isOnSegment",value:function(){return this._isPointOnSegment}}],[{key:"constructor_",value:function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var u=arguments[0];this._p=u}},{key:"locatePointInRing",value:function(){if(arguments[0]instanceof X&&Ve(arguments[1],rt)){for(var u=arguments[1],c=new b(arguments[0]),y=new X,N=new X,z=1;z<u.size();z++)if(u.getCoordinate(z,y),u.getCoordinate(z-1,N),c.countSegment(y,N),c.isOnSegment())return c.getLocation();return c.getLocation()}if(arguments[0]instanceof X&&arguments[1]instanceof Array){for(var se=arguments[1],ve=new b(arguments[0]),Le=1;Le<se.length;Le++){var xe=se[Le],Xe=se[Le-1];if(ve.countSegment(xe,Xe),ve.isOnSegment())return ve.getLocation()}return ve.getLocation()}}}])}(),Oi=function(){function b(){r(this,b)}return a(b,null,[{key:"isOnLine",value:function(){if(arguments[0]instanceof X&&Ve(arguments[1],rt)){for(var u=arguments[0],c=arguments[1],y=new et,N=new X,z=new X,se=c.size(),ve=1;ve<se;ve++)if(c.getCoordinate(ve-1,N),c.getCoordinate(ve,z),y.computeIntersection(u,N,z),y.hasIntersection())return!0;return!1}if(arguments[0]instanceof X&&arguments[1]instanceof Array){for(var Le=arguments[0],xe=arguments[1],Xe=new et,ct=1;ct<xe.length;ct++){var Lt=xe[ct-1],Ht=xe[ct];if(Xe.computeIntersection(Le,Lt,Ht),Xe.hasIntersection())return!0}return!1}}},{key:"locateInRing",value:function(u,c){return Pt.locatePointInRing(u,c)}},{key:"isInRing",value:function(u,c){return b.locateInRing(u,c)!==ae.EXTERIOR}}])}(),Pi=function(){function b(){r(this,b),b.constructor_.apply(this,arguments)}return a(b,[{key:"setAllLocations",value:function(u){for(var c=0;c<this.location.length;c++)this.location[c]=u}},{key:"isNull",value:function(){for(var u=0;u<this.location.length;u++)if(this.location[u]!==ae.NONE)return!1;return!0}},{key:"setAllLocationsIfNull",value:function(u){for(var c=0;c<this.location.length;c++)this.location[c]===ae.NONE&&(this.location[c]=u)}},{key:"isLine",value:function(){return this.location.length===1}},{key:"merge",value:function(u){if(u.location.length>this.location.length){var c=new Array(3).fill(null);c[De.ON]=this.location[De.ON],c[De.LEFT]=ae.NONE,c[De.RIGHT]=ae.NONE,this.location=c}for(var y=0;y<this.location.length;y++)this.location[y]===ae.NONE&&y<u.location.length&&(this.location[y]=u.location[y])}},{key:"getLocations",value:function(){return this.location}},{key:"flip",value:function(){if(this.location.length<=1)return null;var u=this.location[De.LEFT];this.location[De.LEFT]=this.location[De.RIGHT],this.location[De.RIGHT]=u}},{key:"toString",value:function(){var u=new Ue;return this.location.length>1&&u.append(ae.toLocationSymbol(this.location[De.LEFT])),u.append(ae.toLocationSymbol(this.location[De.ON])),this.location.length>1&&u.append(ae.toLocationSymbol(this.location[De.RIGHT])),u.toString()}},{key:"setLocations",value:function(u,c,y){this.location[De.ON]=u,this.location[De.LEFT]=c,this.location[De.RIGHT]=y}},{key:"get",value:function(u){return u<this.location.length?this.location[u]:ae.NONE}},{key:"isArea",value:function(){return this.location.length>1}},{key:"isAnyNull",value:function(){for(var u=0;u<this.location.length;u++)if(this.location[u]===ae.NONE)return!0;return!1}},{key:"setLocation",value:function(){if(arguments.length===1){var u=arguments[0];this.setLocation(De.ON,u)}else if(arguments.length===2){var c=arguments[0],y=arguments[1];this.location[c]=y}}},{key:"init",value:function(u){this.location=new Array(u).fill(null),this.setAllLocations(ae.NONE)}},{key:"isEqualOnSide",value:function(u,c){return this.location[c]===u.location[c]}},{key:"allPositionsEqual",value:function(u){for(var c=0;c<this.location.length;c++)if(this.location[c]!==u)return!1;return!0}}],[{key:"constructor_",value:function(){if(this.location=null,arguments.length===1){if(arguments[0]instanceof Array){var u=arguments[0];this.init(u.length)}else if(Number.isInteger(arguments[0])){var c=arguments[0];this.init(1),this.location[De.ON]=c}else if(arguments[0]instanceof b){var y=arguments[0];if(this.init(y.location.length),y!==null)for(var N=0;N<this.location.length;N++)this.location[N]=y.location[N]}}else if(arguments.length===3){var z=arguments[0],se=arguments[1],ve=arguments[2];this.init(3),this.location[De.ON]=z,this.location[De.LEFT]=se,this.location[De.RIGHT]=ve}}}])}(),_i=function(){function b(){r(this,b),b.constructor_.apply(this,arguments)}return a(b,[{key:"getGeometryCount",value:function(){var u=0;return this.elt[0].isNull()||u++,this.elt[1].isNull()||u++,u}},{key:"setAllLocations",value:function(u,c){this.elt[u].setAllLocations(c)}},{key:"isNull",value:function(u){return this.elt[u].isNull()}},{key:"setAllLocationsIfNull",value:function(){if(arguments.length===1){var u=arguments[0];this.setAllLocationsIfNull(0,u),this.setAllLocationsIfNull(1,u)}else if(arguments.length===2){var c=arguments[0],y=arguments[1];this.elt[c].setAllLocationsIfNull(y)}}},{key:"isLine",value:function(u){return this.elt[u].isLine()}},{key:"merge",value:function(u){for(var c=0;c<2;c++)this.elt[c]===null&&u.elt[c]!==null?this.elt[c]=new Pi(u.elt[c]):this.elt[c].merge(u.elt[c])}},{key:"flip",value:function(){this.elt[0].flip(),this.elt[1].flip()}},{key:"getLocation",value:function(){if(arguments.length===1){var u=arguments[0];return this.elt[u].get(De.ON)}if(arguments.length===2){var c=arguments[0],y=arguments[1];return this.elt[c].get(y)}}},{key:"toString",value:function(){var u=new Ue;return this.elt[0]!==null&&(u.append("A:"),u.append(this.elt[0].toString())),this.elt[1]!==null&&(u.append(" B:"),u.append(this.elt[1].toString())),u.toString()}},{key:"isArea",value:function(){if(arguments.length===0)return this.elt[0].isArea()||this.elt[1].isArea();if(arguments.length===1){var u=arguments[0];return this.elt[u].isArea()}}},{key:"isAnyNull",value:function(u){return this.elt[u].isAnyNull()}},{key:"setLocation",value:function(){if(arguments.length===2){var u=arguments[0],c=arguments[1];this.elt[u].setLocation(De.ON,c)}else if(arguments.length===3){var y=arguments[0],N=arguments[1],z=arguments[2];this.elt[y].setLocation(N,z)}}},{key:"isEqualOnSide",value:function(u,c){return this.elt[0].isEqualOnSide(u.elt[0],c)&&this.elt[1].isEqualOnSide(u.elt[1],c)}},{key:"allPositionsEqual",value:function(u,c){return this.elt[u].allPositionsEqual(c)}},{key:"toLine",value:function(u){this.elt[u].isArea()&&(this.elt[u]=new Pi(this.elt[u].location[0]))}}],[{key:"constructor_",value:function(){if(this.elt=new Array(2).fill(null),arguments.length===1){if(Number.isInteger(arguments[0])){var u=arguments[0];this.elt[0]=new Pi(u),this.elt[1]=new Pi(u)}else if(arguments[0]instanceof b){var c=arguments[0];this.elt[0]=new Pi(c.elt[0]),this.elt[1]=new Pi(c.elt[1])}}else if(arguments.length===2){var y=arguments[0],N=arguments[1];this.elt[0]=new Pi(ae.NONE),this.elt[1]=new Pi(ae.NONE),this.elt[y].setLocation(N)}else if(arguments.length===3){var z=arguments[0],se=arguments[1],ve=arguments[2];this.elt[0]=new Pi(z,se,ve),this.elt[1]=new Pi(z,se,ve)}else if(arguments.length===4){var Le=arguments[0],xe=arguments[1],Xe=arguments[2],ct=arguments[3];this.elt[0]=new Pi(ae.NONE,ae.NONE,ae.NONE),this.elt[1]=new Pi(ae.NONE,ae.NONE,ae.NONE),this.elt[Le].setLocations(xe,Xe,ct)}}},{key:"toLineLabel",value:function(u){for(var c=new b(ae.NONE),y=0;y<2;y++)c.setLocation(y,u.getLocation(y));return c}}])}(),Zr=function(){return a(function b(){r(this,b),b.constructor_.apply(this,arguments)},[{key:"computeRing",value:function(){if(this._ring!==null)return null;for(var b=new Array(this._pts.size()).fill(null),u=0;u<this._pts.size();u++)b[u]=this._pts.get(u);this._ring=this._geometryFactory.createLinearRing(b),this._isHole=ft.isCCW(this._ring.getCoordinates())}},{key:"isIsolated",value:function(){return this._label.getGeometryCount()===1}},{key:"computePoints",value:function(b){this._startDe=b;var u=b,c=!0;do{if(u===null)throw new Qe("Found null DirectedEdge");if(u.getEdgeRing()===this)throw new Qe("Directed Edge visited twice during ring-building at "+u.getCoordinate());this._edges.add(u);var y=u.getLabel();be.isTrue(y.isArea()),this.mergeLabel(y),this.addPoints(u.getEdge(),u.isForward(),c),c=!1,this.setEdgeRing(u,this),u=this.getNext(u)}while(u!==this._startDe)}},{key:"getLinearRing",value:function(){return this._ring}},{key:"getCoordinate",value:function(b){return this._pts.get(b)}},{key:"computeMaxNodeDegree",value:function(){this._maxNodeDegree=0;var b=this._startDe;do{var u=b.getNode().getEdges().getOutgoingDegree(this);u>this._maxNodeDegree&&(this._maxNodeDegree=u),b=this.getNext(b)}while(b!==this._startDe);this._maxNodeDegree*=2}},{key:"addPoints",value:function(b,u,c){var y=b.getCoordinates();if(u){var N=1;c&&(N=0);for(var z=N;z<y.length;z++)this._pts.add(y[z])}else{var se=y.length-2;c&&(se=y.length-1);for(var ve=se;ve>=0;ve--)this._pts.add(y[ve])}}},{key:"isHole",value:function(){return this._isHole}},{key:"setInResult",value:function(){var b=this._startDe;do b.getEdge().setInResult(!0),b=b.getNext();while(b!==this._startDe)}},{key:"containsPoint",value:function(b){var u=this.getLinearRing();if(!u.getEnvelopeInternal().contains(b)||!Oi.isInRing(b,u.getCoordinates()))return!1;for(var c=this._holes.iterator();c.hasNext();)if(c.next().containsPoint(b))return!1;return!0}},{key:"addHole",value:function(b){this._holes.add(b)}},{key:"isShell",value:function(){return this._shell===null}},{key:"getLabel",value:function(){return this._label}},{key:"getEdges",value:function(){return this._edges}},{key:"getMaxNodeDegree",value:function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree}},{key:"getShell",value:function(){return this._shell}},{key:"mergeLabel",value:function(){if(arguments.length===1){var b=arguments[0];this.mergeLabel(b,0),this.mergeLabel(b,1)}else if(arguments.length===2){var u=arguments[1],c=arguments[0].getLocation(u,De.RIGHT);if(c===ae.NONE)return null;if(this._label.getLocation(u)===ae.NONE)return this._label.setLocation(u,c),null}}},{key:"setShell",value:function(b){this._shell=b,b!==null&&b.addHole(this)}},{key:"toPolygon",value:function(b){for(var u=new Array(this._holes.size()).fill(null),c=0;c<this._holes.size();c++)u[c]=this._holes.get(c).getLinearRing();return b.createPolygon(this.getLinearRing(),u)}}],[{key:"constructor_",value:function(){if(this._startDe=null,this._maxNodeDegree=-1,this._edges=new mt,this._pts=new mt,this._label=new _i(ae.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new mt,this._geometryFactory=null,arguments.length!==0){if(arguments.length===2){var b=arguments[0],u=arguments[1];this._geometryFactory=u,this.computePoints(b),this.computeRing()}}}}])}(),Sn=function(b){function u(){var c;return r(this,u),c=i(this,u),u.constructor_.apply(c,arguments),c}return m(u,b),a(u,[{key:"setEdgeRing",value:function(c,y){c.setMinEdgeRing(y)}},{key:"getNext",value:function(c){return c.getNextMin()}}],[{key:"constructor_",value:function(){var c=arguments[0],y=arguments[1];Zr.constructor_.call(this,c,y)}}])}(Zr),$i=function(b){function u(){var c;return r(this,u),c=i(this,u),u.constructor_.apply(c,arguments),c}return m(u,b),a(u,[{key:"buildMinimalRings",value:function(){var c=new mt,y=this._startDe;do{if(y.getMinEdgeRing()===null){var N=new Sn(y,this._geometryFactory);c.add(N)}y=y.getNext()}while(y!==this._startDe);return c}},{key:"setEdgeRing",value:function(c,y){c.setEdgeRing(y)}},{key:"linkDirectedEdgesForMinimalEdgeRings",value:function(){var c=this._startDe;do c.getNode().getEdges().linkMinimalDirectedEdges(this),c=c.getNext();while(c!==this._startDe)}},{key:"getNext",value:function(c){return c.getNext()}}],[{key:"constructor_",value:function(){var c=arguments[0],y=arguments[1];Zr.constructor_.call(this,c,y)}}])}(Zr),Xn=function(){return a(function b(){r(this,b),b.constructor_.apply(this,arguments)},[{key:"setVisited",value:function(b){this._isVisited=b}},{key:"setInResult",value:function(b){this._isInResult=b}},{key:"isCovered",value:function(){return this._isCovered}},{key:"isCoveredSet",value:function(){return this._isCoveredSet}},{key:"setLabel",value:function(b){this._label=b}},{key:"getLabel",value:function(){return this._label}},{key:"setCovered",value:function(b){this._isCovered=b,this._isCoveredSet=!0}},{key:"updateIM",value:function(b){be.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(b)}},{key:"isInResult",value:function(){return this._isInResult}},{key:"isVisited",value:function(){return this._isVisited}}],[{key:"constructor_",value:function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,arguments.length!==0){if(arguments.length===1){var b=arguments[0];this._label=b}}}}])}(),xr=function(b){function u(){var c;return r(this,u),c=i(this,u),u.constructor_.apply(c,arguments),c}return m(u,b),a(u,[{key:"isIncidentEdgeInResult",value:function(){for(var c=this.getEdges().getEdges().iterator();c.hasNext();)if(c.next().getEdge().isInResult())return!0;return!1}},{key:"isIsolated",value:function(){return this._label.getGeometryCount()===1}},{key:"getCoordinate",value:function(){return this._coord}},{key:"print",value:function(c){c.println("node "+this._coord+" lbl: "+this._label)}},{key:"computeIM",value:function(c){}},{key:"computeMergedLocation",value:function(c,y){var N=ae.NONE;if(N=this._label.getLocation(y),!c.isNull(y)){var z=c.getLocation(y);N!==ae.BOUNDARY&&(N=z)}return N}},{key:"setLabel",value:function(){if(arguments.length!==2||!Number.isInteger(arguments[1])||!Number.isInteger(arguments[0]))return w(u,"setLabel",this,1).apply(this,arguments);var c=arguments[0],y=arguments[1];this._label===null?this._label=new _i(c,y):this._label.setLocation(c,y)}},{key:"getEdges",value:function(){return this._edges}},{key:"mergeLabel",value:function(){if(arguments[0]instanceof u){var c=arguments[0];this.mergeLabel(c._label)}else if(arguments[0]instanceof _i)for(var y=arguments[0],N=0;N<2;N++){var z=this.computeMergedLocation(y,N);this._label.getLocation(N)===ae.NONE&&this._label.setLocation(N,z)}}},{key:"add",value:function(c){this._edges.insert(c),c.setNode(this)}},{key:"setLabelBoundary",value:function(c){if(this._label===null)return null;var y=ae.NONE;this._label!==null&&(y=this._label.getLocation(c));var N=null;switch(y){case ae.BOUNDARY:N=ae.INTERIOR;break;case ae.INTERIOR:default:N=ae.BOUNDARY}this._label.setLocation(c,N)}}],[{key:"constructor_",value:function(){this._coord=null,this._edges=null;var c=arguments[0],y=arguments[1];this._coord=c,this._edges=y,this._label=new _i(0,ae.NONE)}}])}(Xn),hs=function(b){function u(){return r(this,u),i(this,u,arguments)}return m(u,b),a(u)}(ri);function Yr(b){return b==null?0:b.color}function Rn(b){return b==null?null:b.parent}function pi(b,u){b!==null&&(b.color=u)}function Fr(b){return b==null?null:b.left}function Tr(b){return b==null?null:b.right}var An=function(b){function u(){var c;return r(this,u),(c=i(this,u)).root_=null,c.size_=0,c}return m(u,b),a(u,[{key:"get",value:function(c){for(var y=this.root_;y!==null;){var N=c.compareTo(y.key);if(N<0)y=y.left;else{if(!(N>0))return y.value;y=y.right}}return null}},{key:"put",value:function(c,y){if(this.root_===null)return this.root_={key:c,value:y,left:null,right:null,parent:null,color:0,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var N,z,se=this.root_;do if(N=se,(z=c.compareTo(se.key))<0)se=se.left;else{if(!(z>0)){var ve=se.value;return se.value=y,ve}se=se.right}while(se!==null);var Le={key:c,left:null,right:null,value:y,parent:N,color:0,getValue:function(){return this.value},getKey:function(){return this.key}};return z<0?N.left=Le:N.right=Le,this.fixAfterInsertion(Le),this.size_++,null}},{key:"fixAfterInsertion",value:function(c){var y;for(c.color=1;c!=null&&c!==this.root_&&c.parent.color===1;)Rn(c)===Fr(Rn(Rn(c)))?Yr(y=Tr(Rn(Rn(c))))===1?(pi(Rn(c),0),pi(y,0),pi(Rn(Rn(c)),1),c=Rn(Rn(c))):(c===Tr(Rn(c))&&(c=Rn(c),this.rotateLeft(c)),pi(Rn(c),0),pi(Rn(Rn(c)),1),this.rotateRight(Rn(Rn(c)))):Yr(y=Fr(Rn(Rn(c))))===1?(pi(Rn(c),0),pi(y,0),pi(Rn(Rn(c)),1),c=Rn(Rn(c))):(c===Fr(Rn(c))&&(c=Rn(c),this.rotateRight(c)),pi(Rn(c),0),pi(Rn(Rn(c)),1),this.rotateLeft(Rn(Rn(c))));this.root_.color=0}},{key:"values",value:function(){var c=new mt,y=this.getFirstEntry();if(y!==null)for(c.add(y.value);(y=u.successor(y))!==null;)c.add(y.value);return c}},{key:"entrySet",value:function(){var c=new Ae,y=this.getFirstEntry();if(y!==null)for(c.add(y);(y=u.successor(y))!==null;)c.add(y);return c}},{key:"rotateLeft",value:function(c){if(c!=null){var y=c.right;c.right=y.left,y.left!=null&&(y.left.parent=c),y.parent=c.parent,c.parent==null?this.root_=y:c.parent.left===c?c.parent.left=y:c.parent.right=y,y.left=c,c.parent=y}}},{key:"rotateRight",value:function(c){if(c!=null){var y=c.left;c.left=y.right,y.right!=null&&(y.right.parent=c),y.parent=c.parent,c.parent==null?this.root_=y:c.parent.right===c?c.parent.right=y:c.parent.left=y,y.right=c,c.parent=y}}},{key:"getFirstEntry",value:function(){var c=this.root_;if(c!=null)for(;c.left!=null;)c=c.left;return c}},{key:"size",value:function(){return this.size_}},{key:"containsKey",value:function(c){for(var y=this.root_;y!==null;){var N=c.compareTo(y.key);if(N<0)y=y.left;else{if(!(N>0))return!0;y=y.right}}return!1}}],[{key:"successor",value:function(c){var y;if(c===null)return null;if(c.right!==null){for(y=c.right;y.left!==null;)y=y.left;return y}y=c.parent;for(var N=c;y!==null&&N===y.right;)N=y,y=y.parent;return y}}])}(hs),Qi=function(){return a(function b(){r(this,b),b.constructor_.apply(this,arguments)},[{key:"find",value:function(b){return this.nodeMap.get(b)}},{key:"addNode",value:function(){if(arguments[0]instanceof X){var b=arguments[0],u=this.nodeMap.get(b);return u===null&&(u=this.nodeFact.createNode(b),this.nodeMap.put(b,u)),u}if(arguments[0]instanceof xr){var c=arguments[0],y=this.nodeMap.get(c.getCoordinate());return y===null?(this.nodeMap.put(c.getCoordinate(),c),c):(y.mergeLabel(c),y)}}},{key:"print",value:function(b){for(var u=this.iterator();u.hasNext();)u.next().print(b)}},{key:"iterator",value:function(){return this.nodeMap.values().iterator()}},{key:"values",value:function(){return this.nodeMap.values()}},{key:"getBoundaryNodes",value:function(b){for(var u=new mt,c=this.iterator();c.hasNext();){var y=c.next();y.getLabel().getLocation(b)===ae.BOUNDARY&&u.add(y)}return u}},{key:"add",value:function(b){var u=b.getCoordinate();this.addNode(u).add(b)}}],[{key:"constructor_",value:function(){this.nodeMap=new An,this.nodeFact=null;var b=arguments[0];this.nodeFact=b}}])}(),Ni=function(){function b(){r(this,b)}return a(b,null,[{key:"isNorthern",value:function(u){return u===b.NE||u===b.NW}},{key:"isOpposite",value:function(u,c){return u!==c&&(u-c+4)%4===2}},{key:"commonHalfPlane",value:function(u,c){if(u===c)return u;if((u-c+4)%4===2)return-1;var y=u<c?u:c;return y===0&&(u>c?u:c)===3?3:y}},{key:"isInHalfPlane",value:function(u,c){return c===b.SE?u===b.SE||u===b.SW:u===c||u===c+1}},{key:"quadrant",value:function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var u=arguments[0],c=arguments[1];if(u===0&&c===0)throw new P("Cannot compute the quadrant for point ( "+u+", "+c+" )");return u>=0?c>=0?b.NE:b.SE:c>=0?b.NW:b.SW}if(arguments[0]instanceof X&&arguments[1]instanceof X){var y=arguments[0],N=arguments[1];if(N.x===y.x&&N.y===y.y)throw new P("Cannot compute the quadrant for two identical points "+y);return N.x>=y.x?N.y>=y.y?b.NE:b.SE:N.y>=y.y?b.NW:b.SW}}}])}();Ni.NE=0,Ni.NW=1,Ni.SW=2,Ni.SE=3;var co=function(){function b(){r(this,b),b.constructor_.apply(this,arguments)}return a(b,[{key:"compareDirection",value:function(u){return this._dx===u._dx&&this._dy===u._dy?0:this._quadrant>u._quadrant?1:this._quadrant<u._quadrant?-1:ft.index(u._p0,u._p1,this._p1)}},{key:"getDy",value:function(){return this._dy}},{key:"getCoordinate",value:function(){return this._p0}},{key:"setNode",value:function(u){this._node=u}},{key:"print",value:function(u){var c=Math.atan2(this._dy,this._dx),y=this.getClass().getName(),N=y.lastIndexOf("."),z=y.substring(N+1);u.print("  "+z+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+c+"   "+this._label)}},{key:"compareTo",value:function(u){var c=u;return this.compareDirection(c)}},{key:"getDirectedCoordinate",value:function(){return this._p1}},{key:"getDx",value:function(){return this._dx}},{key:"getLabel",value:function(){return this._label}},{key:"getEdge",value:function(){return this._edge}},{key:"getQuadrant",value:function(){return this._quadrant}},{key:"getNode",value:function(){return this._node}},{key:"toString",value:function(){var u=Math.atan2(this._dy,this._dx),c=this.getClass().getName(),y=c.lastIndexOf(".");return"  "+c.substring(y+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+u+"   "+this._label}},{key:"computeLabel",value:function(u){}},{key:"init",value:function(u,c){this._p0=u,this._p1=c,this._dx=c.x-u.x,this._dy=c.y-u.y,this._quadrant=Ni.quadrant(this._dx,this._dy),be.isTrue(!(this._dx===0&&this._dy===0),"EdgeEnd with identical endpoints found")}},{key:"interfaces_",get:function(){return[V]}}],[{key:"constructor_",value:function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,arguments.length===1){var u=arguments[0];this._edge=u}else if(arguments.length===3){var c=arguments[0],y=arguments[1],N=arguments[2];b.constructor_.call(this,c,y,N,null)}else if(arguments.length===4){var z=arguments[0],se=arguments[1],ve=arguments[2],Le=arguments[3];b.constructor_.call(this,z),this.init(se,ve),this._label=Le}}}])}(),Es=function(b){function u(){var c;return r(this,u),c=i(this,u),u.constructor_.apply(c,arguments),c}return m(u,b),a(u,[{key:"getNextMin",value:function(){return this._nextMin}},{key:"getDepth",value:function(c){return this._depth[c]}},{key:"setVisited",value:function(c){this._isVisited=c}},{key:"computeDirectedLabel",value:function(){this._label=new _i(this._edge.getLabel()),this._isForward||this._label.flip()}},{key:"getNext",value:function(){return this._next}},{key:"setDepth",value:function(c,y){if(this._depth[c]!==-999&&this._depth[c]!==y)throw new Qe("assigned depths do not match",this.getCoordinate());this._depth[c]=y}},{key:"isInteriorAreaEdge",value:function(){for(var c=!0,y=0;y<2;y++)this._label.isArea(y)&&this._label.getLocation(y,De.LEFT)===ae.INTERIOR&&this._label.getLocation(y,De.RIGHT)===ae.INTERIOR||(c=!1);return c}},{key:"setNextMin",value:function(c){this._nextMin=c}},{key:"print",value:function(c){w(u,"print",this,1).call(this,c),c.print(" "+this._depth[De.LEFT]+"/"+this._depth[De.RIGHT]),c.print(" ("+this.getDepthDelta()+")"),this._isInResult&&c.print(" inResult")}},{key:"setMinEdgeRing",value:function(c){this._minEdgeRing=c}},{key:"isLineEdge",value:function(){var c=this._label.isLine(0)||this._label.isLine(1),y=!this._label.isArea(0)||this._label.allPositionsEqual(0,ae.EXTERIOR),N=!this._label.isArea(1)||this._label.allPositionsEqual(1,ae.EXTERIOR);return c&&y&&N}},{key:"setEdgeRing",value:function(c){this._edgeRing=c}},{key:"getMinEdgeRing",value:function(){return this._minEdgeRing}},{key:"getDepthDelta",value:function(){var c=this._edge.getDepthDelta();return this._isForward||(c=-c),c}},{key:"setInResult",value:function(c){this._isInResult=c}},{key:"getSym",value:function(){return this._sym}},{key:"isForward",value:function(){return this._isForward}},{key:"getEdge",value:function(){return this._edge}},{key:"printEdge",value:function(c){this.print(c),c.print(" "),this._isForward?this._edge.print(c):this._edge.printReverse(c)}},{key:"setSym",value:function(c){this._sym=c}},{key:"setVisitedEdge",value:function(c){this.setVisited(c),this._sym.setVisited(c)}},{key:"setEdgeDepths",value:function(c,y){var N=this.getEdge().getDepthDelta();this._isForward||(N=-N);var z=1;c===De.LEFT&&(z=-1);var se=De.opposite(c),ve=y+N*z;this.setDepth(c,y),this.setDepth(se,ve)}},{key:"getEdgeRing",value:function(){return this._edgeRing}},{key:"isInResult",value:function(){return this._isInResult}},{key:"setNext",value:function(c){this._next=c}},{key:"isVisited",value:function(){return this._isVisited}}],[{key:"constructor_",value:function(){this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999];var c=arguments[0],y=arguments[1];if(co.constructor_.call(this,c),this._isForward=y,y)this.init(c.getCoordinate(0),c.getCoordinate(1));else{var N=c.getNumPoints()-1;this.init(c.getCoordinate(N),c.getCoordinate(N-1))}this.computeDirectedLabel()}},{key:"depthFactor",value:function(c,y){return c===ae.EXTERIOR&&y===ae.INTERIOR?1:c===ae.INTERIOR&&y===ae.EXTERIOR?-1:0}}])}(co),ho=function(){return a(function b(){r(this,b)},[{key:"createNode",value:function(b){return new xr(b,null)}}])}(),zs=function(){return a(function b(){r(this,b),b.constructor_.apply(this,arguments)},[{key:"printEdges",value:function(b){b.println("Edges:");for(var u=0;u<this._edges.size();u++){b.println("edge "+u+":");var c=this._edges.get(u);c.print(b),c.eiList.print(b)}}},{key:"find",value:function(b){return this._nodes.find(b)}},{key:"addNode",value:function(){if(arguments[0]instanceof xr){var b=arguments[0];return this._nodes.addNode(b)}if(arguments[0]instanceof X){var u=arguments[0];return this._nodes.addNode(u)}}},{key:"getNodeIterator",value:function(){return this._nodes.iterator()}},{key:"linkResultDirectedEdges",value:function(){for(var b=this._nodes.iterator();b.hasNext();)b.next().getEdges().linkResultDirectedEdges()}},{key:"debugPrintln",value:function(b){$t.out.println(b)}},{key:"isBoundaryNode",value:function(b,u){var c=this._nodes.find(u);if(c===null)return!1;var y=c.getLabel();return y!==null&&y.getLocation(b)===ae.BOUNDARY}},{key:"linkAllDirectedEdges",value:function(){for(var b=this._nodes.iterator();b.hasNext();)b.next().getEdges().linkAllDirectedEdges()}},{key:"matchInSameDirection",value:function(b,u,c,y){return!!b.equals(c)&&ft.index(b,u,y)===ft.COLLINEAR&&Ni.quadrant(b,u)===Ni.quadrant(c,y)}},{key:"getEdgeEnds",value:function(){return this._edgeEndList}},{key:"debugPrint",value:function(b){$t.out.print(b)}},{key:"getEdgeIterator",value:function(){return this._edges.iterator()}},{key:"findEdgeInSameDirection",value:function(b,u){for(var c=0;c<this._edges.size();c++){var y=this._edges.get(c),N=y.getCoordinates();if(this.matchInSameDirection(b,u,N[0],N[1])||this.matchInSameDirection(b,u,N[N.length-1],N[N.length-2]))return y}return null}},{key:"insertEdge",value:function(b){this._edges.add(b)}},{key:"findEdgeEnd",value:function(b){for(var u=this.getEdgeEnds().iterator();u.hasNext();){var c=u.next();if(c.getEdge()===b)return c}return null}},{key:"addEdges",value:function(b){for(var u=b.iterator();u.hasNext();){var c=u.next();this._edges.add(c);var y=new Es(c,!0),N=new Es(c,!1);y.setSym(N),N.setSym(y),this.add(y),this.add(N)}}},{key:"add",value:function(b){this._nodes.add(b),this._edgeEndList.add(b)}},{key:"getNodes",value:function(){return this._nodes.values()}},{key:"findEdge",value:function(b,u){for(var c=0;c<this._edges.size();c++){var y=this._edges.get(c),N=y.getCoordinates();if(b.equals(N[0])&&u.equals(N[1]))return y}return null}}],[{key:"constructor_",value:function(){if(this._edges=new mt,this._nodes=null,this._edgeEndList=new mt,arguments.length===0)this._nodes=new Qi(new ho);else if(arguments.length===1){var b=arguments[0];this._nodes=new Qi(b)}}},{key:"linkResultDirectedEdges",value:function(b){for(var u=b.iterator();u.hasNext();)u.next().getEdges().linkResultDirectedEdges()}}])}(),Jo=function(){function b(){r(this,b),b.constructor_.apply(this,arguments)}return a(b,[{key:"sortShellsAndHoles",value:function(u,c,y){for(var N=u.iterator();N.hasNext();){var z=N.next();z.isHole()?y.add(z):c.add(z)}}},{key:"computePolygons",value:function(u){for(var c=new mt,y=u.iterator();y.hasNext();){var N=y.next().toPolygon(this._geometryFactory);c.add(N)}return c}},{key:"placeFreeHoles",value:function(u,c){for(var y=c.iterator();y.hasNext();){var N=y.next();if(N.getShell()===null){var z=b.findEdgeRingContaining(N,u);if(z===null)throw new Qe("unable to assign hole to a shell",N.getCoordinate(0));N.setShell(z)}}}},{key:"buildMinimalEdgeRings",value:function(u,c,y){for(var N=new mt,z=u.iterator();z.hasNext();){var se=z.next();if(se.getMaxNodeDegree()>2){se.linkDirectedEdgesForMinimalEdgeRings();var ve=se.buildMinimalRings(),Le=this.findShell(ve);Le!==null?(this.placePolygonHoles(Le,ve),c.add(Le)):y.addAll(ve)}else N.add(se)}return N}},{key:"buildMaximalEdgeRings",value:function(u){for(var c=new mt,y=u.iterator();y.hasNext();){var N=y.next();if(N.isInResult()&&N.getLabel().isArea()&&N.getEdgeRing()===null){var z=new $i(N,this._geometryFactory);c.add(z),z.setInResult()}}return c}},{key:"placePolygonHoles",value:function(u,c){for(var y=c.iterator();y.hasNext();){var N=y.next();N.isHole()&&N.setShell(u)}}},{key:"getPolygons",value:function(){return this.computePolygons(this._shellList)}},{key:"findShell",value:function(u){for(var c=0,y=null,N=u.iterator();N.hasNext();){var z=N.next();z.isHole()||(y=z,c++)}return be.isTrue(c<=1,"found two shells in MinimalEdgeRing list"),y}},{key:"add",value:function(){if(arguments.length===1){var u=arguments[0];this.add(u.getEdgeEnds(),u.getNodes())}else if(arguments.length===2){var c=arguments[0],y=arguments[1];zs.linkResultDirectedEdges(y);var N=this.buildMaximalEdgeRings(c),z=new mt,se=this.buildMinimalEdgeRings(N,this._shellList,z);this.sortShellsAndHoles(se,this._shellList,z),this.placeFreeHoles(this._shellList,z)}}}],[{key:"constructor_",value:function(){this._geometryFactory=null,this._shellList=new mt;var u=arguments[0];this._geometryFactory=u}},{key:"findEdgeRingContaining",value:function(u,c){for(var y=u.getLinearRing(),N=y.getEnvelopeInternal(),z=y.getCoordinateN(0),se=null,ve=null,Le=c.iterator();Le.hasNext();){var xe=Le.next(),Xe=xe.getLinearRing(),ct=Xe.getEnvelopeInternal();if(!ct.equals(N)&&ct.contains(N)){z=kt.ptNotInList(y.getCoordinates(),Xe.getCoordinates());var Lt=!1;Oi.isInRing(z,Xe.getCoordinates())&&(Lt=!0),Lt&&(se===null||ve.contains(ct))&&(ve=(se=xe).getLinearRing().getEnvelopeInternal())}}return se}}])}(),Ss=function(){return a(function b(){r(this,b)},[{key:"getBounds",value:function(){}}])}(),Mn=function(){return a(function b(){r(this,b),b.constructor_.apply(this,arguments)},[{key:"getItem",value:function(){return this._item}},{key:"getBounds",value:function(){return this._bounds}},{key:"interfaces_",get:function(){return[Ss,G]}}],[{key:"constructor_",value:function(){this._bounds=null,this._item=null;var b=arguments[0],u=arguments[1];this._bounds=b,this._item=u}}])}(),Gs=function(){return a(function b(){r(this,b),b.constructor_.apply(this,arguments)},[{key:"poll",value:function(){if(this.isEmpty())return null;var b=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),b}},{key:"size",value:function(){return this._size}},{key:"reorder",value:function(b){for(var u=null,c=this._items.get(b);2*b<=this._size&&((u=2*b)!==this._size&&this._items.get(u+1).compareTo(this._items.get(u))<0&&u++,this._items.get(u).compareTo(c)<0);b=u)this._items.set(b,this._items.get(u));this._items.set(b,c)}},{key:"clear",value:function(){this._size=0,this._items.clear()}},{key:"peek",value:function(){return this.isEmpty()?null:this._items.get(1)}},{key:"isEmpty",value:function(){return this._size===0}},{key:"add",value:function(b){this._items.add(null),this._size+=1;var u=this._size;for(this._items.set(0,b);b.compareTo(this._items.get(Math.trunc(u/2)))<0;u/=2)this._items.set(u,this._items.get(Math.trunc(u/2)));this._items.set(u,b)}}],[{key:"constructor_",value:function(){this._size=null,this._items=null,this._size=0,this._items=new mt,this._items.add(null)}}])}(),er=function(){return a(function b(){r(this,b)},[{key:"insert",value:function(b,u){}},{key:"remove",value:function(b,u){}},{key:"query",value:function(){}}])}(),ki=function(){return a(function b(){r(this,b),b.constructor_.apply(this,arguments)},[{key:"getLevel",value:function(){return this._level}},{key:"size",value:function(){return this._childBoundables.size()}},{key:"getChildBoundables",value:function(){return this._childBoundables}},{key:"addChildBoundable",value:function(b){be.isTrue(this._bounds===null),this._childBoundables.add(b)}},{key:"isEmpty",value:function(){return this._childBoundables.isEmpty()}},{key:"getBounds",value:function(){return this._bounds===null&&(this._bounds=this.computeBounds()),this._bounds}},{key:"interfaces_",get:function(){return[Ss,G]}}],[{key:"constructor_",value:function(){if(this._childBoundables=new mt,this._bounds=null,this._level=null,arguments.length!==0){if(arguments.length===1){var b=arguments[0];this._level=b}}}}])}(),jr={reverseOrder:function(){return{compare:function(b,u){return u.compareTo(b)}}},min:function(b){return jr.sort(b),b.get(0)},sort:function(b,u){var c=b.toArray();u?Be.sort(c,u):Be.sort(c);for(var y=b.iterator(),N=0,z=c.length;N<z;N++)y.next(),y.set(c[N])},singletonList:function(b){var u=new mt;return u.add(b),u}},Qo=function(){function b(){r(this,b)}return a(b,null,[{key:"maxDistance",value:function(u,c,y,N,z,se,ve,Le){var xe=b.distance(u,c,z,se);return xe=Math.max(xe,b.distance(u,c,ve,Le)),xe=Math.max(xe,b.distance(y,N,z,se)),xe=Math.max(xe,b.distance(y,N,ve,Le))}},{key:"distance",value:function(u,c,y,N){var z=y-u,se=N-c;return Math.sqrt(z*z+se*se)}},{key:"maximumDistance",value:function(u,c){var y=Math.min(u.getMinX(),c.getMinX()),N=Math.min(u.getMinY(),c.getMinY()),z=Math.max(u.getMaxX(),c.getMaxX()),se=Math.max(u.getMaxY(),c.getMaxY());return b.distance(y,N,z,se)}},{key:"minMaxDistance",value:function(u,c){var y=u.getMinX(),N=u.getMinY(),z=u.getMaxX(),se=u.getMaxY(),ve=c.getMinX(),Le=c.getMinY(),xe=c.getMaxX(),Xe=c.getMaxY(),ct=b.maxDistance(y,N,y,se,ve,Le,ve,Xe);return ct=Math.min(ct,b.maxDistance(y,N,y,se,ve,Le,xe,Le)),ct=Math.min(ct,b.maxDistance(y,N,y,se,xe,Xe,ve,Xe)),ct=Math.min(ct,b.maxDistance(y,N,y,se,xe,Xe,xe,Le)),ct=Math.min(ct,b.maxDistance(y,N,z,N,ve,Le,ve,Xe)),ct=Math.min(ct,b.maxDistance(y,N,z,N,ve,Le,xe,Le)),ct=Math.min(ct,b.maxDistance(y,N,z,N,xe,Xe,ve,Xe)),ct=Math.min(ct,b.maxDistance(y,N,z,N,xe,Xe,xe,Le)),ct=Math.min(ct,b.maxDistance(z,se,y,se,ve,Le,ve,Xe)),ct=Math.min(ct,b.maxDistance(z,se,y,se,ve,Le,xe,Le)),ct=Math.min(ct,b.maxDistance(z,se,y,se,xe,Xe,ve,Xe)),ct=Math.min(ct,b.maxDistance(z,se,y,se,xe,Xe,xe,Le)),ct=Math.min(ct,b.maxDistance(z,se,z,N,ve,Le,ve,Xe)),ct=Math.min(ct,b.maxDistance(z,se,z,N,ve,Le,xe,Le)),ct=Math.min(ct,b.maxDistance(z,se,z,N,xe,Xe,ve,Xe)),ct=Math.min(ct,b.maxDistance(z,se,z,N,xe,Xe,xe,Le))}}])}(),Br=function(){function b(){r(this,b),b.constructor_.apply(this,arguments)}return a(b,[{key:"maximumDistance",value:function(){return Qo.maximumDistance(this._boundable1.getBounds(),this._boundable2.getBounds())}},{key:"expandToQueue",value:function(u,c){var y=b.isComposite(this._boundable1),N=b.isComposite(this._boundable2);if(y&&N)return b.area(this._boundable1)>b.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,!1,u,c),null):(this.expand(this._boundable2,this._boundable1,!0,u,c),null);if(y)return this.expand(this._boundable1,this._boundable2,!1,u,c),null;if(N)return this.expand(this._boundable2,this._boundable1,!0,u,c),null;throw new P("neither boundable is composite")}},{key:"isLeaves",value:function(){return!(b.isComposite(this._boundable1)||b.isComposite(this._boundable2))}},{key:"compareTo",value:function(u){var c=u;return this._distance<c._distance?-1:this._distance>c._distance?1:0}},{key:"expand",value:function(u,c,y,N,z){for(var se=u.getChildBoundables().iterator();se.hasNext();){var ve=se.next(),Le=null;(Le=y?new b(c,ve,this._itemDistance):new b(ve,c,this._itemDistance)).getDistance()<z&&N.add(Le)}}},{key:"getBoundable",value:function(u){return u===0?this._boundable1:this._boundable2}},{key:"getDistance",value:function(){return this._distance}},{key:"distance",value:function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())}},{key:"interfaces_",get:function(){return[V]}}],[{key:"constructor_",value:function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var u=arguments[0],c=arguments[1],y=arguments[2];this._boundable1=u,this._boundable2=c,this._itemDistance=y,this._distance=this.distance()}},{key:"area",value:function(u){return u.getBounds().getArea()}},{key:"isComposite",value:function(u){return u instanceof ki}}])}(),Hs=function(){return a(function b(){r(this,b)},[{key:"visitItem",value:function(b){}}])}(),Wr=function(){function b(){r(this,b),b.constructor_.apply(this,arguments)}return a(b,[{key:"queryInternal",value:function(){if(Ve(arguments[2],Hs)&&arguments[0]instanceof Object&&arguments[1]instanceof ki)for(var u=arguments[0],c=arguments[2],y=arguments[1].getChildBoundables(),N=0;N<y.size();N++){var z=y.get(N);this.getIntersectsOp().intersects(z.getBounds(),u)&&(z instanceof ki?this.queryInternal(u,z,c):z instanceof Mn?c.visitItem(z.getItem()):be.shouldNeverReachHere())}else if(Ve(arguments[2],Pe)&&arguments[0]instanceof Object&&arguments[1]instanceof ki)for(var se=arguments[0],ve=arguments[2],Le=arguments[1].getChildBoundables(),xe=0;xe<Le.size();xe++){var Xe=Le.get(xe);this.getIntersectsOp().intersects(Xe.getBounds(),se)&&(Xe instanceof ki?this.queryInternal(se,Xe,ve):Xe instanceof Mn?ve.add(Xe.getItem()):be.shouldNeverReachHere())}}},{key:"getNodeCapacity",value:function(){return this._nodeCapacity}},{key:"lastNode",value:function(u){return u.get(u.size()-1)}},{key:"size",value:function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.size(this._root));if(arguments.length===1){for(var u=0,c=arguments[0].getChildBoundables().iterator();c.hasNext();){var y=c.next();y instanceof ki?u+=this.size(y):y instanceof Mn&&(u+=1)}return u}}},{key:"removeItem",value:function(u,c){for(var y=null,N=u.getChildBoundables().iterator();N.hasNext();){var z=N.next();z instanceof Mn&&z.getItem()===c&&(y=z)}return y!==null&&(u.getChildBoundables().remove(y),!0)}},{key:"itemsTree",value:function(){if(arguments.length===0){this.build();var u=this.itemsTree(this._root);return u===null?new mt:u}if(arguments.length===1){for(var c=arguments[0],y=new mt,N=c.getChildBoundables().iterator();N.hasNext();){var z=N.next();if(z instanceof ki){var se=this.itemsTree(z);se!==null&&y.add(se)}else z instanceof Mn?y.add(z.getItem()):be.shouldNeverReachHere()}return y.size()<=0?null:y}}},{key:"insert",value:function(u,c){be.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Mn(u,c))}},{key:"boundablesAtLevel",value:function(){if(arguments.length===1){var u=arguments[0],c=new mt;return this.boundablesAtLevel(u,this._root,c),c}if(arguments.length===3){var y=arguments[0],N=arguments[1],z=arguments[2];if(be.isTrue(y>-2),N.getLevel()===y)return z.add(N),null;for(var se=N.getChildBoundables().iterator();se.hasNext();){var ve=se.next();ve instanceof ki?this.boundablesAtLevel(y,ve,z):(be.isTrue(ve instanceof Mn),y===-1&&z.add(ve))}return null}}},{key:"query",value:function(){if(arguments.length===1){var u=arguments[0];this.build();var c=new mt;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),u)&&this.queryInternal(u,this._root,c),c}if(arguments.length===2){var y=arguments[0],N=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),y)&&this.queryInternal(y,this._root,N)}}},{key:"build",value:function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0}},{key:"getRoot",value:function(){return this.build(),this._root}},{key:"remove",value:function(){if(arguments.length===2){var u=arguments[0],c=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),u)&&this.remove(u,this._root,c)}if(arguments.length===3){var y=arguments[0],N=arguments[1],z=arguments[2],se=this.removeItem(N,z);if(se)return!0;for(var ve=null,Le=N.getChildBoundables().iterator();Le.hasNext();){var xe=Le.next();if(this.getIntersectsOp().intersects(xe.getBounds(),y)&&xe instanceof ki&&(se=this.remove(y,xe,z))){ve=xe;break}}return ve!==null&&ve.getChildBoundables().isEmpty()&&N.getChildBoundables().remove(ve),se}}},{key:"createHigherLevels",value:function(u,c){be.isTrue(!u.isEmpty());var y=this.createParentBoundables(u,c+1);return y.size()===1?y.get(0):this.createHigherLevels(y,c+1)}},{key:"depth",value:function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(arguments.length===1){for(var u=0,c=arguments[0].getChildBoundables().iterator();c.hasNext();){var y=c.next();if(y instanceof ki){var N=this.depth(y);N>u&&(u=N)}}return u+1}}},{key:"createParentBoundables",value:function(u,c){be.isTrue(!u.isEmpty());var y=new mt;y.add(this.createNode(c));var N=new mt(u);jr.sort(N,this.getComparator());for(var z=N.iterator();z.hasNext();){var se=z.next();this.lastNode(y).getChildBoundables().size()===this.getNodeCapacity()&&y.add(this.createNode(c)),this.lastNode(y).addChildBoundable(se)}return y}},{key:"isEmpty",value:function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()}},{key:"interfaces_",get:function(){return[G]}}],[{key:"constructor_",value:function(){if(this._root=null,this._built=!1,this._itemBoundables=new mt,this._nodeCapacity=null,arguments.length===0)b.constructor_.call(this,b.DEFAULT_NODE_CAPACITY);else if(arguments.length===1){var u=arguments[0];be.isTrue(u>1,"Node capacity must be greater than 1"),this._nodeCapacity=u}}},{key:"compareDoubles",value:function(u,c){return u>c?1:u<c?-1:0}}])}();Wr.IntersectsOp=function(){},Wr.DEFAULT_NODE_CAPACITY=10;var ea=function(){return a(function b(){r(this,b)},[{key:"distance",value:function(b,u){}}])}(),lr=function(b){function u(){var c;return r(this,u),c=i(this,u),u.constructor_.apply(c,arguments),c}return m(u,b),a(u,[{key:"createParentBoundablesFromVerticalSlices",value:function(c,y){be.isTrue(c.length>0);for(var N=new mt,z=0;z<c.length;z++)N.addAll(this.createParentBoundablesFromVerticalSlice(c[z],y));return N}},{key:"nearestNeighbourK",value:function(){if(arguments.length===2){var c=arguments[0],y=arguments[1];return this.nearestNeighbourK(c,ie.POSITIVE_INFINITY,y)}if(arguments.length===3){var N=arguments[0],z=arguments[2],se=arguments[1],ve=new Gs;ve.add(N);for(var Le=new Gs;!ve.isEmpty()&&se>=0;){var xe=ve.poll(),Xe=xe.getDistance();if(Xe>=se)break;xe.isLeaves()?Le.size()<z?Le.add(xe):(Le.peek().getDistance()>Xe&&(Le.poll(),Le.add(xe)),se=Le.peek().getDistance()):xe.expandToQueue(ve,se)}return u.getItems(Le)}}},{key:"createNode",value:function(c){return new Us(c)}},{key:"size",value:function(){return arguments.length===0?w(u,"size",this,1).call(this):w(u,"size",this,1).apply(this,arguments)}},{key:"insert",value:function(){if(!(arguments.length===2&&arguments[1]instanceof Object&&arguments[0]instanceof _e))return w(u,"insert",this,1).apply(this,arguments);var c=arguments[0],y=arguments[1];if(c.isNull())return null;w(u,"insert",this,1).call(this,c,y)}},{key:"getIntersectsOp",value:function(){return u.intersectsOp}},{key:"verticalSlices",value:function(c,y){for(var N=Math.trunc(Math.ceil(c.size()/y)),z=new Array(y).fill(null),se=c.iterator(),ve=0;ve<y;ve++){z[ve]=new mt;for(var Le=0;se.hasNext()&&Le<N;){var xe=se.next();z[ve].add(xe),Le++}}return z}},{key:"query",value:function(){if(arguments.length===1){var c=arguments[0];return w(u,"query",this,1).call(this,c)}if(arguments.length===2){var y=arguments[0],N=arguments[1];w(u,"query",this,1).call(this,y,N)}}},{key:"getComparator",value:function(){return u.yComparator}},{key:"createParentBoundablesFromVerticalSlice",value:function(c,y){return w(u,"createParentBoundables",this,1).call(this,c,y)}},{key:"remove",value:function(){if(arguments.length===2&&arguments[1]instanceof Object&&arguments[0]instanceof _e){var c=arguments[0],y=arguments[1];return w(u,"remove",this,1).call(this,c,y)}return w(u,"remove",this,1).apply(this,arguments)}},{key:"depth",value:function(){return arguments.length===0?w(u,"depth",this,1).call(this):w(u,"depth",this,1).apply(this,arguments)}},{key:"createParentBoundables",value:function(c,y){be.isTrue(!c.isEmpty());var N=Math.trunc(Math.ceil(c.size()/this.getNodeCapacity())),z=new mt(c);jr.sort(z,u.xComparator);var se=this.verticalSlices(z,Math.trunc(Math.ceil(Math.sqrt(N))));return this.createParentBoundablesFromVerticalSlices(se,y)}},{key:"nearestNeighbour",value:function(){if(arguments.length===1){if(Ve(arguments[0],ea)){var c=arguments[0];if(this.isEmpty())return null;var y=new Br(this.getRoot(),this.getRoot(),c);return this.nearestNeighbour(y)}if(arguments[0]instanceof Br){var N=arguments[0],z=ie.POSITIVE_INFINITY,se=null,ve=new Gs;for(ve.add(N);!ve.isEmpty()&&z>0;){var Le=ve.poll(),xe=Le.getDistance();if(xe>=z)break;Le.isLeaves()?(z=xe,se=Le):Le.expandToQueue(ve,z)}return se===null?null:[se.getBoundable(0).getItem(),se.getBoundable(1).getItem()]}}else{if(arguments.length===2){var Xe=arguments[0],ct=arguments[1];if(this.isEmpty()||Xe.isEmpty())return null;var Lt=new Br(this.getRoot(),Xe.getRoot(),ct);return this.nearestNeighbour(Lt)}if(arguments.length===3){var Ht=arguments[2],on=new Mn(arguments[0],arguments[1]),hn=new Br(this.getRoot(),on,Ht);return this.nearestNeighbour(hn)[0]}if(arguments.length===4){var Wn=arguments[2],xn=arguments[3],hi=new Mn(arguments[0],arguments[1]),vi=new Br(this.getRoot(),hi,Wn);return this.nearestNeighbourK(vi,xn)}}}},{key:"isWithinDistance",value:function(){if(arguments.length===2){var c=arguments[0],y=arguments[1],N=ie.POSITIVE_INFINITY,z=new Gs;for(z.add(c);!z.isEmpty();){var se=z.poll(),ve=se.getDistance();if(ve>y)return!1;if(se.maximumDistance()<=y)return!0;if(se.isLeaves()){if((N=ve)<=y)return!0}else se.expandToQueue(z,N)}return!1}if(arguments.length===3){var Le=arguments[0],xe=arguments[1],Xe=arguments[2],ct=new Br(this.getRoot(),Le.getRoot(),xe);return this.isWithinDistance(ct,Xe)}}},{key:"interfaces_",get:function(){return[er,G]}}],[{key:"constructor_",value:function(){if(arguments.length===0)u.constructor_.call(this,u.DEFAULT_NODE_CAPACITY);else if(arguments.length===1){var c=arguments[0];Wr.constructor_.call(this,c)}}},{key:"centreX",value:function(c){return u.avg(c.getMinX(),c.getMaxX())}},{key:"avg",value:function(c,y){return(c+y)/2}},{key:"getItems",value:function(c){for(var y=new Array(c.size()).fill(null),N=0;!c.isEmpty();){var z=c.poll();y[N]=z.getBoundable(0).getItem(),N++}return y}},{key:"centreY",value:function(c){return u.avg(c.getMinY(),c.getMaxY())}}])}(Wr),Us=function(b){function u(){var c;return r(this,u),c=i(this,u),u.constructor_.apply(c,arguments),c}return m(u,b),a(u,[{key:"computeBounds",value:function(){for(var c=null,y=this.getChildBoundables().iterator();y.hasNext();){var N=y.next();c===null?c=new _e(N.getBounds()):c.expandToInclude(N.getBounds())}return c}}],[{key:"constructor_",value:function(){var c=arguments[0];ki.constructor_.call(this,c)}}])}(ki);lr.STRtreeNode=Us,lr.xComparator=new(function(){return a(function b(){r(this,b)},[{key:"interfaces_",get:function(){return[le]}},{key:"compare",value:function(b,u){return Wr.compareDoubles(lr.centreX(b.getBounds()),lr.centreX(u.getBounds()))}}])}()),lr.yComparator=new(function(){return a(function b(){r(this,b)},[{key:"interfaces_",get:function(){return[le]}},{key:"compare",value:function(b,u){return Wr.compareDoubles(lr.centreY(b.getBounds()),lr.centreY(u.getBounds()))}}])}()),lr.intersectsOp=new(function(){return a(function b(){r(this,b)},[{key:"interfaces_",get:function(){return[IntersectsOp]}},{key:"intersects",value:function(b,u){return b.intersects(u)}}])}()),lr.DEFAULT_NODE_CAPACITY=10;var ta=function(){function b(){r(this,b)}return a(b,null,[{key:"relativeSign",value:function(u,c){return u<c?-1:u>c?1:0}},{key:"compare",value:function(u,c,y){if(c.equals2D(y))return 0;var N=b.relativeSign(c.x,y.x),z=b.relativeSign(c.y,y.y);switch(u){case 0:return b.compareValue(N,z);case 1:return b.compareValue(z,N);case 2:return b.compareValue(z,-N);case 3:return b.compareValue(-N,z);case 4:return b.compareValue(-N,-z);case 5:return b.compareValue(-z,-N);case 6:return b.compareValue(-z,N);case 7:return b.compareValue(N,-z)}return be.shouldNeverReachHere("invalid octant value"),0}},{key:"compareValue",value:function(u,c){return u<0?-1:u>0?1:c<0?-1:c>0?1:0}}])}(),ur=function(){return a(function b(){r(this,b),b.constructor_.apply(this,arguments)},[{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(b){b.print(this.coord),b.print(" seg # = "+this.segmentIndex)}},{key:"compareTo",value:function(b){var u=b;return this.segmentIndex<u.segmentIndex?-1:this.segmentIndex>u.segmentIndex?1:this.coord.equals2D(u.coord)?0:this._isInterior?u._isInterior?ta.compare(this._segmentOctant,this.coord,u.coord):1:-1}},{key:"isEndPoint",value:function(b){return this.segmentIndex===0&&!this._isInterior||this.segmentIndex===b}},{key:"toString",value:function(){return this.segmentIndex+":"+this.coord.toString()}},{key:"isInterior",value:function(){return this._isInterior}},{key:"interfaces_",get:function(){return[V]}}],[{key:"constructor_",value:function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var b=arguments[0],u=arguments[1],c=arguments[2],y=arguments[3];this._segString=b,this.coord=new X(u),this.segmentIndex=c,this._segmentOctant=y,this._isInterior=!u.equals2D(b.getCoordinate(c))}}])}(),qs=function(){return a(function b(){r(this,b)},[{key:"hasNext",value:function(){}},{key:"next",value:function(){}},{key:"remove",value:function(){}}])}(),Ao=function(){return a(function b(){r(this,b),b.constructor_.apply(this,arguments)},[{key:"getSplitCoordinates",value:function(){var b=new qe;this.addEndpoints();for(var u=this.iterator(),c=u.next();u.hasNext();){var y=u.next();this.addEdgeCoordinates(c,y,b),c=y}return b.toCoordinateArray()}},{key:"addCollapsedNodes",value:function(){var b=new mt;this.findCollapsesFromInsertedNodes(b),this.findCollapsesFromExistingVertices(b);for(var u=b.iterator();u.hasNext();){var c=u.next().intValue();this.add(this._edge.getCoordinate(c),c)}}},{key:"createSplitEdgePts",value:function(b,u){var c=u.segmentIndex-b.segmentIndex+2;if(c===2)return[new X(b.coord),new X(u.coord)];var y=this._edge.getCoordinate(u.segmentIndex),N=u.isInterior()||!u.coord.equals2D(y);N||c--;var z=new Array(c).fill(null),se=0;z[se++]=new X(b.coord);for(var ve=b.segmentIndex+1;ve<=u.segmentIndex;ve++)z[se++]=this._edge.getCoordinate(ve);return N&&(z[se]=new X(u.coord)),z}},{key:"print",value:function(b){b.println("Intersections:");for(var u=this.iterator();u.hasNext();)u.next().print(b)}},{key:"findCollapsesFromExistingVertices",value:function(b){for(var u=0;u<this._edge.size()-2;u++){var c=this._edge.getCoordinate(u);this._edge.getCoordinate(u+1);var y=this._edge.getCoordinate(u+2);c.equals2D(y)&&b.add(Ke.valueOf(u+1))}}},{key:"addEdgeCoordinates",value:function(b,u,c){var y=this.createSplitEdgePts(b,u);c.add(y,!1)}},{key:"iterator",value:function(){return this._nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(b){this.addEndpoints(),this.addCollapsedNodes();for(var u=this.iterator(),c=u.next();u.hasNext();){var y=u.next(),N=this.createSplitEdge(c,y);b.add(N),c=y}}},{key:"findCollapseIndex",value:function(b,u,c){if(!b.coord.equals2D(u.coord))return!1;var y=u.segmentIndex-b.segmentIndex;return u.isInterior()||y--,y===1&&(c[0]=b.segmentIndex+1,!0)}},{key:"findCollapsesFromInsertedNodes",value:function(b){for(var u=new Array(1).fill(null),c=this.iterator(),y=c.next();c.hasNext();){var N=c.next();this.findCollapseIndex(y,N,u)&&b.add(Ke.valueOf(u[0])),y=N}}},{key:"getEdge",value:function(){return this._edge}},{key:"addEndpoints",value:function(){var b=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(b),b)}},{key:"createSplitEdge",value:function(b,u){var c=this.createSplitEdgePts(b,u);return new fs(c,this._edge.getData())}},{key:"add",value:function(b,u){var c=new ur(this._edge,b,u,this._edge.getSegmentOctant(u)),y=this._nodeMap.get(c);return y!==null?(be.isTrue(y.coord.equals2D(b),"Found equal nodes with different coordinates"),y):(this._nodeMap.put(c,c),c)}},{key:"checkSplitEdgesCorrectness",value:function(b){var u=this._edge.getCoordinates(),c=b.get(0).getCoordinate(0);if(!c.equals2D(u[0]))throw new pe("bad split edge start point at "+c);var y=b.get(b.size()-1).getCoordinates(),N=y[y.length-1];if(!N.equals2D(u[u.length-1]))throw new pe("bad split edge end point at "+N)}}],[{key:"constructor_",value:function(){this._nodeMap=new An,this._edge=null;var b=arguments[0];this._edge=b}}])}(),Lr=function(){function b(){r(this,b)}return a(b,null,[{key:"octant",value:function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var u=arguments[0],c=arguments[1];if(u===0&&c===0)throw new P("Cannot compute the octant for point ( "+u+", "+c+" )");var y=Math.abs(u),N=Math.abs(c);return u>=0?c>=0?y>=N?0:1:y>=N?7:6:c>=0?y>=N?3:2:y>=N?4:5}if(arguments[0]instanceof X&&arguments[1]instanceof X){var z=arguments[0],se=arguments[1],ve=se.x-z.x,Le=se.y-z.y;if(ve===0&&Le===0)throw new P("Cannot compute the octant for two identical points "+z);return b.octant(ve,Le)}}}])}(),uu=function(){return a(function b(){r(this,b)},[{key:"getCoordinates",value:function(){}},{key:"size",value:function(){}},{key:"getCoordinate",value:function(b){}},{key:"isClosed",value:function(){}},{key:"setData",value:function(b){}},{key:"getData",value:function(){}}])}(),cu=function(){return a(function b(){r(this,b)},[{key:"addIntersection",value:function(b,u){}},{key:"interfaces_",get:function(){return[uu]}}])}(),fs=function(){function b(){r(this,b),b.constructor_.apply(this,arguments)}return a(b,[{key:"getCoordinates",value:function(){return this._pts}},{key:"size",value:function(){return this._pts.length}},{key:"getCoordinate",value:function(u){return this._pts[u]}},{key:"isClosed",value:function(){return this._pts[0].equals(this._pts[this._pts.length-1])}},{key:"getSegmentOctant",value:function(u){return u===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(u),this.getCoordinate(u+1))}},{key:"setData",value:function(u){this._data=u}},{key:"safeOctant",value:function(u,c){return u.equals2D(c)?0:Lr.octant(u,c)}},{key:"getData",value:function(){return this._data}},{key:"addIntersection",value:function(){if(arguments.length===2){var u=arguments[0],c=arguments[1];this.addIntersectionNode(u,c)}else if(arguments.length===4){var y=arguments[1],N=arguments[3],z=new X(arguments[0].getIntersection(N));this.addIntersection(z,y)}}},{key:"toString",value:function(){return ks.toLineString(new wn(this._pts))}},{key:"getNodeList",value:function(){return this._nodeList}},{key:"addIntersectionNode",value:function(u,c){var y=c,N=y+1;if(N<this._pts.length){var z=this._pts[N];u.equals2D(z)&&(y=N)}return this._nodeList.add(u,y)}},{key:"addIntersections",value:function(u,c,y){for(var N=0;N<u.getIntersectionNum();N++)this.addIntersection(u,c,y,N)}},{key:"interfaces_",get:function(){return[cu]}}],[{key:"constructor_",value:function(){this._nodeList=new Ao(this),this._pts=null,this._data=null;var u=arguments[0],c=arguments[1];this._pts=u,this._data=c}},{key:"getNodedSubstrings",value:function(){if(arguments.length===1){var u=arguments[0],c=new mt;return b.getNodedSubstrings(u,c),c}if(arguments.length===2)for(var y=arguments[1],N=arguments[0].iterator();N.hasNext();)N.next().getNodeList().addSplitEdges(y)}}])}(),cr=function(){function b(){r(this,b),b.constructor_.apply(this,arguments)}return a(b,[{key:"minX",value:function(){return Math.min(this.p0.x,this.p1.x)}},{key:"orientationIndex",value:function(){if(arguments[0]instanceof b){var u=arguments[0],c=ft.index(this.p0,this.p1,u.p0),y=ft.index(this.p0,this.p1,u.p1);return c>=0&&y>=0||c<=0&&y<=0?Math.max(c,y):0}if(arguments[0]instanceof X){var N=arguments[0];return ft.index(this.p0,this.p1,N)}}},{key:"toGeometry",value:function(u){return u.createLineString([this.p0,this.p1])}},{key:"isVertical",value:function(){return this.p0.x===this.p1.x}},{key:"equals",value:function(u){if(!(u instanceof b))return!1;var c=u;return this.p0.equals(c.p0)&&this.p1.equals(c.p1)}},{key:"intersection",value:function(u){var c=new et;return c.computeIntersection(this.p0,this.p1,u.p0,u.p1),c.hasIntersection()?c.getIntersection(0):null}},{key:"project",value:function(){if(arguments[0]instanceof X){var u=arguments[0];if(u.equals(this.p0)||u.equals(this.p1))return new X(u);var c=this.projectionFactor(u),y=new X;return y.x=this.p0.x+c*(this.p1.x-this.p0.x),y.y=this.p0.y+c*(this.p1.y-this.p0.y),y}if(arguments[0]instanceof b){var N=arguments[0],z=this.projectionFactor(N.p0),se=this.projectionFactor(N.p1);if(z>=1&&se>=1||z<=0&&se<=0)return null;var ve=this.project(N.p0);z<0&&(ve=this.p0),z>1&&(ve=this.p1);var Le=this.project(N.p1);return se<0&&(Le=this.p0),se>1&&(Le=this.p1),new b(ve,Le)}}},{key:"normalize",value:function(){this.p1.compareTo(this.p0)<0&&this.reverse()}},{key:"angle",value:function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)}},{key:"getCoordinate",value:function(u){return u===0?this.p0:this.p1}},{key:"distancePerpendicular",value:function(u){return sn.pointToLinePerpendicular(u,this.p0,this.p1)}},{key:"minY",value:function(){return Math.min(this.p0.y,this.p1.y)}},{key:"midPoint",value:function(){return b.midPoint(this.p0,this.p1)}},{key:"projectionFactor",value:function(u){if(u.equals(this.p0))return 0;if(u.equals(this.p1))return 1;var c=this.p1.x-this.p0.x,y=this.p1.y-this.p0.y,N=c*c+y*y;return N<=0?ie.NaN:((u.x-this.p0.x)*c+(u.y-this.p0.y)*y)/N}},{key:"closestPoints",value:function(u){var c=this.intersection(u);if(c!==null)return[c,c];var y=new Array(2).fill(null),N=ie.MAX_VALUE,z=null,se=this.closestPoint(u.p0);N=se.distance(u.p0),y[0]=se,y[1]=u.p0;var ve=this.closestPoint(u.p1);(z=ve.distance(u.p1))<N&&(N=z,y[0]=ve,y[1]=u.p1);var Le=u.closestPoint(this.p0);(z=Le.distance(this.p0))<N&&(N=z,y[0]=this.p0,y[1]=Le);var xe=u.closestPoint(this.p1);return(z=xe.distance(this.p1))<N&&(N=z,y[0]=this.p1,y[1]=xe),y}},{key:"closestPoint",value:function(u){var c=this.projectionFactor(u);return c>0&&c<1?this.project(u):this.p0.distance(u)<this.p1.distance(u)?this.p0:this.p1}},{key:"maxX",value:function(){return Math.max(this.p0.x,this.p1.x)}},{key:"getLength",value:function(){return this.p0.distance(this.p1)}},{key:"compareTo",value:function(u){var c=u,y=this.p0.compareTo(c.p0);return y!==0?y:this.p1.compareTo(c.p1)}},{key:"reverse",value:function(){var u=this.p0;this.p0=this.p1,this.p1=u}},{key:"equalsTopo",value:function(u){return this.p0.equals(u.p0)&&this.p1.equals(u.p1)||this.p0.equals(u.p1)&&this.p1.equals(u.p0)}},{key:"lineIntersection",value:function(u){return vt.intersection(this.p0,this.p1,u.p0,u.p1)}},{key:"maxY",value:function(){return Math.max(this.p0.y,this.p1.y)}},{key:"pointAlongOffset",value:function(u,c){var y=this.p0.x+u*(this.p1.x-this.p0.x),N=this.p0.y+u*(this.p1.y-this.p0.y),z=this.p1.x-this.p0.x,se=this.p1.y-this.p0.y,ve=Math.sqrt(z*z+se*se),Le=0,xe=0;if(c!==0){if(ve<=0)throw new IllegalStateException("Cannot compute offset from zero-length line segment");Le=c*z/ve,xe=c*se/ve}return new X(y-xe,N+Le)}},{key:"setCoordinates",value:function(){if(arguments.length===1){var u=arguments[0];this.setCoordinates(u.p0,u.p1)}else if(arguments.length===2){var c=arguments[0],y=arguments[1];this.p0.x=c.x,this.p0.y=c.y,this.p1.x=y.x,this.p1.y=y.y}}},{key:"segmentFraction",value:function(u){var c=this.projectionFactor(u);return c<0?c=0:(c>1||ie.isNaN(c))&&(c=1),c}},{key:"toString",value:function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"}},{key:"isHorizontal",value:function(){return this.p0.y===this.p1.y}},{key:"reflect",value:function(u){var c=this.p1.getY()-this.p0.getY(),y=this.p0.getX()-this.p1.getX(),N=this.p0.getY()*(this.p1.getX()-this.p0.getX())-this.p0.getX()*(this.p1.getY()-this.p0.getY()),z=c*c+y*y,se=c*c-y*y,ve=u.getX(),Le=u.getY();return new X((-se*ve-2*c*y*Le-2*c*N)/z,(se*Le-2*c*y*ve-2*y*N)/z)}},{key:"distance",value:function(){if(arguments[0]instanceof b){var u=arguments[0];return sn.segmentToSegment(this.p0,this.p1,u.p0,u.p1)}if(arguments[0]instanceof X){var c=arguments[0];return sn.pointToSegment(c,this.p0,this.p1)}}},{key:"pointAlong",value:function(u){var c=new X;return c.x=this.p0.x+u*(this.p1.x-this.p0.x),c.y=this.p0.y+u*(this.p1.y-this.p0.y),c}},{key:"hashCode",value:function(){var u=ie.doubleToLongBits(this.p0.x);u^=31*ie.doubleToLongBits(this.p0.y);var c=Math.trunc(u)^Math.trunc(u>>32),y=ie.doubleToLongBits(this.p1.x);return y^=31*ie.doubleToLongBits(this.p1.y),c^(Math.trunc(y)^Math.trunc(y>>32))}},{key:"interfaces_",get:function(){return[V,G]}}],[{key:"constructor_",value:function(){if(this.p0=null,this.p1=null,arguments.length===0)b.constructor_.call(this,new X,new X);else if(arguments.length===1){var u=arguments[0];b.constructor_.call(this,u.p0,u.p1)}else if(arguments.length===2){var c=arguments[0],y=arguments[1];this.p0=c,this.p1=y}else if(arguments.length===4){var N=arguments[0],z=arguments[1],se=arguments[2],ve=arguments[3];b.constructor_.call(this,new X(N,z),new X(se,ve))}}},{key:"midPoint",value:function(u,c){return new X((u.x+c.x)/2,(u.y+c.y)/2)}}])}(),hu=function(){return a(function b(){r(this,b),b.constructor_.apply(this,arguments)},[{key:"overlap",value:function(){if(arguments.length!==2){if(arguments.length===4){var b=arguments[1],u=arguments[2],c=arguments[3];arguments[0].getLineSegment(b,this._overlapSeg1),u.getLineSegment(c,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}}}}],[{key:"constructor_",value:function(){this._overlapSeg1=new cr,this._overlapSeg2=new cr}}])}(),Xa=function(){return a(function b(){r(this,b),b.constructor_.apply(this,arguments)},[{key:"getLineSegment",value:function(b,u){u.p0=this._pts[b],u.p1=this._pts[b+1]}},{key:"computeSelect",value:function(b,u,c,y){var N=this._pts[u],z=this._pts[c];if(c-u==1)return y.select(this,u),null;if(!b.intersects(N,z))return null;var se=Math.trunc((u+c)/2);u<se&&this.computeSelect(b,u,se,y),se<c&&this.computeSelect(b,se,c,y)}},{key:"getCoordinates",value:function(){for(var b=new Array(this._end-this._start+1).fill(null),u=0,c=this._start;c<=this._end;c++)b[u++]=this._pts[c];return b}},{key:"computeOverlaps",value:function(){if(arguments.length===2){var b=arguments[0],u=arguments[1];this.computeOverlaps(this._start,this._end,b,b._start,b._end,u)}else if(arguments.length===6){var c=arguments[0],y=arguments[1],N=arguments[2],z=arguments[3],se=arguments[4],ve=arguments[5];if(y-c==1&&se-z==1)return ve.overlap(this,c,N,z),null;if(!this.overlaps(c,y,N,z,se))return null;var Le=Math.trunc((c+y)/2),xe=Math.trunc((z+se)/2);c<Le&&(z<xe&&this.computeOverlaps(c,Le,N,z,xe,ve),xe<se&&this.computeOverlaps(c,Le,N,xe,se,ve)),Le<y&&(z<xe&&this.computeOverlaps(Le,y,N,z,xe,ve),xe<se&&this.computeOverlaps(Le,y,N,xe,se,ve))}}},{key:"setId",value:function(b){this._id=b}},{key:"select",value:function(b,u){this.computeSelect(b,this._start,this._end,u)}},{key:"getEnvelope",value:function(){if(this._env===null){var b=this._pts[this._start],u=this._pts[this._end];this._env=new _e(b,u)}return this._env}},{key:"overlaps",value:function(b,u,c,y,N){return _e.intersects(this._pts[b],this._pts[u],c._pts[y],c._pts[N])}},{key:"getEndIndex",value:function(){return this._end}},{key:"getStartIndex",value:function(){return this._start}},{key:"getContext",value:function(){return this._context}},{key:"getId",value:function(){return this._id}}],[{key:"constructor_",value:function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var b=arguments[0],u=arguments[1],c=arguments[2],y=arguments[3];this._pts=b,this._start=u,this._end=c,this._context=y}}])}(),lh=function(){function b(){r(this,b)}return a(b,null,[{key:"findChainEnd",value:function(u,c){for(var y=c;y<u.length-1&&u[y].equals2D(u[y+1]);)y++;if(y>=u.length-1)return u.length-1;for(var N=Ni.quadrant(u[y],u[y+1]),z=c+1;z<u.length&&!(!u[z-1].equals2D(u[z])&&Ni.quadrant(u[z-1],u[z])!==N);)z++;return z-1}},{key:"getChains",value:function(){if(arguments.length===1){var u=arguments[0];return b.getChains(u,null)}if(arguments.length===2){var c=arguments[0],y=arguments[1],N=new mt,z=0;do{var se=b.findChainEnd(c,z),ve=new Xa(c,z,se,y);N.add(ve),z=se}while(z<c.length-1);return N}}}])}(),Ka=function(){return a(function b(){r(this,b)},[{key:"computeNodes",value:function(b){}},{key:"getNodedSubstrings",value:function(){}}])}(),na=function(){return a(function b(){r(this,b),b.constructor_.apply(this,arguments)},[{key:"setSegmentIntersector",value:function(b){this._segInt=b}},{key:"interfaces_",get:function(){return[Ka]}}],[{key:"constructor_",value:function(){if(this._segInt=null,arguments.length!==0){if(arguments.length===1){var b=arguments[0];this.setSegmentIntersector(b)}}}}])}(),Ja=function(b){function u(){var c;return r(this,u),c=i(this,u),u.constructor_.apply(c,arguments),c}return m(u,b),a(u,[{key:"getMonotoneChains",value:function(){return this._monoChains}},{key:"getNodedSubstrings",value:function(){return fs.getNodedSubstrings(this._nodedSegStrings)}},{key:"getIndex",value:function(){return this._index}},{key:"add",value:function(c){for(var y=lh.getChains(c.getCoordinates(),c).iterator();y.hasNext();){var N=y.next();N.setId(this._idCounter++),this._index.insert(N.getEnvelope(),N),this._monoChains.add(N)}}},{key:"computeNodes",value:function(c){this._nodedSegStrings=c;for(var y=c.iterator();y.hasNext();)this.add(y.next());this.intersectChains()}},{key:"intersectChains",value:function(){for(var c=new Qa(this._segInt),y=this._monoChains.iterator();y.hasNext();)for(var N=y.next(),z=this._index.query(N.getEnvelope()).iterator();z.hasNext();){var se=z.next();if(se.getId()>N.getId()&&(N.computeOverlaps(se,c),this._nOverlaps++),this._segInt.isDone())return null}}}],[{key:"constructor_",value:function(){if(this._monoChains=new mt,this._index=new lr,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0,arguments.length!==0){if(arguments.length===1){var c=arguments[0];na.constructor_.call(this,c)}}}}])}(na),Qa=function(b){function u(){var c;return r(this,u),c=i(this,u),u.constructor_.apply(c,arguments),c}return m(u,b),a(u,[{key:"overlap",value:function(){if(arguments.length!==4)return w(u,"overlap",this,1).apply(this,arguments);var c=arguments[1],y=arguments[2],N=arguments[3],z=arguments[0].getContext(),se=y.getContext();this._si.processIntersections(z,c,se,N)}}],[{key:"constructor_",value:function(){this._si=null;var c=arguments[0];this._si=c}}])}(hu);Ja.SegmentOverlapAction=Qa;var Cr=function(){function b(){r(this,b),b.constructor_.apply(this,arguments)}return a(b,[{key:"isDeletable",value:function(u,c,y,N){var z=this._inputLine[u],se=this._inputLine[c],ve=this._inputLine[y];return!!this.isConcave(z,se,ve)&&!!this.isShallow(z,se,ve,N)&&this.isShallowSampled(z,se,u,y,N)}},{key:"deleteShallowConcavities",value:function(){for(var u=1,c=this.findNextNonDeletedIndex(u),y=this.findNextNonDeletedIndex(c),N=!1;y<this._inputLine.length;){var z=!1;this.isDeletable(u,c,y,this._distanceTol)&&(this._isDeleted[c]=b.DELETE,z=!0,N=!0),u=z?y:c,c=this.findNextNonDeletedIndex(u),y=this.findNextNonDeletedIndex(c)}return N}},{key:"isShallowConcavity",value:function(u,c,y,N){return ft.index(u,c,y)===this._angleOrientation&&sn.pointToSegment(c,u,y)<N}},{key:"isShallowSampled",value:function(u,c,y,N,z){var se=Math.trunc((N-y)/b.NUM_PTS_TO_CHECK);se<=0&&(se=1);for(var ve=y;ve<N;ve+=se)if(!this.isShallow(u,c,this._inputLine[ve],z))return!1;return!0}},{key:"isConcave",value:function(u,c,y){var N=ft.index(u,c,y)===this._angleOrientation;return N}},{key:"simplify",value:function(u){this._distanceTol=Math.abs(u),u<0&&(this._angleOrientation=ft.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var c=!1;do c=this.deleteShallowConcavities();while(c);return this.collapseLine()}},{key:"findNextNonDeletedIndex",value:function(u){for(var c=u+1;c<this._inputLine.length&&this._isDeleted[c]===b.DELETE;)c++;return c}},{key:"isShallow",value:function(u,c,y,N){return sn.pointToSegment(c,u,y)<N}},{key:"collapseLine",value:function(){for(var u=new qe,c=0;c<this._inputLine.length;c++)this._isDeleted[c]!==b.DELETE&&u.add(this._inputLine[c]);return u.toCoordinateArray()}}],[{key:"constructor_",value:function(){this._inputLine=null,this._distanceTol=null,this._isDeleted=null,this._angleOrientation=ft.COUNTERCLOCKWISE;var u=arguments[0];this._inputLine=u}},{key:"simplify",value:function(u,c){return new b(u).simplify(c)}}])}();Cr.INIT=0,Cr.DELETE=1,Cr.KEEP=1,Cr.NUM_PTS_TO_CHECK=10;var Ro=function(){function b(){r(this,b),b.constructor_.apply(this,arguments)}return a(b,[{key:"getCoordinates",value:function(){return this._ptList.toArray(b.COORDINATE_ARRAY_TYPE)}},{key:"setPrecisionModel",value:function(u){this._precisionModel=u}},{key:"addPt",value:function(u){var c=new X(u);if(this._precisionModel.makePrecise(c),this.isRedundant(c))return null;this._ptList.add(c)}},{key:"reverse",value:function(){}},{key:"addPts",value:function(u,c){if(c)for(var y=0;y<u.length;y++)this.addPt(u[y]);else for(var N=u.length-1;N>=0;N--)this.addPt(u[N])}},{key:"isRedundant",value:function(u){if(this._ptList.size()<1)return!1;var c=this._ptList.get(this._ptList.size()-1);return u.distance(c)<this._minimimVertexDistance}},{key:"toString",value:function(){return new wi().createLineString(this.getCoordinates()).toString()}},{key:"closeRing",value:function(){if(this._ptList.size()<1)return null;var u=new X(this._ptList.get(0)),c=this._ptList.get(this._ptList.size()-1);if(u.equals(c))return null;this._ptList.add(u)}},{key:"setMinimumVertexDistance",value:function(u){this._minimimVertexDistance=u}}],[{key:"constructor_",value:function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new mt}}])}();Ro.COORDINATE_ARRAY_TYPE=new Array(0).fill(null);var Di=function(){function b(){r(this,b)}return a(b,null,[{key:"toDegrees",value:function(u){return 180*u/Math.PI}},{key:"normalize",value:function(u){for(;u>Math.PI;)u-=b.PI_TIMES_2;for(;u<=-Math.PI;)u+=b.PI_TIMES_2;return u}},{key:"angle",value:function(){if(arguments.length===1){var u=arguments[0];return Math.atan2(u.y,u.x)}if(arguments.length===2){var c=arguments[0],y=arguments[1],N=y.x-c.x,z=y.y-c.y;return Math.atan2(z,N)}}},{key:"isAcute",value:function(u,c,y){var N=u.x-c.x,z=u.y-c.y;return N*(y.x-c.x)+z*(y.y-c.y)>0}},{key:"isObtuse",value:function(u,c,y){var N=u.x-c.x,z=u.y-c.y;return N*(y.x-c.x)+z*(y.y-c.y)<0}},{key:"interiorAngle",value:function(u,c,y){var N=b.angle(c,u),z=b.angle(c,y);return Math.abs(z-N)}},{key:"normalizePositive",value:function(u){if(u<0){for(;u<0;)u+=b.PI_TIMES_2;u>=b.PI_TIMES_2&&(u=0)}else{for(;u>=b.PI_TIMES_2;)u-=b.PI_TIMES_2;u<0&&(u=0)}return u}},{key:"angleBetween",value:function(u,c,y){var N=b.angle(c,u),z=b.angle(c,y);return b.diff(N,z)}},{key:"diff",value:function(u,c){var y=null;return(y=u<c?c-u:u-c)>Math.PI&&(y=2*Math.PI-y),y}},{key:"toRadians",value:function(u){return u*Math.PI/180}},{key:"getTurn",value:function(u,c){var y=Math.sin(c-u);return y>0?b.COUNTERCLOCKWISE:y<0?b.CLOCKWISE:b.NONE}},{key:"angleBetweenOriented",value:function(u,c,y){var N=b.angle(c,u),z=b.angle(c,y)-N;return z<=-Math.PI?z+b.PI_TIMES_2:z>Math.PI?z-b.PI_TIMES_2:z}}])}();Di.PI_TIMES_2=2*Math.PI,Di.PI_OVER_2=Math.PI/2,Di.PI_OVER_4=Math.PI/4,Di.COUNTERCLOCKWISE=ft.COUNTERCLOCKWISE,Di.CLOCKWISE=ft.CLOCKWISE,Di.NONE=ft.COLLINEAR;var Oo=function(){function b(){r(this,b),b.constructor_.apply(this,arguments)}return a(b,[{key:"addNextSegment",value:function(u,c){if(this._s0=this._s1,this._s1=this._s2,this._s2=u,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var y=ft.index(this._s0,this._s1,this._s2),N=y===ft.CLOCKWISE&&this._side===De.LEFT||y===ft.COUNTERCLOCKWISE&&this._side===De.RIGHT;y===0?this.addCollinear(c):N?this.addOutsideTurn(y,c):this.addInsideTurn(y,c)}},{key:"addLineEndCap",value:function(u,c){var y=new cr(u,c),N=new cr;this.computeOffsetSegment(y,De.LEFT,this._distance,N);var z=new cr;this.computeOffsetSegment(y,De.RIGHT,this._distance,z);var se=c.x-u.x,ve=c.y-u.y,Le=Math.atan2(ve,se);switch(this._bufParams.getEndCapStyle()){case D.CAP_ROUND:this._segList.addPt(N.p1),this.addDirectedFillet(c,Le+Math.PI/2,Le-Math.PI/2,ft.CLOCKWISE,this._distance),this._segList.addPt(z.p1);break;case D.CAP_FLAT:this._segList.addPt(N.p1),this._segList.addPt(z.p1);break;case D.CAP_SQUARE:var xe=new X;xe.x=Math.abs(this._distance)*Math.cos(Le),xe.y=Math.abs(this._distance)*Math.sin(Le);var Xe=new X(N.p1.x+xe.x,N.p1.y+xe.y),ct=new X(z.p1.x+xe.x,z.p1.y+xe.y);this._segList.addPt(Xe),this._segList.addPt(ct)}}},{key:"getCoordinates",value:function(){return this._segList.getCoordinates()}},{key:"addMitreJoin",value:function(u,c,y,N){var z=vt.intersection(c.p0,c.p1,y.p0,y.p1);if(z!==null&&(N<=0?1:z.distance(u)/Math.abs(N))<=this._bufParams.getMitreLimit())return this._segList.addPt(z),null;this.addLimitedMitreJoin(c,y,N,this._bufParams.getMitreLimit())}},{key:"addOutsideTurn",value:function(u,c){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*b.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===D.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===D.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(c&&this._segList.addPt(this._offset0.p1),this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,u,this._distance),this._segList.addPt(this._offset1.p0))}},{key:"createSquare",value:function(u){this._segList.addPt(new X(u.x+this._distance,u.y+this._distance)),this._segList.addPt(new X(u.x+this._distance,u.y-this._distance)),this._segList.addPt(new X(u.x-this._distance,u.y-this._distance)),this._segList.addPt(new X(u.x-this._distance,u.y+this._distance)),this._segList.closeRing()}},{key:"addSegments",value:function(u,c){this._segList.addPts(u,c)}},{key:"addFirstSegment",value:function(){this._segList.addPt(this._offset1.p0)}},{key:"addCornerFillet",value:function(u,c,y,N,z){var se=c.x-u.x,ve=c.y-u.y,Le=Math.atan2(ve,se),xe=y.x-u.x,Xe=y.y-u.y,ct=Math.atan2(Xe,xe);N===ft.CLOCKWISE?Le<=ct&&(Le+=2*Math.PI):Le>=ct&&(Le-=2*Math.PI),this._segList.addPt(c),this.addDirectedFillet(u,Le,ct,N,z),this._segList.addPt(y)}},{key:"addLastSegment",value:function(){this._segList.addPt(this._offset1.p1)}},{key:"initSideSegments",value:function(u,c,y){this._s1=u,this._s2=c,this._side=y,this._seg1.setCoordinates(u,c),this.computeOffsetSegment(this._seg1,y,this._distance,this._offset1)}},{key:"addLimitedMitreJoin",value:function(u,c,y,N){var z=this._seg0.p1,se=Di.angle(z,this._seg0.p0),ve=Di.angleBetweenOriented(this._seg0.p0,z,this._seg1.p1)/2,Le=Di.normalize(se+ve),xe=Di.normalize(Le+Math.PI),Xe=N*y,ct=y-Xe*Math.abs(Math.sin(ve)),Lt=z.x+Xe*Math.cos(xe),Ht=z.y+Xe*Math.sin(xe),on=new X(Lt,Ht),hn=new cr(z,on),Wn=hn.pointAlongOffset(1,ct),xn=hn.pointAlongOffset(1,-ct);this._side===De.LEFT?(this._segList.addPt(Wn),this._segList.addPt(xn)):(this._segList.addPt(xn),this._segList.addPt(Wn))}},{key:"addDirectedFillet",value:function(u,c,y,N,z){var se=N===ft.CLOCKWISE?-1:1,ve=Math.abs(c-y),Le=Math.trunc(ve/this._filletAngleQuantum+.5);if(Le<1)return null;for(var xe=ve/Le,Xe=new X,ct=0;ct<Le;ct++){var Lt=c+se*ct*xe;Xe.x=u.x+z*Math.cos(Lt),Xe.y=u.y+z*Math.sin(Lt),this._segList.addPt(Xe)}}},{key:"computeOffsetSegment",value:function(u,c,y,N){var z=c===De.LEFT?1:-1,se=u.p1.x-u.p0.x,ve=u.p1.y-u.p0.y,Le=Math.sqrt(se*se+ve*ve),xe=z*y*se/Le,Xe=z*y*ve/Le;N.p0.x=u.p0.x-Xe,N.p0.y=u.p0.y+xe,N.p1.x=u.p1.x-Xe,N.p1.y=u.p1.y+xe}},{key:"addInsideTurn",value:function(u,c){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*b.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var y=new X((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(y);var N=new X((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(N)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}}},{key:"createCircle",value:function(u){var c=new X(u.x+this._distance,u.y);this._segList.addPt(c),this.addDirectedFillet(u,0,2*Math.PI,-1,this._distance),this._segList.closeRing()}},{key:"addBevelJoin",value:function(u,c){this._segList.addPt(u.p1),this._segList.addPt(c.p0)}},{key:"init",value:function(u){this._distance=u,this._maxCurveSegmentError=u*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Ro,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(u*b.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)}},{key:"addCollinear",value:function(u){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===D.JOIN_BEVEL||this._bufParams.getJoinStyle()===D.JOIN_MITRE?(u&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,ft.CLOCKWISE,this._distance))}},{key:"closeRing",value:function(){this._segList.closeRing()}},{key:"hasNarrowConcaveAngle",value:function(){return this._hasNarrowConcaveAngle}}],[{key:"constructor_",value:function(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new cr,this._seg1=new cr,this._offset0=new cr,this._offset1=new cr,this._side=0,this._hasNarrowConcaveAngle=!1;var u=arguments[0],c=arguments[1],y=arguments[2];this._precisionModel=u,this._bufParams=c,this._li=new et,this._filletAngleQuantum=Math.PI/2/c.getQuadrantSegments(),c.getQuadrantSegments()>=8&&c.getJoinStyle()===D.JOIN_ROUND&&(this._closingSegLengthFactor=b.MAX_CLOSING_SEG_LEN_FACTOR),this.init(y)}}])}();Oo.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,Oo.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,Oo.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,Oo.MAX_CLOSING_SEG_LEN_FACTOR=80;var xo=function(){function b(){r(this,b),b.constructor_.apply(this,arguments)}return a(b,[{key:"getOffsetCurve",value:function(u,c){if(this._distance=c,c===0)return null;var y=c<0,N=Math.abs(c),z=this.getSegGen(N);u.length<=1?this.computePointCurve(u[0],z):this.computeOffsetCurve(u,y,z);var se=z.getCoordinates();return y&&kt.reverse(se),se}},{key:"computeSingleSidedBufferCurve",value:function(u,c,y){var N=this.simplifyTolerance(this._distance);if(c){y.addSegments(u,!0);var z=Cr.simplify(u,-N),se=z.length-1;y.initSideSegments(z[se],z[se-1],De.LEFT),y.addFirstSegment();for(var ve=se-2;ve>=0;ve--)y.addNextSegment(z[ve],!0)}else{y.addSegments(u,!1);var Le=Cr.simplify(u,N),xe=Le.length-1;y.initSideSegments(Le[0],Le[1],De.LEFT),y.addFirstSegment();for(var Xe=2;Xe<=xe;Xe++)y.addNextSegment(Le[Xe],!0)}y.addLastSegment(),y.closeRing()}},{key:"computeRingBufferCurve",value:function(u,c,y){var N=this.simplifyTolerance(this._distance);c===De.RIGHT&&(N=-N);var z=Cr.simplify(u,N),se=z.length-1;y.initSideSegments(z[se-1],z[0],c);for(var ve=1;ve<=se;ve++){var Le=ve!==1;y.addNextSegment(z[ve],Le)}y.closeRing()}},{key:"computeLineBufferCurve",value:function(u,c){var y=this.simplifyTolerance(this._distance),N=Cr.simplify(u,y),z=N.length-1;c.initSideSegments(N[0],N[1],De.LEFT);for(var se=2;se<=z;se++)c.addNextSegment(N[se],!0);c.addLastSegment(),c.addLineEndCap(N[z-1],N[z]);var ve=Cr.simplify(u,-y),Le=ve.length-1;c.initSideSegments(ve[Le],ve[Le-1],De.LEFT);for(var xe=Le-2;xe>=0;xe--)c.addNextSegment(ve[xe],!0);c.addLastSegment(),c.addLineEndCap(ve[1],ve[0]),c.closeRing()}},{key:"computePointCurve",value:function(u,c){switch(this._bufParams.getEndCapStyle()){case D.CAP_ROUND:c.createCircle(u);break;case D.CAP_SQUARE:c.createSquare(u)}}},{key:"getLineCurve",value:function(u,c){if(this._distance=c,this.isLineOffsetEmpty(c))return null;var y=Math.abs(c),N=this.getSegGen(y);if(u.length<=1)this.computePointCurve(u[0],N);else if(this._bufParams.isSingleSided()){var z=c<0;this.computeSingleSidedBufferCurve(u,z,N)}else this.computeLineBufferCurve(u,N);return N.getCoordinates()}},{key:"getBufferParameters",value:function(){return this._bufParams}},{key:"simplifyTolerance",value:function(u){return u*this._bufParams.getSimplifyFactor()}},{key:"getRingCurve",value:function(u,c,y){if(this._distance=y,u.length<=2)return this.getLineCurve(u,y);if(y===0)return b.copyCoordinates(u);var N=this.getSegGen(y);return this.computeRingBufferCurve(u,c,N),N.getCoordinates()}},{key:"computeOffsetCurve",value:function(u,c,y){var N=this.simplifyTolerance(this._distance);if(c){var z=Cr.simplify(u,-N),se=z.length-1;y.initSideSegments(z[se],z[se-1],De.LEFT),y.addFirstSegment();for(var ve=se-2;ve>=0;ve--)y.addNextSegment(z[ve],!0)}else{var Le=Cr.simplify(u,N),xe=Le.length-1;y.initSideSegments(Le[0],Le[1],De.LEFT),y.addFirstSegment();for(var Xe=2;Xe<=xe;Xe++)y.addNextSegment(Le[Xe],!0)}y.addLastSegment()}},{key:"isLineOffsetEmpty",value:function(u){return u===0||u<0&&!this._bufParams.isSingleSided()}},{key:"getSegGen",value:function(u){return new Oo(this._precisionModel,this._bufParams,u)}}],[{key:"constructor_",value:function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var u=arguments[0],c=arguments[1];this._precisionModel=u,this._bufParams=c}},{key:"copyCoordinates",value:function(u){for(var c=new Array(u.length).fill(null),y=0;y<c.length;y++)c[y]=new X(u[y]);return c}}])}(),hr=function(){return a(function b(){r(this,b),b.constructor_.apply(this,arguments)},[{key:"findStabbedSegments",value:function(){if(arguments.length===1){for(var b=arguments[0],u=new mt,c=this._subgraphs.iterator();c.hasNext();){var y=c.next(),N=y.getEnvelope();b.y<N.getMinY()||b.y>N.getMaxY()||this.findStabbedSegments(b,y.getDirectedEdges(),u)}return u}if(arguments.length===3){if(Ve(arguments[2],Pe)&&arguments[0]instanceof X&&arguments[1]instanceof Es){for(var z=arguments[0],se=arguments[1],ve=arguments[2],Le=se.getEdge().getCoordinates(),xe=0;xe<Le.length-1;xe++)if(this._seg.p0=Le[xe],this._seg.p1=Le[xe+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<z.x||this._seg.isHorizontal()||z.y<this._seg.p0.y||z.y>this._seg.p1.y||ft.index(this._seg.p0,this._seg.p1,z)===ft.RIGHT)){var Xe=se.getDepth(De.LEFT);this._seg.p0.equals(Le[xe])||(Xe=se.getDepth(De.RIGHT));var ct=new el(this._seg,Xe);ve.add(ct)}}else if(Ve(arguments[2],Pe)&&arguments[0]instanceof X&&Ve(arguments[1],Pe))for(var Lt=arguments[0],Ht=arguments[2],on=arguments[1].iterator();on.hasNext();){var hn=on.next();hn.isForward()&&this.findStabbedSegments(Lt,hn,Ht)}}}},{key:"getDepth",value:function(b){var u=this.findStabbedSegments(b);return u.size()===0?0:jr.min(u)._leftDepth}}],[{key:"constructor_",value:function(){this._subgraphs=null,this._seg=new cr;var b=arguments[0];this._subgraphs=b}}])}(),el=function(){return a(function b(){r(this,b),b.constructor_.apply(this,arguments)},[{key:"compareTo",value:function(b){var u=b;if(this._upwardSeg.minX()>=u._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=u._upwardSeg.minX())return-1;var c=this._upwardSeg.orientationIndex(u._upwardSeg);return c!==0||(c=-1*u._upwardSeg.orientationIndex(this._upwardSeg))!==0?c:this._upwardSeg.compareTo(u._upwardSeg)}},{key:"compareX",value:function(b,u){var c=b.p0.compareTo(u.p0);return c!==0?c:b.p1.compareTo(u.p1)}},{key:"toString",value:function(){return this._upwardSeg.toString()}},{key:"interfaces_",get:function(){return[V]}}],[{key:"constructor_",value:function(){this._upwardSeg=null,this._leftDepth=null;var b=arguments[0],u=arguments[1];this._upwardSeg=new cr(b),this._leftDepth=u}}])}();hr.DepthSegment=el;var tl=function(b){function u(){var c;return r(this,u),c=i(this,u),u.constructor_.apply(c,arguments),c}return m(u,b),a(u,null,[{key:"constructor_",value:function(){O.constructor_.call(this,"Projective point not representable on the Cartesian plane.")}}])}(O),nl=function(){function b(){r(this,b),b.constructor_.apply(this,arguments)}return a(b,[{key:"getY",value:function(){var u=this.y/this.w;if(ie.isNaN(u)||ie.isInfinite(u))throw new tl;return u}},{key:"getX",value:function(){var u=this.x/this.w;if(ie.isNaN(u)||ie.isInfinite(u))throw new tl;return u}},{key:"getCoordinate",value:function(){var u=new X;return u.x=this.getX(),u.y=this.getY(),u}}],[{key:"constructor_",value:function(){if(this.x=null,this.y=null,this.w=null,arguments.length===0)this.x=0,this.y=0,this.w=1;else if(arguments.length===1){var u=arguments[0];this.x=u.x,this.y=u.y,this.w=1}else if(arguments.length===2){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var c=arguments[0],y=arguments[1];this.x=c,this.y=y,this.w=1}else if(arguments[0]instanceof b&&arguments[1]instanceof b){var N=arguments[0],z=arguments[1];this.x=N.y*z.w-z.y*N.w,this.y=z.x*N.w-N.x*z.w,this.w=N.x*z.y-z.x*N.y}else if(arguments[0]instanceof X&&arguments[1]instanceof X){var se=arguments[0],ve=arguments[1];this.x=se.y-ve.y,this.y=ve.x-se.x,this.w=se.x*ve.y-ve.x*se.y}}else if(arguments.length===3){var Le=arguments[0],xe=arguments[1],Xe=arguments[2];this.x=Le,this.y=xe,this.w=Xe}else if(arguments.length===4){var ct=arguments[0],Lt=arguments[1],Ht=arguments[2],on=arguments[3],hn=ct.y-Lt.y,Wn=Lt.x-ct.x,xn=ct.x*Lt.y-Lt.x*ct.y,hi=Ht.y-on.y,vi=on.x-Ht.x,Vi=Ht.x*on.y-on.x*Ht.y;this.x=Wn*Vi-vi*xn,this.y=hi*xn-hn*Vi,this.w=hn*vi-hi*Wn}}}])}(),il=function(){function b(){r(this,b),b.constructor_.apply(this,arguments)}return a(b,[{key:"area",value:function(){return b.area(this.p0,this.p1,this.p2)}},{key:"signedArea",value:function(){return b.signedArea(this.p0,this.p1,this.p2)}},{key:"interpolateZ",value:function(u){if(u===null)throw new P("Supplied point is null.");return b.interpolateZ(u,this.p0,this.p1,this.p2)}},{key:"longestSideLength",value:function(){return b.longestSideLength(this.p0,this.p1,this.p2)}},{key:"isAcute",value:function(){return b.isAcute(this.p0,this.p1,this.p2)}},{key:"circumcentre",value:function(){return b.circumcentre(this.p0,this.p1,this.p2)}},{key:"area3D",value:function(){return b.area3D(this.p0,this.p1,this.p2)}},{key:"centroid",value:function(){return b.centroid(this.p0,this.p1,this.p2)}},{key:"inCentre",value:function(){return b.inCentre(this.p0,this.p1,this.p2)}}],[{key:"constructor_",value:function(){this.p0=null,this.p1=null,this.p2=null;var u=arguments[0],c=arguments[1],y=arguments[2];this.p0=u,this.p1=c,this.p2=y}},{key:"area",value:function(u,c,y){return Math.abs(((y.x-u.x)*(c.y-u.y)-(c.x-u.x)*(y.y-u.y))/2)}},{key:"signedArea",value:function(u,c,y){return((y.x-u.x)*(c.y-u.y)-(c.x-u.x)*(y.y-u.y))/2}},{key:"det",value:function(u,c,y,N){return u*N-c*y}},{key:"interpolateZ",value:function(u,c,y,N){var z=c.x,se=c.y,ve=y.x-z,Le=N.x-z,xe=y.y-se,Xe=N.y-se,ct=ve*Xe-Le*xe,Lt=u.x-z,Ht=u.y-se,on=(Xe*Lt-Le*Ht)/ct,hn=(-xe*Lt+ve*Ht)/ct;return c.getZ()+on*(y.getZ()-c.getZ())+hn*(N.getZ()-c.getZ())}},{key:"longestSideLength",value:function(u,c,y){var N=u.distance(c),z=c.distance(y),se=y.distance(u),ve=N;return z>ve&&(ve=z),se>ve&&(ve=se),ve}},{key:"circumcentreDD",value:function(u,c,y){var N=ze.valueOf(u.x).subtract(y.x),z=ze.valueOf(u.y).subtract(y.y),se=ze.valueOf(c.x).subtract(y.x),ve=ze.valueOf(c.y).subtract(y.y),Le=ze.determinant(N,z,se,ve).multiply(2),xe=N.sqr().add(z.sqr()),Xe=se.sqr().add(ve.sqr()),ct=ze.determinant(z,xe,ve,Xe),Lt=ze.determinant(N,xe,se,Xe),Ht=ze.valueOf(y.x).subtract(ct.divide(Le)).doubleValue(),on=ze.valueOf(y.y).add(Lt.divide(Le)).doubleValue();return new X(Ht,on)}},{key:"isAcute",value:function(u,c,y){return!!Di.isAcute(u,c,y)&&!!Di.isAcute(c,y,u)&&!!Di.isAcute(y,u,c)}},{key:"circumcentre",value:function(u,c,y){var N=y.x,z=y.y,se=u.x-N,ve=u.y-z,Le=c.x-N,xe=c.y-z,Xe=2*b.det(se,ve,Le,xe),ct=b.det(ve,se*se+ve*ve,xe,Le*Le+xe*xe),Lt=b.det(se,se*se+ve*ve,Le,Le*Le+xe*xe);return new X(N-ct/Xe,z+Lt/Xe)}},{key:"perpendicularBisector",value:function(u,c){var y=c.x-u.x,N=c.y-u.y,z=new nl(u.x+y/2,u.y+N/2,1),se=new nl(u.x-N+y/2,u.y+y+N/2,1);return new nl(z,se)}},{key:"angleBisector",value:function(u,c,y){var N=c.distance(u),z=N/(N+c.distance(y)),se=y.x-u.x,ve=y.y-u.y;return new X(u.x+z*se,u.y+z*ve)}},{key:"area3D",value:function(u,c,y){var N=c.x-u.x,z=c.y-u.y,se=c.getZ()-u.getZ(),ve=y.x-u.x,Le=y.y-u.y,xe=y.getZ()-u.getZ(),Xe=z*xe-se*Le,ct=se*ve-N*xe,Lt=N*Le-z*ve,Ht=Xe*Xe+ct*ct+Lt*Lt,on=Math.sqrt(Ht)/2;return on}},{key:"centroid",value:function(u,c,y){var N=(u.x+c.x+y.x)/3,z=(u.y+c.y+y.y)/3;return new X(N,z)}},{key:"inCentre",value:function(u,c,y){var N=c.distance(y),z=u.distance(y),se=u.distance(c),ve=N+z+se,Le=(N*u.x+z*c.x+se*y.x)/ve,xe=(N*u.y+z*c.y+se*y.y)/ve;return new X(Le,xe)}}])}(),rl=function(){return a(function b(){r(this,b),b.constructor_.apply(this,arguments)},[{key:"addRingSide",value:function(b,u,c,y,N){if(u===0&&b.length<mn.MINIMUM_VALID_SIZE)return null;var z=y,se=N;b.length>=mn.MINIMUM_VALID_SIZE&&ft.isCCW(b)&&(z=N,se=y,c=De.opposite(c));var ve=this._curveBuilder.getRingCurve(b,c,u);this.addCurve(ve,z,se)}},{key:"addRingBothSides",value:function(b,u){this.addRingSide(b,u,De.LEFT,ae.EXTERIOR,ae.INTERIOR),this.addRingSide(b,u,De.RIGHT,ae.INTERIOR,ae.EXTERIOR)}},{key:"addPoint",value:function(b){if(this._distance<=0)return null;var u=b.getCoordinates(),c=this._curveBuilder.getLineCurve(u,this._distance);this.addCurve(c,ae.EXTERIOR,ae.INTERIOR)}},{key:"addPolygon",value:function(b){var u=this._distance,c=De.LEFT;this._distance<0&&(u=-this._distance,c=De.RIGHT);var y=b.getExteriorRing(),N=kt.removeRepeatedPoints(y.getCoordinates());if(this._distance<0&&this.isErodedCompletely(y,this._distance)||this._distance<=0&&N.length<3)return null;this.addRingSide(N,u,c,ae.EXTERIOR,ae.INTERIOR);for(var z=0;z<b.getNumInteriorRing();z++){var se=b.getInteriorRingN(z),ve=kt.removeRepeatedPoints(se.getCoordinates());this._distance>0&&this.isErodedCompletely(se,-this._distance)||this.addRingSide(ve,u,De.opposite(c),ae.INTERIOR,ae.EXTERIOR)}}},{key:"isTriangleErodedCompletely",value:function(b,u){var c=new il(b[0],b[1],b[2]),y=c.inCentre();return sn.pointToSegment(y,c.p0,c.p1)<Math.abs(u)}},{key:"addLineString",value:function(b){if(this._curveBuilder.isLineOffsetEmpty(this._distance))return null;var u=kt.removeRepeatedPoints(b.getCoordinates());if(kt.isRing(u)&&!this._curveBuilder.getBufferParameters().isSingleSided())this.addRingBothSides(u,this._distance);else{var c=this._curveBuilder.getLineCurve(u,this._distance);this.addCurve(c,ae.EXTERIOR,ae.INTERIOR)}}},{key:"addCurve",value:function(b,u,c){if(b===null||b.length<2)return null;var y=new fs(b,new _i(0,ae.BOUNDARY,u,c));this._curveList.add(y)}},{key:"getCurves",value:function(){return this.add(this._inputGeom),this._curveList}},{key:"add",value:function(b){if(b.isEmpty())return null;if(b instanceof en)this.addPolygon(b);else if(b instanceof Jt)this.addLineString(b);else if(b instanceof jt)this.addPoint(b);else if(b instanceof Un)this.addCollection(b);else if(b instanceof Mi)this.addCollection(b);else if(b instanceof oi)this.addCollection(b);else{if(!(b instanceof cn))throw new we(b.getGeometryType());this.addCollection(b)}}},{key:"isErodedCompletely",value:function(b,u){var c=b.getCoordinates();if(c.length<4)return u<0;if(c.length===4)return this.isTriangleErodedCompletely(c,u);var y=b.getEnvelopeInternal(),N=Math.min(y.getHeight(),y.getWidth());return u<0&&2*Math.abs(u)>N}},{key:"addCollection",value:function(b){for(var u=0;u<b.getNumGeometries();u++){var c=b.getGeometryN(u);this.add(c)}}}],[{key:"constructor_",value:function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new mt;var b=arguments[0],u=arguments[1],c=arguments[2];this._inputGeom=b,this._distance=u,this._curveBuilder=c}}])}(),uh=function(){return a(function b(){r(this,b)},[{key:"locate",value:function(b){}}])}(),ch=function(){function b(){r(this,b),b.constructor_.apply(this,arguments)}return a(b,[{key:"next",value:function(){if(this._atStart)return this._atStart=!1,b.isAtomic(this._parent)&&this._index++,this._parent;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new Me;var u=this._parent.getGeometryN(this._index++);return u instanceof cn?(this._subcollectionIterator=new b(u),this._subcollectionIterator.next()):u}},{key:"remove",value:function(){throw new we(this.getClass().getName())}},{key:"hasNext",value:function(){if(this._atStart)return!0;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)}},{key:"interfaces_",get:function(){return[qs]}}],[{key:"constructor_",value:function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var u=arguments[0];this._parent=u,this._atStart=!0,this._index=0,this._max=u.getNumGeometries()}},{key:"isAtomic",value:function(u){return!(u instanceof cn)}}])}(),fu=function(){function b(){r(this,b),b.constructor_.apply(this,arguments)}return a(b,[{key:"locate",value:function(u){return b.locate(u,this._geom)}},{key:"interfaces_",get:function(){return[uh]}}],[{key:"constructor_",value:function(){this._geom=null;var u=arguments[0];this._geom=u}},{key:"locatePointInPolygon",value:function(u,c){if(c.isEmpty())return ae.EXTERIOR;var y=c.getExteriorRing(),N=b.locatePointInRing(u,y);if(N!==ae.INTERIOR)return N;for(var z=0;z<c.getNumInteriorRing();z++){var se=c.getInteriorRingN(z),ve=b.locatePointInRing(u,se);if(ve===ae.BOUNDARY)return ae.BOUNDARY;if(ve===ae.INTERIOR)return ae.EXTERIOR}return ae.INTERIOR}},{key:"locatePointInRing",value:function(u,c){return c.getEnvelopeInternal().intersects(u)?Oi.locateInRing(u,c.getCoordinates()):ae.EXTERIOR}},{key:"containsPointInPolygon",value:function(u,c){return ae.EXTERIOR!==b.locatePointInPolygon(u,c)}},{key:"locateInGeometry",value:function(u,c){if(c instanceof en)return b.locatePointInPolygon(u,c);if(c instanceof cn)for(var y=new ch(c);y.hasNext();){var N=y.next();if(N!==c){var z=b.locateInGeometry(u,N);if(z!==ae.EXTERIOR)return z}}return ae.EXTERIOR}},{key:"isContained",value:function(u,c){return ae.EXTERIOR!==b.locate(u,c)}},{key:"locate",value:function(u,c){return c.isEmpty()?ae.EXTERIOR:c.getEnvelopeInternal().intersects(u)?b.locateInGeometry(u,c):ae.EXTERIOR}}])}(),hh=function(){return a(function b(){r(this,b),b.constructor_.apply(this,arguments)},[{key:"getNextCW",value:function(b){this.getEdges();var u=this._edgeList.indexOf(b),c=u-1;return u===0&&(c=this._edgeList.size()-1),this._edgeList.get(c)}},{key:"propagateSideLabels",value:function(b){for(var u=ae.NONE,c=this.iterator();c.hasNext();){var y=c.next().getLabel();y.isArea(b)&&y.getLocation(b,De.LEFT)!==ae.NONE&&(u=y.getLocation(b,De.LEFT))}if(u===ae.NONE)return null;for(var N=u,z=this.iterator();z.hasNext();){var se=z.next(),ve=se.getLabel();if(ve.getLocation(b,De.ON)===ae.NONE&&ve.setLocation(b,De.ON,N),ve.isArea(b)){var Le=ve.getLocation(b,De.LEFT),xe=ve.getLocation(b,De.RIGHT);if(xe!==ae.NONE){if(xe!==N)throw new Qe("side location conflict",se.getCoordinate());Le===ae.NONE&&be.shouldNeverReachHere("found single null side (at "+se.getCoordinate()+")"),N=Le}else be.isTrue(ve.getLocation(b,De.LEFT)===ae.NONE,"found single null side"),ve.setLocation(b,De.RIGHT,N),ve.setLocation(b,De.LEFT,N)}}}},{key:"getCoordinate",value:function(){var b=this.iterator();return b.hasNext()?b.next().getCoordinate():null}},{key:"print",value:function(b){$t.out.println("EdgeEndStar:   "+this.getCoordinate());for(var u=this.iterator();u.hasNext();)u.next().print(b)}},{key:"isAreaLabelsConsistent",value:function(b){return this.computeEdgeEndLabels(b.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)}},{key:"checkAreaLabelsConsistent",value:function(b){var u=this.getEdges();if(u.size()<=0)return!0;var c=u.size()-1,y=u.get(c).getLabel().getLocation(b,De.LEFT);be.isTrue(y!==ae.NONE,"Found unlabelled area edge");for(var N=y,z=this.iterator();z.hasNext();){var se=z.next().getLabel();be.isTrue(se.isArea(b),"Found non-area edge");var ve=se.getLocation(b,De.LEFT),Le=se.getLocation(b,De.RIGHT);if(ve===Le||Le!==N)return!1;N=ve}return!0}},{key:"findIndex",value:function(b){this.iterator();for(var u=0;u<this._edgeList.size();u++)if(this._edgeList.get(u)===b)return u;return-1}},{key:"iterator",value:function(){return this.getEdges().iterator()}},{key:"getEdges",value:function(){return this._edgeList===null&&(this._edgeList=new mt(this._edgeMap.values())),this._edgeList}},{key:"getLocation",value:function(b,u,c){return this._ptInAreaLocation[b]===ae.NONE&&(this._ptInAreaLocation[b]=fu.locate(u,c[b].getGeometry())),this._ptInAreaLocation[b]}},{key:"toString",value:function(){var b=new Ue;b.append("EdgeEndStar:   "+this.getCoordinate()),b.append(`
`);for(var u=this.iterator();u.hasNext();){var c=u.next();b.append(c),b.append(`
`)}return b.toString()}},{key:"computeEdgeEndLabels",value:function(b){for(var u=this.iterator();u.hasNext();)u.next().computeLabel(b)}},{key:"computeLabelling",value:function(b){this.computeEdgeEndLabels(b[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var u=[!1,!1],c=this.iterator();c.hasNext();)for(var y=c.next().getLabel(),N=0;N<2;N++)y.isLine(N)&&y.getLocation(N)===ae.BOUNDARY&&(u[N]=!0);for(var z=this.iterator();z.hasNext();)for(var se=z.next(),ve=se.getLabel(),Le=0;Le<2;Le++)if(ve.isAnyNull(Le)){var xe=ae.NONE;if(u[Le])xe=ae.EXTERIOR;else{var Xe=se.getCoordinate();xe=this.getLocation(Le,Xe,b)}ve.setAllLocationsIfNull(Le,xe)}}},{key:"getDegree",value:function(){return this._edgeMap.size()}},{key:"insertEdgeEnd",value:function(b,u){this._edgeMap.put(b,u),this._edgeList=null}}],[{key:"constructor_",value:function(){this._edgeMap=new An,this._edgeList=null,this._ptInAreaLocation=[ae.NONE,ae.NONE]}}])}(),$r=function(b){function u(){var c;return r(this,u),c=i(this,u),u.constructor_.apply(c,arguments),c}return m(u,b),a(u,[{key:"linkResultDirectedEdges",value:function(){this.getResultAreaEdges();for(var c=null,y=null,N=this._SCANNING_FOR_INCOMING,z=0;z<this._resultAreaEdgeList.size();z++){var se=this._resultAreaEdgeList.get(z),ve=se.getSym();if(se.getLabel().isArea())switch(c===null&&se.isInResult()&&(c=se),N){case this._SCANNING_FOR_INCOMING:if(!ve.isInResult())continue;y=ve,N=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!se.isInResult())continue;y.setNext(se),N=this._SCANNING_FOR_INCOMING}}if(N===this._LINKING_TO_OUTGOING){if(c===null)throw new Qe("no outgoing dirEdge found",this.getCoordinate());be.isTrue(c.isInResult(),"unable to link last incoming dirEdge"),y.setNext(c)}}},{key:"insert",value:function(c){var y=c;this.insertEdgeEnd(y,y)}},{key:"getRightmostEdge",value:function(){var c=this.getEdges(),y=c.size();if(y<1)return null;var N=c.get(0);if(y===1)return N;var z=c.get(y-1),se=N.getQuadrant(),ve=z.getQuadrant();return Ni.isNorthern(se)&&Ni.isNorthern(ve)?N:Ni.isNorthern(se)||Ni.isNorthern(ve)?N.getDy()!==0?N:z.getDy()!==0?z:(be.shouldNeverReachHere("found two horizontal edges incident on node"),null):z}},{key:"print",value:function(c){$t.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var y=this.iterator();y.hasNext();){var N=y.next();c.print("out "),N.print(c),c.println(),c.print("in "),N.getSym().print(c),c.println()}}},{key:"getResultAreaEdges",value:function(){if(this._resultAreaEdgeList!==null)return this._resultAreaEdgeList;this._resultAreaEdgeList=new mt;for(var c=this.iterator();c.hasNext();){var y=c.next();(y.isInResult()||y.getSym().isInResult())&&this._resultAreaEdgeList.add(y)}return this._resultAreaEdgeList}},{key:"updateLabelling",value:function(c){for(var y=this.iterator();y.hasNext();){var N=y.next().getLabel();N.setAllLocationsIfNull(0,c.getLocation(0)),N.setAllLocationsIfNull(1,c.getLocation(1))}}},{key:"linkAllDirectedEdges",value:function(){this.getEdges();for(var c=null,y=null,N=this._edgeList.size()-1;N>=0;N--){var z=this._edgeList.get(N),se=z.getSym();y===null&&(y=se),c!==null&&se.setNext(c),c=z}y.setNext(c)}},{key:"computeDepths",value:function(){if(arguments.length===1){var c=arguments[0],y=this.findIndex(c),N=c.getDepth(De.LEFT),z=c.getDepth(De.RIGHT),se=this.computeDepths(y+1,this._edgeList.size(),N);if(this.computeDepths(0,y,se)!==z)throw new Qe("depth mismatch at "+c.getCoordinate())}else if(arguments.length===3){for(var ve=arguments[1],Le=arguments[2],xe=arguments[0];xe<ve;xe++){var Xe=this._edgeList.get(xe);Xe.setEdgeDepths(De.RIGHT,Le),Le=Xe.getDepth(De.LEFT)}return Le}}},{key:"mergeSymLabels",value:function(){for(var c=this.iterator();c.hasNext();){var y=c.next();y.getLabel().merge(y.getSym().getLabel())}}},{key:"linkMinimalDirectedEdges",value:function(c){for(var y=null,N=null,z=this._SCANNING_FOR_INCOMING,se=this._resultAreaEdgeList.size()-1;se>=0;se--){var ve=this._resultAreaEdgeList.get(se),Le=ve.getSym();switch(y===null&&ve.getEdgeRing()===c&&(y=ve),z){case this._SCANNING_FOR_INCOMING:if(Le.getEdgeRing()!==c)continue;N=Le,z=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(ve.getEdgeRing()!==c)continue;N.setNextMin(ve),z=this._SCANNING_FOR_INCOMING}}z===this._LINKING_TO_OUTGOING&&(be.isTrue(y!==null,"found null for first outgoing dirEdge"),be.isTrue(y.getEdgeRing()===c,"unable to link last incoming dirEdge"),N.setNextMin(y))}},{key:"getOutgoingDegree",value:function(){if(arguments.length===0){for(var c=0,y=this.iterator();y.hasNext();)y.next().isInResult()&&c++;return c}if(arguments.length===1){for(var N=arguments[0],z=0,se=this.iterator();se.hasNext();)se.next().getEdgeRing()===N&&z++;return z}}},{key:"getLabel",value:function(){return this._label}},{key:"findCoveredLineEdges",value:function(){for(var c=ae.NONE,y=this.iterator();y.hasNext();){var N=y.next(),z=N.getSym();if(!N.isLineEdge()){if(N.isInResult()){c=ae.INTERIOR;break}if(z.isInResult()){c=ae.EXTERIOR;break}}}if(c===ae.NONE)return null;for(var se=c,ve=this.iterator();ve.hasNext();){var Le=ve.next(),xe=Le.getSym();Le.isLineEdge()?Le.getEdge().setCovered(se===ae.INTERIOR):(Le.isInResult()&&(se=ae.EXTERIOR),xe.isInResult()&&(se=ae.INTERIOR))}}},{key:"computeLabelling",value:function(c){w(u,"computeLabelling",this,1).call(this,c),this._label=new _i(ae.NONE);for(var y=this.iterator();y.hasNext();)for(var N=y.next().getEdge().getLabel(),z=0;z<2;z++){var se=N.getLocation(z);se!==ae.INTERIOR&&se!==ae.BOUNDARY||this._label.setLocation(z,ae.INTERIOR)}}}],[{key:"constructor_",value:function(){this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}}])}(hh),fo=function(b){function u(){return r(this,u),i(this,u)}return m(u,b),a(u,[{key:"createNode",value:function(c){return new xr(c,new $r)}}])}(ho),du=function(){function b(){r(this,b),b.constructor_.apply(this,arguments)}return a(b,[{key:"compareTo",value:function(u){var c=u;return b.compareOriented(this._pts,this._orientation,c._pts,c._orientation)}},{key:"interfaces_",get:function(){return[V]}}],[{key:"constructor_",value:function(){this._pts=null,this._orientation=null;var u=arguments[0];this._pts=u,this._orientation=b.orientation(u)}},{key:"orientation",value:function(u){return kt.increasingDirection(u)===1}},{key:"compareOriented",value:function(u,c,y,N){for(var z=c?1:-1,se=N?1:-1,ve=c?u.length:-1,Le=N?y.length:-1,xe=c?0:u.length-1,Xe=N?0:y.length-1;;){var ct=u[xe].compareTo(y[Xe]);if(ct!==0)return ct;var Lt=(xe+=z)===ve,Ht=(Xe+=se)===Le;if(Lt&&!Ht)return-1;if(!Lt&&Ht)return 1;if(Lt&&Ht)return 0}}}])}(),ds=function(){return a(function b(){r(this,b),b.constructor_.apply(this,arguments)},[{key:"print",value:function(b){b.print("MULTILINESTRING ( ");for(var u=0;u<this._edges.size();u++){var c=this._edges.get(u);u>0&&b.print(","),b.print("(");for(var y=c.getCoordinates(),N=0;N<y.length;N++)N>0&&b.print(","),b.print(y[N].x+" "+y[N].y);b.println(")")}b.print(")  ")}},{key:"addAll",value:function(b){for(var u=b.iterator();u.hasNext();)this.add(u.next())}},{key:"findEdgeIndex",value:function(b){for(var u=0;u<this._edges.size();u++)if(this._edges.get(u).equals(b))return u;return-1}},{key:"iterator",value:function(){return this._edges.iterator()}},{key:"getEdges",value:function(){return this._edges}},{key:"get",value:function(b){return this._edges.get(b)}},{key:"findEqualEdge",value:function(b){var u=new du(b.getCoordinates());return this._ocaMap.get(u)}},{key:"add",value:function(b){this._edges.add(b);var u=new du(b.getCoordinates());this._ocaMap.put(u,b)}}],[{key:"constructor_",value:function(){this._edges=new mt,this._ocaMap=new An}}])}(),gu=function(){return a(function b(){r(this,b)},[{key:"processIntersections",value:function(b,u,c,y){}},{key:"isDone",value:function(){}}])}(),go=function(){function b(){r(this,b),b.constructor_.apply(this,arguments)}return a(b,[{key:"isTrivialIntersection",value:function(u,c,y,N){if(u===y&&this._li.getIntersectionNum()===1){if(b.isAdjacentSegments(c,N))return!0;if(u.isClosed()){var z=u.size()-1;if(c===0&&N===z||N===0&&c===z)return!0}}return!1}},{key:"getProperIntersectionPoint",value:function(){return this._properIntersectionPoint}},{key:"hasProperInteriorIntersection",value:function(){return this._hasProperInterior}},{key:"getLineIntersector",value:function(){return this._li}},{key:"hasProperIntersection",value:function(){return this._hasProper}},{key:"processIntersections",value:function(u,c,y,N){if(u===y&&c===N)return null;this.numTests++;var z=u.getCoordinates()[c],se=u.getCoordinates()[c+1],ve=y.getCoordinates()[N],Le=y.getCoordinates()[N+1];this._li.computeIntersection(z,se,ve,Le),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(u,c,y,N)||(this._hasIntersection=!0,u.addIntersections(this._li,c,0),y.addIntersections(this._li,N,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))}},{key:"hasIntersection",value:function(){return this._hasIntersection}},{key:"isDone",value:function(){return!1}},{key:"hasInteriorIntersection",value:function(){return this._hasInterior}},{key:"interfaces_",get:function(){return[gu]}}],[{key:"constructor_",value:function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var u=arguments[0];this._li=u}},{key:"isAdjacentSegments",value:function(u,c){return Math.abs(u-c)===1}}])}(),fh=function(){return a(function b(){r(this,b),b.constructor_.apply(this,arguments)},[{key:"getSegmentIndex",value:function(){return this.segmentIndex}},{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(b){b.print(this.coord),b.print(" seg # = "+this.segmentIndex),b.println(" dist = "+this.dist)}},{key:"compareTo",value:function(b){var u=b;return this.compare(u.segmentIndex,u.dist)}},{key:"isEndPoint",value:function(b){return this.segmentIndex===0&&this.dist===0||this.segmentIndex===b}},{key:"toString",value:function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist}},{key:"getDistance",value:function(){return this.dist}},{key:"compare",value:function(b,u){return this.segmentIndex<b?-1:this.segmentIndex>b?1:this.dist<u?-1:this.dist>u?1:0}},{key:"interfaces_",get:function(){return[V]}}],[{key:"constructor_",value:function(){this.coord=null,this.segmentIndex=null,this.dist=null;var b=arguments[0],u=arguments[1],c=arguments[2];this.coord=new X(b),this.segmentIndex=u,this.dist=c}}])}(),Fo=function(){return a(function b(){r(this,b),b.constructor_.apply(this,arguments)},[{key:"print",value:function(b){b.println("Intersections:");for(var u=this.iterator();u.hasNext();)u.next().print(b)}},{key:"iterator",value:function(){return this._nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(b){this.addEndpoints();for(var u=this.iterator(),c=u.next();u.hasNext();){var y=u.next(),N=this.createSplitEdge(c,y);b.add(N),c=y}}},{key:"addEndpoints",value:function(){var b=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[b],b,0)}},{key:"createSplitEdge",value:function(b,u){var c=u.segmentIndex-b.segmentIndex+2,y=this.edge.pts[u.segmentIndex],N=u.dist>0||!u.coord.equals2D(y);N||c--;var z=new Array(c).fill(null),se=0;z[se++]=new X(b.coord);for(var ve=b.segmentIndex+1;ve<=u.segmentIndex;ve++)z[se++]=this.edge.pts[ve];return N&&(z[se]=u.coord),new _u(z,new _i(this.edge._label))}},{key:"add",value:function(b,u,c){var y=new fh(b,u,c),N=this._nodeMap.get(y);return N!==null?N:(this._nodeMap.put(y,y),y)}},{key:"isIntersection",value:function(b){for(var u=this.iterator();u.hasNext();)if(u.next().coord.equals(b))return!0;return!1}}],[{key:"constructor_",value:function(){this._nodeMap=new An,this.edge=null;var b=arguments[0];this.edge=b}}])}(),mu=function(){function b(){r(this,b),b.constructor_.apply(this,arguments)}return a(b,[{key:"isIntersects",value:function(){return!this.isDisjoint()}},{key:"isCovers",value:function(){return(b.isTrue(this._matrix[ae.INTERIOR][ae.INTERIOR])||b.isTrue(this._matrix[ae.INTERIOR][ae.BOUNDARY])||b.isTrue(this._matrix[ae.BOUNDARY][ae.INTERIOR])||b.isTrue(this._matrix[ae.BOUNDARY][ae.BOUNDARY]))&&this._matrix[ae.EXTERIOR][ae.INTERIOR]===gt.FALSE&&this._matrix[ae.EXTERIOR][ae.BOUNDARY]===gt.FALSE}},{key:"isCoveredBy",value:function(){return(b.isTrue(this._matrix[ae.INTERIOR][ae.INTERIOR])||b.isTrue(this._matrix[ae.INTERIOR][ae.BOUNDARY])||b.isTrue(this._matrix[ae.BOUNDARY][ae.INTERIOR])||b.isTrue(this._matrix[ae.BOUNDARY][ae.BOUNDARY]))&&this._matrix[ae.INTERIOR][ae.EXTERIOR]===gt.FALSE&&this._matrix[ae.BOUNDARY][ae.EXTERIOR]===gt.FALSE}},{key:"set",value:function(){if(arguments.length===1)for(var u=arguments[0],c=0;c<u.length;c++){var y=Math.trunc(c/3),N=c%3;this._matrix[y][N]=gt.toDimensionValue(u.charAt(c))}else if(arguments.length===3){var z=arguments[0],se=arguments[1],ve=arguments[2];this._matrix[z][se]=ve}}},{key:"isContains",value:function(){return b.isTrue(this._matrix[ae.INTERIOR][ae.INTERIOR])&&this._matrix[ae.EXTERIOR][ae.INTERIOR]===gt.FALSE&&this._matrix[ae.EXTERIOR][ae.BOUNDARY]===gt.FALSE}},{key:"setAtLeast",value:function(){if(arguments.length===1)for(var u=arguments[0],c=0;c<u.length;c++){var y=Math.trunc(c/3),N=c%3;this.setAtLeast(y,N,gt.toDimensionValue(u.charAt(c)))}else if(arguments.length===3){var z=arguments[0],se=arguments[1],ve=arguments[2];this._matrix[z][se]<ve&&(this._matrix[z][se]=ve)}}},{key:"setAtLeastIfValid",value:function(u,c,y){u>=0&&c>=0&&this.setAtLeast(u,c,y)}},{key:"isWithin",value:function(){return b.isTrue(this._matrix[ae.INTERIOR][ae.INTERIOR])&&this._matrix[ae.INTERIOR][ae.EXTERIOR]===gt.FALSE&&this._matrix[ae.BOUNDARY][ae.EXTERIOR]===gt.FALSE}},{key:"isTouches",value:function(u,c){return u>c?this.isTouches(c,u):(u===gt.A&&c===gt.A||u===gt.L&&c===gt.L||u===gt.L&&c===gt.A||u===gt.P&&c===gt.A||u===gt.P&&c===gt.L)&&this._matrix[ae.INTERIOR][ae.INTERIOR]===gt.FALSE&&(b.isTrue(this._matrix[ae.INTERIOR][ae.BOUNDARY])||b.isTrue(this._matrix[ae.BOUNDARY][ae.INTERIOR])||b.isTrue(this._matrix[ae.BOUNDARY][ae.BOUNDARY]))}},{key:"isOverlaps",value:function(u,c){return u===gt.P&&c===gt.P||u===gt.A&&c===gt.A?b.isTrue(this._matrix[ae.INTERIOR][ae.INTERIOR])&&b.isTrue(this._matrix[ae.INTERIOR][ae.EXTERIOR])&&b.isTrue(this._matrix[ae.EXTERIOR][ae.INTERIOR]):u===gt.L&&c===gt.L&&this._matrix[ae.INTERIOR][ae.INTERIOR]===1&&b.isTrue(this._matrix[ae.INTERIOR][ae.EXTERIOR])&&b.isTrue(this._matrix[ae.EXTERIOR][ae.INTERIOR])}},{key:"isEquals",value:function(u,c){return u===c&&b.isTrue(this._matrix[ae.INTERIOR][ae.INTERIOR])&&this._matrix[ae.INTERIOR][ae.EXTERIOR]===gt.FALSE&&this._matrix[ae.BOUNDARY][ae.EXTERIOR]===gt.FALSE&&this._matrix[ae.EXTERIOR][ae.INTERIOR]===gt.FALSE&&this._matrix[ae.EXTERIOR][ae.BOUNDARY]===gt.FALSE}},{key:"toString",value:function(){for(var u=new It("123456789"),c=0;c<3;c++)for(var y=0;y<3;y++)u.setCharAt(3*c+y,gt.toDimensionSymbol(this._matrix[c][y]));return u.toString()}},{key:"setAll",value:function(u){for(var c=0;c<3;c++)for(var y=0;y<3;y++)this._matrix[c][y]=u}},{key:"get",value:function(u,c){return this._matrix[u][c]}},{key:"transpose",value:function(){var u=this._matrix[1][0];return this._matrix[1][0]=this._matrix[0][1],this._matrix[0][1]=u,u=this._matrix[2][0],this._matrix[2][0]=this._matrix[0][2],this._matrix[0][2]=u,u=this._matrix[2][1],this._matrix[2][1]=this._matrix[1][2],this._matrix[1][2]=u,this}},{key:"matches",value:function(u){if(u.length!==9)throw new P("Should be length 9: "+u);for(var c=0;c<3;c++)for(var y=0;y<3;y++)if(!b.matches(this._matrix[c][y],u.charAt(3*c+y)))return!1;return!0}},{key:"add",value:function(u){for(var c=0;c<3;c++)for(var y=0;y<3;y++)this.setAtLeast(c,y,u.get(c,y))}},{key:"isDisjoint",value:function(){return this._matrix[ae.INTERIOR][ae.INTERIOR]===gt.FALSE&&this._matrix[ae.INTERIOR][ae.BOUNDARY]===gt.FALSE&&this._matrix[ae.BOUNDARY][ae.INTERIOR]===gt.FALSE&&this._matrix[ae.BOUNDARY][ae.BOUNDARY]===gt.FALSE}},{key:"isCrosses",value:function(u,c){return u===gt.P&&c===gt.L||u===gt.P&&c===gt.A||u===gt.L&&c===gt.A?b.isTrue(this._matrix[ae.INTERIOR][ae.INTERIOR])&&b.isTrue(this._matrix[ae.INTERIOR][ae.EXTERIOR]):u===gt.L&&c===gt.P||u===gt.A&&c===gt.P||u===gt.A&&c===gt.L?b.isTrue(this._matrix[ae.INTERIOR][ae.INTERIOR])&&b.isTrue(this._matrix[ae.EXTERIOR][ae.INTERIOR]):u===gt.L&&c===gt.L&&this._matrix[ae.INTERIOR][ae.INTERIOR]===0}},{key:"interfaces_",get:function(){return[$]}}],[{key:"constructor_",value:function(){if(this._matrix=null,arguments.length===0)this._matrix=Array(3).fill().map(function(){return Array(3)}),this.setAll(gt.FALSE);else if(arguments.length===1){if(typeof arguments[0]=="string"){var u=arguments[0];b.constructor_.call(this),this.set(u)}else if(arguments[0]instanceof b){var c=arguments[0];b.constructor_.call(this),this._matrix[ae.INTERIOR][ae.INTERIOR]=c._matrix[ae.INTERIOR][ae.INTERIOR],this._matrix[ae.INTERIOR][ae.BOUNDARY]=c._matrix[ae.INTERIOR][ae.BOUNDARY],this._matrix[ae.INTERIOR][ae.EXTERIOR]=c._matrix[ae.INTERIOR][ae.EXTERIOR],this._matrix[ae.BOUNDARY][ae.INTERIOR]=c._matrix[ae.BOUNDARY][ae.INTERIOR],this._matrix[ae.BOUNDARY][ae.BOUNDARY]=c._matrix[ae.BOUNDARY][ae.BOUNDARY],this._matrix[ae.BOUNDARY][ae.EXTERIOR]=c._matrix[ae.BOUNDARY][ae.EXTERIOR],this._matrix[ae.EXTERIOR][ae.INTERIOR]=c._matrix[ae.EXTERIOR][ae.INTERIOR],this._matrix[ae.EXTERIOR][ae.BOUNDARY]=c._matrix[ae.EXTERIOR][ae.BOUNDARY],this._matrix[ae.EXTERIOR][ae.EXTERIOR]=c._matrix[ae.EXTERIOR][ae.EXTERIOR]}}}},{key:"matches",value:function(){if(Number.isInteger(arguments[0])&&typeof arguments[1]=="string"){var u=arguments[0],c=arguments[1];return c===gt.SYM_DONTCARE||c===gt.SYM_TRUE&&(u>=0||u===gt.TRUE)||c===gt.SYM_FALSE&&u===gt.FALSE||c===gt.SYM_P&&u===gt.P||c===gt.SYM_L&&u===gt.L||c===gt.SYM_A&&u===gt.A}if(typeof arguments[0]=="string"&&typeof arguments[1]=="string"){var y=arguments[1];return new b(arguments[0]).matches(y)}}},{key:"isTrue",value:function(u){return u>=0||u===gt.TRUE}}])}(),ia=function(){function b(){r(this,b),b.constructor_.apply(this,arguments)}return a(b,[{key:"size",value:function(){return this._size}},{key:"addAll",value:function(u){return u===null||u.length===0?null:(this.ensureCapacity(this._size+u.length),$t.arraycopy(u,0,this._data,this._size,u.length),void(this._size+=u.length))}},{key:"ensureCapacity",value:function(u){if(u<=this._data.length)return null;var c=Math.max(u,2*this._data.length);this._data=Be.copyOf(this._data,c)}},{key:"toArray",value:function(){var u=new Array(this._size).fill(null);return $t.arraycopy(this._data,0,u,0,this._size),u}},{key:"add",value:function(u){this.ensureCapacity(this._size+1),this._data[this._size]=u,++this._size}}],[{key:"constructor_",value:function(){if(this._data=null,this._size=0,arguments.length===0)b.constructor_.call(this,10);else if(arguments.length===1){var u=arguments[0];this._data=new Array(u).fill(null)}}}])}(),dh=function(){function b(){r(this,b)}return a(b,[{key:"getChainStartIndices",value:function(u){var c=0,y=new ia(Math.trunc(u.length/2));y.add(c);do{var N=this.findChainEnd(u,c);y.add(N),c=N}while(c<u.length-1);return y.toArray()}},{key:"findChainEnd",value:function(u,c){for(var y=Ni.quadrant(u[c],u[c+1]),N=c+1;N<u.length&&Ni.quadrant(u[N-1],u[N])===y;)N++;return N-1}},{key:"OLDgetChainStartIndices",value:function(u){var c=0,y=new mt;y.add(c);do{var N=this.findChainEnd(u,c);y.add(N),c=N}while(c<u.length-1);return b.toIntArray(y)}}],[{key:"toIntArray",value:function(u){for(var c=new Array(u.size()).fill(null),y=0;y<c.length;y++)c[y]=u.get(y).intValue();return c}}])}(),Is=function(){return a(function b(){r(this,b),b.constructor_.apply(this,arguments)},[{key:"getCoordinates",value:function(){return this.pts}},{key:"getMaxX",value:function(b){var u=this.pts[this.startIndex[b]].x,c=this.pts[this.startIndex[b+1]].x;return u>c?u:c}},{key:"getMinX",value:function(b){var u=this.pts[this.startIndex[b]].x,c=this.pts[this.startIndex[b+1]].x;return u<c?u:c}},{key:"computeIntersectsForChain",value:function(){if(arguments.length===4){var b=arguments[0],u=arguments[1],c=arguments[2],y=arguments[3];this.computeIntersectsForChain(this.startIndex[b],this.startIndex[b+1],u,u.startIndex[c],u.startIndex[c+1],y)}else if(arguments.length===6){var N=arguments[0],z=arguments[1],se=arguments[2],ve=arguments[3],Le=arguments[4],xe=arguments[5];if(z-N==1&&Le-ve==1)return xe.addIntersections(this.e,N,se.e,ve),null;if(!this.overlaps(N,z,se,ve,Le))return null;var Xe=Math.trunc((N+z)/2),ct=Math.trunc((ve+Le)/2);N<Xe&&(ve<ct&&this.computeIntersectsForChain(N,Xe,se,ve,ct,xe),ct<Le&&this.computeIntersectsForChain(N,Xe,se,ct,Le,xe)),Xe<z&&(ve<ct&&this.computeIntersectsForChain(Xe,z,se,ve,ct,xe),ct<Le&&this.computeIntersectsForChain(Xe,z,se,ct,Le,xe))}}},{key:"overlaps",value:function(b,u,c,y,N){return _e.intersects(this.pts[b],this.pts[u],c.pts[y],c.pts[N])}},{key:"getStartIndexes",value:function(){return this.startIndex}},{key:"computeIntersects",value:function(b,u){for(var c=0;c<this.startIndex.length-1;c++)for(var y=0;y<b.startIndex.length-1;y++)this.computeIntersectsForChain(c,b,y,u)}}],[{key:"constructor_",value:function(){this.e=null,this.pts=null,this.startIndex=null;var b=arguments[0];this.e=b,this.pts=b.getCoordinates();var u=new dh;this.startIndex=u.getChainStartIndices(this.pts)}}])}(),Bo=function(){function b(){r(this,b),b.constructor_.apply(this,arguments)}return a(b,[{key:"getDepth",value:function(u,c){return this._depth[u][c]}},{key:"setDepth",value:function(u,c,y){this._depth[u][c]=y}},{key:"isNull",value:function(){if(arguments.length===0){for(var u=0;u<2;u++)for(var c=0;c<3;c++)if(this._depth[u][c]!==b.NULL_VALUE)return!1;return!0}if(arguments.length===1){var y=arguments[0];return this._depth[y][1]===b.NULL_VALUE}if(arguments.length===2){var N=arguments[0],z=arguments[1];return this._depth[N][z]===b.NULL_VALUE}}},{key:"normalize",value:function(){for(var u=0;u<2;u++)if(!this.isNull(u)){var c=this._depth[u][1];this._depth[u][2]<c&&(c=this._depth[u][2]),c<0&&(c=0);for(var y=1;y<3;y++){var N=0;this._depth[u][y]>c&&(N=1),this._depth[u][y]=N}}}},{key:"getDelta",value:function(u){return this._depth[u][De.RIGHT]-this._depth[u][De.LEFT]}},{key:"getLocation",value:function(u,c){return this._depth[u][c]<=0?ae.EXTERIOR:ae.INTERIOR}},{key:"toString",value:function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]}},{key:"add",value:function(){if(arguments.length===1)for(var u=arguments[0],c=0;c<2;c++)for(var y=1;y<3;y++){var N=u.getLocation(c,y);N!==ae.EXTERIOR&&N!==ae.INTERIOR||(this.isNull(c,y)?this._depth[c][y]=b.depthAtLocation(N):this._depth[c][y]+=b.depthAtLocation(N))}else if(arguments.length===3){var z=arguments[0],se=arguments[1];arguments[2]===ae.INTERIOR&&this._depth[z][se]++}}}],[{key:"constructor_",value:function(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var u=0;u<2;u++)for(var c=0;c<3;c++)this._depth[u][c]=b.NULL_VALUE}},{key:"depthAtLocation",value:function(u){return u===ae.EXTERIOR?0:u===ae.INTERIOR?1:b.NULL_VALUE}}])}();Bo.NULL_VALUE=-1;var _u=function(b){function u(){var c;return r(this,u),c=i(this,u),u.constructor_.apply(c,arguments),c}return m(u,b),a(u,[{key:"getDepth",value:function(){return this._depth}},{key:"getCollapsedEdge",value:function(){var c=new Array(2).fill(null);return c[0]=this.pts[0],c[1]=this.pts[1],new u(c,_i.toLineLabel(this._label))}},{key:"isIsolated",value:function(){return this._isIsolated}},{key:"getCoordinates",value:function(){return this.pts}},{key:"setIsolated",value:function(c){this._isIsolated=c}},{key:"setName",value:function(c){this._name=c}},{key:"equals",value:function(c){if(!(c instanceof u))return!1;var y=c;if(this.pts.length!==y.pts.length)return!1;for(var N=!0,z=!0,se=this.pts.length,ve=0;ve<this.pts.length;ve++)if(this.pts[ve].equals2D(y.pts[ve])||(N=!1),this.pts[ve].equals2D(y.pts[--se])||(z=!1),!N&&!z)return!1;return!0}},{key:"getCoordinate",value:function(){if(arguments.length===0)return this.pts.length>0?this.pts[0]:null;if(arguments.length===1){var c=arguments[0];return this.pts[c]}}},{key:"print",value:function(c){c.print("edge "+this._name+": "),c.print("LINESTRING (");for(var y=0;y<this.pts.length;y++)y>0&&c.print(","),c.print(this.pts[y].x+" "+this.pts[y].y);c.print(")  "+this._label+" "+this._depthDelta)}},{key:"computeIM",value:function(c){u.updateIM(this._label,c)}},{key:"isCollapsed",value:function(){return!!this._label.isArea()&&this.pts.length===3&&!!this.pts[0].equals(this.pts[2])}},{key:"isClosed",value:function(){return this.pts[0].equals(this.pts[this.pts.length-1])}},{key:"getMaximumSegmentIndex",value:function(){return this.pts.length-1}},{key:"getDepthDelta",value:function(){return this._depthDelta}},{key:"getNumPoints",value:function(){return this.pts.length}},{key:"printReverse",value:function(c){c.print("edge "+this._name+": ");for(var y=this.pts.length-1;y>=0;y--)c.print(this.pts[y]+" ");c.println("")}},{key:"getMonotoneChainEdge",value:function(){return this._mce===null&&(this._mce=new Is(this)),this._mce}},{key:"getEnvelope",value:function(){if(this._env===null){this._env=new _e;for(var c=0;c<this.pts.length;c++)this._env.expandToInclude(this.pts[c])}return this._env}},{key:"addIntersection",value:function(c,y,N,z){var se=new X(c.getIntersection(z)),ve=y,Le=c.getEdgeDistance(N,z),xe=ve+1;if(xe<this.pts.length){var Xe=this.pts[xe];se.equals2D(Xe)&&(ve=xe,Le=0)}this.eiList.add(se,ve,Le)}},{key:"toString",value:function(){var c=new It;c.append("edge "+this._name+": "),c.append("LINESTRING (");for(var y=0;y<this.pts.length;y++)y>0&&c.append(","),c.append(this.pts[y].x+" "+this.pts[y].y);return c.append(")  "+this._label+" "+this._depthDelta),c.toString()}},{key:"isPointwiseEqual",value:function(c){if(this.pts.length!==c.pts.length)return!1;for(var y=0;y<this.pts.length;y++)if(!this.pts[y].equals2D(c.pts[y]))return!1;return!0}},{key:"setDepthDelta",value:function(c){this._depthDelta=c}},{key:"getEdgeIntersectionList",value:function(){return this.eiList}},{key:"addIntersections",value:function(c,y,N){for(var z=0;z<c.getIntersectionNum();z++)this.addIntersection(c,y,N,z)}}],[{key:"constructor_",value:function(){if(this.pts=null,this._env=null,this.eiList=new Fo(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new Bo,this._depthDelta=0,arguments.length===1){var c=arguments[0];u.constructor_.call(this,c,null)}else if(arguments.length===2){var y=arguments[0],N=arguments[1];this.pts=y,this._label=N}}},{key:"updateIM",value:function(){if(!(arguments.length===2&&arguments[1]instanceof mu&&arguments[0]instanceof _i))return w(u,"updateIM",this).apply(this,arguments);var c=arguments[0],y=arguments[1];y.setAtLeastIfValid(c.getLocation(0,De.ON),c.getLocation(1,De.ON),1),c.isArea()&&(y.setAtLeastIfValid(c.getLocation(0,De.LEFT),c.getLocation(1,De.LEFT),2),y.setAtLeastIfValid(c.getLocation(0,De.RIGHT),c.getLocation(1,De.RIGHT),2))}}])}(Xn),ra=function(){function b(){r(this,b),b.constructor_.apply(this,arguments)}return a(b,[{key:"setWorkingPrecisionModel",value:function(u){this._workingPrecisionModel=u}},{key:"insertUniqueEdge",value:function(u){var c=this._edgeList.findEqualEdge(u);if(c!==null){var y=c.getLabel(),N=u.getLabel();c.isPointwiseEqual(u)||(N=new _i(u.getLabel())).flip(),y.merge(N);var z=b.depthDelta(N),se=c.getDepthDelta()+z;c.setDepthDelta(se)}else this._edgeList.add(u),u.setDepthDelta(b.depthDelta(u.getLabel()))}},{key:"buildSubgraphs",value:function(u,c){for(var y=new mt,N=u.iterator();N.hasNext();){var z=N.next(),se=z.getRightmostCoordinate(),ve=new hr(y).getDepth(se);z.computeDepth(ve),z.findResultEdges(),y.add(z),c.add(z.getDirectedEdges(),z.getNodes())}}},{key:"createSubgraphs",value:function(u){for(var c=new mt,y=u.getNodes().iterator();y.hasNext();){var N=y.next();if(!N.isVisited()){var z=new qt;z.create(N),c.add(z)}}return jr.sort(c,jr.reverseOrder()),c}},{key:"createEmptyResultGeometry",value:function(){return this._geomFact.createPolygon()}},{key:"getNoder",value:function(u){if(this._workingNoder!==null)return this._workingNoder;var c=new Ja,y=new et;return y.setPrecisionModel(u),c.setSegmentIntersector(new go(y)),c}},{key:"buffer",value:function(u,c){var y=this._workingPrecisionModel;y===null&&(y=u.getPrecisionModel()),this._geomFact=u.getFactory();var N=new xo(y,this._bufParams),z=new rl(u,c,N).getCurves();if(z.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(z,y),this._graph=new zs(new fo),this._graph.addEdges(this._edgeList.getEdges());var se=this.createSubgraphs(this._graph),ve=new Jo(this._geomFact);this.buildSubgraphs(se,ve);var Le=ve.getPolygons();return Le.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(Le)}},{key:"computeNodedEdges",value:function(u,c){var y=this.getNoder(c);y.computeNodes(u);for(var N=y.getNodedSubstrings().iterator();N.hasNext();){var z=N.next(),se=z.getCoordinates();if(se.length!==2||!se[0].equals2D(se[1])){var ve=z.getData(),Le=new _u(z.getCoordinates(),new _i(ve));this.insertUniqueEdge(Le)}}}},{key:"setNoder",value:function(u){this._workingNoder=u}}],[{key:"constructor_",value:function(){this._bufParams=null,this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new ds;var u=arguments[0];this._bufParams=u}},{key:"depthDelta",value:function(u){var c=u.getLocation(0,De.LEFT),y=u.getLocation(0,De.RIGHT);return c===ae.INTERIOR&&y===ae.EXTERIOR?1:c===ae.EXTERIOR&&y===ae.INTERIOR?-1:0}},{key:"convertSegStrings",value:function(u){for(var c=new wi,y=new mt;u.hasNext();){var N=u.next(),z=c.createLineString(N.getCoordinates());y.add(z)}return c.buildGeometry(y)}}])}(),gh=function(){function b(){r(this,b),b.constructor_.apply(this,arguments)}return a(b,[{key:"rescale",value:function(){if(Ve(arguments[0],Se))for(var u=arguments[0].iterator();u.hasNext();){var c=u.next();this.rescale(c.getCoordinates())}else if(arguments[0]instanceof Array){for(var y=arguments[0],N=0;N<y.length;N++)y[N].x=y[N].x/this._scaleFactor+this._offsetX,y[N].y=y[N].y/this._scaleFactor+this._offsetY;y.length===2&&y[0].equals2D(y[1])&&$t.out.println(y)}}},{key:"scale",value:function(){if(Ve(arguments[0],Se)){for(var u=arguments[0],c=new mt(u.size()),y=u.iterator();y.hasNext();){var N=y.next();c.add(new fs(this.scale(N.getCoordinates()),N.getData()))}return c}if(arguments[0]instanceof Array){for(var z=arguments[0],se=new Array(z.length).fill(null),ve=0;ve<z.length;ve++)se[ve]=new X(Math.round((z[ve].x-this._offsetX)*this._scaleFactor),Math.round((z[ve].y-this._offsetY)*this._scaleFactor),z[ve].getZ());return kt.removeRepeatedPoints(se)}}},{key:"isIntegerPrecision",value:function(){return this._scaleFactor===1}},{key:"getNodedSubstrings",value:function(){var u=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(u),u}},{key:"computeNodes",value:function(u){var c=u;this._isScaled&&(c=this.scale(u)),this._noder.computeNodes(c)}},{key:"interfaces_",get:function(){return[Ka]}}],[{key:"constructor_",value:function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,arguments.length===2){var u=arguments[0],c=arguments[1];b.constructor_.call(this,u,c,0,0)}else if(arguments.length===4){var y=arguments[0],N=arguments[1];this._noder=y,this._scaleFactor=N,this._isScaled=!this.isIntegerPrecision()}}}])}(),Xr=function(){function b(){r(this,b),b.constructor_.apply(this,arguments)}return a(b,[{key:"checkEndPtVertexIntersections",value:function(){if(arguments.length===0)for(var u=this._segStrings.iterator();u.hasNext();){var c=u.next().getCoordinates();this.checkEndPtVertexIntersections(c[0],this._segStrings),this.checkEndPtVertexIntersections(c[c.length-1],this._segStrings)}else if(arguments.length===2){for(var y=arguments[0],N=arguments[1].iterator();N.hasNext();)for(var z=N.next().getCoordinates(),se=1;se<z.length-1;se++)if(z[se].equals(y))throw new pe("found endpt/interior pt intersection at index "+se+" :pt "+y)}}},{key:"checkInteriorIntersections",value:function(){if(arguments.length===0)for(var u=this._segStrings.iterator();u.hasNext();)for(var c=u.next(),y=this._segStrings.iterator();y.hasNext();){var N=y.next();this.checkInteriorIntersections(c,N)}else if(arguments.length===2)for(var z=arguments[0],se=arguments[1],ve=z.getCoordinates(),Le=se.getCoordinates(),xe=0;xe<ve.length-1;xe++)for(var Xe=0;Xe<Le.length-1;Xe++)this.checkInteriorIntersections(z,xe,se,Xe);else if(arguments.length===4){var ct=arguments[0],Lt=arguments[1],Ht=arguments[2],on=arguments[3];if(ct===Ht&&Lt===on)return null;var hn=ct.getCoordinates()[Lt],Wn=ct.getCoordinates()[Lt+1],xn=Ht.getCoordinates()[on],hi=Ht.getCoordinates()[on+1];if(this._li.computeIntersection(hn,Wn,xn,hi),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,hn,Wn)||this.hasInteriorIntersection(this._li,xn,hi)))throw new pe("found non-noded intersection at "+hn+"-"+Wn+" and "+xn+"-"+hi)}}},{key:"checkValid",value:function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()}},{key:"checkCollapses",value:function(){if(arguments.length===0)for(var u=this._segStrings.iterator();u.hasNext();){var c=u.next();this.checkCollapses(c)}else if(arguments.length===1)for(var y=arguments[0].getCoordinates(),N=0;N<y.length-2;N++)this.checkCollapse(y[N],y[N+1],y[N+2])}},{key:"hasInteriorIntersection",value:function(u,c,y){for(var N=0;N<u.getIntersectionNum();N++){var z=u.getIntersection(N);if(!z.equals(c)&&!z.equals(y))return!0}return!1}},{key:"checkCollapse",value:function(u,c,y){if(u.equals(y))throw new pe("found non-noded collapse at "+b.fact.createLineString([u,c,y]))}}],[{key:"constructor_",value:function(){this._li=new et,this._segStrings=null;var u=arguments[0];this._segStrings=u}}])}();Xr.fact=new wi;var sl=function(){function b(){r(this,b),b.constructor_.apply(this,arguments)}return a(b,[{key:"intersectsScaled",value:function(u,c){var y=Math.min(u.x,c.x),N=Math.max(u.x,c.x),z=Math.min(u.y,c.y),se=Math.max(u.y,c.y),ve=this._maxx<y||this._minx>N||this._maxy<z||this._miny>se;if(ve)return!1;var Le=this.intersectsToleranceSquare(u,c);return be.isTrue(!(ve&&Le),"Found bad envelope test"),Le}},{key:"initCorners",value:function(u){var c=.5;this._minx=u.x-c,this._maxx=u.x+c,this._miny=u.y-c,this._maxy=u.y+c,this._corner[0]=new X(this._maxx,this._maxy),this._corner[1]=new X(this._minx,this._maxy),this._corner[2]=new X(this._minx,this._miny),this._corner[3]=new X(this._maxx,this._miny)}},{key:"intersects",value:function(u,c){return this._scaleFactor===1?this.intersectsScaled(u,c):(this.copyScaled(u,this._p0Scaled),this.copyScaled(c,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))}},{key:"scale",value:function(u){return Math.round(u*this._scaleFactor)}},{key:"getCoordinate",value:function(){return this._originalPt}},{key:"copyScaled",value:function(u,c){c.x=this.scale(u.x),c.y=this.scale(u.y)}},{key:"getSafeEnvelope",value:function(){if(this._safeEnv===null){var u=b.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new _e(this._originalPt.x-u,this._originalPt.x+u,this._originalPt.y-u,this._originalPt.y+u)}return this._safeEnv}},{key:"intersectsPixelClosure",value:function(u,c){return this._li.computeIntersection(u,c,this._corner[0],this._corner[1]),!!this._li.hasIntersection()||(this._li.computeIntersection(u,c,this._corner[1],this._corner[2]),!!this._li.hasIntersection()||(this._li.computeIntersection(u,c,this._corner[2],this._corner[3]),!!this._li.hasIntersection()||(this._li.computeIntersection(u,c,this._corner[3],this._corner[0]),!!this._li.hasIntersection())))}},{key:"intersectsToleranceSquare",value:function(u,c){var y=!1,N=!1;return this._li.computeIntersection(u,c,this._corner[0],this._corner[1]),!!this._li.isProper()||(this._li.computeIntersection(u,c,this._corner[1],this._corner[2]),!!this._li.isProper()||(this._li.hasIntersection()&&(y=!0),this._li.computeIntersection(u,c,this._corner[2],this._corner[3]),!!this._li.isProper()||(this._li.hasIntersection()&&(N=!0),this._li.computeIntersection(u,c,this._corner[3],this._corner[0]),!!this._li.isProper()||!(!y||!N)||!!u.equals(this._pt)||!!c.equals(this._pt))))}},{key:"addSnappedNode",value:function(u,c){var y=u.getCoordinate(c),N=u.getCoordinate(c+1);return!!this.intersects(y,N)&&(u.addIntersection(this.getCoordinate(),c),!0)}}],[{key:"constructor_",value:function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var u=arguments[0],c=arguments[1],y=arguments[2];if(this._originalPt=u,this._pt=u,this._scaleFactor=c,this._li=y,c<=0)throw new P("Scale factor must be non-zero");c!==1&&(this._pt=new X(this.scale(u.x),this.scale(u.y)),this._p0Scaled=new X,this._p1Scaled=new X),this.initCorners(this._pt)}}])}();sl.SAFE_ENV_EXPANSION_FACTOR=.75;var mo=function(){return a(function b(){r(this,b),b.constructor_.apply(this,arguments)},[{key:"select",value:function(){if(arguments.length!==1){if(arguments.length===2){var b=arguments[1];arguments[0].getLineSegment(b,this.selectedSegment),this.select(this.selectedSegment)}}}}],[{key:"constructor_",value:function(){this.selectedSegment=new cr}}])}(),pu=function(){return a(function b(){r(this,b),b.constructor_.apply(this,arguments)},[{key:"snap",value:function(){if(arguments.length===1){var b=arguments[0];return this.snap(b,null,-1)}if(arguments.length===3){var u=arguments[0],c=arguments[1],y=arguments[2],N=u.getSafeEnvelope(),z=new Kr(u,c,y);return this._index.query(N,new(function(){return a(function se(){r(this,se)},[{key:"interfaces_",get:function(){return[Hs]}},{key:"visitItem",value:function(se){se.select(N,z)}}])}())),z.isNodeAdded()}}}],[{key:"constructor_",value:function(){this._index=null;var b=arguments[0];this._index=b}}])}(),Kr=function(b){function u(){var c;return r(this,u),c=i(this,u),u.constructor_.apply(c,arguments),c}return m(u,b),a(u,[{key:"isNodeAdded",value:function(){return this._isNodeAdded}},{key:"select",value:function(){if(!(arguments.length===2&&Number.isInteger(arguments[1])&&arguments[0]instanceof Xa))return w(u,"select",this,1).apply(this,arguments);var c=arguments[1],y=arguments[0].getContext();if(this._parentEdge===y&&(c===this._hotPixelVertexIndex||c+1===this._hotPixelVertexIndex))return null;this._isNodeAdded|=this._hotPixel.addSnappedNode(y,c)}}],[{key:"constructor_",value:function(){this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var c=arguments[0],y=arguments[1],N=arguments[2];this._hotPixel=c,this._parentEdge=y,this._hotPixelVertexIndex=N}}])}(mo);pu.HotPixelSnapAction=Kr;var sa=function(){return a(function b(){r(this,b),b.constructor_.apply(this,arguments)},[{key:"processIntersections",value:function(b,u,c,y){if(b===c&&u===y)return null;var N=b.getCoordinates()[u],z=b.getCoordinates()[u+1],se=c.getCoordinates()[y],ve=c.getCoordinates()[y+1];if(this._li.computeIntersection(N,z,se,ve),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var Le=0;Le<this._li.getIntersectionNum();Le++)this._interiorIntersections.add(this._li.getIntersection(Le));b.addIntersections(this._li,u,0),c.addIntersections(this._li,y,1)}}},{key:"isDone",value:function(){return!1}},{key:"getInteriorIntersections",value:function(){return this._interiorIntersections}},{key:"interfaces_",get:function(){return[gu]}}],[{key:"constructor_",value:function(){this._li=null,this._interiorIntersections=null;var b=arguments[0];this._li=b,this._interiorIntersections=new mt}}])}(),vu=function(){return a(function b(){r(this,b),b.constructor_.apply(this,arguments)},[{key:"checkCorrectness",value:function(b){var u=fs.getNodedSubstrings(b),c=new Xr(u);try{c.checkValid()}catch(y){if(!(y instanceof O))throw y;y.printStackTrace()}}},{key:"getNodedSubstrings",value:function(){return fs.getNodedSubstrings(this._nodedSegStrings)}},{key:"snapRound",value:function(b,u){var c=this.findInteriorIntersections(b,u);this.computeIntersectionSnaps(c),this.computeVertexSnaps(b)}},{key:"findInteriorIntersections",value:function(b,u){var c=new sa(u);return this._noder.setSegmentIntersector(c),this._noder.computeNodes(b),c.getInteriorIntersections()}},{key:"computeVertexSnaps",value:function(){if(Ve(arguments[0],Se))for(var b=arguments[0].iterator();b.hasNext();){var u=b.next();this.computeVertexSnaps(u)}else if(arguments[0]instanceof fs)for(var c=arguments[0],y=c.getCoordinates(),N=0;N<y.length;N++){var z=new sl(y[N],this._scaleFactor,this._li);this._pointSnapper.snap(z,c,N)&&c.addIntersection(y[N],N)}}},{key:"computeNodes",value:function(b){this._nodedSegStrings=b,this._noder=new Ja,this._pointSnapper=new pu(this._noder.getIndex()),this.snapRound(b,this._li)}},{key:"computeIntersectionSnaps",value:function(b){for(var u=b.iterator();u.hasNext();){var c=u.next(),y=new sl(c,this._scaleFactor,this._li);this._pointSnapper.snap(y)}}},{key:"interfaces_",get:function(){return[Ka]}}],[{key:"constructor_",value:function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var b=arguments[0];this._pm=b,this._li=new et,this._li.setPrecisionModel(b),this._scaleFactor=b.getScale()}}])}(),Ms=function(){function b(){r(this,b),b.constructor_.apply(this,arguments)}return a(b,[{key:"bufferFixedPrecision",value:function(u){var c=new gh(new vu(new vn(1)),u.getScale()),y=new ra(this._bufParams);y.setWorkingPrecisionModel(u),y.setNoder(c),this._resultGeometry=y.buffer(this._argGeom,this._distance)}},{key:"bufferReducedPrecision",value:function(){if(arguments.length===0){for(var u=b.MAX_PRECISION_DIGITS;u>=0;u--){try{this.bufferReducedPrecision(u)}catch(z){if(!(z instanceof Qe))throw z;this._saveException=z}if(this._resultGeometry!==null)return null}throw this._saveException}if(arguments.length===1){var c=arguments[0],y=b.precisionScaleFactor(this._argGeom,this._distance,c),N=new vn(y);this.bufferFixedPrecision(N)}}},{key:"computeGeometry",value:function(){if(this.bufferOriginalPrecision(),this._resultGeometry!==null)return null;var u=this._argGeom.getFactory().getPrecisionModel();u.getType()===vn.FIXED?this.bufferFixedPrecision(u):this.bufferReducedPrecision()}},{key:"setQuadrantSegments",value:function(u){this._bufParams.setQuadrantSegments(u)}},{key:"bufferOriginalPrecision",value:function(){try{var u=new ra(this._bufParams);this._resultGeometry=u.buffer(this._argGeom,this._distance)}catch(c){if(!(c instanceof pe))throw c;this._saveException=c}}},{key:"getResultGeometry",value:function(u){return this._distance=u,this.computeGeometry(),this._resultGeometry}},{key:"setEndCapStyle",value:function(u){this._bufParams.setEndCapStyle(u)}}],[{key:"constructor_",value:function(){if(this._argGeom=null,this._distance=null,this._bufParams=new D,this._resultGeometry=null,this._saveException=null,arguments.length===1){var u=arguments[0];this._argGeom=u}else if(arguments.length===2){var c=arguments[0],y=arguments[1];this._argGeom=c,this._bufParams=y}}},{key:"bufferOp",value:function(){if(arguments.length===2){var u=arguments[1];return new b(arguments[0]).getResultGeometry(u)}if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof oe&&typeof arguments[1]=="number"){var c=arguments[1],y=arguments[2],N=new b(arguments[0]);return N.setQuadrantSegments(y),N.getResultGeometry(c)}if(arguments[2]instanceof D&&arguments[0]instanceof oe&&typeof arguments[1]=="number"){var z=arguments[1];return new b(arguments[0],arguments[2]).getResultGeometry(z)}}else if(arguments.length===4){var se=arguments[1],ve=arguments[2],Le=arguments[3],xe=new b(arguments[0]);return xe.setQuadrantSegments(ve),xe.setEndCapStyle(Le),xe.getResultGeometry(se)}}},{key:"precisionScaleFactor",value:function(u,c,y){var N=u.getEnvelopeInternal(),z=dn.max(Math.abs(N.getMaxX()),Math.abs(N.getMaxY()),Math.abs(N.getMinX()),Math.abs(N.getMinY()))+2*(c>0?c:0),se=y-Math.trunc(Math.log(z)/Math.log(10)+1);return Math.pow(10,se)}}])}();Ms.CAP_ROUND=D.CAP_ROUND,Ms.CAP_BUTT=D.CAP_FLAT,Ms.CAP_FLAT=D.CAP_FLAT,Ms.CAP_SQUARE=D.CAP_SQUARE,Ms.MAX_PRECISION_DIGITS=12;var oa=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],aa=function(){return a(function b(u){r(this,b),this.geometryFactory=u||new wi},[{key:"read",value:function(b){var u,c=(u=typeof b=="string"?JSON.parse(b):b).type;if(!ji[c])throw new Error("Unknown GeoJSON type: "+u.type);return oa.indexOf(c)!==-1?ji[c].call(this,u.coordinates):c==="GeometryCollection"?ji[c].call(this,u.geometries):ji[c].call(this,u)}},{key:"write",value:function(b){var u=b.getGeometryType();if(!Wi[u])throw new Error("Geometry is not supported");return Wi[u].call(this,b)}}])}(),ji={Feature:function(b){var u={};for(var c in b)u[c]=b[c];if(b.geometry){var y=b.geometry.type;if(!ji[y])throw new Error("Unknown GeoJSON type: "+b.type);u.geometry=this.read(b.geometry)}return b.bbox&&(u.bbox=ji.bbox.call(this,b.bbox)),u},FeatureCollection:function(b){var u={};if(b.features){u.features=[];for(var c=0;c<b.features.length;++c)u.features.push(this.read(b.features[c]))}return b.bbox&&(u.bbox=this.parse.bbox.call(this,b.bbox)),u},coordinates:function(b){for(var u=[],c=0;c<b.length;++c){var y=b[c];u.push(s(X,E(y)))}return u},bbox:function(b){return this.geometryFactory.createLinearRing([new X(b[0],b[1]),new X(b[2],b[1]),new X(b[2],b[3]),new X(b[0],b[3]),new X(b[0],b[1])])},Point:function(b){var u=s(X,E(b));return this.geometryFactory.createPoint(u)},MultiPoint:function(b){for(var u=[],c=0;c<b.length;++c)u.push(ji.Point.call(this,b[c]));return this.geometryFactory.createMultiPoint(u)},LineString:function(b){var u=ji.coordinates.call(this,b);return this.geometryFactory.createLineString(u)},MultiLineString:function(b){for(var u=[],c=0;c<b.length;++c)u.push(ji.LineString.call(this,b[c]));return this.geometryFactory.createMultiLineString(u)},Polygon:function(b){for(var u=ji.coordinates.call(this,b[0]),c=this.geometryFactory.createLinearRing(u),y=[],N=1;N<b.length;++N){var z=b[N],se=ji.coordinates.call(this,z),ve=this.geometryFactory.createLinearRing(se);y.push(ve)}return this.geometryFactory.createPolygon(c,y)},MultiPolygon:function(b){for(var u=[],c=0;c<b.length;++c){var y=b[c];u.push(ji.Polygon.call(this,y))}return this.geometryFactory.createMultiPolygon(u)},GeometryCollection:function(b){for(var u=[],c=0;c<b.length;++c){var y=b[c];u.push(this.read(y))}return this.geometryFactory.createGeometryCollection(u)}},Wi={coordinate:function(b){var u=[b.x,b.y];return b.z&&u.push(b.z),b.m&&u.push(b.m),u},Point:function(b){return{type:"Point",coordinates:Wi.coordinate.call(this,b.getCoordinate())}},MultiPoint:function(b){for(var u=[],c=0;c<b._geometries.length;++c){var y=b._geometries[c],N=Wi.Point.call(this,y);u.push(N.coordinates)}return{type:"MultiPoint",coordinates:u}},LineString:function(b){for(var u=[],c=b.getCoordinates(),y=0;y<c.length;++y){var N=c[y];u.push(Wi.coordinate.call(this,N))}return{type:"LineString",coordinates:u}},MultiLineString:function(b){for(var u=[],c=0;c<b._geometries.length;++c){var y=b._geometries[c],N=Wi.LineString.call(this,y);u.push(N.coordinates)}return{type:"MultiLineString",coordinates:u}},Polygon:function(b){var u=[],c=Wi.LineString.call(this,b._shell);u.push(c.coordinates);for(var y=0;y<b._holes.length;++y){var N=b._holes[y],z=Wi.LineString.call(this,N);u.push(z.coordinates)}return{type:"Polygon",coordinates:u}},MultiPolygon:function(b){for(var u=[],c=0;c<b._geometries.length;++c){var y=b._geometries[c],N=Wi.Polygon.call(this,y);u.push(N.coordinates)}return{type:"MultiPolygon",coordinates:u}},GeometryCollection:function(b){for(var u=[],c=0;c<b._geometries.length;++c){var y=b._geometries[c],N=y.getGeometryType();u.push(Wi[N].call(this,y))}return{type:"GeometryCollection",geometries:u}}};return{BufferOp:Ms,GeoJSONReader:function(){return a(function b(u){r(this,b),this.parser=new aa(u||new wi)},[{key:"read",value:function(b){return this.parser.read(b)}}])}(),GeoJSONWriter:function(){return a(function b(){r(this,b),this.parser=new aa(this.geometryFactory)},[{key:"write",value:function(b){return this.parser.write(b)}}])}()}})})(t3);var C7=t3.exports;const P7=Vf(C7);function Do(){return new Nc}function Nc(){this.reset()}Nc.prototype={constructor:Nc,reset:function(){this.s=this.t=0},add:function(n){yd(Tu,n,this.t),yd(this,Tu.s,this.s),this.s?this.t+=Tu.t:this.s=Tu.t},valueOf:function(){return this.s}};var Tu=new Nc;function yd(n,e,t){var i=n.s=e+t,r=i-e,s=i-r;n.t=e-s+(t-r)}var di=1e-6,ti=Math.PI,Ns=ti/2,bd=ti/4,Bs=ti*2,vo=180/ti,is=ti/180,Zi=Math.abs,N7=Math.atan,Ba=Math.atan2,Si=Math.cos,Ii=Math.sin,ja=Math.sqrt;function n3(n){return n>1?0:n<-1?ti:Math.acos(n)}function Xo(n){return n>1?Ns:n<-1?-Ns:Math.asin(n)}function Ml(){}function Dc(n,e){n&&kd.hasOwnProperty(n.type)&&kd[n.type](n,e)}var wd={Feature:function(n,e){Dc(n.geometry,e)},FeatureCollection:function(n,e){for(var t=n.features,i=-1,r=t.length;++i<r;)Dc(t[i].geometry,e)}},kd={Sphere:function(n,e){e.sphere()},Point:function(n,e){n=n.coordinates,e.point(n[0],n[1],n[2])},MultiPoint:function(n,e){for(var t=n.coordinates,i=-1,r=t.length;++i<r;)n=t[i],e.point(n[0],n[1],n[2])},LineString:function(n,e){hf(n.coordinates,e,0)},MultiLineString:function(n,e){for(var t=n.coordinates,i=-1,r=t.length;++i<r;)hf(t[i],e,0)},Polygon:function(n,e){Ed(n.coordinates,e)},MultiPolygon:function(n,e){for(var t=n.coordinates,i=-1,r=t.length;++i<r;)Ed(t[i],e)},GeometryCollection:function(n,e){for(var t=n.geometries,i=-1,r=t.length;++i<r;)Dc(t[i],e)}};function hf(n,e,t){var i=-1,r=n.length-t,s;for(e.lineStart();++i<r;)s=n[i],e.point(s[0],s[1],s[2]);e.lineEnd()}function Ed(n,e){var t=-1,i=n.length;for(e.polygonStart();++t<i;)hf(n[t],e,1);e.polygonEnd()}function D7(n,e){n&&wd.hasOwnProperty(n.type)?wd[n.type](n,e):Dc(n,e)}Do();Do();function ff(n){return[Ba(n[1],n[0]),Xo(n[2])]}function $a(n){var e=n[0],t=n[1],i=Si(t);return[i*Si(e),i*Ii(e),Ii(t)]}function Lu(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]}function Ac(n,e){return[n[1]*e[2]-n[2]*e[1],n[2]*e[0]-n[0]*e[2],n[0]*e[1]-n[1]*e[0]]}function Eh(n,e){n[0]+=e[0],n[1]+=e[1],n[2]+=e[2]}function Cu(n,e){return[n[0]*e,n[1]*e,n[2]*e]}function df(n){var e=ja(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=e,n[1]/=e,n[2]/=e}Do();function i3(n,e){function t(i,r){return i=n(i,r),e(i[0],i[1])}return n.invert&&e.invert&&(t.invert=function(i,r){return i=e.invert(i,r),i&&n.invert(i[0],i[1])}),t}function gf(n,e){return[n>ti?n-Bs:n<-ti?n+Bs:n,e]}gf.invert=gf;function A7(n,e,t){return(n%=Bs)?e||t?i3(Id(n),Md(e,t)):Id(n):e||t?Md(e,t):gf}function Sd(n){return function(e,t){return e+=n,[e>ti?e-Bs:e<-ti?e+Bs:e,t]}}function Id(n){var e=Sd(n);return e.invert=Sd(-n),e}function Md(n,e){var t=Si(n),i=Ii(n),r=Si(e),s=Ii(e);function o(a,l){var h=Si(l),d=Si(a)*h,m=Ii(a)*h,v=Ii(l),k=v*t+d*i;return[Ba(m*r-k*s,d*t-v*i),Xo(k*r+m*s)]}return o.invert=function(a,l){var h=Si(l),d=Si(a)*h,m=Ii(a)*h,v=Ii(l),k=v*r-m*s;return[Ba(m*r+v*s,d*t+k*i),Xo(k*t-d*i)]},o}function R7(n,e,t,i,r,s){if(t){var o=Si(e),a=Ii(e),l=i*t;r==null?(r=e+i*Bs,s=e-l/2):(r=Td(o,r),s=Td(o,s),(i>0?r<s:r>s)&&(r+=i*Bs));for(var h,d=r;i>0?d>s:d<s;d-=l)h=ff([o,-a*Si(d),-a*Ii(d)]),n.point(h[0],h[1])}}function Td(n,e){e=$a(e),e[0]-=n,df(e);var t=n3(-e[1]);return((-e[2]<0?-t:t)+Bs-di)%Bs}function r3(){var n=[],e;return{point:function(t,i){e.push([t,i])},lineStart:function(){n.push(e=[])},lineEnd:Ml,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var t=n;return n=[],e=null,t}}}function O7(n,e,t,i,r,s){var o=n[0],a=n[1],l=e[0],h=e[1],d=0,m=1,v=l-o,k=h-a,w;if(w=t-o,!(!v&&w>0)){if(w/=v,v<0){if(w<d)return;w<m&&(m=w)}else if(v>0){if(w>m)return;w>d&&(d=w)}if(w=r-o,!(!v&&w<0)){if(w/=v,v<0){if(w>m)return;w>d&&(d=w)}else if(v>0){if(w<d)return;w<m&&(m=w)}if(w=i-a,!(!k&&w>0)){if(w/=k,k<0){if(w<d)return;w<m&&(m=w)}else if(k>0){if(w>m)return;w>d&&(d=w)}if(w=s-a,!(!k&&w<0)){if(w/=k,k<0){if(w>m)return;w>d&&(d=w)}else if(k>0){if(w<d)return;w<m&&(m=w)}return d>0&&(n[0]=o+d*v,n[1]=a+d*k),m<1&&(e[0]=o+m*v,e[1]=a+m*k),!0}}}}}function uc(n,e){return Zi(n[0]-e[0])<di&&Zi(n[1]-e[1])<di}function Pu(n,e,t,i){this.x=n,this.z=e,this.o=t,this.e=i,this.v=!1,this.n=this.p=null}function s3(n,e,t,i,r){var s=[],o=[],a,l;if(n.forEach(function(w){if(!((E=w.length-1)<=0)){var E,I=w[0],M=w[E],C;if(uc(I,M)){for(r.lineStart(),a=0;a<E;++a)r.point((I=w[a])[0],I[1]);r.lineEnd();return}s.push(C=new Pu(I,w,null,!0)),o.push(C.o=new Pu(I,null,C,!1)),s.push(C=new Pu(M,w,null,!1)),o.push(C.o=new Pu(M,null,C,!0))}}),!!s.length){for(o.sort(e),Ld(s),Ld(o),a=0,l=o.length;a<l;++a)o[a].e=t=!t;for(var h=s[0],d,m;;){for(var v=h,k=!0;v.v;)if((v=v.n)===h)return;d=v.z,r.lineStart();do{if(v.v=v.o.v=!0,v.e){if(k)for(a=0,l=d.length;a<l;++a)r.point((m=d[a])[0],m[1]);else i(v.x,v.n.x,1,r);v=v.n}else{if(k)for(d=v.p.z,a=d.length-1;a>=0;--a)r.point((m=d[a])[0],m[1]);else i(v.x,v.p.x,-1,r);v=v.p}v=v.o,d=v.z,k=!k}while(!v.v);r.lineEnd()}}}function Ld(n){if(e=n.length){for(var e,t=0,i=n[0],r;++t<e;)i.n=r=n[t],r.p=i,i=r;i.n=r=n[0],r.p=i}}function o3(n,e){return n<e?-1:n>e?1:n>=e?0:NaN}function x7(n){return n.length===1&&(n=F7(n)),{left:function(e,t,i,r){for(i==null&&(i=0),r==null&&(r=e.length);i<r;){var s=i+r>>>1;n(e[s],t)<0?i=s+1:r=s}return i},right:function(e,t,i,r){for(i==null&&(i=0),r==null&&(r=e.length);i<r;){var s=i+r>>>1;n(e[s],t)>0?r=s:i=s+1}return i}}}function F7(n){return function(e,t){return o3(n(e),t)}}x7(o3);function a3(n){for(var e=n.length,t,i=-1,r=0,s,o;++i<e;)r+=n[i].length;for(s=new Array(r);--e>=0;)for(o=n[e],t=o.length;--t>=0;)s[--r]=o[t];return s}var Tl=1e9,Nu=-Tl;function B7(n,e,t,i){function r(h,d){return n<=h&&h<=t&&e<=d&&d<=i}function s(h,d,m,v){var k=0,w=0;if(h==null||(k=o(h,m))!==(w=o(d,m))||l(h,d)<0^m>0)do v.point(k===0||k===3?n:t,k>1?i:e);while((k=(k+m+4)%4)!==w);else v.point(d[0],d[1])}function o(h,d){return Zi(h[0]-n)<di?d>0?0:3:Zi(h[0]-t)<di?d>0?2:1:Zi(h[1]-e)<di?d>0?1:0:d>0?3:2}function a(h,d){return l(h.x,d.x)}function l(h,d){var m=o(h,1),v=o(d,1);return m!==v?m-v:m===0?d[1]-h[1]:m===1?h[0]-d[0]:m===2?h[1]-d[1]:d[0]-h[0]}return function(h){var d=h,m=r3(),v,k,w,E,I,M,C,D,O,P,F,V={point:$,lineStart:j,lineEnd:Q,polygonStart:U,polygonEnd:H};function $(Y,q){r(Y,q)&&d.point(Y,q)}function G(){for(var Y=0,q=0,ne=k.length;q<ne;++q)for(var J=k[q],ge=1,ie=J.length,le=J[0],pe,ye,be=le[0],re=le[1];ge<ie;++ge)pe=be,ye=re,le=J[ge],be=le[0],re=le[1],ye<=i?re>i&&(be-pe)*(i-ye)>(re-ye)*(n-pe)&&++Y:re<=i&&(be-pe)*(i-ye)<(re-ye)*(n-pe)&&--Y;return Y}function U(){d=m,v=[],k=[],F=!0}function H(){var Y=G(),q=F&&Y,ne=(v=a3(v)).length;(q||ne)&&(h.polygonStart(),q&&(h.lineStart(),s(null,null,1,h),h.lineEnd()),ne&&s3(v,a,Y,s,h),h.polygonEnd()),d=h,v=k=w=null}function j(){V.point=W,k&&k.push(w=[]),P=!0,O=!1,C=D=NaN}function Q(){v&&(W(E,I),M&&O&&m.rejoin(),v.push(m.result())),V.point=$,O&&d.lineEnd()}function W(Y,q){var ne=r(Y,q);if(k&&w.push([Y,q]),P)E=Y,I=q,M=ne,P=!1,ne&&(d.lineStart(),d.point(Y,q));else if(ne&&O)d.point(Y,q);else{var J=[C=Math.max(Nu,Math.min(Tl,C)),D=Math.max(Nu,Math.min(Tl,D))],ge=[Y=Math.max(Nu,Math.min(Tl,Y)),q=Math.max(Nu,Math.min(Tl,q))];O7(J,ge,n,e,t,i)?(O||(d.lineStart(),d.point(J[0],J[1])),d.point(ge[0],ge[1]),ne||d.lineEnd(),F=!1):ne&&(d.lineStart(),d.point(Y,q),F=!1)}C=Y,D=q,O=ne}return V}}var Sh=Do();function $7(n,e){var t=e[0],i=e[1],r=[Ii(t),-Si(t),0],s=0,o=0;Sh.reset();for(var a=0,l=n.length;a<l;++a)if(d=(h=n[a]).length)for(var h,d,m=h[d-1],v=m[0],k=m[1]/2+bd,w=Ii(k),E=Si(k),I=0;I<d;++I,v=C,w=O,E=P,m=M){var M=h[I],C=M[0],D=M[1]/2+bd,O=Ii(D),P=Si(D),F=C-v,V=F>=0?1:-1,$=V*F,G=$>ti,U=w*O;if(Sh.add(Ba(U*V*Ii($),E*P+U*Si($))),s+=G?F+V*Bs:F,G^v>=t^C>=t){var H=Ac($a(m),$a(M));df(H);var j=Ac(r,H);df(j);var Q=(G^F>=0?-1:1)*Xo(j[2]);(i>Q||i===Q&&(H[0]||H[1]))&&(o+=G^F>=0?1:-1)}}return(s<-di||s<di&&Sh<-di)^o&1}Do();function Cd(n){return n}Do();Do();var Va=1/0,Rc=Va,Zl=-Va,Oc=Zl,Pd={point:V7,lineStart:Ml,lineEnd:Ml,polygonStart:Ml,polygonEnd:Ml,result:function(){var n=[[Va,Rc],[Zl,Oc]];return Zl=Oc=-(Rc=Va=1/0),n}};function V7(n,e){n<Va&&(Va=n),n>Zl&&(Zl=n),e<Rc&&(Rc=e),e>Oc&&(Oc=e)}Do();function l3(n,e,t,i){return function(r,s){var o=e(s),a=r.invert(i[0],i[1]),l=r3(),h=e(l),d=!1,m,v,k,w={point:E,lineStart:M,lineEnd:C,polygonStart:function(){w.point=D,w.lineStart=O,w.lineEnd=P,v=[],m=[]},polygonEnd:function(){w.point=E,w.lineStart=M,w.lineEnd=C,v=a3(v);var F=$7(m,a);v.length?(d||(s.polygonStart(),d=!0),s3(v,G7,F,t,s)):F&&(d||(s.polygonStart(),d=!0),s.lineStart(),t(null,null,1,s),s.lineEnd()),d&&(s.polygonEnd(),d=!1),v=m=null},sphere:function(){s.polygonStart(),s.lineStart(),t(null,null,1,s),s.lineEnd(),s.polygonEnd()}};function E(F,V){var $=r(F,V);n(F=$[0],V=$[1])&&s.point(F,V)}function I(F,V){var $=r(F,V);o.point($[0],$[1])}function M(){w.point=I,o.lineStart()}function C(){w.point=E,o.lineEnd()}function D(F,V){k.push([F,V]);var $=r(F,V);h.point($[0],$[1])}function O(){h.lineStart(),k=[]}function P(){D(k[0][0],k[0][1]),h.lineEnd();var F=h.clean(),V=l.result(),$,G=V.length,U,H,j;if(k.pop(),m.push(k),k=null,!!G){if(F&1){if(H=V[0],(U=H.length-1)>0){for(d||(s.polygonStart(),d=!0),s.lineStart(),$=0;$<U;++$)s.point((j=H[$])[0],j[1]);s.lineEnd()}return}G>1&&F&2&&V.push(V.pop().concat(V.shift())),v.push(V.filter(z7))}}return w}}function z7(n){return n.length>1}function G7(n,e){return((n=n.x)[0]<0?n[1]-Ns-di:Ns-n[1])-((e=e.x)[0]<0?e[1]-Ns-di:Ns-e[1])}const Nd=l3(function(){return!0},H7,q7,[-ti,-Ns]);function H7(n){var e=NaN,t=NaN,i=NaN,r;return{lineStart:function(){n.lineStart(),r=1},point:function(s,o){var a=s>0?ti:-ti,l=Zi(s-e);Zi(l-ti)<di?(n.point(e,t=(t+o)/2>0?Ns:-Ns),n.point(i,t),n.lineEnd(),n.lineStart(),n.point(a,t),n.point(s,t),r=0):i!==a&&l>=ti&&(Zi(e-i)<di&&(e-=i*di),Zi(s-a)<di&&(s-=a*di),t=U7(e,t,s,o),n.point(i,t),n.lineEnd(),n.lineStart(),n.point(a,t),r=0),n.point(e=s,t=o),i=a},lineEnd:function(){n.lineEnd(),e=t=NaN},clean:function(){return 2-r}}}function U7(n,e,t,i){var r,s,o=Ii(n-t);return Zi(o)>di?N7((Ii(e)*(s=Si(i))*Ii(t)-Ii(i)*(r=Si(e))*Ii(n))/(r*s*o)):(e+i)/2}function q7(n,e,t,i){var r;if(n==null)r=t*Ns,i.point(-ti,r),i.point(0,r),i.point(ti,r),i.point(ti,0),i.point(ti,-r),i.point(0,-r),i.point(-ti,-r),i.point(-ti,0),i.point(-ti,r);else if(Zi(n[0]-e[0])>di){var s=n[0]<e[0]?ti:-ti;r=t*s/2,i.point(-s,r),i.point(0,r),i.point(s,r)}else i.point(e[0],e[1])}function Z7(n,e){var t=Si(n),i=t>0,r=Zi(t)>di;function s(d,m,v,k){R7(k,n,e,v,d,m)}function o(d,m){return Si(d)*Si(m)>t}function a(d){var m,v,k,w,E;return{lineStart:function(){w=k=!1,E=1},point:function(I,M){var C=[I,M],D,O=o(I,M),P=i?O?0:h(I,M):O?h(I+(I<0?ti:-ti),M):0;if(!m&&(w=k=O)&&d.lineStart(),O!==k&&(D=l(m,C),(!D||uc(m,D)||uc(C,D))&&(C[0]+=di,C[1]+=di,O=o(C[0],C[1]))),O!==k)E=0,O?(d.lineStart(),D=l(C,m),d.point(D[0],D[1])):(D=l(m,C),d.point(D[0],D[1]),d.lineEnd()),m=D;else if(r&&m&&i^O){var F;!(P&v)&&(F=l(C,m,!0))&&(E=0,i?(d.lineStart(),d.point(F[0][0],F[0][1]),d.point(F[1][0],F[1][1]),d.lineEnd()):(d.point(F[1][0],F[1][1]),d.lineEnd(),d.lineStart(),d.point(F[0][0],F[0][1])))}O&&(!m||!uc(m,C))&&d.point(C[0],C[1]),m=C,k=O,v=P},lineEnd:function(){k&&d.lineEnd(),m=null},clean:function(){return E|(w&&k)<<1}}}function l(d,m,v){var k=$a(d),w=$a(m),E=[1,0,0],I=Ac(k,w),M=Lu(I,I),C=I[0],D=M-C*C;if(!D)return!v&&d;var O=t*M/D,P=-t*C/D,F=Ac(E,I),V=Cu(E,O),$=Cu(I,P);Eh(V,$);var G=F,U=Lu(V,G),H=Lu(G,G),j=U*U-H*(Lu(V,V)-1);if(!(j<0)){var Q=ja(j),W=Cu(G,(-U-Q)/H);if(Eh(W,V),W=ff(W),!v)return W;var Y=d[0],q=m[0],ne=d[1],J=m[1],ge;q<Y&&(ge=Y,Y=q,q=ge);var ie=q-Y,le=Zi(ie-ti)<di,pe=le||ie<di;if(!le&&J<ne&&(ge=ne,ne=J,J=ge),pe?le?ne+J>0^W[1]<(Zi(W[0]-Y)<di?ne:J):ne<=W[1]&&W[1]<=J:ie>ti^(Y<=W[0]&&W[0]<=q)){var ye=Cu(G,(-U+Q)/H);return Eh(ye,V),[W,ff(ye)]}}}function h(d,m){var v=i?n:ti-n,k=0;return d<-v?k|=1:d>v&&(k|=2),m<-v?k|=4:m>v&&(k|=8),k}return l3(o,a,s,i?[0,-n]:[-ti,n-ti])}function u3(n){return function(e){var t=new mf;for(var i in n)t[i]=n[i];return t.stream=e,t}}function mf(){}mf.prototype={constructor:mf,point:function(n,e){this.stream.point(n,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function c3(n,e,t){var i=e[1][0]-e[0][0],r=e[1][1]-e[0][1],s=n.clipExtent&&n.clipExtent();n.scale(150).translate([0,0]),s!=null&&n.clipExtent(null),D7(t,n.stream(Pd));var o=Pd.result(),a=Math.min(i/(o[1][0]-o[0][0]),r/(o[1][1]-o[0][1])),l=+e[0][0]+(i-a*(o[1][0]+o[0][0]))/2,h=+e[0][1]+(r-a*(o[1][1]+o[0][1]))/2;return s!=null&&n.clipExtent(s),n.scale(a*150).translate([l,h])}function Y7(n,e,t){return c3(n,[[0,0],e],t)}var Dd=16,j7=Si(30*is);function Ad(n,e){return+e?X7(n,e):W7(n)}function W7(n){return u3({point:function(e,t){e=n(e,t),this.stream.point(e[0],e[1])}})}function X7(n,e){function t(i,r,s,o,a,l,h,d,m,v,k,w,E,I){var M=h-i,C=d-r,D=M*M+C*C;if(D>4*e&&E--){var O=o+v,P=a+k,F=l+w,V=ja(O*O+P*P+F*F),$=Xo(F/=V),G=Zi(Zi(F)-1)<di||Zi(s-m)<di?(s+m)/2:Ba(P,O),U=n(G,$),H=U[0],j=U[1],Q=H-i,W=j-r,Y=C*Q-M*W;(Y*Y/D>e||Zi((M*Q+C*W)/D-.5)>.3||o*v+a*k+l*w<j7)&&(t(i,r,s,o,a,l,H,j,G,O/=V,P/=V,F,E,I),I.point(H,j),t(H,j,G,O,P,F,h,d,m,v,k,w,E,I))}}return function(i){var r,s,o,a,l,h,d,m,v,k,w,E,I={point:M,lineStart:C,lineEnd:O,polygonStart:function(){i.polygonStart(),I.lineStart=P},polygonEnd:function(){i.polygonEnd(),I.lineStart=C}};function M($,G){$=n($,G),i.point($[0],$[1])}function C(){m=NaN,I.point=D,i.lineStart()}function D($,G){var U=$a([$,G]),H=n($,G);t(m,v,d,k,w,E,m=H[0],v=H[1],d=$,k=U[0],w=U[1],E=U[2],Dd,i),i.point(m,v)}function O(){I.point=M,i.lineEnd()}function P(){C(),I.point=F,I.lineEnd=V}function F($,G){D(r=$,G),s=m,o=v,a=k,l=w,h=E,I.point=D}function V(){t(m,v,d,k,w,E,s,o,r,a,l,h,Dd,i),I.lineEnd=O,O()}return I}}var K7=u3({point:function(n,e){this.stream.point(n*is,e*is)}});function J7(n){return Q7(function(){return n})()}function Q7(n){var e,t=150,i=480,r=250,s,o,a=0,l=0,h=0,d=0,m=0,v,k,w=null,E=Nd,I=null,M,C,D,O=Cd,P=.5,F=Ad(H,P),V,$;function G(W){return W=k(W[0]*is,W[1]*is),[W[0]*t+s,o-W[1]*t]}function U(W){return W=k.invert((W[0]-s)/t,(o-W[1])/t),W&&[W[0]*vo,W[1]*vo]}function H(W,Y){return W=e(W,Y),[W[0]*t+s,o-W[1]*t]}G.stream=function(W){return V&&$===W?V:V=K7(E(v,F(O($=W))))},G.clipAngle=function(W){return arguments.length?(E=+W?Z7(w=W*is,6*is):(w=null,Nd),Q()):w*vo},G.clipExtent=function(W){return arguments.length?(O=W==null?(I=M=C=D=null,Cd):B7(I=+W[0][0],M=+W[0][1],C=+W[1][0],D=+W[1][1]),Q()):I==null?null:[[I,M],[C,D]]},G.scale=function(W){return arguments.length?(t=+W,j()):t},G.translate=function(W){return arguments.length?(i=+W[0],r=+W[1],j()):[i,r]},G.center=function(W){return arguments.length?(a=W[0]%360*is,l=W[1]%360*is,j()):[a*vo,l*vo]},G.rotate=function(W){return arguments.length?(h=W[0]%360*is,d=W[1]%360*is,m=W.length>2?W[2]%360*is:0,j()):[h*vo,d*vo,m*vo]},G.precision=function(W){return arguments.length?(F=Ad(H,P=W*W),Q()):ja(P)},G.fitExtent=function(W,Y){return c3(G,W,Y)},G.fitSize=function(W,Y){return Y7(G,W,Y)};function j(){k=i3(v=A7(h,d,m),e);var W=e(a,l);return s=i-W[0]*t,o=r+W[1]*t,Q()}function Q(){return V=$=null,G}return function(){return e=n.apply(this,arguments),G.invert=e.invert&&U,j()}}function h3(n){return function(e,t){var i=Si(e),r=Si(t),s=n(i*r);return[s*r*Ii(e),s*Ii(t)]}}function f3(n){return function(e,t){var i=ja(e*e+t*t),r=n(i),s=Ii(r),o=Si(r);return[Ba(e*s,i*o),Xo(i&&t*s/i)]}}var eb=h3(function(n){return ja(2/(1+n))});eb.invert=f3(function(n){return 2*Xo(n/2)});var d3=h3(function(n){return(n=n3(n))&&n/Ii(n)});d3.invert=f3(function(n){return n});function tb(){return J7(d3).scale(79.4188).clipAngle(180-.001)}function Rd(n,e){return[n,e]}Rd.invert=Rd;var{BufferOp:nb,GeoJSONReader:ib,GeoJSONWriter:rb}=P7;function sb(n,e,t){t=t||{};var i=t.units||"kilometers",r=t.steps||8;if(!n)throw new Error("geojson is required");if(typeof t!="object")throw new Error("options must be an object");if(typeof r!="number")throw new Error("steps must be an number");if(e===void 0)throw new Error("radius is required");if(r<=0)throw new Error("steps must be greater than 0");var s=[];switch(n.type){case"GeometryCollection":return Jf(n,function(o){var a=cc(o,e,i,r);a&&s.push(a)}),uf(s);case"FeatureCollection":return sd(n,function(o){var a=cc(o,e,i,r);a&&sd(a,function(l){l&&s.push(l)})}),uf(s)}return cc(n,e,i,r)}function cc(n,e,t,i){var r=n.properties||{},s=n.type==="Feature"?n.geometry:n;if(s.type==="GeometryCollection"){var o=[];return Jf(n,function(E){var I=cc(E,e,t,i);I&&o.push(I)}),uf(o)}var a=ob(s),l={type:s.type,coordinates:m3(s.coordinates,a)},h=new ib,d=h.read(l),m=Xf(Kf(e,t),"meters"),v=nb.bufferOp(d,m,i),k=new rb;if(v=k.write(v),!g3(v.coordinates)){var w={type:v.type,coordinates:_3(v.coordinates,a)};return jo(w,r)}}function g3(n){return Array.isArray(n[0])?g3(n[0]):isNaN(n[0])}function m3(n,e){return typeof n[0]!="object"?e(n):n.map(function(t){return m3(t,e)})}function _3(n,e){return typeof n[0]!="object"?e.invert(n):n.map(function(t){return _3(t,e)})}function ob(n){var e=L7(n).geometry.coordinates,t=[-e[0],-e[1]];return tb().rotate(t).scale(_r)}function Od(n,e={}){let t=0,i=0,r=0;return Ko(n,function(s){t+=s[0],i+=s[1],r++},!0),Qn([t/r,i/r],e.properties)}var t0={exports:{}};const ab=zf(y7);let lb=class{constructor(e=[],t=ub){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let i=(this.length>>1)-1;i>=0;i--)this._down(i)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:i}=this,r=t[e];for(;e>0;){const s=e-1>>1,o=t[s];if(i(r,o)>=0)break;t[e]=o,e=s}t[e]=r}_down(e){const{data:t,compare:i}=this,r=this.length>>1,s=t[e];for(;e<r;){let o=(e<<1)+1,a=t[o];const l=o+1;if(l<this.length&&i(t[l],a)<0&&(o=l,a=t[l]),i(a,s)>=0)break;t[e]=a,e=o}t[e]=s}};function ub(n,e){return n<e?-1:n>e?1:0}const cb=Object.freeze(Object.defineProperty({__proto__:null,default:lb},Symbol.toStringTag,{value:"Module"})),hb=zf(cb);var th={exports:{}},fb=function(e,t,i,r){var s=e[0],o=e[1],a=!1;i===void 0&&(i=0),r===void 0&&(r=t.length);for(var l=(r-i)/2,h=0,d=l-1;h<l;d=h++){var m=t[i+h*2+0],v=t[i+h*2+1],k=t[i+d*2+0],w=t[i+d*2+1],E=v>o!=w>o&&s<(k-m)*(o-v)/(w-v)+m;E&&(a=!a)}return a},db=function(e,t,i,r){var s=e[0],o=e[1],a=!1;i===void 0&&(i=0),r===void 0&&(r=t.length);for(var l=r-i,h=0,d=l-1;h<l;d=h++){var m=t[h+i][0],v=t[h+i][1],k=t[d+i][0],w=t[d+i][1],E=v>o!=w>o&&s<(k-m)*(o-v)/(w-v)+m;E&&(a=!a)}return a},p3=fb,v3=db;th.exports=function(e,t,i,r){return t.length>0&&Array.isArray(t[0])?v3(e,t,i,r):p3(e,t,i,r)};th.exports.nested=v3;th.exports.flat=p3;var gb=th.exports,_f={exports:{}};(function(n,e){(function(t,i){i(e)})($f,function(t){const r=33306690738754706e-32;function s(E,I,M,C,D){let O,P,F,V,$=I[0],G=C[0],U=0,H=0;G>$==G>-$?(O=$,$=I[++U]):(O=G,G=C[++H]);let j=0;if(U<E&&H<M)for(G>$==G>-$?(F=O-((P=$+O)-$),$=I[++U]):(F=O-((P=G+O)-G),G=C[++H]),O=P,F!==0&&(D[j++]=F);U<E&&H<M;)G>$==G>-$?(F=O-((P=O+$)-(V=P-O))+($-V),$=I[++U]):(F=O-((P=O+G)-(V=P-O))+(G-V),G=C[++H]),O=P,F!==0&&(D[j++]=F);for(;U<E;)F=O-((P=O+$)-(V=P-O))+($-V),$=I[++U],O=P,F!==0&&(D[j++]=F);for(;H<M;)F=O-((P=O+G)-(V=P-O))+(G-V),G=C[++H],O=P,F!==0&&(D[j++]=F);return O===0&&j!==0||(D[j++]=O),j}function o(E){return new Float64Array(E)}const a=33306690738754716e-32,l=22204460492503146e-32,h=11093356479670487e-47,d=o(4),m=o(8),v=o(12),k=o(16),w=o(4);t.orient2d=function(E,I,M,C,D,O){const P=(I-O)*(M-D),F=(E-D)*(C-O),V=P-F;if(P===0||F===0||P>0!=F>0)return V;const $=Math.abs(P+F);return Math.abs(V)>=a*$?V:-function(G,U,H,j,Q,W,Y){let q,ne,J,ge,ie,le,pe,ye,be,re,me,ke,X,ue,_e,oe,ae,Se;const Me=G-Q,we=H-Q,Te=U-W,Ae=j-W;ie=(_e=(ye=Me-(pe=(le=134217729*Me)-(le-Me)))*(re=Ae-(be=(le=134217729*Ae)-(le-Ae)))-((ue=Me*Ae)-pe*be-ye*be-pe*re))-(me=_e-(ae=(ye=Te-(pe=(le=134217729*Te)-(le-Te)))*(re=we-(be=(le=134217729*we)-(le-we)))-((oe=Te*we)-pe*be-ye*be-pe*re))),d[0]=_e-(me+ie)+(ie-ae),ie=(X=ue-((ke=ue+me)-(ie=ke-ue))+(me-ie))-(me=X-oe),d[1]=X-(me+ie)+(ie-oe),ie=(Se=ke+me)-ke,d[2]=ke-(Se-ie)+(me-ie),d[3]=Se;let Ne=function(je,Ve){let Ue=Ve[0];for(let Ke=1;Ke<je;Ke++)Ue+=Ve[Ke];return Ue}(4,d),De=l*Y;if(Ne>=De||-Ne>=De||(q=G-(Me+(ie=G-Me))+(ie-Q),J=H-(we+(ie=H-we))+(ie-Q),ne=U-(Te+(ie=U-Te))+(ie-W),ge=j-(Ae+(ie=j-Ae))+(ie-W),q===0&&ne===0&&J===0&&ge===0)||(De=h*Y+r*Math.abs(Ne),(Ne+=Me*ge+Ae*q-(Te*J+we*ne))>=De||-Ne>=De))return Ne;ie=(_e=(ye=q-(pe=(le=134217729*q)-(le-q)))*(re=Ae-(be=(le=134217729*Ae)-(le-Ae)))-((ue=q*Ae)-pe*be-ye*be-pe*re))-(me=_e-(ae=(ye=ne-(pe=(le=134217729*ne)-(le-ne)))*(re=we-(be=(le=134217729*we)-(le-we)))-((oe=ne*we)-pe*be-ye*be-pe*re))),w[0]=_e-(me+ie)+(ie-ae),ie=(X=ue-((ke=ue+me)-(ie=ke-ue))+(me-ie))-(me=X-oe),w[1]=X-(me+ie)+(ie-oe),ie=(Se=ke+me)-ke,w[2]=ke-(Se-ie)+(me-ie),w[3]=Se;const _t=s(4,d,4,w,m);ie=(_e=(ye=Me-(pe=(le=134217729*Me)-(le-Me)))*(re=ge-(be=(le=134217729*ge)-(le-ge)))-((ue=Me*ge)-pe*be-ye*be-pe*re))-(me=_e-(ae=(ye=Te-(pe=(le=134217729*Te)-(le-Te)))*(re=J-(be=(le=134217729*J)-(le-J)))-((oe=Te*J)-pe*be-ye*be-pe*re))),w[0]=_e-(me+ie)+(ie-ae),ie=(X=ue-((ke=ue+me)-(ie=ke-ue))+(me-ie))-(me=X-oe),w[1]=X-(me+ie)+(ie-oe),ie=(Se=ke+me)-ke,w[2]=ke-(Se-ie)+(me-ie),w[3]=Se;const Fe=s(_t,m,4,w,v);ie=(_e=(ye=q-(pe=(le=134217729*q)-(le-q)))*(re=ge-(be=(le=134217729*ge)-(le-ge)))-((ue=q*ge)-pe*be-ye*be-pe*re))-(me=_e-(ae=(ye=ne-(pe=(le=134217729*ne)-(le-ne)))*(re=J-(be=(le=134217729*J)-(le-J)))-((oe=ne*J)-pe*be-ye*be-pe*re))),w[0]=_e-(me+ie)+(ie-ae),ie=(X=ue-((ke=ue+me)-(ie=ke-ue))+(me-ie))-(me=X-oe),w[1]=X-(me+ie)+(ie-oe),ie=(Se=ke+me)-ke,w[2]=ke-(Se-ie)+(me-ie),w[3]=Se;const Pe=s(Fe,v,4,w,k);return k[Pe-1]}(E,I,M,C,D,O,$)},t.orient2dfast=function(E,I,M,C,D,O){return(I-O)*(M-D)-(E-D)*(C-O)},Object.defineProperty(t,"__esModule",{value:!0})})})(_f,_f.exports);var mb=_f.exports,xd=ab,hc=hb,_b=gb,pb=mb.orient2d;hc.default&&(hc=hc.default);t0.exports=y3;t0.exports.default=y3;function y3(n,e,t){e=Math.max(0,e===void 0?2:e),t=t||0;var i=kb(n),r=new xd(16);r.toBBox=function(C){return{minX:C[0],minY:C[1],maxX:C[0],maxY:C[1]}},r.compareMinX=function(C,D){return C[0]-D[0]},r.compareMinY=function(C,D){return C[1]-D[1]},r.load(n);for(var s=[],o=0,a;o<i.length;o++){var l=i[o];r.remove(l),a=$d(l,a),s.push(a)}var h=new xd(16);for(o=0;o<s.length;o++)h.insert(Ih(s[o]));for(var d=e*e,m=t*t;s.length;){var v=s.shift(),k=v.p,w=v.next.p,E=Mh(k,w);if(!(E<m)){var I=E/d;l=vb(r,v.prev.p,k,w,v.next.next.p,I,h),l&&Math.min(Mh(l,k),Mh(l,w))<=I&&(s.push(v),s.push($d(l,v)),r.remove(l),h.remove(v),h.insert(Ih(v)),h.insert(Ih(v.next)))}}v=a;var M=[];do M.push(v.p),v=v.next;while(v!==a);return M.push(v.p),M}function vb(n,e,t,i,r,s,o){for(var a=new hc([],yb),l=n.data;l;){for(var h=0;h<l.children.length;h++){var d=l.children[h],m=l.leaf?Th(d,t,i):bb(t,i,d);m>s||a.push({node:d,dist:m})}for(;a.length&&!a.peek().node.children;){var v=a.pop(),k=v.node,w=Th(k,e,t),E=Th(k,i,r);if(v.dist<w&&v.dist<E&&Bd(t,k,o)&&Bd(i,k,o))return k}l=a.pop(),l&&(l=l.node)}return null}function yb(n,e){return n.dist-e.dist}function bb(n,e,t){if(Fd(n,t)||Fd(e,t))return 0;var i=Du(n[0],n[1],e[0],e[1],t.minX,t.minY,t.maxX,t.minY);if(i===0)return 0;var r=Du(n[0],n[1],e[0],e[1],t.minX,t.minY,t.minX,t.maxY);if(r===0)return 0;var s=Du(n[0],n[1],e[0],e[1],t.maxX,t.minY,t.maxX,t.maxY);if(s===0)return 0;var o=Du(n[0],n[1],e[0],e[1],t.minX,t.maxY,t.maxX,t.maxY);return o===0?0:Math.min(i,r,s,o)}function Fd(n,e){return n[0]>=e.minX&&n[0]<=e.maxX&&n[1]>=e.minY&&n[1]<=e.maxY}function Bd(n,e,t){for(var i=Math.min(n[0],e[0]),r=Math.min(n[1],e[1]),s=Math.max(n[0],e[0]),o=Math.max(n[1],e[1]),a=t.search({minX:i,minY:r,maxX:s,maxY:o}),l=0;l<a.length;l++)if(wb(a[l].p,a[l].next.p,n,e))return!1;return!0}function ba(n,e,t){return pb(n[0],n[1],e[0],e[1],t[0],t[1])}function wb(n,e,t,i){return n!==i&&e!==t&&ba(n,e,t)>0!=ba(n,e,i)>0&&ba(t,i,n)>0!=ba(t,i,e)>0}function Ih(n){var e=n.p,t=n.next.p;return n.minX=Math.min(e[0],t[0]),n.minY=Math.min(e[1],t[1]),n.maxX=Math.max(e[0],t[0]),n.maxY=Math.max(e[1],t[1]),n}function kb(n){for(var e=n[0],t=n[0],i=n[0],r=n[0],s=0;s<n.length;s++){var o=n[s];o[0]<e[0]&&(e=o),o[0]>i[0]&&(i=o),o[1]<t[1]&&(t=o),o[1]>r[1]&&(r=o)}var a=[e,t,i,r],l=a.slice();for(s=0;s<n.length;s++)_b(n[s],a)||l.push(n[s]);return Sb(l)}function $d(n,e){var t={p:n,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(t.next=e.next,t.prev=e,e.next.prev=t,e.next=t):(t.prev=t,t.next=t),t}function Mh(n,e){var t=n[0]-e[0],i=n[1]-e[1];return t*t+i*i}function Th(n,e,t){var i=e[0],r=e[1],s=t[0]-i,o=t[1]-r;if(s!==0||o!==0){var a=((n[0]-i)*s+(n[1]-r)*o)/(s*s+o*o);a>1?(i=t[0],r=t[1]):a>0&&(i+=s*a,r+=o*a)}return s=n[0]-i,o=n[1]-r,s*s+o*o}function Du(n,e,t,i,r,s,o,a){var l=t-n,h=i-e,d=o-r,m=a-s,v=n-r,k=e-s,w=l*l+h*h,E=l*d+h*m,I=d*d+m*m,M=l*v+h*k,C=d*v+m*k,D=w*I-E*E,O,P,F,V,$=D,G=D;D===0?(P=0,$=1,V=C,G=I):(P=E*C-I*M,V=w*C-E*M,P<0?(P=0,V=C,G=I):P>$&&(P=$,V=C+E,G=I)),V<0?(V=0,-M<0?P=0:-M>w?P=$:(P=-M,$=w)):V>G&&(V=G,-M+E<0?P=0:-M+E>w?P=$:(P=-M+E,$=w)),O=P===0?0:P/$,F=V===0?0:V/G;var U=(1-O)*n+O*t,H=(1-O)*e+O*i,j=(1-F)*r+F*o,Q=(1-F)*s+F*a,W=j-U,Y=Q-H;return W*W+Y*Y}function Eb(n,e){return n[0]===e[0]?n[1]-e[1]:n[0]-e[0]}function Sb(n){n.sort(Eb);for(var e=[],t=0;t<n.length;t++){for(;e.length>=2&&ba(e[e.length-2],e[e.length-1],n[t])<=0;)e.pop();e.push(n[t])}for(var i=[],r=n.length-1;r>=0;r--){for(;i.length>=2&&ba(i[i.length-2],i[i.length-1],n[r])<=0;)i.pop();i.push(n[r])}return i.pop(),e.pop(),e.concat(i)}var Ib=t0.exports;const Mb=Vf(Ib);function Tb(n,e={}){e.concavity=e.concavity||1/0;const t=[];if(Ko(n,r=>{t.push([r[0],r[1]])}),!t.length)return null;const i=Mb(t,e.concavity);return i.length>3?No([i]):null}function b3(n,e={}){switch(Xv(n)){case"Point":return Qn(sr(n),e.properties);case"Polygon":var t=[];Ko(n,function(O){t.push(O)});var i=Od(n,{properties:e.properties}),r=i.geometry.coordinates,s=0,o=0,a=0,l,h,d,m,v,k,w,E,I=t.map(function(O){return[O[0]-r[0],O[1]-r[1]]});for(l=0;l<t.length-1;l++)h=I[l],m=h[0],k=h[1],d=I[l+1],v=d[0],w=d[1],E=m*w-v*k,a+=E,s+=(m+v)*E,o+=(k+w)*E;if(a===0)return i;var M=a*.5,C=1/(6*M);return Qn([r[0]+C*s,r[1]+C*o],e.properties);default:var D=Tb(n);return D?b3(D,{properties:e.properties}):Od(n,{properties:e.properties})}}function Lb(n){if(!n)throw new Error("geojson is required");switch(n.type){case"Feature":return w3(n);case"FeatureCollection":return Cb(n);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return n0(n);default:throw new Error("unknown GeoJSON type")}}function w3(n){const e={type:"Feature"};return Object.keys(n).forEach(t=>{switch(t){case"type":case"properties":case"geometry":return;default:e[t]=n[t]}}),e.properties=k3(n.properties),n.geometry==null?e.geometry=null:e.geometry=n0(n.geometry),e}function k3(n){const e={};return n&&Object.keys(n).forEach(t=>{const i=n[t];typeof i=="object"?i===null?e[t]=null:Array.isArray(i)?e[t]=i.map(r=>r):e[t]=k3(i):e[t]=i}),e}function Cb(n){const e={type:"FeatureCollection"};return Object.keys(n).forEach(t=>{switch(t){case"type":case"features":return;default:e[t]=n[t]}}),e.features=n.features.map(t=>w3(t)),e}function n0(n){const e={type:n.type};return n.bbox&&(e.bbox=n.bbox),n.type==="GeometryCollection"?(e.geometries=n.geometries.map(t=>n0(t)),e):(e.coordinates=E3(n.coordinates),e)}function E3(n){const e=n;return typeof e[0]!="object"?e.slice():e.map(t=>E3(t))}function Pb(n,e,t,i={}){const r=e<0;let s=Zy(Math.abs(e),i.units,"meters");r&&(s=-Math.abs(s));const o=sr(n),a=Nb(o,s,t);return a[0]+=a[0]-o[0]>180?-360:o[0]-a[0]>180?360:0,Qn(a,i.properties)}function Nb(n,e,t,i){i=i===void 0?_r:Number(i);const r=e/i,s=n[0]*Math.PI/180,o=qi(n[1]),a=qi(t),l=r*Math.cos(a);let h=o+l;Math.abs(h)>Math.PI/2&&(h=h>0?Math.PI-h:-Math.PI-h);const d=Math.log(Math.tan(h/2+Math.PI/4)/Math.tan(o/2+Math.PI/4)),m=Math.abs(d)>1e-11?l/d:Math.cos(o),v=r*Math.sin(a)/m;return[((s+v)*180/Math.PI+540)%360-180,h*180/Math.PI]}function Db(n){let e,t;const i={type:"FeatureCollection",features:[]};if(n.type==="Feature"?t=n.geometry:t=n,t.type==="LineString")e=[t.coordinates];else if(t.type==="MultiLineString")e=t.coordinates;else if(t.type==="MultiPolygon")e=[].concat(...t.coordinates);else if(t.type==="Polygon")e=t.coordinates;else throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");return e.forEach(r=>{e.forEach(s=>{for(let o=0;o<r.length-1;o++)for(let a=o;a<s.length-1;a++){if(r===s&&(Math.abs(o-a)===1||o===0&&a===r.length-2&&r[o][0]===r[r.length-1][0]&&r[o][1]===r[r.length-1][1]))continue;const l=Ab(r[o][0],r[o][1],r[o+1][0],r[o+1][1],s[a][0],s[a][1],s[a+1][0],s[a+1][1]);l&&i.features.push(Qn([l[0],l[1]]))}})}),i}function Ab(n,e,t,i,r,s,o,a){let l,h,d,m,v;const k={x:null,y:null,onLine1:!1,onLine2:!1};return l=(a-s)*(t-n)-(o-r)*(i-e),l===0?k.x!==null&&k.y!==null?k:!1:(h=e-s,d=n-r,m=(o-r)*h-(a-s)*d,v=(t-n)*h-(i-e)*d,h=m/l,d=v/l,k.x=n+h*(t-n),k.y=e+h*(i-e),h>=0&&h<=1&&(k.onLine1=!0),d>=0&&d<=1&&(k.onLine2=!0),k.onLine1&&k.onLine2?[k.x,k.y]:!1)}function Au(n,e={}){return Ky(n,(t,i)=>{const r=i.geometry.coordinates;return t+rr(r[0],r[1],e)},0)}function Rb(n,e){const t=rr(n,e),i=Wo(n,e);return ql(n,t/2,i)}function Ob(n,e,t,i){if(i=i||{},!Wv(i))throw new Error("options is invalid");var r=i.units,s=i.zTranslation,o=i.mutate;if(!n)throw new Error("geojson is required");if(e==null||isNaN(e))throw new Error("distance is required");if(s&&typeof s!="number"&&isNaN(s))throw new Error("zTranslation is not a number");if(s=s!==void 0?s:0,e===0&&s===0)return n;if(t==null||isNaN(t))throw new Error("direction is required");return e<0&&(e=-e,t=t+180),(o===!1||o===void 0)&&(n=Lb(n)),Ko(n,function(a){var l=Ma(Pb(a,e,t,{units:r}));a[0]=l[0],a[1]=l[1],s&&a.length===3&&(a[2]+=s)}),n}class xb{constructor(e=[],t=(i,r)=>i<r?-1:i>r?1:0){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let i=(this.length>>1)-1;i>=0;i--)this._down(i)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(this.length===0)return;const e=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:i}=this,r=t[e];for(;e>0;){const s=e-1>>1,o=t[s];if(i(r,o)>=0)break;t[e]=o,e=s}t[e]=r}_down(e){const{data:t,compare:i}=this,r=this.length>>1,s=t[e];for(;e<r;){let o=(e<<1)+1;const a=o+1;if(a<this.length&&i(t[a],t[o])<0&&(o=a),i(t[o],s)>=0)break;t[e]=t[o],e=o}t[e]=s}}function Fb(n,e=1,t=!1){let i=1/0,r=1/0,s=-1/0,o=-1/0;for(const[M,C]of n[0])M<i&&(i=M),C<r&&(r=C),M>s&&(s=M),C>o&&(o=C);const a=s-i,l=o-r,h=Math.max(e,Math.min(a,l));if(h===e){const M=[i,r];return M.distance=0,M}const d=new xb([],(M,C)=>C.max-M.max);let m=$b(n);const v=new xc(i+a/2,r+l/2,0,n);v.d>m.d&&(m=v);let k=2;function w(M,C,D){const O=new xc(M,C,D,n);k++,O.max>m.d+e&&d.push(O),O.d>m.d&&(m=O,t&&console.log(`found best ${Math.round(1e4*O.d)/1e4} after ${k} probes`))}let E=h/2;for(let M=i;M<s;M+=h)for(let C=r;C<o;C+=h)w(M+E,C+E,E);for(;d.length;){const{max:M,x:C,y:D,h:O}=d.pop();if(M-m.d<=e)break;E=O/2,w(C-E,D-E,E),w(C+E,D-E,E),w(C-E,D+E,E),w(C+E,D+E,E)}t&&console.log(`num probes: ${k}
best distance: ${m.d}`);const I=[m.x,m.y];return I.distance=m.d,I}function xc(n,e,t,i){this.x=n,this.y=e,this.h=t,this.d=Bb(n,e,i),this.max=this.d+this.h*Math.SQRT2}function Bb(n,e,t){let i=!1,r=1/0;for(const s of t)for(let o=0,a=s.length,l=a-1;o<a;l=o++){const h=s[o],d=s[l];h[1]>e!=d[1]>e&&n<(d[0]-h[0])*(e-h[1])/(d[1]-h[1])+h[0]&&(i=!i),r=Math.min(r,Vb(n,e,h,d))}return r===0?0:(i?1:-1)*Math.sqrt(r)}function $b(n){let e=0,t=0,i=0;const r=n[0];for(let o=0,a=r.length,l=a-1;o<a;l=o++){const h=r[o],d=r[l],m=h[0]*d[1]-d[0]*h[1];t+=(h[0]+d[0])*m,i+=(h[1]+d[1])*m,e+=m*3}const s=new xc(t/e,i/e,0,n);return e===0||s.d<0?new xc(r[0][0],r[0][1],0,n):s}function Vb(n,e,t,i){let r=t[0],s=t[1],o=i[0]-r,a=i[1]-s;if(o!==0||a!==0){const l=((n-r)*o+(e-s)*a)/(o*o+a*a);l>1?(r=i[0],s=i[1]):l>0&&(r+=o*l,s+=a*l)}return o=n-r,a=e-s,o*o+a*a}const Fc=["civ_icons","mil_icons"],bn=40,fc="/sensor.png",zb="/sensor_online.svg",Gb="/sensor_offline.svg",Hb="/adsb_sensor_online.svg",Ub="/adsb_sensor_offline.svg",S3="/adsb_sensor_default.svg",I3="/passive_radar_sensor_default.svg",qb="/passive_radar_sensor_online.svg",Zb="/passive_radar_sensor_offline.svg",M3="/active_radar_sensor_default.svg",Yb="/active_radar_sensor_online.svg",jb="/active_radar_sensor_offline.svg",Ta=new Ct.Icon({iconUrl:fc,iconSize:[bn,bn],iconAnchor:[bn/2,bn/2]}),Vd=new Ct.Icon({iconUrl:zb,iconSize:[bn,bn],iconAnchor:[bn/2,bn/2]}),zd=new Ct.Icon({iconUrl:Gb,iconSize:[bn,bn],iconAnchor:[bn/2,bn/2]}),Wb=new Ct.Icon({iconUrl:Hb,iconSize:[bn,bn],iconAnchor:[bn/2,bn/2]}),Xb=new Ct.Icon({iconUrl:Ub,iconSize:[bn,bn],iconAnchor:[bn/2,bn/2]}),T3=new Ct.Icon({iconUrl:S3,iconSize:[bn,bn],iconAnchor:[bn/2,bn/2]}),Kb=new Ct.Icon({iconUrl:qb,iconSize:[bn,bn],iconAnchor:[bn/2,bn/2]}),Jb=new Ct.Icon({iconUrl:Zb,iconSize:[bn,bn],iconAnchor:[bn/2,bn/2]}),L3=new Ct.Icon({iconUrl:I3,iconSize:[bn,bn],iconAnchor:[bn/2,bn/2]}),C3=new Ct.Icon({iconUrl:M3,iconSize:[bn,bn],iconAnchor:[bn/2,bn/2]}),Qb=new Ct.Icon({iconUrl:Yb,iconSize:[bn,bn],iconAnchor:[bn/2,bn/2]}),ew=new Ct.Icon({iconUrl:jb,iconSize:[bn,bn],iconAnchor:[bn/2,bn/2]}),Ru=48,tw="/scale.png";new Ct.Icon({iconUrl:tw,iconSize:[Ru,Ru],iconAnchor:[Ru/2,Ru/2]});const Ou=56,nw="/scale_start.png",iw=new Ct.Icon({iconUrl:nw,iconSize:[Ou,Ou],iconAnchor:[Ou/2,Ou/2]}),xu=56,rw="/radius_scale_start.png",P3=new Ct.Icon({iconUrl:rw,iconSize:[xu,xu],iconAnchor:[xu/2,xu/2]});class cl{constructor(e,t){Ge(this,"state");Ge(this,"subscribers",new Set);Ge(this,"map");this.state=e,this.map=t,this.__setAndNotify(e)}__setAndNotify(e){this.state&&this.state.removeFrom(this.map),this.state=e,this.subscribers.forEach(t=>t(this.state)),this.state&&this.state.addTo(this.map)}set(e){Object.is(e,this.state)||this.__setAndNotify(e)}get current(){return this.state}subscribe(e){return this.subscribers.add(e),e(this.state),()=>{this.subscribers.delete(e)}}update(e){this.set(e(this.state))}onUnmount(){this.state&&this.state.removeFrom(this.map)}onDestroy(){this.onUnmount()}}const to=50,La=1e4,Ds=50,xl=5e4,Lh="#1248",Fu="#1246",Gd=.5,Hd="#1244",Ch="#1246",Ud=.5,es="editable-geofence-pane",Bu="editable-geofence-label-pane";function sw(n,e,t){let i,r=$e,s=()=>(r(),r=Dt(l,ke=>t(16,i=ke)),l),o;n.$$.on_destroy.push(()=>r());let{map:a}=e,{geofence:l}=e;s();let{highlightedPointIndex:h}=e;const d=new cl(null,a);if(!a.getPane(es)){a.createPane(es);const ke=a.getPane(es);ke&&(ke.style.zIndex="9000")}if(!a.getPane(Bu)){a.createPane(Bu);const ke=a.getPane(Bu);ke&&(ke.style.zIndex="9000")}const m=new cl(null,a),v=new cl(null,a);function k(ke=18){const X=Ct.DomUtil.create("div","corner-draggable-icon");X.style.position="relative",X.style.width=ke+"px",X.style.height=ke+"px";const ue=document.createElementNS("http://www.w3.org/2000/svg","svg");ue.style.position="absolute",ue.style.top="0px",ue.style.left="0px",ue.setAttribute("width","100%"),ue.setAttribute("height","100%"),ue.style.pointerEvents="none",X.appendChild(ue);const _e=document.createElementNS("http://www.w3.org/2000/svg","circle");_e.setAttribute("cx","50%"),_e.setAttribute("cy","50%"),_e.setAttribute("r","40%"),_e.setAttribute("stroke","#444"),_e.setAttribute("stroke-width","3"),_e.setAttribute("fill","#ccc"),ue.appendChild(_e);const oe=Ct.divIcon({html:X,className:"",iconSize:[ke,ke],iconAnchor:[ke/2,ke/2]}),ae=Ct.marker([0,0],{icon:oe,draggable:!0,pane:es});return ae.setZIndexOffset(2e3),ae._icon_svg=ue,ae._circle_svg=_e,ae.on("dragstart",function(){ue.style.opacity="0.5"}),ae.on("dragend",function(){ue.style.opacity="1"}),ae}function w(){const ke=E.map(X=>X.getLatLng());l.update(X=>({...X,fence:{h:X.fence.h,v:ke}}))}const E=[];function I(ke){var ue,_e;if(ke.fence.h||ke.isShapeLocked){for(;E.length>0;)(ue=E.pop())==null||ue.remove();return}const X=ke.fence.v;for(;E.length<X.length;){const oe=k();oe.setLatLng(X[E.length]),oe.addTo(a),oe.on("drag",w),E.push(oe)}for(;E.length>X.length;)(_e=E.pop())==null||_e.remove();for(let oe=0;oe<X.length;oe++)E[oe].getLatLng(),E[oe].setLatLng(X[oe]),E[oe].off("mouseover"),E[oe].off("mouseout"),E[oe].on("mouseover",()=>h.set(oe)),E[oe].on("mouseout",()=>h.set(null))}let M=null;const C=h.subscribe(ke=>{M!==null&&M<E.length&&(E[M]._circle_svg.style.stroke="#444",E[M]._circle_svg.style.fill="#ccc"),ke!==null&&(E[ke]._circle_svg.style.stroke="#e64",E[ke]._circle_svg.style.fill="#fcc"),M=ke});function D(ke=13){const X=ke*1.5,ue=Ct.DomUtil.create("div","edge-draggable-icon");ue.style.position="relative",ue.style.width=X+"px",ue.style.height=X+"px";const _e=(X-ke)/2,oe=(X-ke)/2;ue.innerHTML=`<svg style="opacity: 1; position: absolute; top: ${_e}px; left: ${oe}px; width: ${ke}px; height: ${ke}px;" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 60" fill="none"><g clip-path="url(#clip0_1006_179)"><circle cx="30" cy="30" r="30" fill="#CBCBCB"/><path fill-rule="evenodd" clip-rule="evenodd" d="M30 60C46.5685 60 60 46.5685 60 30C60 13.4315 46.5685 0 30 0C13.4315 0 0 13.4315 0 30C0 46.5685 13.4315 60 30 60ZM27 16C27 14.3431 28.3431 13 30 13C31.6569 13 33 14.3431 33 16V27H44C45.6569 27 47 28.3431 47 30C47 31.6569 45.6569 33 44 33H33V44C33 45.6569 31.6569 47 30 47C28.3431 47 27 45.6569 27 44V33H16C14.3431 33 13 31.6569 13 30C13 28.3431 14.3431 27 16 27H27V16Z" fill="#444444"/></g><defs><clipPath id="clip0_1006_179"><rect width="60" height="60" fill="white"/></clipPath></defs></svg>`;const ae=Ct.divIcon({html:ue,className:"",iconSize:[X,X],iconAnchor:[X/2,X/2]}),Se=Ct.marker([0,0],{icon:ae,draggable:!0,pane:es});return Se.setZIndexOffset(1e3),Se.on("dragstart",function(){ue.style.opacity="0.5"}),Se.on("dragend",function(){ue.style.opacity="1"}),Se}function O(ke,X,ue){var oe,ae;ke.originalEvent.preventDefault();const _e=X.getLatLng();l.update(Se=>{const Me=Se.fence.v,we=[...Me.slice(0,ue+1),_e,...Me.slice(ue+1)];return{...Se,fence:{h:Se.fence.h,v:we}}}),I(l.current),(oe=X.dragging)==null||oe._draggable.finishDrag(),X.off("mousedown"),X.remove(),(ae=E[ue+1].dragging)==null||ae._draggable._onDown(ke.originalEvent)}const P=[];function F(ke){var X;if(!ke.fence.h&&!ke.isShapeLocked){const ue=ke.fence.v;let _e=[];if(ue.length>=2)for(let oe=0;oe<ue.length;oe++){const ae=ue[oe],Se=ue[(oe+1)%ue.length],Me=Rb(Qn([ae.lng,ae.lat]),Qn([Se.lng,Se.lat]));_e.push({coord:{lat:Me.geometry.coordinates[1],lng:Me.geometry.coordinates[0]},hidden:lw(a,ae,Se)<48})}for(;P.length<_e.length;){const oe=D();oe.setLatLng(_e[P.length].coord),oe.addTo(a),P.push(oe)}for(;P.length>_e.length;)(X=P.pop())==null||X.remove();for(let oe=0;oe<_e.length;oe++)P[oe].setLatLng(_e[oe].coord),P[oe].addTo(a),P[oe].setOpacity(_e[oe].hidden?0:1),P[oe].on("mousedown",ae=>O(ae,P[oe],oe))}else P.forEach(ue=>ue.remove()),P.length=0}const V=()=>{F(i)};a.on("zoomend",V);let $=!1,G=null;function U(ke,X,ue,_e){const oe=lf([[X.lng,X.lat],[ue.lng,ue.lat]]),ae=Math.max(to,_e),Se=Eu(oe,ae,{units:"meters"}),Me=Ct.latLng(Se.geometry.coordinates[1],Se.geometry.coordinates[0]),we=Zd(ke,X,ue)+180,Te=Ct.marker(Me,{icon:iw,draggable:!0,rotationAngle:we,pane:es}).addTo(ke);return Te.on("dragstart",Ae=>{t(4,$=!0)}),Te.on("mouseover",Ae=>{var Ne,De;be||(G||(G=((Ne=v.current)==null?void 0:Ne.options.color)||Ch),(De=v.current)==null||De.setStyle({color:"#e64"}))}),Te.on("mouseout",Ae=>{var Ne;(Ne=v.current)==null||Ne.setStyle({color:G}),G=null}),Te.on("dragend",Ae=>{t(4,$=!1);const Ne=Ae.target.getLatLng(),De=Qn([Ne.lng,Ne.lat]),_t=Mu(oe,De,{units:"meters"});Au(oe,{units:"meters"});const Fe=Qn([_t.geometry.coordinates[0],_t.geometry.coordinates[1]]),Pe=Qn([X.lng,X.lat]);rr(Pe,Fe,{units:"meters"})}),Te.on("drag",Ae=>{const Ne=Ae.target.getLatLng(),De=Qn([Ne.lng,Ne.lat]),_t=Mu(oe,De,{units:"meters"}),Fe=Au(oe,{units:"meters"}),Pe=Qn([_t.geometry.coordinates[0],_t.geometry.coordinates[1]]),je=Qn([X.lng,X.lat]);let Ue=rr(je,Pe,{units:"meters"})/Fe*100;{const Et=Ue/100*La;Et<to?(Ue=to/La*100,l.update(rt=>({...rt,bufferOffset:to}))):l.update(rt=>({...rt,bufferOffset:Math.floor(Et)}))}const Ke=Fe*(Ue/100),We=Eu(oe,Ke,{units:"meters"}),ze=Ct.latLng(We.geometry.coordinates[1],We.geometry.coordinates[0]);Te.setLatLng(ze)}),Te}const H=new cl(null,a);He(n,H,ke=>t(17,o=ke));let j=NaN,Q=NaN,W=NaN,Y,q=!1,ne=null;function J(ke,X,ue,_e){const oe=lf([[X.lng,X.lat],[ue.lng,ue.lat]]),ae=Math.max(Ds,_e),Se=Eu(oe,ae,{units:"meters"}),Me=Ct.latLng(Se.geometry.coordinates[1],Se.geometry.coordinates[0]),we=Zd(ke,X,ue)+180,Te=Ct.marker(Me,{icon:P3,draggable:!0,rotationAngle:we,pane:es}).addTo(ke);return Te.on("dragstart",Ae=>{t(9,q=!0)}),Te.on("mouseover",Ae=>{var Ne,De;be||(ne||t(10,ne=((Ne=m.current)==null?void 0:Ne.options.color)||Fu),(De=m.current)==null||De.setStyle({color:"#e64"}))}),Te.on("mouseout",Ae=>{var Ne;(Ne=m.current)==null||Ne.setStyle({color:ne}),t(10,ne=null)}),Te.on("dragend",Ae=>{t(9,q=!1);const Ne=Ae.target.getLatLng(),De=Qn([Ne.lng,Ne.lat]),_t=Mu(oe,De,{units:"meters"});Au(oe,{units:"meters"});const Fe=Qn([_t.geometry.coordinates[0],_t.geometry.coordinates[1]]),Pe=Qn([X.lng,X.lat]);rr(Pe,Fe,{units:"meters"})}),Te.on("drag",Ae=>{const Ne=Ae.target.getLatLng(),De=Qn([Ne.lng,Ne.lat]),_t=Mu(oe,De,{units:"meters"}),Fe=Au(oe,{units:"meters"}),Pe=Qn([_t.geometry.coordinates[0],_t.geometry.coordinates[1]]),je=Qn([X.lng,X.lat]);let Ue=rr(je,Pe,{units:"meters"})/Fe*100;{const Et=Ue/100*xl;Et<Ds?(Ue=100/xl*100,l.update(rt=>({...rt,fence:{...rt.fence,h:Ds}}))):l.update(rt=>({...rt,fence:{...rt.fence,h:Et}}))}const Ke=Fe*(Ue/100),We=Eu(oe,Ke,{units:"meters"}),ze=Ct.latLng(We.geometry.coordinates[1],We.geometry.coordinates[0]);Te.setLatLng(ze)}),Te}const ge=new cl(null,a);let ie=NaN,le=NaN,pe=NaN,ye,be=!1;function re(ke=40){let X;const ue=Ct.DomUtil.create("div","corner-draggable-icon");ue.style.position="relative",ue.style.width=ke+"px",ue.style.height=ke+"px",ue.innerHTML='<svg style="position: absolute; top: 0px; left: 0px; pointer-events: none;" width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 50 50" fill="none"><path d="M25 3L15.625 12.375V15.5H21.875V21.875H15.5V15.625H12.375L3 25L12.375 34.375H15.5V28.125H21.875V34.5H15.625V37.625L25 47L34.375 37.625V34.5H28.125V28.125H34.5V34.375H37.625L47 25L37.625 15.625H34.5V21.875H28.125V15.5H34.375V12.375L25 3Z" fill="#CCCCCC"/><path fill-rule="evenodd" clip-rule="evenodd" d="M15.625 12.375L25 3L34.375 12.375V15.5H30V20H34.5V15.625H37.625L47 25L37.625 34.375H34.5V30H30V34.5H34.375V37.625L25 47L15.625 37.625V34.5H20V30H15.5V34.375H12.375L3 25L12.375 15.625H15.5V20H20V15.5H15.625V12.375ZM21 12L25 8L29 12H26.5V23.5H38V21L42 25L38 29V26.5H26.5V38H29L25 42L21 38H23.5V26.5H12V29L8 25L12 21V23.5H23.5V12H21Z" fill="#444444"/></svg>';const _e=Ct.divIcon({html:ue,className:"",iconSize:[ke,ke],iconAnchor:[ke/2,ke/2]}),oe=Ct.marker([0,0],{icon:_e,draggable:!0,pane:es});return oe.on("mouseover",ae=>{ue.innerHTML='<svg style="position: absolute; top: 0px; left: 0px; pointer-events: none;" width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 50 50" fill="none"><path d="M25 3L15.625 12.375V15.5H21.875V21.875H15.5V15.625H12.375L3 25L12.375 34.375H15.5V28.125H21.875V34.5H15.625V37.625L25 47L34.375 37.625V34.5H28.125V28.125H34.5V34.375H37.625L47 25L37.625 15.625H34.5V21.875H28.125V15.5H34.375V12.375L25 3Z" fill="#CCCCCC"/><path fill-rule="evenodd" clip-rule="evenodd" d="M15.625 12.375L25 3L34.375 12.375V15.5H30V20H34.5V15.625H37.625L47 25L37.625 34.375H34.5V30H30V34.5H34.375V37.625L25 47L15.625 37.625V34.5H20V30H15.5V34.375H12.375L3 25L12.375 15.625H15.5V20H20V15.5H15.625V12.375ZM21 12L25 8L29 12H26.5V23.5H38V21L42 25L38 29V26.5H26.5V38H29L25 42L21 38H23.5V26.5H12V29L8 25L12 21V23.5H23.5V12H21Z" fill="#EE6644"/></svg>'}),oe.on("mouseout",ae=>{ue.innerHTML='<svg style="position: absolute; top: 0px; left: 0px; pointer-events: none;" width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 50 50" fill="none"><path d="M25 3L15.625 12.375V15.5H21.875V21.875H15.5V15.625H12.375L3 25L12.375 34.375H15.5V28.125H21.875V34.5H15.625V37.625L25 47L34.375 37.625V34.5H28.125V28.125H34.5V34.375H37.625L47 25L37.625 15.625H34.5V21.875H28.125V15.5H34.375V12.375L25 3Z" fill="#CCCCCC"/><path fill-rule="evenodd" clip-rule="evenodd" d="M15.625 12.375L25 3L34.375 12.375V15.5H30V20H34.5V15.625H37.625L47 25L37.625 34.375H34.5V30H30V34.5H34.375V37.625L25 47L15.625 37.625V34.5H20V30H15.5V34.375H12.375L3 25L12.375 15.625H15.5V20H20V15.5H15.625V12.375ZM21 12L25 8L29 12H26.5V23.5H38V21L42 25L38 29V26.5H26.5V38H29L25 42L21 38H23.5V26.5H12V29L8 25L12 21V23.5H23.5V12H21Z" fill="#444444"/></svg>'}),oe.on("dragstart",ae=>{t(15,be=!0),X=oe.getLatLng()}),oe.on("drag",()=>{if(be&&X){const ae=X,Se=oe.getLatLng();l.update(Me=>({...Me,fence:{h:Me.fence.h,v:Me.fence.h?[Se]:uw(Me.fence.v,ae,Se)}})),X=oe.getLatLng()}}),oe.on("dragend",()=>{t(15,be=!1),X=void 0}),oe}const me=re();return me.setZIndexOffset(3e3),me.addTo(a),mi(()=>{var ke,X;return l.update(ue=>(ue.fence.h?ue.isValid=!0:ue.isValid=!Ph(ue.fence.v),ue)),(ke=m.current)==null||ke.addTo(a),(X=v.current)==null||X.addTo(a),()=>{a.off("zoomend",V),m.onUnmount(),v.onUnmount(),H.onUnmount(),ge.onUnmount(),d.onUnmount(),me.remove(),E.forEach(ue=>ue.remove()),P.forEach(ue=>ue.remove()),C()}}),n.$$set=ke=>{"map"in ke&&t(2,a=ke.map),"geofence"in ke&&s(t(0,l=ke.geofence)),"highlightedPointIndex"in ke&&t(3,h=ke.highlightedPointIndex)},n.$$.update=()=>{var ke,X;if(n.$$.dirty[0]&66560){const ue=i;if(ue.fence.h?ue.isValid=!0:ue.isValid=!Ph(ue.fence.v),console.log("$geofence:",JSON.stringify(ue)),v.update(_e=>{if(!ue.bufferOffset)return null;if(Ph(ue.fence.v))return console.log("Polygon is invalid, hiding buffer"),null;let ae;if(ue.fence.h)_e instanceof Ct.Circle?ae=_e:ae=Ct.circle(ue.fence.v[0],{radius:(ue.fence.h||0)+ue.bufferOffset,color:Ch,fillColor:Hd,fillOpacity:Ud,pane:es});else if(_e instanceof Ct.Polygon)ae=_e;else{const Se=qd(ue.fence.v,ue.bufferOffset);if(!Se)return console.log("Couldn't generate buffer, hiding layer"),null;ae=Ct.polygon(Se,{color:Ch,fillColor:Hd,fillOpacity:Ud,pane:es})}if(ue.fence.h)ae.setLatLng(ue.fence.v[0]),ae.setRadius((ue.fence.h||0)+ue.bufferOffset);else{const Se=qd(ue.fence.v,ue.bufferOffset);if(!Se)return null;ae.setLatLngs(Se)}return Object.is(ae,_e)&&ae&&ae.redraw(),ae}),m.update(_e=>{let oe;return ue.fence.h?_e instanceof Ct.Circle?oe=_e:oe=Ct.circle(ue.fence.v[0],{radius:ue.fence.h||0,color:Fu,fillColor:Lh,fillOpacity:Gd,pane:es}):_e instanceof Ct.Polygon?oe=_e:oe=Ct.polygon(ue.fence.v,{color:Fu,fillColor:Lh,fillOpacity:Gd,pane:es}),ue.fence.h?(oe.setLatLng(ue.fence.v[0]),oe.setRadius(ue.fence.h)):oe.setLatLngs(ue.fence.v),Object.is(oe,_e)&&oe&&(ue.isValid?ne||oe.setStyle({color:Fu,fillColor:Lh}):oe.setStyle({color:"#f00",fillColor:"#a44"}),oe.redraw()),oe}),i.isShapeLocked&&i.name){const _e=i.fence.h?i.fence.v[0]:Bc(i.fence.v);d.update(oe=>(oe||(oe=Ct.tooltip({className:"geofence-label",content:i.name,direction:"center",permanent:!0,pane:Bu})),oe.setLatLng(_e),oe.setContent(i.name),oe))}else d.set(null)}if(n.$$.dirty[0]&65536&&I(i),n.$$.dirty[0]&65536&&F(i),n.$$.dirty[0]&196608&&i.bufferOffset==0&&o&&(t(5,j=NaN),t(6,Q=NaN),t(7,W=NaN),t(8,Y=void 0),H.set(null)),n.$$.dirty[0]&66036){if(!i.isValid||i.isBufferLocked)H.set(null),t(5,j=NaN),t(6,Q=NaN),t(7,W=NaN),t(8,Y=void 0);else if(i.bufferOffset){const ue=i.fence.v.reduce((_e,oe)=>_e+oe.lat+oe.lng,0);if(j!==ue||Q!==i.bufferOffset&&!$||W!=i.fence.h||Y!==!!i.fence.h){t(5,j=ue),t(6,Q=i.bufferOffset||0),t(7,W=i.fence.h||0),t(8,Y=!!i.fence.h);let _e;if(i.fence.h?_e={corner:eo(i.fence.v[0],90,0+i.fence.h),extended:eo(i.fence.v[0],90,La+i.fence.h)}:_e=aw(i.fence.v),_e){const{corner:oe,extended:ae}=_e;H.set(U(a,oe,ae,i.bufferOffset||0))}}}}if(n.$$.dirty[0]&96772)if(!i.isValid||!i.fence.h||i.isShapeLocked)ge.set(null),t(11,ie=NaN),t(12,le=NaN),t(13,pe=NaN),t(14,ye=void 0);else{const ue=i.fence.v.reduce((Me,we)=>Me+we.lat+we.lng,0),_e=ie!==ue,oe=le!==i.bufferOffset,ae=pe!=i.fence.h&&!q,Se=ye!==!!i.fence.h&&!q;if(_e||oe||ae||Se){t(11,ie=ue),t(12,le=i.bufferOffset||0),t(13,pe=i.fence.h||0),t(14,ye=!!i.fence.h);const Me=eo(i.fence.v[0],0,0+(i.bufferOffset||0)),we=eo(i.fence.v[0],0,xl+(i.bufferOffset||0));ge.set(J(a,Me,we,i.fence.h||0))}}if(n.$$.dirty[0]&98304&&i&&!be){i.isShapeLocked?(me.setOpacity(0),(ke=me.dragging)==null||ke.disable()):(me.setOpacity(1),(X=me.dragging)==null||X.enable());const ue=Bc(i.fence.v);me.setLatLng(ue)}},[l,H,a,h,$,j,Q,W,Y,q,ne,ie,le,pe,ye,be,i,o]}class ow extends Wt{constructor(e){super(),Xt(this,e,sw,null,zt,{map:2,geofence:0,highlightedPointIndex:3},null,[-1,-1])}}function nh(n,e){var t=6371,i=$u(e.lat-n.lat),r=$u(e.lng-n.lng),s=Math.sin(i/2)*Math.sin(i/2)+Math.cos($u(n.lat))*Math.cos($u(e.lat))*Math.sin(r/2)*Math.sin(r/2),o=2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s)),a=t*o;return a}function $u(n){return n*(Math.PI/180)}function qd(n,e){if(n.length<3)return null;n.length>0&&(n[0].lat!==n[n.length-1].lat||n[0].lng!==n[n.length-1].lng)&&(n=[...n,{lat:n[0].lat,lng:n[0].lng}]);try{const t=No([n.map(s=>[s.lng,s.lat])]),i=sb(t,e,{units:"meters"});return!i||!i.geometry||i.geometry.type!=="Polygon"?null:i.geometry.coordinates[0].map(s=>({lat:s[1],lng:s[0]}))}catch(t){return console.error("Error offsetting polygon:",t),null}}function Ph(n){try{if(n.length<3)return!1;n.length>0&&(n[0].lat!==n[n.length-1].lat||n[0].lng!==n[n.length-1].lng)&&(n=[...n,{lat:n[0].lat,lng:n[0].lng}]);const e=No([n.map(s=>[s.lng,s.lat])]),t=Db(e),i=n.length>0?n.length-1:0,r=n.slice(0,i).some((s,o)=>{const a=wa(s);return n.slice(0,i).some((h,d)=>{if(o===d)return!1;const m=wa(h);return c7(a,m)})});return t.features.length>0||r}catch(e){return console.error("Error checking polygon validity:",e),!0}}function wa(n){return Qn([n.lng,n.lat])}function aw(n){if(n.length<3)return null;n.length>0&&(n[0].lat!==n[n.length-1].lat||n[0].lng!==n[n.length-1].lng)&&(n=[...n,{lat:n[0].lat,lng:n[0].lng}]);try{const e=No([n.map(v=>[v.lng,v.lat])]),t=e.geometry.coordinates[0];let i=0,r=-1;for(let v=0;v<t.length-1;v++){const k=(v-1+t.length-1)%(t.length-1),w=(v+1)%(t.length-1),E=wa({lng:t[k][0],lat:t[k][1]}),I=wa({lng:t[v][0],lat:t[v][1]}),M=wa({lng:t[w][0],lat:t[w][1]}),C=180-Wy(E,I,M);Math.abs(C)>Math.abs(i)&&(i=C,r=v)}if(r===-1)return console.error("Error finding extended corner: maxAngleIndex is -1"),null;const s=(r-1+t.length-1)%(t.length-1),o=(r+1)%(t.length-1),a=b3(e),l=wa({lng:t[r][0],lat:t[r][1]}),h=Wo(a,l),d=ql(l,0,h,{units:"meters"}),m=ql(l,La,h,{units:"meters"});return{corner:{lat:d.geometry.coordinates[1],lng:d.geometry.coordinates[0]},extended:{lat:m.geometry.coordinates[1],lng:m.geometry.coordinates[0]}}}catch(e){return console.error("Error finding extended corner:",e),null}}function Zd(n,e,t){const i=n.latLngToContainerPoint([e.lat,e.lng]),r=n.latLngToContainerPoint([t.lat,t.lng]),s=r.y-i.y,o=r.x-i.x;let a=Math.atan2(s,o)*(180/Math.PI);return a<0&&(a+=360),a-90}function lw(n,e,t){const i=n.latLngToContainerPoint([e.lat,e.lng]),r=n.latLngToContainerPoint([t.lat,t.lng]),s=Math.abs(r.y-i.y),o=Math.abs(r.x-i.x);return Math.sqrt(o*o+s*s)}function eo(n,e,t){const i=Qn([n.lng,n.lat]),r=ql(i,t,e,{units:"meters"});return{lat:r.geometry.coordinates[1],lng:r.geometry.coordinates[0]}}function Bc(n){const e=n.map(({lat:r,lng:s})=>[s,r]),[t,i]=Fb([e],1e-6);return{lat:i,lng:t}}function uw(n,e,t){n.length>0&&(n[0].lat!==n[n.length-1].lat||n[0].lng!==n[n.length-1].lng)&&(n=[...n,{lat:n[0].lat,lng:n[0].lng}]);const i=n.map(({lat:m,lng:v})=>[v,m]),r=No([i]),s=Qn([e.lng,e.lat]),o=Qn([t.lng,t.lat]),a=rr(s,o),l=Wo(s,o);let d=Ob(r,a,l).geometry.coordinates[0].map(([m,v])=>({lat:v,lng:m}));return d.length>1&&d[0].lat===d[d.length-1].lat&&d[0].lng===d[d.length-1].lng&&(d=d.slice(0,-1)),d}function cw(n,e){const t=Qn([e.lng,e.lat]),i=No(n.coordinates);return Qf(t,i)}class hw{constructor(e,t){Ge(this,"state");Ge(this,"subscribers",new Set);Ge(this,"innerSubscriber");this.state=e,this.innerSubscriber=t}innerSet(e){this.state=e,this.subscribers.forEach(t=>t(this.state))}innerUpdate(e){this.innerSet(e(this.state))}set(e){this.state=e,this.innerSubscriber(this.state),this.subscribers.forEach(t=>t(this.state))}get current(){return this.state}subscribe(e){return this.subscribers.add(e),e(this.state),()=>{this.subscribers.delete(e)}}update(e){this.set(e(this.state))}debug(e){return this.subscribe(t=>{console.log(e,JSON.stringify(t)),console.trace(e)}),this}}function fw(n,e){const t=new hw(n,e);return[t,t.innerUpdate.bind(t)]}class dw{constructor(e,t=()=>{}){Ge(this,"store");Ge(this,"onChange");this.store=new Ot(e),this.onChange=t}set(e){this.onChange(e),this.store.set(e)}get current(){return this.store.current}subscribe(e){return this.store.subscribe(e)}update(e){const t=e(this.store.current);this.onChange(t),this.store.set(t)}}class N3{constructor(e){Ge(this,"__fields");Ge(this,"fullValue");Ge(this,"__updateFullValue");const t=s=>{for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&this.setField(o,s[o])},[i,r]=fw(e,t);this.fullValue=i,this.__updateFullValue=r,this.__fields={};for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&this.setField(s,e[s])}get fields(){return this.__fields}setField(e,t){this.__fields[e]?this.__fields[e].set(t,!1):this.__fields[e]=new dw(t,i=>{this.__updateFullValue(r=>({...r,[e]:i}))})}}class gw{constructor(){Ge(this,"settings");this.settings=new N3({base_map_id:"maa-amet",geofence_layer_shown:!0,airzones_layer_shown:!0,sensors_layer_shown:!0,manned_aircrafts_layer_shown:!0,grid_layer_shown:!1,cadastral_layer_shown:!1,weather_layer_shown:!1,traffic_list_shows_adsb:!1,icon_set:"civ_icons"})}}const ii=new gw;function mw(){function n(){var o,a;const s=(a=(o=Li.current)==null?void 0:o.profile)==null?void 0:a.id;return s?`ui_settings_${s}`:"ui_settings"}let e=n(),t=localStorage.getItem(e);if(t)try{const s=JSON.parse(t),{sensors_layer_shown:o,...a}=s;ii.settings.fullValue.set({...ii.settings.fullValue.current,...a})}catch(s){console.error("Failed to parse UI settings from localStorage:",s),console.error("Clearing settings from localStorage"),localStorage.removeItem(e)}const i=ii.settings.fullValue.subscribe(s=>{const{sensors_layer_shown:o,...a}=s;localStorage.setItem(e,JSON.stringify(a))}),r=Li.subscribe(s=>{const o=s&&s.profile&&s.profile.id?`ui_settings_${s.profile.id}`:"ui_settings";if(o!==e){e=o;const a=localStorage.getItem(e);if(a)try{const l=JSON.parse(a),{sensors_layer_shown:h,...d}=l;ii.settings.fullValue.set({...ii.settings.fullValue.current,...d})}catch{localStorage.removeItem(e)}}});return()=>{i(),r()}}const _w=new Ot(!1);function pw(n,e){var o;e.tileLayers().forEach(a=>{a.options.maxZoom=e.maxZoom||13,a.options.minZoom=e.minZoom||3,n.addLayer(a)});const i=n.getCenter(),r=n.getZoom(),s=((o=e.leafletMapOptionsOverrides)==null?void 0:o.call(e))||{};for(const a of Object.keys(s))n.options[a]=s[a];n.setView(i,r)}class nr{constructor(e,t="et"){Ge(this,"__leafletMap");Ge(this,"region");Ge(this,"__layers");Ge(this,"__activeOverlayLayers",{});Ge(this,"__prevLayer",null);Ge(this,"__prevGeneratedTileLayers",[]);Ge(this,"__prevLeafletMapParams",{});Ge(this,"__unsubscribers",[]);Ge(this,"currentLayer");Ge(this,"allLayers");Ge(this,"availableLayers");this.__leafletMap=e,this.region=t,this.allLayers={MaaAmetLayers:nr.__createMaaAmetLayers(),MaaAmetLayersAtlas:nr.__createMaaAmetLayersAtlas(),MaaAmetLayersDetailed:nr.__createMaaAmetLayersDetailed(),MaaAmetLayersOrtho:nr.__createMaaAmetLayersOrtho(),OpenStreetMapLayer:nr.__createOpenStreetMapLayer(),LithuaniaOrtho:nr.__createLithuaniaOrtho(),MaaAmetLayersOffline:nr.__createMaaAmetLayersOffline(),MaaAmetLayersOrthoOffline:nr.__createMaaAmetLayersOrthoOffline(),"1x1UTMGridOverlayLayer":nr.__create1x1UTMGridOverlayLayer(),CadastralOverlayLayer:nr.__createCadastralOverlayLayer()},this.__layers=this.__filterAvailableLayers(Object.values(this.allLayers)),this.availableLayers=new Ot(this.__layers),this.currentLayer=new Ot(this.listBaseLayers()[0]),this.__unsubscribers.push(this.currentLayer.subscribe(i=>{this.__changeLayer(i);const r=this.__filterAvailableLayers(Object.values(this.allLayers));this.__layers=r,this.availableLayers.set(r)})),this.listOverlayLayers().forEach(i=>{i.setting_key&&this.__unsubscribers.push(ii.settings.fields[i.setting_key].subscribe(r=>{this.toggleLayer(i.id,r)}))})}toggleLayer(e,t){var s;const i=this.__layers.find(o=>o.id===e);if(!i||i.type!=="overlay"){console.error(`Overlay layer with id ${e} not found`);return}const r=((s=i.requires_classes)==null?void 0:s.every(o=>{var a,l;return(l=(a=this.__prevLayer)==null?void 0:a.classes)==null?void 0:l.includes(o)}))??!0;if(t){if(!r){console.warn(`${i.displayName} can only be shown on this map layer.`),i.setting_key&&ii.settings.fields[i.setting_key].set(!1);return}if(!this.__activeOverlayLayers[e]){i.minZoom&&this.__leafletMap.getZoom()<i.minZoom&&this.__leafletMap.setZoom(i.minZoom);const o=i.tileLayers();this.__activeOverlayLayers[e]=o,o.forEach(a=>{a.options.maxZoom=i.maxZoom||13,a.options.minZoom=i.minZoom||3,this.__leafletMap.addLayer(a)})}}else this.__activeOverlayLayers[e]&&(this.__activeOverlayLayers[e].forEach(o=>this.__leafletMap.removeLayer(o)),delete this.__activeOverlayLayers[e])}destroy(){this.__unsubscribers.forEach(e=>e()),this.__unsubscribers=[]}static createMap(e,t,i=null){const r=new yi.Map(e,{center:i||[59.43,24.74],zoom:12}),s="grid-pane";if(!r.getPane(s)){r.createPane(s);const l=r.getPane(s);l&&(l.style.zIndex="440")}const o="cadastral-pane";if(!r.getPane(o)){r.createPane(o);const l=r.getPane(o);l&&(l.style.zIndex="420")}r.zoomControl.remove(),window.activeMap=r;const a=new nr(r,t);return[r,a,()=>{a.destroy()}]}listBaseLayers(){return this.__layers.filter(e=>e.type==="base")}listOverlayLayers(){return this.__layers.filter(e=>e.type==="overlay")}listLayers(){return this.listBaseLayers()}pickMostSuitableLayer(e){let t={};for(const r of this.__layers){let s=0;if(r.classes)for(const o of r.classes)e.includes(o)&&s++;t[r.displayName]=s}const i=Object.keys(t).sort((r,s)=>t[s]-t[r]);return this.__layers.find(r=>r.displayName===i[0])}__filterAvailableLayers(e){const t=h=>{const d=h.reduce((m,v)=>(v.displayName in m||(m[v.displayName]=[]),m[v.displayName].push(v),m),{});return Object.values(d).map(m=>m.find(v=>!v.isOfflineMap)).filter(m=>m!==void 0)},i=h=>h.filter(d=>{var m,v;if(d.requires_classes){for(const k of d.requires_classes)if(!((v=(m=this.__prevLayer)==null?void 0:m.classes)!=null&&v.includes(k)))return!1}return!0}),r=e.filter(h=>h.regions===null||h.regions.includes(this.region)),s=r.filter(h=>h.type==="base"),o=r.filter(h=>h.type==="overlay"),a=i(t(s)),l=i(t(o));return[...a,...l]}__changeLayer(e){var l,h,d;const t=((l=e.classes)==null?void 0:l.includes("maa-amet-compatible"))??!1;_w.set(t),t||this.listOverlayLayers().forEach(m=>{var v;(v=m.requires_classes)!=null&&v.includes("maa-amet-compatible")&&m.setting_key&&ii.settings.fields[m.setting_key].set(!1)});const i=e.tileLayers();this.__prevGeneratedTileLayers.forEach(m=>{this.__leafletMap.removeLayer(m)}),i.forEach(m=>{m.options.maxZoom=e.maxZoom||13,m.options.minZoom=e.minZoom||3,this.__leafletMap.addLayer(m)}),this.__prevGeneratedTileLayers=i;const r=this.__leafletMap.getCenter(),s=this.__leafletMap.getZoom();for(const m of Object.keys(this.__prevLeafletMapParams))this.__leafletMap.options[m]=this.__prevLeafletMapParams[m];this.__prevLeafletMapParams={};const o=((h=e.leafletMapOptionsOverrides)==null?void 0:h.call(e))||{};for(const m of Object.keys(o))this.__prevLeafletMapParams[m]=this.__leafletMap.options[m],this.__leafletMap.options[m]=o[m];this.__leafletMap.setView(r,s);const a=s-((e.zoomOffset||0)-(((d=this.__prevLayer)==null?void 0:d.zoomOffset)||0));this.__leafletMap.setZoom(a,{animate:!1}),this.__prevLayer=e}static __createEPSG3301Projection(){var e=new Ct.Proj.CRS("EPSG:3301","+proj=lcc +lat_1=59.33333333333334 +lat_2=58 +lat_0=57.51755393055556 +lon_0=24 +x_0=500000 +y_0=6375000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",{resolutions:[4e3,2e3,1e3,500,250,125,62.5,31.25,15.625,7.8125,3.90625,1.953125,.9765625,.48828125,.244140625,.122070313,.061035156,.030517578,.015258789],origin:[40500,5993e3],bounds:Ct.bounds([40500,5993e3],[1064500,7017e3])});return e.distance=Ct.CRS.Earth.distance,e.R=6378137,e}static __createMaaAmetBaseConf(e,t,i,r=!1,s=void 0){return{regions:["et"],displayName:t,displayPictureURL:"/map_previews/"+i,zoomOffset:4,type:"base",maxZoom:13,minZoom:3,tileLayers:()=>[new Ct.TileLayer(e,{attribution:"Map: <a href='http://www.maaamet.ee/'>Maa-amet</a>",tms:!0,zIndex:1,updateWhenIdle:!1})],leafletMapOptionsOverrides:()=>({crs:nr.__createEPSG3301Projection()}),classes:(s||[]).concat("maa-amet-compatible"),isOfflineMap:r}}static __createMaaAmetLayers(){return{id:"maa-amet",...this.__createMaaAmetBaseConf("https://tiles.maaamet.ee/tm/tms/1.0.0/hallkaart@LEST/{z}/{x}/{y}.jpg","mapLayers.grayMap","maaamet.jpg",!1,["simple"])}}static __createMaaAmetLayersOffline(){return{id:"maa-amet-offline",...this.__createMaaAmetBaseConf("/offline-map/hallkaart@LEST/{z}/{x}/{y}.jpg","mapLayers.grayMap","maaamet.jpg",!0,["simple"])}}static __createMaaAmetLayersAtlas(){return{id:"maa-amet-atlas",...this.__createMaaAmetBaseConf("https://tiles.maaamet.ee/tm/tms/1.0.0/kaart@LEST/{z}/{x}/{y}.jpg","mapLayers.regularMap","maaamet_atlas.jpg",!1,["simple"])}}static __createMaaAmetLayersDetailed(){return{id:"maa-amet-detailed",...this.__createMaaAmetBaseConf("https://tiles.maaamet.ee/tm/tms/1.0.0/epk_vv@LEST/{z}/{x}/{y}.jpg","mapLayers.detailedMap","maaamet_detailed.jpg",!1,["detailed"])}}static __createMaaAmetLayersOrtho(){return{id:"maa-amet-ortho",...this.__createMaaAmetBaseConf("https://tiles.maaamet.ee/tm/tms/1.0.0/foto@LEST/{z}/{x}/{y}.jpg","mapLayers.orthophoto","maaamet_ortho.jpg",!1,["ortho","detailed"])}}static __createMaaAmetLayersOrthoOffline(){return{id:"maa-amet-ortho-offline",...this.__createMaaAmetBaseConf("/offline-map/foto@LEST/{z}/{x}/{y}.jpg","mapLayers.orthophoto","maaamet_ortho.jpg",!0,["ortho","detailed"])}}static __createOpenStreetMapLayer(){return{id:"osm",regions:null,displayName:"OSM",displayPictureURL:"/map_previews/openstreetmap.jpg",zoomOffset:0,type:"base",maxZoom:17,minZoom:5,hiddenFromQuickSwitch:!1,tileLayers:()=>[new yi.TileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{noWrap:!0})],isOfflineMap:!1,classes:["simple"]}}static __createLithuaniaOrtho(){return{id:"lithuania-ortho",regions:["lt"],displayName:"Ortofoto",displayPictureURL:"/map_previews/maaamet_ortho.jpg",zoomOffset:0,type:"base",maxZoom:19,minZoom:3,hiddenFromQuickSwitch:!1,tileLayers:()=>[new yi.TileLayer("https://maps.lt/arcgis-maps/rest/services/Basemaps/maps_ortofoto_wmerc/MapServer/tile/{z}/{y}/{x}?blankTile=false",{attribution:"Imagery  maps.lt"})],isOfflineMap:!1,classes:["ortho"]}}static __create1x1UTMGridOverlayLayer(){return{id:"grid",regions:["et"],displayName:"1x1 UTM Grid",type:"overlay",maxZoom:13,minZoom:6,tileLayers:()=>[Ct.tileLayer.wms("https://teenus.maaamet.ee/ows/kaardivorgud",{layers:"UTM_1x1",format:"image/png",transparent:!0,opacity:.75,pane:"grid-pane"})],setting_key:"grid_layer_shown",requires_classes:["maa-amet-compatible"]}}static __createCadastralOverlayLayer(){return{id:"cadastral",regions:["et"],displayName:"Katastriksused",type:"overlay",maxZoom:13,minZoom:10,tileLayers:()=>[Ct.tileLayer.wms("https://inspire.geoportaal.ee/geoserver/CP_katastriyksused/wms",{layers:"CP.CadastralParcel",format:"image/png",transparent:!0,opacity:1,className:"cadastral-layer",pane:"cadastral-pane"})],setting_key:"cadastral_layer_shown",requires_classes:["maa-amet-compatible"]}}static __create1x1UTMGridOverlayLayerOffline(){return{id:"grid-offline",regions:["et"],displayName:"1x1 UTM Grid",type:"overlay",maxZoom:13,minZoom:6,tileLayers:()=>[new yi.TileLayer("/offline-map/UTM_1x1/{z}/{x}/{y}.png",{opacity:.75,tms:!0,pane:"grid-pane"})],setting_key:"grid_layer_shown",requires_classes:["maa-amet-compatible"],isOfflineMap:!0}}static __createCadastralOverlayLayerOffline(){return{id:"cadastral-offline",regions:["et"],displayName:"Katastriksused",type:"overlay",maxZoom:13,minZoom:8,tileLayers:()=>[new yi.TileLayer("/offline-map/cadastral/{z}/{x}/{y}.png",{opacity:1,className:"cadastral-layer",tms:!0,pane:"cadastral-pane"})],setting_key:"cadastral_layer_shown",requires_classes:["maa-amet-compatible"],isOfflineMap:!0}}}class i0{constructor(e,t){Ge(this,"onUpdate");Ge(this,"onDisconnect");this.onUpdate=e,this.onDisconnect=t}}class vw{constructor(e,t){Ge(this,"onUpdate");Ge(this,"onDisconnect");this.onUpdate=e,this.onDisconnect=t}}class yw{constructor(e,t){Ge(this,"onUpdate");Ge(this,"onDisconnect");this.onUpdate=e,this.onDisconnect=t}}function lu(n,e,t){if(n===""||e===""||t<2)return[Array(t).fill(""),!1];const i=[];let r=0;for(;i.length<t-1;){const s=n.indexOf(e,r);if(s===-1)return[Array(t).fill(""),!1];i.push(n.substring(r,s)),r=s+1}return i.push(n.substring(r)),[i,!0]}const $s=Object.create(null);$s.open="0";$s.close="1";$s.ping="2";$s.pong="3";$s.message="4";$s.upgrade="5";$s.noop="6";const dc=Object.create(null);Object.keys($s).forEach(n=>{dc[$s[n]]=n});const pf={type:"error",data:"parser error"},D3=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",A3=typeof ArrayBuffer=="function",R3=n=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(n):n&&n.buffer instanceof ArrayBuffer,r0=({type:n,data:e},t,i)=>D3&&e instanceof Blob?t?i(e):Yd(e,i):A3&&(e instanceof ArrayBuffer||R3(e))?t?i(e):Yd(new Blob([e]),i):i($s[n]+(e||"")),Yd=(n,e)=>{const t=new FileReader;return t.onload=function(){const i=t.result.split(",")[1];e("b"+(i||""))},t.readAsDataURL(n)};function jd(n){return n instanceof Uint8Array?n:n instanceof ArrayBuffer?new Uint8Array(n):new Uint8Array(n.buffer,n.byteOffset,n.byteLength)}let Nh;function bw(n,e){if(D3&&n.data instanceof Blob)return n.data.arrayBuffer().then(jd).then(e);if(A3&&(n.data instanceof ArrayBuffer||R3(n.data)))return e(jd(n.data));r0(n,!1,t=>{Nh||(Nh=new TextEncoder),e(Nh.encode(t))})}const Wd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ll=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let n=0;n<Wd.length;n++)Ll[Wd.charCodeAt(n)]=n;const ww=n=>{let e=n.length*.75,t=n.length,i,r=0,s,o,a,l;n[n.length-1]==="="&&(e--,n[n.length-2]==="="&&e--);const h=new ArrayBuffer(e),d=new Uint8Array(h);for(i=0;i<t;i+=4)s=Ll[n.charCodeAt(i)],o=Ll[n.charCodeAt(i+1)],a=Ll[n.charCodeAt(i+2)],l=Ll[n.charCodeAt(i+3)],d[r++]=s<<2|o>>4,d[r++]=(o&15)<<4|a>>2,d[r++]=(a&3)<<6|l&63;return h},kw=typeof ArrayBuffer=="function",s0=(n,e)=>{if(typeof n!="string")return{type:"message",data:O3(n,e)};const t=n.charAt(0);return t==="b"?{type:"message",data:Ew(n.substring(1),e)}:dc[t]?n.length>1?{type:dc[t],data:n.substring(1)}:{type:dc[t]}:pf},Ew=(n,e)=>{if(kw){const t=ww(n);return O3(t,e)}else return{base64:!0,data:n}},O3=(n,e)=>{switch(e){case"blob":return n instanceof Blob?n:new Blob([n]);case"arraybuffer":default:return n instanceof ArrayBuffer?n:n.buffer}},x3="",Sw=(n,e)=>{const t=n.length,i=new Array(t);let r=0;n.forEach((s,o)=>{r0(s,!1,a=>{i[o]=a,++r===t&&e(i.join(x3))})})},Iw=(n,e)=>{const t=n.split(x3),i=[];for(let r=0;r<t.length;r++){const s=s0(t[r],e);if(i.push(s),s.type==="error")break}return i};function Mw(){return new TransformStream({transform(n,e){bw(n,t=>{const i=t.length;let r;if(i<126)r=new Uint8Array(1),new DataView(r.buffer).setUint8(0,i);else if(i<65536){r=new Uint8Array(3);const s=new DataView(r.buffer);s.setUint8(0,126),s.setUint16(1,i)}else{r=new Uint8Array(9);const s=new DataView(r.buffer);s.setUint8(0,127),s.setBigUint64(1,BigInt(i))}n.data&&typeof n.data!="string"&&(r[0]|=128),e.enqueue(r),e.enqueue(t)})}})}let Dh;function Vu(n){return n.reduce((e,t)=>e+t.length,0)}function zu(n,e){if(n[0].length===e)return n.shift();const t=new Uint8Array(e);let i=0;for(let r=0;r<e;r++)t[r]=n[0][i++],i===n[0].length&&(n.shift(),i=0);return n.length&&i<n[0].length&&(n[0]=n[0].slice(i)),t}function Tw(n,e){Dh||(Dh=new TextDecoder);const t=[];let i=0,r=-1,s=!1;return new TransformStream({transform(o,a){for(t.push(o);;){if(i===0){if(Vu(t)<1)break;const l=zu(t,1);s=(l[0]&128)===128,r=l[0]&127,r<126?i=3:r===126?i=1:i=2}else if(i===1){if(Vu(t)<2)break;const l=zu(t,2);r=new DataView(l.buffer,l.byteOffset,l.length).getUint16(0),i=3}else if(i===2){if(Vu(t)<8)break;const l=zu(t,8),h=new DataView(l.buffer,l.byteOffset,l.length),d=h.getUint32(0);if(d>Math.pow(2,21)-1){a.enqueue(pf);break}r=d*Math.pow(2,32)+h.getUint32(4),i=3}else{if(Vu(t)<r)break;const l=zu(t,r);a.enqueue(s0(s?l:Dh.decode(l),e)),i=0}if(r===0||r>n){a.enqueue(pf);break}}}})}const F3=4;function Bi(n){if(n)return Lw(n)}function Lw(n){for(var e in Bi.prototype)n[e]=Bi.prototype[e];return n}Bi.prototype.on=Bi.prototype.addEventListener=function(n,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(e),this};Bi.prototype.once=function(n,e){function t(){this.off(n,t),e.apply(this,arguments)}return t.fn=e,this.on(n,t),this};Bi.prototype.off=Bi.prototype.removeListener=Bi.prototype.removeAllListeners=Bi.prototype.removeEventListener=function(n,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var t=this._callbacks["$"+n];if(!t)return this;if(arguments.length==1)return delete this._callbacks["$"+n],this;for(var i,r=0;r<t.length;r++)if(i=t[r],i===e||i.fn===e){t.splice(r,1);break}return t.length===0&&delete this._callbacks["$"+n],this};Bi.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),t=this._callbacks["$"+n],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(t){t=t.slice(0);for(var i=0,r=t.length;i<r;++i)t[i].apply(this,e)}return this};Bi.prototype.emitReserved=Bi.prototype.emit;Bi.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]};Bi.prototype.hasListeners=function(n){return!!this.listeners(n).length};const ih=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,t)=>t(e,0),ss=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),Cw="arraybuffer";function B3(n,...e){return e.reduce((t,i)=>(n.hasOwnProperty(i)&&(t[i]=n[i]),t),{})}const Pw=ss.setTimeout,Nw=ss.clearTimeout;function rh(n,e){e.useNativeTimers?(n.setTimeoutFn=Pw.bind(ss),n.clearTimeoutFn=Nw.bind(ss)):(n.setTimeoutFn=ss.setTimeout.bind(ss),n.clearTimeoutFn=ss.clearTimeout.bind(ss))}const Dw=1.33;function Aw(n){return typeof n=="string"?Rw(n):Math.ceil((n.byteLength||n.size)*Dw)}function Rw(n){let e=0,t=0;for(let i=0,r=n.length;i<r;i++)e=n.charCodeAt(i),e<128?t+=1:e<2048?t+=2:e<55296||e>=57344?t+=3:(i++,t+=4);return t}function $3(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function Ow(n){let e="";for(let t in n)n.hasOwnProperty(t)&&(e.length&&(e+="&"),e+=encodeURIComponent(t)+"="+encodeURIComponent(n[t]));return e}function xw(n){let e={},t=n.split("&");for(let i=0,r=t.length;i<r;i++){let s=t[i].split("=");e[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return e}class Fw extends Error{constructor(e,t,i){super(e),this.description=t,this.context=i,this.type="TransportError"}}class o0 extends Bi{constructor(e){super(),this.writable=!1,rh(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,i){return super.emitReserved("error",new Fw(e,t,i)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=s0(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const t=Ow(e);return t.length?"?"+t:""}}class Bw extends o0{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let i=0;this._polling&&(i++,this.once("pollComplete",function(){--i||t()})),this.writable||(i++,this.once("drain",function(){--i||t()}))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const t=i=>{if(this.readyState==="opening"&&i.type==="open"&&this.onOpen(),i.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(i)};Iw(e,this.socket.binaryType).forEach(t),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,Sw(e,t=>{this.doWrite(t,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return this.opts.timestampRequests!==!1&&(t[this.opts.timestampParam]=$3()),!this.supportsBinary&&!t.sid&&(t.b64=1),this.createUri(e,t)}}let V3=!1;try{V3=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const $w=V3;function Vw(){}class zw extends Bw{constructor(e){if(super(e),typeof location<"u"){const t=location.protocol==="https:";let i=location.port;i||(i=t?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||i!==e.port}}doWrite(e,t){const i=this.request({method:"POST",data:e});i.on("success",t),i.on("error",(r,s)=>{this.onError("xhr post error",r,s)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(t,i)=>{this.onError("xhr poll error",t,i)}),this.pollXhr=e}}class Rs extends Bi{constructor(e,t,i){super(),this.createRequest=e,rh(this,i),this._opts=i,this._method=i.method||"GET",this._uri=t,this._data=i.data!==void 0?i.data:null,this._create()}_create(){var e;const t=B3(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const i=this._xhr=this.createRequest(t);try{i.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){i.setDisableHeaderCheck&&i.setDisableHeaderCheck(!0);for(let r in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(r)&&i.setRequestHeader(r,this._opts.extraHeaders[r])}}catch{}if(this._method==="POST")try{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{i.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(i),"withCredentials"in i&&(i.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(i.timeout=this._opts.requestTimeout),i.onreadystatechange=()=>{var r;i.readyState===3&&((r=this._opts.cookieJar)===null||r===void 0||r.parseCookies(i.getResponseHeader("set-cookie"))),i.readyState===4&&(i.status===200||i.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof i.status=="number"?i.status:0)},0))},i.send(this._data)}catch(r){this.setTimeoutFn(()=>{this._onError(r)},0);return}typeof document<"u"&&(this._index=Rs.requestsCount++,Rs.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Vw,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Rs.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Rs.requestsCount=0;Rs.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Xd);else if(typeof addEventListener=="function"){const n="onpagehide"in ss?"pagehide":"unload";addEventListener(n,Xd,!1)}}function Xd(){for(let n in Rs.requests)Rs.requests.hasOwnProperty(n)&&Rs.requests[n].abort()}const Gw=function(){const n=z3({xdomain:!1});return n&&n.responseType!==null}();class Hw extends zw{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=Gw&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new Rs(z3,this.uri(),e)}}function z3(n){const e=n.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||$w))return new XMLHttpRequest}catch{}if(!e)try{return new ss[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const G3=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Uw extends o0{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,i=G3?{}:B3(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(i.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,i)}catch(r){return this.emitReserved("error",r)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const i=e[t],r=t===e.length-1;r0(i,this.supportsBinary,s=>{try{this.doWrite(i,s)}catch{}r&&ih(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=$3()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const Ah=ss.WebSocket||ss.MozWebSocket;class qw extends Uw{createSocket(e,t,i){return G3?new Ah(e,t,i):t?new Ah(e,t):new Ah(e)}doWrite(e,t){this.ws.send(t)}}class Zw extends o0{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const t=Tw(Number.MAX_SAFE_INTEGER,this.socket.binaryType),i=e.readable.pipeThrough(t).getReader(),r=Mw();r.readable.pipeTo(e.writable),this._writer=r.writable.getWriter();const s=()=>{i.read().then(({done:a,value:l})=>{a||(this.onPacket(l),s())}).catch(a=>{})};s();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const i=e[t],r=t===e.length-1;this._writer.write(i).then(()=>{r&&ih(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const Yw={websocket:qw,webtransport:Zw,polling:Hw},jw=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Ww=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function vf(n){if(n.length>8e3)throw"URI too long";const e=n,t=n.indexOf("["),i=n.indexOf("]");t!=-1&&i!=-1&&(n=n.substring(0,t)+n.substring(t,i).replace(/:/g,";")+n.substring(i,n.length));let r=jw.exec(n||""),s={},o=14;for(;o--;)s[Ww[o]]=r[o]||"";return t!=-1&&i!=-1&&(s.source=e,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=Xw(s,s.path),s.queryKey=Kw(s,s.query),s}function Xw(n,e){const t=/\/{2,9}/g,i=e.replace(t,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&i.splice(0,1),e.slice(-1)=="/"&&i.splice(i.length-1,1),i}function Kw(n,e){const t={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(i,r,s){r&&(t[r]=s)}),t}const yf=typeof addEventListener=="function"&&typeof removeEventListener=="function",gc=[];yf&&addEventListener("offline",()=>{gc.forEach(n=>n())},!1);class ko extends Bi{constructor(e,t){if(super(),this.binaryType=Cw,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(t=e,e=null),e){const i=vf(e);t.hostname=i.host,t.secure=i.protocol==="https"||i.protocol==="wss",t.port=i.port,i.query&&(t.query=i.query)}else t.host&&(t.hostname=vf(t.host).host);rh(this,t),this.secure=t.secure!=null?t.secure:typeof location<"u"&&location.protocol==="https:",t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=t.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(i=>{const r=i.prototype.name;this.transports.push(r),this._transportsByName[r]=i}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=xw(this.opts.query)),yf&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},gc.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=F3,t.transport=e,this.id&&(t.sid=this.id);const i=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](i)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&ko.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",t=>this._onClose("transport close",t))}onOpen(){this.readyState="open",ko.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let i=0;i<this.writeBuffer.length;i++){const r=this.writeBuffer[i].data;if(r&&(t+=Aw(r)),i>0&&t>this._maxPayload)return this.writeBuffer.slice(0,i);t+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,ih(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,i){return this._sendPacket("message",e,t,i),this}send(e,t,i){return this._sendPacket("message",e,t,i),this}_sendPacket(e,t,i,r){if(typeof t=="function"&&(r=t,t=void 0),typeof i=="function"&&(r=i,i=null),this.readyState==="closing"||this.readyState==="closed")return;i=i||{},i.compress=i.compress!==!1;const s={type:e,data:t,options:i};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),r&&this.once("flush",r),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},i=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?i():e()}):this.upgrading?i():e()),this}_onError(e){if(ko.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),yf&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const i=gc.indexOf(this._offlineEventListener);i!==-1&&gc.splice(i,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}ko.protocol=F3;class Jw extends ko{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),i=!1;ko.priorWebsocketSuccess=!1;const r=()=>{i||(t.send([{type:"ping",data:"probe"}]),t.once("packet",m=>{if(!i)if(m.type==="pong"&&m.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;ko.priorWebsocketSuccess=t.name==="websocket",this.transport.pause(()=>{i||this.readyState!=="closed"&&(d(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const v=new Error("probe error");v.transport=t.name,this.emitReserved("upgradeError",v)}}))};function s(){i||(i=!0,d(),t.close(),t=null)}const o=m=>{const v=new Error("probe error: "+m);v.transport=t.name,s(),this.emitReserved("upgradeError",v)};function a(){o("transport closed")}function l(){o("socket closed")}function h(m){t&&m.name!==t.name&&s()}const d=()=>{t.removeListener("open",r),t.removeListener("error",o),t.removeListener("close",a),this.off("close",l),this.off("upgrading",h)};t.once("open",r),t.once("error",o),t.once("close",a),this.once("close",l),this.once("upgrading",h),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{i||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let i=0;i<e.length;i++)~this.transports.indexOf(e[i])&&t.push(e[i]);return t}}let Qw=class extends Jw{constructor(e,t={}){const i=typeof e=="object"?e:t;(!i.transports||i.transports&&typeof i.transports[0]=="string")&&(i.transports=(i.transports||["polling","websocket","webtransport"]).map(r=>Yw[r]).filter(r=>!!r)),super(e,i)}};function ek(n,e="",t){let i=n;t=t||typeof location<"u"&&location,n==null&&(n=t.protocol+"//"+t.host),typeof n=="string"&&(n.charAt(0)==="/"&&(n.charAt(1)==="/"?n=t.protocol+n:n=t.host+n),/^(https?|wss?):\/\//.test(n)||(typeof t<"u"?n=t.protocol+"//"+n:n="https://"+n),i=vf(n)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";const s=i.host.indexOf(":")!==-1?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+s+":"+i.port+e,i.href=i.protocol+"://"+s+(t&&t.port===i.port?"":":"+i.port),i}const tk=typeof ArrayBuffer=="function",nk=n=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(n):n.buffer instanceof ArrayBuffer,H3=Object.prototype.toString,ik=typeof Blob=="function"||typeof Blob<"u"&&H3.call(Blob)==="[object BlobConstructor]",rk=typeof File=="function"||typeof File<"u"&&H3.call(File)==="[object FileConstructor]";function a0(n){return tk&&(n instanceof ArrayBuffer||nk(n))||ik&&n instanceof Blob||rk&&n instanceof File}function mc(n,e){if(!n||typeof n!="object")return!1;if(Array.isArray(n)){for(let t=0,i=n.length;t<i;t++)if(mc(n[t]))return!0;return!1}if(a0(n))return!0;if(n.toJSON&&typeof n.toJSON=="function"&&arguments.length===1)return mc(n.toJSON(),!0);for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&mc(n[t]))return!0;return!1}function sk(n){const e=[],t=n.data,i=n;return i.data=bf(t,e),i.attachments=e.length,{packet:i,buffers:e}}function bf(n,e){if(!n)return n;if(a0(n)){const t={_placeholder:!0,num:e.length};return e.push(n),t}else if(Array.isArray(n)){const t=new Array(n.length);for(let i=0;i<n.length;i++)t[i]=bf(n[i],e);return t}else if(typeof n=="object"&&!(n instanceof Date)){const t={};for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=bf(n[i],e));return t}return n}function ok(n,e){return n.data=wf(n.data,e),delete n.attachments,n}function wf(n,e){if(!n)return n;if(n&&n._placeholder===!0){if(typeof n.num=="number"&&n.num>=0&&n.num<e.length)return e[n.num];throw new Error("illegal attachments")}else if(Array.isArray(n))for(let t=0;t<n.length;t++)n[t]=wf(n[t],e);else if(typeof n=="object")for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&(n[t]=wf(n[t],e));return n}const ak=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],lk=5;var Kn;(function(n){n[n.CONNECT=0]="CONNECT",n[n.DISCONNECT=1]="DISCONNECT",n[n.EVENT=2]="EVENT",n[n.ACK=3]="ACK",n[n.CONNECT_ERROR=4]="CONNECT_ERROR",n[n.BINARY_EVENT=5]="BINARY_EVENT",n[n.BINARY_ACK=6]="BINARY_ACK"})(Kn||(Kn={}));class uk{constructor(e){this.replacer=e}encode(e){return(e.type===Kn.EVENT||e.type===Kn.ACK)&&mc(e)?this.encodeAsBinary({type:e.type===Kn.EVENT?Kn.BINARY_EVENT:Kn.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let t=""+e.type;return(e.type===Kn.BINARY_EVENT||e.type===Kn.BINARY_ACK)&&(t+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(t+=e.nsp+","),e.id!=null&&(t+=e.id),e.data!=null&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=sk(e),i=this.encodeAsString(t.packet),r=t.buffers;return r.unshift(i),r}}function Kd(n){return Object.prototype.toString.call(n)==="[object Object]"}class l0 extends Bi{constructor(e){super(),this.reviver=e}add(e){let t;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const i=t.type===Kn.BINARY_EVENT;i||t.type===Kn.BINARY_ACK?(t.type=i?Kn.EVENT:Kn.ACK,this.reconstructor=new ck(t),t.attachments===0&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else if(a0(e)||e.base64)if(this.reconstructor)t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let t=0;const i={type:Number(e.charAt(0))};if(Kn[i.type]===void 0)throw new Error("unknown packet type "+i.type);if(i.type===Kn.BINARY_EVENT||i.type===Kn.BINARY_ACK){const s=t+1;for(;e.charAt(++t)!=="-"&&t!=e.length;);const o=e.substring(s,t);if(o!=Number(o)||e.charAt(t)!=="-")throw new Error("Illegal attachments");i.attachments=Number(o)}if(e.charAt(t+1)==="/"){const s=t+1;for(;++t&&!(e.charAt(t)===","||t===e.length););i.nsp=e.substring(s,t)}else i.nsp="/";const r=e.charAt(t+1);if(r!==""&&Number(r)==r){const s=t+1;for(;++t;){const o=e.charAt(t);if(o==null||Number(o)!=o){--t;break}if(t===e.length)break}i.id=Number(e.substring(s,t+1))}if(e.charAt(++t)){const s=this.tryParse(e.substr(t));if(l0.isPayloadValid(i.type,s))i.data=s;else throw new Error("invalid payload")}return i}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,t){switch(e){case Kn.CONNECT:return Kd(t);case Kn.DISCONNECT:return t===void 0;case Kn.CONNECT_ERROR:return typeof t=="string"||Kd(t);case Kn.EVENT:case Kn.BINARY_EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&ak.indexOf(t[0])===-1);case Kn.ACK:case Kn.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class ck{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const t=ok(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const hk=Object.freeze(Object.defineProperty({__proto__:null,Decoder:l0,Encoder:uk,get PacketType(){return Kn},protocol:lk},Symbol.toStringTag,{value:"Module"}));function ms(n,e,t){return n.on(e,t),function(){n.off(e,t)}}const fk=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class U3 extends Bi{constructor(e,t,i){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,i&&i.auth&&(this.auth=i.auth),this._opts=Object.assign({},i),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[ms(e,"open",this.onopen.bind(this)),ms(e,"packet",this.onpacket.bind(this)),ms(e,"error",this.onerror.bind(this)),ms(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var i,r,s;if(fk.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const o={type:Kn.EVENT,data:t};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof t[t.length-1]=="function"){const d=this.ids++,m=t.pop();this._registerAckCallback(d,m),o.id=d}const a=(r=(i=this.io.engine)===null||i===void 0?void 0:i.transport)===null||r===void 0?void 0:r.writable,l=this.connected&&!(!((s=this.io.engine)===null||s===void 0)&&s._hasPingExpired());return this.flags.volatile&&!a||(l?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(e,t){var i;const r=(i=this.flags.timeout)!==null&&i!==void 0?i:this._opts.ackTimeout;if(r===void 0){this.acks[e]=t;return}const s=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===e&&this.sendBuffer.splice(a,1);t.call(this,new Error("operation has timed out"))},r),o=(...a)=>{this.io.clearTimeoutFn(s),t.apply(this,a)};o.withError=!0,this.acks[e]=o}emitWithAck(e,...t){return new Promise((i,r)=>{const s=(o,a)=>o?r(o):i(a);s.withError=!0,t.push(s),this.emit(e,...t)})}_addToQueue(e){let t;typeof e[e.length-1]=="function"&&(t=e.pop());const i={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((r,...s)=>i!==this._queue[0]?void 0:(r!==null?i.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(r)):(this._queue.shift(),t&&t(null,...s)),i.pending=!1,this._drainQueue())),this._queue.push(i),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:Kn.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(i=>String(i.id)===e)){const i=this.acks[e];delete this.acks[e],i.withError&&i.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case Kn.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Kn.EVENT:case Kn.BINARY_EVENT:this.onevent(e);break;case Kn.ACK:case Kn.BINARY_ACK:this.onack(e);break;case Kn.DISCONNECT:this.ondisconnect();break;case Kn.CONNECT_ERROR:this.destroy();const i=new Error(e.data.message);i.data=e.data.data,this.emitReserved("connect_error",i);break}}onevent(e){const t=e.data||[];e.id!=null&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const i of t)i.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let i=!1;return function(...r){i||(i=!0,t.packet({type:Kn.ACK,id:e,data:r}))}}onack(e){const t=this.acks[e.id];typeof t=="function"&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Kn.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let i=0;i<t.length;i++)if(e===t[i])return t.splice(i,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let i=0;i<t.length;i++)if(e===t[i])return t.splice(i,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const i of t)i.apply(this,e.data)}}}function Wa(n){n=n||{},this.ms=n.min||100,this.max=n.max||1e4,this.factor=n.factor||2,this.jitter=n.jitter>0&&n.jitter<=1?n.jitter:0,this.attempts=0}Wa.prototype.duration=function(){var n=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),t=Math.floor(e*this.jitter*n);n=Math.floor(e*10)&1?n+t:n-t}return Math.min(n,this.max)|0};Wa.prototype.reset=function(){this.attempts=0};Wa.prototype.setMin=function(n){this.ms=n};Wa.prototype.setMax=function(n){this.max=n};Wa.prototype.setJitter=function(n){this.jitter=n};class kf extends Bi{constructor(e,t){var i;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.opts=t,rh(this,t),this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor((i=t.randomizationFactor)!==null&&i!==void 0?i:.5),this.backoff=new Wa({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(t.timeout==null?2e4:t.timeout),this._readyState="closed",this.uri=e;const r=t.parser||hk;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=t.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(t=this.backoff)===null||t===void 0||t.setMin(e),this)}randomizationFactor(e){var t;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(t=this.backoff)===null||t===void 0||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(t=this.backoff)===null||t===void 0||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new Qw(this.uri,this.opts);const t=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;const r=ms(t,"open",function(){i.onopen(),e&&e()}),s=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),e?e(a):this.maybeReconnectOnOpen()},o=ms(t,"error",s);if(this._timeout!==!1){const a=this._timeout,l=this.setTimeoutFn(()=>{r(),s(new Error("timeout")),t.close()},a);this.opts.autoUnref&&l.unref(),this.subs.push(()=>{this.clearTimeoutFn(l)})}return this.subs.push(r),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(ms(e,"ping",this.onping.bind(this)),ms(e,"data",this.ondata.bind(this)),ms(e,"error",this.onerror.bind(this)),ms(e,"close",this.onclose.bind(this)),ms(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}ondecoded(e){ih(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let i=this.nsps[e];return i?this._autoConnect&&!i.active&&i.connect():(i=new U3(this,e,t),this.nsps[e]=i),i}_destroy(e){const t=Object.keys(this.nsps);for(const i of t)if(this.nsps[i].active)return;this._close()}_packet(e){const t=this.encoder.encode(e);for(let i=0;i<t.length;i++)this.engine.write(t[i],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var i;this.cleanup(),(i=this.engine)===null||i===void 0||i.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const i=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(r=>{r?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",r)):e.onreconnect()}))},t);this.opts.autoUnref&&i.unref(),this.subs.push(()=>{this.clearTimeoutFn(i)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const hl={};function _c(n,e){typeof n=="object"&&(e=n,n=void 0),e=e||{};const t=ek(n,e.path||"/socket.io"),i=t.source,r=t.id,s=t.path,o=hl[r]&&s in hl[r].nsps,a=e.forceNew||e["force new connection"]||e.multiplex===!1||o;let l;return a?l=new kf(i,e):(hl[r]||(hl[r]=new kf(i,e)),l=hl[r]),t.query&&!e.query&&(e.query=t.queryKey),l.socket(t.path,e)}Object.assign(_c,{Manager:kf,Socket:U3,io:_c,connect:_c});class dk{constructor(e,t,i){Ge(this,"onUpdate");Ge(this,"onDisconnect");Ge(this,"commandPrefix");this.commandPrefix=e,this.onUpdate=t,this.onDisconnect=i}}class u0{constructor(e){Ge(this,"socket");Ge(this,"subscribers",[]);Ge(this,"connected",!1);Ge(this,"lastCommandSendPromise",null);Ge(this,"lastCommandSendExpect",null);Ge(this,"commandPromiseResolver",null);Ge(this,"commandPromiseRejecter",null);this.socket=e}static async connect(){const e=_c(O4,{transports:["polling","websocket"],autoConnect:!0,reconnection:!0,reconnectionAttempts:10,reconnectionDelay:1e3,timeout:2e4,forceNew:!0});e.io.on("upgrade",i=>{console.log("Socket.io transport upgraded to:",i.name)}),e.io.on("error",i=>{console.error("Socket.io transport error:",i)});const t=new u0(e);return await new Promise((i,r)=>{const s=setTimeout(()=>{t.connected||(console.error("Socket.io connection timeout"),r(new Error("Connection timeout")))},3e4);e.on("connect_error",o=>{console.error("Socket.io connect error:",o),e.io.on("reconnect_failed",()=>{clearTimeout(s),t.connected||r(new Error("Failed to connect after multiple attempts"))})}),e.on("connect",()=>{console.log("Socket.io connected successfully"),t.connected=!0,clearTimeout(s);const o=x4();if(o.length>0){const a=o[0].replace("auth-","");e.emit("authenticate",a)}i(t)}),e.on("authenticated",()=>{console.log("Socket.io authenticated successfully")}),e.on("message",o=>{if(typeof o=="string")t.__onIncomingMessage(o);else if(o instanceof Uint8Array||o instanceof ArrayBuffer){const a=new TextDecoder;t.__onIncomingMessage(a.decode(o))}}),e.on("disconnect",()=>{console.log("Socket.io disconnected"),t.subscribers.forEach(o=>{o.onDisconnect()})}),e.on("error",o=>{console.error("Socket.io error:",o),t.connected||r(o)})})}close(){this.socket.disconnect()}subscribe(e,t,i){const r=new dk(e,t,i);return this.subscribers.push(r),()=>this.__doUnsubscribe(r)}async request(e,...t){if(this.lastCommandSendPromise){if(this.lastCommandSendExpect===e)throw new Error(`SocketIOManager: Cannot send request for '${t.join(":")}', as there is already a pending request expecting '${e}' response.`);for(;this.lastCommandSendPromise;)await this.lastCommandSendPromise}this.lastCommandSendExpect=e;let i;const r=new Promise((s,o)=>{i=o,this.commandPromiseResolver=s,this.commandPromiseRejecter=o,this.socket.emit("message","cmd:"+t.join(":"))}).catch(s=>{throw this.lastCommandSendPromise=null,this.commandPromiseResolver=null,this.lastCommandSendExpect=null,s});return this.lastCommandSendPromise=r,setTimeout(()=>{this.lastCommandSendPromise===r&&(this.lastCommandSendPromise=null,this.commandPromiseResolver=null,this.lastCommandSendExpect=null,console.warn(`SocketIOManager: Response timeout for command: '${t.join(":")}', was expecting '${e}'`),i("Command timeout"))},2e4),this.lastCommandSendPromise}command(...e){this.socket.emit("message","cmd:"+e.join(":"))}__onIncomingMessage(e){if(this.commandPromiseResolver&&this.commandPromiseRejecter){if(e.startsWith("err:")){this.commandPromiseRejecter(e),this.lastCommandSendPromise=null,this.commandPromiseResolver=null;return}else if(e=="ok"){this.commandPromiseResolver(e),this.lastCommandSendPromise=null,this.commandPromiseResolver=null;return}}const[t,i,r]=this.__splitPacket(e);if(!r){console.warn("SocketIOManager: Received unparsable packet:",e);return}if(this.commandPromiseResolver&&this.lastCommandSendExpect&&t==this.lastCommandSendExpect){this.commandPromiseResolver(i),this.lastCommandSendPromise=null,this.commandPromiseResolver=null;return}this.subscribers.forEach(s=>{t==s.commandPrefix&&s.onUpdate(i)})}__doUnsubscribe(e){const t=this.subscribers.indexOf(e);t===-1&&console.warn("SocketIOManager: Unsubscribing subscriber that was not subscribed"),this.subscribers.splice(t,1)}__splitPacket(e){if(e===""||!e.includes(":"))return["","",!1];const t=e.indexOf(":");if(t===-1)return["","",!1];const i=e.substring(0,t),r=e.substring(t+1);return[i,r,!0]}}async function gk(){try{return await u0.connect()}catch(n){throw console.error("Failed to connect using Socket.IO",n),n}}class Os{constructor(){Ge(this,"subscribers",[]);Ge(this,"wsUnsubscribe",()=>{})}static connect(e){const t=new Os;return t.wsUnsubscribe=e.subscribe("p",t.__onIncomingMessage.bind(t),t.__doDisconnect.bind(t)),t}onUnmount(){this.wsUnsubscribe()}__onIncomingMessage(e){const[[t,i,r,s],o]=lu(e,":",4);if(!o){console.warn("RealTimeDroneDataService: Received unparsable packet:",e);return}const a=JSON.parse(s);this.subscribers.forEach(l=>{var h,d;l.onUpdate({flightId:a.id,aid:a.aid,dc:((h=a.dc)==null?void 0:h.lat)==0&&((d=a.dc)==null?void 0:d.lng)==0?null:a.dc,yaw:a.yaw,pc:a.pc,h:a.h,sensorID:parseInt(i),sensorType:parseInt(t),areaID:parseInt(r)})})}__doDisconnect(){this.subscribers.forEach(e=>{e.onDisconnect()})}subscribe(e,t){const i=new i0(e,t);return this.subscribers.push(i),()=>{const r=this.subscribers.indexOf(i);r===-1&&console.warn("RealTimeDroneDataService: Unsubscribing subscriber that was not subscribed"),this.subscribers.splice(r,1)}}}class mk{constructor(){Ge(this,"front");Ge(this,"back")}addFront(e){this.front?this.front=this.front.next={value:e,prev:this.front}:this.front=this.back={value:e}}removeFront(){const e=this.peekFront();return this.front===this.back?this.front=this.back=void 0:(this.front=this.front.prev,this.front.next=void 0),e}peekFront(){return this.front&&this.front.value}addBack(e){this.front?this.back=this.back.prev={value:e,next:this.back}:this.front=this.back={value:e}}removeBack(){const e=this.peekBack();return this.front===this.back?this.front=this.back=void 0:(this.back=this.back.next,this.back.prev=void 0),e}peekBack(){return this.back&&this.back.value}nthFromFront(e){let t=this.front;for(;t&&e>0;)t=t.prev,e--;return t&&t.value}nthFromBack(e){let t=this.back;for(;t&&e>0;)t=t.next,e--;return t&&t.value}get length(){let e=0,t=this.front;for(;t;)e++,t=t.prev;return e}}async function q3(n){const e=new URLSearchParams({aid:n});return await Hr("/api/v1/aircraft_info?"+e.toString())}const Js=class Js{constructor(e,t){Ge(this,"playbackSpeed");Ge(this,"onConnect",null);Ge(this,"batches",new mk);Ge(this,"nextFetchPointer",null);Ge(this,"lastFetchEndTimeSecs",0);Ge(this,"lastReturnedEndTimeSecs",0);Ge(this,"fetchingInterval",null);Ge(this,"ongoingFetch",!1);Ge(this,"instanceId",Js.INSTANCE_COUNT++);console.log(`BacklogBufferer[${this.instanceId}]: Created, starting at ${t}`),this.lastReturnedEndTimeSecs=t,this.playbackSpeed=e}static connect(e,t){const i=new Js(e,t);i.tryFetch(),i.fetchingInterval=setInterval(()=>{console.log(`BacklogBufferer[${i.instanceId}]: Interval fetch check...`),i.tryFetch()},1e3);const r=s=>{s()};return[i,new Promise(s=>{i.onConnect=()=>r(s)})]}async __fetch(){try{if(console.log(`BacklogBufferer[${this.instanceId}]: Fetching backlog packets from ${this.lastFetchEndTimeSecs}...`),this.ongoingFetch){console.warn("BacklogBufferer: Fetch already ongoing, not starting another");return}this.ongoingFetch=!0;const e=Math.floor(this.lastFetchEndTimeSecs||this.lastReturnedEndTimeSecs),t=Math.ceil(Js.BACKLOG_FETCH_INTERVAL_SECS*this.playbackSpeed.current);console.log(`BacklogBufferer[${this.instanceId}]: Requesting backlog from ${e} to ${e+t} (span ${t})`);const i=new URLSearchParams({s:e.toString(),d:t.toString()}),r=await Hr("/api/v1/history/batch","GET",i);console.log(`BacklogBufferer[${this.instanceId}]: Received backlog batch response`),this.__onIncomingMessage(r),this.lastFetchEndTimeSecs=e+t}catch(e){console.error("BacklogBufferer[${this.instanceId}]: Failed to fetch backlog packets, will try again indefinitely:",e)}finally{this.ongoingFetch=!1}}tryFetch(){console.log(`BacklogBufferer[${this.instanceId}]: Trying to fetch more backlog...`);let e=!1;if(this.lastFetchEndTimeSecs==0&&(console.log(`BacklogBufferer[${this.instanceId}]: No backlog fetched yet, fetching first batch...`),e=!0),!e){const t=this.lastFetchEndTimeSecs-this.lastReturnedEndTimeSecs;t<Js.BACKLOG_PREFERRED_OVERHEAD_SECS&&(console.log(`BacklogBufferer[${this.instanceId}]: Backlog buffer low (${t}s left), fetching more...`),e=!0)}if(console.log(`BacklogBufferer[${this.instanceId}]: Fetch decision: ${e}`),!!e)try{this.__fetch()}catch(t){console.error("BacklogBufferer: Failed to fetch backlog, not continuing:",t),this.__doDisconnect()}}__onIncomingMessage(e){const t=e.map(i=>({...i,timestamp:i.ts/1e3}));this.batches.addBack(t),this.onConnect&&(this.onConnect(),this.onConnect=null),this.nextFetchPointer||(this.nextFetchPointer=[0,0])}__cleanBatches(){if(!this.nextFetchPointer||this.nextFetchPointer[0]<1)return;let e=0;for(let t=0;t<this.nextFetchPointer[0];t++)this.batches.removeFront(),e++;this.nextFetchPointer[0]-=e}next(e){e=Math.floor(e),this.lastReturnedEndTimeSecs=e;let t=[];{let r=this.nextFetchPointer?this.nextFetchPointer[0]:0,s=this.nextFetchPointer?this.nextFetchPointer[1]:0,o=this.batches.nthFromFront(r),a=s;if(!o)return[];for(;;){if(r>=this.batches.length){this.nextFetchPointer=[r,s];break}if(s>=o.length){if(t.push(o.slice(a)),r++,s=0,a=0,o=this.batches.nthFromFront(r),!o){this.nextFetchPointer=[r,s];break}continue}if(o[s].timestamp>=e){t.push(o.slice(a,s)),s>o.length&&(r++,s=0),this.nextFetchPointer=[r,s];break}s++}}return this.__cleanBatches(),t.flat()}close(){this.fetchingInterval&&clearInterval(this.fetchingInterval)}onUnmount(){this.close()}__doDisconnect(){this.close()}};Ge(Js,"BACKLOG_FETCH_INTERVAL_SECS",10),Ge(Js,"BACKLOG_PREFERRED_OVERHEAD_SECS",30),Ge(Js,"INSTANCE_COUNT",0);let Ef=Js;class ni{constructor(e,t,i=0){Ge(this,"paused",new Ot(!1));Ge(this,"playbackSpeed");Ge(this,"droneDataSubscribers",[]);Ge(this,"signalDetectionSubscribers",[]);Ge(this,"radarDetectionSubscribers",[]);Ge(this,"playbackTime");Ge(this,"playbackTimeSecs");Ge(this,"playbackTickIntervalSecs",.25);Ge(this,"playerInterval",null);Ge(this,"backlogBufferer");this.backlogBufferer=e,this.playbackSpeed=t,this.playbackTimeSecs=i,this.playbackTime=Pn(i)}static async connect(e){const t=new Ot(1),[i,r]=Ef.connect(t,e);return r.then(()=>{const s=new ni(i,t,e);return s.__startBackgroundPlayer(),[s,{subscribe:(o,a)=>s.__subscribeToSignal(o,a),onUnmount:()=>{s.signalDetectionSubscribers.forEach(o=>o.onDisconnect()),s.signalDetectionSubscribers=[]}},{subscribe:(o,a)=>s.__subscribeToRadar(o,a),onUnmount:()=>{s.radarDetectionSubscribers.forEach(o=>o.onDisconnect()),s.radarDetectionSubscribers=[]}}]}).catch(s=>{throw i.close(),s})}get paybackTimeStore(){return this.playbackTime}get timestamp(){return this.playbackTimeSecs}__startBackgroundPlayer(){this.playerInterval&&clearInterval(this.playerInterval),this.playerInterval=setInterval(()=>{var r,s;if(this.paused.current)return;if((this.playbackTimeSecs-1)*1e3>Date.now()){this.paused.set(!0);return}const e=this.playbackTickIntervalSecs*this.playbackSpeed.current,t=this.playbackTimeSecs+e,i=this.backlogBufferer.next(t);for(const o of i)if(o.id.charAt(0)==="3")for(const a of this.signalDetectionSubscribers)a.onUpdate({flightId:o.id,l:o.l,c:o.c.lng==0&&o.c.lat==0?null:o.c,r:o.r,d:o.d,az:o.az,bw:o.bw,st:o.st,e:o.e,sensorId:o.sid,timestamp:o.ts});else if(o.id.charAt(0)==="4")for(const a of this.radarDetectionSubscribers)a.onUpdate({id:o.id,tid:o.tid,sid:o.sid,ts:o.ts,loc:o.loc,alt:o.alt,c:o.c});else if(o.id.charAt(0)==="1"||o.id.charAt(0)==="2")for(const a of this.droneDataSubscribers)a.onUpdate({flightId:o.id,aid:o.aid,dc:((r=o.dc)==null?void 0:r.lat)==0&&((s=o.dc)==null?void 0:s.lng)==0?null:o.dc,yaw:o.yaw,pc:o.pc,h:o.h,sensorType:F4(o.id)});this.playbackTimeSecs+=e,this.playbackTime.set(this.playbackTimeSecs)},this.playbackTickIntervalSecs*1e3)}__subscribeToSignal(e,t){const i=new vw(e,t);return this.signalDetectionSubscribers.push(i),()=>{const r=this.signalDetectionSubscribers.indexOf(i);r===-1&&console.warn("BackendDroneDataService: Unsubscribing signal detection subscriber that was not subscribed"),this.signalDetectionSubscribers.splice(r,1)}}__subscribeToRadar(e,t){const i=new yw(e,t);return this.radarDetectionSubscribers.push(i),()=>{const r=this.radarDetectionSubscribers.indexOf(i);r===-1&&console.warn("BackendDroneDataService: Unsubscribing radar detection subscriber that was not subscribed"),this.radarDetectionSubscribers.splice(r,1)}}close(){this.backlogBufferer.close(),this.playerInterval&&clearInterval(this.playerInterval),this.droneDataSubscribers=[],this.signalDetectionSubscribers=[],this.radarDetectionSubscribers=[],this.droneDataSubscribers.forEach(e=>e.onDisconnect()),this.signalDetectionSubscribers.forEach(e=>e.onDisconnect()),this.radarDetectionSubscribers.forEach(e=>e.onDisconnect())}onUnmount(){this.close()}__doDisconnect(){this.close()}subscribe(e,t){const i=new i0(e,t);return this.droneDataSubscribers.push(i),()=>{const r=this.droneDataSubscribers.indexOf(i);r===-1&&console.warn("BackendDroneDataService: Unsubscribing subscriber that was not subscribed"),this.droneDataSubscribers.splice(r,1)}}}var an=(n=>(n[n.UNKNOWN=0]="UNKNOWN",n[n.HOSTILE=1]="HOSTILE",n[n.FRIENDLY=2]="FRIENDLY",n[n.NEUTRAL=3]="NEUTRAL",n))(an||{});class _k{constructor(e){Ge(this,"currentDroneRelationService");Ge(this,"knownRelationships",new Map);Ge(this,"aidToRelationships",new Map);Ge(this,"lastFetchPeriod",null);Ge(this,"realTimeRelationshipSubscribers",new Set);Ge(this,"__subscriberUpdateLoopInterval");Ge(this,"__serviceUnsubscriber");this.currentDroneRelationService=e,this.__subscriberUpdateLoopInterval=this.__startSubscriberUpdateLoop(),this.__serviceUnsubscriber=this.__startOnServiceChangeListener()}add(e){const t={relationship:e.relationship,identifier:e.identifier??null,notes:e.notes??null,expiryStart:e.expiryStart??null,expiryEnd:e.expiryEnd??null};if(!this.aidToRelationships.has(e.aid))this.aidToRelationships.set(e.aid,new Ot([t]));else{const i=this.aidToRelationships.get(e.aid).current;i.some(r=>r.id===e.id)||(i.push(t),this.aidToRelationships.get(e.aid).set([...i]))}this.knownRelationships.set(e.id,t)}get(e,t=this.__currentTimepointMillisAlways()){var s;if(t===null)return this.currentDroneRelationService.getByAid(e);const i=(s=this.aidToRelationships.get(e))==null?void 0:s.current;if(!i)return null;const r=i.filter(o=>(!o.expiryStart||o.expiryStart<=t)&&(!o.expiryEnd||o.expiryEnd>t));return r.length===0?null:(r.sort((o,a)=>o.relationship===1&&a.relationship!==1?-1:a.relationship===1&&o.relationship!==1?1:o.expiryEnd===null&&a.expiryEnd!==null?-1:a.expiryEnd===null&&o.expiryEnd!==null?1:o.expiryEnd===null&&a.expiryEnd===null?(a.expiryStart??0)-(o.expiryStart??0):(a.expiryEnd??0)-(o.expiryEnd??0)),r[0])}async fetch(e,t){if(this.lastFetchPeriod&&e<this.lastFetchPeriod.end&&t>this.lastFetchPeriod.end&&this.lastFetchPeriod.end-e>5*60*1e3){console.log("ReactiveTimeBasedDroneRelationService: Skipping fetch, already have data for this period");return}(await Hr(`/api/v1/organizations/drone/classification?start=${e}&end=${t}`)).forEach(r=>{const s={id:r.id,serialNumber:r.serialNumber,relationship:r.relationship,identifier:r.identifier??null,notes:r.notes??null,expiryStart:r.expiryStart??null,expiryEnd:r.expiryEnd??null},o=r.serialNumber;if(!this.aidToRelationships.has(o))this.aidToRelationships.set(o,new Ot([s]));else{const a=this.aidToRelationships.get(o).current;a.some(l=>l.id===r.id)||(a.push(s),this.aidToRelationships.get(o).set([...a]))}this.knownRelationships.set(r.id,s)}),this.lastFetchPeriod={start:e,end:t}}__currentTimepointMillisAlways(){return bi.current instanceof ni?bi.current.timestamp*1e3:Date.now()}__currentTimepointMillis(){return bi.current instanceof ni?bi.current.timestamp*1e3:null}subscribeToRelationship(e){const t={aid:e,userFacingReadable:new Ot(this.get(e,this.__currentTimepointMillisAlways()))},i=setTimeout(()=>{this.__updateSubscriber(t,this.__currentTimepointMillisAlways())},300);return this.realTimeRelationshipSubscribers.add(t),[t.userFacingReadable,()=>{clearTimeout(i),this.realTimeRelationshipSubscribers.delete(t)}]}updateFromCurrentKnownDrones(e){const t=Date.now();this.knownRelationships.forEach((i,r)=>{if(!e.has(r)&&(i.expiryEnd==null||i.expiryEnd>t)){this.knownRelationships.delete(r);const s=i.serialNumber;if(this.aidToRelationships.has(s)){const a=this.aidToRelationships.get(s).current.filter(l=>l.id!==r);this.aidToRelationships.get(s).set(a),a.length===0&&this.aidToRelationships.delete(s)}}}),e.forEach(i=>{const r=this.knownRelationships.get(i.id);if(!r||r.serialNumber!==i.serialNumber||r.relationship!==i.relationship||r.identifier!==i.identifier||r.notes!==i.notes||r.expiryStart!==i.expiryStart||r.expiryEnd!==i.expiryEnd){if(!this.aidToRelationships.has(i.serialNumber))this.aidToRelationships.set(i.serialNumber,new Ot([i]));else{const o=this.aidToRelationships.get(i.serialNumber).current;if(!o.some(a=>a.id===i.id))o.push(i),this.aidToRelationships.get(i.serialNumber).set([...o]);else{const a=o.findIndex(l=>l.id===i.id);a!==-1&&(o[a]=i,this.aidToRelationships.get(i.serialNumber).set([...o]))}}this.knownRelationships.set(i.id,i),this.realTimeRelationshipSubscribers.forEach(o=>{o.aid===i.serialNumber&&this.__updateSubscriber(o,this.__currentTimepointMillisAlways())})}})}__updateSubscriber(e,t){var r,s,o,a,l;const i=this.get(e.aid,t);(e.userFacingReadable.current!==i||((r=e.userFacingReadable.current)==null?void 0:r.expiryEnd)!==(i==null?void 0:i.expiryEnd)||((s=e.userFacingReadable.current)==null?void 0:s.expiryStart)!==(i==null?void 0:i.expiryStart)||((o=e.userFacingReadable.current)==null?void 0:o.relationship)!==(i==null?void 0:i.relationship)||((a=e.userFacingReadable.current)==null?void 0:a.identifier)!==(i==null?void 0:i.identifier)||((l=e.userFacingReadable.current)==null?void 0:l.notes)!==(i==null?void 0:i.notes))&&e.userFacingReadable.set(i)}__updateSubscribers(){const e=this.__currentTimepointMillis();this.realTimeRelationshipSubscribers.forEach(t=>{this.__updateSubscriber(t,e)})}__attemptFetch(){bi.current instanceof ni&&this.fetch(bi.current.timestamp*1e3,bi.current.timestamp*1e3+60*60*1e3)}__startSubscriberUpdateLoop(){return setInterval(()=>{this.__attemptFetch(),this.__updateSubscribers()},3e3)}__startOnServiceChangeListener(){return bi.subscribe(e=>{this.__attemptFetch(),this.__updateSubscribers()})}onUnmount(){this.__serviceUnsubscriber(),clearTimeout(this.__subscriberUpdateLoopInterval)}}class pk{constructor(e,t){Ge(this,"knownDrones");Ge(this,"onKnownDronesUpdateUnsubscribe");this.knownDrones=new To(this.__fetchKnownDrones,{ttlSecs:60,loadInitially:!0,keepAliveWithZeroSubscribers:!0}),t&&(this.onKnownDronesUpdateUnsubscribe=this.knownDrones.subscribe(i=>i&&t(i)))}onUnmount(){this.onKnownDronesUpdateUnsubscribe&&this.onKnownDronesUpdateUnsubscribe()}getByAid(e){const t=this.knownDrones.current;if(!t)return null;const i=Date.now(),r=Array.from(t.values()).filter(s=>s.serialNumber===e&&(!s.expiryStart||s.expiryStart<=i)&&(!s.expiryEnd||s.expiryEnd>i));return r.length===0?null:(r.sort((s,o)=>s.relationship===1&&o.relationship!==1?-1:o.relationship===1&&s.relationship!==1?1:s.expiryEnd===null&&o.expiryEnd!==null?-1:o.expiryEnd===null&&s.expiryEnd!==null?1:s.expiryEnd===null&&o.expiryEnd===null?(o.expiryStart??0)-(s.expiryStart??0):(o.expiryEnd??0)-(s.expiryEnd??0)),r[0])}async updateDroneRelation(e,t,i,r){const s={serialNumber:t,relationship:i,identifier:r==null?void 0:r.identifier,notes:r==null?void 0:r.notes,expiryStart:r==null?void 0:r.expiryStart,expiryEnd:r==null?void 0:r.expiryEnd};await no("/api/v1/organizations/drone/classification/"+e,s,"PATCH",!0),this.knownDrones.invalidate()}async addDroneRelation(e,t,i){const r={serialNumber:e,relationship:t,identifier:i==null?void 0:i.identifier,notes:i==null?void 0:i.notes,expiryStart:i==null?void 0:i.expiryStart,expiryEnd:i==null?void 0:i.expiryEnd};await no("/api/v1/organizations/drone/classification",r,"POST",!0),this.knownDrones.invalidate()}async deleteDroneRelation(e){await no("/api/v1/organizations/drone/classification/"+e,null,"DELETE",!0),this.knownDrones.invalidate()}async __fetchKnownDrones(){const e=await Hr("/api/v1/organizations/drone/classification"),t=new Map;return e.forEach(i=>{t.set(i.id,{id:i.id,serialNumber:i.serialNumber,relationship:i.relationship,identifier:i.identifier??null,notes:i.notes??null,expiryStart:i.expiryStart??null,expiryEnd:i.expiryEnd??null})}),t}}const vk=1*60*1e3;class os{constructor(e,t){Ge(this,"geofencesService");Ge(this,"knownDronesService");Ge(this,"__intrusionTracker",new Map);Ge(this,"activeIntrusions",new Ot([]));Ge(this,"stopIntrusionCleanupInterval",null);Ge(this,"subscribers",[]);Ge(this,"wsUnsubscribe",()=>{});this.geofencesService=e,this.knownDronesService=t}static connect(e,t,i){const r=new os(t,i||null);return r.wsUnsubscribe=e.subscribe("p",r.__onIncomingMessage.bind(r),r.__doDisconnect.bind(r)),r.stopIntrusionCleanupInterval=setInterval(()=>{r.__cleanThenNotifyIntrusions()},100),r}onUnmount(){this.stopIntrusionCleanupInterval&&(clearInterval(this.stopIntrusionCleanupInterval),this.stopIntrusionCleanupInterval=null),this.wsUnsubscribe()}__testPointAgainstFence(e,t){if(t.h)return nh({lat:e.geometry.coordinates[1],lng:e.geometry.coordinates[0]},{lat:t.v[0].lat,lng:t.v[0].lng})<=t.h/1e3;{let i=t.v.map(r=>[r.lng,r.lat]);return i.length>0&&(i[0][1]!==i[i.length-1][1]||i[0][0]!==i[i.length-1][0])&&i.push([i[0][0],i[0][1]]),Qf(e,No([i]))}}__checkIntrusion(e){const t=this.geofencesService.geofences.current;if(!t||!e.dc)return!1;const i=Qn([e.dc.lng,e.dc.lat]);for(const r of t.values()){const s=r.startTime&&r.expirationTime?new Date(r.startTime).getTime()<=Date.now()&&new Date(r.expirationTime).getTime()>Date.now():!0;if(r.active&&s&&r.fenceAudiovisual&&this.__isHeightInRange(e.h,r.minHeight,r.maxHeight)&&this.__testPointAgainstFence(i,r.fence)||r.active&&s&&r.bufferOffset&&r.bufferAudiovisual&&this.__isHeightInRange(e.h,r.minHeight,r.maxHeight)&&this.__testPointAgainstFence(i,r.buffer))return ii.settings.fields.geofence_layer_shown.set(!0),!0}return!1}__isHeightInRange(e,t,i){return e===null?!1:(t===void 0&&(t=null),i===void 0&&(i=null),t===null&&i===null?!0:t===null?e<=i:i===null?e>=t:e>=t&&e<=i)}__onIncomingMessage(e){var w;const[[t,i,r,s],o]=lu(e,":",4);if(!o){console.warn("RIDRealTimeGeofencedDroneDataService: Received unparsable packet:",e);return}const a=JSON.parse(s),l=parseInt(i),h=parseInt(t),d=parseInt(r);let m=null;this.knownDronesService&&(m=((w=this.knownDronesService.getByAid(a.aid))==null?void 0:w.relationship)||null);const k=a.id.charAt(0)==="2"||m==an.FRIENDLY||m==an.NEUTRAL?!1:this.__checkIntrusion(a);this.__notifySubscribers(a,l,h,d,k),this.__updateIntrusionTracker(a,k)}__updateIntrusionTracker(e,t){if(!t){this.__intrusionTracker.delete(e.id);return}const i=Date.now(),r=this.__intrusionTracker.get(e.id);r?(r.lastSeen=i,r.lastLocation=e.dc||e.pc||r.lastLocation):(console.log(`db20: New intrusion detected for drone ${e.aid} (${e.id})`),this.__intrusionTracker.set(e.id,{flightId:e.id,aid:e.aid,lastSeen:i,lastLocation:e.dc||e.pc||null}))}__cleanThenNotifyIntrusions(){const e=Date.now();for(const[t,i]of this.__intrusionTracker.entries())e-i.lastSeen>vk&&this.__intrusionTracker.delete(t);this.activeIntrusions.set(this.__intrusionTracker.values().map(t=>({flightId:t.flightId,aid:t.aid,lastLocation:t.lastLocation})).toArray())}__notifySubscribers(e,t,i,r,s){this.subscribers.forEach(o=>{var a,l;o.onUpdate({flightId:e.id,aid:e.aid,dc:((a=e.dc)==null?void 0:a.lat)==0&&((l=e.dc)==null?void 0:l.lng)==0?null:e.dc,yaw:e.yaw,pc:e.pc,h:e.h,sensorID:t,sensorType:i,areaID:r,isIntrusion:s})})}__doDisconnect(){this.subscribers.forEach(e=>{e.onDisconnect()})}subscribe(e,t){const i=new i0(e,t);return this.subscribers.push(i),()=>{const r=this.subscribers.indexOf(i);r===-1&&console.warn("RIDRealTimeGeofencedDroneDataService: Unsubscribing subscriber that was not subscribed"),this.subscribers.splice(r,1)}}}var Gr=(n=>(n.HISTORY="history",n.REAL_TIME="real-time",n))(Gr||{});const bi=new rs(null),za=bc(bi,(n,e)=>{if(n!==null){if(n instanceof os||n instanceof Os){e("real-time");return}e("history")}},"real-time"),Uo=new rs(null),Ks=new rs(null),Jd=new rs(null),Lo=new Ot(null);bi.subscribe(n=>console.debug("APP: service:",n));za.subscribe(n=>console.debug("APP: serviceMode:",n));Uo.subscribe(n=>console.debug("APP: signalService:",n));Ks.subscribe(n=>console.debug("APP: radarService:",n));Lo.subscribe(n=>console.debug("APP: historyPlayerFlight:",n));window.disconnectDroneDataService=()=>{bi.set(null)};window.disconnectSignalDetectionService=()=>{Uo.set(null)};window.disconnectRadarDetectionService=()=>{Ks.set(null)};window.clearHistoryPlayerFlight=()=>{Lo.set(null)};const yk=[{start:"1581F4QW000000000000",end:"1581F4QWZZZZZZZZZZZZ",make:"DJI",model:"AVATA"},{start:"1581F6W8000000000000",end:"1581F6W8ZZZZZZZZZZZZ",make:"DJI",model:"Avata 2"},{start:"1581F37Q000000000000",end:"1581F37QZZZZZZZZZZZZ",make:"DJI",model:"FPV"},{start:"1581F87L000000000000",end:"1581F87LZZZZZZZZZZZZ",make:"DJI",model:"Neo"}];let bk=6e4;const ts="radarmap-pane";function Sf(n,e){let t=e-n;for(;t>180;)t-=360;for(;t<-180;)t+=360;return t}function Qd(n,e,t,i){const r=(i-e)*Math.PI/180,s=n*Math.PI/180,o=t*Math.PI/180,a=Math.sin(r)*Math.cos(o),l=Math.cos(s)*Math.sin(o)-Math.sin(s)*Math.cos(o)*Math.cos(r);return(Math.atan2(a,l)*180/Math.PI+360)%360}function wk(n,e,t=.3){const i=Sf(n,e);return((n+i*t)%360+360)%360}function kk(n,e,t){let i,r,s,o,a=$e,l=()=>(a(),a=Dt(r,Y=>t(13,o=Y)),r),h,d=$e,m=()=>(d(),d=Dt(I,Y=>t(14,h=Y)),I),v;He(n,nn,Y=>t(10,s=Y)),He(n,za,Y=>t(11,v=Y)),n.$$.on_destroy.push(()=>a()),n.$$.on_destroy.push(()=>d());let{map:k}=e,{service:w}=e,{sensorsAreas:E}=e,{iconSet:I}=e;m();let{reactiveDroneRelationService:M}=e,{dontTimeoutTrackers:C=!1}=e,{playbackSpeed:D}=e,O=3*6e4;if(!k.getPane(ts)){k.createPane(ts);const Y=k.getPane(ts);Y&&(Y.style.zIndex="8100")}let P;const F={civ_icons:{droneSize:110,pilotSize:24,applyRotation:!0,opacity:1,rotationOrigin:"50% 83%"},mil_icons:{droneSize:40,pilotSize:32,applyRotation:!1,opacity:.8,rotationOrigin:"center center"}};let V=new Map;function $(Y,q){return Y===an.HOSTILE?q?"hostile_intrusion":"hostile":Y===an.FRIENDLY?q?"friendly_intrusion":"friendly":Y===an.NEUTRAL?q?"neutral_intrusion":"neutral":q?"unknown_intrusion":"unknown"}function G(Y,q,ne,J){var ge,ie,le;if(Y==si.ADSB)return V.has("plane")||V.set("plane",new yi.Icon({iconUrl:"/plane.svg?v=2",iconSize:[30,30],iconAnchor:[30/2,30/2],pane:ts})),{icon:V.get("plane"),url:"/plane.svg?v=2"};if(Y==si.DRID){const pe=h||"civ_icons",ye=((ge=F[pe])==null?void 0:ge.droneSize)||120,be=$(q,ne),re=yk.find(ue=>ue.start<=J&&ue.end>=J),me=`${pe}_${re?"fpv_drone":"drone"}_${be}`,ke=`/icon_sets_251019/${pe}/${re?"fpv_drone":"drone"}/${be}.png`,X="/icon_sets_251019/mil_icons/extra";if(pe==="mil_icons"){if(!V.has(me)){const ue=ye,_e=[ue/2,3*ue/2+5],ae={unknown:5,unknown_intrusion:5,hostile:5,hostile_intrusion:5,friendly:2,friendly_intrusion:2,neutral:2,neutral_intrusion:2}[be]||0,Se=`
                        <div class="mil-drone-icon" style="position: relative; width: ${ue}px; height: ${2.15*ue}px;">
                            <svg class="mil-bearing-svg" viewBox="0 0 100 215" style="position: absolute; inset: 0; pointer-events: none; overflow: visible;">
                                <image href="${X}/leg.svg" x="${ue}" y="${2*ue+ae}" width="18" height="60" />
                                <g class="mil-bearing-rot" style="transform-origin: center ${2*ue+60+ae}px;">
                                    <image href="${X}/arrow.svg" x="${ue-12}" y="${2*ue+60+ae}" width="46" height="50" />
                                </g>
                                 <image href="${X}/dot.svg" x="${ue}" y="${2*ue+50+ae}" width="18" height="18" /> // dot last so it's on top
                            </svg>
                            <img class="mil-drone-img" src="${ke}" style="position: absolute; inset: 0; width: ${ue}px; height: ${ue}px; image-rendering: auto;"/>
                        </div>
                    `;V.set(me,new yi.DivIcon({html:Se,className:"",iconSize:[ue,ue],iconAnchor:_e,pane:ts}))}return{icon:V.get(me),url:ke,rotationOrigin:((ie=F[pe])==null?void 0:ie.rotationOrigin)||"center center"}}return V.has(me)||V.set(me,new yi.Icon({iconUrl:ke,iconSize:h==="civ_icons"?[ye*(re?.9:.85),ye]:[ye,ye],iconAnchor:h==="civ_icons"?[ye*(re?.9:.85)/2,ye/5*4]:[ye/2,ye/2],pane:ts})),{icon:V.get(me),url:ke,rotationOrigin:((le=F[pe])==null?void 0:le.rotationOrigin)||"center center"}}throw"Unkown sensor type: "+Y}function U(Y,q){var pe;const ne=h||"civ_icons",J=((pe=F[ne])==null?void 0:pe.pilotSize)||24,ge=$(Y,q),ie=`${ne}_pilot_${ge}`,le=`/icon_sets_251019/${ne}/pilot/${ge}.png`;return V.has(ie)||V.set(ie,new yi.Icon({iconUrl:le,iconSize:[J,J],iconAnchor:[J/2,J/2],pane:ts})),{icon:V.get(ie),url:le}}function H(Y,q,ne,J){const ge=new yi.LatLng(Y,q),ie=new yi.LatLng(ne,J);return ge.distanceTo(ie)}class j{constructor(q,ne){Ge(this,"selected",!1);Ge(this,"active",!0);Ge(this,"droneMarker",null);Ge(this,"pilotMarker",null);Ge(this,"connector",null);Ge(this,"sensorConnector",null);Ge(this,"trail",null);Ge(this,"lastUpdate",Date.now());Ge(this,"sensorType");Ge(this,"aid");Ge(this,"relationship",null);Ge(this,"isIntrusion",!1);Ge(this,"currentDroneIconUrl","");Ge(this,"currentPilotIconUrl","");Ge(this,"lastYaw",null);Ge(this,"positionHistory",[]);Ge(this,"lastSmoothedYaw",null);Ge(this,"lastValidYaw",null);Ge(this,"consecutiveBadReadings",0);Ge(this,"consecutiveGoodReadings",0);Ge(this,"lastPosition",null);Ge(this,"MAX_YAW_CHANGE",20);Ge(this,"SMOOTHING_FACTOR",.75);Ge(this,"CORRECTION_FACTOR",.8);Ge(this,"MAX_BAD_READINGS",5);Ge(this,"MIN_GOOD_READINGS_FOR_CORRECTION",2);Ge(this,"MAX_POSITION_JUMP",1e3);if(this.sensorType=q,this.aid=ne,q===si.DRID){const[J,ge]=M.subscribeToRelationship(ne);this.relationshipUnsubscriber=ge,J.subscribe(ie=>{const le=(ie==null?void 0:ie.relationship)||null;this.relationship!==le&&(this.relationship=le,this.updateIcons())})}}setSelected(q){this.__updateOpacities(),this.selected!=q&&(this.selected=q,this.__updateOpacities())}setActive(q){this.__updateOpacities(),this.active!=q&&(this.active=q,this.__updateOpacities())}__updateOpacities(){var ne,J,ge,ie,le,pe;let q;P?q=this.active?this.selected?1:.5:.3:q=this.active?1:.3,q*=((ne=F[h||"civ_icons"])==null?void 0:ne.opacity)??1,(J=this.droneMarker)==null||J.setOpacity(q),(ge=this.pilotMarker)==null||ge.setOpacity(q),(ie=this.connector)==null||ie.setStyle({opacity:q,weight:2}),(le=this.sensorConnector)==null||le.setStyle({opacity:q/2}),(pe=this.trail)==null||pe.setStyle({opacity:q}),this.trail&&this.sensorType===si.ADSB&&(this.selected||!i?k.hasLayer(this.trail)||this.trail.addTo(k):k.hasLayer(this.trail)&&this.trail.remove())}updateVisibility(){var ne,J,ge,ie,le,pe,ye,be,re,me,ke,X,ue;const q=this.sensorType!==si.ADSB||ii.settings.fields.manned_aircrafts_layer_shown.current;q&&((ne=this.droneMarker)==null||ne.addTo(k)),this.sensorType===si.ADSB?(J=this.droneMarker)==null||J.setZIndexOffset(8100):(ge=this.droneMarker)==null||ge.setZIndexOffset(8250),q&&((ie=this.pilotMarker)==null||ie.addTo(k)),(le=this.pilotMarker)==null||le.setZIndexOffset(8200),q&&((pe=this.connector)==null||pe.addTo(k)),q&&this.sensorType!==si.ADSB&&ii.settings.fields.sensors_layer_shown.current&&((ye=this.sensorConnector)==null||ye.addTo(k)),q&&this.sensorType!==si.ADSB&&((be=this.trail)==null||be.addTo(k)),q||(re=this.droneMarker)==null||re.remove(),q||(me=this.pilotMarker)==null||me.remove(),q||(ke=this.connector)==null||ke.remove(),(!q||!ii.settings.fields.sensors_layer_shown.current)&&((X=this.sensorConnector)==null||X.remove()),q||(ue=this.trail)==null||ue.remove()}updateIcons(){this.updateDroneIcon(),this.updatePilotIcon(),this.__updateOpacities()}updateDroneIcon(){if(!this.droneMarker)return;const{icon:q,url:ne,rotationOrigin:J}=G(this.sensorType,this.relationship,this.isIntrusion,this.aid);this.currentDroneIconUrl!==ne&&(this.droneMarker.setIcon(q),this.droneMarker.setRotationOrigin(J||"center center"),this.sensorType===si.ADSB?this.droneMarker.setZIndexOffset(8100):this.droneMarker.setZIndexOffset(8250),this.currentDroneIconUrl=ne),this.__updateOpacities()}updatePilotIcon(){if(!this.pilotMarker)return;const{icon:q,url:ne}=U(this.relationship,this.isIntrusion);this.currentPilotIconUrl!==ne&&(this.pilotMarker.setIcon(q),this.pilotMarker.setZIndexOffset(8200),this.currentPilotIconUrl=ne),this.__updateOpacities()}estimateYawFromMovement(q,ne){const J=Date.now();if(this.positionHistory.push({lat:q,lng:ne,timestamp:J}),this.positionHistory=this.positionHistory.filter(le=>J-le.timestamp<3e4).slice(-5),this.positionHistory.length<2)return null;const ge=this.positionHistory[this.positionHistory.length-1],ie=this.positionHistory[this.positionHistory.length-2];return Qd(ie.lat,ie.lng,ge.lat,ge.lng)}isYawChangeReasonable(q,ne){return ne===null?!0:Math.abs(Sf(ne,q))<=this.MAX_YAW_CHANGE}resetYawEstimation(){this.lastSmoothedYaw=null,this.lastValidYaw=null,this.consecutiveBadReadings=0,this.consecutiveGoodReadings=0,this.positionHistory=[]}updateYawEstimate(q,ne,J){this.lastPosition!==null&&H(this.lastPosition.lat,this.lastPosition.lng,ne,J)>this.MAX_POSITION_JUMP&&this.resetYawEstimation(),this.lastPosition={lat:ne,lng:J};const ge=this.estimateYawFromMovement(ne,J);let ie=null,le=!1,pe=!1;if(q!=null&&(this.lastValidYaw===null||this.isYawChangeReasonable(q,this.lastValidYaw)?(ie=q,le=!0,pe=!0,this.consecutiveBadReadings=0,this.consecutiveGoodReadings++):(this.consecutiveBadReadings++,this.consecutiveGoodReadings=0,this.consecutiveBadReadings>=this.MAX_BAD_READINGS&&(ie=q,le=!0,this.consecutiveBadReadings=0))),!le&&ge!==null&&(this.lastValidYaw===null||this.isYawChangeReasonable(ge,this.lastValidYaw)?(ie=ge,pe=!0,this.consecutiveGoodReadings++):this.consecutiveGoodReadings=0),ie===null)return this.lastSmoothedYaw;if(this.lastSmoothedYaw===null)return this.lastSmoothedYaw=ie,this.lastValidYaw=ie,ie;let ye=wk(this.lastSmoothedYaw,ie,this.SMOOTHING_FACTOR);if(pe&&this.consecutiveGoodReadings>=this.MIN_GOOD_READINGS_FOR_CORRECTION){const be=ie,re=Sf(this.lastSmoothedYaw,be);if(Math.abs(re)>5){const me=re*this.CORRECTION_FACTOR;ye=this.lastSmoothedYaw+me,ye=(ye%360+360)%360}}return this.lastSmoothedYaw=ye,this.lastValidYaw=ie,ye}updateRotation(){var J,ge;if(!this.droneMarker)return;const q=h||"civ_icons";if((this.sensorType===si.ADSB||(((J=F[q])==null?void 0:J.applyRotation)??!0))&&this.lastYaw!==null?this.droneMarker.setRotationAngle(this.lastYaw):this.droneMarker.setRotationAngle(0),q==="mil_icons"&&this.lastYaw!==null){const ie=(ge=this.droneMarker.getElement())==null?void 0:ge.querySelector(".mil-bearing-rot");ie&&ie.setAttribute("transform",`rotate(${(this.lastYaw+180)%360})`)}this.__updateOpacities()}removeFromMap(){var q,ne,J,ge,ie;(q=this.droneMarker)==null||q.remove(),(ne=this.pilotMarker)==null||ne.remove(),(J=this.connector)==null||J.remove(),(ge=this.sensorConnector)==null||ge.remove(),(ie=this.trail)==null||ie.remove()}}const Q=new Map;function W(Y){const q=Q.get(Y);q!=null&&(q.droneMarker!=null&&k.panTo(q.droneMarker.getLatLng(),{animate:!0}),q.pilotMarker!=null&&k.panTo(q.pilotMarker.getLatLng(),{animate:!0}))}return mi(()=>{let Y=null,q;function ne(){for(const[_e,oe]of Q)oe.updateVisibility()}const J=ii.settings.fields.sensors_layer_shown.subscribe(ne),ge=ii.settings.fields.manned_aircrafts_layer_shown.subscribe(ne);q=I.subscribe(()=>{V.clear();for(const[_e,oe]of Q)oe.updateIcons(),oe.updateRotation()});function ie(_e,oe){Y!=null&&Y.setSelected(!1),nn.goto({type:Tt.AircraftView,aid:oe});const ae=Q.get(oe);ae!=null&&(Y=ae)}function le(_e,oe){var Me,we,Te,Ae;if(!((Me=oe==null?void 0:oe.dc)!=null&&Me.lat)||!((we=oe==null?void 0:oe.dc)!=null&&we.lng)||((Te=oe==null?void 0:oe.dc)==null?void 0:Te.lat)==0&&((Ae=oe==null?void 0:oe.dc)==null?void 0:Ae.lng)==0||Math.abs(oe.dc.lat)<1&&Math.abs(oe.dc.lng)<1)return;let ae=oe.yaw;if(_e.sensorType==si.ADSB){if(oe.dc!==null&&_e.droneMarker!==null){const Ne=_e.droneMarker.getLatLng();ae=Qd(Ne.lat,Ne.lng,oe.dc.lat,oe.dc.lng)}if(_e.droneMarker){const Ne=_e.droneMarker.getLatLng(),De={lat:oe.dc.lat,lng:oe.dc.lng},_t=[Ne.lng,Ne.lat],Fe=[De.lng,De.lat],Pe=jy(_t,Fe,{units:"kilometers"})*1e3,je=Date.now(),Ve=Math.max((je-_e.lastUpdate)/1e3,.001)*(D&&D.current||1),Ke=4500*1e3/3600*Ve;if(Pe>Ke)return}}if(_e.lastYaw=_e.updateYawEstimate(ae,oe.dc.lat,oe.dc.lng),_e.isIntrusion=oe.isIntrusion||!1,_e.droneMarker==null){const{icon:Ne,url:De,rotationOrigin:_t}=G(_e.sensorType,_e.relationship,_e.isIntrusion,_e.aid),Fe=new yi.Marker([oe.dc.lat,oe.dc.lng],{icon:Ne,rotationOrigin:_t,pane:ts});Fe.on("click",()=>ie(Fe,oe.aid)),Fe.addTo(k),_e.droneMarker=Fe,_e.currentDroneIconUrl=De,_e.updateVisibility()}else _e.updateDroneIcon();_e.droneMarker.setLatLng([oe.dc.lat,oe.dc.lng]),_e.updateRotation(),_e.trail==null&&(_e.trail=new yi.Polyline([],{color:"#246",pane:ts}),_e.trail.addTo(k),_e.updateVisibility()),_e.sensorType==si.ADSB&&_e.trail.setStyle({color:"#2466",weight:2}),_e.trail.addLatLng([oe.dc.lat,oe.dc.lng]),_e.lastUpdate=Date.now()}function pe(_e,oe){var Se,Me,we,Te;if(!((Se=oe==null?void 0:oe.pc)!=null&&Se.lat)||!((Me=oe==null?void 0:oe.pc)!=null&&Me.lng)||((we=oe==null?void 0:oe.pc)==null?void 0:we.lat)==0&&((Te=oe==null?void 0:oe.pc)==null?void 0:Te.lng)==0||Math.abs(oe.pc.lat)<1&&Math.abs(oe.pc.lng)<1)return;if(_e.pilotMarker==null){const{icon:Ae,url:Ne}=U(_e.relationship,_e.isIntrusion),De=new yi.Marker([oe.pc.lat,oe.pc.lng],{icon:Ae,pane:ts});De.on("click",()=>ie(De,oe.aid)),De.addTo(k),_e.pilotMarker=De,_e.currentPilotIconUrl=Ne,_e.updateVisibility()}else _e.updatePilotIcon();_e.pilotMarker.setLatLng([oe.pc.lat,oe.pc.lng]),_e.lastUpdate=Date.now()}function ye(_e){const oe=_e.droneMarker,ae=_e.pilotMarker;if(_e.connector==null)if(oe!=null&&ae!=null){const Se=new yi.Polyline([oe.getLatLng(),ae.getLatLng()],{color:"#822",weight:1,dashArray:[12,4],pane:ts});Se.addTo(k),_e.connector=Se,_e.updateVisibility()}else return;oe!=null&&ae!=null?_e.connector.setLatLngs([oe.getLatLng(),ae.getLatLng()]):(_e.connector.remove(),_e.connector=null)}function be(_e,oe){var Me,we,Te;if(_e.sensorType==si.ADSB)return;if((oe==null?void 0:oe.sensorID)==null){_e.sensorConnector!=null&&(_e.sensorConnector.remove(),_e.sensorConnector=null);return}const ae=o==null?void 0:o.get(oe.sensorID);if(ae==null||!ae.location||!_e.droneMarker)return;const Se=new yi.LatLng((Me=ae.location)==null?void 0:Me.lat,(we=ae.location)==null?void 0:we.lng);if(_e.sensorConnector==null&&_e.droneMarker!=null){const Ae=new yi.Polyline([Se,(Te=_e.droneMarker)==null?void 0:Te.getLatLng()],{color:"#000",weight:1,dashArray:[28,4],pane:ts});Ae.addTo(k),_e.sensorConnector=Ae,_e.updateVisibility()}_e.sensorConnector&&_e.sensorConnector.setLatLngs([Se,_e.droneMarker.getLatLng()])}function re(_e){let oe=Q.get(_e.aid);if(oe==null){oe=new j(_e.sensorType,_e.aid),Q.set(_e.aid,oe);const ae=P&&(s==null?void 0:s.type)===Tt.AircraftView&&s.aid===_e.aid;oe.setSelected(ae)}pe(oe,_e),le(oe,_e),ye(oe),be(oe,_e),oe.__updateOpacities()}function me(){for(const[_e,oe]of Q)oe.removeFromMap();Q.clear()}function ke(){const _e=Date.now();for(const[oe,ae]of Q)_e-ae.lastUpdate<bk?ae.setActive(!0):_e-ae.lastUpdate<O?ae.setActive(!1):(ae.removeFromMap(),Q.delete(oe))}const X=w.subscribe(re,me),ue=C?0:setInterval(ke,500);return()=>{Q.forEach(_e=>_e.removeFromMap()),X(),C||clearInterval(ue),q(),J(),ge()}}),n.$$set=Y=>{"map"in Y&&t(2,k=Y.map),"service"in Y&&t(3,w=Y.service),"sensorsAreas"in Y&&t(4,E=Y.sensorsAreas),"iconSet"in Y&&m(t(0,I=Y.iconSet)),"reactiveDroneRelationService"in Y&&t(5,M=Y.reactiveDroneRelationService),"dontTimeoutTrackers"in Y&&t(6,C=Y.dontTimeoutTrackers),"playbackSpeed"in Y&&t(7,D=Y.playbackSpeed)},n.$$.update=()=>{if(n.$$.dirty&2048&&(i=v===Gr.REAL_TIME),n.$$.dirty&1024&&t(9,P=(s==null?void 0:s.type)===Tt.AircraftView),n.$$.dirty&16&&l(t(1,r=E.sensors)),n.$$.dirty&1536){let Y;P&&(s==null?void 0:s.type)===Tt.AircraftView&&(Y=Q.get(s.aid));for(const[q,ne]of Q)ne.setSelected(ne===Y)}},[I,r,k,w,E,M,C,D,W,P,s,v]}class Ek extends Wt{constructor(e){super(),Xt(this,e,kk,null,zt,{map:2,service:3,sensorsAreas:4,iconSet:0,reactiveDroneRelationService:5,dontTimeoutTrackers:6,playbackSpeed:7,panToDrone:8})}get panToDrone(){return this.$$.ctx[8]}}function Sk(n){let e,t;const i=n[1].default,r=Jl(i,n,n[0],null);return{c(){e=A("div"),r&&r.c(),this.h()},l(s){e=R(s,"DIV",{id:!0,class:!0,style:!0});var o=T(e);r&&r.l(o),o.forEach(_),this.h()},h(){g(e,"id","settings"),g(e,"class","row g16 p16 svelte-gil1a9"),B(e,"flex-direction","row-reverse")},m(s,o){Z(s,e,o),r&&r.m(e,null),t=!0},p(s,[o]){r&&r.p&&(!t||o&1)&&Ql(r,i,s,s[0],t?tu(i,s[0],o,null):eu(s[0]),null)},i(s){t||(de(r,s),t=!0)},o(s){Ie(r,s),t=!1},d(s){s&&_(e),r&&r.d(s)}}}function Ik(n,e,t){let{$$slots:i={},$$scope:r}=e;return n.$$set=s=>{"$$scope"in s&&t(0,r=s.$$scope)},[r,i]}class Mk extends Wt{constructor(e){super(),Xt(this,e,Ik,Sk,zt,{})}}function e1(n,e,t){const i=n.slice();return i[3]=e[t],i}function t1(n){let e,t=n[3].toUpperCase()+"",i,r;return{c(){e=A("option"),i=he(t),this.h()},l(s){e=R(s,"OPTION",{style:!0});var o=T(e);i=fe(o,t),o.forEach(_),this.h()},h(){B(e,"background","initial"),B(e,"color","initial"),e.__value=r=n[3],fi(e,e.__value)},m(s,o){Z(s,e,o),p(e,i)},p(s,o){o&2&&t!==(t=s[3].toUpperCase()+"")&&Ee(i,t),o&2&&r!==(r=s[3])&&(e.__value=r,fi(e,e.__value))},d(s){s&&_(e)}}}function Tk(n){let e,t,i,r=Bt(n[1]),s=[];for(let o=0;o<r.length;o+=1)s[o]=t1(e1(n,r,o));return{c(){e=A("select");for(let o=0;o<s.length;o+=1)s[o].c();this.h()},l(o){e=R(o,"SELECT",{class:!0});var a=T(e);for(let l=0;l<s.length;l+=1)s[l].l(a);a.forEach(_),this.h()},h(){g(e,"class","glass-button"),n[0]===void 0&&Wc(()=>n[2].call(e))},m(o,a){Z(o,e,a);for(let l=0;l<s.length;l+=1)s[l]&&s[l].m(e,null);Cs(e,n[0],!0),t||(i=nt(e,"change",n[2]),t=!0)},p(o,[a]){if(a&2){r=Bt(o[1]);let l;for(l=0;l<r.length;l+=1){const h=e1(o,r,l);s[l]?s[l].p(h,a):(s[l]=t1(h),s[l].c(),s[l].m(e,null))}for(;l<s.length;l+=1)s[l].d(1);s.length=r.length}a&3&&Cs(e,o[0])},i:$e,o:$e,d(o){o&&_(e),ui(s,o),t=!1,i()}}}function Lk(n,e,t){let i,r;He(n,So,o=>t(0,i=o)),He(n,B4,o=>t(1,r=o));function s(){i=Ev(this),So.set(i)}return[i,r,s]}class Ck extends Wt{constructor(e){super(),Xt(this,e,Lk,Tk,zt,{})}}function Pk(n){let e,t,i=n[0].profile.firstName+"",r,s,o,a,l,h,d,m,v,k;return{c(){e=A("button"),t=A("div"),r=he(i),s=ee(),o=Re("svg"),a=Re("g"),l=Re("g"),h=Re("g"),d=Re("path"),m=Re("path"),this.h()},l(w){e=R(w,"BUTTON",{class:!0});var E=T(e);t=R(E,"DIV",{class:!0});var I=T(t);r=fe(I,i),s=te(I),o=Oe(I,"svg",{style:!0,xmlns:!0,width:!0,height:!0,viewBox:!0,fill:!0,stroke:!0});var M=T(o);a=Oe(M,"g",{id:!0,"stroke-width":!0}),T(a).forEach(_),l=Oe(M,"g",{id:!0,"stroke-linecap":!0,"stroke-linejoin":!0}),T(l).forEach(_),h=Oe(M,"g",{id:!0});var C=T(h);d=Oe(C,"path",{d:!0,stroke:!0,"stroke-width":!0}),T(d).forEach(_),m=Oe(C,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0}),T(m).forEach(_),C.forEach(_),M.forEach(_),I.forEach(_),E.forEach(_),this.h()},h(){g(a,"id","SVGRepo_bgCarrier"),g(a,"stroke-width","0"),g(l,"id","SVGRepo_tracerCarrier"),g(l,"stroke-linecap","round"),g(l,"stroke-linejoin","round"),g(d,"d","M17 8C17 10.7614 14.7614 13 12 13C9.23858 13 7 10.7614 7 8C7 5.23858 9.23858 3 12 3C14.7614 3 17 5.23858 17 8Z"),g(d,"stroke","#fff"),g(d,"stroke-width","2"),g(m,"d","M3 21C3.95728 17.9237 6.41998 17 12 17C17.58 17 20.0427 17.9237 21 21"),g(m,"stroke","#fff"),g(m,"stroke-width","2"),g(m,"stroke-linecap","round"),g(h,"id","SVGRepo_iconCarrier"),B(o,"width","12px"),B(o,"height","12px"),g(o,"xmlns","http://www.w3.org/2000/svg"),g(o,"width","800px"),g(o,"height","800px"),g(o,"viewBox","0 0 24 24"),g(o,"fill","none"),g(o,"stroke","#fff"),g(t,"class","row center-cross g8"),g(e,"class","glass-button")},m(w,E){Z(w,e,E),p(e,t),p(t,r),p(t,s),p(t,o),p(o,a),p(o,l),p(o,h),p(h,d),p(h,m),v||(k=nt(e,"click",n[4]),v=!0)},p(w,E){E&1&&i!==(i=w[0].profile.firstName+"")&&Ee(r,i)},d(w){w&&_(e),v=!1,k()}}}function Nk(n){let e,t=n[1]("ui.logIn")+"",i,r,s;return{c(){e=A("button"),i=he(t),this.h()},l(o){e=R(o,"BUTTON",{class:!0});var a=T(e);i=fe(a,t),a.forEach(_),this.h()},h(){g(e,"class","glass-button clickable")},m(o,a){Z(o,e,a),p(e,i),r||(s=nt(e,"click",n[3]),r=!0)},p(o,a){a&2&&t!==(t=o[1]("ui.logIn")+"")&&Ee(i,t)},d(o){o&&_(e),r=!1,s()}}}function Dk(n){let e;function t(s,o){return s[0]===null?Nk:Pk}let i=t(n),r=i(n);return{c(){r.c(),e=dt()},l(s){r.l(s),e=dt()},m(s,o){r.m(s,o),Z(s,e,o)},p(s,[o]){i===(i=t(s))&&r?r.p(s,o):(r.d(1),r=i(s),r&&(r.c(),r.m(e.parentNode,e)))},i:$e,o:$e,d(s){s&&_(e),r.d(s)}}}function Ak(n,e,t){let i,r;He(n,Li,l=>t(0,i=l)),He(n,Nn,l=>t(1,r=l));function s(){nn.goto({type:Tt.Account,page:"details"})}return[i,r,s,()=>q4("/login"),()=>s()]}class Rk extends Wt{constructor(e){super(),Xt(this,e,Ak,Dk,zt,{})}}function Ok(n){let e,t,i,r;return e=new Ck({}),i=new Rk({}),{c(){st(e.$$.fragment),t=ee(),st(i.$$.fragment)},l(s){ot(e.$$.fragment,s),t=te(s),ot(i.$$.fragment,s)},m(s,o){at(e,s,o),Z(s,t,o),at(i,s,o),r=!0},i(s){r||(de(e.$$.fragment,s),de(i.$$.fragment,s),r=!0)},o(s){Ie(e.$$.fragment,s),Ie(i.$$.fragment,s),r=!1},d(s){s&&_(t),lt(e,s),lt(i,s)}}}function n1(n){let e,t,i,r,s,o=n[10]("ui."+(n[9]?"live":"stop"))+"",a,l,h;return{c(){e=A("button"),t=Re("svg"),i=Re("circle"),r=ee(),s=A("b"),a=he(o),this.h()},l(d){e=R(d,"BUTTON",{class:!0,style:!0});var m=T(e);t=Oe(m,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var v=T(t);i=Oe(v,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),T(i).forEach(_),v.forEach(_),r=te(m),s=R(m,"B",{style:!0,class:!0});var k=T(s);a=fe(k,o),k.forEach(_),m.forEach(_),this.h()},h(){g(i,"cx","8"),g(i,"cy","8"),g(i,"r","8"),g(i,"fill","currentColor"),g(t,"width","12"),g(t,"height","12"),g(t,"viewBox","0 0 16 16"),g(t,"fill","none"),g(t,"xmlns","http://www.w3.org/2000/svg"),B(s,"margin-bottom","2px"),g(s,"class","svelte-1k7hv3c"),g(e,"class","row center-cross g8 live-indicator svelte-1k7hv3c"),B(e,"border-color",n[9]?"#dd4444":"#aaaa"),B(e,"color",n[9]?"#ff2222":"#aaaa"),B(e,"background-color",n[9]?"#f002":"#fff2")},m(d,m){Z(d,e,m),p(e,t),p(t,i),p(e,r),p(e,s),p(s,a),l||(h=nt(e,"click",function(){Eo(n[9]?f1:h1)&&(n[9]?f1:h1).apply(this,arguments)}),l=!0)},p(d,m){n=d,m&1536&&o!==(o=n[10]("ui."+(n[9]?"live":"stop"))+"")&&Ee(a,o),m&512&&B(e,"border-color",n[9]?"#dd4444":"#aaaa"),m&512&&B(e,"color",n[9]?"#ff2222":"#aaaa"),m&512&&B(e,"background-color",n[9]?"#f002":"#fff2")},d(d){d&&_(e),l=!1,h()}}}function i1(n){let e,t,i,r,s,o,a,l,h,d,m=n[1]&&r1(n),v=n[3]&&s1(n),k=n[2]&&o1(n),w=n[6]&&a1(n),E=n[5]&&l1(n),I=n[4]&&u1(n),M=n[8]&&c1(n);return{c(){e=A("div"),m&&m.c(),t=ee(),v&&v.c(),i=ee(),k&&k.c(),r=ee(),w&&w.c(),s=ee(),E&&E.c(),o=ee(),I&&I.c(),a=ee(),l=A("div"),h=ee(),M&&M.c(),this.h()},l(C){e=R(C,"DIV",{class:!0,style:!0});var D=T(e);m&&m.l(D),t=te(D),v&&v.l(D),i=te(D),k&&k.l(D),r=te(D),w&&w.l(D),s=te(D),E&&E.l(D),o=te(D),I&&I.l(D),a=te(D),l=R(D,"DIV",{style:!0,class:!0}),T(l).forEach(_),h=te(D),M&&M.l(D),D.forEach(_),this.h()},h(){B(l,"height","40px"),g(l,"class","grow"),g(e,"class","panel row center-cross dont-shrink"),B(e,"height","40px")},m(C,D){Z(C,e,D),m&&m.m(e,null),p(e,t),v&&v.m(e,null),p(e,i),k&&k.m(e,null),p(e,r),w&&w.m(e,null),p(e,s),E&&E.m(e,null),p(e,o),I&&I.m(e,null),p(e,a),p(e,l),p(e,h),M&&M.m(e,null),d=!0},p(C,D){C[1]?m?(m.p(C,D),D&2&&de(m,1)):(m=r1(C),m.c(),de(m,1),m.m(e,t)):m&&(bt(),Ie(m,1,1,()=>{m=null}),wt()),C[3]?v?(v.p(C,D),D&8&&de(v,1)):(v=s1(C),v.c(),de(v,1),v.m(e,i)):v&&(bt(),Ie(v,1,1,()=>{v=null}),wt()),C[2]?k?(k.p(C,D),D&4&&de(k,1)):(k=o1(C),k.c(),de(k,1),k.m(e,r)):k&&(bt(),Ie(k,1,1,()=>{k=null}),wt()),C[6]?w?(w.p(C,D),D&64&&de(w,1)):(w=a1(C),w.c(),de(w,1),w.m(e,s)):w&&(bt(),Ie(w,1,1,()=>{w=null}),wt()),C[5]?E?(E.p(C,D),D&32&&de(E,1)):(E=l1(C),E.c(),de(E,1),E.m(e,o)):E&&(bt(),Ie(E,1,1,()=>{E=null}),wt()),C[4]?I?(I.p(C,D),D&16&&de(I,1)):(I=u1(C),I.c(),de(I,1),I.m(e,a)):I&&(bt(),Ie(I,1,1,()=>{I=null}),wt()),C[8]?M?(M.p(C,D),D&256&&de(M,1)):(M=c1(C),M.c(),de(M,1),M.m(e,null)):M&&(bt(),Ie(M,1,1,()=>{M=null}),wt())},i(C){d||(de(m),de(v),de(k),de(w),de(E),de(I),de(M),d=!0)},o(C){Ie(m),Ie(v),Ie(k),Ie(w),Ie(E),Ie(I),Ie(M),d=!1},d(C){C&&_(e),m&&m.d(),v&&v.d(),k&&k.d(),w&&w.d(),E&&E.d(),I&&I.d(),M&&M.d()}}}function r1(n){let e,t,i,r;return e=new fn({props:{class:"row center-cross p816 hoverable clickable",onclick:n[13],styleInner:"height: 40px; gap: 12px;",$$slots:{default:[xk]},$$scope:{ctx:n}}}),{c(){st(e.$$.fragment),t=ee(),i=A("div"),this.h()},l(s){ot(e.$$.fragment,s),t=te(s),i=R(s,"DIV",{style:!0,class:!0}),T(i).forEach(_),this.h()},h(){B(i,"height","40px"),g(i,"class","vr")},m(s,o){at(e,s,o),Z(s,t,o),Z(s,i,o),r=!0},p(s,o){const a={};o&134218752&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){r||(de(e.$$.fragment,s),r=!0)},o(s){Ie(e.$$.fragment,s),r=!1},d(s){s&&(_(t),_(i)),lt(e,s)}}}function xk(n){let e,t,i,r,s,o,a,l,h,d,m=n[10]("ui.radar")+"",v;return{c(){e=Re("svg"),t=Re("g"),i=Re("path"),r=Re("path"),s=Re("circle"),o=Re("defs"),a=Re("clipPath"),l=Re("rect"),h=ee(),d=A("p"),v=he(m),this.h()},l(k){e=Oe(k,"svg",{style:!0,class:!0,xmlns:!0,width:!0,height:!0,viewBox:!0});var w=T(e);t=Oe(w,"g",{"clip-path":!0});var E=T(t);i=Oe(E,"path",{"fill-rule":!0,"clip-rule":!0,d:!0,fill:!0}),T(i).forEach(_),r=Oe(E,"path",{"fill-rule":!0,"clip-rule":!0,d:!0,fill:!0}),T(r).forEach(_),s=Oe(E,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),T(s).forEach(_),E.forEach(_),o=Oe(w,"defs",{});var I=T(o);a=Oe(I,"clipPath",{id:!0});var M=T(a);l=Oe(M,"rect",{width:!0,height:!0,fill:!0}),T(l).forEach(_),M.forEach(_),I.forEach(_),w.forEach(_),h=te(k),d=R(k,"P",{class:!0,style:!0});var C=T(d);v=fe(C,m),C.forEach(_),this.h()},h(){g(i,"fill-rule","evenodd"),g(i,"clip-rule","evenodd"),g(i,"d","M30 60C46.5685 60 60 46.5685 60 30C60 13.4315 46.5685 0 30 0C13.4315 0 0 13.4315 0 30C0 46.5685 13.4315 60 30 60ZM30 56.25C44.4975 56.25 56.25 44.4975 56.25 30C56.25 15.5025 44.4975 3.75 30 3.75C15.5025 3.75 3.75 15.5025 3.75 30C3.75 44.4975 15.5025 56.25 30 56.25Z"),g(i,"fill","currentColor"),g(r,"fill-rule","evenodd"),g(r,"clip-rule","evenodd"),g(r,"d","M29.8826 60C19.0086 59.9583 9.4989 54.1314 4.27125 45.4372L30 30V60H29.8826Z"),g(r,"fill","currentColor"),g(s,"cx","30"),g(s,"cy","31"),g(s,"r","4"),g(s,"fill","currentColor"),g(t,"clip-path","url(#clip0_969_181)"),g(l,"width","60"),g(l,"height","60"),g(l,"fill","currentColor"),g(a,"id","clip0_969_181"),B(e,"margin-inline","0"),g(e,"class","shortcut clickable svelte-1k7hv3c"),g(e,"xmlns","http://www.w3.org/2000/svg"),g(e,"width","60"),g(e,"height","60"),g(e,"viewBox","0 0 60 60"),g(d,"class","radar-title svelte-1k7hv3c"),B(d,"font-size","13px"),B(d,"font-weight","600"),B(d,"text-transform","uppercase")},m(k,w){Z(k,e,w),p(e,t),p(t,i),p(t,r),p(t,s),p(e,o),p(o,a),p(a,l),Z(k,h,w),Z(k,d,w),p(d,v)},p(k,w){w&1024&&m!==(m=k[10]("ui.radar")+"")&&Ee(v,m)},d(k){k&&(_(e),_(h),_(d))}}}function s1(n){let e,t,i,r;return e=new fn({props:{onclick:n[15],class:"row center-cross",$$slots:{default:[Fk]},$$scope:{ctx:n}}}),{c(){st(e.$$.fragment),t=ee(),i=A("div"),this.h()},l(s){ot(e.$$.fragment,s),t=te(s),i=R(s,"DIV",{style:!0,class:!0}),T(i).forEach(_),this.h()},h(){B(i,"height","40px"),g(i,"class","vr")},m(s,o){at(e,s,o),Z(s,t,o),Z(s,i,o),r=!0},p(s,o){const a={};o&134217728&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){r||(de(e.$$.fragment,s),r=!0)},o(s){Ie(e.$$.fragment,s),r=!1},d(s){s&&(_(t),_(i)),lt(e,s)}}}function Fk(n){let e,t='<svg class="shortcut svelte-1k7hv3c" xmlns="http://www.w3.org/2000/svg" viewBox="6 6 52 52"><path d="M32,56c-0.293,0-0.585-0.064-0.856-0.192C30.321,55.418,12,46.112,12,32.75V15	c0-1.008,0.751-1.859,1.752-1.984c0.116-0.015,10.747-1.501,17.354-4.805c0.563-0.281,1.227-0.281,1.789,0	c6.606,3.304,17.237,4.79,17.354,4.805C51.249,13.141,52,13.992,52,15v17.75c0,13.362-18.321,22.668-19.144,23.058	C32.585,55.936,32.293,56,32,56z M16,16.735V32.75c0,9.467,12.437,17.14,15.999,19.008C35.561,49.886,48,42.197,48,32.75V16.735	c-3.479-0.536-10.36-1.956-16-4.52C26.36,14.779,19.479,16.199,16,16.735z"></path></svg>';return{c(){e=A("div"),e.innerHTML=t,this.h()},l(i){e=R(i,"DIV",{class:!0,style:!0,"data-svelte-h":!0}),rn(e)!=="svelte-1l6tb4l"&&(e.innerHTML=t),this.h()},h(){g(e,"class","p8 hoverable clickable"),B(e,"height","40px")},m(i,r){Z(i,e,r)},p:$e,d(i){i&&_(e)}}}function o1(n){let e,t,i,r;return e=new fn({props:{onclick:n[14],style:"height: 40px;",$$slots:{default:[Bk]},$$scope:{ctx:n}}}),{c(){st(e.$$.fragment),t=ee(),i=A("div"),this.h()},l(s){ot(e.$$.fragment,s),t=te(s),i=R(s,"DIV",{style:!0,class:!0}),T(i).forEach(_),this.h()},h(){B(i,"height","40px"),g(i,"class","vr")},m(s,o){at(e,s,o),Z(s,t,o),Z(s,i,o),r=!0},p(s,o){const a={};o&134217728&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){r||(de(e.$$.fragment,s),r=!0)},o(s){Ie(e.$$.fragment,s),r=!1},d(s){s&&(_(t),_(i)),lt(e,s)}}}function Bk(n){let e,t='<svg class="shortcut svelte-1k7hv3c" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="800px" height="800px" viewBox="0 -3 20 20" version="1.1"><desc>Created with Sketch.</desc><defs></defs><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Dribbble-Light-Preview" transform="translate(-140.000000, -3642.000000)" fill="#000000"><g id="icons" transform="translate(56.000000, 160.000000)"><path d="M95.4324393,3487.63833 C95.4094393,3487.61278 95.3924393,3487.58428 95.3674393,3487.55971 L95.3634393,3487.56265 C94.5824393,3486.79509 93.2434393,3486.86683 92.5364393,3487.56167 C91.8294393,3488.25651 91.8314393,3489.64423 92.5384393,3490.33907 C92.5474393,3490.34791 92.5584393,3490.35381 92.5674393,3490.36265 C92.5914393,3490.38722 92.6084393,3490.41671 92.6334393,3490.44128 L92.6364393,3490.43735 C93.4174393,3491.20491 94.7564393,3491.13415 95.4634393,3490.43833 C96.1704393,3489.74349 96.1684393,3488.35577 95.4614393,3487.66093 C95.4524393,3487.65209 95.4414393,3487.64717 95.4324393,3487.63833 M91.1194393,3486.17002 L89.7054393,3484.77936 C87.5844393,3486.86486 87.6834393,3491.13612 89.8044393,3493.22064 L91.2184393,3491.83096 C89.8044393,3490.44128 89.7054393,3487.55971 91.1194393,3486.17002 M88.2914393,3483.38968 L86.8774393,3482 C82.6344393,3486.17002 83.4404393,3492.5258 86.9764393,3496 L88.3904393,3494.61032 C85.5624393,3491.83096 85.4634393,3486.17002 88.2914393,3483.38968 M98.1954393,3484.77936 L96.7814393,3486.17002 C98.1954393,3487.55971 98.2944393,3490.44128 96.8804393,3491.83096 L98.2944393,3493.22064 C100.415439,3491.13612 100.316439,3486.86486 98.1954393,3484.77936 M101.122439,3496 L99.7084393,3494.61032 C102.537439,3491.83096 102.438439,3486.17002 99.6094393,3483.38968 L101.023439,3482 C104.559439,3485.47518 105.365439,3491.83096 101.122439,3496" id="radio_signal-[#1026]"></path></g></g></g></svg>';return{c(){e=A("div"),e.innerHTML=t,this.h()},l(i){e=R(i,"DIV",{class:!0,style:!0,"data-svelte-h":!0}),rn(e)!=="svelte-4nc8wg"&&(e.innerHTML=t),this.h()},h(){g(e,"class","p8 hoverable clickable"),B(e,"height","40px")},m(i,r){Z(i,e,r)},p:$e,d(i){i&&_(e)}}}function a1(n){let e,t,i,r;return e=new fn({props:{onclick:n[18],style:"height: 40px;",$$slots:{default:[$k]},$$scope:{ctx:n}}}),{c(){st(e.$$.fragment),t=ee(),i=A("div"),this.h()},l(s){ot(e.$$.fragment,s),t=te(s),i=R(s,"DIV",{style:!0,class:!0}),T(i).forEach(_),this.h()},h(){B(i,"height","40px"),g(i,"class","vr")},m(s,o){at(e,s,o),Z(s,t,o),Z(s,i,o),r=!0},p(s,o){const a={};o&134217728&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){r||(de(e.$$.fragment,s),r=!0)},o(s){Ie(e.$$.fragment,s),r=!1},d(s){s&&(_(t),_(i)),lt(e,s)}}}function $k(n){let e,t='<svg class="shortcut svelte-1k7hv3c" width="800px" height="800px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="12" cy="7" r="5" stroke="#000000" stroke-width="2"></circle><path d="M17 22H5.26556C4.06257 22 3.1318 20.9456 3.28101 19.7519L3.67151 16.6279C3.85917 15.1266 5.13538 14 6.64835 14H7" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path><path d="M16 16L18.25 18L22 14" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg>';return{c(){e=A("div"),e.innerHTML=t,this.h()},l(i){e=R(i,"DIV",{class:!0,style:!0,"data-svelte-h":!0}),rn(e)!=="svelte-ipu34z"&&(e.innerHTML=t),this.h()},h(){g(e,"class","p8 hoverable clickable"),B(e,"height","40px")},m(i,r){Z(i,e,r)},p:$e,d(i){i&&_(e)}}}function l1(n){let e,t,i,r;return e=new fn({props:{onclick:n[17],style:"height: 40px;",$$slots:{default:[Vk]},$$scope:{ctx:n}}}),{c(){st(e.$$.fragment),t=ee(),i=A("div"),this.h()},l(s){ot(e.$$.fragment,s),t=te(s),i=R(s,"DIV",{style:!0,class:!0}),T(i).forEach(_),this.h()},h(){B(i,"height","40px"),g(i,"class","vr")},m(s,o){at(e,s,o),Z(s,t,o),Z(s,i,o),r=!0},p(s,o){const a={};o&134217728&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){r||(de(e.$$.fragment,s),r=!0)},o(s){Ie(e.$$.fragment,s),r=!1},d(s){s&&(_(t),_(i)),lt(e,s)}}}function Vk(n){let e,t='<svg class="shortcut svelte-1k7hv3c" xmlns="http://www.w3.org/2000/svg" width="800px" height="800px" viewBox="0 0 24 24" fill="none" stroke="#000"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M17 8C17 10.7614 14.7614 13 12 13C9.23858 13 7 10.7614 7 8C7 5.23858 9.23858 3 12 3C14.7614 3 17 5.23858 17 8Z" stroke="#000000" stroke-width="2"></path><path d="M3 21C3.95728 17.9237 6.41998 17 12 17C17.58 17 20.0427 17.9237 21 21" stroke="#000000" stroke-width="2" stroke-linecap="round"></path></g></svg>';return{c(){e=A("div"),e.innerHTML=t,this.h()},l(i){e=R(i,"DIV",{class:!0,style:!0,"data-svelte-h":!0}),rn(e)!=="svelte-s4m0ww"&&(e.innerHTML=t),this.h()},h(){g(e,"class","p8 hoverable clickable"),B(e,"height","40px")},m(i,r){Z(i,e,r)},p:$e,d(i){i&&_(e)}}}function u1(n){let e,t,i,r;return e=new fn({props:{onclick:n[16],style:"height: 40px;",$$slots:{default:[zk]},$$scope:{ctx:n}}}),{c(){st(e.$$.fragment),t=ee(),i=A("div"),this.h()},l(s){ot(e.$$.fragment,s),t=te(s),i=R(s,"DIV",{style:!0,class:!0}),T(i).forEach(_),this.h()},h(){B(i,"height","40px"),g(i,"class","vr")},m(s,o){at(e,s,o),Z(s,t,o),Z(s,i,o),r=!0},p(s,o){const a={};o&134217728&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){r||(de(e.$$.fragment,s),r=!0)},o(s){Ie(e.$$.fragment,s),r=!1},d(s){s&&(_(t),_(i)),lt(e,s)}}}function zk(n){let e,t='<svg class="shortcut svelte-1k7hv3c" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="100" height="100" viewBox="0 0 24 24"><path d="M 12 2 C 8.9883724 2 6.3037203 3.3556682 4.4707031 5.4707031 L 2 3 L 2 9 L 8 9 L 5.8769531 6.8769531 C 7.3450482 5.1245479 9.5396099 4 12 4 C 16.411 4 20 7.589 20 12 C 20 16.411 16.411 20 12 20 C 7.589 20 4 16.411 4 12 L 2 12 C 2 17.514 6.486 22 12 22 C 17.514 22 22 17.514 22 12 C 22 6.486 17.514 2 12 2 z M 11 6 L 11 12.414062 L 14.292969 15.707031 L 15.707031 14.292969 L 13 11.585938 L 13 6 L 11 6 z"></path></svg>';return{c(){e=A("div"),e.innerHTML=t,this.h()},l(i){e=R(i,"DIV",{class:!0,style:!0,"data-svelte-h":!0}),rn(e)!=="svelte-10m27bj"&&(e.innerHTML=t),this.h()},h(){g(e,"class","p8 hoverable clickable"),B(e,"height","40px")},m(i,r){Z(i,e,r)},p:$e,d(i){i&&_(e)}}}function c1(n){let e,t;return e=new fn({props:{onclick:n[26],style:"height: 40px;",$$slots:{default:[Gk]},$$scope:{ctx:n}}}),{c(){st(e.$$.fragment)},l(i){ot(e.$$.fragment,i)},m(i,r){at(e,i,r),t=!0},p(i,r){const s={};r&134219776&&(s.$$scope={dirty:r,ctx:i}),e.$set(s)},i(i){t||(de(e.$$.fragment,i),t=!0)},o(i){Ie(e.$$.fragment,i),t=!1},d(i){lt(e,i)}}}function Gk(n){let e,t,i,r;return{c(){e=A("div"),t=Re("svg"),i=Re("path"),this.h()},l(s){e=R(s,"DIV",{class:!0});var o=T(e);t=Oe(o,"svg",{style:!0,class:!0,xmlns:!0,x:!0,y:!0,width:!0,height:!0,viewBox:!0});var a=T(t);i=Oe(a,"path",{d:!0}),T(i).forEach(_),a.forEach(_),o.forEach(_),this.h()},h(){g(i,"d","M57.605,51.082c-1.04,0-2.079-0.403-2.863-1.207l-18.764-19.23L17.258,49.832c-1.544,1.582-4.076,1.612-5.657,0.069	c-1.581-1.542-1.611-4.075-0.069-5.656l21.584-22.121c1.713-1.713,4.179-1.586,5.727,0l21.627,22.164	c1.542,1.581,1.512,4.114-0.069,5.656C59.621,50.704,58.613,51.082,57.605,51.082z"),g(t,"style",r=(n[11]?"transform: scaleY(-1);":"")+" width: 20px; height: 20px; padding: 0 1px 1px 1px;"),g(t,"class","shortcut svelte-1k7hv3c"),g(t,"xmlns","http://www.w3.org/2000/svg"),g(t,"x","0px"),g(t,"y","0px"),g(t,"width","100"),g(t,"height","100"),g(t,"viewBox","0 0 72 72"),g(e,"class","p8 hoverable clickable")},m(s,o){Z(s,e,o),p(e,t),p(t,i)},p(s,o){o&2048&&r!==(r=(s[11]?"transform: scaleY(-1);":"")+" width: 20px; height: 20px; padding: 0 1px 1px 1px;")&&g(t,"style",r)},d(s){s&&_(e)}}}function Hk(n){let e,t,i,r,s,o,a,l,h,d,m,v,k,w,E,I=n[10]("ui.droneRadar")+"",M,C,D,O,P,F,V,$;e=new Mk({props:{$$slots:{default:[Ok]},$$scope:{ctx:n}}});let G=n[7]&&n1(n),U=n[7]&&i1(n);const H=n[25].default,j=Jl(H,n,n[27],null);return{c(){st(e.$$.fragment),t=ee(),i=A("div"),r=A("div"),s=A("div"),o=Re("svg"),a=Re("style"),l=he(".st0345{fill:#FD8C13;} .st1824{fill:#FFFFFF;}"),h=Re("g"),d=Re("path"),m=Re("path"),v=Re("path"),k=Re("path"),w=ee(),E=A("h1"),M=he(I),C=ee(),G&&G.c(),D=ee(),U&&U.c(),O=ee(),P=A("div"),j&&j.c(),this.h()},l(Q){ot(e.$$.fragment,Q),t=te(Q),i=R(Q,"DIV",{id:!0,class:!0});var W=T(i);r=R(W,"DIV",{class:!0});var Y=T(r);s=R(Y,"DIV",{class:!0,style:!0});var q=T(s);o=Oe(q,"svg",{style:!0,xmlns:!0,"xmlns:xlink":!0,version:!0,id:!0,x:!0,y:!0,viewBox:!0,"xml:space":!0});var ne=T(o);a=Oe(ne,"style",{type:!0});var J=T(a);l=fe(J,".st0345{fill:#FD8C13;} .st1824{fill:#FFFFFF;}"),J.forEach(_),h=Oe(ne,"g",{});var ge=T(h);d=Oe(ge,"path",{class:!0,d:!0}),T(d).forEach(_),m=Oe(ge,"path",{class:!0,d:!0}),T(m).forEach(_),v=Oe(ge,"path",{class:!0,d:!0}),T(v).forEach(_),k=Oe(ge,"path",{class:!0,d:!0}),T(k).forEach(_),ge.forEach(_),ne.forEach(_),w=te(q),E=R(q,"H1",{class:!0});var ie=T(E);M=fe(ie,I),ie.forEach(_),q.forEach(_),C=te(Y),G&&G.l(Y),Y.forEach(_),D=te(W),U&&U.l(W),O=te(W),P=R(W,"DIV",{class:!0,style:!0});var le=T(P);j&&j.l(le),le.forEach(_),W.forEach(_),this.h()},h(){g(a,"type","text/css"),g(d,"class","st0345"),g(d,"d","M313,459.9c0,20.7,0,41.2,0,61.9c0,16.1-7.1,27.8-20.5,36.8c-12.9,8.7-26.7,15.6-39.8,23.7   c-10.8,6.7-22.3,12-32.9,19.3c-4.4,3.2-9.7,5.1-14.5,7.6c-11.5,6-21.6,14.3-34.7,17.7c-10.4,2.5-18.9,3.2-27.6-1.2   c-9.9-4.8-19.8-9.7-28.8-15.6c-7.1-4.8-15-8.5-22.3-12.9c-12.7-7.8-25.3-15.2-38.2-22.5c-6.2-3.7-12.4-7.4-18.9-10.4   c-6.9-3.2-12.7-7.6-17.7-13.3C10,543,5.6,533.8,5.6,522.7c0-42.3,0-84.7,0-127c0-15.6,7.1-27.6,20-36.1   c12.9-8.7,26.7-15.6,39.8-23.5c10.8-6.4,22.3-12,32.9-19.3c4.8-3.5,10.1-5.8,15.4-8.3c11.3-5.8,20.9-14.3,33.6-17.5   c12.2-3.2,17.7-3,28.5,1.6c5.8,2.3,11,5.3,16.3,9c4.8,3.7,10.6,6.4,16.1,9.2c13.3,6.9,26.2,15,39.3,22.3c10.8,6,21.6,12,32,18.6   c2.1,1.4,4.1,2.5,6.2,3.5c12.7,6.2,21.4,15.2,25.1,29.5c0.9,3.5,1.8,6.7,1.8,10.1C313,416.7,313,438.3,313,459.9z"),g(m,"class","st1824"),g(m,"d","M171.5,173.4c0-20.7,0-41.2,0-61.9c0-17.9,9-30.8,23.9-39.6c16.6-9.7,33.6-18.6,49.9-28.5   c12-7.4,24.4-14.5,36.6-21.4c10.4-5.8,19.8-13.6,32-16.1c10.4-2.3,18.9-3.2,27.6,1.2c9.9,4.8,19.6,9.7,28.8,15.6   c7.1,4.8,15,8.5,22.3,12.9c12.7,7.8,25.3,15.2,38.2,22.6c9.2,5.3,18.6,10.4,27.6,16.1c13.3,8.7,20.5,20.7,20.5,36.8   c0,41.9,0,84,0,125.9c0,15.4-7.4,27.4-19.1,35.9c-7.4,5.3-15.9,9.2-23.9,14c-12.9,7.8-26.2,15-39.3,22.8   c-10.1,6.2-20.5,12.4-31.1,17.9c-6.7,3.5-12.9,7.8-19.6,11.3c-13.3,6.7-27.2,7.6-40,0.2c-18.2-10.1-36.8-20-54.3-31.5   c-6-3.9-12.7-6.7-18.9-10.4c-13.6-8.1-27.4-15.9-40.7-24.4c-13.1-8.3-20-20.5-20-36.1C171.5,216,171.5,194.6,171.5,173.4z"),g(v,"class","st1824"),g(v,"d","M339.5,458.5c0-20.9,0-41.9,0-62.8c0-15.4,7.4-27.2,19.3-35.9c8.1-5.8,17-10.1,25.5-15.2   c11-6.4,22.3-12,32.9-19.3c5.1-3.5,10.6-6.4,16.1-9.2c13.3-6.9,26-15.2,39.3-22.1c8.7-4.6,18.4-6.4,27.6-4.6   c7.6,1.6,15.4,4.6,21.4,9.2c6.4,4.8,14.7,6.4,20.2,12.7c18.2,8.1,34.5,19.6,52,29c11,6,22.3,12.2,32.7,19.6   c12.2,8.7,19.6,20.2,19.8,35.4c0.2,42.6,0.2,85.4,0,127.9c0,15.2-7.1,27.2-19.8,35.2c-13.3,8.5-27.2,16.1-40.7,24.2   c-11,6.4-22.3,12-32.9,19.3c-5.1,3.5-10.6,6.4-16.1,9.2c-9.2,4.4-17.5,10.6-26.9,14.5c-11.3,4.8-22.6,5.3-33.6,0.2   c-9.9-4.6-19.6-9.7-28.8-15.6c-6.7-4.4-14-7.4-20.5-11.7c-12.9-8.7-26.7-15.4-40-23.5c-9-5.5-18.6-10.4-27.4-16.1   c-13.1-8.5-20-20.5-20.2-35.9C339.2,501.3,339.5,479.9,339.5,458.5z"),g(k,"class","st1824"),g(k,"d","M814.4,174.1c0,19.1,0,38.2,0,57.3c0,6-3.2,15.6-6,22.8c-5.1,12.2-15,19.1-25.3,25.8   c-13.1,8.3-26.7,15.6-40,23.5c-8.7,5.1-17.9,9.9-26.9,14.7c-10.6,5.5-20.7,12-31.3,17.7c-5.8,3.2-11.7,4.4-17.5,5.3   c-5.5,0.9-12.2,2.8-17.7-1.8c-10.6-0.5-18.6-6.9-26.9-12c-5.5-3.5-11.3-6.9-17-9.7c-13.1-6.7-25.5-14.7-38.4-21.6   c-12.4-6.7-25.1-12.9-36.4-21.2c-10.6-8.1-20-18.2-20.9-33.1c-3.2-3.2-2.1-7.4-2.3-11.3c0-38-0.5-75.7,0.2-113.7   c0.2-19.1,8.5-34.1,24.9-44.9c12.7-8.3,26-15.4,39.1-23c16.1-9.7,32.9-18.6,49-28.5c8.1-5.1,16.6-9.4,25.8-12.4   c13.1-4.4,25.5-3,37.7,3.2c11,5.5,21.6,12.2,32.2,18.4c8.7,5.1,18.2,9.7,26.9,14.7c12.9,7.8,26.2,15,39.1,22.8   c11.5,6.9,21.4,14.7,26.9,27.2c3,6.7,5.5,13.3,5.5,20.9C814.4,135.2,814.4,154.6,814.4,174.1z"),B(o,"height","28px"),B(o,"width","40px"),B(o,"object-fit","contain"),B(o,"margin-top","4px"),g(o,"xmlns","http://www.w3.org/2000/svg"),g(o,"xmlns:xlink","http://www.w3.org/1999/xlink"),g(o,"version","1.1"),g(o,"id","Layer_1"),g(o,"x","0px"),g(o,"y","0px"),g(o,"viewBox","0 0 820 658"),g(o,"xml:space","preserve"),g(E,"class","title svelte-1k7hv3c"),g(s,"class","logo row center-cross dont-shrink grow"),B(s,"gap","12px"),g(r,"class","row center-cross g8"),g(P,"class","collapsable svelte-1k7hv3c"),B(P,"height",n[11]?"0px":"100%"),B(P,"opacity",n[11]?"0":"1"),g(i,"id","sidepanel"),g(i,"class","column p32 g32 svelte-1k7hv3c")},m(Q,W){at(e,Q,W),Z(Q,t,W),Z(Q,i,W),p(i,r),p(r,s),p(s,o),p(o,a),p(a,l),p(o,h),p(h,d),p(h,m),p(h,v),p(h,k),p(s,w),p(s,E),p(E,M),p(r,C),G&&G.m(r,null),p(i,D),U&&U.m(i,null),p(i,O),p(i,P),j&&j.m(P,null),F=!0,V||($=[Vl(Cc.call(null,P,{on:"sidebar-expand",cb:n[20]})),Vl(Cc.call(null,P,{on:"sidebar-collapse",cb:n[21]}))],V=!0)},p(Q,[W]){const Y={};W&134217728&&(Y.$$scope={dirty:W,ctx:Q}),e.$set(Y),(!F||W&1024)&&I!==(I=Q[10]("ui.droneRadar")+"")&&Ee(M,I),Q[7]?G?G.p(Q,W):(G=n1(Q),G.c(),G.m(r,null)):G&&(G.d(1),G=null),Q[7]?U?(U.p(Q,W),W&128&&de(U,1)):(U=i1(Q),U.c(),de(U,1),U.m(i,O)):U&&(bt(),Ie(U,1,1,()=>{U=null}),wt()),j&&j.p&&(!F||W&134217728)&&Ql(j,H,Q,Q[27],F?tu(H,Q[27],W,null):eu(Q[27]),null),(!F||W&2048)&&B(P,"height",Q[11]?"0px":"100%"),(!F||W&2048)&&B(P,"opacity",Q[11]?"0":"1")},i(Q){F||(de(e.$$.fragment,Q),de(U),de(j,Q),F=!0)},o(Q){Ie(e.$$.fragment,Q),Ie(U),Ie(j,Q),F=!1},d(Q){Q&&(_(t),_(i)),lt(e,Q),G&&G.d(),U&&U.d(),j&&j.d(Q),V=!1,Bn($)}}}function h1(n){var e;(e=n==null?void 0:n.target)==null||e.dispatchEvent(new CustomEvent("go-live",{bubbles:!0}))}const f1=()=>{};function Uk(n,e,t){let i,r,s,o=$e,a=()=>(o(),o=Dt(v,ne=>t(24,s=ne)),v),l,h;He(n,nn,ne=>t(23,r=ne)),He(n,Nn,ne=>t(10,l=ne)),n.$$.on_destroy.push(()=>o());let{$$slots:d={},$$scope:m}=e;Ha();let{service:v}=e;a();let{showButtonRadar:k=!0}=e,{showButtonSensors:w=!0}=e,{showButtonGeofences:E=!0}=e,{showButtonHistory:I=!0}=e,{showButtonAccount:M=!1}=e,{showButtonKnownDrones:C=!1}=e,{showSidebar:D=!0}=e,O=Pn(!1);He(n,O,ne=>t(11,h=ne));function P(){nn.goto({type:Tt.DroneList})}function F(){nn.goto({type:Tt.Sensors})}function V(){nn.goto({type:Tt.Geofences})}function $(ne){nn.goto({type:Tt.History})}function G(){nn.goto({type:Tt.Account,page:Ki.Details})}function U(){nn.goto({type:Tt.KnownDrones})}function H(){O.update(ne=>!ne)}function j(){O.set(!1)}function Q(){O.set(!0)}let W=r!==null,Y=null;const q=()=>H();return n.$$set=ne=>{"service"in ne&&a(t(0,v=ne.service)),"showButtonRadar"in ne&&t(1,k=ne.showButtonRadar),"showButtonSensors"in ne&&t(2,w=ne.showButtonSensors),"showButtonGeofences"in ne&&t(3,E=ne.showButtonGeofences),"showButtonHistory"in ne&&t(4,I=ne.showButtonHistory),"showButtonAccount"in ne&&t(5,M=ne.showButtonAccount),"showButtonKnownDrones"in ne&&t(6,C=ne.showButtonKnownDrones),"showSidebar"in ne&&t(7,D=ne.showSidebar),"$$scope"in ne&&t(27,m=ne.$$scope)},n.$$.update=()=>{if(n.$$.dirty&16777216&&t(9,i=s instanceof Os||s instanceof os),n.$$.dirty&8388608&&t(22,Y=r),n.$$.dirty&12582912&&r!==null){let ne=!0;r.type===Tt.AircraftView&&(Y==null?void 0:Y.type)==Tt.AircraftView&&Y.flightId===r.flightId&&(ne=!1),ne&&O.set(!1)}n.$$.dirty&8388608&&t(8,W=r!==null)},[v,k,w,E,I,M,C,D,W,i,l,h,O,P,F,V,$,G,U,H,j,Q,Y,r,s,d,q,m]}class qk extends Wt{constructor(e){super(),Xt(this,e,Uk,Hk,zt,{service:0,showButtonRadar:1,showButtonSensors:2,showButtonGeofences:3,showButtonHistory:4,showButtonAccount:5,showButtonKnownDrones:6,showSidebar:7})}}function Zk(n){let e,t=n[5]("knownDrones."+n[8][n[3]])+"",i,r,s;return{c(){e=A("p"),i=he(t),this.h()},l(o){e=R(o,"P",{class:!0,style:!0});var a=T(e);i=fe(a,t),a.forEach(_),this.h()},h(){g(e,"class",r="role-indicator "+n[8][n[3]]+" svelte-1aj4l8d"),g(e,"style",s=(n[9].style||"")+"; height: "+n[1]+"px;")},m(o,a){Z(o,e,a),p(e,i)},p(o,a){a&40&&t!==(t=o[5]("knownDrones."+o[8][o[3]])+"")&&Ee(i,t),a&8&&r!==(r="role-indicator "+o[8][o[3]]+" svelte-1aj4l8d")&&g(e,"class",r),a&514&&s!==(s=(o[9].style||"")+"; height: "+o[1]+"px;")&&g(e,"style",s)},d(o){o&&_(e)}}}function Yk(n){let e,t,i,r;return{c(){e=A("img"),this.h()},l(s){e=R(s,"IMG",{title:!0,style:!0,class:!0,src:!0,alt:!0}),this.h()},h(){g(e,"title",t=n[5]("relationship."+n[7][n[3]])),g(e,"style",i=(n[9].style||"")+"; width: "+n[1]+"px; height: "+n[1]+"px;"),g(e,"class","known-drone-indicator"),zi(e.src,r=`/icon_sets_251019/${n[4]}/relationship/${n[7][n[3]]||"unknown"}.png`)||g(e,"src",r),g(e,"alt","")},m(s,o){Z(s,e,o)},p(s,o){o&40&&t!==(t=s[5]("relationship."+s[7][s[3]]))&&g(e,"title",t),o&514&&i!==(i=(s[9].style||"")+"; width: "+s[1]+"px; height: "+s[1]+"px;")&&g(e,"style",i),o&24&&!zi(e.src,r=`/icon_sets_251019/${s[4]}/relationship/${s[7][s[3]]||"unknown"}.png`)&&g(e,"src",r)},d(s){s&&_(e)}}}function d1(n){let e;function t(s,o){if(s[4]=="mil_icons"||s[2]&&s[4]=="civ_icons")return Yk;if(s[3]!=an.UNKNOWN)return Zk}let i=t(n),r=i&&i(n);return{c(){r&&r.c(),e=dt()},l(s){r&&r.l(s),e=dt()},m(s,o){r&&r.m(s,o),Z(s,e,o)},p(s,o){i===(i=t(s))&&r?r.p(s,o):(r&&r.d(1),r=i&&i(s),r&&(r.c(),r.m(e.parentNode,e)))},d(s){s&&_(e),r&&r.d(s)}}}function jk(n){let e=n[3],t,i=d1(n);return{c(){i.c(),t=dt()},l(r){i.l(r),t=dt()},m(r,s){i.m(r,s),Z(r,t,s)},p(r,[s]){s&8&&zt(e,e=r[3])?(i.d(1),i=d1(r),i.c(),i.m(t.parentNode,t)):i.p(r,s)},i:$e,o:$e,d(r){r&&_(t),i.d(r)}}}function Wk(n,e,t){const i=["reactiveDroneRelationService","relationship","aid","iconsSet","size","compact"];let r=P0(e,i),s,o,a=$e,l=()=>(a(),a=Dt(k,D=>t(4,o=D)),k),h;He(n,Nn,D=>t(5,h=D)),n.$$.on_destroy.push(()=>a());let{reactiveDroneRelationService:d=null}=e,{relationship:m=null}=e,{aid:v}=e,{iconsSet:k}=e;l();let{size:w=20}=e,{compact:E=!1}=e;const I=(()=>{if(d){const[D,O]=d.subscribeToRelationship(v);return ls(()=>O()),Ra(D,P=>(P==null?void 0:P.relationship)||an.UNKNOWN)}else return Pn(m||an.UNKNOWN)})();He(n,I,D=>t(3,s=D));const M={[an.UNKNOWN]:"unknown",[an.HOSTILE]:"hostile",[an.FRIENDLY]:"friendly",[an.NEUTRAL]:"neutral"},C={[an.UNKNOWN]:"unknown",[an.HOSTILE]:"hostile",[an.FRIENDLY]:"friendly",[an.NEUTRAL]:"neutral"};return n.$$set=D=>{e=N0(N0({},e),P4(D)),t(9,r=P0(e,i)),"reactiveDroneRelationService"in D&&t(10,d=D.reactiveDroneRelationService),"relationship"in D&&t(11,m=D.relationship),"aid"in D&&t(12,v=D.aid),"iconsSet"in D&&l(t(0,k=D.iconsSet)),"size"in D&&t(1,w=D.size),"compact"in D&&t(2,E=D.compact)},[k,w,E,s,o,h,I,M,C,r,d,m,v]}class Xk extends Wt{constructor(e){super(),Xt(this,e,Wk,jk,zt,{reactiveDroneRelationService:10,relationship:11,aid:12,iconsSet:0,size:1,compact:2})}}function Kk(n,e,t=null){return{subscribe(i){return t!==null&&i(t),n.subscribe(s=>{e(s)&&i(s)})}}}class Yl{constructor(){Ge(this,"currentUnsubscribe",null)}swap(e){this.currentUnsubscribe&&this.currentUnsubscribe(),this.currentUnsubscribe=e||null}unsubscribe(){this.currentUnsubscribe&&this.currentUnsubscribe()}onUnmount(){this.unsubscribe()}onDestroy(){this.unsubscribe()}}async function Jk(n){if("clipboard"in navigator)await navigator.clipboard.writeText(n);else{const e=document.createElement("input");e.type="text",e.disabled=!0,e.style.setProperty("position","fixed"),e.style.setProperty("z-index","-100"),e.style.setProperty("pointer-events","none"),e.style.setProperty("opacity","0"),e.value=n,document.body.appendChild(e),e.click(),e.select(),document.execCommand("copy"),document.body.removeChild(e)}}function Qk(n){let e,t,i,r,s,o,a,l;return{c(){e=Re("svg"),t=Re("path"),i=ee(),r=Re("svg"),s=Re("g"),o=Re("g"),a=Re("g"),l=Re("path"),this.h()},l(h){e=Oe(h,"svg",{style:!0,xmlns:!0,x:!0,y:!0,width:!0,height:!0,viewBox:!0});var d=T(e);t=Oe(d,"path",{d:!0}),T(t).forEach(_),d.forEach(_),i=te(h),r=Oe(h,"svg",{style:!0,viewBox:!0,fill:!0,xmlns:!0});var m=T(r);s=Oe(m,"g",{id:!0,"stroke-width":!0}),T(s).forEach(_),o=Oe(m,"g",{id:!0,"stroke-linecap":!0,"stroke-linejoin":!0}),T(o).forEach(_),a=Oe(m,"g",{id:!0});var v=T(a);l=Oe(v,"path",{d:!0,fill:!0}),T(l).forEach(_),v.forEach(_),m.forEach(_),this.h()},h(){g(t,"d","M 19.28125 5.28125 L 9 15.5625 L 4.71875 11.28125 L 3.28125 12.71875 L 8.28125 17.71875 L 9 18.40625 L 9.71875 17.71875 L 20.71875 6.71875 Z"),B(e,"opacity",n[1]?"1":"0"),B(e,"fill","#6c6"),g(e,"xmlns","http://www.w3.org/2000/svg"),g(e,"x","0px"),g(e,"y","0px"),g(e,"width","100"),g(e,"height","100"),g(e,"viewBox","0 0 24 24"),g(s,"id","SVGRepo_bgCarrier"),g(s,"stroke-width","0"),g(o,"id","SVGRepo_tracerCarrier"),g(o,"stroke-linecap","round"),g(o,"stroke-linejoin","round"),g(l,"d","M19.53 8L14 2.47C13.8595 2.32931 13.6688 2.25018 13.47 2.25H11C10.2707 2.25 9.57118 2.53973 9.05546 3.05546C8.53973 3.57118 8.25 4.27065 8.25 5V6.25H7C6.27065 6.25 5.57118 6.53973 5.05546 7.05546C4.53973 7.57118 4.25 8.27065 4.25 9V19C4.25 19.7293 4.53973 20.4288 5.05546 20.9445C5.57118 21.4603 6.27065 21.75 7 21.75H14C14.7293 21.75 15.4288 21.4603 15.9445 20.9445C16.4603 20.4288 16.75 19.7293 16.75 19V17.75H17C17.7293 17.75 18.4288 17.4603 18.9445 16.9445C19.4603 16.4288 19.75 15.7293 19.75 15V8.5C19.7421 8.3116 19.6636 8.13309 19.53 8ZM14.25 4.81L17.19 7.75H14.25V4.81ZM15.25 19C15.25 19.3315 15.1183 19.6495 14.8839 19.8839C14.6495 20.1183 14.3315 20.25 14 20.25H7C6.66848 20.25 6.35054 20.1183 6.11612 19.8839C5.8817 19.6495 5.75 19.3315 5.75 19V9C5.75 8.66848 5.8817 8.35054 6.11612 8.11612C6.35054 7.8817 6.66848 7.75 7 7.75H8.25V15C8.25 15.7293 8.53973 16.4288 9.05546 16.9445C9.57118 17.4603 10.2707 17.75 11 17.75H15.25V19ZM17 16.25H11C10.6685 16.25 10.3505 16.1183 10.1161 15.8839C9.8817 15.6495 9.75 15.3315 9.75 15V5C9.75 4.66848 9.8817 4.35054 10.1161 4.11612C10.3505 3.8817 10.6685 3.75 11 3.75H12.75V8.5C12.7526 8.69811 12.8324 8.88737 12.9725 9.02747C13.1126 9.16756 13.3019 9.24741 13.5 9.25H18.25V15C18.25 15.3315 18.1183 15.6495 17.8839 15.8839C17.6495 16.1183 17.3315 16.25 17 16.25Z"),g(l,"fill","currentColor"),g(a,"id","SVGRepo_iconCarrier"),B(r,"opacity",n[1]?"0":"1"),B(r,"color","#444"),g(r,"viewBox","0 0 24 24"),g(r,"fill","none"),g(r,"xmlns","http://www.w3.org/2000/svg")},m(h,d){Z(h,e,d),p(e,t),Z(h,i,d),Z(h,r,d),p(r,s),p(r,o),p(r,a),p(a,l)},p(h,d){d&2&&B(e,"opacity",h[1]?"1":"0"),d&2&&B(r,"opacity",h[1]?"0":"1")},d(h){h&&(_(e),_(i),_(r))}}}function eE(n){let e,t;return e=new fn({props:{styleInner:"width: "+n[0]+"px; height: "+n[0]+"px;",class:"copyable hoverable",onclick:n[3],$$slots:{default:[Qk]},$$scope:{ctx:n}}}),{c(){st(e.$$.fragment)},l(i){ot(e.$$.fragment,i)},m(i,r){at(e,i,r),t=!0},p(i,[r]){const s={};r&1&&(s.styleInner="width: "+i[0]+"px; height: "+i[0]+"px;"),r&66&&(s.$$scope={dirty:r,ctx:i}),e.$set(s)},i(i){t||(de(e.$$.fragment,i),t=!0)},o(i){Ie(e.$$.fragment,i),t=!1},d(i){lt(e,i)}}}const tE=2e3;function nE(n,e,t){let i,{text:r}=e,{size:s=24}=e,o=Pn(!1);He(n,o,h=>t(1,i=h));let a=Pn(null);function l(){Jk(r),o.set(!0),a.update(h=>(h&&clearTimeout(h),setTimeout(()=>o.set(!1),tE)))}return n.$$set=h=>{"text"in h&&t(4,r=h.text),"size"in h&&t(0,s=h.size)},[s,i,o,l,r]}class iE extends Wt{constructor(e){super(),Xt(this,e,nE,eE,zt,{text:4,size:0})}}function g1(n){let e,t;return e=new fn({props:{style:"height: 16px;",onclick:n[5],$$slots:{default:[rE]},$$scope:{ctx:n}}}),{c(){st(e.$$.fragment)},l(i){ot(e.$$.fragment,i)},m(i,r){at(e,i,r),t=!0},p(i,r){const s={};r&4&&(s.onclick=i[5]),r&64&&(s.$$scope={dirty:r,ctx:i}),e.$set(s)},i(i){t||(de(e.$$.fragment,i),t=!0)},o(i){Ie(e.$$.fragment,i),t=!1},d(i){lt(e,i)}}}function rE(n){let e,t,i,r,s,o,a,l,h,d,m;return{c(){e=Re("svg"),t=Re("g"),i=Re("g"),r=Re("g"),s=Re("g"),o=Re("g"),a=Re("rect"),l=Re("g"),h=Re("g"),d=Re("path"),m=Re("path"),this.h()},l(v){e=Oe(v,"svg",{style:!0,viewBox:!0,xmlns:!0,fill:!0});var k=T(e);t=Oe(k,"g",{id:!0,"stroke-width":!0}),T(t).forEach(_),i=Oe(k,"g",{id:!0,"stroke-linecap":!0,"stroke-linejoin":!0}),T(i).forEach(_),r=Oe(k,"g",{id:!0});var w=T(r);s=Oe(w,"g",{id:!0,"data-name":!0});var E=T(s);o=Oe(E,"g",{id:!0,"data-name":!0});var I=T(o);a=Oe(I,"rect",{width:!0,height:!0,fill:!0}),T(a).forEach(_),I.forEach(_),l=Oe(E,"g",{id:!0,"data-name":!0});var M=T(l);h=Oe(M,"g",{});var C=T(h);d=Oe(C,"path",{d:!0}),T(d).forEach(_),m=Oe(C,"path",{d:!0}),T(m).forEach(_),C.forEach(_),M.forEach(_),E.forEach(_),w.forEach(_),k.forEach(_),this.h()},h(){g(t,"id","SVGRepo_bgCarrier"),g(t,"stroke-width","0"),g(i,"id","SVGRepo_tracerCarrier"),g(i,"stroke-linecap","round"),g(i,"stroke-linejoin","round"),g(a,"width","48"),g(a,"height","48"),g(a,"fill","none"),g(o,"id","invisible_box"),g(o,"data-name","invisible box"),g(d,"d","M33.5,23.6a2.1,2.1,0,0,0-2.7-.2,1.9,1.9,0,0,0-.2,3L35.2,31H8a2,2,0,0,0,0,4H35.2l-4.6,4.6a1.9,1.9,0,0,0,.2,3,2.1,2.1,0,0,0,2.7-.2l7.9-8a1.9,1.9,0,0,0,0-2.8Z"),g(m,"d","M14.5,24.4a2.1,2.1,0,0,0,2.7.2,1.9,1.9,0,0,0,.2-3L12.8,17H40a2,2,0,0,0,0-4H12.8l4.6-4.6a1.9,1.9,0,0,0-.2-3,2.1,2.1,0,0,0-2.7.2l-7.9,8a1.9,1.9,0,0,0,0,2.8Z"),g(l,"id","icons_Q2"),g(l,"data-name","icons Q2"),g(s,"id","Layer_2"),g(s,"data-name","Layer 2"),g(r,"id","SVGRepo_iconCarrier"),B(e,"width","16px"),B(e,"height","16px"),g(e,"viewBox","0 0 48 48"),g(e,"xmlns","http://www.w3.org/2000/svg"),g(e,"fill","#000000")},m(v,k){Z(v,e,k),p(e,t),p(e,i),p(e,r),p(r,s),p(s,o),p(o,a),p(s,l),p(l,h),p(h,d),p(h,m)},p:$e,d(v){v&&_(e)}}}function sE(n){let e,t="";return{c(){e=A("p"),e.textContent=t},l(i){e=R(i,"P",{"data-svelte-h":!0}),rn(e)!=="svelte-1ggnfr0"&&(e.textContent=t)},m(i,r){Z(i,e,r)},p:$e,d(i){i&&_(e)}}}function oE(n){let e;function t(s,o){return s[2]?lE:aE}let i=t(n),r=i(n);return{c(){r.c(),e=dt()},l(s){r.l(s),e=dt()},m(s,o){r.m(s,o),Z(s,e,o)},p(s,o){i===(i=t(s))&&r?r.p(s,o):(r.d(1),r=i(s),r&&(r.c(),r.m(e.parentNode,e)))},d(s){s&&_(e),r.d(s)}}}function aE(n){let e,t=n[4].lat.toFixed(6)+"",i,r,s=n[4].lng.toFixed(6)+"",o;return{c(){e=A("p"),i=he(t),r=he(", "),o=he(s)},l(a){e=R(a,"P",{});var l=T(e);i=fe(l,t),r=fe(l,", "),o=fe(l,s),l.forEach(_)},m(a,l){Z(a,e,l),p(e,i),p(e,r),p(e,o)},p(a,l){l&16&&t!==(t=a[4].lat.toFixed(6)+"")&&Ee(i,t),l&16&&s!==(s=a[4].lng.toFixed(6)+"")&&Ee(o,s)},d(a){a&&_(e)}}}function lE(n){let e,t=new wc(n[4].lat,n[4].lng).toUtm().toMgrs().toString()+"",i;return{c(){e=A("p"),i=he(t)},l(r){e=R(r,"P",{});var s=T(e);i=fe(s,t),s.forEach(_)},m(r,s){Z(r,e,s),p(e,i)},p(r,s){s&16&&t!==(t=new wc(r[4].lat,r[4].lng).toUtm().toMgrs().toString()+"")&&Ee(i,t)},d(r){r&&_(e)}}}function m1(n){let e,t;return e=new iE({props:{text:n[2]?new wc(n[4].lat,n[4].lng).toUtm().toMgrs().toString():n[4].lat+", "+n[4].lng}}),{c(){st(e.$$.fragment)},l(i){ot(e.$$.fragment,i)},m(i,r){at(e,i,r),t=!0},p(i,r){const s={};r&20&&(s.text=i[2]?new wc(i[4].lat,i[4].lng).toUtm().toMgrs().toString():i[4].lat+", "+i[4].lng),e.$set(s)},i(i){t||(de(e.$$.fragment,i),t=!0)},o(i){Ie(e.$$.fragment,i),t=!1},d(i){lt(e,i)}}}function uE(n){let e,t,i,r,s,o,a,l=n[3]("common.coordinates")+"",h,d,m,v,k,w=n[4]&&g1(n);function E(D,O){if(D[4])return oE;if(D[1])return sE}let I=E(n),M=I&&I(n),C=n[4]&&m1(n);return{c(){e=A("div"),t=Re("svg"),i=Re("path"),r=ee(),s=A("div"),o=A("div"),a=A("b"),h=he(l),d=ee(),w&&w.c(),m=ee(),M&&M.c(),v=ee(),C&&C.c(),this.h()},l(D){e=R(D,"DIV",{class:!0});var O=T(e);t=Oe(O,"svg",{style:!0,xmlns:!0,fill:!0,width:!0,height:!0,viewBox:!0,version:!0});var P=T(t);i=Oe(P,"path",{d:!0}),T(i).forEach(_),P.forEach(_),r=te(O),s=R(O,"DIV",{class:!0});var F=T(s);o=R(F,"DIV",{class:!0});var V=T(o);a=R(V,"B",{});var $=T(a);h=fe($,l),$.forEach(_),d=te(V),w&&w.l(V),V.forEach(_),m=te(F),M&&M.l(F),F.forEach(_),v=te(O),C&&C.l(O),O.forEach(_),this.h()},h(){g(i,"d","M16.114-0.011c-6.559 0-12.114 5.587-12.114 12.204 0 6.93 6.439 14.017 10.77 18.998 0.017 0.020 0.717 0.797 1.579 0.797h0.076c0.863 0 1.558-0.777 1.575-0.797 4.064-4.672 10-12.377 10-18.998 0-6.618-4.333-12.204-11.886-12.204zM16.515 29.849c-0.035 0.035-0.086 0.074-0.131 0.107-0.046-0.032-0.096-0.072-0.133-0.107l-0.523-0.602c-4.106-4.71-9.729-11.161-9.729-17.055 0-5.532 4.632-10.205 10.114-10.205 6.829 0 9.886 5.125 9.886 10.205 0 4.474-3.192 10.416-9.485 17.657zM16.035 6.044c-3.313 0-6 2.686-6 6s2.687 6 6 6 6-2.687 6-6-2.686-6-6-6zM16.035 16.044c-2.206 0-4.046-1.838-4.046-4.044s1.794-4 4-4c2.207 0 4 1.794 4 4 0.001 2.206-1.747 4.044-3.954 4.044z"),B(t,"width","40px"),B(t,"height","40px"),B(t,"padding","8px"),g(t,"xmlns","http://www.w3.org/2000/svg"),g(t,"fill","#000000"),g(t,"width","800px"),g(t,"height","800px"),g(t,"viewBox","0 0 32 32"),g(t,"version","1.1"),g(o,"class","line center-cross g8"),g(s,"class","column grow"),g(e,"class","row center-cross g8 p816 hoverable")},m(D,O){Z(D,e,O),p(e,t),p(t,i),p(e,r),p(e,s),p(s,o),p(o,a),p(a,h),p(o,d),w&&w.m(o,null),p(s,m),M&&M.m(s,null),p(e,v),C&&C.m(e,null),k=!0},p(D,[O]){(!k||O&8)&&l!==(l=D[3]("common.coordinates")+"")&&Ee(h,l),D[4]?w?(w.p(D,O),O&16&&de(w,1)):(w=g1(D),w.c(),de(w,1),w.m(o,null)):w&&(bt(),Ie(w,1,1,()=>{w=null}),wt()),I===(I=E(D))&&M?M.p(D,O):(M&&M.d(1),M=I&&I(D),M&&(M.c(),M.m(s,null))),D[4]?C?(C.p(D,O),O&16&&de(C,1)):(C=m1(D),C.c(),de(C,1),C.m(e,null)):C&&(bt(),Ie(C,1,1,()=>{C=null}),wt())},i(D){k||(de(w),de(C),k=!0)},o(D){Ie(w),Ie(C),k=!1},d(D){D&&_(e),w&&w.d(),M&&M.d(),C&&C.d()}}}function cE(n,e,t){let i,r,s=$e,o=()=>(s(),s=Dt(a,m=>t(4,r=m)),a);He(n,Nn,m=>t(3,i=m)),n.$$.on_destroy.push(()=>s());let{coordinateStore:a}=e;o();let{showZeroWhenNoData:l=!0}=e,h=!1;const d=()=>t(2,h=!h);return n.$$set=m=>{"coordinateStore"in m&&o(t(0,a=m.coordinateStore)),"showZeroWhenNoData"in m&&t(1,l=m.showZeroWhenNoData)},[a,l,h,i,r,d]}class c0 extends Wt{constructor(e){super(),Xt(this,e,cE,uE,zt,{coordinateStore:0,showZeroWhenNoData:1})}}function _1(n){var d;let e,t=((d=n[3])==null?void 0:d.updatesPerUnit.toFixed(1))+"",i,r,s=n[5].counterPeriodSecs+"",o,a=n[8]("units.sec")+"",l,h;return{c(){e=A("p"),i=he(t),r=he(" / "),o=he(s),l=he(a),this.h()},l(m){e=R(m,"P",{class:!0,style:!0});var v=T(e);i=fe(v,t),r=fe(v," / "),o=fe(v,s),l=fe(v,a),v.forEach(_),this.h()},h(){var m;g(e,"class","bubble svelte-6o2ej4"),g(e,"style",h=((m=n[3])==null?void 0:m.updatesPerUnit)==0?"background-color: #d66":"")},m(m,v){Z(m,e,v),p(e,i),p(e,r),p(e,o),p(e,l)},p(m,v){var k,w;v&8&&t!==(t=((k=m[3])==null?void 0:k.updatesPerUnit.toFixed(1))+"")&&Ee(i,t),v&32&&s!==(s=m[5].counterPeriodSecs+"")&&Ee(o,s),v&256&&a!==(a=m[8]("units.sec")+"")&&Ee(l,a),v&8&&h!==(h=((w=m[3])==null?void 0:w.updatesPerUnit)==0?"background-color: #d66":"")&&g(e,"style",h)},d(m){m&&_(e)}}}function p1(n){var h,d;let e,t,i=n[8]("aircraftView.callsign")+"",r,s,o,a=(((d=(h=n[2])==null?void 0:h.data)==null?void 0:d.callsign.toUpperCase())||"")+"",l;return{c(){e=A("div"),t=A("b"),r=he(i),s=ee(),o=A("p"),l=he(a),this.h()},l(m){e=R(m,"DIV",{class:!0,style:!0});var v=T(e);t=R(v,"B",{style:!0});var k=T(t);r=fe(k,i),k.forEach(_),s=te(v),o=R(v,"P",{style:!0});var w=T(o);l=fe(w,a),w.forEach(_),v.forEach(_),this.h()},h(){B(t,"font-size","12px"),B(o,"font-size","18px"),g(e,"class","column info-row svelte-6o2ej4"),B(e,"background-color","#445"),B(e,"position","sticky"),B(e,"top","0px")},m(m,v){Z(m,e,v),p(e,t),p(t,r),p(e,s),p(e,o),p(o,l)},p(m,v){var k,w;v&256&&i!==(i=m[8]("aircraftView.callsign")+"")&&Ee(r,i),v&4&&a!==(a=(((w=(k=m[2])==null?void 0:k.data)==null?void 0:w.callsign.toUpperCase())||"")+"")&&Ee(l,a)},d(m){m&&_(e)}}}function v1(n){let e,t,i,r,s,o,a,l,h,d,m,v,k,w,E,I=n[8]("aircraftView.sensorSeeingAircraft")+"",M,C,D,O=n[4].name+"",P,F,V=n[6]&&y1(n);return{c(){e=A("div"),t=ee(),i=A("div"),r=Re("svg"),s=Re("desc"),o=he("Created with Sketch."),a=Re("defs"),l=Re("g"),h=Re("g"),d=Re("g"),m=Re("path"),v=ee(),k=A("div"),w=A("div"),E=A("b"),M=he(I),C=ee(),D=A("p"),P=he(O),F=ee(),V&&V.c(),this.h()},l($){e=R($,"DIV",{class:!0}),T(e).forEach(_),t=te($),i=R($,"DIV",{class:!0});var G=T(i);r=Oe(G,"svg",{style:!0,xmlns:!0,"xmlns:xlink":!0,width:!0,height:!0,viewBox:!0,version:!0});var U=T(r);s=Oe(U,"desc",{});var H=T(s);o=fe(H,"Created with Sketch."),H.forEach(_),a=Oe(U,"defs",{}),T(a).forEach(_),l=Oe(U,"g",{id:!0,stroke:!0,"stroke-width":!0,fill:!0,"fill-rule":!0});var j=T(l);h=Oe(j,"g",{id:!0,transform:!0,fill:!0});var Q=T(h);d=Oe(Q,"g",{id:!0,transform:!0});var W=T(d);m=Oe(W,"path",{d:!0,id:!0}),T(m).forEach(_),W.forEach(_),Q.forEach(_),j.forEach(_),U.forEach(_),v=te(G),k=R(G,"DIV",{class:!0});var Y=T(k);w=R(Y,"DIV",{class:!0});var q=T(w);E=R(q,"B",{});var ne=T(E);M=fe(ne,I),ne.forEach(_),C=te(q),D=R(q,"P",{});var J=T(D);P=fe(J,O),J.forEach(_),q.forEach(_),F=te(Y),V&&V.l(Y),Y.forEach(_),G.forEach(_),this.h()},h(){g(e,"class","sep"),g(m,"d","M95.4324393,3487.63833 C95.4094393,3487.61278 95.3924393,3487.58428 95.3674393,3487.55971 L95.3634393,3487.56265 C94.5824393,3486.79509 93.2434393,3486.86683 92.5364393,3487.56167 C91.8294393,3488.25651 91.8314393,3489.64423 92.5384393,3490.33907 C92.5474393,3490.34791 92.5584393,3490.35381 92.5674393,3490.36265 C92.5914393,3490.38722 92.6084393,3490.41671 92.6334393,3490.44128 L92.6364393,3490.43735 C93.4174393,3491.20491 94.7564393,3491.13415 95.4634393,3490.43833 C96.1704393,3489.74349 96.1684393,3488.35577 95.4614393,3487.66093 C95.4524393,3487.65209 95.4414393,3487.64717 95.4324393,3487.63833 M91.1194393,3486.17002 L89.7054393,3484.77936 C87.5844393,3486.86486 87.6834393,3491.13612 89.8044393,3493.22064 L91.2184393,3491.83096 C89.8044393,3490.44128 89.7054393,3487.55971 91.1194393,3486.17002 M88.2914393,3483.38968 L86.8774393,3482 C82.6344393,3486.17002 83.4404393,3492.5258 86.9764393,3496 L88.3904393,3494.61032 C85.5624393,3491.83096 85.4634393,3486.17002 88.2914393,3483.38968 M98.1954393,3484.77936 L96.7814393,3486.17002 C98.1954393,3487.55971 98.2944393,3490.44128 96.8804393,3491.83096 L98.2944393,3493.22064 C100.415439,3491.13612 100.316439,3486.86486 98.1954393,3484.77936 M101.122439,3496 L99.7084393,3494.61032 C102.537439,3491.83096 102.438439,3486.17002 99.6094393,3483.38968 L101.023439,3482 C104.559439,3485.47518 105.365439,3491.83096 101.122439,3496"),g(m,"id","radio_signal-[#1026]"),g(d,"id","icons"),g(d,"transform","translate(56.000000, 160.000000)"),g(h,"id","Dribbble-Light-Preview"),g(h,"transform","translate(-140.000000, -3642.000000)"),g(h,"fill","#000000"),g(l,"id","Page-1"),g(l,"stroke","none"),g(l,"stroke-width","1"),g(l,"fill","none"),g(l,"fill-rule","evenodd"),B(r,"width","40px"),B(r,"height","40px"),B(r,"padding","8px"),g(r,"xmlns","http://www.w3.org/2000/svg"),g(r,"xmlns:xlink","http://www.w3.org/1999/xlink"),g(r,"width","800px"),g(r,"height","800px"),g(r,"viewBox","0 -3 20 20"),g(r,"version","1.1"),g(w,"class","column grow"),g(k,"class","row center-cross g8 width100"),g(i,"class","row g8 p816 hoverable")},m($,G){Z($,e,G),Z($,t,G),Z($,i,G),p(i,r),p(r,s),p(s,o),p(r,a),p(r,l),p(l,h),p(h,d),p(d,m),p(i,v),p(i,k),p(k,w),p(w,E),p(E,M),p(w,C),p(w,D),p(D,P),p(k,F),V&&V.m(k,null)},p($,G){G&256&&I!==(I=$[8]("aircraftView.sensorSeeingAircraft")+"")&&Ee(M,I),G&16&&O!==(O=$[4].name+"")&&Ee(P,O),$[6]?V?V.p($,G):(V=y1($),V.c(),V.m(k,null)):V&&(V.d(1),V=null)},d($){$&&(_(e),_(t),_(i)),V&&V.d()}}}function y1(n){let e,t=n[6]<1?(n[6]*1e3).toFixed(0)+" m":n[6].toFixed(2)+" km",i,r;return{c(){e=A("p"),i=he(t),this.h()},l(s){e=R(s,"P",{class:!0,style:!0});var o=T(e);i=fe(o,t),o.forEach(_),this.h()},h(){var s;g(e,"class","bubble svelte-6o2ej4"),g(e,"style",r=((s=n[3])==null?void 0:s.updatesPerUnit)==0?"background-color: #f55":"")},m(s,o){Z(s,e,o),p(e,i)},p(s,o){var a;o&64&&t!==(t=s[6]<1?(s[6]*1e3).toFixed(0)+" m":s[6].toFixed(2)+" km")&&Ee(i,t),o&8&&r!==(r=((a=s[3])==null?void 0:a.updatesPerUnit)==0?"background-color: #f55":"")&&g(e,"style",r)},d(s){s&&_(e)}}}function hE(n){let e,t,i,r,s,o,a,l,h,d,m,v,k,w=n[8]("aircraftView.focusAircraftOnMap")+"",E;return{c(){e=Re("svg"),t=Re("g"),i=Re("g"),r=Re("g"),s=Re("path"),o=Re("path"),a=Re("path"),l=Re("path"),h=Re("path"),d=Re("path"),m=Re("path"),v=ee(),k=A("b"),E=he(w),this.h()},l(I){e=Oe(I,"svg",{viewBox:!0,fill:!0,xmlns:!0});var M=T(e);t=Oe(M,"g",{id:!0,"stroke-width":!0}),T(t).forEach(_),i=Oe(M,"g",{id:!0,"stroke-linecap":!0,"stroke-linejoin":!0}),T(i).forEach(_),r=Oe(M,"g",{id:!0});var C=T(r);s=Oe(C,"path",{opacity:!0,"fill-rule":!0,"clip-rule":!0,d:!0,fill:!0}),T(s).forEach(_),o=Oe(C,"path",{d:!0,stroke:!0,"stroke-width":!0}),T(o).forEach(_),a=Oe(C,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0}),T(a).forEach(_),l=Oe(C,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0}),T(l).forEach(_),h=Oe(C,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0}),T(h).forEach(_),d=Oe(C,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0}),T(d).forEach(_),m=Oe(C,"path",{d:!0,stroke:!0,"stroke-width":!0}),T(m).forEach(_),C.forEach(_),M.forEach(_),v=te(I),k=R(I,"B",{});var D=T(k);E=fe(D,w),D.forEach(_),this.h()},h(){g(t,"id","SVGRepo_bgCarrier"),g(t,"stroke-width","0"),g(i,"id","SVGRepo_tracerCarrier"),g(i,"stroke-linecap","round"),g(i,"stroke-linejoin","round"),g(s,"opacity","0.1"),g(s,"fill-rule","evenodd"),g(s,"clip-rule","evenodd"),g(s,"d","M12 5C8.13401 5 5 8.13401 5 12C5 15.866 8.13401 19 12 19C15.866 19 19 15.866 19 12C19 8.13401 15.866 5 12 5ZM12 8.75C10.2051 8.75 8.75 10.2051 8.75 12C8.75 13.7949 10.2051 15.25 12 15.25C13.7949 15.25 15.25 13.7949 15.25 12C15.25 10.2051 13.7949 8.75 12 8.75Z"),g(s,"fill","#000000"),g(o,"d","M19 12C19 15.866 15.866 19 12 19C8.13401 19 5 15.866 5 12C5 8.13401 8.13401 5 12 5C15.866 5 19 8.13401 19 12Z"),g(o,"stroke","#000000"),g(o,"stroke-width","2"),g(a,"d","M19 12H21"),g(a,"stroke","#000000"),g(a,"stroke-width","2"),g(a,"stroke-linecap","round"),g(a,"stroke-linejoin","round"),g(l,"d","M3 12H5"),g(l,"stroke","#000000"),g(l,"stroke-width","2"),g(l,"stroke-linecap","round"),g(l,"stroke-linejoin","round"),g(h,"d","M12 19L12 21"),g(h,"stroke","#000000"),g(h,"stroke-width","2"),g(h,"stroke-linecap","round"),g(h,"stroke-linejoin","round"),g(d,"d","M12 3L12 5"),g(d,"stroke","#000000"),g(d,"stroke-width","2"),g(d,"stroke-linecap","round"),g(d,"stroke-linejoin","round"),g(m,"d","M15 12C15 13.6569 13.6569 15 12 15C10.3431 15 9 13.6569 9 12C9 10.3431 10.3431 9 12 9C13.6569 9 15 10.3431 15 12Z"),g(m,"stroke","#000000"),g(m,"stroke-width","2"),g(r,"id","SVGRepo_iconCarrier"),g(e,"viewBox","0 0 24 24"),g(e,"fill","none"),g(e,"xmlns","http://www.w3.org/2000/svg")},m(I,M){Z(I,e,M),p(e,t),p(e,i),p(e,r),p(r,s),p(r,o),p(r,a),p(r,l),p(r,h),p(r,d),p(r,m),Z(I,v,M),Z(I,k,M),p(k,E)},p(I,M){M&256&&w!==(w=I[8]("aircraftView.focusAircraftOnMap")+"")&&Ee(E,w)},d(I){I&&(_(e),_(v),_(k))}}}function fE(n){var ft,Ut,Qe,yt,mt,Ft,qt,vt,$t,dn,sn,pn;let e,t,i,r,s,o,a,l,h,d,m=((ft=n[2])==null?void 0:ft.data.icao.toUpperCase())+"",v,k,w,E,I,M=(Ut=n[9])==null?void 0:Ut.hasPermission(100),C,D,O,P,F,V,$,G,U=n[8]("aircraftView.icao")+"",H,j,Q,W=((Qe=n[2])==null?void 0:Qe.data.icao.toUpperCase())+"",Y,q,ne,J,ge,ie,le,pe,ye,be,re,me,ke,X,ue=n[8]("aircraftView.height")+"",_e,oe,ae,Se=((mt=(yt=n[3])==null?void 0:yt.lastUpdate)!=null&&mt.h?(n[3].lastUpdate.h*.3048).toFixed(0):"")+"",Me,we,Te,Ae=n[4]&&((Ft=n[9])==null?void 0:Ft.hasPermission(200)),Ne,De,_t,Fe,Pe,je=n[8]("aircraftView.showOnMap")+"",Ve,Ue,Ke,We,ze=n[3]&&_1(n),Et=M&&p1(n);ne=new c0({props:{coordinateStore:n[10]}});let rt=Ae&&v1(n);return Ke=new fn({props:{class:"noselect action",enabledClass:"hoverable",onclick:n[19],disabled:!(($t=(vt=(qt=n[3])==null?void 0:qt.lastUpdate)==null?void 0:vt.dc)!=null&&$t.lat&&((pn=(sn=(dn=n[3])==null?void 0:dn.lastUpdate)==null?void 0:sn.dc)!=null&&pn.lng)),$$slots:{default:[hE]},$$scope:{ctx:n}}}),{c(){e=A("div"),t=A("img"),r=ee(),s=A("div"),o=ee(),a=A("div"),l=A("div"),h=A("div"),d=A("p"),v=he(m),k=ee(),ze&&ze.c(),w=ee(),E=A("div"),I=ee(),Et&&Et.c(),C=ee(),D=A("div"),O=A("div"),P=Re("svg"),F=Re("path"),V=ee(),$=A("div"),G=A("b"),H=he(U),j=ee(),Q=A("p"),Y=he(W),q=ee(),st(ne.$$.fragment),J=ee(),ge=A("div"),ie=Re("svg"),le=Re("g"),pe=Re("g"),ye=Re("g"),be=Re("path"),re=ee(),me=A("div"),ke=A("div"),X=A("b"),_e=he(ue),oe=ee(),ae=A("p"),Me=he(Se),we=he(" m"),Te=ee(),rt&&rt.c(),Ne=ee(),De=A("div"),_t=ee(),Fe=A("div"),Pe=A("p"),Ve=he(je),Ue=ee(),st(Ke.$$.fragment),this.h()},l(Ye){e=R(Ye,"DIV",{class:!0});var Vt=T(e);t=R(Vt,"IMG",{class:!0,src:!0,alt:!0}),r=te(Vt),s=R(Vt,"DIV",{class:!0}),T(s).forEach(_),o=te(Vt),a=R(Vt,"DIV",{class:!0});var Mt=T(a);l=R(Mt,"DIV",{class:!0,style:!0});var Rt=T(l);h=R(Rt,"DIV",{class:!0});var gt=T(h);d=R(gt,"P",{class:!0,style:!0});var it=T(d);v=fe(it,m),it.forEach(_),k=te(gt),ze&&ze.l(gt),w=te(gt),E=R(gt,"DIV",{class:!0}),T(E).forEach(_),gt.forEach(_),Rt.forEach(_),Mt.forEach(_),Vt.forEach(_),I=te(Ye),Et&&Et.l(Ye),C=te(Ye),D=R(Ye,"DIV",{class:!0});var St=T(D);O=R(St,"DIV",{class:!0});var Jt=T(O);P=Oe(Jt,"svg",{style:!0,xmlns:!0,fill:!0,width:!0,height:!0,viewBox:!0});var ut=T(P);F=Oe(ut,"path",{d:!0}),T(F).forEach(_),ut.forEach(_),V=te(Jt),$=R(Jt,"DIV",{class:!0});var jt=T($);G=R(jt,"B",{});var gn=T(G);H=fe(gn,U),gn.forEach(_),j=te(jt),Q=R(jt,"P",{});var Be=T(Q);Y=fe(Be,W),Be.forEach(_),jt.forEach(_),Jt.forEach(_),q=te(St),ot(ne.$$.fragment,St),J=te(St),ge=R(St,"DIV",{class:!0});var tt=T(ge);ie=Oe(tt,"svg",{style:!0,fill:!0,viewBox:!0,xmlns:!0});var en=T(ie);le=Oe(en,"g",{id:!0,"stroke-width":!0}),T(le).forEach(_),pe=Oe(en,"g",{id:!0,"stroke-linecap":!0,"stroke-linejoin":!0}),T(pe).forEach(_),ye=Oe(en,"g",{id:!0});var Fn=T(ye);be=Oe(Fn,"path",{d:!0}),T(be).forEach(_),Fn.forEach(_),en.forEach(_),re=te(tt),me=R(tt,"DIV",{class:!0});var Vn=T(me);ke=R(Vn,"DIV",{class:!0});var Zt=T(ke);X=R(Zt,"B",{});var cn=T(X);_e=fe(cn,ue),cn.forEach(_),Zt.forEach(_),oe=te(Vn),ae=R(Vn,"P",{});var Un=T(ae);Me=fe(Un,Se),we=fe(Un," m"),Un.forEach(_),Vn.forEach(_),tt.forEach(_),Te=te(St),rt&&rt.l(St),St.forEach(_),Ne=te(Ye),De=R(Ye,"DIV",{class:!0}),T(De).forEach(_),_t=te(Ye),Fe=R(Ye,"DIV",{class:!0});var mn=T(Fe);Pe=R(mn,"P",{class:!0,style:!0});var tn=T(Pe);Ve=fe(tn,je),tn.forEach(_),mn.forEach(_),Ue=te(Ye),ot(Ke.$$.fragment,Ye),this.h()},h(){g(t,"class","background svelte-6o2ej4"),zi(t.src,i="/plane.jpg")||g(t,"src",i),g(t,"alt","Plane"),g(s,"class","gradient svelte-6o2ej4"),g(d,"class","truncate"),B(d,"font-size","21px"),B(d,"max-width","26ch"),g(E,"class","grow"),g(h,"class","row center-cross g8 width100"),g(l,"class","row center-cross g8 p816"),B(l,"width","100%"),g(a,"class","overlay svelte-6o2ej4"),g(e,"class","header svelte-6o2ej4"),g(F,"d","M0 2.53h2.49v10.95H0zm11 0h2.49v10.95H11zm-6.02 0h1.24v10.95H4.98zm2.49 0h1.24v10.95H7.47zm7.29 0H16v10.95h-1.24z"),B(P,"width","40px"),B(P,"height","40px"),B(P,"padding","8px"),g(P,"xmlns","http://www.w3.org/2000/svg"),g(P,"fill","#000000"),g(P,"width","800px"),g(P,"height","800px"),g(P,"viewBox","0 0 16 16"),g($,"class","column"),g(O,"class","row g8 p816 hoverable"),g(le,"id","SVGRepo_bgCarrier"),g(le,"stroke-width","0"),g(pe,"id","SVGRepo_tracerCarrier"),g(pe,"stroke-linecap","round"),g(pe,"stroke-linejoin","round"),g(be,"d","M4,20H20a1,1,0,0,1,0,2H4a1,1,0,0,1,0-2Zm9-3V5.414l2.293,2.293a1,1,0,0,0,1.414-1.414l-4-4a1,1,0,0,0-.325-.216.986.986,0,0,0-.764,0,1,1,0,0,0-.325.216l-4,4A1,1,0,1,0,8.707,7.707L11,5.414V17a1,1,0,0,0,2,0Z"),g(ye,"id","SVGRepo_iconCarrier"),B(ie,"width","40px"),B(ie,"height","40px"),B(ie,"padding","8px"),g(ie,"fill","#000000"),g(ie,"viewBox","0 0 24 24"),g(ie,"xmlns","http://www.w3.org/2000/svg"),g(ke,"class","line center-cross g8"),g(me,"class","column grow"),g(ge,"class","row g8 p816 hoverable"),g(D,"class","column"),g(De,"class","sep"),g(Pe,"class","p816 grow"),B(Pe,"font-size","12px"),B(Pe,"color","#888"),B(Pe,"text-transform","uppercase"),g(Fe,"class","row g8 width100")},m(Ye,Vt){Z(Ye,e,Vt),p(e,t),p(e,r),p(e,s),p(e,o),p(e,a),p(a,l),p(l,h),p(h,d),p(d,v),p(h,k),ze&&ze.m(h,null),p(h,w),p(h,E),Z(Ye,I,Vt),Et&&Et.m(Ye,Vt),Z(Ye,C,Vt),Z(Ye,D,Vt),p(D,O),p(O,P),p(P,F),p(O,V),p(O,$),p($,G),p(G,H),p($,j),p($,Q),p(Q,Y),p(D,q),at(ne,D,null),p(D,J),p(D,ge),p(ge,ie),p(ie,le),p(ie,pe),p(ie,ye),p(ye,be),p(ge,re),p(ge,me),p(me,ke),p(ke,X),p(X,_e),p(me,oe),p(me,ae),p(ae,Me),p(ae,we),p(D,Te),rt&&rt.m(D,null),Z(Ye,Ne,Vt),Z(Ye,De,Vt),Z(Ye,_t,Vt),Z(Ye,Fe,Vt),p(Fe,Pe),p(Pe,Ve),Z(Ye,Ue,Vt),at(Ke,Ye,Vt),We=!0},p(Ye,[Vt]){var Rt,gt,it,St,Jt,ut,jt,gn,Be,tt,en,Fn;(!We||Vt&4)&&m!==(m=((Rt=Ye[2])==null?void 0:Rt.data.icao.toUpperCase())+"")&&Ee(v,m),Ye[3]?ze?ze.p(Ye,Vt):(ze=_1(Ye),ze.c(),ze.m(h,w)):ze&&(ze.d(1),ze=null),Vt&512&&(M=(gt=Ye[9])==null?void 0:gt.hasPermission(100)),M?Et?Et.p(Ye,Vt):(Et=p1(Ye),Et.c(),Et.m(C.parentNode,C)):Et&&(Et.d(1),Et=null),(!We||Vt&256)&&U!==(U=Ye[8]("aircraftView.icao")+"")&&Ee(H,U),(!We||Vt&4)&&W!==(W=((it=Ye[2])==null?void 0:it.data.icao.toUpperCase())+"")&&Ee(Y,W),(!We||Vt&256)&&ue!==(ue=Ye[8]("aircraftView.height")+"")&&Ee(_e,ue),(!We||Vt&8)&&Se!==(Se=((Jt=(St=Ye[3])==null?void 0:St.lastUpdate)!=null&&Jt.h?(Ye[3].lastUpdate.h*.3048).toFixed(0):"")+"")&&Ee(Me,Se),Vt&528&&(Ae=Ye[4]&&((ut=Ye[9])==null?void 0:ut.hasPermission(200))),Ae?rt?rt.p(Ye,Vt):(rt=v1(Ye),rt.c(),rt.m(D,null)):rt&&(rt.d(1),rt=null),(!We||Vt&256)&&je!==(je=Ye[8]("aircraftView.showOnMap")+"")&&Ee(Ve,je);const Mt={};Vt&8&&(Mt.disabled=!((Be=(gn=(jt=Ye[3])==null?void 0:jt.lastUpdate)==null?void 0:gn.dc)!=null&&Be.lat&&((Fn=(en=(tt=Ye[3])==null?void 0:tt.lastUpdate)==null?void 0:en.dc)!=null&&Fn.lng))),Vt&2097408&&(Mt.$$scope={dirty:Vt,ctx:Ye}),Ke.$set(Mt)},i(Ye){We||(de(ne.$$.fragment,Ye),de(Ke.$$.fragment,Ye),We=!0)},o(Ye){Ie(ne.$$.fragment,Ye),Ie(Ke.$$.fragment,Ye),We=!1},d(Ye){Ye&&(_(e),_(I),_(C),_(D),_(Ne),_(De),_(_t),_(Fe),_(Ue)),ze&&ze.d(),Et&&Et.d(Ye),lt(ne),rt&&rt.d(),lt(Ke,Ye)}}}function dE(n,e,t){let i,r,s=$e,o=()=>(s(),s=Dt(i,W=>t(3,r=W)),i),a,l,h,d,m=$e,v=()=>(m(),m=Dt(P,W=>t(18,d=W)),P),k,w=$e,E=()=>(w(),w=Dt(O,W=>t(5,k=W)),O),I,M;He(n,nn,W=>t(16,l=W)),He(n,bi,W=>t(17,h=W)),He(n,Nn,W=>t(8,I=W)),He(n,Li,W=>t(9,M=W)),n.$$.on_destroy.push(()=>s()),n.$$.on_destroy.push(()=>m()),n.$$.on_destroy.push(()=>w());let{iconSet:C}=e,{map:D}=e,{trafficService:O}=e;E();let{sensorsAreas:P}=e;v();let{aircraftInfo:F}=e;const V=Pn(null),$=Pn(null);He(n,$,W=>t(4,a=W));const G=new Yl;ls(()=>G.onDestroy());let U=null,H=null;function j(W){var Y,q,ne,J,ge;!((q=(Y=r==null?void 0:r.lastUpdate)==null?void 0:Y.dc)!=null&&q.lat)||!((J=(ne=r==null?void 0:r.lastUpdate)==null?void 0:ne.dc)!=null&&J.lng)||(ii.settings.fields.manned_aircrafts_layer_shown.set(!0),D.panTo([r.lastUpdate.dc.lat,r.lastUpdate.dc.lng]),document.body.clientWidth<800&&((ge=W==null?void 0:W.target)==null||ge.dispatchEvent(new CustomEvent("sidebar-collapse",{bubbles:!0}))))}const Q=W=>j(W);return n.$$set=W=>{"iconSet"in W&&t(13,C=W.iconSet),"map"in W&&t(14,D=W.map),"trafficService"in W&&E(t(0,O=W.trafficService)),"sensorsAreas"in W&&v(t(1,P=W.sensorsAreas)),"aircraftInfo"in W&&t(2,F=W.aircraftInfo)},n.$$.update=()=>{var W,Y,q;n.$$.dirty&65568&&o(t(7,i=k?k.subscribeToDrone((l==null?void 0:l.type)==Tt.AircraftView?l==null?void 0:l.aid:""):null)),n.$$.dirty&131080&&h&&(W=r==null?void 0:r.lastUpdate)!=null&&W.dc&&r.lastUpdate.dc.lat&&r.lastUpdate.dc.lng&&V.set(r.lastUpdate.dc),n.$$.dirty&393216&&kn($,a=null,a),n.$$.dirty&262152&&d&&(Y=r==null?void 0:r.lastUpdate)!=null&&Y.sensorID&&G.swap(d.sensors.onNewValues(ne=>{var ge,ie;if(!((ge=r==null?void 0:r.lastUpdate)!=null&&ge.sensorID))return;const J=ne.get((ie=r==null?void 0:r.lastUpdate)==null?void 0:ie.sensorID);$.set(J??null)})),n.$$.dirty&98304&&(l==null?void 0:l.type)==Tt.AircraftView&&((U==null?void 0:U.type)!==Tt.AircraftView||l.flightId!=(U==null?void 0:U.flightId))&&t(15,U={...l}),n.$$.dirty&393216&&t(6,H=null),n.$$.dirty&196632&&h&&(q=r==null?void 0:r.lastUpdate)!=null&&q.dc&&a!=null&&a.location&&(l==null?void 0:l.type)==Tt.AircraftView&&t(6,H=nh(r.lastUpdate.dc,a.location))},[O,P,F,r,a,k,H,i,I,M,V,$,j,C,D,U,l,h,d,Q]}class gE extends Wt{constructor(e){super(),Xt(this,e,dE,fE,zt,{iconSet:13,map:14,trafficService:0,sensorsAreas:1,aircraftInfo:2})}}const mE={year:"numeric",month:"2-digit",day:"2-digit"},Z3={hour:"numeric",minute:"numeric",hour12:!1},_E={...mE,...Z3},pE={month:"2-digit",day:"2-digit"};function b1(n){return new Date(n).toLocaleString("et-EE",_E)}function Co(n){return new Date(n).toLocaleTimeString("et-EE",Z3)}function Vs(n){const e=Math.floor(n/3600),t=Math.floor(n%3600/60),i=Math.floor(n%60);let r="";return e>0&&(r+=e+"h "),t>0&&(r+=t+"m "),r+=i+"s",r}function Ys(n){return n<10?"0"+n:n}const Y3=(n,e,t=!0,i=!0)=>{const r=new Date,s=new Date(r.getFullYear(),r.getMonth(),r.getDate()),o=new Date(s);o.setDate(s.getDate()+1);const a=new Date(s);a.setDate(s.getDate()-1);const l=new Date(e.getFullYear(),e.getMonth(),e.getDate());if(l.getTime()===s.getTime())return i?n("geofenceView.today"):n("geofenceView.today").toLowerCase();if(l.getTime()===o.getTime())return i?n("geofenceView.tomorrow"):n("geofenceView.tomorrow").toLowerCase();if(l.getTime()===a.getTime())return i?n("geofenceView.yesterday"):n("geofenceView.yesterday").toLowerCase();const h={day:"2-digit",month:"2-digit"};return(t||e.getFullYear()!==r.getFullYear())&&(h.year="numeric"),e.toLocaleDateString("et-EE",h)},Ci=(n,e,t=!0,i=!0)=>{const r=Y3(n,e,t,i),s=e.toLocaleTimeString("et-EE",If);return`${r} ${n("geofenceView.time")} ${s}`},If={hour:"2-digit",minute:"2-digit",hour12:!1};function j3(n,e,t,i=!1){if(e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()){const a=e.toLocaleTimeString("et-EE",If),l=t.toLocaleTimeString("et-EE",If);return`${Y3(n,e,!i)} ${a}  ${l}`}const s=Ci(n,e,!i),o=Ci(n,t,!i);return`${s}  ${o}`}function w1(n,e,t){return e=e??0,t=t??0,!e&&!t?n("geofences.heightUnlimited"):e&&!t?n("geofences.heightMin",{values:{min:e}}):!e&&t?n("geofences.heightMax",{values:{max:t}}):n("geofences.heightRange",{values:{min:e,max:t}})}function k1(n,e){console.log("db16: formatUnixToHumanDate: unixTimestampMs =",e);const t=new Date(e),i=new Date,r=Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()),s=Date.UTC(i.getFullYear(),i.getMonth(),i.getDate());return r===s?n("history.todays"):r===s-864e5?n("history.yesterdays"):t.toLocaleDateString("et-EE",pE)}function W3(n,e){if(n!==null&&(n*=1e3,!(n<e.s)&&!(n>e.e)))return Math.max((n-e.s)/(e.e-e.s)*100,0)}function vE(n,e){if(n!==null&&(n*=1e3,!(n<e.start)&&!(n>e.end)))return Math.max((n-e.start)/(e.end-e.start)*100,0)}function E1(n,e,t){const i=n.slice();i[36]=e[t];const r=i[36].color==="red";return i[37]=r,i}function S1(n,e,t){const i=n.slice();return i[40]=e[t],i}function I1(n){let e,t,i,r,s,o,a,l,h,d,m,v,k,w,E,I,M,C,D,O,P=n[17]&&n[15]!==null&&M1(n),F=n[4]&&n[3]<120&&n[8]>=120&&T1(n),V=Bt(n[13]),$=[];for(let q=0;q<V.length;q+=1)$[q]=L1(S1(n,V,q));let G=Bt(n[14]),U=[];for(let q=0;q<G.length;q+=1)U[q]=C1(E1(n,G,q));function H(q,ne){return q[17]?bE:yE}let j=H(n),Q=j(n),W=n[9]&&N1(n),Y=n[7]&&A1(n);return{c(){e=A("div"),P&&P.c(),t=ee(),i=Re("svg"),r=Re("defs"),s=Re("linearGradient"),o=Re("stop"),a=Re("stop"),l=Re("linearGradient"),h=Re("stop"),d=Re("stop"),m=Re("line"),v=Re("line"),F&&F.c(),k=dt();for(let q=0;q<$.length;q+=1)$[q].c();w=dt();for(let q=0;q<U.length;q+=1)U[q].c();I=ee(),Q.c(),M=ee(),W&&W.c(),C=ee(),Y&&Y.c(),this.h()},l(q){e=R(q,"DIV",{class:!0,style:!0});var ne=T(e);P&&P.l(ne),t=te(ne),i=Oe(ne,"svg",{viewBox:!0,preserveAspectRatio:!0,style:!0});var J=T(i);r=Oe(J,"defs",{});var ge=T(r);s=Oe(ge,"linearGradient",{id:!0,x1:!0,y1:!0,x2:!0,y2:!0});var ie=T(s);o=Oe(ie,"stop",{offset:!0,style:!0}),T(o).forEach(_),a=Oe(ie,"stop",{offset:!0,style:!0}),T(a).forEach(_),ie.forEach(_),l=Oe(ge,"linearGradient",{id:!0,x1:!0,y1:!0,x2:!0,y2:!0});var le=T(l);h=Oe(le,"stop",{offset:!0,style:!0}),T(h).forEach(_),d=Oe(le,"stop",{offset:!0,style:!0}),T(d).forEach(_),le.forEach(_),ge.forEach(_),m=Oe(J,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0,"vector-effect":!0}),T(m).forEach(_),v=Oe(J,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0,"vector-effect":!0}),T(v).forEach(_),F&&F.l(J),k=dt();for(let pe=0;pe<$.length;pe+=1)$[pe].l(J);w=dt();for(let pe=0;pe<U.length;pe+=1)U[pe].l(J);J.forEach(_),I=te(ne),Q.l(ne),M=te(ne),W&&W.l(ne),C=te(ne),Y&&Y.l(ne),ne.forEach(_),this.h()},h(){g(o,"offset","0%"),B(o,"stop-color","#447"),B(o,"stop-opacity","0.2"),g(a,"offset","100%"),B(a,"stop-color","#447"),B(a,"stop-opacity","0.02"),g(s,"id","heightGradient"),g(s,"x1","0%"),g(s,"y1","0%"),g(s,"x2","0%"),g(s,"y2","100%"),g(h,"offset","0%"),B(h,"stop-color","#e74c3c"),B(h,"stop-opacity","0.5"),g(d,"offset","100%"),B(d,"stop-color","#e74c3c"),B(d,"stop-opacity","0.05"),g(l,"id","redGradient"),g(l,"x1","0%"),g(l,"y1","0%"),g(l,"x2","0%"),g(l,"y2","100%"),g(m,"x1","0"),g(m,"y1",80),g(m,"x2",n[1]),g(m,"y2",80),g(m,"stroke","#ddd"),g(m,"stroke-width","0.5"),g(m,"vector-effect","non-scaling-stroke"),g(v,"x1","0"),g(v,"y1",8),g(v,"x2",n[1]),g(v,"y2",8),g(v,"stroke","#ddd"),g(v,"stroke-width","0.5"),g(v,"vector-effect","non-scaling-stroke"),g(i,"viewBox",E="-2 0 "+(n[1]+2)+" 88"),g(i,"preserveAspectRatio","none"),B(i,"width","100%"),B(i,"height","88px"),B(i,"padding","0px"),B(i,"z-index","1"),g(e,"class","rel height-graph row g8 width100 svelte-1r0j2iz"),B(e,"padding","0px 16px 0px 16px")},m(q,ne){Z(q,e,ne),P&&P.m(e,null),p(e,t),p(e,i),p(i,r),p(r,s),p(s,o),p(s,a),p(r,l),p(l,h),p(l,d),p(i,m),p(i,v),F&&F.m(i,null),p(i,k);for(let J=0;J<$.length;J+=1)$[J]&&$[J].m(i,null);p(i,w);for(let J=0;J<U.length;J+=1)U[J]&&U[J].m(i,null);p(e,I),Q.m(e,null),p(e,M),W&&W.m(e,null),p(e,C),Y&&Y.m(e,null),n[27](e),D||(O=[nt(i,"mousemove",n[20]),nt(i,"mouseleave",n[21]),nt(i,"click",n[22])],D=!0)},p(q,ne){if(q[17]&&q[15]!==null?P?P.p(q,ne):(P=M1(q),P.c(),P.m(e,t)):P&&(P.d(1),P=null),ne[0]&2&&g(m,"x2",q[1]),ne[0]&2&&g(v,"x2",q[1]),q[4]&&q[3]<120&&q[8]>=120?F?F.p(q,ne):(F=T1(q),F.c(),F.m(i,k)):F&&(F.d(1),F=null),ne[0]&8192){V=Bt(q[13]);let J;for(J=0;J<V.length;J+=1){const ge=S1(q,V,J);$[J]?$[J].p(ge,ne):($[J]=L1(ge),$[J].c(),$[J].m(i,w))}for(;J<$.length;J+=1)$[J].d(1);$.length=V.length}if(ne[0]&16384){G=Bt(q[14]);let J;for(J=0;J<G.length;J+=1){const ge=E1(q,G,J);U[J]?U[J].p(ge,ne):(U[J]=C1(ge),U[J].c(),U[J].m(i,null))}for(;J<U.length;J+=1)U[J].d(1);U.length=G.length}ne[0]&2&&E!==(E="-2 0 "+(q[1]+2)+" 88")&&g(i,"viewBox",E),j===(j=H(q))&&Q?Q.p(q,ne):(Q.d(1),Q=j(q),Q&&(Q.c(),Q.m(e,M))),q[9]?W?W.p(q,ne):(W=N1(q),W.c(),W.m(e,C)):W&&(W.d(1),W=null),q[7]?Y?Y.p(q,ne):(Y=A1(q),Y.c(),Y.m(e,null)):Y&&(Y.d(1),Y=null)},d(q){q&&_(e),P&&P.d(),F&&F.d(),ui($,q),ui(U,q),Q.d(),W&&W.d(),Y&&Y.d(),n[27](null),D=!1,Bn(O)}}}function M1(n){let e,t,i,r,s;return{c(){e=Re("svg"),t=Re("line"),this.h()},l(o){e=Oe(o,"svg",{style:!0,preserveAspectRatio:!0,viewBox:!0});var a=T(e);t=Oe(a,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0,"vector-effect":!0}),T(t).forEach(_),a.forEach(_),this.h()},h(){g(t,"x1","0"),g(t,"y1",i=(n[15]||0)*100),g(t,"x2",n[1]),g(t,"y2",r=(n[15]||0)*100),g(t,"stroke","#d8d8d8"),g(t,"stroke-width","1"),g(t,"vector-effect","non-scaling-stroke"),B(e,"position","absolute"),B(e,"top","8px"),B(e,"left","16px"),B(e,"width","calc(100% - 8px - 24px - 32px)"),B(e,"height","calc(100% - 8px - "+Cl+"px)"),B(e,"pointer-events","none"),B(e,"z-index","0"),g(e,"preserveAspectRatio","none"),g(e,"viewBox",s="0 0 "+n[1]+" 100")},m(o,a){Z(o,e,a),p(e,t)},p(o,a){a[0]&32768&&i!==(i=(o[15]||0)*100)&&g(t,"y1",i),a[0]&2&&g(t,"x2",o[1]),a[0]&32768&&r!==(r=(o[15]||0)*100)&&g(t,"y2",r),a[0]&2&&s!==(s="0 0 "+o[1]+" 100")&&g(e,"viewBox",s)},d(o){o&&_(e)}}}function T1(n){let e,t,i;return{c(){e=Re("line"),this.h()},l(r){e=Oe(r,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0,"stroke-dasharray":!0,"vector-effect":!0}),T(e).forEach(_),this.h()},h(){g(e,"x1","0"),g(e,"y1",t=80-(120-n[3])/n[2]*72),g(e,"x2",n[1]),g(e,"y2",i=80-(120-n[3])/n[2]*72),g(e,"stroke","#f00a"),g(e,"stroke-width","0.5"),g(e,"stroke-dasharray","16,2"),g(e,"vector-effect","non-scaling-stroke")},m(r,s){Z(r,e,s)},p(r,s){s[0]&12&&t!==(t=80-(120-r[3])/r[2]*72)&&g(e,"y1",t),s[0]&2&&g(e,"x2",r[1]),s[0]&12&&i!==(i=80-(120-r[3])/r[2]*72)&&g(e,"y2",i)},d(r){r&&_(e)}}}function L1(n){let e,t;return{c(){e=Re("path"),this.h()},l(i){e=Oe(i,"path",{d:!0,fill:!0,stroke:!0,"stroke-width":!0,"stroke-dasharray":!0,"vector-effect":!0}),T(e).forEach(_),this.h()},h(){g(e,"d",t="M "+n[40].start.x+" "+(8+n[40].start.y)+" L "+n[40].end.x+" "+(8+n[40].end.y)),g(e,"fill","none"),g(e,"stroke","#888"),g(e,"stroke-width","1"),g(e,"stroke-dasharray","1,2"),g(e,"vector-effect","non-scaling-stroke")},m(i,r){Z(i,e,r)},p(i,r){r[0]&8192&&t!==(t="M "+i[40].start.x+" "+(8+i[40].start.y)+" L "+i[40].end.x+" "+(8+i[40].end.y))&&g(e,"d",t)},d(i){i&&_(e)}}}function C1(n){let e,t,i,r,s,o;return{c(){e=Re("path"),r=Re("path"),this.h()},l(a){e=Oe(a,"path",{d:!0,fill:!0,stroke:!0}),T(e).forEach(_),r=Oe(a,"path",{d:!0,fill:!0,stroke:!0,"stroke-width":!0,"vector-effect":!0}),T(r).forEach(_),this.h()},h(){g(e,"d",t=n[36].points.map(O1).join(" ")+" L "+n[36].points[n[36].points.length-1].x+" "+(80+Cl*2)+" L "+n[36].points[0].x+" "+(80+Cl*2)+" Z"),g(e,"fill",i=n[37]?"url(#redGradient)":"url(#heightGradient)"),g(e,"stroke","none"),g(r,"d",s=n[36].points.map(x1).join(" ")),g(r,"fill","none"),g(r,"stroke",o=n[37]?"#e74c3c":"#445"),g(r,"stroke-width","2"),g(r,"vector-effect","non-scaling-stroke")},m(a,l){Z(a,e,l),Z(a,r,l)},p(a,l){l[0]&16384&&t!==(t=a[36].points.map(O1).join(" ")+" L "+a[36].points[a[36].points.length-1].x+" "+(80+Cl*2)+" L "+a[36].points[0].x+" "+(80+Cl*2)+" Z")&&g(e,"d",t),l[0]&16384&&i!==(i=a[37]?"url(#redGradient)":"url(#heightGradient)")&&g(e,"fill",i),l[0]&16384&&s!==(s=a[36].points.map(x1).join(" "))&&g(r,"d",s),l[0]&16384&&o!==(o=a[37]?"#e74c3c":"#445")&&g(r,"stroke",o)},d(a){a&&(_(e),_(r))}}}function yE(n){let e;function t(s,o){return s[4]?kE:wE}let i=t(n),r=i(n);return{c(){e=A("div"),r.c(),this.h()},l(s){e=R(s,"DIV",{class:!0,style:!0});var o=T(e);r.l(o),o.forEach(_),this.h()},h(){g(e,"class","column g8 dont-shrink noselect"),B(e,"width","24px"),B(e,"justify-content","space-between"),B(e,"align-items","flex-start")},m(s,o){Z(s,e,o),r.m(e,null)},p(s,o){i===(i=t(s))&&r?r.p(s,o):(r.d(1),r=i(s),r&&(r.c(),r.m(e,null)))},d(s){s&&_(e),r.d()}}}function bE(n){let e,t=n[15]!==null&&P1(n);return{c(){e=A("div"),t&&t.c(),this.h()},l(i){e=R(i,"DIV",{class:!0,style:!0});var r=T(e);t&&t.l(r),r.forEach(_),this.h()},h(){g(e,"class","rel dont-shrink noselect"),B(e,"width","24px"),B(e,"margin-block","8px")},m(i,r){Z(i,e,r),t&&t.m(e,null)},p(i,r){i[15]!==null?t?t.p(i,r):(t=P1(i),t.c(),t.m(e,null)):t&&(t.d(1),t=null)},d(i){i&&_(e),t&&t.d()}}}function wE(n){let e,t=n[8].toFixed(0)+"",i;return{c(){e=A("p"),i=he(t),this.h()},l(r){e=R(r,"P",{style:!0,class:!0});var s=T(e);i=fe(s,t),s.forEach(_),this.h()},h(){B(e,"margin-block","auto"),g(e,"class","tick-label svelte-1r0j2iz")},m(r,s){Z(r,e,s),p(e,i)},p(r,s){s[0]&256&&t!==(t=r[8].toFixed(0)+"")&&Ee(i,t)},d(r){r&&_(e)}}}function kE(n){let e,t=n[8].toFixed(0)+"",i,r,s,o=n[3].toFixed(0)+"",a;return{c(){e=A("p"),i=he(t),r=ee(),s=A("p"),a=he(o),this.h()},l(l){e=R(l,"P",{class:!0});var h=T(e);i=fe(h,t),h.forEach(_),r=te(l),s=R(l,"P",{class:!0});var d=T(s);a=fe(d,o),d.forEach(_),this.h()},h(){g(e,"class","tick-label svelte-1r0j2iz"),g(s,"class","tick-label svelte-1r0j2iz")},m(l,h){Z(l,e,h),p(e,i),Z(l,r,h),Z(l,s,h),p(s,a)},p(l,h){h[0]&256&&t!==(t=l[8].toFixed(0)+"")&&Ee(i,t),h[0]&8&&o!==(o=l[3].toFixed(0)+"")&&Ee(a,o)},d(l){l&&(_(e),_(r),_(s))}}}function P1(n){let e,t=(n[8]-(n[15]||0)*(n[8]-n[3])).toFixed(0)+"",i;return{c(){e=A("p"),i=he(t),this.h()},l(r){e=R(r,"P",{style:!0,class:!0});var s=T(e);i=fe(s,t),s.forEach(_),this.h()},h(){B(e,"position","absolute"),B(e,"top",(n[15]||0)*100+"%"),B(e,"transform","translate(0, -50%)"),g(e,"class","tick-label svelte-1r0j2iz")},m(r,s){Z(r,e,s),p(e,i)},p(r,s){s[0]&33032&&t!==(t=(r[8]-(r[15]||0)*(r[8]-r[3])).toFixed(0)+"")&&Ee(i,t),s[0]&32768&&B(e,"top",(r[15]||0)*100+"%")},d(r){r&&_(e)}}}function N1(n){let e,t,i,r,s,o,a,l=n[15]!==null&&D1(n);return{c(){e=Re("svg"),t=Re("line"),l&&l.c(),s=Re("path"),this.h()},l(h){e=Oe(h,"svg",{style:!0,preserveAspectRatio:!0,viewBox:!0});var d=T(e);t=Oe(d,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0,"vector-effect":!0}),T(t).forEach(_),l&&l.l(d),s=Oe(d,"path",{d:!0,fill:!0}),T(s).forEach(_),d.forEach(_),this.h()},h(){g(t,"x1",i=n[9]*(n[1]-32)),g(t,"y1","8"),g(t,"x2",r=n[9]*(n[1]-32)),g(t,"y2","100"),g(t,"stroke","#f22"),g(t,"stroke-width","2"),g(t,"vector-effect","non-scaling-stroke"),g(s,"d",o="M "+(n[9]*(n[1]-32)-6)+" 0 L "+(n[9]*(n[1]-32)+6)+" 0 L "+n[9]*(n[1]-32)+" 8 Z"),g(s,"fill","#f22"),B(e,"position","absolute"),B(e,"top","0px"),B(e,"left","16px"),B(e,"width","calc(100% - 8px - 24px)"),B(e,"height","100%"),B(e,"pointer-events","none"),B(e,"z-index","0"),g(e,"preserveAspectRatio","none"),g(e,"viewBox",a="0 0 "+n[1]+" 100")},m(h,d){Z(h,e,d),p(e,t),l&&l.m(e,null),p(e,s)},p(h,d){d[0]&514&&i!==(i=h[9]*(h[1]-32))&&g(t,"x1",i),d[0]&514&&r!==(r=h[9]*(h[1]-32))&&g(t,"x2",r),h[15]!==null?l?l.p(h,d):(l=D1(h),l.c(),l.m(e,s)):l&&(l.d(1),l=null),d[0]&514&&o!==(o="M "+(h[9]*(h[1]-32)-6)+" 0 L "+(h[9]*(h[1]-32)+6)+" 0 L "+h[9]*(h[1]-32)+" 8 Z")&&g(s,"d",o),d[0]&2&&a!==(a="0 0 "+h[1]+" 100")&&g(e,"viewBox",a)},d(h){h&&_(e),l&&l.d()}}}function D1(n){let e,t,i;return{c(){e=Re("circle"),this.h()},l(r){e=Oe(r,"circle",{cx:!0,cy:!0,r:!0,fill:!0,"vector-effect":!0}),T(e).forEach(_),this.h()},h(){g(e,"cx",t=n[9]*(n[1]-32)),g(e,"cy",i=n[23](n[15])+2),g(e,"r","3"),g(e,"fill","#f22"),g(e,"vector-effect","non-scaling-stroke")},m(r,s){Z(r,e,s)},p(r,s){s[0]&514&&t!==(t=r[9]*(r[1]-32))&&g(e,"cx",t),s[0]&32768&&i!==(i=r[23](r[15])+2)&&g(e,"cy",i)},d(r){r&&_(e)}}}function A1(n){let e,t,i,r,s,o=n[12]!==null&&R1(n);return{c(){e=Re("svg"),t=Re("line"),o&&o.c(),this.h()},l(a){e=Oe(a,"svg",{style:!0,preserveAspectRatio:!0,viewBox:!0});var l=T(e);t=Oe(l,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0,"vector-effect":!0}),T(t).forEach(_),o&&o.l(l),l.forEach(_),this.h()},h(){g(t,"x1",i=(n[6]||0)/100*(n[1]-32)),g(t,"y1","8"),g(t,"x2",r=(n[6]||0)/100*(n[1]-32)),g(t,"y2","100"),g(t,"stroke","#f22"),g(t,"stroke-width","2"),g(t,"vector-effect","non-scaling-stroke"),B(e,"position","absolute"),B(e,"top","0px"),B(e,"left","16px"),B(e,"width","calc(100% - 8px - 24px)"),B(e,"height","100%"),B(e,"pointer-events","none"),B(e,"z-index","2"),B(e,"opacity",n[9]?.3:1),g(e,"preserveAspectRatio","none"),g(e,"viewBox",s="0 0 "+n[1]+" 100")},m(a,l){Z(a,e,l),p(e,t),o&&o.m(e,null)},p(a,l){l[0]&66&&i!==(i=(a[6]||0)/100*(a[1]-32))&&g(t,"x1",i),l[0]&66&&r!==(r=(a[6]||0)/100*(a[1]-32))&&g(t,"x2",r),a[12]!==null?o?o.p(a,l):(o=R1(a),o.c(),o.m(e,null)):o&&(o.d(1),o=null),l[0]&512&&B(e,"opacity",a[9]?.3:1),l[0]&2&&s!==(s="0 0 "+a[1]+" 100")&&g(e,"viewBox",s)},d(a){a&&_(e),o&&o.d()}}}function R1(n){let e,t,i;return{c(){e=Re("circle"),this.h()},l(r){e=Oe(r,"circle",{cx:!0,cy:!0,r:!0,fill:!0,"vector-effect":!0}),T(e).forEach(_),this.h()},h(){g(e,"cx",t=(n[6]||0)/100*(n[1]-32)),g(e,"cy",i=n[12]+2),g(e,"r","3"),g(e,"fill","#f22"),g(e,"vector-effect","non-scaling-stroke")},m(r,s){Z(r,e,s)},p(r,s){s[0]&66&&t!==(t=(r[6]||0)/100*(r[1]-32))&&g(e,"cx",t),s[0]&4096&&i!==(i=r[12]+2)&&g(e,"cy",i)},d(r){r&&_(e)}}}function EE(n){let e,t=n[10].g&&n[5]&&I1(n);return{c(){t&&t.c(),e=dt()},l(i){t&&t.l(i),e=dt()},m(i,r){t&&t.m(i,r),Z(i,e,r)},p(i,r){i[10].g&&i[5]?t?t.p(i,r):(t=I1(i),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:$e,o:$e,d(i){i&&_(e),t&&t.d(i)}}}const Cl=8;function Rh(n,e){return n>120||e>120?"red":"blue"}const O1=(n,e)=>`${e===0?"M":"L"} ${n.x} ${8+n.y}`,x1=(n,e)=>`${e===0?"M":"L"} ${n.x} ${8+n.y}`;function SE(n,e,t){let i,r,s,o,a,l,h,d,m,v,k,w,E,I,M,C=$e,D=()=>(C(),C=Dt(G,ke=>t(10,M=ke)),G),O,P,F=$e,V=()=>(F(),F=Dt(h,ke=>t(26,P=ke)),h),$;He(n,bi,ke=>t(25,O=ke)),n.$$.on_destroy.push(()=>C()),n.$$.on_destroy.push(()=>F());let{flightSummaryStore:G}=e;D();class U{constructor(X,ue,_e){Ge(this,"start");Ge(this,"end");Ge(this,"color");this.start=X,this.end=ue,this.color=_e}}let H,j=384,Q;mi(()=>(H&&(Q=new ResizeObserver(ke=>{for(let X of ke)t(1,j=Math.min(384,X.contentRect.width))}),Q.observe(H),t(1,j=Math.min(384,H.clientWidth))),()=>{Q&&Q.disconnect()}));const W=ke=>{const[X,ue]=ke.split("@"),_e=ue.split(",").map(oe=>{const[ae,Se]=oe.split(":");return{x:parseInt(ae),y:parseFloat(Se)}});return{partitionSize:parseInt(X),points:_e}},Y=(ke,X,ue,_e,oe,ae)=>{if(!ke||ke.length<2)return{lines:[],dottedLines:[]};const Se=[],Me=[],we=Ae=>({x:Ae.x/oe*ae,y:_e?72-(Ae.y-X)/ue*72:40,originalY:Ae.y}),Te=[...ke].sort((Ae,Ne)=>Ae.x-Ne.x);for(let Ae=0;Ae<Te.length-1;Ae++){const Ne=Te[Ae],De=Te[Ae+1];if(De.x===Ne.x+1){const _t=Rh(Ne.y,De.y);Se.push(new U(we(Ne),we(De),_t))}else De.x>Ne.x+1&&Me.push({start:we(Ne),end:we(De)})}return{lines:Se,dottedLines:Me}},q=(ke,X,ue,_e)=>{const oe=[];for(const ae of ke){const Se=ae.start.originalY,Me=ae.end.originalY;if(Se<=120&&Me>120||Se>120&&Me<=120){const Te=(120-Se)/(Me-Se),Ae=ae.start.x+Te*(ae.end.x-ae.start.x),Ne=_e?72-(120-X)/ue*72:40,De={x:Ae,y:Ne,originalY:120},_t=new U(ae.start,De,Rh(Se,120)),Fe=new U(De,ae.end,Rh(120,Me));oe.push(_t,Fe)}else oe.push(ae)}return oe},ne=ke=>{if(ke.length===0)return[];const X=[];let ue=[ke[0].start,ke[0].end],_e=ke[0].color;for(let oe=1;oe<ke.length;oe++){const ae=ke[oe-1],Se=ke[oe],Me=Se.start.x===ae.end.x&&Se.start.y===ae.end.y;Se.color===_e&&Me?ue.push(Se.end):(X.push({points:ue,color:_e}),ue=[Se.start,Se.end],_e=Se.color)}return ue.length>0&&X.push({points:ue,color:_e}),X},J=(ke,X,ue,_e,oe,ae)=>{const{lines:Se,dottedLines:Me}=Y(ke,X,ue,_e,oe,ae),we=q(Se,X,ue,_e);return{segments:ne(we),dottedLines:Me}};function ge(ke,X=0){var _e;let ue=M.start/1e3-.5;if(X>0){const oe=M.end/1e3;ue+=(oe-ue)*X}Lo.set(M),(_e=ke==null?void 0:ke.target)==null||_e.dispatchEvent(new CustomEvent("play-back",{bubbles:!0,detail:{unixTimestamp:ue,flightSummary:M}}))}const ie=Pn(null);He(n,ie,ke=>t(17,$=ke));const le=Pn(null);He(n,le,ke=>t(9,I=ke));function pe(ke){const ue=ke.currentTarget.getBoundingClientRect(),_e=ke.clientY-ue.top,oe=ke.clientX-ue.left,ae=ue.height,Se=ue.width,Me=8,we=8,Te=Math.min(Math.max(oe/Se,0),1);if(le.set(Te),!l){ie.set(null);return}if(_e<Me||_e>ae-we){ie.set(null);return}const Ae=ae-Me-we,Ne=(_e-Me)/Ae;ie.set(Math.min(Math.max(Ne,0),1))}function ye(){ie.set(null),le.set(null)}function be(ke){if(!I||!i)return;if(i.points.length>0){const ue=M.end-M.start;M.start+I*ue}ge(ke,I)}function re(ke){return l?8+ke*80:48}function me(ke){un[ke?"unshift":"push"](()=>{H=ke,t(11,H)})}return n.$$set=ke=>{"flightSummaryStore"in ke&&D(t(0,G=ke.flightSummaryStore))},n.$$.update=()=>{n.$$.dirty[0]&1024&&t(5,i=M.g?W(M.g):null),n.$$.dirty[0]&32&&t(24,r=i?Math.max(...i.points.map(ke=>ke.x)):0),n.$$.dirty[0]&32&&t(3,s=i?Math.min(...i.points.map(ke=>ke.y)):0),n.$$.dirty[0]&32&&t(8,o=i?Math.max(...i.points.map(ke=>ke.y)):0),n.$$.dirty[0]&264&&t(2,a=o-s),n.$$.dirty[0]&4&&t(4,l=a>0),n.$$.dirty[0]&33554432&&V(t(16,h=O instanceof ni?O.paybackTimeStore:Pn(null))),n.$$.dirty[0]&100664320&&t(6,d=O instanceof ni?vE(P,M):void 0),n.$$.dirty[0]&100664320&&t(7,m=P&&P*1e3<M.end&&O instanceof ni),n.$$.dirty[0]&16777788&&t(15,v=(()=>{if(!I||!i||!l)return null;const ke=I*r,X=[...i.points].sort((ae,Se)=>ae.x-Se.x);let ue=null,_e=null;for(let ae=0;ae<X.length-1;ae++)if(X[ae].x<=ke&&X[ae+1].x>=ke){ue=X[ae],_e=X[ae+1];break}if(ue&&_e&&_e.x>ue.x+1||!ue||!_e)return null;let oe;if(ue.x===_e.x)oe=ue.y;else{const ae=(ke-ue.x)/(_e.x-ue.x);oe=ue.y+ae*(_e.y-ue.y)}return 1-(oe-s)/a})()),n.$$.dirty[0]&16777278&&t(14,{segments:k,dottedLines:w}=i?J(i.points,s,a,l,r,j):{segments:[],dottedLines:[]},k,(t(13,w),t(5,i),t(3,s),t(2,a),t(4,l),t(24,r),t(1,j),t(10,M),t(8,o))),n.$$.dirty[0]&16777468&&t(12,E=(()=>{if(!m||!i||!d)return null;const ke=d/100*r,X=[...i.points].sort((ae,Se)=>ae.x-Se.x);let ue=null,_e=null;for(let ae=0;ae<X.length-1;ae++)if(X[ae].x<=ke&&X[ae+1].x>=ke){ue=X[ae],_e=X[ae+1];break}if(ue&&_e&&_e.x>ue.x+1||!ue||!_e)return null;let oe;if(ue.x===_e.x)oe=ue.y;else{const ae=(ke-ue.x)/(_e.x-ue.x);oe=ue.y+ae*(_e.y-ue.y)}return l?8+(80-(oe-s)/a*80):48})())},[G,j,a,s,l,i,d,m,o,I,M,H,E,w,k,v,h,$,ie,le,pe,ye,be,re,r,O,P,me]}class IE extends Wt{constructor(e){super(),Xt(this,e,SE,EE,zt,{flightSummaryStore:0},null,[-1,-1])}}function F1(n,e,t){var o;const i=n.slice();i[70]=e[t];const r=i[21]==Gr.HISTORY?W3(i[22],i[70]):void 0;i[71]=r;const s=((o=i[5])==null?void 0:o.type)==Tt.AircraftView&&i[5].aid&&i[22]&&i[22]*1e3>i[70].s&&i[22]*1e3<i[70].e&&i[21]==Gr.HISTORY;return i[72]=s,i}function B1(n,e,t){const i=n.slice();return i[75]=e[t],i}function $1(n,e,t){const i=n.slice();i[78]=e[t],i[81]=t;const r=i[15][i[81]];return i[79]=r,i}function V1(n){let e,t=n[18]("aircraftView.photo")+"",i,r,s;return{c(){e=A("p"),i=he(t),r=he(": "),s=he(n[9]),this.h()},l(o){e=R(o,"P",{style:!0});var a=T(e);i=fe(a,t),r=fe(a,": "),s=fe(a,n[9]),a.forEach(_),this.h()},h(){B(e,"font-size","10px"),B(e,"color","#ccc")},m(o,a){Z(o,e,a),p(e,i),p(e,r),p(e,s)},p(o,a){a[0]&262144&&t!==(t=o[18]("aircraftView.photo")+"")&&Ee(i,t),a[0]&512&&Ee(s,o[9])},d(o){o&&_(e)}}}function ME(n){let e=n[18]("flights.unknownModel")+"",t;return{c(){t=he(e)},l(i){t=fe(i,e)},m(i,r){Z(i,t,r)},p(i,r){r[0]&262144&&e!==(e=i[18]("flights.unknownModel")+"")&&Ee(t,e)},d(i){i&&_(t)}}}function TE(n){let e=n[18]("flights.unknownDJIModel")+"",t;return{c(){t=he(e)},l(i){t=fe(i,e)},m(i,r){Z(i,t,r)},p(i,r){r[0]&262144&&e!==(e=i[18]("flights.unknownDJIModel")+"")&&Ee(t,e)},d(i){i&&_(t)}}}function LE(n){var o,a;let e=((o=n[2])==null?void 0:o.data.make)+"",t,i,r=((a=n[2])==null?void 0:a.data.model)+"",s;return{c(){t=he(e),i=ee(),s=he(r)},l(l){t=fe(l,e),i=te(l),s=fe(l,r)},m(l,h){Z(l,t,h),Z(l,i,h),Z(l,s,h)},p(l,h){var d,m;h[0]&4&&e!==(e=((d=l[2])==null?void 0:d.data.make)+"")&&Ee(t,e),h[0]&4&&r!==(r=((m=l[2])==null?void 0:m.data.model)+"")&&Ee(s,r)},d(l){l&&(_(t),_(i),_(s))}}}function CE(n){let e,t;return{c(){e=Re("svg"),t=Re("path"),this.h()},l(i){e=Oe(i,"svg",{xmlns:!0,style:!0,viewBox:!0,fill:!0});var r=T(e);t=Oe(r,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0}),T(t).forEach(_),r.forEach(_),this.h()},h(){g(t,"d","M12 15H12.01M12 12V9M4.98207 19H19.0179C20.5615 19 21.5233 17.3256 20.7455 15.9923L13.7276 3.96153C12.9558 2.63852 11.0442 2.63852 10.2724 3.96153L3.25452 15.9923C2.47675 17.3256 3.43849 19 4.98207 19Z"),g(t,"stroke","#cc614b"),g(t,"stroke-width","2"),g(t,"stroke-linecap","round"),g(t,"stroke-linejoin","round"),g(e,"xmlns","http://www.w3.org/2000/svg"),B(e,"margin-top","3px"),B(e,"width","24px"),B(e,"height","24px"),g(e,"viewBox","0 0 24 24"),g(e,"fill","none")},m(i,r){Z(i,e,r),p(e,t)},d(i){i&&_(e)}}}function z1(n){var d;let e,t=((d=n[3])==null?void 0:d.updatesPerUnit.toFixed(1))+"",i,r,s=n[8].counterPeriodSecs+"",o,a=n[18]("units.sec")+"",l,h;return{c(){e=A("p"),i=he(t),r=he(" / "),o=he(s),l=he(a),this.h()},l(m){e=R(m,"P",{class:!0,style:!0});var v=T(e);i=fe(v,t),r=fe(v," / "),o=fe(v,s),l=fe(v,a),v.forEach(_),this.h()},h(){var m;g(e,"class","bubble dont-shrink svelte-1rzapza"),g(e,"style",h=((m=n[3])==null?void 0:m.updatesPerUnit)==0?"background-color: #d66":"")},m(m,v){Z(m,e,v),p(e,i),p(e,r),p(e,o),p(e,l)},p(m,v){var k,w;v[0]&8&&t!==(t=((k=m[3])==null?void 0:k.updatesPerUnit.toFixed(1))+"")&&Ee(i,t),v[0]&256&&s!==(s=m[8].counterPeriodSecs+"")&&Ee(o,s),v[0]&262144&&a!==(a=m[18]("units.sec")+"")&&Ee(l,a),v[0]&8&&h!==(h=((w=m[3])==null?void 0:w.updatesPerUnit)==0?"background-color: #d66":"")&&g(e,"style",h)},d(m){m&&_(e)}}}function PE(n){var l;let e,t,i="DRONE",r,s,o=((l=n[5])==null?void 0:l.aid)+"",a;return{c(){e=A("div"),t=A("b"),t.textContent=i,r=ee(),s=A("p"),a=he(o),this.h()},l(h){e=R(h,"DIV",{class:!0,style:!0});var d=T(e);t=R(d,"B",{style:!0,"data-svelte-h":!0}),rn(t)!=="svelte-645yyz"&&(t.textContent=i),r=te(d),s=R(d,"P",{style:!0});var m=T(s);a=fe(m,o),m.forEach(_),d.forEach(_),this.h()},h(){B(t,"font-size","12px"),B(s,"font-size","18px"),g(e,"class","column info-row svelte-1rzapza"),B(e,"background-color","#445"),B(e,"position","sticky"),B(e,"top","0px")},m(h,d){Z(h,e,d),p(e,t),p(e,r),p(e,s),p(s,a)},p(h,d){var m;d[0]&32&&o!==(o=((m=h[5])==null?void 0:m.aid)+"")&&Ee(a,o)},d(h){h&&_(e)}}}function NE(n){let e,t;function i(o,a){var l;return a[0]&524352&&(t=null),t==null&&(t=!!(o[19]&&o[19].identifier&&((l=o[6])!=null&&l.hasPermission(22)))),t?AE:DE}let r=i(n,[-1,-1,-1]),s=r(n);return{c(){e=A("div"),s.c(),this.h()},l(o){e=R(o,"DIV",{class:!0,style:!0});var a=T(e);s.l(a),a.forEach(_),this.h()},h(){g(e,"class","column info-row svelte-1rzapza"),B(e,"background-color","#445"),B(e,"position","sticky"),B(e,"top","0px")},m(o,a){Z(o,e,a),s.m(e,null)},p(o,a){r===(r=i(o,a))&&s?s.p(o,a):(s.d(1),s=r(o),s&&(s.c(),s.m(e,null)))},d(o){o&&_(e),s.d()}}}function DE(n){var l,h;let e,t=n[18]("aircraftView.serial_number")+"",i,r,s,o=(n[24]?"":(h=(l=n[2])==null?void 0:l.data.serialNumber)==null?void 0:h.toUpperCase())+"",a;return{c(){e=A("b"),i=he(t),r=ee(),s=A("p"),a=he(o),this.h()},l(d){e=R(d,"B",{style:!0});var m=T(e);i=fe(m,t),m.forEach(_),r=te(d),s=R(d,"P",{style:!0});var v=T(s);a=fe(v,o),v.forEach(_),this.h()},h(){B(e,"font-size","12px"),B(e,"text-transform","uppercase"),B(s,"font-size","18px")},m(d,m){Z(d,e,m),p(e,i),Z(d,r,m),Z(d,s,m),p(s,a)},p(d,m){var v,k;m[0]&262144&&t!==(t=d[18]("aircraftView.serial_number")+"")&&Ee(i,t),m[0]&4&&o!==(o=(d[24]?"":(k=(v=d[2])==null?void 0:v.data.serialNumber)==null?void 0:k.toUpperCase())+"")&&Ee(a,o)},d(d){d&&(_(e),_(r),_(s))}}}function AE(n){let e,t=n[18]("aircraftView.identifier")+"",i,r,s,o=n[19].identifier+"",a;return{c(){e=A("b"),i=he(t),r=ee(),s=A("p"),a=he(o),this.h()},l(l){e=R(l,"B",{style:!0});var h=T(e);i=fe(h,t),h.forEach(_),r=te(l),s=R(l,"P",{style:!0});var d=T(s);a=fe(d,o),d.forEach(_),this.h()},h(){B(e,"font-size","12px"),B(e,"text-transform","uppercase"),B(s,"font-size","18px")},m(l,h){Z(l,e,h),p(e,i),Z(l,r,h),Z(l,s,h),p(s,a)},p(l,h){h[0]&262144&&t!==(t=l[18]("aircraftView.identifier")+"")&&Ee(i,t),h[0]&524288&&o!==(o=l[19].identifier+"")&&Ee(a,o)},d(l){l&&(_(e),_(r),_(s))}}}function G1(n){var k;let e,t,i,r,s,o,a=n[18]("aircraftView.serial_number")+"",l,h,d,m=((k=n[2])==null?void 0:k.data.serialNumber)+"",v;return{c(){e=A("div"),t=Re("svg"),i=Re("path"),r=ee(),s=A("div"),o=A("b"),l=he(a),h=ee(),d=A("p"),v=he(m),this.h()},l(w){e=R(w,"DIV",{class:!0});var E=T(e);t=Oe(E,"svg",{style:!0,xmlns:!0,fill:!0,width:!0,height:!0,viewBox:!0});var I=T(t);i=Oe(I,"path",{d:!0}),T(i).forEach(_),I.forEach(_),r=te(E),s=R(E,"DIV",{class:!0});var M=T(s);o=R(M,"B",{});var C=T(o);l=fe(C,a),C.forEach(_),h=te(M),d=R(M,"P",{});var D=T(d);v=fe(D,m),D.forEach(_),M.forEach(_),E.forEach(_),this.h()},h(){g(i,"d","M0 2.53h2.49v10.95H0zm11 0h2.49v10.95H11zm-6.02 0h1.24v10.95H4.98zm2.49 0h1.24v10.95H7.47zm7.29 0H16v10.95h-1.24z"),B(t,"width","40px"),B(t,"height","40px"),B(t,"padding","8px"),g(t,"xmlns","http://www.w3.org/2000/svg"),g(t,"fill","#000000"),g(t,"width","800px"),g(t,"height","800px"),g(t,"viewBox","0 0 16 16"),g(s,"class","column"),g(e,"class","row g8 p816 hoverable")},m(w,E){Z(w,e,E),p(e,t),p(t,i),p(e,r),p(e,s),p(s,o),p(o,l),p(s,h),p(s,d),p(d,v)},p(w,E){var I;E[0]&262144&&a!==(a=w[18]("aircraftView.serial_number")+"")&&Ee(l,a),E[0]&4&&m!==(m=((I=w[2])==null?void 0:I.data.serialNumber)+"")&&Ee(v,m)},d(w){w&&_(e)}}}function H1(n){let e;function t(s,o){return s[19]?OE:RE}let i=t(n),r=i(n);return{c(){r.c(),e=dt()},l(s){r.l(s),e=dt()},m(s,o){r.m(s,o),Z(s,e,o)},p(s,o){i===(i=t(s))&&r?r.p(s,o):(r.d(1),r=i(s),r&&(r.c(),r.m(e.parentNode,e)))},d(s){s&&_(e),r.d(s)}}}function RE(n){let e,t,i,r,s,o,a,l=n[18]("aircraftView.addDroneRelation")+"",h,d,m;return{c(){e=A("div"),t=Re("svg"),i=Re("circle"),r=Re("path"),s=Re("path"),o=ee(),a=A("button"),h=he(l),this.h()},l(v){e=R(v,"DIV",{class:!0});var k=T(e);t=Oe(k,"svg",{width:!0,height:!0,style:!0,viewBox:!0,fill:!0,xmlns:!0});var w=T(t);i=Oe(w,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0}),T(i).forEach(_),r=Oe(w,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0}),T(r).forEach(_),s=Oe(w,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0}),T(s).forEach(_),w.forEach(_),o=te(k),a=R(k,"BUTTON",{class:!0,style:!0});var E=T(a);h=fe(E,l),E.forEach(_),k.forEach(_),this.h()},h(){g(i,"cx","12"),g(i,"cy","7"),g(i,"r","5"),g(i,"stroke","#000000"),g(i,"stroke-width","2"),g(r,"d","M17 22H5.26556C4.06257 22 3.1318 20.9456 3.28101 19.7519L3.67151 16.6279C3.85917 15.1266 5.13538 14 6.64835 14H7"),g(r,"stroke","#000000"),g(r,"stroke-width","2"),g(r,"stroke-linecap","round"),g(r,"stroke-linejoin","round"),g(s,"d","M16 16L18.25 18L22 14"),g(s,"stroke","#000000"),g(s,"stroke-width","2"),g(s,"stroke-linecap","round"),g(s,"stroke-linejoin","round"),g(t,"width","40px"),g(t,"height","40px"),B(t,"padding","9px"),g(t,"viewBox","0 0 24 24"),g(t,"fill","none"),g(t,"xmlns","http://www.w3.org/2000/svg"),g(a,"class","outline"),B(a,"font-size","16px"),g(e,"class","row g8 p816 hoverable center-cross")},m(v,k){Z(v,e,k),p(e,t),p(t,i),p(t,r),p(t,s),p(e,o),p(e,a),p(a,h),d||(m=nt(a,"click",n[44]),d=!0)},p(v,k){k[0]&262144&&l!==(l=v[18]("aircraftView.addDroneRelation")+"")&&Ee(h,l)},d(v){v&&_(e),d=!1,m()}}}function OE(n){return{c:$e,l:$e,m:$e,p:$e,d:$e}}function U1(n){var ge,ie,le;let e,t,i,r,s,o,a,l=n[18]("aircraftView.notes")+"",h,d,m,v,k=!n[16]&&((ge=n[6])==null?void 0:ge.hasPermission(21)),w,E,I,M,C,D,O,P,F=(((ie=n[26].current)==null?void 0:ie.relationship)===an.FRIENDLY?n[18]("aircraftView.friendly"):((le=n[26].current)==null?void 0:le.relationship)===an.HOSTILE?n[18]("aircraftView.hostile"):n[18]("aircraftView.neutral"))+"",V,$,G=n[18]("aircraftView.roleExpiry")+"",U,H;function j(pe,ye){return pe[16]?FE:xE}let Q=j(n),W=Q(n),Y=k&&q1(n);function q(pe,ye){return pe[19].expiryStart&&pe[19].expiryEnd?$E:BE}let ne=q(n),J=ne(n);return{c(){e=A("div"),t=Re("svg"),i=Re("path"),r=ee(),s=A("div"),o=A("div"),a=A("b"),h=he(l),d=ee(),m=A("div"),W.c(),v=ee(),Y&&Y.c(),w=ee(),E=A("div"),I=Re("svg"),M=Re("path"),C=ee(),D=A("div"),O=A("div"),P=A("b"),V=he(F),$=ee(),U=he(G),H=ee(),J.c(),this.h()},l(pe){e=R(pe,"DIV",{class:!0});var ye=T(e);t=Oe(ye,"svg",{xmlns:!0,height:!0,viewBox:!0,width:!0,style:!0,fill:!0});var be=T(t);i=Oe(be,"path",{d:!0}),T(i).forEach(_),be.forEach(_),r=te(ye),s=R(ye,"DIV",{class:!0});var re=T(s);o=R(re,"DIV",{class:!0});var me=T(o);a=R(me,"B",{});var ke=T(a);h=fe(ke,l),ke.forEach(_),me.forEach(_),d=te(re),m=R(re,"DIV",{class:!0});var X=T(m);W.l(X),v=te(X),Y&&Y.l(X),X.forEach(_),re.forEach(_),ye.forEach(_),w=te(pe),E=R(pe,"DIV",{class:!0});var ue=T(E);I=Oe(ue,"svg",{xmlns:!0,height:!0,viewBox:!0,width:!0,style:!0,fill:!0});var _e=T(I);M=Oe(_e,"path",{xmlns:!0,d:!0}),T(M).forEach(_),_e.forEach(_),C=te(ue),D=R(ue,"DIV",{class:!0});var oe=T(D);O=R(oe,"DIV",{class:!0});var ae=T(O);P=R(ae,"B",{});var Se=T(P);V=fe(Se,F),$=te(Se),U=fe(Se,G),Se.forEach(_),ae.forEach(_),H=te(oe),J.l(oe),oe.forEach(_),ue.forEach(_),this.h()},h(){g(i,"d","M120-240v-80h480v80H120Zm0-200v-80h720v80H120Zm0-200v-80h720v80H120Z"),g(t,"xmlns","http://www.w3.org/2000/svg"),g(t,"height","40px"),g(t,"viewBox","0 -960 960 960"),g(t,"width","40px"),B(t,"padding","8px"),g(t,"fill","#000"),g(o,"class","row center-cross g8"),g(m,"class","column g8"),g(s,"class","column grow"),g(e,"class","row g8 p816 hoverable"),g(M,"xmlns","http://www.w3.org/2000/svg"),g(M,"d","M200-640h560v-80H200v80Zm0 0v-80 80Zm0 560q-33 0-56.5-23.5T120-160v-560q0-33 23.5-56.5T200-800h40v-80h80v80h320v-80h80v80h40q33 0 56.5 23.5T840-720v227q-19-9-39-15t-41-9v-43H200v400h252q7 22 16.5 42T491-80H200Zm520 40q-83 0-141.5-58.5T520-240q0-83 58.5-141.5T720-440q83 0 141.5 58.5T920-240q0 83-58.5 141.5T720-40Zm67-105 28-28-75-75v-112h-40v128l87 87Z"),g(I,"xmlns","http://www.w3.org/2000/svg"),g(I,"height","40px"),g(I,"viewBox","0 -960 960 960"),g(I,"width","40px"),B(I,"padding","8px"),g(I,"fill","#000"),g(O,"class","row center-cross g8"),g(D,"class","column grow"),g(E,"class","row g8 p816 hoverable")},m(pe,ye){Z(pe,e,ye),p(e,t),p(t,i),p(e,r),p(e,s),p(s,o),p(o,a),p(a,h),p(s,d),p(s,m),W.m(m,null),p(m,v),Y&&Y.m(m,null),Z(pe,w,ye),Z(pe,E,ye),p(E,I),p(I,M),p(E,C),p(E,D),p(D,O),p(O,P),p(P,V),p(P,$),p(P,U),p(D,H),J.m(D,null)},p(pe,ye){var be,re,me;ye[0]&262144&&l!==(l=pe[18]("aircraftView.notes")+"")&&Ee(h,l),Q===(Q=j(pe))&&W?W.p(pe,ye):(W.d(1),W=Q(pe),W&&(W.c(),W.m(m,v))),ye[0]&65600&&(k=!pe[16]&&((be=pe[6])==null?void 0:be.hasPermission(21))),k?Y?Y.p(pe,ye):(Y=q1(pe),Y.c(),Y.m(m,null)):Y&&(Y.d(1),Y=null),ye[0]&262144&&F!==(F=(((re=pe[26].current)==null?void 0:re.relationship)===an.FRIENDLY?pe[18]("aircraftView.friendly"):((me=pe[26].current)==null?void 0:me.relationship)===an.HOSTILE?pe[18]("aircraftView.hostile"):pe[18]("aircraftView.neutral"))+"")&&Ee(V,F),ye[0]&262144&&G!==(G=pe[18]("aircraftView.roleExpiry")+"")&&Ee(U,G),ne===(ne=q(pe))&&J?J.p(pe,ye):(J.d(1),J=ne(pe),J&&(J.c(),J.m(D,null)))},d(pe){pe&&(_(e),_(w),_(E)),W.d(),Y&&Y.d(),J.d()}}}function xE(n){let e,t=(n[19].notes||n[18]("aircraftView.noNotes"))+"",i;return{c(){e=A("p"),i=he(t),this.h()},l(r){e=R(r,"P",{style:!0});var s=T(e);i=fe(s,t),s.forEach(_),this.h()},h(){B(e,"white-space","pre-wrap"),B(e,"word-break","break-all")},m(r,s){Z(r,e,s),p(e,i)},p(r,s){s[0]&786432&&t!==(t=(r[19].notes||r[18]("aircraftView.noNotes"))+"")&&Ee(i,t)},d(r){r&&_(e)}}}function FE(n){let e,t,i,r,s=n[18]("aircraftView.cancel")+"",o,a,l,h=n[18]("aircraftView.save")+"",d,m,v;return{c(){e=A("textarea"),t=ee(),i=A("div"),r=A("button"),o=he(s),a=ee(),l=A("button"),d=he(h),this.h()},l(k){e=R(k,"TEXTAREA",{class:!0,id:!0,rows:!0,maxlength:!0}),T(e).forEach(_),t=te(k),i=R(k,"DIV",{class:!0});var w=T(i);r=R(w,"BUTTON",{class:!0});var E=T(r);o=fe(E,s),E.forEach(_),a=te(w),l=R(w,"BUTTON",{class:!0});var I=T(l);d=fe(I,h),I.forEach(_),w.forEach(_),this.h()},h(){g(e,"class","notes-textarea svelte-1rzapza"),g(e,"id","drone-notes-textarea"),g(e,"rows","4"),g(e,"maxlength","200"),g(r,"class","button outline"),g(l,"class","button"),g(i,"class","row g8")},m(k,w){Z(k,e,w),fi(e,n[17]),Z(k,t,w),Z(k,i,w),p(i,r),p(r,o),p(i,a),p(i,l),p(l,d),m||(v=[nt(e,"input",n[57]),nt(r,"click",n[30]),nt(l,"click",n[31])],m=!0)},p(k,w){w[0]&131072&&fi(e,k[17]),w[0]&262144&&s!==(s=k[18]("aircraftView.cancel")+"")&&Ee(o,s),w[0]&262144&&h!==(h=k[18]("aircraftView.save")+"")&&Ee(d,h)},d(k){k&&(_(e),_(t),_(i)),m=!1,Bn(v)}}}function q1(n){let e,t=n[18]("aircraftView.editNotes")+"",i,r,s;return{c(){e=A("button"),i=he(t),this.h()},l(o){e=R(o,"BUTTON",{class:!0,style:!0});var a=T(e);i=fe(a,t),a.forEach(_),this.h()},h(){g(e,"class","outline"),B(e,"font-size","16px")},m(o,a){Z(o,e,a),p(e,i),r||(s=nt(e,"click",n[29]),r=!0)},p(o,a){a[0]&262144&&t!==(t=o[18]("aircraftView.editNotes")+"")&&Ee(i,t)},d(o){o&&_(e),r=!1,s()}}}function BE(n){let e,t=n[18]("aircraftView.indefinite")+"",i;return{c(){e=A("p"),i=he(t)},l(r){e=R(r,"P",{});var s=T(e);i=fe(s,t),s.forEach(_)},m(r,s){Z(r,e,s),p(e,i)},p(r,s){s[0]&262144&&t!==(t=r[18]("aircraftView.indefinite")+"")&&Ee(i,t)},d(r){r&&_(e)}}}function $E(n){let e,t=n[18]("aircraftView.validFrom")+"",i,r,s=Ci(n[18],new Date(n[19].expiryStart),!1)+"",o,a,l,h=n[18]("aircraftView.validTo")+"",d,m,v=Ci(n[18],new Date(n[19].expiryEnd),!1)+"",k;return{c(){e=A("p"),i=he(t),r=ee(),o=he(s),a=A("br"),l=ee(),d=he(h),m=ee(),k=he(v)},l(w){e=R(w,"P",{});var E=T(e);i=fe(E,t),r=te(E),o=fe(E,s),a=R(E,"BR",{}),l=te(E),d=fe(E,h),m=te(E),k=fe(E,v),E.forEach(_)},m(w,E){Z(w,e,E),p(e,i),p(e,r),p(e,o),p(e,a),p(e,l),p(e,d),p(e,m),p(e,k)},p(w,E){E[0]&262144&&t!==(t=w[18]("aircraftView.validFrom")+"")&&Ee(i,t),E[0]&786432&&s!==(s=Ci(w[18],new Date(w[19].expiryStart),!1)+"")&&Ee(o,s),E[0]&262144&&h!==(h=w[18]("aircraftView.validTo")+"")&&Ee(d,h),E[0]&786432&&v!==(v=Ci(w[18],new Date(w[19].expiryEnd),!1)+"")&&Ee(k,v)},d(w){w&&_(e)}}}function VE(n){var k;let e,t,i,r,s,o,a=n[18]("aircraftView.operatorId")+"",l,h,d,m=(((k=n[2])==null?void 0:k.data.operatorId)||n[18]("aircraftView.operatorIdMissing"))+"",v;return{c(){e=A("div"),t=Re("svg"),i=Re("path"),r=ee(),s=A("div"),o=A("b"),l=he(a),h=ee(),d=A("p"),v=he(m),this.h()},l(w){e=R(w,"DIV",{class:!0});var E=T(e);t=Oe(E,"svg",{xmlns:!0,height:!0,viewBox:!0,width:!0,style:!0,fill:!0});var I=T(t);i=Oe(I,"path",{d:!0}),T(i).forEach(_),I.forEach(_),r=te(E),s=R(E,"DIV",{class:!0});var M=T(s);o=R(M,"B",{});var C=T(o);l=fe(C,a),C.forEach(_),h=te(M),d=R(M,"P",{});var D=T(d);v=fe(D,m),D.forEach(_),M.forEach(_),E.forEach(_),this.h()},h(){g(i,"d","M560-440h200v-80H560v80Zm0-120h200v-80H560v80ZM200-320h320v-22q0-45-44-71.5T360-440q-72 0-116 26.5T200-342v22Zm160-160q33 0 56.5-23.5T440-560q0-33-23.5-56.5T360-640q-33 0-56.5 23.5T280-560q0 33 23.5 56.5T360-480ZM160-160q-33 0-56.5-23.5T80-240v-480q0-33 23.5-56.5T160-800h640q33 0 56.5 23.5T880-720v480q0 33-23.5 56.5T800-160H160Zm0-80h640v-480H160v480Zm0 0v-480 480Z"),g(t,"xmlns","http://www.w3.org/2000/svg"),g(t,"height","40px"),g(t,"viewBox","0 -960 960 960"),g(t,"width","40px"),B(t,"padding","8px"),g(t,"fill","#000000"),g(s,"class","column"),g(e,"class","row g8 p816 hoverable")},m(w,E){Z(w,e,E),p(e,t),p(t,i),p(e,r),p(e,s),p(s,o),p(o,l),p(s,h),p(s,d),p(d,v)},p(w,E){var I;E[0]&262144&&a!==(a=w[18]("aircraftView.operatorId")+"")&&Ee(l,a),E[0]&262148&&m!==(m=(((I=w[2])==null?void 0:I.data.operatorId)||w[18]("aircraftView.operatorIdMissing"))+"")&&Ee(v,m)},d(w){w&&_(e)}}}function zE(n){let e,t;return e=new c0({props:{coordinateStore:n[32]}}),{c(){st(e.$$.fragment)},l(i){ot(e.$$.fragment,i)},m(i,r){at(e,i,r),t=!0},p:$e,i(i){t||(de(e.$$.fragment,i),t=!0)},o(i){Ie(e.$$.fragment,i),t=!1},d(i){lt(e,i)}}}function GE(n){var P,F,V;let e,t,i,r,s,o,a,l,h,d,m=n[18]("aircraftView.height")+"",v,k,w,E,I=(((V=(F=(P=n[3])==null?void 0:P.lastUpdate)==null?void 0:F.h)==null?void 0:V.toFixed(0))||"")+"",M,C,D,O=n[10]&&n[7]&&n[7].mh&&Z1(n);return{c(){e=A("div"),t=Re("svg"),i=Re("g"),r=Re("g"),s=Re("g"),o=Re("path"),a=ee(),l=A("div"),h=A("div"),d=A("b"),v=he(m),k=ee(),w=A("div"),E=A("p"),M=he(I),C=he(" m"),D=ee(),O&&O.c(),this.h()},l($){e=R($,"DIV",{class:!0});var G=T(e);t=Oe(G,"svg",{style:!0,fill:!0,viewBox:!0,xmlns:!0});var U=T(t);i=Oe(U,"g",{id:!0,"stroke-width":!0}),T(i).forEach(_),r=Oe(U,"g",{id:!0,"stroke-linecap":!0,"stroke-linejoin":!0}),T(r).forEach(_),s=Oe(U,"g",{id:!0});var H=T(s);o=Oe(H,"path",{d:!0}),T(o).forEach(_),H.forEach(_),U.forEach(_),a=te(G),l=R(G,"DIV",{class:!0});var j=T(l);h=R(j,"DIV",{class:!0});var Q=T(h);d=R(Q,"B",{});var W=T(d);v=fe(W,m),W.forEach(_),Q.forEach(_),k=te(j),w=R(j,"DIV",{class:!0});var Y=T(w);E=R(Y,"P",{});var q=T(E);M=fe(q,I),C=fe(q," m"),q.forEach(_),D=te(Y),O&&O.l(Y),Y.forEach(_),j.forEach(_),G.forEach(_),this.h()},h(){g(i,"id","SVGRepo_bgCarrier"),g(i,"stroke-width","0"),g(r,"id","SVGRepo_tracerCarrier"),g(r,"stroke-linecap","round"),g(r,"stroke-linejoin","round"),g(o,"d","M4,20H20a1,1,0,0,1,0,2H4a1,1,0,0,1,0-2Zm9-3V5.414l2.293,2.293a1,1,0,0,0,1.414-1.414l-4-4a1,1,0,0,0-.325-.216.986.986,0,0,0-.764,0,1,1,0,0,0-.325.216l-4,4A1,1,0,1,0,8.707,7.707L11,5.414V17a1,1,0,0,0,2,0Z"),g(s,"id","SVGRepo_iconCarrier"),B(t,"width","40px"),B(t,"height","40px"),B(t,"padding","8px"),g(t,"fill","#000000"),g(t,"viewBox","0 0 24 24"),g(t,"xmlns","http://www.w3.org/2000/svg"),g(h,"class","line center-cross g8"),g(w,"class","row center-cross g8"),g(l,"class","column grow"),g(e,"class","row g8 p816 hoverable")},m($,G){Z($,e,G),p(e,t),p(t,i),p(t,r),p(t,s),p(s,o),p(e,a),p(e,l),p(l,h),p(h,d),p(d,v),p(l,k),p(l,w),p(w,E),p(E,M),p(E,C),p(w,D),O&&O.m(w,null)},p($,G){var U,H,j;G[0]&262144&&m!==(m=$[18]("aircraftView.height")+"")&&Ee(v,m),G[0]&8&&I!==(I=(((j=(H=(U=$[3])==null?void 0:U.lastUpdate)==null?void 0:H.h)==null?void 0:j.toFixed(0))||"")+"")&&Ee(M,I),$[10]&&$[7]&&$[7].mh?O?O.p($,G):(O=Z1($),O.c(),O.m(w,null)):O&&(O.d(1),O=null)},d($){$&&_(e),O&&O.d()}}}function Z1(n){let e,t,i=n[7].mh.toFixed(0)+"",r,s,o;return{c(){e=A("p"),t=he("MAX "),r=he(i),s=he(" m"),this.h()},l(a){e=R(a,"P",{class:!0});var l=T(e);t=fe(l,"MAX "),r=fe(l,i),s=fe(l," m"),l.forEach(_),this.h()},h(){g(e,"class",o="height-bubble "+(Math.floor(n[7].mh)>120?"red":"")+" svelte-1rzapza")},m(a,l){Z(a,e,l),p(e,t),p(e,r),p(e,s)},p(a,l){l[0]&128&&i!==(i=a[7].mh.toFixed(0)+"")&&Ee(r,i),l[0]&128&&o!==(o="height-bubble "+(Math.floor(a[7].mh)>120?"red":"")+" svelte-1rzapza")&&g(e,"class",o)},d(a){a&&_(e)}}}function HE(n){let e,t,i,r,s,o,a=n[18]("aircraftView.crackedFwTitle")+"",l,h,d,m,v=n[18]("aircraftView.crackedFwDescription").replace(/-/g,"&#8209;")+"";return{c(){e=A("div"),t=A("div"),i=Re("svg"),r=Re("path"),s=ee(),o=A("p"),l=he(a),h=ee(),d=A("p"),m=new Ua(!1),this.h()},l(k){e=R(k,"DIV",{class:!0});var w=T(e);t=R(w,"DIV",{class:!0});var E=T(t);i=Oe(E,"svg",{class:!0,xmlns:!0,style:!0,viewBox:!0,fill:!0});var I=T(i);r=Oe(I,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0}),T(r).forEach(_),I.forEach(_),s=te(E),o=R(E,"P",{style:!0});var M=T(o);l=fe(M,a),M.forEach(_),E.forEach(_),h=te(w),d=R(w,"P",{style:!0});var C=T(d);m=qa(C,!1),C.forEach(_),w.forEach(_),this.h()},h(){g(r,"d","M12 15H12.01M12 12V9M4.98207 19H19.0179C20.5615 19 21.5233 17.3256 20.7455 15.9923L13.7276 3.96153C12.9558 2.63852 11.0442 2.63852 10.2724 3.96153L3.25452 15.9923C2.47675 17.3256 3.43849 19 4.98207 19Z"),g(r,"stroke","#cc614b"),g(r,"stroke-width","2"),g(r,"stroke-linecap","round"),g(r,"stroke-linejoin","round"),g(i,"class","dont-shrink"),g(i,"xmlns","http://www.w3.org/2000/svg"),B(i,"width","24px"),B(i,"height","24px"),g(i,"viewBox","0 0 24 24"),g(i,"fill","none"),B(o,"color","#cc614b"),B(o,"font-weight","700"),g(t,"class","row center-cross g8"),m.a=null,B(d,"white-space","pre-wrap"),g(e,"class","column g8 p16")},m(k,w){Z(k,e,w),p(e,t),p(t,i),p(i,r),p(t,s),p(t,o),p(o,l),p(e,h),p(e,d),m.m(v,d)},p(k,w){w[0]&262144&&a!==(a=k[18]("aircraftView.crackedFwTitle")+"")&&Ee(l,a),w[0]&262144&&v!==(v=k[18]("aircraftView.crackedFwDescription").replace(/-/g,"&#8209;")+"")&&m.p(v)},d(k){k&&_(e)}}}function UE(n){let e,t,i;return t=new ws({props:{color:"#aa8800",size:"32"}}),{c(){e=A("div"),st(t.$$.fragment),this.h()},l(r){e=R(r,"DIV",{class:!0,style:!0});var s=T(e);ot(t.$$.fragment,s),s.forEach(_),this.h()},h(){g(e,"class","column center center-cross"),B(e,"height","88px")},m(r,s){Z(r,e,s),at(t,e,null),i=!0},p:$e,i(r){i||(de(t.$$.fragment,r),i=!0)},o(r){Ie(t.$$.fragment,r),i=!1},d(r){r&&_(e),lt(t)}}}function qE(n){let e,t;return e=new IE({props:{flightSummaryStore:n[10]}}),{c(){st(e.$$.fragment)},l(i){ot(e.$$.fragment,i)},m(i,r){at(e,i,r),t=!0},p(i,r){const s={};r[0]&1024&&(s.flightSummaryStore=i[10]),e.$set(s)},i(i){t||(de(e.$$.fragment,i),t=!0)},o(i){Ie(e.$$.fragment,i),t=!1},d(i){lt(e,i)}}}function Y1(n){let e,t,i,r,s,o,a,l,h,d,m,v,k,w,E=n[18]("aircraftView.sensorSeeing")+"",I,M,C,D=Bt(n[4]),O=[];for(let P=0;P<D.length;P+=1)O[P]=W1($1(n,D,P));return{c(){e=A("div"),t=ee(),i=A("div"),r=Re("svg"),s=Re("desc"),o=he("Created with Sketch."),a=Re("defs"),l=Re("g"),h=Re("g"),d=Re("g"),m=Re("path"),v=ee(),k=A("div"),w=A("b"),I=he(E),M=ee();for(let P=0;P<O.length;P+=1)O[P].c();C=dt(),this.h()},l(P){e=R(P,"DIV",{class:!0}),T(e).forEach(_),t=te(P),i=R(P,"DIV",{class:!0,style:!0});var F=T(i);r=Oe(F,"svg",{style:!0,xmlns:!0,"xmlns:xlink":!0,width:!0,height:!0,viewBox:!0,version:!0});var V=T(r);s=Oe(V,"desc",{});var $=T(s);o=fe($,"Created with Sketch."),$.forEach(_),a=Oe(V,"defs",{}),T(a).forEach(_),l=Oe(V,"g",{id:!0,stroke:!0,"stroke-width":!0,fill:!0,"fill-rule":!0});var G=T(l);h=Oe(G,"g",{id:!0,transform:!0,fill:!0});var U=T(h);d=Oe(U,"g",{id:!0,transform:!0});var H=T(d);m=Oe(H,"path",{d:!0,id:!0}),T(m).forEach(_),H.forEach(_),U.forEach(_),G.forEach(_),V.forEach(_),v=te(F),k=R(F,"DIV",{class:!0});var j=T(k);w=R(j,"B",{});var Q=T(w);I=fe(Q,E),Q.forEach(_),j.forEach(_),F.forEach(_),M=te(P);for(let W=0;W<O.length;W+=1)O[W].l(P);C=dt(),this.h()},h(){g(e,"class","sep"),g(m,"d","M95.4324393,3487.63833 C95.4094393,3487.61278 95.3924393,3487.58428 95.3674393,3487.55971 L95.3634393,3487.56265 C94.5824393,3486.79509 93.2434393,3486.86683 92.5364393,3487.56167 C91.8294393,3488.25651 91.8314393,3489.64423 92.5384393,3490.33907 C92.5474393,3490.34791 92.5584393,3490.35381 92.5674393,3490.36265 C92.5914393,3490.38722 92.6084393,3490.41671 92.6334393,3490.44128 L92.6364393,3490.43735 C93.4174393,3491.20491 94.7564393,3491.13415 95.4634393,3490.43833 C96.1704393,3489.74349 96.1684393,3488.35577 95.4614393,3487.66093 C95.4524393,3487.65209 95.4414393,3487.64717 95.4324393,3487.63833 M91.1194393,3486.17002 L89.7054393,3484.77936 C87.5844393,3486.86486 87.6834393,3491.13612 89.8044393,3493.22064 L91.2184393,3491.83096 C89.8044393,3490.44128 89.7054393,3487.55971 91.1194393,3486.17002 M88.2914393,3483.38968 L86.8774393,3482 C82.6344393,3486.17002 83.4404393,3492.5258 86.9764393,3496 L88.3904393,3494.61032 C85.5624393,3491.83096 85.4634393,3486.17002 88.2914393,3483.38968 M98.1954393,3484.77936 L96.7814393,3486.17002 C98.1954393,3487.55971 98.2944393,3490.44128 96.8804393,3491.83096 L98.2944393,3493.22064 C100.415439,3491.13612 100.316439,3486.86486 98.1954393,3484.77936 M101.122439,3496 L99.7084393,3494.61032 C102.537439,3491.83096 102.438439,3486.17002 99.6094393,3483.38968 L101.023439,3482 C104.559439,3485.47518 105.365439,3491.83096 101.122439,3496"),g(m,"id","radio_signal-[#1026]"),g(d,"id","icons"),g(d,"transform","translate(56.000000, 160.000000)"),g(h,"id","Dribbble-Light-Preview"),g(h,"transform","translate(-140.000000, -3642.000000)"),g(h,"fill","#000000"),g(l,"id","Page-1"),g(l,"stroke","none"),g(l,"stroke-width","1"),g(l,"fill","none"),g(l,"fill-rule","evenodd"),B(r,"width","40px"),B(r,"height","40px"),B(r,"padding","8px"),g(r,"xmlns","http://www.w3.org/2000/svg"),g(r,"xmlns:xlink","http://www.w3.org/1999/xlink"),g(r,"width","800px"),g(r,"height","800px"),g(r,"viewBox","0 -3 20 20"),g(r,"version","1.1"),g(k,"class","row center-cross"),g(i,"class","row g8 p816 hoverable"),B(i,"border-bottom","1px solid #eee")},m(P,F){Z(P,e,F),Z(P,t,F),Z(P,i,F),p(i,r),p(r,s),p(s,o),p(r,a),p(r,l),p(l,h),p(h,d),p(d,m),p(i,v),p(i,k),p(k,w),p(w,I),Z(P,M,F);for(let V=0;V<O.length;V+=1)O[V]&&O[V].m(P,F);Z(P,C,F)},p(P,F){if(F[0]&262144&&E!==(E=P[18]("aircraftView.sensorSeeing")+"")&&Ee(I,E),F[0]&32792|F[1]&512){D=Bt(P[4]);let V;for(V=0;V<D.length;V+=1){const $=$1(P,D,V);O[V]?O[V].p($,F):(O[V]=W1($),O[V].c(),O[V].m(C.parentNode,C))}for(;V<O.length;V+=1)O[V].d(1);O.length=D.length}},d(P){P&&(_(e),_(t),_(i),_(M),_(C)),ui(O,P)}}}function j1(n){let e,t=n[79]<1?(n[79]*1e3).toFixed(0)+" m":n[79].toFixed(1)+" km",i,r;return{c(){e=A("p"),i=he(t),this.h()},l(s){e=R(s,"P",{class:!0,style:!0});var o=T(e);i=fe(o,t),o.forEach(_),this.h()},h(){var s;g(e,"class","bubble svelte-1rzapza"),g(e,"style",r=((s=n[3])==null?void 0:s.updatesPerUnit)==0?"background-color: #f55":"")},m(s,o){Z(s,e,o),p(e,i)},p(s,o){var a;o[0]&32768&&t!==(t=s[79]<1?(s[79]*1e3).toFixed(0)+" m":s[79].toFixed(1)+" km")&&Ee(i,t),o[0]&8&&r!==(r=((a=s[3])==null?void 0:a.updatesPerUnit)==0?"background-color: #f55":"")&&g(e,"style",r)},d(s){s&&_(e)}}}function W1(n){var k;let e,t,i,r,s=((k=n[78])==null?void 0:k.name)+"",o,a,l,h,d,m=n[79]&&n[79]!==null&&j1(n);function v(){return n[58](n[78])}return{c(){e=A("div"),t=A("div"),i=A("div"),r=A("p"),o=he(s),a=ee(),m&&m.c(),l=ee(),this.h()},l(w){e=R(w,"DIV",{class:!0,style:!0});var E=T(e);t=R(E,"DIV",{class:!0});var I=T(t);i=R(I,"DIV",{class:!0});var M=T(i);r=R(M,"P",{});var C=T(r);o=fe(C,s),C.forEach(_),M.forEach(_),a=te(I),m&&m.l(I),I.forEach(_),l=te(E),E.forEach(_),this.h()},h(){g(i,"class","column grow"),g(t,"class","row center-cross g8 width100"),g(e,"class","row g8 p816 hoverable clickable"),B(e,"border-bottom","1px solid #eee"),B(e,"padding-left","64px")},m(w,E){Z(w,e,E),p(e,t),p(t,i),p(i,r),p(r,o),p(t,a),m&&m.m(t,null),p(e,l),h||(d=nt(e,"click",v),h=!0)},p(w,E){var I;n=w,E[0]&16&&s!==(s=((I=n[78])==null?void 0:I.name)+"")&&Ee(o,s),n[79]&&n[79]!==null?m?m.p(n,E):(m=j1(n),m.c(),m.m(t,null)):m&&(m.d(1),m=null)},d(w){w&&_(e),m&&m.d(),h=!1,d()}}}function X1(n){let e,t,i,r,s,o,a,l,h=n[18]("aircraftView.geofenceIntrusions")+"",d,m,v,k=Bt(n[20]),w=[];for(let E=0;E<k.length;E+=1)w[E]=K1(B1(n,k,E));return{c(){e=A("div"),t=ee(),i=A("div"),r=Re("svg"),s=Re("path"),o=ee(),a=A("div"),l=A("b"),d=he(h),m=ee();for(let E=0;E<w.length;E+=1)w[E].c();v=dt(),this.h()},l(E){e=R(E,"DIV",{class:!0}),T(e).forEach(_),t=te(E),i=R(E,"DIV",{class:!0,style:!0});var I=T(i);r=Oe(I,"svg",{xmlns:!0,height:!0,viewBox:!0,width:!0,fill:!0,style:!0});var M=T(r);s=Oe(M,"path",{d:!0}),T(s).forEach(_),M.forEach(_),o=te(I),a=R(I,"DIV",{class:!0});var C=T(a);l=R(C,"B",{});var D=T(l);d=fe(D,h),D.forEach(_),C.forEach(_),I.forEach(_),m=te(E);for(let O=0;O<w.length;O+=1)w[O].l(E);v=dt(),this.h()},h(){g(e,"class","sep"),g(s,"d","M480-320q17 0 28.5-11.5T520-360q0-17-11.5-28.5T480-400q-17 0-28.5 11.5T440-360q0 17 11.5 28.5T480-320Zm-40-160h80v-200h-80v200Zm40 400q-139-35-229.5-159.5T160-516v-244l320-120 320 120v244q0 152-90.5 276.5T480-80Zm0-84q104-33 172-132t68-220v-189l-240-90-240 90v189q0 121 68 220t172 132Zm0-316Z"),g(r,"xmlns","http://www.w3.org/2000/svg"),g(r,"height","40px"),g(r,"viewBox","0 -960 960 960"),g(r,"width","40px"),g(r,"fill","#000"),B(r,"padding","8px"),g(a,"class","row center-cross"),g(i,"class","row g8 p816 hoverable"),B(i,"border-bottom","1px solid #eee")},m(E,I){Z(E,e,I),Z(E,t,I),Z(E,i,I),p(i,r),p(r,s),p(i,o),p(i,a),p(a,l),p(l,d),Z(E,m,I);for(let M=0;M<w.length;M+=1)w[M]&&w[M].m(E,I);Z(E,v,I)},p(E,I){if(I[0]&262144&&h!==(h=E[18]("aircraftView.geofenceIntrusions")+"")&&Ee(d,h),I[0]&1310720|I[1]&1024){k=Bt(E[20]);let M;for(M=0;M<k.length;M+=1){const C=B1(E,k,M);w[M]?w[M].p(C,I):(w[M]=K1(C),w[M].c(),w[M].m(v.parentNode,v))}for(;M<w.length;M+=1)w[M].d(1);w.length=k.length}},d(E){E&&(_(e),_(t),_(i),_(m),_(v)),ui(w,E)}}}function ZE(n){let e,t=n[18]("aircraftView.geofenceViewOnMap")+"",i;return{c(){e=A("b"),i=he(t),this.h()},l(r){e=R(r,"B",{style:!0});var s=T(e);i=fe(s,t),s.forEach(_),this.h()},h(){B(e,"font-size","14px")},m(r,s){Z(r,e,s),p(e,i)},p(r,s){s[0]&262144&&t!==(t=r[18]("aircraftView.geofenceViewOnMap")+"")&&Ee(i,t)},d(r){r&&_(e)}}}function YE(n){let e=n[18]("aircraftView.geofenceExpired")+"",t;return{c(){t=he(e)},l(i){t=fe(i,e)},m(i,r){Z(i,t,r)},p(i,r){r[0]&262144&&e!==(e=i[18]("aircraftView.geofenceExpired")+"")&&Ee(t,e)},d(i){i&&_(t)}}}function K1(n){var E;let e,t,i=((E=n[75])==null?void 0:E.name)+"",r,s,o,a,l,h,d;function m(I,M){return I[75].isDeleted?YE:ZE}let v=m(n),k=v(n);function w(){return n[59](n[75])}return{c(){e=A("div"),t=A("b"),r=he(i),s=ee(),o=A("p"),k.c(),a=ee(),this.h()},l(I){e=R(I,"DIV",{class:!0,style:!0});var M=T(e);t=R(M,"B",{});var C=T(t);r=fe(C,i),C.forEach(_),s=te(M),o=R(M,"P",{style:!0});var D=T(o);k.l(D),D.forEach(_),a=te(M),M.forEach(_),this.h()},h(){B(o,"font-size","14px"),B(o,"color","#666"),g(e,"class",l="row g8 p816 space-main "+(n[75].fence?"clickable":"")+" "+(n[75].isDeleted?"disabled":"hoverable")+" svelte-1rzapza"),B(e,"border-bottom","1px solid #eee"),B(e,"padding-left","64px")},m(I,M){Z(I,e,M),p(e,t),p(t,r),p(e,s),p(e,o),k.m(o,null),p(e,a),h||(d=nt(e,"click",w),h=!0)},p(I,M){var C;n=I,M[0]&1048576&&i!==(i=((C=n[75])==null?void 0:C.name)+"")&&Ee(r,i),v===(v=m(n))&&k?k.p(n,M):(k.d(1),k=v(n),k&&(k.c(),k.m(o,null))),M[0]&1048576&&l!==(l="row g8 p816 space-main "+(n[75].fence?"clickable":"")+" "+(n[75].isDeleted?"disabled":"hoverable")+" svelte-1rzapza")&&g(e,"class",l)},d(I){I&&_(e),k.d(),h=!1,d()}}}function jE(n){let e,t,i,r,s,o,a,l,h,d,m,v,k,w=n[18]("aircraftView.focusDroneOnMap")+"",E;return{c(){e=Re("svg"),t=Re("g"),i=Re("g"),r=Re("g"),s=Re("path"),o=Re("path"),a=Re("path"),l=Re("path"),h=Re("path"),d=Re("path"),m=Re("path"),v=ee(),k=A("b"),E=he(w),this.h()},l(I){e=Oe(I,"svg",{viewBox:!0,fill:!0,xmlns:!0});var M=T(e);t=Oe(M,"g",{id:!0,"stroke-width":!0}),T(t).forEach(_),i=Oe(M,"g",{id:!0,"stroke-linecap":!0,"stroke-linejoin":!0}),T(i).forEach(_),r=Oe(M,"g",{id:!0});var C=T(r);s=Oe(C,"path",{opacity:!0,"fill-rule":!0,"clip-rule":!0,d:!0,fill:!0}),T(s).forEach(_),o=Oe(C,"path",{d:!0,stroke:!0,"stroke-width":!0}),T(o).forEach(_),a=Oe(C,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0}),T(a).forEach(_),l=Oe(C,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0}),T(l).forEach(_),h=Oe(C,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0}),T(h).forEach(_),d=Oe(C,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0}),T(d).forEach(_),m=Oe(C,"path",{d:!0,stroke:!0,"stroke-width":!0}),T(m).forEach(_),C.forEach(_),M.forEach(_),v=te(I),k=R(I,"B",{});var D=T(k);E=fe(D,w),D.forEach(_),this.h()},h(){g(t,"id","SVGRepo_bgCarrier"),g(t,"stroke-width","0"),g(i,"id","SVGRepo_tracerCarrier"),g(i,"stroke-linecap","round"),g(i,"stroke-linejoin","round"),g(s,"opacity","0.1"),g(s,"fill-rule","evenodd"),g(s,"clip-rule","evenodd"),g(s,"d","M12 5C8.13401 5 5 8.13401 5 12C5 15.866 8.13401 19 12 19C15.866 19 19 15.866 19 12C19 8.13401 15.866 5 12 5ZM12 8.75C10.2051 8.75 8.75 10.2051 8.75 12C8.75 13.7949 10.2051 15.25 12 15.25C13.7949 15.25 15.25 13.7949 15.25 12C15.25 10.2051 13.7949 8.75 12 8.75Z"),g(s,"fill","#000000"),g(o,"d","M19 12C19 15.866 15.866 19 12 19C8.13401 19 5 15.866 5 12C5 8.13401 8.13401 5 12 5C15.866 5 19 8.13401 19 12Z"),g(o,"stroke","#000000"),g(o,"stroke-width","2"),g(a,"d","M19 12H21"),g(a,"stroke","#000000"),g(a,"stroke-width","2"),g(a,"stroke-linecap","round"),g(a,"stroke-linejoin","round"),g(l,"d","M3 12H5"),g(l,"stroke","#000000"),g(l,"stroke-width","2"),g(l,"stroke-linecap","round"),g(l,"stroke-linejoin","round"),g(h,"d","M12 19L12 21"),g(h,"stroke","#000000"),g(h,"stroke-width","2"),g(h,"stroke-linecap","round"),g(h,"stroke-linejoin","round"),g(d,"d","M12 3L12 5"),g(d,"stroke","#000000"),g(d,"stroke-width","2"),g(d,"stroke-linecap","round"),g(d,"stroke-linejoin","round"),g(m,"d","M15 12C15 13.6569 13.6569 15 12 15C10.3431 15 9 13.6569 9 12C9 10.3431 10.3431 9 12 9C13.6569 9 15 10.3431 15 12Z"),g(m,"stroke","#000000"),g(m,"stroke-width","2"),g(r,"id","SVGRepo_iconCarrier"),g(e,"viewBox","0 0 24 24"),g(e,"fill","none"),g(e,"xmlns","http://www.w3.org/2000/svg")},m(I,M){Z(I,e,M),p(e,t),p(e,i),p(e,r),p(r,s),p(r,o),p(r,a),p(r,l),p(r,h),p(r,d),p(r,m),Z(I,v,M),Z(I,k,M),p(k,E)},p(I,M){M[0]&262144&&w!==(w=I[18]("aircraftView.focusDroneOnMap")+"")&&Ee(E,w)},d(I){I&&(_(e),_(v),_(k))}}}function WE(n){let e,t,i,r,s,o,a,l,h,d,m,v,k,w,E,I,M,C,D,O,P=n[18]("aircraftView.focusPilotOnMap")+"",F;return{c(){e=Re("svg"),t=Re("g"),i=Re("g"),r=Re("g"),s=Re("defs"),o=Re("style"),a=he(".cls-1{fill:none;stroke:#000000;stroke-miterlimit:10;stroke-width:1.91px;}"),l=Re("rect"),h=Re("circle"),d=Re("line"),m=Re("circle"),v=Re("line"),k=Re("line"),w=Re("line"),E=Re("polygon"),I=Re("line"),M=Re("path"),C=Re("path"),D=ee(),O=A("b"),F=he(P),this.h()},l(V){e=Oe(V,"svg",{viewBox:!0,id:!0,"data-name":!0,xmlns:!0,fill:!0});var $=T(e);t=Oe($,"g",{id:!0,"stroke-width":!0}),T(t).forEach(_),i=Oe($,"g",{id:!0,"stroke-linecap":!0,"stroke-linejoin":!0}),T(i).forEach(_),r=Oe($,"g",{id:!0});var G=T(r);s=Oe(G,"defs",{});var U=T(s);o=Oe(U,"style",{});var H=T(o);a=fe(H,".cls-1{fill:none;stroke:#000000;stroke-miterlimit:10;stroke-width:1.91px;}"),H.forEach(_),U.forEach(_),l=Oe(G,"rect",{class:!0,x:!0,y:!0,width:!0,height:!0,rx:!0}),T(l).forEach(_),h=Oe(G,"circle",{class:!0,cx:!0,cy:!0,r:!0}),T(h).forEach(_),d=Oe(G,"line",{class:!0,x1:!0,y1:!0,x2:!0,y2:!0}),T(d).forEach(_),m=Oe(G,"circle",{class:!0,cx:!0,cy:!0,r:!0}),T(m).forEach(_),v=Oe(G,"line",{class:!0,x1:!0,y1:!0,x2:!0,y2:!0}),T(v).forEach(_),k=Oe(G,"line",{class:!0,x1:!0,y1:!0,x2:!0,y2:!0}),T(k).forEach(_),w=Oe(G,"line",{class:!0,x1:!0,y1:!0,x2:!0,y2:!0}),T(w).forEach(_),E=Oe(G,"polygon",{class:!0,points:!0}),T(E).forEach(_),I=Oe(G,"line",{class:!0,x1:!0,y1:!0,x2:!0,y2:!0}),T(I).forEach(_),M=Oe(G,"path",{class:!0,d:!0}),T(M).forEach(_),C=Oe(G,"path",{class:!0,d:!0}),T(C).forEach(_),G.forEach(_),$.forEach(_),D=te(V),O=R(V,"B",{});var j=T(O);F=fe(j,P),j.forEach(_),this.h()},h(){g(t,"id","SVGRepo_bgCarrier"),g(t,"stroke-width","0"),g(i,"id","SVGRepo_tracerCarrier"),g(i,"stroke-linecap","round"),g(i,"stroke-linejoin","round"),g(l,"class","cls-1"),g(l,"x","1.5"),g(l,"y","9.14"),g(l,"width","21"),g(l,"height","13.36"),g(l,"rx","1.91"),g(h,"class","cls-1"),g(h,"cx","6.27"),g(h,"cy","16.77"),g(h,"r","0.95"),g(d,"class","cls-1"),g(d,"x1","6.27"),g(d,"y1","16.77"),g(d,"x2","6.27"),g(d,"y2","12"),g(m,"class","cls-1"),g(m,"cx","17.73"),g(m,"cy","16.77"),g(m,"r","0.95"),g(v,"class","cls-1"),g(v,"x1","17.73"),g(v,"y1","16.77"),g(v,"x2","17.73"),g(v,"y2","12"),g(k,"class","cls-1"),g(k,"x1","9.14"),g(k,"y1","19.64"),g(k,"x2","11.05"),g(k,"y2","19.64"),g(w,"class","cls-1"),g(w,"x1","12.95"),g(w,"y1","19.64"),g(w,"x2","14.86"),g(w,"y2","19.64"),g(E,"class","cls-1"),g(E,"points","13.91 12.96 10.09 12.96 9.14 9.14 14.86 9.14 13.91 12.96"),g(I,"class","cls-1"),g(I,"x1","12"),g(I,"y1","7.23"),g(I,"x2","12"),g(I,"y2","9.14"),g(M,"class","cls-1"),g(M,"d","M9.3,6.22a3.82,3.82,0,0,1,5.4,0"),g(C,"class","cls-1"),g(C,"d","M6.75,3.67a7.44,7.44,0,0,1,10.5,0"),g(r,"id","SVGRepo_iconCarrier"),g(e,"viewBox","0 0 24 24"),g(e,"id","Layer_1"),g(e,"data-name","Layer 1"),g(e,"xmlns","http://www.w3.org/2000/svg"),g(e,"fill","#000000")},m(V,$){Z(V,e,$),p(e,t),p(e,i),p(e,r),p(r,s),p(s,o),p(o,a),p(r,l),p(r,h),p(r,d),p(r,m),p(r,v),p(r,k),p(r,w),p(r,E),p(r,I),p(r,M),p(r,C),Z(V,D,$),Z(V,O,$),p(O,F)},p(V,$){$[0]&262144&&P!==(P=V[18]("aircraftView.focusPilotOnMap")+"")&&Ee(F,P)},d(V){V&&(_(e),_(D),_(O))}}}function J1(n){let e,t,i,r,s=n[18]("aircraftView.dronesPreviousFlights")+"",o,a,l,h,d,m={ctx:n,current:null,token:null,hasCatch:!1,pending:tS,then:KE,catch:XE,value:69,blocks:[,,,]};return xs(h=n[11],m),{c(){e=A("div"),t=ee(),i=A("div"),r=A("p"),o=he(s),a=ee(),l=dt(),m.block.c(),this.h()},l(v){e=R(v,"DIV",{class:!0}),T(e).forEach(_),t=te(v),i=R(v,"DIV",{class:!0});var k=T(i);r=R(k,"P",{class:!0,style:!0});var w=T(r);o=fe(w,s),w.forEach(_),k.forEach(_),a=te(v),l=dt(),m.block.l(v),this.h()},h(){g(e,"class","sep"),g(r,"class","p816 grow"),B(r,"font-size","12px"),B(r,"color","#888"),B(r,"text-transform","uppercase"),g(i,"class","row g8 width100")},m(v,k){Z(v,e,k),Z(v,t,k),Z(v,i,k),p(i,r),p(r,o),Z(v,a,k),Z(v,l,k),m.block.m(v,m.anchor=k),m.mount=()=>l.parentNode,m.anchor=l,d=!0},p(v,k){n=v,(!d||k[0]&262144)&&s!==(s=n[18]("aircraftView.dronesPreviousFlights")+"")&&Ee(o,s),m.ctx=n,k[0]&2048&&h!==(h=n[11])&&xs(h,m)||Qc(m,n,k)},i(v){d||(de(m.block),d=!0)},o(v){for(let k=0;k<3;k+=1){const w=m.blocks[k];Ie(w)}d=!1},d(v){v&&(_(e),_(t),_(i),_(a),_(l)),m.block.d(v),m.token=null,m=null}}}function XE(n){return{c:$e,l:$e,m:$e,p:$e,i:$e,o:$e,d:$e}}function KE(n){let e,t,i,r;const s=[QE,JE],o=[];function a(l,h){return l[69]&&l[69].length>0?0:1}return e=a(n),t=o[e]=s[e](n),{c(){t.c(),i=dt()},l(l){t.l(l),i=dt()},m(l,h){o[e].m(l,h),Z(l,i,h),r=!0},p(l,h){let d=e;e=a(l),e===d?o[e].p(l,h):(bt(),Ie(o[d],1,1,()=>{o[d]=null}),wt(),t=o[e],t?t.p(l,h):(t=o[e]=s[e](l),t.c()),de(t,1),t.m(i.parentNode,i))},i(l){r||(de(t),r=!0)},o(l){Ie(t),r=!1},d(l){l&&_(i),o[e].d(l)}}}function JE(n){let e,t,i=n[18]("aircraftView.noPreviousFlights")+"",r;return{c(){e=A("div"),t=A("p"),r=he(i),this.h()},l(s){e=R(s,"DIV",{class:!0,style:!0});var o=T(e);t=R(o,"P",{style:!0,class:!0});var a=T(t);r=fe(a,i),a.forEach(_),o.forEach(_),this.h()},h(){B(t,"text-align","center"),B(t,"font-size","14px"),g(t,"class","p816 grow"),g(e,"class","p816 hoverable"),B(e,"border-top","1px solid #eee")},m(s,o){Z(s,e,o),p(e,t),p(t,r)},p(s,o){o[0]&262144&&i!==(i=s[18]("aircraftView.noPreviousFlights")+"")&&Ee(r,i)},i:$e,o:$e,d(s){s&&_(e)}}}function QE(n){let e,t,i=Bt(n[69]),r=[];for(let o=0;o<i.length;o+=1)r[o]=e2(F1(n,i,o));const s=o=>Ie(r[o],1,1,()=>{r[o]=null});return{c(){e=A("div");for(let o=0;o<r.length;o+=1)r[o].c();this.h()},l(o){e=R(o,"DIV",{class:!0});var a=T(e);for(let l=0;l<r.length;l+=1)r[l].l(a);a.forEach(_),this.h()},h(){g(e,"class","column")},m(o,a){Z(o,e,a);for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(e,null);t=!0},p(o,a){if(a[0]&14682144|a[1]&6144){i=Bt(o[69]);let l;for(l=0;l<i.length;l+=1){const h=F1(o,i,l);r[l]?(r[l].p(h,a),de(r[l],1)):(r[l]=e2(h),r[l].c(),de(r[l],1),r[l].m(e,null))}for(bt(),l=i.length;l<r.length;l+=1)s(l);wt()}},i(o){if(!t){for(let a=0;a<i.length;a+=1)de(r[a]);t=!0}},o(o){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)Ie(r[a]);t=!1},d(o){o&&_(e),ui(r,o)}}}function Q1(n){let e;return{c(){e=A("div"),this.h()},l(t){e=R(t,"DIV",{class:!0}),T(e).forEach(_),this.h()},h(){g(e,"class","cursor svelte-1rzapza")},m(t,i){Z(t,e,i)},d(t){t&&_(e)}}}function eS(n){var H;let e,t,i=b1(n[70].s)+"",r,s,o,a,l=((H=n[70].sum.mh)==null?void 0:H.toFixed(0))+"",h,d,m,v,k,w,E,I=Vs(Math.floor((n[70].e-n[70].s)/1e3))+"",M,C,D,O,P,F,V,$,G=n[72]&&Q1();function U(...j){return n[62](n[70],...j)}return{c(){e=A("div"),t=A("p"),r=he(i),s=ee(),o=A("p"),a=he("MAX "),h=he(l),d=he(" m"),v=ee(),k=A("div"),w=ee(),E=A("p"),M=he(I),C=ee(),D=A("div"),O=ee(),G&&G.c(),F=ee(),this.h()},l(j){e=R(j,"DIV",{class:!0,style:!0});var Q=T(e);t=R(Q,"P",{class:!0});var W=T(t);r=fe(W,i),W.forEach(_),s=te(Q),o=R(Q,"P",{class:!0});var Y=T(o);a=fe(Y,"MAX "),h=fe(Y,l),d=fe(Y," m"),Y.forEach(_),v=te(Q),k=R(Q,"DIV",{class:!0}),T(k).forEach(_),w=te(Q),E=R(Q,"P",{class:!0,style:!0});var q=T(E);M=fe(q,I),q.forEach(_),C=te(Q),D=R(Q,"DIV",{class:!0,style:!0}),T(D).forEach(_),O=te(Q),G&&G.l(Q),Q.forEach(_),F=te(j),this.h()},h(){g(t,"class","p8"),g(o,"class",m="height-bubble "+(Math.floor(n[70].sum.mh)>120?"red":"")+" svelte-1rzapza"),g(k,"class","grow"),g(E,"class","bubble slow-background-color svelte-1rzapza"),B(E,"background-color",n[72]?n[23]===null||n[23]===!0?"#d66":"#4b6":"#445"),g(D,"class","progress svelte-1rzapza"),B(D,"width",n[71]===void 0?"unset":n[71]+"%"),g(e,"class",P="flight row center-cross g4 rel "+(n[72]?"":"hoverable")+" svelte-1rzapza"),B(e,"border-top","1px solid #eee"),B(e,"padding-inline","8px 8px")},m(j,Q){Z(j,e,Q),p(e,t),p(t,r),p(e,s),p(e,o),p(o,a),p(o,h),p(o,d),p(e,v),p(e,k),p(e,w),p(e,E),p(E,M),p(e,C),p(e,D),p(e,O),G&&G.m(e,null),Z(j,F,Q),V||($=[nt(e,"mousemove",function(){Eo(n[72]?t2:n2)&&(n[72]?t2:n2).apply(this,arguments)}),nt(e,"click",function(){Eo(n[72]?U:i2)&&(n[72]?U:i2).apply(this,arguments)})],V=!0)},p(j,Q){var W;n=j,Q[0]&2048&&i!==(i=b1(n[70].s)+"")&&Ee(r,i),Q[0]&2048&&l!==(l=((W=n[70].sum.mh)==null?void 0:W.toFixed(0))+"")&&Ee(h,l),Q[0]&2048&&m!==(m="height-bubble "+(Math.floor(n[70].sum.mh)>120?"red":"")+" svelte-1rzapza")&&g(o,"class",m),Q[0]&2048&&I!==(I=Vs(Math.floor((n[70].e-n[70].s)/1e3))+"")&&Ee(M,I),Q[0]&14682144&&B(E,"background-color",n[72]?n[23]===null||n[23]===!0?"#d66":"#4b6":"#445"),Q[0]&6293504&&B(D,"width",n[71]===void 0?"unset":n[71]+"%"),n[72]?G||(G=Q1(),G.c(),G.m(e,null)):G&&(G.d(1),G=null),Q[0]&6293536&&P!==(P="flight row center-cross g4 rel "+(n[72]?"":"hoverable")+" svelte-1rzapza")&&g(e,"class",P)},d(j){j&&(_(e),_(F)),G&&G.d(),V=!1,Bn($)}}}function e2(n){let e,t;function i(...r){return n[63](n[70],...r)}return e=new fn({props:{onclick:i,$$slots:{default:[eS]},$$scope:{ctx:n}}}),{c(){st(e.$$.fragment)},l(r){ot(e.$$.fragment,r)},m(r,s){at(e,r,s),t=!0},p(r,s){n=r;const o={};s[0]&2048&&(o.onclick=i),s[0]&14682144|s[2]&1048576&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(r){t||(de(e.$$.fragment,r),t=!0)},o(r){Ie(e.$$.fragment,r),t=!1},d(r){lt(e,r)}}}function tS(n){let e,t,i;return t=new ws({props:{color:"#aa8800",size:"32"}}),{c(){e=A("div"),st(t.$$.fragment),this.h()},l(r){e=R(r,"DIV",{class:!0,style:!0});var s=T(e);ot(t.$$.fragment,s),s.forEach(_),this.h()},h(){g(e,"class","p32 row center center-cross"),B(e,"border-top","1px solid #eee")},m(r,s){Z(r,e,s),at(t,e,null),i=!0},p:$e,i(r){i||(de(t.$$.fragment,r),i=!0)},o(r){Ie(t.$$.fragment,r),i=!1},d(r){r&&_(e),lt(t)}}}function nS(n){var Jt,ut,jt,gn,Be,tt,en,Fn,Vn,Zt,cn,Un,mn,tn,En,Ln,xt,qe,kt,Gt;let e,t,i,r,s,o,a,l,h,d,m,v,k,w,E,I,M,C,D,O,P,F,V,$,G,U=n[19]&&n[19].identifier&&((Jt=n[6])==null?void 0:Jt.hasPermission(22)),H,j=!n[25]&&((ut=n[6])==null?void 0:ut.hasPermission(22))&&((jt=n[6])==null?void 0:jt.hasPermission(21)),Q,W=!n[25]&&n[19]&&((gn=n[6])==null?void 0:gn.hasPermission(22)),Y,q,ne,J,ge,ie,le,pe,ye,be=n[18]("aircraftView.heightGraph")+"",re,me,ke,X,ue,_e=n[4].length&&((Be=n[6])==null?void 0:Be.hasPermission(200)),oe,ae=n[20].length&&((tt=n[6])==null?void 0:tt.hasPermission(200)),Se,Me,we,Te,Ae,Ne=n[18]("aircraftView.showOnMap")+"",De,_t,Fe,Pe,je,Ve,Ue=!n[24]&&((en=n[6])==null?void 0:en.hasPermission(102))&&((Fn=n[6])==null?void 0:Fn.hasPermission(103)),Ke,We,ze=n[9]&&V1(n);function Et(Je,It){var wn,Cn;return It[0]&4&&(I=null),(wn=Je[2])!=null&&wn.data.make&&((Cn=Je[2])!=null&&Cn.data.model)?LE:(I==null&&(I=!!(Je[2].data.serialNumber&&Je[2].data.serialNumber.startsWith("1581"))),I?TE:ME)}let rt=Et(n,[-1,-1,-1]),ft=rt(n),Ut=n[25]&&CE(),Qe=n[3]&&z1(n);function yt(Je,It){var wn;return It[0]&64&&(V=null),V==null&&(V=!!((wn=Je[6])!=null&&wn.hasPermission(100))),V?NE:PE}let mt=yt(n,[-1,-1,-1]),Ft=mt(n),qt=U&&G1(n),vt=j&&H1(n),$t=W&&U1(n),dn=!n[25]&&VE(n),sn=!n[25]&&zE(n),pn=!n[25]&&GE(n),Ye=n[25]&&HE(n);const Vt=[qE,UE],Mt=[];function Rt(Je,It){return Je[10]&&Je[7]?0:1}ke=Rt(n),X=Mt[ke]=Vt[ke](n);let gt=_e&&Y1(n),it=ae&&X1(n);Fe=new fn({props:{class:"noselect action",enabledClass:"hoverable",onclick:n[60],disabled:!((cn=(Zt=(Vn=n[3])==null?void 0:Vn.lastUpdate)==null?void 0:Zt.dc)!=null&&cn.lat&&((tn=(mn=(Un=n[3])==null?void 0:Un.lastUpdate)==null?void 0:mn.dc)!=null&&tn.lng)),$$slots:{default:[jE]},$$scope:{ctx:n}}}),je=new fn({props:{class:"noselect action",enabledClass:"hoverable",onclick:n[61],disabled:!((xt=(Ln=(En=n[3])==null?void 0:En.lastUpdate)==null?void 0:Ln.pc)!=null&&xt.lat&&((Gt=(kt=(qe=n[3])==null?void 0:qe.lastUpdate)==null?void 0:kt.pc)!=null&&Gt.lng)),$$slots:{default:[WE]},$$scope:{ctx:n}}});let St=Ue&&J1(n);return{c(){e=A("div"),t=A("object"),i=A("img"),a=ee(),l=A("div"),h=ee(),d=A("div"),m=A("div"),v=A("div"),ze&&ze.c(),k=ee(),w=A("div"),E=A("p"),ft.c(),C=ee(),Ut&&Ut.c(),D=ee(),Qe&&Qe.c(),O=ee(),P=A("div"),F=ee(),Ft.c(),$=ee(),G=A("div"),qt&&qt.c(),H=ee(),vt&&vt.c(),Q=ee(),$t&&$t.c(),Y=ee(),dn&&dn.c(),q=ee(),sn&&sn.c(),ne=ee(),pn&&pn.c(),J=ee(),Ye&&Ye.c(),ge=ee(),ie=A("div"),le=ee(),pe=A("div"),ye=A("p"),re=he(be),me=ee(),X.c(),ue=ee(),gt&&gt.c(),oe=ee(),it&&it.c(),Se=ee(),Me=A("div"),we=ee(),Te=A("div"),Ae=A("p"),De=he(Ne),_t=ee(),st(Fe.$$.fragment),Pe=ee(),st(je.$$.fragment),Ve=ee(),St&&St.c(),Ke=dt(),this.h()},l(Je){e=R(Je,"DIV",{class:!0});var It=T(e);t=R(It,"OBJECT",{title:!0,class:!0,data:!0,type:!0,style:!0});var wn=T(t);i=R(wn,"IMG",{class:!0,src:!0,alt:!0}),wn.forEach(_),a=te(It),l=R(It,"DIV",{class:!0}),T(l).forEach(_),h=te(It),d=R(It,"DIV",{class:!0});var Cn=T(d);m=R(Cn,"DIV",{class:!0,style:!0});var oi=T(m);v=R(oi,"DIV",{class:!0});var ri=T(v);ze&&ze.l(ri),k=te(ri),w=R(ri,"DIV",{class:!0});var ci=T(w);E=R(ci,"P",{class:!0,title:!0,style:!0});var vn=T(E);ft.l(vn),vn.forEach(_),C=te(ci),Ut&&Ut.l(ci),D=te(ci),Qe&&Qe.l(ci),O=te(ci),P=R(ci,"DIV",{class:!0}),T(P).forEach(_),ci.forEach(_),ri.forEach(_),oi.forEach(_),Cn.forEach(_),It.forEach(_),F=te(Je),Ft.l(Je),$=te(Je),G=R(Je,"DIV",{class:!0});var zn=T(G);qt&&qt.l(zn),H=te(zn),vt&&vt.l(zn),Q=te(zn),$t&&$t.l(zn),Y=te(zn),dn&&dn.l(zn),q=te(zn),sn&&sn.l(zn),ne=te(zn),pn&&pn.l(zn),J=te(zn),Ye&&Ye.l(zn),zn.forEach(_),ge=te(Je),ie=R(Je,"DIV",{class:!0}),T(ie).forEach(_),le=te(Je),pe=R(Je,"DIV",{class:!0});var Mi=T(pe);ye=R(Mi,"P",{class:!0,style:!0});var wi=T(ye);re=fe(wi,be),wi.forEach(_),Mi.forEach(_),me=te(Je),X.l(Je),ue=te(Je),gt&&gt.l(Je),oe=te(Je),it&&it.l(Je),Se=te(Je),Me=R(Je,"DIV",{class:!0}),T(Me).forEach(_),we=te(Je),Te=R(Je,"DIV",{class:!0});var _n=T(Te);Ae=R(_n,"P",{class:!0,style:!0});var qn=T(Ae);De=fe(qn,Ne),qn.forEach(_),_n.forEach(_),_t=te(Je),ot(Fe.$$.fragment,Je),Pe=te(Je),ot(je.$$.fragment,Je),Ve=te(Je),St&&St.l(Je),Ke=dt(),this.h()},h(){var Je,It,wn,Cn;g(i,"class","background"),zi(i.src,r="/unknown_drone.png")||g(i,"src",r),g(i,"alt","Drone"),g(t,"title",s=(Je=n[2])!=null&&Je.data.model?`${n[2].data.make} ${n[2].data.model}`:""),g(t,"class","background svelte-1rzapza"),g(t,"data",o=(It=n[2])!=null&&It.data.model?`/private/drones/${n[2].data.model.trim()}.jpg?v=2`:"/unknown_drone.png"),g(t,"type","image/jpeg"),B(t,"object-fit","cover"),B(t,"width","100%"),B(t,"height","100%"),B(t,"background-color","#000"),g(l,"class","gradient svelte-1rzapza"),g(E,"class","truncate"),g(E,"title",M=((wn=n[2])==null?void 0:wn.data.make)+" "+((Cn=n[2])==null?void 0:Cn.data.model)),B(E,"font-size","21px"),B(E,"max-width","26ch"),g(P,"class","grow"),g(w,"class","row center-cross g8 width100"),g(v,"class","column"),g(m,"class","row center-cross g8 p816"),B(m,"width","100%"),g(d,"class","overlay svelte-1rzapza"),g(e,"class","header svelte-1rzapza"),g(G,"class","column"),g(ie,"class","sep"),g(ye,"class","p816 grow"),B(ye,"padding-bottom","0"),B(ye,"font-size","12px"),B(ye,"color","#888"),B(ye,"text-transform","uppercase"),g(pe,"class","row g8 width100"),g(Me,"class","sep"),g(Ae,"class","p816 grow"),B(Ae,"font-size","12px"),B(Ae,"color","#888"),B(Ae,"text-transform","uppercase"),g(Te,"class","row g8 width100")},m(Je,It){Z(Je,e,It),p(e,t),p(t,i),p(e,a),p(e,l),p(e,h),p(e,d),p(d,m),p(m,v),ze&&ze.m(v,null),p(v,k),p(v,w),p(w,E),ft.m(E,null),p(w,C),Ut&&Ut.m(w,null),p(w,D),Qe&&Qe.m(w,null),p(w,O),p(w,P),Z(Je,F,It),Ft.m(Je,It),Z(Je,$,It),Z(Je,G,It),qt&&qt.m(G,null),p(G,H),vt&&vt.m(G,null),p(G,Q),$t&&$t.m(G,null),p(G,Y),dn&&dn.m(G,null),p(G,q),sn&&sn.m(G,null),p(G,ne),pn&&pn.m(G,null),p(G,J),Ye&&Ye.m(G,null),Z(Je,ge,It),Z(Je,ie,It),Z(Je,le,It),Z(Je,pe,It),p(pe,ye),p(ye,re),Z(Je,me,It),Mt[ke].m(Je,It),Z(Je,ue,It),gt&&gt.m(Je,It),Z(Je,oe,It),it&&it.m(Je,It),Z(Je,Se,It),Z(Je,Me,It),Z(Je,we,It),Z(Je,Te,It),p(Te,Ae),p(Ae,De),Z(Je,_t,It),at(Fe,Je,It),Z(Je,Pe,It),at(je,Je,It),Z(Je,Ve,It),St&&St.m(Je,It),Z(Je,Ke,It),We=!0},p(Je,It){var ri,ci,vn,zn,Mi,wi,_n,qn,Er,or,Ri,ar,yn,Gn,$n,qr,gi,Sr,Jn,Ir,On,Ji,Yi,Mr;(!We||It[0]&4&&s!==(s=(ri=Je[2])!=null&&ri.data.model?`${Je[2].data.make} ${Je[2].data.model}`:""))&&g(t,"title",s),(!We||It[0]&4&&o!==(o=(ci=Je[2])!=null&&ci.data.model?`/private/drones/${Je[2].data.model.trim()}.jpg?v=2`:"/unknown_drone.png"))&&g(t,"data",o),Je[9]?ze?ze.p(Je,It):(ze=V1(Je),ze.c(),ze.m(v,k)):ze&&(ze.d(1),ze=null),rt===(rt=Et(Je,It))&&ft?ft.p(Je,It):(ft.d(1),ft=rt(Je),ft&&(ft.c(),ft.m(E,null))),(!We||It[0]&4&&M!==(M=((vn=Je[2])==null?void 0:vn.data.make)+" "+((zn=Je[2])==null?void 0:zn.data.model)))&&g(E,"title",M),Je[3]?Qe?Qe.p(Je,It):(Qe=z1(Je),Qe.c(),Qe.m(w,O)):Qe&&(Qe.d(1),Qe=null),mt===(mt=yt(Je,It))&&Ft?Ft.p(Je,It):(Ft.d(1),Ft=mt(Je),Ft&&(Ft.c(),Ft.m($.parentNode,$))),It[0]&524352&&(U=Je[19]&&Je[19].identifier&&((Mi=Je[6])==null?void 0:Mi.hasPermission(22))),U?qt?qt.p(Je,It):(qt=G1(Je),qt.c(),qt.m(G,H)):qt&&(qt.d(1),qt=null),It[0]&64&&(j=!Je[25]&&((wi=Je[6])==null?void 0:wi.hasPermission(22))&&((_n=Je[6])==null?void 0:_n.hasPermission(21))),j?vt?vt.p(Je,It):(vt=H1(Je),vt.c(),vt.m(G,Q)):vt&&(vt.d(1),vt=null),It[0]&524352&&(W=!Je[25]&&Je[19]&&((qn=Je[6])==null?void 0:qn.hasPermission(22))),W?$t?$t.p(Je,It):($t=U1(Je),$t.c(),$t.m(G,Y)):$t&&($t.d(1),$t=null),Je[25]||dn.p(Je,It),Je[25]||sn.p(Je,It),Je[25]||pn.p(Je,It),Je[25]&&Ye.p(Je,It),(!We||It[0]&262144)&&be!==(be=Je[18]("aircraftView.heightGraph")+"")&&Ee(re,be);let wn=ke;ke=Rt(Je),ke===wn?Mt[ke].p(Je,It):(bt(),Ie(Mt[wn],1,1,()=>{Mt[wn]=null}),wt(),X=Mt[ke],X?X.p(Je,It):(X=Mt[ke]=Vt[ke](Je),X.c()),de(X,1),X.m(ue.parentNode,ue)),It[0]&80&&(_e=Je[4].length&&((Er=Je[6])==null?void 0:Er.hasPermission(200))),_e?gt?gt.p(Je,It):(gt=Y1(Je),gt.c(),gt.m(oe.parentNode,oe)):gt&&(gt.d(1),gt=null),It[0]&1048640&&(ae=Je[20].length&&((or=Je[6])==null?void 0:or.hasPermission(200))),ae?it?it.p(Je,It):(it=X1(Je),it.c(),it.m(Se.parentNode,Se)):it&&(it.d(1),it=null),(!We||It[0]&262144)&&Ne!==(Ne=Je[18]("aircraftView.showOnMap")+"")&&Ee(De,Ne);const Cn={};It[0]&8&&(Cn.disabled=!((yn=(ar=(Ri=Je[3])==null?void 0:Ri.lastUpdate)==null?void 0:ar.dc)!=null&&yn.lat&&((qr=($n=(Gn=Je[3])==null?void 0:Gn.lastUpdate)==null?void 0:$n.dc)!=null&&qr.lng))),It[0]&262144|It[2]&1048576&&(Cn.$$scope={dirty:It,ctx:Je}),Fe.$set(Cn);const oi={};It[0]&8&&(oi.disabled=!((Jn=(Sr=(gi=Je[3])==null?void 0:gi.lastUpdate)==null?void 0:Sr.pc)!=null&&Jn.lat&&((Ji=(On=(Ir=Je[3])==null?void 0:Ir.lastUpdate)==null?void 0:On.pc)!=null&&Ji.lng))),It[0]&262144|It[2]&1048576&&(oi.$$scope={dirty:It,ctx:Je}),je.$set(oi),It[0]&64&&(Ue=!Je[24]&&((Yi=Je[6])==null?void 0:Yi.hasPermission(102))&&((Mr=Je[6])==null?void 0:Mr.hasPermission(103))),Ue?St?(St.p(Je,It),It[0]&64&&de(St,1)):(St=J1(Je),St.c(),de(St,1),St.m(Ke.parentNode,Ke)):St&&(bt(),Ie(St,1,1,()=>{St=null}),wt())},i(Je){We||(de(sn),de(X),de(Fe.$$.fragment,Je),de(je.$$.fragment,Je),de(St),We=!0)},o(Je){Ie(sn),Ie(X),Ie(Fe.$$.fragment,Je),Ie(je.$$.fragment,Je),Ie(St),We=!1},d(Je){Je&&(_(e),_(F),_($),_(G),_(ge),_(ie),_(le),_(pe),_(me),_(ue),_(oe),_(Se),_(Me),_(we),_(Te),_(_t),_(Pe),_(Ve),_(Ke)),ze&&ze.d(),ft.d(),Ut&&Ut.d(),Qe&&Qe.d(),Ft.d(Je),qt&&qt.d(),vt&&vt.d(),$t&&$t.d(),dn&&dn.d(),sn&&sn.d(),pn&&pn.d(),Ye&&Ye.d(),Mt[ke].d(Je),gt&&gt.d(Je),it&&it.d(Je),lt(Fe,Je),lt(je,Je),St&&St.d(Je)}}}function t2(n){const e=n.target.closest(".flight"),t=e.querySelector(".cursor");if(!t)return;const i=e.getBoundingClientRect(),r=(n.clientX-i.left)/i.width;r<0||r>1?t.style.display="none":t.style.display="block",t.style.left=r*100+"%"}const n2=()=>{},i2=()=>{};function iS(n,e,t){var gt;let i,r,s,o,a=$e,l=()=>(a(),a=Dt(s,it=>t(3,o=it)),s),h,d,m,v,k,w,E=$e,I=()=>(E(),E=Dt(_t,it=>t(7,w=it)),_t),M,C,D=$e,O=()=>(D(),D=Dt(be,it=>t(55,C=it)),be),P,F,V=$e,$=()=>(V(),V=Dt(ye,it=>t(8,F=it)),ye),G,U,H,j,Q,W,Y,q=$e,ne=()=>(q(),q=Dt(i,it=>t(22,Y=it)),i),J,ge=$e,ie=()=>(ge(),ge=Dt(r,it=>t(23,J=it)),r);He(n,nn,it=>t(5,m=it)),He(n,bi,it=>t(53,v=it)),He(n,Li,it=>t(6,k=it)),He(n,Nn,it=>t(18,H=it)),He(n,za,it=>t(21,W=it)),n.$$.on_destroy.push(()=>a()),n.$$.on_destroy.push(()=>E()),n.$$.on_destroy.push(()=>D()),n.$$.on_destroy.push(()=>V()),n.$$.on_destroy.push(()=>q()),n.$$.on_destroy.push(()=>ge());let{iconSet:le}=e,{map:pe}=e,{trafficService:ye}=e;$();let{sensorsAreas:be}=e;O();let{aircraftInfo:re}=e,{currentDroneRelationService:me}=e,{reactiveDroneRelationService:ke}=e,{flightSummariesService:X}=e,{geofencesService:ue}=e;const _e=(m==null?void 0:m.aid)&&(m==null?void 0:m.aid.length)==36&&(m==null?void 0:m.aid.charAt(8))=="-"&&(m==null?void 0:m.aid.charAt(13))=="-"&&(m==null?void 0:m.aid.charAt(18))=="-"&&(m==null?void 0:m.aid.charAt(23))=="-",oe=_e&&(re==null?void 0:re.data.make)=="DJI"&&((gt=re==null?void 0:re.data.model)==null?void 0:gt.toLowerCase())=="unknown";let ae=null;const[Se,Me]=ke.subscribeToRelationship(re.data.serialNumber);He(n,Se,it=>t(19,j=it)),ls(()=>Me());let we=new Ot(!1);He(n,we,it=>t(16,G=it));let Te=new Ot("");He(n,Te,it=>t(17,U=it));function Ae(){var it;v instanceof ni&&v.paused.set(!0),kn(we,G=!0,G),kn(Te,U=((it=Se.current)==null?void 0:it.notes)||"",U),setTimeout(()=>{var St;(St=document.getElementById("drone-notes-textarea"))==null||St.focus()},0)}function Ne(){kn(we,G=!1,G)}async function De(){!Se.current||!re.data.serialNumber||(await me.updateDroneRelation(Se.current.id,re.data.serialNumber,Se.current.relationship,{identifier:Se.current.identifier,notes:Te.current}),kn(we,G=!1,G))}let _t=null;I();const Fe=Pn(null);let Pe=null;const je=Pn([]);He(n,je,it=>t(56,P=it));const Ve=Pn([]);He(n,Ve,it=>t(54,M=it));const Ue=new Ot([]);He(n,Ue,it=>t(4,h=it));const Ke=Pn([]);He(n,Ke,it=>t(15,d=it));const We=new Ot([]);He(n,We,it=>t(20,Q=it));const ze=new Ot(null),Et=new Yl;ls(()=>Et.onDestroy());let rt=null;async function ft(){We.set([]);const it=(w==null?void 0:w.int.map(async Jt=>{var ut;try{return{...await(ue==null?void 0:ue.getDetailedGeofence(Jt.id)),isDeleted:!1}}catch(jt){console.error("Failed to fetch geofence",Jt.id,jt);const gn=(ut=ue==null?void 0:ue.geofences.current)==null?void 0:ut.get(Jt.id);return gn?{...gn,isDeleted:!0}:{id:Jt.id,name:Jt.n,isDeleted:!0}}}))||[],St=await Promise.all(it);We.set(St.filter(Jt=>Jt!==null))}let Ut=null;function Qe(it){var St,Jt,ut;!((St=ze.current)!=null&&St.lat)||!((Jt=ze.current)!=null&&Jt.lng)||(pe.panTo([ze.current.lat,ze.current.lng]),document.body.clientWidth<800&&((ut=it==null?void 0:it.target)==null||ut.dispatchEvent(new CustomEvent("sidebar-collapse",{bubbles:!0}))))}function yt(it){var St,Jt,ut,jt,gn;!((Jt=(St=o==null?void 0:o.lastUpdate)==null?void 0:St.pc)!=null&&Jt.lat)||!((jt=(ut=o==null?void 0:o.lastUpdate)==null?void 0:ut.pc)!=null&&jt.lng)||(pe.panTo([o.lastUpdate.pc.lat,o.lastUpdate.pc.lng]),document.body.clientWidth<800&&((gn=it==null?void 0:it.target)==null||gn.dispatchEvent(new CustomEvent("sidebar-collapse",{bubbles:!0}))))}function mt(it){!it.location||!it.location.lat||!it.location.lng||(pe.fitBounds(Ct.latLng([it.location.lat,it.location.lng]).toBounds(5e3)),ii.settings.fields.sensors_layer_shown.set(!0),document.body.clientWidth<800&&document.body.dispatchEvent(new CustomEvent("sidebar-collapse",{bubbles:!0})))}function Ft(it){it!=null&&it.fence&&(it.fence.h?pe.fitBounds(Ct.latLng(it.fence.v[0]).toBounds(it.fence.h)):pe.fitBounds(Ct.latLngBounds(it.fence.v))),ii.settings.fields.geofence_layer_shown.set(!0),document.body.clientWidth<800&&document.body.dispatchEvent(new CustomEvent("sidebar-collapse",{bubbles:!0}))}function qt(it,St,Jt=0){var gn,Be,tt,en,Fn;let ut=St.s/1e3-.5;if(Jt>0){const Vn=St.e/1e3;ut+=(Vn-ut)*Jt}const jt=Gf(St);Lo.set(jt),(gn=it==null?void 0:it.target)==null||gn.dispatchEvent(new CustomEvent("play-back",{bubbles:!0,detail:{unixTimestamp:ut,flightSummary:jt}})),Jt||((Be=St==null?void 0:St.sw)==null?void 0:Be.lat)!==0&&((tt=St==null?void 0:St.sw)==null?void 0:tt.lng)!==0&&((en=St==null?void 0:St.ne)==null?void 0:en.lat)!==0&&((Fn=St==null?void 0:St.ne)==null?void 0:Fn.lng)!==0&&pe.fitBounds(Ct.latLngBounds(Ct.latLng(St.sw),Ct.latLng(St.ne)),{duration:1,maxZoom:9,animate:!0})}function vt(it,St){const Jt=it.target.closest(".flight");if(!Jt.querySelector(".cursor"))return;const jt=Jt.getBoundingClientRect(),gn=(it.clientX-jt.left)/jt.width;qt(it,St,gn)}function $t(){nn.goto({type:Tt.KnownDrones,prefillData:{serialNumber:(re==null?void 0:re.data.serialNumber)||""}})}mi(()=>{const it=s==null?void 0:s.subscribe(St=>{var Jt;(Jt=St==null?void 0:St.lastUpdate)!=null&&Jt.dc&&St.lastUpdate.dc.lat&&St.lastUpdate.dc.lng&&ze.set(St.lastUpdate.dc)});return()=>{it&&it()}});function dn(){U=this.value,Te.set(U)}const sn=it=>mt(it),pn=it=>{it.isDeleted||Ft(it)},Ye=it=>Qe(it),Vt=it=>yt(it),Mt=(it,St)=>vt(St,it),Rt=(it,St)=>qt(St,it);return n.$$set=it=>{"iconSet"in it&&t(45,le=it.iconSet),"map"in it&&t(46,pe=it.map),"trafficService"in it&&$(t(0,ye=it.trafficService)),"sensorsAreas"in it&&O(t(1,be=it.sensorsAreas)),"aircraftInfo"in it&&t(2,re=it.aircraftInfo),"currentDroneRelationService"in it&&t(47,me=it.currentDroneRelationService),"reactiveDroneRelationService"in it&&t(48,ke=it.reactiveDroneRelationService),"flightSummariesService"in it&&t(49,X=it.flightSummariesService),"geofencesService"in it&&t(50,ue=it.geofencesService)},n.$$.update=()=>{var it,St,Jt,ut;if(n.$$.dirty[0]&4&&re!=null&&re.data.model&&(t(9,ae=null),(async()=>{try{const jt=await fetch(`/private/drones/${re.data.model}.txt`);jt.ok&&t(9,ae=await jt.text())}catch{}})()),n.$$.dirty[1]&4194304&&ne(t(14,i=v instanceof ni?v.paybackTimeStore:Pn(null))),n.$$.dirty[1]&4194304&&ie(t(13,r=v instanceof ni?v.paused:null)),n.$$.dirty[0]&288&&l(t(12,s=F?F.subscribeToDrone((m==null?void 0:m.type)==Tt.AircraftView?m==null?void 0:m.aid:""):null)),n.$$.dirty[0]&8|n.$$.dirty[1]&262144&&o&&I(t(10,_t=X.subscribeToFlight(o==null?void 0:o.flightId))),n.$$.dirty[0]&8|n.$$.dirty[1]&4194304&&v&&(it=o==null?void 0:o.lastUpdate)!=null&&it.dc&&o.lastUpdate.dc.lat&&o.lastUpdate.dc.lng&&Fe.set(o.lastUpdate.dc),n.$$.dirty[0]&8|n.$$.dirty[1]&33554432&&(Object.is(P,o==null?void 0:o.detectingSensors)||kn(je,P=(o==null?void 0:o.detectingSensors)||[],P)),n.$$.dirty[1]&20971520&&(kn(Ve,M=[],M),kn(je,P=[],P),kn(Ke,d=[],d),kn(Ue,h=[],h)),n.$$.dirty[0]&8|n.$$.dirty[1]&50331648&&C&&P&&Et.swap(C.sensors.onNewValues(jt=>{var gn;(gn=o==null?void 0:o.lastUpdate)!=null&&gn.sensorID&&Ve.set(P.map(Be=>jt.get(Be)||null).filter(Be=>Be!==null))})),n.$$.dirty[0]&128|n.$$.dirty[1]&25165824&&C&&(M||w)){const jt=C.sensors,gn=new Map;for(const Be of M)gn.set(Be.id,Be);if(w!=null&&w.sen){const Be=(St=w.sen)==null?void 0:St.split(",").map(tt=>parseInt(tt.trim())).filter(tt=>!isNaN(tt));for(const tt of Be)if(!gn.has(tt)){const en=(Jt=jt.current)==null?void 0:Jt.get(tt);en&&gn.set(tt,en)}}Ue.set(Array.from(gn.values()))}if(n.$$.dirty[0]&136|n.$$.dirty[1]&1572864&&w&&ue&&o&&o!=null&&o.flightId&&o.flightId!==rt&&(t(51,rt=o.flightId),ft()),n.$$.dirty[0]&96|n.$$.dirty[1]&2359296&&(m==null?void 0:m.type)==Tt.AircraftView&&((Ut==null?void 0:Ut.type)!==Tt.AircraftView||m.aid!=(Ut==null?void 0:Ut.aid))&&(t(52,Ut={...m}),We.set([]),k!=null&&k.hasPermission(100)&&(k!=null&&k.hasPermission(102))&&(k!=null&&k.hasPermission(103))&&t(11,Pe=(async()=>{let jt=await Hr("/api/v1/history/"+m.aid+"/all_flights");return X.updateFromFlights(jt),jt.sort((gn,Be)=>Be.s-gn.s)})())),n.$$.dirty[0]&56|n.$$.dirty[1]&4194304&&v&&h&&(m==null?void 0:m.type)==Tt.AircraftView){const jt=(ut=o==null?void 0:o.lastUpdate)==null?void 0:ut.dc;jt&&jt.lat&&jt.lng&&kn(Ke,d=h.map(gn=>gn.location?nh(jt,gn.location):null),d)}n.$$.dirty[0]&4&&console.log("aircraftInfo:",re)},[ye,be,re,o,h,m,k,w,F,ae,_t,Pe,s,r,i,d,G,U,H,j,Q,W,Y,J,_e,oe,Se,we,Te,Ae,Ne,De,Fe,je,Ve,Ue,Ke,We,Qe,yt,mt,Ft,qt,vt,$t,le,pe,me,ke,X,ue,rt,Ut,v,M,C,P,dn,sn,pn,Ye,Vt,Mt,Rt]}class rS extends Wt{constructor(e){super(),Xt(this,e,iS,nS,zt,{iconSet:45,map:46,trafficService:0,sensorsAreas:1,aircraftInfo:2,currentDroneRelationService:47,reactiveDroneRelationService:48,flightSummariesService:49,geofencesService:50},null,[-1,-1,-1])}}function sS(n){let e,t,i,r={ctx:n,current:null,token:null,hasCatch:!0,pending:hS,then:lS,catch:aS,value:16,error:17,blocks:[,,,]};return xs(t=n[9],r),{c(){e=dt(),r.block.c()},l(s){e=dt(),r.block.l(s)},m(s,o){Z(s,e,o),r.block.m(s,r.anchor=o),r.mount=()=>e.parentNode,r.anchor=e,i=!0},p(s,o){n=s,r.ctx=n,o&512&&t!==(t=n[9])&&xs(t,r)||Qc(r,n,o)},i(s){i||(de(r.block),i=!0)},o(s){for(let o=0;o<3;o+=1){const a=r.blocks[o];Ie(a)}i=!1},d(s){s&&_(e),r.block.d(s),r.token=null,r=null}}}function oS(n){let e,t,i;return{c(){e=A("div"),t=A("p"),i=he(n[10]),this.h()},l(r){e=R(r,"DIV",{class:!0});var s=T(e);t=R(s,"P",{});var o=T(t);i=fe(o,n[10]),o.forEach(_),s.forEach(_),this.h()},h(){g(e,"class","p8")},m(r,s){Z(r,e,s),p(e,t),p(t,i)},p(r,s){s&1024&&Ee(i,r[10])},i:$e,o:$e,d(r){r&&_(e)}}}function aS(n){let e,t,i=n[12]("aircraftView.noData")+"",r;return{c(){e=A("div"),t=A("p"),r=he(i),this.h()},l(s){e=R(s,"DIV",{class:!0});var o=T(e);t=R(o,"P",{});var a=T(t);r=fe(a,i),a.forEach(_),o.forEach(_),this.h()},h(){g(e,"class","p8")},m(s,o){Z(s,e,o),p(e,t),p(t,r)},p(s,o){o&4096&&i!==(i=s[12]("aircraftView.noData")+"")&&Ee(r,i)},i:$e,o:$e,d(s){s&&_(e)}}}function lS(n){var I,M,C;let e,t,i,r,s=((I=n[11])==null?void 0:I.hasPermission(22))&&((M=n[16])==null?void 0:M.type)!==si.ADSB,o,a,l,h,d=n[8].backToHistory&&r2(n),m=((C=n[16])==null?void 0:C.type)===si.ADSB&&s2(),v=s&&o2(n);const k=[cS,uS],w=[];function E(D,O){var P,F;return((P=D[16])==null?void 0:P.type)==si.ADSB?0:((F=D[16])==null?void 0:F.type)==si.DRID?1:-1}return~(a=E(n))&&(l=w[a]=k[a](n)),{c(){e=A("div"),t=A("div"),d&&d.c(),i=ee(),m&&m.c(),r=ee(),v&&v.c(),o=ee(),l&&l.c(),this.h()},l(D){e=R(D,"DIV",{class:!0});var O=T(e);t=R(O,"DIV",{class:!0});var P=T(t);d&&d.l(P),i=te(P),m&&m.l(P),r=te(P),v&&v.l(P),P.forEach(_),o=te(O),l&&l.l(O),O.forEach(_),this.h()},h(){g(t,"class","row center-cross g8 top-left-info svelte-yts099"),g(e,"class","panel-scrollable rel")},m(D,O){Z(D,e,O),p(e,t),d&&d.m(t,null),p(t,i),m&&m.m(t,null),p(t,r),v&&v.m(t,null),p(e,o),~a&&w[a].m(e,null),h=!0},p(D,O){var F,V,$;D[8].backToHistory?d?d.p(D,O):(d=r2(D),d.c(),d.m(t,i)):d&&(d.d(1),d=null),((F=D[16])==null?void 0:F.type)===si.ADSB?m||(m=s2(),m.c(),m.m(t,r)):m&&(m.d(1),m=null),O&2560&&(s=((V=D[11])==null?void 0:V.hasPermission(22))&&(($=D[16])==null?void 0:$.type)!==si.ADSB),s?v?(v.p(D,O),O&2560&&de(v,1)):(v=o2(D),v.c(),de(v,1),v.m(t,null)):v&&(bt(),Ie(v,1,1,()=>{v=null}),wt());let P=a;a=E(D),a===P?~a&&w[a].p(D,O):(l&&(bt(),Ie(w[P],1,1,()=>{w[P]=null}),wt()),~a?(l=w[a],l?l.p(D,O):(l=w[a]=k[a](D),l.c()),de(l,1),l.m(e,null)):l=null)},i(D){h||(de(v),de(l),h=!0)},o(D){Ie(v),Ie(l),h=!1},d(D){D&&_(e),d&&d.d(),m&&m.d(),v&&v.d(),~a&&w[a].d()}}}function r2(n){let e,t='<svg fill="#fff" width="16" height="16" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M222.927 580.115l301.354 328.512c24.354 28.708 20.825 71.724-7.883 96.078s-71.724 20.825-96.078-7.883L19.576 559.963a67.846 67.846 0 01-13.784-20.022 68.03 68.03 0 01-5.977-29.488l.001-.063a68.343 68.343 0 017.265-29.134 68.28 68.28 0 011.384-2.6 67.59 67.59 0 0110.102-13.687L429.966 21.113c25.592-27.611 68.721-29.247 96.331-3.656s29.247 68.721 3.656 96.331L224.088 443.784h730.46c37.647 0 68.166 30.519 68.166 68.166s-30.519 68.166-68.166 68.166H222.927z"></path></g></svg>',i,r;return{c(){e=A("a"),e.innerHTML=t,this.h()},l(s){e=R(s,"A",{class:!0,style:!0,href:!0,"data-svelte-h":!0}),rn(e)!=="svelte-1tyzmk0"&&(e.innerHTML=t),this.h()},h(){g(e,"class","top-button svelte-yts099"),B(e,"padding","6px"),B(e,"height","28px"),g(e,"href","")},m(s,o){Z(s,e,o),i||(r=nt(e,"click",ro(n[14])),i=!0)},p:$e,d(s){s&&_(e),i=!1,r()}}}function s2(n){let e,t="ADS-B";return{c(){e=A("p"),e.textContent=t,this.h()},l(i){e=R(i,"P",{class:!0,"data-svelte-h":!0}),rn(e)!=="svelte-wjmgn7"&&(e.textContent=t),this.h()},h(){g(e,"class","sensor-type svelte-yts099")},m(i,r){Z(i,e,r)},d(i){i&&_(e)}}}function o2(n){var i;let e,t;return e=new Xk({props:{reactiveDroneRelationService:n[5],aid:(i=n[8])==null?void 0:i.aid,iconsSet:n[0],size:22,style:"justify-self: flex-end; margin-bottom: 0;"}}),{c(){st(e.$$.fragment)},l(r){ot(e.$$.fragment,r)},m(r,s){at(e,r,s),t=!0},p(r,s){var a;const o={};s&32&&(o.reactiveDroneRelationService=r[5]),s&256&&(o.aid=(a=r[8])==null?void 0:a.aid),s&1&&(o.iconsSet=r[0]),e.$set(o)},i(r){t||(de(e.$$.fragment,r),t=!0)},o(r){Ie(e.$$.fragment,r),t=!1},d(r){lt(e,r)}}}function uS(n){let e,t;return e=new rS({props:{iconSet:n[0],map:n[1],trafficService:n[2],sensorsAreas:n[3],aircraftInfo:n[16],currentDroneRelationService:n[4],reactiveDroneRelationService:n[5],flightSummariesService:n[6],geofencesService:n[7]}}),{c(){st(e.$$.fragment)},l(i){ot(e.$$.fragment,i)},m(i,r){at(e,i,r),t=!0},p(i,r){const s={};r&1&&(s.iconSet=i[0]),r&2&&(s.map=i[1]),r&4&&(s.trafficService=i[2]),r&8&&(s.sensorsAreas=i[3]),r&512&&(s.aircraftInfo=i[16]),r&16&&(s.currentDroneRelationService=i[4]),r&32&&(s.reactiveDroneRelationService=i[5]),r&64&&(s.flightSummariesService=i[6]),r&128&&(s.geofencesService=i[7]),e.$set(s)},i(i){t||(de(e.$$.fragment,i),t=!0)},o(i){Ie(e.$$.fragment,i),t=!1},d(i){lt(e,i)}}}function cS(n){let e,t;return e=new gE({props:{iconSet:n[0],map:n[1],trafficService:n[2],sensorsAreas:n[3],aircraftInfo:n[16]}}),{c(){st(e.$$.fragment)},l(i){ot(e.$$.fragment,i)},m(i,r){at(e,i,r),t=!0},p(i,r){const s={};r&1&&(s.iconSet=i[0]),r&2&&(s.map=i[1]),r&4&&(s.trafficService=i[2]),r&8&&(s.sensorsAreas=i[3]),r&512&&(s.aircraftInfo=i[16]),e.$set(s)},i(i){t||(de(e.$$.fragment,i),t=!0)},o(i){Ie(e.$$.fragment,i),t=!1},d(i){lt(e,i)}}}function hS(n){var E;let e,t,i,r="AIRCRAFT",s,o,a=((E=n[8])==null?void 0:E.aid)+"",l,h,d,m,v,k,w;return k=new ws({props:{color:"#aa8800",size:"32"}}),{c(){e=A("div"),t=A("div"),i=A("b"),i.textContent=r,s=ee(),o=A("p"),l=he(a),h=ee(),d=A("hr"),m=ee(),v=A("div"),st(k.$$.fragment),this.h()},l(I){e=R(I,"DIV",{class:!0,style:!0});var M=T(e);t=R(M,"DIV",{class:!0});var C=T(t);i=R(C,"B",{style:!0,"data-svelte-h":!0}),rn(i)!=="svelte-7khmgr"&&(i.textContent=r),s=te(C),o=R(C,"P",{style:!0});var D=T(o);l=fe(D,a),D.forEach(_),C.forEach(_),M.forEach(_),h=te(I),d=R(I,"HR",{}),m=te(I),v=R(I,"DIV",{class:!0,style:!0});var O=T(v);ot(k.$$.fragment,O),O.forEach(_),this.h()},h(){B(i,"font-size","12px"),B(o,"font-size","18px"),g(t,"class","column grow"),g(e,"class","row center-cross info-row svelte-yts099"),B(e,"background-color","#445"),g(v,"class","column center center-cross"),B(v,"height","64px")},m(I,M){Z(I,e,M),p(e,t),p(t,i),p(t,s),p(t,o),p(o,l),Z(I,h,M),Z(I,d,M),Z(I,m,M),Z(I,v,M),at(k,v,null),w=!0},p(I,M){var C;(!w||M&256)&&a!==(a=((C=I[8])==null?void 0:C.aid)+"")&&Ee(l,a)},i(I){w||(de(k.$$.fragment,I),w=!0)},o(I){Ie(k.$$.fragment,I),w=!1},d(I){I&&(_(e),_(h),_(d),_(m),_(v)),lt(k)}}}function fS(n){let e,t,i='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M19 5L5 19M5.00001 5L19 19" stroke="#fff" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>',r,s,o,a,l,h;const d=[oS,sS],m=[];function v(k,w){return k[10]?0:1}return s=v(n),o=m[s]=d[s](n),{c(){e=A("div"),t=A("a"),t.innerHTML=i,r=ee(),o.c(),this.h()},l(k){e=R(k,"DIV",{id:!0,class:!0,style:!0});var w=T(e);t=R(w,"A",{class:!0,style:!0,href:!0,"data-svelte-h":!0}),rn(t)!=="svelte-84xki1"&&(t.innerHTML=i),r=te(w),o.l(w),w.forEach(_),this.h()},h(){g(t,"class","top-button svelte-yts099"),B(t,"right","0"),g(t,"href",""),g(e,"id","drone-info"),g(e,"class","panel column svelte-yts099"),B(e,"position","relative")},m(k,w){Z(k,e,w),p(e,t),p(e,r),m[s].m(e,null),a=!0,l||(h=nt(t,"click",ro(n[13])),l=!0)},p(k,[w]){let E=s;s=v(k),s===E?m[s].p(k,w):(bt(),Ie(m[E],1,1,()=>{m[E]=null}),wt(),o=m[s],o?o.p(k,w):(o=m[s]=d[s](k),o.c()),de(o,1),o.m(e,null))},i(k){a||(de(o),a=!0)},o(k){Ie(o),a=!1},d(k){k&&_(e),m[s].d(),l=!1,h()}}}function dS(n,e,t){let i,r,s;He(n,nn,D=>t(8,i=D)),He(n,Li,D=>t(11,r=D)),He(n,Nn,D=>t(12,s=D));let{iconSet:o}=e,{map:a}=e,{trafficService:l}=e,{sensorsAreas:h}=e,{currentDroneRelationService:d}=e,{reactiveDroneRelationService:m}=e,{flightSummariesService:v}=e,{geofencesService:k}=e,w=null,E=null,I=null;function M(){nn.goto(null)}function C(){nn.set({type:Tt.History})}return n.$$set=D=>{"iconSet"in D&&t(0,o=D.iconSet),"map"in D&&t(1,a=D.map),"trafficService"in D&&t(2,l=D.trafficService),"sensorsAreas"in D&&t(3,h=D.sensorsAreas),"currentDroneRelationService"in D&&t(4,d=D.currentDroneRelationService),"reactiveDroneRelationService"in D&&t(5,m=D.reactiveDroneRelationService),"flightSummariesService"in D&&t(6,v=D.flightSummariesService),"geofencesService"in D&&t(7,k=D.geofencesService)},n.$$.update=()=>{n.$$.dirty&33024&&(i==null?void 0:i.type)==Tt.AircraftView&&((I==null?void 0:I.type)!==Tt.AircraftView||i.aid!=(I==null?void 0:I.aid))&&(t(15,I={...i}),t(10,E=null),t(9,w=(async()=>await q3(i.aid))()))},[o,a,l,h,d,m,v,k,i,w,E,r,s,M,C,I]}class gS extends Wt{constructor(e){super(),Xt(this,e,dS,fS,zt,{iconSet:0,map:1,trafficService:2,sensorsAreas:3,currentDroneRelationService:4,reactiveDroneRelationService:5,flightSummariesService:6,geofencesService:7})}}function a2(n,e,t){const i=n.slice();i[18]=e[t][0],i[19]=e[t][1];const r=Array.from(i[6].values()).filter(function(...a){return n[17](i[19],...a)}).sort((o,a)=>a.id-o.id);i[20]=r;const s=i[20].reduce((o,a)=>{var l;return o+((l=i[1])!=null&&l.sender_reports[a.id]?1:0)},0);return i[21]=s,i}function l2(n,e,t){var s;const i=n.slice();i[24]=e[t];const r=(s=i[1])==null?void 0:s.sender_reports[i[24].id];return i[25]=r,i}function mS(n){let e,t,i,r,s,o,a,l,h,d,m,v,k=n[3]("sensors.connectedSensors")+"",w,E,I,M=n[3]("sensors.serverNotResponding")+"",C;return{c(){e=A("div"),t=Re("svg"),i=Re("desc"),r=he("Created with Sketch."),s=Re("defs"),o=Re("g"),a=Re("g"),l=Re("g"),h=Re("path"),d=ee(),m=A("div"),v=A("b"),w=he(k),E=ee(),I=A("p"),C=he(M),this.h()},l(D){e=R(D,"DIV",{class:!0});var O=T(e);t=Oe(O,"svg",{style:!0,xmlns:!0,"xmlns:xlink":!0,width:!0,height:!0,viewBox:!0,version:!0});var P=T(t);i=Oe(P,"desc",{});var F=T(i);r=fe(F,"Created with Sketch."),F.forEach(_),s=Oe(P,"defs",{}),T(s).forEach(_),o=Oe(P,"g",{id:!0,stroke:!0,"stroke-width":!0,fill:!0,"fill-rule":!0});var V=T(o);a=Oe(V,"g",{id:!0,transform:!0,fill:!0});var $=T(a);l=Oe($,"g",{id:!0,transform:!0});var G=T(l);h=Oe(G,"path",{d:!0,id:!0}),T(h).forEach(_),G.forEach(_),$.forEach(_),V.forEach(_),P.forEach(_),d=te(O),m=R(O,"DIV",{class:!0});var U=T(m);v=R(U,"B",{});var H=T(v);w=fe(H,k),H.forEach(_),E=te(U),I=R(U,"P",{});var j=T(I);C=fe(j,M),j.forEach(_),U.forEach(_),O.forEach(_),this.h()},h(){g(h,"d","M95.4324393,3487.63833 C95.4094393,3487.61278 95.3924393,3487.58428 95.3674393,3487.55971 L95.3634393,3487.56265 C94.5824393,3486.79509 93.2434393,3486.86683 92.5364393,3487.56167 C91.8294393,3488.25651 91.8314393,3489.64423 92.5384393,3490.33907 C92.5474393,3490.34791 92.5584393,3490.35381 92.5674393,3490.36265 C92.5914393,3490.38722 92.6084393,3490.41671 92.6334393,3490.44128 L92.6364393,3490.43735 C93.4174393,3491.20491 94.7564393,3491.13415 95.4634393,3490.43833 C96.1704393,3489.74349 96.1684393,3488.35577 95.4614393,3487.66093 C95.4524393,3487.65209 95.4414393,3487.64717 95.4324393,3487.63833 M91.1194393,3486.17002 L89.7054393,3484.77936 C87.5844393,3486.86486 87.6834393,3491.13612 89.8044393,3493.22064 L91.2184393,3491.83096 C89.8044393,3490.44128 89.7054393,3487.55971 91.1194393,3486.17002 M88.2914393,3483.38968 L86.8774393,3482 C82.6344393,3486.17002 83.4404393,3492.5258 86.9764393,3496 L88.3904393,3494.61032 C85.5624393,3491.83096 85.4634393,3486.17002 88.2914393,3483.38968 M98.1954393,3484.77936 L96.7814393,3486.17002 C98.1954393,3487.55971 98.2944393,3490.44128 96.8804393,3491.83096 L98.2944393,3493.22064 C100.415439,3491.13612 100.316439,3486.86486 98.1954393,3484.77936 M101.122439,3496 L99.7084393,3494.61032 C102.537439,3491.83096 102.438439,3486.17002 99.6094393,3483.38968 L101.023439,3482 C104.559439,3485.47518 105.365439,3491.83096 101.122439,3496"),g(h,"id","radio_signal-[#1026]"),g(l,"id","icons"),g(l,"transform","translate(56.000000, 160.000000)"),g(a,"id","Dribbble-Light-Preview"),g(a,"transform","translate(-140.000000, -3642.000000)"),g(a,"fill","#000000"),g(o,"id","Page-1"),g(o,"stroke","none"),g(o,"stroke-width","1"),g(o,"fill","none"),g(o,"fill-rule","evenodd"),B(t,"width","40px"),B(t,"height","40px"),B(t,"padding","8px"),g(t,"xmlns","http://www.w3.org/2000/svg"),g(t,"xmlns:xlink","http://www.w3.org/1999/xlink"),g(t,"width","800px"),g(t,"height","800px"),g(t,"viewBox","0 -3 20 20"),g(t,"version","1.1"),g(m,"class","column"),g(e,"class","row g8 p816 hoverable")},m(D,O){Z(D,e,O),p(e,t),p(t,i),p(i,r),p(t,s),p(t,o),p(o,a),p(a,l),p(l,h),p(e,d),p(e,m),p(m,v),p(v,w),p(m,E),p(m,I),p(I,C)},p(D,O){O&8&&k!==(k=D[3]("sensors.connectedSensors")+"")&&Ee(w,k),O&8&&M!==(M=D[3]("sensors.serverNotResponding")+"")&&Ee(C,M)},i:$e,o:$e,d(D){D&&_(e)}}}function _S(n){let e,t,i,r,s,o,a,l,h,d,m,v,k=n[3]("sensors.connectedSensors")+"",w,E,I,M;return{c(){e=A("div"),t=Re("svg"),i=Re("desc"),r=he("Created with Sketch."),s=Re("defs"),o=Re("g"),a=Re("g"),l=Re("g"),h=Re("path"),d=ee(),m=A("div"),v=A("b"),w=he(k),E=ee(),I=A("p"),M=he(n[0]),this.h()},l(C){e=R(C,"DIV",{class:!0});var D=T(e);t=Oe(D,"svg",{style:!0,xmlns:!0,"xmlns:xlink":!0,width:!0,height:!0,viewBox:!0,version:!0});var O=T(t);i=Oe(O,"desc",{});var P=T(i);r=fe(P,"Created with Sketch."),P.forEach(_),s=Oe(O,"defs",{}),T(s).forEach(_),o=Oe(O,"g",{id:!0,stroke:!0,"stroke-width":!0,fill:!0,"fill-rule":!0});var F=T(o);a=Oe(F,"g",{id:!0,transform:!0,fill:!0});var V=T(a);l=Oe(V,"g",{id:!0,transform:!0});var $=T(l);h=Oe($,"path",{d:!0,id:!0}),T(h).forEach(_),$.forEach(_),V.forEach(_),F.forEach(_),O.forEach(_),d=te(D),m=R(D,"DIV",{class:!0});var G=T(m);v=R(G,"B",{});var U=T(v);w=fe(U,k),U.forEach(_),E=te(G),I=R(G,"P",{});var H=T(I);M=fe(H,n[0]),H.forEach(_),G.forEach(_),D.forEach(_),this.h()},h(){g(h,"d","M95.4324393,3487.63833 C95.4094393,3487.61278 95.3924393,3487.58428 95.3674393,3487.55971 L95.3634393,3487.56265 C94.5824393,3486.79509 93.2434393,3486.86683 92.5364393,3487.56167 C91.8294393,3488.25651 91.8314393,3489.64423 92.5384393,3490.33907 C92.5474393,3490.34791 92.5584393,3490.35381 92.5674393,3490.36265 C92.5914393,3490.38722 92.6084393,3490.41671 92.6334393,3490.44128 L92.6364393,3490.43735 C93.4174393,3491.20491 94.7564393,3491.13415 95.4634393,3490.43833 C96.1704393,3489.74349 96.1684393,3488.35577 95.4614393,3487.66093 C95.4524393,3487.65209 95.4414393,3487.64717 95.4324393,3487.63833 M91.1194393,3486.17002 L89.7054393,3484.77936 C87.5844393,3486.86486 87.6834393,3491.13612 89.8044393,3493.22064 L91.2184393,3491.83096 C89.8044393,3490.44128 89.7054393,3487.55971 91.1194393,3486.17002 M88.2914393,3483.38968 L86.8774393,3482 C82.6344393,3486.17002 83.4404393,3492.5258 86.9764393,3496 L88.3904393,3494.61032 C85.5624393,3491.83096 85.4634393,3486.17002 88.2914393,3483.38968 M98.1954393,3484.77936 L96.7814393,3486.17002 C98.1954393,3487.55971 98.2944393,3490.44128 96.8804393,3491.83096 L98.2944393,3493.22064 C100.415439,3491.13612 100.316439,3486.86486 98.1954393,3484.77936 M101.122439,3496 L99.7084393,3494.61032 C102.537439,3491.83096 102.438439,3486.17002 99.6094393,3483.38968 L101.023439,3482 C104.559439,3485.47518 105.365439,3491.83096 101.122439,3496"),g(h,"id","radio_signal-[#1026]"),g(l,"id","icons"),g(l,"transform","translate(56.000000, 160.000000)"),g(a,"id","Dribbble-Light-Preview"),g(a,"transform","translate(-140.000000, -3642.000000)"),g(a,"fill","#000000"),g(o,"id","Page-1"),g(o,"stroke","none"),g(o,"stroke-width","1"),g(o,"fill","none"),g(o,"fill-rule","evenodd"),B(t,"width","40px"),B(t,"height","40px"),B(t,"padding","8px"),g(t,"xmlns","http://www.w3.org/2000/svg"),g(t,"xmlns:xlink","http://www.w3.org/1999/xlink"),g(t,"width","800px"),g(t,"height","800px"),g(t,"viewBox","0 -3 20 20"),g(t,"version","1.1"),g(m,"class","column"),g(e,"class","row g8 p816 hoverable")},m(C,D){Z(C,e,D),p(e,t),p(t,i),p(i,r),p(t,s),p(t,o),p(o,a),p(a,l),p(l,h),p(e,d),p(e,m),p(m,v),p(v,w),p(m,E),p(m,I),p(I,M)},p(C,D){D&8&&k!==(k=C[3]("sensors.connectedSensors")+"")&&Ee(w,k),D&1&&Ee(M,C[0])},i:$e,o:$e,d(C){C&&_(e)}}}function pS(n){let e,t,i,r,s,o,a,l,h,d,m,v,k=n[3]("sensors.connectedSensors")+"",w,E,I,M,C,D,O;return D=new ws({props:{color:"#aa8800",size:"32"}}),{c(){e=A("div"),t=Re("svg"),i=Re("desc"),r=he("Created with Sketch."),s=Re("defs"),o=Re("g"),a=Re("g"),l=Re("g"),h=Re("path"),d=ee(),m=A("div"),v=A("b"),w=he(k),E=ee(),I=A("p"),M=he(n[0]),C=ee(),st(D.$$.fragment),this.h()},l(P){e=R(P,"DIV",{class:!0});var F=T(e);t=Oe(F,"svg",{style:!0,xmlns:!0,"xmlns:xlink":!0,width:!0,height:!0,viewBox:!0,version:!0});var V=T(t);i=Oe(V,"desc",{});var $=T(i);r=fe($,"Created with Sketch."),$.forEach(_),s=Oe(V,"defs",{}),T(s).forEach(_),o=Oe(V,"g",{id:!0,stroke:!0,"stroke-width":!0,fill:!0,"fill-rule":!0});var G=T(o);a=Oe(G,"g",{id:!0,transform:!0,fill:!0});var U=T(a);l=Oe(U,"g",{id:!0,transform:!0});var H=T(l);h=Oe(H,"path",{d:!0,id:!0}),T(h).forEach(_),H.forEach(_),U.forEach(_),G.forEach(_),V.forEach(_),d=te(F),m=R(F,"DIV",{class:!0,style:!0});var j=T(m);v=R(j,"B",{});var Q=T(v);w=fe(Q,k),Q.forEach(_),E=te(j),I=R(j,"P",{});var W=T(I);M=fe(W,n[0]),W.forEach(_),j.forEach(_),C=te(F),ot(D.$$.fragment,F),F.forEach(_),this.h()},h(){g(h,"d","M95.4324393,3487.63833 C95.4094393,3487.61278 95.3924393,3487.58428 95.3674393,3487.55971 L95.3634393,3487.56265 C94.5824393,3486.79509 93.2434393,3486.86683 92.5364393,3487.56167 C91.8294393,3488.25651 91.8314393,3489.64423 92.5384393,3490.33907 C92.5474393,3490.34791 92.5584393,3490.35381 92.5674393,3490.36265 C92.5914393,3490.38722 92.6084393,3490.41671 92.6334393,3490.44128 L92.6364393,3490.43735 C93.4174393,3491.20491 94.7564393,3491.13415 95.4634393,3490.43833 C96.1704393,3489.74349 96.1684393,3488.35577 95.4614393,3487.66093 C95.4524393,3487.65209 95.4414393,3487.64717 95.4324393,3487.63833 M91.1194393,3486.17002 L89.7054393,3484.77936 C87.5844393,3486.86486 87.6834393,3491.13612 89.8044393,3493.22064 L91.2184393,3491.83096 C89.8044393,3490.44128 89.7054393,3487.55971 91.1194393,3486.17002 M88.2914393,3483.38968 L86.8774393,3482 C82.6344393,3486.17002 83.4404393,3492.5258 86.9764393,3496 L88.3904393,3494.61032 C85.5624393,3491.83096 85.4634393,3486.17002 88.2914393,3483.38968 M98.1954393,3484.77936 L96.7814393,3486.17002 C98.1954393,3487.55971 98.2944393,3490.44128 96.8804393,3491.83096 L98.2944393,3493.22064 C100.415439,3491.13612 100.316439,3486.86486 98.1954393,3484.77936 M101.122439,3496 L99.7084393,3494.61032 C102.537439,3491.83096 102.438439,3486.17002 99.6094393,3483.38968 L101.023439,3482 C104.559439,3485.47518 105.365439,3491.83096 101.122439,3496"),g(h,"id","radio_signal-[#1026]"),g(l,"id","icons"),g(l,"transform","translate(56.000000, 160.000000)"),g(a,"id","Dribbble-Light-Preview"),g(a,"transform","translate(-140.000000, -3642.000000)"),g(a,"fill","#000000"),g(o,"id","Page-1"),g(o,"stroke","none"),g(o,"stroke-width","1"),g(o,"fill","none"),g(o,"fill-rule","evenodd"),B(t,"width","40px"),B(t,"height","40px"),B(t,"padding","8px"),B(t,"opacity","0.4"),g(t,"xmlns","http://www.w3.org/2000/svg"),g(t,"xmlns:xlink","http://www.w3.org/1999/xlink"),g(t,"width","800px"),g(t,"height","800px"),g(t,"viewBox","0 -3 20 20"),g(t,"version","1.1"),g(m,"class","column grow"),B(m,"opacity","0.4"),g(e,"class","row g8 p816 hoverable rel")},m(P,F){Z(P,e,F),p(e,t),p(t,i),p(i,r),p(t,s),p(t,o),p(o,a),p(a,l),p(l,h),p(e,d),p(e,m),p(m,v),p(v,w),p(m,E),p(m,I),p(I,M),p(e,C),at(D,e,null),O=!0},p(P,F){(!O||F&8)&&k!==(k=P[3]("sensors.connectedSensors")+"")&&Ee(w,k),(!O||F&1)&&Ee(M,P[0])},i(P){O||(de(D.$$.fragment,P),O=!0)},o(P){Ie(D.$$.fragment,P),O=!1},d(P){P&&_(e),lt(D)}}}function u2(n){let e,t=[],i=new Map,r=Bt(Array.from(n[5].entries()).sort(_2));const s=o=>o[18];for(let o=0;o<r.length;o+=1){let a=a2(n,r,o),l=s(a);i.set(l,t[o]=m2(l,a))}return{c(){e=A("div");for(let o=0;o<t.length;o+=1)t[o].c();this.h()},l(o){e=R(o,"DIV",{class:!0});var a=T(e);for(let l=0;l<t.length;l+=1)t[l].l(a);a.forEach(_),this.h()},h(){g(e,"class","column")},m(o,a){Z(o,e,a);for(let l=0;l<t.length;l+=1)t[l]&&t[l].m(e,null)},p(o,a){a&4330&&(r=Bt(Array.from(o[5].entries()).sort(_2)),t=vr(t,a,s,1,o,r,i,e,Jc,m2,null,a2))},d(o){o&&_(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function c2(n){let e,t=n[21]+"",i,r,s=n[20].length+"",o;return{c(){e=A("p"),i=he(t),r=he(" / "),o=he(s),this.h()},l(a){e=R(a,"P",{style:!0});var l=T(e);i=fe(l,t),r=fe(l," / "),o=fe(l,s),l.forEach(_),this.h()},h(){B(e,"font-size","14px")},m(a,l){Z(a,e,l),p(e,i),p(e,r),p(e,o)},p(a,l){l&98&&t!==(t=a[21]+"")&&Ee(i,t),l&96&&s!==(s=a[20].length+"")&&Ee(o,s)},d(a){a&&_(e)}}}function h2(n){var I;let e,t,i,r,s=n[24].name+"",o,a,l,h=(I=n[7])==null?void 0:I.hasPermission(200),d,m,v,k=n[24].serialNr&&f2(n),w=h&&d2(n);function E(){return n[16](n[24])}return{c(){e=A("div"),t=A("div"),i=A("div"),r=A("p"),o=he(s),a=ee(),k&&k.c(),l=ee(),w&&w.c(),d=ee(),this.h()},l(M){e=R(M,"DIV",{class:!0,style:!0});var C=T(e);t=R(C,"DIV",{class:!0,style:!0});var D=T(t);i=R(D,"DIV",{class:!0});var O=T(i);r=R(O,"P",{class:!0});var P=T(r);o=fe(P,s),P.forEach(_),a=te(O),k&&k.l(O),O.forEach(_),l=te(D),w&&w.l(D),D.forEach(_),d=te(C),C.forEach(_),this.h()},h(){g(r,"class","truncate"),g(i,"class","column grow"),g(t,"class","line center-cross g8 grow"),B(t,"opacity",n[25]?1:.4),g(e,"class","row g8 p816 hoverable clickable sender"),B(e,"padding-left","32px"),B(e,"border-top","1px solid #ddd")},m(M,C){Z(M,e,C),p(e,t),p(t,i),p(i,r),p(r,o),p(i,a),k&&k.m(i,null),p(t,l),w&&w.m(t,null),p(e,d),m||(v=nt(e,"click",E),m=!0)},p(M,C){var D;n=M,C&96&&s!==(s=n[24].name+"")&&Ee(o,s),n[24].serialNr?k?k.p(n,C):(k=f2(n),k.c(),k.m(i,null)):k&&(k.d(1),k=null),C&128&&(h=(D=n[7])==null?void 0:D.hasPermission(200)),h?w?w.p(n,C):(w=d2(n),w.c(),w.m(t,null)):w&&(w.d(1),w=null),C&98&&B(t,"opacity",n[25]?1:.4)},d(M){M&&_(e),k&&k.d(),w&&w.d(),m=!1,v()}}}function f2(n){let e,t=n[24].serialNr+"",i;return{c(){e=A("p"),i=he(t),this.h()},l(r){e=R(r,"P",{style:!0});var s=T(e);i=fe(s,t),s.forEach(_),this.h()},h(){B(e,"font-size","12px")},m(r,s){Z(r,e,s),p(e,i)},p(r,s){s&96&&t!==(t=r[24].serialNr+"")&&Ee(i,t)},d(r){r&&_(e)}}}function d2(n){let e;function t(s,o){return s[25]?yS:vS}let i=t(n),r=i(n);return{c(){r.c(),e=dt()},l(s){r.l(s),e=dt()},m(s,o){r.m(s,o),Z(s,e,o)},p(s,o){i===(i=t(s))&&r?r.p(s,o):(r.d(1),r=i(s),r&&(r.c(),r.m(e.parentNode,e)))},d(s){s&&_(e),r.d(s)}}}function vS(n){let e,t=n[3]("sensors.offline")+"",i;return{c(){e=A("p"),i=he(t),this.h()},l(r){e=R(r,"P",{class:!0});var s=T(e);i=fe(s,t),s.forEach(_),this.h()},h(){g(e,"class","bubble offline svelte-1b297ro")},m(r,s){Z(r,e,s),p(e,i)},p(r,s){s&8&&t!==(t=r[3]("sensors.offline")+"")&&Ee(i,t)},d(r){r&&_(e)}}}function yS(n){var s;let e,t=(n[25].packets_per_period/(((s=n[1])==null?void 0:s.report_period)||1)).toFixed(1)+"",i,r;return{c(){e=A("p"),i=he(t),r=he(" / 1s"),this.h()},l(o){e=R(o,"P",{class:!0});var a=T(e);i=fe(a,t),r=fe(a," / 1s"),a.forEach(_),this.h()},h(){g(e,"class","bubble svelte-1b297ro")},m(o,a){Z(o,e,a),p(e,i),p(e,r)},p(o,a){var l;a&98&&t!==(t=(o[25].packets_per_period/(((l=o[1])==null?void 0:l.report_period)||1)).toFixed(1)+"")&&Ee(i,t)},d(o){o&&_(e)}}}function g2(n,e){let t,i,r=e[24].areaId===e[19].id&&h2(e);return{key:n,first:null,c(){t=dt(),r&&r.c(),i=dt(),this.h()},l(s){t=dt(),r&&r.l(s),i=dt(),this.h()},h(){this.first=t},m(s,o){Z(s,t,o),r&&r.m(s,o),Z(s,i,o)},p(s,o){e=s,e[24].areaId===e[19].id?r?r.p(e,o):(r=h2(e),r.c(),r.m(i.parentNode,i)):r&&(r.d(1),r=null)},d(s){s&&(_(t),_(i)),r&&r.d(s)}}}function m2(n,e){var M;let t,i,r,s,o=e[19].name+"",a,l,h=(M=e[7])==null?void 0:M.hasPermission(200),d,m=[],v=new Map,k,w=h&&c2(e),E=Bt(e[20]);const I=C=>C[24].id;for(let C=0;C<E.length;C+=1){let D=l2(e,E,C),O=I(D);v.set(O,m[C]=g2(O,D))}return{key:n,first:null,c(){t=A("div"),i=ee(),r=A("div"),s=A("b"),a=he(o),l=ee(),w&&w.c(),d=ee();for(let C=0;C<m.length;C+=1)m[C].c();k=dt(),this.h()},l(C){t=R(C,"DIV",{class:!0}),T(t).forEach(_),i=te(C),r=R(C,"DIV",{class:!0});var D=T(r);s=R(D,"B",{class:!0});var O=T(s);a=fe(O,o),O.forEach(_),l=te(D),w&&w.l(D),D.forEach(_),d=te(C);for(let P=0;P<m.length;P+=1)m[P].l(C);k=dt(),this.h()},h(){g(t,"class","sep"),g(s,"class","grow"),g(r,"class","row center-cross g8 p816 hoverable sender"),this.first=t},m(C,D){Z(C,t,D),Z(C,i,D),Z(C,r,D),p(r,s),p(s,a),p(r,l),w&&w.m(r,null),Z(C,d,D);for(let O=0;O<m.length;O+=1)m[O]&&m[O].m(C,D);Z(C,k,D)},p(C,D){var O;e=C,D&32&&o!==(o=e[19].name+"")&&Ee(a,o),D&128&&(h=(O=e[7])==null?void 0:O.hasPermission(200)),h?w?w.p(e,D):(w=c2(e),w.c(),w.m(r,null)):w&&(w.d(1),w=null),D&4330&&(E=Bt(e[20]),m=vr(m,D,I,1,e,E,v,k.parentNode,Jc,g2,k,l2))},d(C){C&&(_(t),_(i),_(r),_(d),_(k)),w&&w.d();for(let D=0;D<m.length;D+=1)m[D].d(C)}}}function bS(n){let e,t,i,r,s=n[3]("sensors.title")+"",o,a,l,h=n[3]("sensors.overviewAndSensorStatus")+"",d,m,v,k='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M19 5L5 19M5.00001 5L19 19" stroke="#fff" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>',w,E,I,M,C,D,O,P={ctx:n,current:null,token:null,hasCatch:!0,pending:pS,then:_S,catch:mS,blocks:[,,,]};xs(I=n[4],P);let F=n[5]&&n[6]&&u2(n);return{c(){e=A("div"),t=A("div"),i=A("div"),r=A("p"),o=he(s),a=ee(),l=A("p"),d=he(h),m=ee(),v=A("button"),v.innerHTML=k,w=ee(),E=A("div"),P.block.c(),M=ee(),F&&F.c(),this.h()},l(V){e=R(V,"DIV",{class:!0});var $=T(e);t=R($,"DIV",{class:!0,style:!0});var G=T(t);i=R(G,"DIV",{class:!0});var U=T(i);r=R(U,"P",{class:!0,style:!0});var H=T(r);o=fe(H,s),H.forEach(_),a=te(U),l=R(U,"P",{style:!0});var j=T(l);d=fe(j,h),j.forEach(_),U.forEach(_),m=te(G),v=R(G,"BUTTON",{class:!0,style:!0,"data-svelte-h":!0}),rn(v)!=="svelte-1gt8p21"&&(v.innerHTML=k),G.forEach(_),w=te($),E=R($,"DIV",{class:!0});var Q=T(E);P.block.l(Q),M=te(Q),F&&F.l(Q),Q.forEach(_),$.forEach(_),this.h()},h(){g(r,"class","grow"),B(r,"font-size","18px"),B(l,"font-size","12px"),g(i,"class","column grow"),g(v,"class","close svelte-1b297ro"),B(v,"background","none"),B(v,"padding","0"),B(v,"border","none"),B(v,"outline","none"),B(v,"margin","0"),B(v,"height","24px"),g(t,"class","row center-cross info-row svelte-1b297ro"),B(t,"background-color","#445"),g(E,"class","panel-scrollable"),g(e,"class","panel column")},m(V,$){Z(V,e,$),p(e,t),p(t,i),p(i,r),p(r,o),p(i,a),p(i,l),p(l,d),p(t,m),p(t,v),p(e,w),p(e,E),P.block.m(E,P.anchor=null),P.mount=()=>E,P.anchor=M,p(E,M),F&&F.m(E,null),C=!0,D||(O=nt(v,"click",n[13]),D=!0)},p(V,[$]){n=V,(!C||$&8)&&s!==(s=n[3]("sensors.title")+"")&&Ee(o,s),(!C||$&8)&&h!==(h=n[3]("sensors.overviewAndSensorStatus")+"")&&Ee(d,h),P.ctx=n,$&16&&I!==(I=n[4])&&xs(I,P)||Qc(P,n,$),n[5]&&n[6]?F?F.p(n,$):(F=u2(n),F.c(),F.m(E,null)):F&&(F.d(1),F=null)},i(V){C||(de(P.block),C=!0)},o(V){for(let $=0;$<3;$+=1){const G=P.blocks[$];Ie(G)}C=!1},d(V){V&&_(e),P.block.d(),P.token=null,P=null,F&&F.d(),D=!1,O()}}}const _2=(n,e)=>e[0]-n[0];function wS(n,e,t){let i,r,s,o,a,l=$e,h=()=>(l(),l=Dt(i,V=>t(4,a=V)),i),d,m,v;He(n,Nn,V=>t(3,o=V)),He(n,Li,V=>t(7,v=V)),n.$$.on_destroy.push(()=>l());let{healthReportFetcher:k}=e,{sensorsAreas:w}=e;const E=k.latestHealthReport;He(n,E,V=>t(1,s=V));const I=w.sensors;He(n,I,V=>t(6,m=V));const M=w.areas;He(n,M,V=>t(5,d=V));let C=Pn(0);He(n,C,V=>t(0,r=V));function D(V){nn.goto({type:"SensorView",sensorId:V})}function O(){nn.goto(null)}const P=V=>D(V.id),F=(V,$)=>$.areaId===V.id;return n.$$set=V=>{"healthReportFetcher"in V&&t(14,k=V.healthReportFetcher),"sensorsAreas"in V&&t(15,w=V.sensorsAreas)},n.$$.update=()=>{if(n.$$.dirty&3&&s&&(s==null?void 0:s.sender_reports)!==void 0){const V=Object.keys(s==null?void 0:s.sender_reports).length;r!==V&&kn(C,r=V,r)}},h(t(2,i=E.loadingPromiseStore)),[r,s,i,o,a,d,m,v,E,I,M,C,D,O,k,w,P,F]}class kS extends Wt{constructor(e){super(),Xt(this,e,wS,bS,zt,{healthReportFetcher:14,sensorsAreas:15})}}function ES(n){return{c:$e,l:$e,m:$e,p:$e,i:$e,o:$e,d:$e}}function SS(n){var Ut,Qe,yt,mt,Ft,qt,vt,$t,dn,sn,pn,Ye,Vt,Mt,Rt,gt,it,St,Jt,ut,jt,gn;let e,t,i,r,s,o,a,l,h,d,m=(((Ut=n[1])==null?void 0:Ut.name)||"-")+"",v,k,w,E=(Qe=n[13])==null?void 0:Qe.hasPermission(200),I,M,C,D=n[14]("sensorView.serialNumber")+"",O,P,F,V=(((yt=n[1])==null?void 0:yt.serialNr)||"-")+"",$,G,U,H,j,Q,W,Y,q,ne,J,ge,ie,le,pe,ye,be,re,me,ke,X,ue,_e=n[14]("sensorView.group")+"",oe,ae,Se,Me=(((mt=n[1])==null?void 0:mt.areaId)&&((vt=(qt=n[15])==null?void 0:qt.get((Ft=n[1])==null?void 0:Ft.areaId))==null?void 0:vt.name)||"-")+"",we,Te,Ae,Ne,De=((dn=($t=n[1])==null?void 0:$t.location)==null?void 0:dn.lat)&&((pn=(sn=n[1])==null?void 0:sn.location)==null?void 0:pn.lng)||((Ye=n[13])==null?void 0:Ye.hasPermission(201)),_t,Fe,Pe=(Vt=n[13])==null?void 0:Vt.hasPermission(201),je,Ve=((Rt=(Mt=n[1])==null?void 0:Mt.location)==null?void 0:Rt.lat)&&((it=(gt=n[1])==null?void 0:gt.location)==null?void 0:it.lng)&&((St=n[13])==null?void 0:St.hasPermission(201)),Ue,Ke,We=E&&p2(n);Ae=new c0({props:{coordinateStore:n[3]}});let ze=De&&v2(),Et=((ut=(Jt=n[1])==null?void 0:Jt.location)==null?void 0:ut.lat)&&((gn=(jt=n[1])==null?void 0:jt.location)==null?void 0:gn.lng)&&y2(n),rt=Pe&&b2(n),ft=Ve&&k2(n);return{c(){e=A("div"),t=A("img"),r=ee(),s=A("div"),o=ee(),a=A("div"),l=A("div"),h=A("div"),d=A("p"),v=he(m),k=ee(),w=A("div"),We&&We.c(),I=ee(),M=A("div"),C=A("b"),O=he(D),P=ee(),F=A("p"),$=he(V),G=ee(),U=A("div"),H=Re("svg"),j=Re("g"),Q=Re("g"),W=Re("g"),Y=Re("path"),q=Re("path"),ne=Re("path"),J=Re("path"),ge=Re("path"),ie=Re("path"),le=Re("path"),pe=Re("path"),ye=Re("path"),be=Re("path"),re=Re("path"),me=Re("path"),ke=ee(),X=A("div"),ue=A("b"),oe=he(_e),ae=ee(),Se=A("p"),we=he(Me),Te=ee(),st(Ae.$$.fragment),Ne=ee(),ze&&ze.c(),_t=ee(),Et&&Et.c(),Fe=ee(),rt&&rt.c(),je=ee(),ft&&ft.c(),Ue=dt(),this.h()},l(Be){e=R(Be,"DIV",{class:!0,id:!0});var tt=T(e);t=R(tt,"IMG",{style:!0,class:!0,src:!0,alt:!0}),r=te(tt),s=R(tt,"DIV",{style:!0,class:!0}),T(s).forEach(_),o=te(tt),a=R(tt,"DIV",{style:!0,class:!0});var en=T(a);l=R(en,"DIV",{class:!0,style:!0});var Fn=T(l);h=R(Fn,"DIV",{class:!0});var Vn=T(h);d=R(Vn,"P",{style:!0,class:!0});var Zt=T(d);v=fe(Zt,m),Zt.forEach(_),Vn.forEach(_),Fn.forEach(_),k=te(en),w=R(en,"DIV",{class:!0});var cn=T(w);We&&We.l(cn),cn.forEach(_),en.forEach(_),tt.forEach(_),I=te(Be),M=R(Be,"DIV",{class:!0,style:!0});var Un=T(M);C=R(Un,"B",{style:!0});var mn=T(C);O=fe(mn,D),mn.forEach(_),P=te(Un),F=R(Un,"P",{style:!0});var tn=T(F);$=fe(tn,V),tn.forEach(_),Un.forEach(_),G=te(Be),U=R(Be,"DIV",{class:!0});var En=T(U);H=Oe(En,"svg",{style:!0,viewBox:!0,fill:!0,xmlns:!0});var Ln=T(H);j=Oe(Ln,"g",{id:!0,"stroke-width":!0}),T(j).forEach(_),Q=Oe(Ln,"g",{id:!0,"stroke-linecap":!0,"stroke-linejoin":!0}),T(Q).forEach(_),W=Oe(Ln,"g",{id:!0});var xt=T(W);Y=Oe(xt,"path",{d:!0,fill:!0}),T(Y).forEach(_),q=Oe(xt,"path",{d:!0,fill:!0}),T(q).forEach(_),ne=Oe(xt,"path",{d:!0,fill:!0}),T(ne).forEach(_),J=Oe(xt,"path",{d:!0,fill:!0}),T(J).forEach(_),ge=Oe(xt,"path",{d:!0,fill:!0}),T(ge).forEach(_),ie=Oe(xt,"path",{d:!0,fill:!0}),T(ie).forEach(_),le=Oe(xt,"path",{d:!0,fill:!0}),T(le).forEach(_),pe=Oe(xt,"path",{d:!0,fill:!0}),T(pe).forEach(_),ye=Oe(xt,"path",{d:!0,fill:!0}),T(ye).forEach(_),be=Oe(xt,"path",{d:!0,fill:!0}),T(be).forEach(_),re=Oe(xt,"path",{d:!0,fill:!0}),T(re).forEach(_),me=Oe(xt,"path",{d:!0,fill:!0}),T(me).forEach(_),xt.forEach(_),Ln.forEach(_),ke=te(En),X=R(En,"DIV",{class:!0});var qe=T(X);ue=R(qe,"B",{});var kt=T(ue);oe=fe(kt,_e),kt.forEach(_),ae=te(qe),Se=R(qe,"P",{});var Gt=T(Se);we=fe(Gt,Me),Gt.forEach(_),qe.forEach(_),En.forEach(_),Te=te(Be),ot(Ae.$$.fragment,Be),Ne=te(Be),ze&&ze.l(Be),_t=te(Be),Et&&Et.l(Be),Fe=te(Be),rt&&rt.l(Be),je=te(Be),ft&&ft.l(Be),Ue=dt(),this.h()},h(){B(t,"opacity",n[4]?"0":"1"),g(t,"class","product-image svelte-1eyv9b6"),zi(t.src,i="/drid20.png")||g(t,"src",i),g(t,"alt","DRID 2.0 HexTech Sensor"),B(s,"z-index","10"),g(s,"class","gradient svelte-1eyv9b6"),B(d,"font-size","24px"),B(d,"max-width","25ch"),g(d,"class","truncate"),g(h,"class","column g8"),g(l,"class","row center-cross g8 p816"),B(l,"width","100%"),g(w,"class","p16 width100 column center-cross"),B(a,"z-index","10"),g(a,"class","overlay svelte-1eyv9b6"),g(e,"class","header svelte-1eyv9b6"),g(e,"id","sensor-view-map-parent"),B(C,"font-size","12px"),B(C,"text-transform","uppercase"),B(F,"font-size","18px"),g(M,"class","column info-row svelte-1eyv9b6"),B(M,"background-color","#445"),B(M,"position","sticky"),B(M,"top","0px"),g(j,"id","SVGRepo_bgCarrier"),g(j,"stroke-width","0"),g(Q,"id","SVGRepo_tracerCarrier"),g(Q,"stroke-linecap","round"),g(Q,"stroke-linejoin","round"),g(Y,"d","M3 1H1V3H3V1Z"),g(Y,"fill","#000000"),g(q,"d","M3 13H1V15H3V13Z"),g(q,"fill","#000000"),g(ne,"d","M1 9H3V11H1V9Z"),g(ne,"fill","#000000"),g(J,"d","M3 5H1V7H3V5Z"),g(J,"fill","#000000"),g(ge,"d","M5 1H7V3H5V1Z"),g(ge,"fill","#000000"),g(ie,"d","M7 13H5V15H7V13Z"),g(ie,"fill","#000000"),g(le,"d","M9 1H11V3H9V1Z"),g(le,"fill","#000000"),g(pe,"d","M11 13H9V15H11V13Z"),g(pe,"fill","#000000"),g(ye,"d","M13 1H15V3H13V1Z"),g(ye,"fill","#000000"),g(be,"d","M15 13H13V15H15V13Z"),g(be,"fill","#000000"),g(re,"d","M13 9H15V11H13V9Z"),g(re,"fill","#000000"),g(me,"d","M15 5H13V7H15V5Z"),g(me,"fill","#000000"),g(W,"id","SVGRepo_iconCarrier"),B(H,"width","40px"),B(H,"height","40px"),B(H,"padding","9px"),g(H,"viewBox","0 0 16 16"),g(H,"fill","none"),g(H,"xmlns","http://www.w3.org/2000/svg"),g(X,"class","column"),g(U,"class","row g8 p816 hoverable")},m(Be,tt){Z(Be,e,tt),p(e,t),p(e,r),p(e,s),p(e,o),p(e,a),p(a,l),p(l,h),p(h,d),p(d,v),p(a,k),p(a,w),We&&We.m(w,null),n[33](e),Z(Be,I,tt),Z(Be,M,tt),p(M,C),p(C,O),p(M,P),p(M,F),p(F,$),Z(Be,G,tt),Z(Be,U,tt),p(U,H),p(H,j),p(H,Q),p(H,W),p(W,Y),p(W,q),p(W,ne),p(W,J),p(W,ge),p(W,ie),p(W,le),p(W,pe),p(W,ye),p(W,be),p(W,re),p(W,me),p(U,ke),p(U,X),p(X,ue),p(ue,oe),p(X,ae),p(X,Se),p(Se,we),Z(Be,Te,tt),at(Ae,Be,tt),Z(Be,Ne,tt),ze&&ze.m(Be,tt),Z(Be,_t,tt),Et&&Et.m(Be,tt),Z(Be,Fe,tt),rt&&rt.m(Be,tt),Z(Be,je,tt),ft&&ft.m(Be,tt),Z(Be,Ue,tt),Ke=!0},p(Be,tt){var Fn,Vn,Zt,cn,Un,mn,tn,En,Ln,xt,qe,kt,Gt,Je,It,wn,Cn,oi,ri,ci,vn,zn;(!Ke||tt[0]&16)&&B(t,"opacity",Be[4]?"0":"1"),(!Ke||tt[0]&2)&&m!==(m=(((Fn=Be[1])==null?void 0:Fn.name)||"-")+"")&&Ee(v,m),tt[0]&8192&&(E=(Vn=Be[13])==null?void 0:Vn.hasPermission(200)),E?We?We.p(Be,tt):(We=p2(Be),We.c(),We.m(w,null)):We&&(We.d(1),We=null),(!Ke||tt[0]&16384)&&D!==(D=Be[14]("sensorView.serialNumber")+"")&&Ee(O,D),(!Ke||tt[0]&2)&&V!==(V=(((Zt=Be[1])==null?void 0:Zt.serialNr)||"-")+"")&&Ee($,V),(!Ke||tt[0]&16384)&&_e!==(_e=Be[14]("sensorView.group")+"")&&Ee(oe,_e),(!Ke||tt[0]&32770)&&Me!==(Me=(((cn=Be[1])==null?void 0:cn.areaId)&&((tn=(mn=Be[15])==null?void 0:mn.get((Un=Be[1])==null?void 0:Un.areaId))==null?void 0:tn.name)||"-")+"")&&Ee(we,Me);const en={};tt[0]&8&&(en.coordinateStore=Be[3]),Ae.$set(en),tt[0]&8194&&(De=((Ln=(En=Be[1])==null?void 0:En.location)==null?void 0:Ln.lat)&&((qe=(xt=Be[1])==null?void 0:xt.location)==null?void 0:qe.lng)||((kt=Be[13])==null?void 0:kt.hasPermission(201))),De?ze||(ze=v2(),ze.c(),ze.m(_t.parentNode,_t)):ze&&(ze.d(1),ze=null),(Je=(Gt=Be[1])==null?void 0:Gt.location)!=null&&Je.lat&&((wn=(It=Be[1])==null?void 0:It.location)!=null&&wn.lng)?Et?(Et.p(Be,tt),tt[0]&2&&de(Et,1)):(Et=y2(Be),Et.c(),de(Et,1),Et.m(Fe.parentNode,Fe)):Et&&(bt(),Ie(Et,1,1,()=>{Et=null}),wt()),tt[0]&8192&&(Pe=(Cn=Be[13])==null?void 0:Cn.hasPermission(201)),Pe?rt?(rt.p(Be,tt),tt[0]&8192&&de(rt,1)):(rt=b2(Be),rt.c(),de(rt,1),rt.m(je.parentNode,je)):rt&&(bt(),Ie(rt,1,1,()=>{rt=null}),wt()),tt[0]&8194&&(Ve=((ri=(oi=Be[1])==null?void 0:oi.location)==null?void 0:ri.lat)&&((vn=(ci=Be[1])==null?void 0:ci.location)==null?void 0:vn.lng)&&((zn=Be[13])==null?void 0:zn.hasPermission(201))),Ve?ft?(ft.p(Be,tt),tt[0]&8194&&de(ft,1)):(ft=k2(Be),ft.c(),de(ft,1),ft.m(Ue.parentNode,Ue)):ft&&(bt(),Ie(ft,1,1,()=>{ft=null}),wt())},i(Be){Ke||(de(Ae.$$.fragment,Be),de(Et),de(rt),de(ft),Ke=!0)},o(Be){Ie(Ae.$$.fragment,Be),Ie(Et),Ie(rt),Ie(ft),Ke=!1},d(Be){Be&&(_(e),_(I),_(M),_(G),_(U),_(Te),_(Ne),_(_t),_(Fe),_(je),_(Ue)),We&&We.d(),n[33](null),lt(Ae,Be),ze&&ze.d(Be),Et&&Et.d(Be),rt&&rt.d(Be),ft&&ft.d(Be)}}}function p2(n){let e;function t(s,o){return s[8]?MS:IS}let i=t(n),r=i(n);return{c(){r.c(),e=dt()},l(s){r.l(s),e=dt()},m(s,o){r.m(s,o),Z(s,e,o)},p(s,o){i===(i=t(s))&&r?r.p(s,o):(r.d(1),r=i(s),r&&(r.c(),r.m(e.parentNode,e)))},d(s){s&&_(e),r.d(s)}}}function IS(n){let e,t=n[14]("sensors.offline")+"",i;return{c(){e=A("p"),i=he(t),this.h()},l(r){e=R(r,"P",{class:!0});var s=T(e);i=fe(s,t),s.forEach(_),this.h()},h(){g(e,"class","connection-status offline svelte-1eyv9b6")},m(r,s){Z(r,e,s),p(e,i)},p(r,s){s[0]&16384&&t!==(t=r[14]("sensors.offline")+"")&&Ee(i,t)},d(r){r&&_(e)}}}function MS(n){var s;let e,t=(n[8].packets_per_period/(((s=n[7])==null?void 0:s.report_period)||1)).toFixed(1)+"",i,r;return{c(){e=A("p"),i=he(t),r=he(" / 1s"),this.h()},l(o){e=R(o,"P",{class:!0});var a=T(e);i=fe(a,t),r=fe(a," / 1s"),a.forEach(_),this.h()},h(){g(e,"class","connection-status svelte-1eyv9b6")},m(o,a){Z(o,e,a),p(e,i),p(e,r)},p(o,a){var l;a[0]&384&&t!==(t=(o[8].packets_per_period/(((l=o[7])==null?void 0:l.report_period)||1)).toFixed(1)+"")&&Ee(i,t)},d(o){o&&_(e)}}}function v2(n){let e;return{c(){e=A("div"),this.h()},l(t){e=R(t,"DIV",{class:!0}),T(e).forEach(_),this.h()},h(){g(e,"class","sep")},m(t,i){Z(t,e,i)},d(t){t&&_(e)}}}function y2(n){let e,t;return e=new fn({props:{class:"hoverable noselect action",onclick:n[34],$$slots:{default:[TS]},$$scope:{ctx:n}}}),{c(){st(e.$$.fragment)},l(i){ot(e.$$.fragment,i)},m(i,r){at(e,i,r),t=!0},p(i,r){const s={};r[0]&16384|r[1]&64&&(s.$$scope={dirty:r,ctx:i}),e.$set(s)},i(i){t||(de(e.$$.fragment,i),t=!0)},o(i){Ie(e.$$.fragment,i),t=!1},d(i){lt(e,i)}}}function TS(n){let e,t,i,r,s=n[14]("sensorView.showOnMap")+"",o;return{c(){e=Re("svg"),t=Re("path"),i=ee(),r=A("b"),o=he(s),this.h()},l(a){e=Oe(a,"svg",{xmlns:!0,x:!0,y:!0,width:!0,height:!0,viewBox:!0});var l=T(e);t=Oe(l,"path",{d:!0}),T(t).forEach(_),l.forEach(_),i=te(a),r=R(a,"B",{});var h=T(r);o=fe(h,s),h.forEach(_),this.h()},h(){g(t,"d","M 28 4.46875 L 26.59375 5.09375 L 19.96875 7.9375 L 12.34375 5.0625 L 11.96875 4.9375 L 11.59375 5.09375 L 4.59375 8.09375 L 4 8.34375 L 4 27.53125 L 5.40625 26.90625 L 12.03125 24.0625 L 19.65625 26.9375 L 20.03125 27.0625 L 20.40625 26.90625 L 27.40625 23.90625 L 28 23.65625 Z M 13 7.4375 L 19 9.6875 L 19 24.5625 L 13 22.3125 Z M 11 7.5 L 11 22.34375 L 6 24.5 L 6 9.65625 Z M 26 7.5 L 26 22.34375 L 21 24.5 L 21 9.65625 Z"),g(e,"xmlns","http://www.w3.org/2000/svg"),g(e,"x","0px"),g(e,"y","0px"),g(e,"width","100"),g(e,"height","100"),g(e,"viewBox","0 0 32 32")},m(a,l){Z(a,e,l),p(e,t),Z(a,i,l),Z(a,r,l),p(r,o)},p(a,l){l[0]&16384&&s!==(s=a[14]("sensorView.showOnMap")+"")&&Ee(o,s)},d(a){a&&(_(e),_(i),_(r))}}}function b2(n){var i,r;let e,t;return e=new fn({props:{class:"noselect action "+(((i=n[6])==null?void 0:i.type)===Tt.SensorRelocating&&n[6].sensorId===((r=n[1])==null?void 0:r.id)?"":"hoverable"),onclick:n[36],$$slots:{default:[DS]},$$scope:{ctx:n}}}),{c(){st(e.$$.fragment)},l(s){ot(e.$$.fragment,s)},m(s,o){at(e,s,o),t=!0},p(s,o){var l,h;const a={};o[0]&66&&(a.class="noselect action "+(((l=s[6])==null?void 0:l.type)===Tt.SensorRelocating&&s[6].sensorId===((h=s[1])==null?void 0:h.id)?"":"hoverable")),o[0]&66&&(a.onclick=s[36]),o[0]&16482|o[1]&64&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){t||(de(e.$$.fragment,s),t=!0)},o(s){Ie(e.$$.fragment,s),t=!1},d(s){lt(e,s)}}}function LS(n){let e,t,i,r,s=n[14]("sensorView.markLocation")+"",o;return{c(){e=Re("svg"),t=Re("path"),i=ee(),r=A("b"),o=he(s),this.h()},l(a){e=Oe(a,"svg",{xmlns:!0,fill:!0,width:!0,height:!0,viewBox:!0,version:!0});var l=T(e);t=Oe(l,"path",{d:!0}),T(t).forEach(_),l.forEach(_),i=te(a),r=R(a,"B",{});var h=T(r);o=fe(h,s),h.forEach(_),this.h()},h(){g(t,"d","M16.114-0.011c-6.559 0-12.114 5.587-12.114 12.204 0 6.93 6.439 14.017 10.77 18.998 0.017 0.020 0.717 0.797 1.579 0.797h0.076c0.863 0 1.558-0.777 1.575-0.797 4.064-4.672 10-12.377 10-18.998 0-6.618-4.333-12.204-11.886-12.204zM16.515 29.849c-0.035 0.035-0.086 0.074-0.131 0.107-0.046-0.032-0.096-0.072-0.133-0.107l-0.523-0.602c-4.106-4.71-9.729-11.161-9.729-17.055 0-5.532 4.632-10.205 10.114-10.205 6.829 0 9.886 5.125 9.886 10.205 0 4.474-3.192 10.416-9.485 17.657zM16.035 6.044c-3.313 0-6 2.686-6 6s2.687 6 6 6 6-2.687 6-6-2.686-6-6-6zM16.035 16.044c-2.206 0-4.046-1.838-4.046-4.044s1.794-4 4-4c2.207 0 4 1.794 4 4 0.001 2.206-1.747 4.044-3.954 4.044z"),g(e,"xmlns","http://www.w3.org/2000/svg"),g(e,"fill","#000000"),g(e,"width","800px"),g(e,"height","800px"),g(e,"viewBox","0 0 32 32"),g(e,"version","1.1")},m(a,l){Z(a,e,l),p(e,t),Z(a,i,l),Z(a,r,l),p(r,o)},p(a,l){l[0]&16384&&s!==(s=a[14]("sensorView.markLocation")+"")&&Ee(o,s)},d(a){a&&(_(e),_(i),_(r))}}}function CS(n){let e,t,i,r,s=n[14]("sensorView.changeLocation")+"",o;return{c(){e=Re("svg"),t=Re("path"),i=ee(),r=A("b"),o=he(s),this.h()},l(a){e=Oe(a,"svg",{xmlns:!0,x:!0,y:!0,width:!0,height:!0,viewBox:!0});var l=T(e);t=Oe(l,"path",{d:!0}),T(t).forEach(_),l.forEach(_),i=te(a),r=R(a,"B",{});var h=T(r);o=fe(h,s),h.forEach(_),this.h()},h(){g(t,"d","M 14.984375 2.9863281 A 1.0001 1.0001 0 0 0 14.207031 3.3769531 A 1.0001 1.0001 0 0 0 14.203125 3.3828125 L 11.292969 6.2929688 A 1.0001 1.0001 0 1 0 12.707031 7.7070312 L 14 6.4140625 L 14 11 A 1.0001 1.0001 0 1 0 16 11 L 16 6.4140625 L 17.292969 7.7070312 A 1.0001 1.0001 0 1 0 18.707031 6.2929688 L 15.791016 3.3769531 A 1.0001 1.0001 0 0 0 14.984375 2.9863281 z M 6.9804688 10.990234 A 1.0001 1.0001 0 0 0 6.2929688 11.292969 L 3.3808594 14.205078 A 1.0001 1.0001 0 0 0 3.3769531 15.792969 A 1.0001 1.0001 0 0 0 3.3828125 15.796875 L 6.2929688 18.707031 A 1.0001 1.0001 0 1 0 7.7070312 17.292969 L 6.4140625 16 L 11 16 A 1.0001 1.0001 0 1 0 11 14 L 6.4140625 14 L 7.7070312 12.707031 A 1.0001 1.0001 0 0 0 6.9804688 10.990234 z M 22.990234 10.990234 A 1.0001 1.0001 0 0 0 22.292969 12.707031 L 23.585938 14 L 19 14 A 1.0001 1.0001 0 1 0 19 16 L 23.585938 16 L 22.292969 17.292969 A 1.0001 1.0001 0 1 0 23.707031 18.707031 L 26.619141 15.794922 A 1.0001 1.0001 0 0 0 26.623047 14.207031 A 1.0001 1.0001 0 0 0 26.617188 14.203125 L 23.707031 11.292969 A 1.0001 1.0001 0 0 0 22.990234 10.990234 z M 14.984375 17.986328 A 1.0001 1.0001 0 0 0 14 19 L 14 23.585938 L 12.707031 22.292969 A 1.0001 1.0001 0 0 0 11.990234 21.990234 A 1.0001 1.0001 0 0 0 11.292969 23.707031 L 14.205078 26.619141 A 1.0001 1.0001 0 0 0 15.796875 26.617188 L 18.707031 23.707031 A 1.0001 1.0001 0 0 0 17.990234 21.986328 A 1.0001 1.0001 0 0 0 17.292969 22.292969 L 16 23.585938 L 16 19 A 1.0001 1.0001 0 0 0 14.984375 17.986328 z"),g(e,"xmlns","http://www.w3.org/2000/svg"),g(e,"x","0px"),g(e,"y","0px"),g(e,"width","100"),g(e,"height","100"),g(e,"viewBox","0 0 30 30")},m(a,l){Z(a,e,l),p(e,t),Z(a,i,l),Z(a,r,l),p(r,o)},p(a,l){l[0]&16384&&s!==(s=a[14]("sensorView.changeLocation")+"")&&Ee(o,s)},d(a){a&&(_(e),_(i),_(r))}}}function w2(n){let e,t,i,r,s;return t=new fn({props:{onclick:n[24],$$slots:{default:[PS]},$$scope:{ctx:n}}}),r=new fn({props:{onclick:n[35],$$slots:{default:[NS]},$$scope:{ctx:n}}}),{c(){e=A("div"),st(t.$$.fragment),i=ee(),st(r.$$.fragment),this.h()},l(o){e=R(o,"DIV",{class:!0});var a=T(e);ot(t.$$.fragment,a),i=te(a),ot(r.$$.fragment,a),a.forEach(_),this.h()},h(){g(e,"class","row center-cross g8")},m(o,a){Z(o,e,a),at(t,e,null),p(e,i),at(r,e,null),s=!0},p(o,a){const l={};a[1]&64&&(l.$$scope={dirty:a,ctx:o}),t.$set(l);const h={};a[0]&32&&(h.onclick=o[35]),a[1]&64&&(h.$$scope={dirty:a,ctx:o}),r.$set(h)},i(o){s||(de(t.$$.fragment,o),de(r.$$.fragment,o),s=!0)},o(o){Ie(t.$$.fragment,o),Ie(r.$$.fragment,o),s=!1},d(o){o&&_(e),lt(t),lt(r)}}}function PS(n){let e,t='<svg style="padding: 1px; opacity: 0.8;" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="100" height="100" viewBox="0 0 24 24" class="svelte-1eyv9b6"><path d="M 5.7070312 4.2929688 L 4.2929688 5.7070312 L 10.585938 12 L 4.2929688 18.292969 L 5.7070312 19.707031 L 12 13.414062 L 18.292969 19.707031 L 19.707031 18.292969 L 13.414062 12 L 19.707031 5.7070312 L 18.292969 4.2929688 L 12 10.585938 L 5.7070312 4.2929688 z"></path></svg>';return{c(){e=A("div"),e.innerHTML=t,this.h()},l(i){e=R(i,"DIV",{class:!0,style:!0,"data-svelte-h":!0}),rn(e)!=="svelte-6qsxge"&&(e.innerHTML=t),this.h()},h(){g(e,"class","small-button clickable svelte-1eyv9b6"),B(e,"border","1px solid #2224")},m(i,r){Z(i,e,r)},p:$e,d(i){i&&_(e)}}}function NS(n){let e,t='<svg style="opacity: 0.9;" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="100" height="100" viewBox="0 0 24 24" class="svelte-1eyv9b6"><path d="M 19.28125 5.28125 L 9 15.5625 L 4.71875 11.28125 L 3.28125 12.71875 L 8.28125 17.71875 L 9 18.40625 L 9.71875 17.71875 L 20.71875 6.71875 Z"></path></svg>';return{c(){e=A("div"),e.innerHTML=t,this.h()},l(i){e=R(i,"DIV",{class:!0,style:!0,"data-svelte-h":!0}),rn(e)!=="svelte-1rh9ev7"&&(e.innerHTML=t),this.h()},h(){g(e,"class","small-button clickable svelte-1eyv9b6"),B(e,"background-color","#aea"),B(e,"border","1px solid #8c8f")},m(i,r){Z(i,e,r)},p:$e,d(i){i&&_(e)}}}function DS(n){var d,m;let e,t,i,r,s;function o(v,k){var w,E,I,M,C,D,O,P;if((E=(w=v[1])==null?void 0:w.location)!=null&&E.lat&&((M=(I=v[1])==null?void 0:I.location)!=null&&M.lng))return CS;if(!((D=(C=v[1])==null?void 0:C.location)!=null&&D.lat)&&!((P=(O=v[1])==null?void 0:O.location)!=null&&P.lng))return LS}let a=o(n),l=a&&a(n),h=((d=n[6])==null?void 0:d.type)===Tt.SensorRelocating&&n[6].sensorId===((m=n[1])==null?void 0:m.id)&&w2(n);return{c(){l&&l.c(),e=ee(),t=A("div"),i=ee(),h&&h.c(),r=dt(),this.h()},l(v){l&&l.l(v),e=te(v),t=R(v,"DIV",{class:!0}),T(t).forEach(_),i=te(v),h&&h.l(v),r=dt(),this.h()},h(){g(t,"class","grow")},m(v,k){l&&l.m(v,k),Z(v,e,k),Z(v,t,k),Z(v,i,k),h&&h.m(v,k),Z(v,r,k),s=!0},p(v,k){var w,E;a===(a=o(v))&&l?l.p(v,k):(l&&l.d(1),l=a&&a(v),l&&(l.c(),l.m(e.parentNode,e))),((w=v[6])==null?void 0:w.type)===Tt.SensorRelocating&&v[6].sensorId===((E=v[1])==null?void 0:E.id)?h?(h.p(v,k),k[0]&66&&de(h,1)):(h=w2(v),h.c(),de(h,1),h.m(r.parentNode,r)):h&&(bt(),Ie(h,1,1,()=>{h=null}),wt())},i(v){s||(de(h),s=!0)},o(v){Ie(h),s=!1},d(v){v&&(_(e),_(t),_(i),_(r)),l&&l.d(v),h&&h.d(v)}}}function k2(n){let e,t;return e=new fn({props:{class:"hoverable noselect action",onclick:n[25],$$slots:{default:[AS]},$$scope:{ctx:n}}}),{c(){st(e.$$.fragment)},l(i){ot(e.$$.fragment,i)},m(i,r){at(e,i,r),t=!0},p(i,r){const s={};r[0]&16384|r[1]&64&&(s.$$scope={dirty:r,ctx:i}),e.$set(s)},i(i){t||(de(e.$$.fragment,i),t=!0)},o(i){Ie(e.$$.fragment,i),t=!1},d(i){lt(e,i)}}}function AS(n){let e,t,i,r,s=n[14]("sensorView.removeLocation")+"",o;return{c(){e=Re("svg"),t=Re("path"),i=ee(),r=A("b"),o=he(s),this.h()},l(a){e=Oe(a,"svg",{xmlns:!0,x:!0,y:!0,width:!0,height:!0,viewBox:!0});var l=T(e);t=Oe(l,"path",{d:!0}),T(t).forEach(_),l.forEach(_),i=te(a),r=R(a,"B",{});var h=T(r);o=fe(h,s),h.forEach(_),this.h()},h(){g(t,"d","M 5.7070312 4.2929688 L 4.2929688 5.7070312 L 10.585938 12 L 4.2929688 18.292969 L 5.7070312 19.707031 L 12 13.414062 L 18.292969 19.707031 L 19.707031 18.292969 L 13.414062 12 L 19.707031 5.7070312 L 18.292969 4.2929688 L 12 10.585938 L 5.7070312 4.2929688 z"),g(e,"xmlns","http://www.w3.org/2000/svg"),g(e,"x","0px"),g(e,"y","0px"),g(e,"width","100"),g(e,"height","100"),g(e,"viewBox","0 0 24 24")},m(a,l){Z(a,e,l),p(e,t),Z(a,i,l),Z(a,r,l),p(r,o)},p(a,l){l[0]&16384&&s!==(s=a[14]("sensorView.removeLocation")+"")&&Ee(o,s)},d(a){a&&(_(e),_(i),_(r))}}}function RS(n){let e,t,i;return t=new ws({props:{color:"#aa8800",size:"32"}}),{c(){e=A("div"),st(t.$$.fragment),this.h()},l(r){e=R(r,"DIV",{class:!0,style:!0});var s=T(e);ot(t.$$.fragment,s),s.forEach(_),this.h()},h(){g(e,"class","column center center-cross"),B(e,"height","64px")},m(r,s){Z(r,e,s),at(t,e,null),i=!0},p:$e,i(r){i||(de(t.$$.fragment,r),i=!0)},o(r){Ie(t.$$.fragment,r),i=!1},d(r){r&&_(e),lt(t)}}}function OS(n){let e,t,i='<svg fill="#fff" width="14" height="14" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M222.927 580.115l301.354 328.512c24.354 28.708 20.825 71.724-7.883 96.078s-71.724 20.825-96.078-7.883L19.576 559.963a67.846 67.846 0 01-13.784-20.022 68.03 68.03 0 01-5.977-29.488l.001-.063a68.343 68.343 0 017.265-29.134 68.28 68.28 0 011.384-2.6 67.59 67.59 0 0110.102-13.687L429.966 21.113c25.592-27.611 68.721-29.247 96.331-3.656s29.247 68.721 3.656 96.331L224.088 443.784h730.46c37.647 0 68.166 30.519 68.166 68.166s-30.519 68.166-68.166 68.166H222.927z"></path></g></svg>',r,s,o='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M19 5L5 19M5.00001 5L19 19" stroke="#fff" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>',a,l,h,d,m,v,k={ctx:n,current:null,token:null,hasCatch:!1,pending:RS,then:SS,catch:ES,blocks:[,,,]};return xs(h=n[12],k),{c(){e=A("div"),t=A("a"),t.innerHTML=i,r=ee(),s=A("a"),s.innerHTML=o,a=ee(),l=A("div"),k.block.c(),this.h()},l(w){e=R(w,"DIV",{id:!0,class:!0});var E=T(e);t=R(E,"A",{class:!0,style:!0,href:!0,"data-svelte-h":!0}),rn(t)!=="svelte-1ysbxc5"&&(t.innerHTML=i),r=te(E),s=R(E,"A",{class:!0,style:!0,href:!0,"data-svelte-h":!0}),rn(s)!=="svelte-84xki1"&&(s.innerHTML=o),a=te(E),l=R(E,"DIV",{class:!0});var I=T(l);k.block.l(I),I.forEach(_),E.forEach(_),this.h()},h(){g(t,"class","top-button svelte-1eyv9b6"),B(t,"left","0"),g(t,"href",""),g(s,"class","top-button svelte-1eyv9b6"),B(s,"right","0"),g(s,"href",""),g(l,"class","panel-scrollable"),g(e,"id","sensor-view"),g(e,"class","panel column rel svelte-1eyv9b6")},m(w,E){Z(w,e,E),p(e,t),p(e,r),p(e,s),p(e,a),p(e,l),k.block.m(l,k.anchor=null),k.mount=()=>l,k.anchor=null,d=!0,m||(v=[nt(t,"click",ro(n[20])),nt(s,"click",ro(n[19]))],m=!0)},p(w,E){n=w,k.ctx=n,E[0]&4096&&h!==(h=n[12])&&xs(h,k)||Qc(k,n,E)},i(w){d||(de(k.block),d=!0)},o(w){for(let E=0;E<3;E+=1){const I=k.blocks[E];Ie(I)}d=!1},d(w){w&&_(e),k.block.d(),k.token=null,k=null,m=!1,Bn(v)}}}function xS(n,e,t){let i,r,s,o,a,l,h=$e,d=()=>(h(),h=Dt(Q,Me=>t(31,l=Me)),Q),m,v=$e,k=()=>(v(),v=Dt(o,Me=>t(5,m=Me)),o),w,E,I,M=$e,C=()=>(M(),M=Dt(i,Me=>t(32,I=Me)),i),D,O=$e,P=()=>(O(),O=Dt(s,Me=>t(12,D=Me)),s),F,V,$,G=$e,U=()=>(G(),G=Dt(r,Me=>t(15,$=Me)),r);He(n,nn,Me=>t(6,w=Me)),He(n,Li,Me=>t(13,F=Me)),He(n,Nn,Me=>t(14,V=Me)),n.$$.on_destroy.push(()=>h()),n.$$.on_destroy.push(()=>v()),n.$$.on_destroy.push(()=>M()),n.$$.on_destroy.push(()=>O()),n.$$.on_destroy.push(()=>G());let{mapManager:H}=e,{map:j}=e,{sensorsAreas:Q}=e;d();let{healthReportFetcher:W}=e,Y=null;const q=W.latestHealthReport;He(n,q,Me=>t(7,E=Me));let ne=null,J=null,ge=null,ie=Pn(null);He(n,ie,Me=>t(4,a=Me));let le=null;function pe(Me){var we,Te,Ae,Ne,De;!((we=Y==null?void 0:Y.location)!=null&&we.lat)||!((Te=Y==null?void 0:Y.location)!=null&&Te.lng)||(j.panTo([(Ae=Y==null?void 0:Y.location)==null?void 0:Ae.lat,(Ne=Y==null?void 0:Y.location)==null?void 0:Ne.lng]),ii.settings.fields.sensors_layer_shown.set(!0),document.body.clientWidth<800&&((De=Me==null?void 0:Me.target)==null||De.dispatchEvent(new CustomEvent("sidebar-collapse",{bubbles:!0}))))}function ye(){nn.goto(null)}function be(){nn.goto({type:"Sensors"})}function re(Me){Y&&(ii.settings.fields.sensors_layer_shown.set(!0),nn.goto({type:"SensorRelocating",sensorId:Y.id,newLocation:Pn(Y.location||j.getCenter())}),Y.location&&j.panTo([Y.location.lat,Y.location.lng],{animate:!0}),ii.settings.fields.sensors_layer_shown.set(!0),requestAnimationFrame(()=>{var we;document.body.clientWidth<800&&((we=Me==null?void 0:Me.target)==null||we.dispatchEvent(new CustomEvent("sidebar-collapse",{bubbles:!0})))}))}function me(Me){nn.goto({type:"SensorView",sensorId:Y==null?void 0:Y.id}),Me==null||Me.stopPropagation()}function ke(Me,we){Y&&(t(1,Y.location=we,Y),l==null||l.updateSensor(Y),me(Me))}function X(Me){me(Me),Y!=null&&Y.location&&j.panTo([Y.location.lat,Y.location.lng],{animate:!0})}function ue(Me){Y&&(t(1,Y.location=null,Y),l==null||l.updateSensor(Y),Me==null||Me.stopPropagation())}mi(()=>()=>{a&&a.remove()});function _e(Me){un[Me?"unshift":"push"](()=>{J=Me,t(2,J)})}const oe=Me=>pe(Me),ae=Me=>m?ke(Me,m):me(Me),Se=Me=>!((w==null?void 0:w.type)===Tt.SensorRelocating&&w.sensorId===(Y==null?void 0:Y.id))&&re(Me);return n.$$set=Me=>{"mapManager"in Me&&t(26,H=Me.mapManager),"map"in Me&&t(27,j=Me.map),"sensorsAreas"in Me&&d(t(0,Q=Me.sensorsAreas)),"healthReportFetcher"in Me&&t(28,W=Me.healthReportFetcher)},n.$$.update=()=>{if(n.$$.dirty[1]&1&&C(t(11,i=l==null?void 0:l.sensors)),n.$$.dirty[1]&1&&U(t(10,r=l==null?void 0:l.areas)),n.$$.dirty[0]&64|n.$$.dirty[1]&3&&l&&I&&t(1,Y=I.get(w.sensorId)||null),n.$$.dirty[0]&192&&q&&t(8,ne=(E==null?void 0:E.sender_reports[w.sensorId])||null),n.$$.dirty[0]&2|n.$$.dirty[1]&1&&P(t(9,s=Y?null:l==null?void 0:l.sensors.loadingPromiseStore)),n.$$.dirty[0]&66&&k(t(3,o=(w==null?void 0:w.type)==Tt.SensorRelocating?w.newLocation:Pn(Y==null?void 0:Y.location))),n.$$.dirty[0]&1677721654)if(J&&Y&&m){if(ge||(t(29,ge=document.createElement("div")),t(29,ge.id="sensor-view-map",ge),t(29,ge.className="background",ge),J.appendChild(ge)),a)a.panTo([m.lat,m.lng],{animate:!0});else{const Me=new yi.Map("sensor-view-map",{center:[m.lat,m.lng],zoom:11}),we=H.pickMostSuitableLayer(["ortho","detailed"]);pw(Me,we),Me.panTo([m.lat,m.lng]),Me.dragging.disable(),Me.touchZoom.disable(),Me.doubleClickZoom.disable(),Me.scrollWheelZoom.disable(),Me.boxZoom.disable(),Me.keyboard.disable(),Me.zoomControl.remove(),Me.attributionControl.remove(),kn(ie,a=Me,a)}if(le)le.setLatLng([m.lat,m.lng]);else{let Me;switch(Y==null?void 0:Y.type){case 0:Me=Ta;break;case 1:Me=T3;break;case 2:Me=Ta;break;case 3:Me=L3;break;case 4:Me=C3;break;default:Me=Ta}t(30,le=new yi.Marker([m.lat,m.lng],{icon:Me})),a.addLayer(le)}}else a&&(a.remove(),t(30,le=null),kn(ie,a=null,a)),ge&&(ge.remove(),t(29,ge=null));n.$$.dirty[0]&1073741864&&o&&m&&le&&le.setLatLng([m.lat,m.lng])},[Q,Y,J,o,a,m,w,E,ne,s,r,i,D,F,V,$,q,ie,pe,ye,be,re,me,ke,X,ue,H,j,W,ge,le,l,I,_e,oe,ae,Se]}class FS extends Wt{constructor(e){super(),Xt(this,e,xS,OS,zt,{mapManager:26,map:27,sensorsAreas:0,healthReportFetcher:28},null,[-1,-1])}}function BS(n){return new Worker(""+new URL("../workers/namedLocationWorker-DHhNwjMm.js",import.meta.url).href,{name:n==null?void 0:n.name})}const sh=new BS;let X3=0;const Ca=new Map;function $S(){const n=++X3;Ca.set(n,{resolve:()=>{},reject:()=>{}}),sh.postMessage({requestId:n,coordinates:{lat:0,lng:0}})}$S();function VS(n,e){return new Promise((t,i)=>{const r=++X3;Ca.set(r,{resolve:t,reject:i}),sh.postMessage({requestId:r,coordinates:{lat:n,lng:e}})})}sh.onmessage=n=>{const{requestId:e,result:t}=n.data;if(Ca.has(e)){const{resolve:i}=Ca.get(e);i(t),Ca.delete(e)}};sh.onerror=n=>{for(const e of Ca.values())e.reject(n)};let zS=1;const GS=1e4,HS=1e3,Yc=class Yc{constructor(e,t,i,r=3,s=Yc.DefaultSorter){Ge(this,"history",new Map);Ge(this,"service");Ge(this,"sortedTrafficStore");Ge(this,"latestUpdateStore");Ge(this,"counterPeriodSecs");Ge(this,"sorter");Ge(this,"__uiUpdateTimeout",null);Ge(this,"__countersResetTimeout",null);this.sortedTrafficStore=e,this.latestUpdateStore=t,this.service=i,this.counterPeriodSecs=r,this.sorter=s,this.__createPacketsSubscription(),this.__resetCounters(),this.__onUIUpdate()}subscribeToDrone(e){return Kk(this.latestUpdateStore,t=>(t==null?void 0:t.aid)===e,this.history.get(e)||null)}onUnmount(){this.__uiUpdateTimeout&&(clearTimeout(this.__uiUpdateTimeout),this.__uiUpdateTimeout=null),this.__countersResetTimeout&&(clearTimeout(this.__countersResetTimeout),this.__countersResetTimeout=null),this.history.forEach(e=>{e.__locationRecalcTimer&&(clearTimeout(e.__locationRecalcTimer),e.__locationRecalcTimer=void 0)})}__resort(){const e=Array.from(this.history.values()).sort(this.sorter);this.sortedTrafficStore.set(e)}__resetCounters(){this.history.forEach(e=>{if(e.updatesPerUnit!==0&&e.__updates===0){e.updatesPerUnit=e.__updates,e.__updates=0,this.latestUpdateStore.set(e);return}e.updatesPerUnit=e.__updates,e.__updates=0}),this.__resort(),this.__countersResetTimeout=setTimeout(()=>{this.__countersResetTimeout=null,this.__resetCounters()},this.counterPeriodSecs*1e3)}__onUIUpdate(){this.__resort(),this.__uiUpdateTimeout=setTimeout(()=>{this.__uiUpdateTimeout=null,this.__onUIUpdate()},HS)}__lazyFetchDroneInfo(e){e&&q3(e).then(t=>{let i=this.history.get(t.data.serialNumber||e);i&&(i.aircraftInfo=t,this.__resort())})}__createPacketsSubscription(){this.service.subscribe(e=>{this.__feed(e)},()=>{})}__feed(e){const t=e.aid||e.flightId;let i=this.history.get(t);if(i){if((i.lastUpdate.aid||i.lastUpdate.flightId)!==t){console.error(`TrafficHistoryManager: Aircraft ID mismatch when digesting new update (${i.lastUpdate.aid||i.lastUpdate.flightId} vs ${t}). Ignoring update`);return}i.flightId=e.flightId,i.lastUpdateTime=Date.now(),i.lastUpdate=e,e.dc&&!i.__hasReceivedDroneCoords?(i.__hasReceivedDroneCoords=!0,i.__locationRecalcTimer&&(clearTimeout(i.__locationRecalcTimer),i.__locationRecalcTimer=void 0),this.__addLocationName(i)):i.locationName===void 0&&(e.dc||e.pc)&&this.__addLocationName(i),i.__updates++,this.latestUpdateStore.set(i)}else{if(i={flightId:e.flightId,aid:t,lastUpdateTime:Date.now(),lastUpdate:e,__updates:1,updatesPerUnit:0,__appearIndex:zS++,__hasReceivedDroneCoords:!!e.dc},this.history.set(t,i),this.__lazyFetchDroneInfo(t),(e.dc||e.pc)&&this.__addLocationName(i),!e.dc){const r=i;i.__locationRecalcTimer=window.setTimeout(()=>{r.__locationRecalcTimer=void 0,r.__hasReceivedDroneCoords||this.__addLocationName(r)},GS)}this.latestUpdateStore.set(i)}e.sensorID&&(!i.detectingSensors||!i.detectingSensors.includes(e.sensorID))&&(i.detectingSensors=i.detectingSensors?[...i.detectingSensors,e.sensorID]:[e.sensorID])}__addLocationName(e){const{dc:t,pc:i}=e.lastUpdate;let r,s;if(t)r=t.lat,s=t.lng;else if(i)r=i.lat,s=i.lng;else return;VS(r,s).then(o=>{e.locationName=o}).catch(o=>{console.warn("TrafficHistoryService: Failed to get area name for drone",e.aid,o)})}};Ge(Yc,"DefaultSorter",(e,t)=>t.__appearIndex-e.__appearIndex);let Mf=Yc,US=1;const qS=1e3;function ZS(n,e){var t;return e.e&&e.e.brand==="rf:rantelon"?n.brand==="rf:rantelon"&&n.name===e.l&&n.type===e.st&&(!n.extra||n.extra.center_frequency_mhz===e.e.center_frequency_mhz)&&(!n.extra||n.extra.bandwidth_mhz===e.e.bandwidth_mhz):n.brand===((t=e.e)==null?void 0:t.brand)&&n.name===e.l&&n.type===e.st}function YS(n,e){let t=n;return e.l!==n.name&&(t={...t,name:e.l}),e.st!==n.type&&(Object.is(t,n)&&(t={...t}),t.type=e.st),e.c&&(e.c.lat!==n.location.lat||e.c.lng!==n.location.lng)&&(Object.is(t,n)&&(t={...t}),t.location=e.c),e.d!==void 0&&e.d!==n.ttl&&(Object.is(t,n)&&(t={...t}),t.ttl=e.d),e.e&&typeof e.e=="object"&&(Object.is(t,n)&&(t={...t}),t.extra={...n.extra,...e.e}),t}const jc=class jc{constructor(e,t=3,i=jc.DefaultSorter){Ge(this,"signalDetectionSerivce");Ge(this,"signalDetectionSerivceUnsubscribe");Ge(this,"history",[]);Ge(this,"sortedTrafficStore",new Ot([]));Ge(this,"sorter");Ge(this,"latestUpdateStore",new Ot(null));Ge(this,"counterPeriodSecs");Ge(this,"__uiUpdateTimeout",null);Ge(this,"__countersResetTimeout",null);this.signalDetectionSerivce=e,this.counterPeriodSecs=t,this.sorter=i,this.__createUpdatesSubscription(),this.__resetCounters(),this.__onUIUpdate()}onUnmount(){this.__uiUpdateTimeout&&(clearTimeout(this.__uiUpdateTimeout),this.__uiUpdateTimeout=null),this.__countersResetTimeout&&(clearTimeout(this.__countersResetTimeout),this.__countersResetTimeout=null),this.signalDetectionSerivceUnsubscribe&&this.signalDetectionSerivceUnsubscribe()}__resort(){const e=Array.from(this.history.values()).sort(this.sorter);this.sortedTrafficStore.set(e)}__resetCounters(){this.__resort(),this.__countersResetTimeout=setTimeout(()=>{this.__countersResetTimeout=null,this.__resetCounters()},this.counterPeriodSecs*1e3)}__onUIUpdate(){this.__resort(),this.__uiUpdateTimeout=setTimeout(()=>{this.__uiUpdateTimeout=null,this.__onUIUpdate()},qS)}__createUpdatesSubscription(){this.signalDetectionSerivceUnsubscribe=this.signalDetectionSerivce.subscribe(e=>{this.__feed(e)},()=>{})}__feed(e){const t=this.history.findIndex(i=>ZS(i,e));if(t!==-1){const i=this.history[t],r=YS(i,e);r.lastUpdateTime=Date.now()/1e3,this.history[t]=r}else{const i={name:e.l,brand:e.e?e.e.brand:"unknown",type:e.st,location:e.c,ttl:e.d,lastUpdateTime:Date.now()/1e3,sensorId:e.sensorId,extra:e.e?{...e.e}:{},__appearIndex:US++};this.history.push(i)}this.latestUpdateStore.set(e)}clearHistory(){this.history.length=0,this.sortedTrafficStore.set([]),this.latestUpdateStore.set(null)}__cleanupExpiredDetections(){const e=Date.now()/1e3;this.history=this.history.filter(t=>!(e-t.lastUpdateTime>t.ttl))}getHistory(){return this.__cleanupExpiredDetections(),[...this.history]}};Ge(jc,"DefaultSorter",(e,t)=>t.__appearIndex-e.__appearIndex);let Tf=jc;const Ga={civ_icons:{[an.FRIENDLY]:"#36C57B",[an.UNKNOWN]:"#000",[an.HOSTILE]:"#E02525",[an.NEUTRAL]:"#EEC302"},mil_icons:{[an.FRIENDLY]:"#0B84A3",[an.UNKNOWN]:"#000000FF",[an.HOSTILE]:"#E02525",[an.NEUTRAL]:"#5EE55E"}},Ar=864e5;function E2(n,e,t){const i=n.slice();return i[35]=e[t].lastUpdateTime,i[36]=e[t].locationName,i[37]=e[t].lastUpdate.aid,i[38]=e[t].lastUpdate.isIntrusion,i[39]=e[t].updatesPerUnit,i[40]=e[t].aircraftInfo,i[41]=e[t].flightId,i}function Oh(n){var i;const e=n.slice(),t=(i=e[3])==null?void 0:i.get(e[37]);return e[44]=t,e}function S2(n,e,t){var l;const i=n.slice();i[45]=e[t];const r=i[18](i[45]);i[46]=r[0],i[47]=r[1];const s=i[45].name.indexOf(":")!==-1?i[45].name.split(":",2).map(h=>h.trim()):[i[45].name,void 0];i[48]=s;const o=i[11]?i[11].get(i[45].sensorId):null;i[49]=o;const a=((l=i[49])==null?void 0:l.name)??null;return i[50]=a,i}function I2(n,e,t){const i=n.slice();return i[35]=e[t].lastUpdateTime,i[36]=e[t].locationName,i[37]=e[t].lastUpdate.aid,i[38]=e[t].lastUpdate.isIntrusion,i[39]=e[t].updatesPerUnit,i[40]=e[t].aircraftInfo,i[41]=e[t].flightId,i}function xh(n){var s,o,a,l;const e=n.slice(),t=(s=e[3])==null?void 0:s.get(e[37]);e[44]=t;const i=e[37]&&e[37].length==36&&e[37].charAt(8)=="-"&&e[37].charAt(13)=="-"&&e[37].charAt(18)=="-"&&e[37].charAt(23)=="-";e[55]=i;const r=e[55]&&((o=e[40])==null?void 0:o.data.make)=="DJI"&&((l=(a=e[40])==null?void 0:a.data.model)==null?void 0:l.toLowerCase())=="unknown";return e[56]=r,e}function M2(n,e,t){var l;const i=n.slice();i[45]=e[t];const r=i[18](i[45]);i[46]=r[0],i[47]=r[1];const s=i[45].name.indexOf(":")!==-1?i[45].name.split(":",2).map(h=>h.trim()):[i[45].name,void 0];i[48]=s;const o=i[11]?i[11].get(i[45].sensorId):null;i[49]=o;const a=((l=i[49])==null?void 0:l.name)??null;return i[50]=a,i}function T2(n){let e,t=n[10]("radar.noDronesAirborne")+"",i;return{c(){e=A("p"),i=he(t),this.h()},l(r){e=R(r,"P",{class:!0,style:!0});var s=T(e);i=fe(s,t),s.forEach(_),this.h()},h(){g(e,"class","p816 width100"),B(e,"text-align","center"),B(e,"padding-top",n[9].length>0||n[8].length>0?"16px":"8px")},m(r,s){Z(r,e,s),p(e,i)},p(r,s){s[0]&1024&&t!==(t=r[10]("radar.noDronesAirborne")+"")&&Ee(i,t),s[0]&768&&B(e,"padding-top",r[9].length>0||r[8].length>0?"16px":"8px")},d(r){r&&_(e)}}}function L2(n){let e,t=n[10]("radar.modulation")+"",i,r,s,o=n[48][1]+"",a;return{c(){e=A("p"),i=he(t),r=he(": "),s=A("span"),a=he(o),this.h()},l(l){e=R(l,"P",{class:!0,style:!0});var h=T(e);i=fe(h,t),r=fe(h,": "),s=R(h,"SPAN",{class:!0});var d=T(s);a=fe(d,o),d.forEach(_),h.forEach(_),this.h()},h(){g(s,"class","svelte-1ev80h8"),g(e,"class","details svelte-1ev80h8"),B(e,"font-size","16px")},m(l,h){Z(l,e,h),p(e,i),p(e,r),p(e,s),p(s,a)},p(l,h){h[0]&1024&&t!==(t=l[10]("radar.modulation")+"")&&Ee(i,t),h[0]&16&&o!==(o=l[48][1]+"")&&Ee(a,o)},d(l){l&&_(e)}}}function C2(n){let e,t=n[10]("radar.rssi")+"",i,r,s,o=n[45].extra.rssi_dbm+"",a,l;return{c(){e=A("p"),i=he(t),r=he(": "),s=A("span"),a=he(o),l=he(" dBm"),this.h()},l(h){e=R(h,"P",{class:!0});var d=T(e);i=fe(d,t),r=fe(d,": "),s=R(d,"SPAN",{class:!0});var m=T(s);a=fe(m,o),l=fe(m," dBm"),m.forEach(_),d.forEach(_),this.h()},h(){g(s,"class","svelte-1ev80h8"),g(e,"class","details svelte-1ev80h8")},m(h,d){Z(h,e,d),p(e,i),p(e,r),p(e,s),p(s,a),p(s,l)},p(h,d){d[0]&1024&&t!==(t=h[10]("radar.rssi")+"")&&Ee(i,t),d[0]&16&&o!==(o=h[45].extra.rssi_dbm+"")&&Ee(a,o)},d(h){h&&_(e)}}}function P2(n){let e,t=n[10]("radar.centerFrequency")+"",i,r,s,o=n[45].extra.center_frequency_mhz+"",a,l;return{c(){e=A("p"),i=he(t),r=he(": "),s=A("span"),a=he(o),l=he(" MHz"),this.h()},l(h){e=R(h,"P",{class:!0});var d=T(e);i=fe(d,t),r=fe(d,": "),s=R(d,"SPAN",{class:!0});var m=T(s);a=fe(m,o),l=fe(m," MHz"),m.forEach(_),d.forEach(_),this.h()},h(){g(s,"class","svelte-1ev80h8"),g(e,"class","details svelte-1ev80h8")},m(h,d){Z(h,e,d),p(e,i),p(e,r),p(e,s),p(s,a),p(s,l)},p(h,d){d[0]&1024&&t!==(t=h[10]("radar.centerFrequency")+"")&&Ee(i,t),d[0]&16&&o!==(o=h[45].extra.center_frequency_mhz+"")&&Ee(a,o)},d(h){h&&_(e)}}}function N2(n){let e,t=n[50]+"",i,r,s,o,a="";return{c(){e=A("p"),i=he(t),s=ee(),o=A("p"),o.textContent=a,this.h()},l(l){e=R(l,"P",{class:!0,style:!0,title:!0});var h=T(e);i=fe(h,t),h.forEach(_),s=te(l),o=R(l,"P",{style:!0,"data-svelte-h":!0}),rn(o)!=="svelte-12xgcl4"&&(o.textContent=a),this.h()},h(){g(e,"class","truncate"),B(e,"font-size","14px"),B(e,"color","#888"),g(e,"title",r=n[50]),B(o,"font-size","14px"),B(o,"color","#888")},m(l,h){Z(l,e,h),p(e,i),Z(l,s,h),Z(l,o,h)},p(l,h){h[0]&2064&&t!==(t=l[50]+"")&&Ee(i,t),h[0]&2064&&r!==(r=l[50])&&g(e,"title",r)},d(l){l&&(_(e),_(s),_(o))}}}function jS(n){let e,t,i,r=n[48][0]+"",s,o,a,l,h,d,m,v,k,w,E=n[17](n[45].lastUpdateTime*1e3)+"",I,M,C,D,O,P=n[46]+"",F,V,$,G,U=n[48][1]&&L2(n),H=n[45].extra.rssi_dbm&&C2(n),j=n[45].extra.center_frequency_mhz&&P2(n),Q=n[50]&&N2(n);return{c(){e=A("div"),t=A("div"),i=A("h3"),s=he(r),o=ee(),a=A("div"),U&&U.c(),l=ee(),h=A("div"),H&&H.c(),d=ee(),j&&j.c(),m=ee(),v=A("div"),Q&&Q.c(),k=ee(),w=A("p"),I=he(E),M=ee(),C=A("div"),D=ee(),O=A("p"),F=he(P),$=ee(),G=A("p"),this.h()},l(W){e=R(W,"DIV",{class:!0});var Y=T(e);t=R(Y,"DIV",{class:!0});var q=T(t);i=R(q,"H3",{style:!0});var ne=T(i);s=fe(ne,r),ne.forEach(_),q.forEach(_),o=te(Y),a=R(Y,"DIV",{class:!0,style:!0});var J=T(a);U&&U.l(J),l=te(J),h=R(J,"DIV",{class:!0});var ge=T(h);H&&H.l(ge),d=te(ge),j&&j.l(ge),ge.forEach(_),J.forEach(_),m=te(Y),v=R(Y,"DIV",{class:!0});var ie=T(v);Q&&Q.l(ie),k=te(ie),w=R(ie,"P",{class:!0,style:!0});var le=T(w);I=fe(le,E),le.forEach(_),M=te(ie),C=R(ie,"DIV",{class:!0}),T(C).forEach(_),D=te(ie),O=R(ie,"P",{class:!0,style:!0,title:!0});var pe=T(O);F=fe(pe,P),pe.forEach(_),ie.forEach(_),$=te(Y),G=R(Y,"P",{}),T(G).forEach(_),Y.forEach(_),this.h()},h(){B(i,"text-overflow","ellipsis"),B(i,"white-space","nowrap"),B(i,"min-width","0"),B(i,"overflow","hidden"),g(t,"class","row center-cross g8"),g(h,"class","row g16"),g(a,"class","column width100"),B(a,"justify-content","stretch"),g(w,"class","dont-shrink"),B(w,"font-size","14px"),B(w,"color","#888"),g(C,"class","grow"),g(O,"class","sensor-type svelte-1ev80h8"),B(O,"justify-self","end"),g(O,"title",V=n[47]?n[47]:n[46]),g(v,"class","row g8"),g(e,"class","column width100")},m(W,Y){Z(W,e,Y),p(e,t),p(t,i),p(i,s),p(e,o),p(e,a),U&&U.m(a,null),p(a,l),p(a,h),H&&H.m(h,null),p(h,d),j&&j.m(h,null),p(e,m),p(e,v),Q&&Q.m(v,null),p(v,k),p(v,w),p(w,I),p(v,M),p(v,C),p(v,D),p(v,O),p(O,F),p(e,$),p(e,G)},p(W,Y){Y[0]&16&&r!==(r=W[48][0]+"")&&Ee(s,r),W[48][1]?U?U.p(W,Y):(U=L2(W),U.c(),U.m(a,l)):U&&(U.d(1),U=null),W[45].extra.rssi_dbm?H?H.p(W,Y):(H=C2(W),H.c(),H.m(h,d)):H&&(H.d(1),H=null),W[45].extra.center_frequency_mhz?j?j.p(W,Y):(j=P2(W),j.c(),j.m(h,null)):j&&(j.d(1),j=null),W[50]?Q?Q.p(W,Y):(Q=N2(W),Q.c(),Q.m(v,k)):Q&&(Q.d(1),Q=null),Y[0]&16&&E!==(E=W[17](W[45].lastUpdateTime*1e3)+"")&&Ee(I,E),Y[0]&16&&P!==(P=W[46]+"")&&Ee(F,P),Y[0]&16&&V!==(V=W[47]?W[47]:W[46])&&g(O,"title",V)},d(W){W&&_(e),U&&U.d(),H&&H.d(),j&&j.d(),Q&&Q.d()}}}function D2(n,e){let t,i,r;return i=new fn({props:{style:"opacity: 1;",class:"row g8 p816 hoverable noselect",onclick:tI,$$slots:{default:[jS]},$$scope:{ctx:e}}}),{key:n,first:null,c(){t=dt(),st(i.$$.fragment),this.h()},l(s){t=dt(),ot(i.$$.fragment,s),this.h()},h(){this.first=t},m(s,o){Z(s,t,o),at(i,s,o),r=!0},p(s,o){e=s;const a={};o[0]&3088|o[1]&268435456&&(a.$$scope={dirty:o,ctx:e}),i.$set(a)},i(s){r||(de(i.$$.fragment,s),r=!0)},o(s){Ie(i.$$.fragment,s),r=!1},d(s){s&&_(t),lt(i,s)}}}function A2(n){let e,t;function i(){return n[29](n[37])}return e=new fn({props:{style:"opacity: 1;",class:"row g8 p816 hoverable noselect",onclick:i,$$slots:{default:[WS]},$$scope:{ctx:n}}}),{c(){st(e.$$.fragment)},l(r){ot(e.$$.fragment,r)},m(r,s){at(e,r,s),t=!0},p(r,s){n=r;const o={};s[0]&4128&&(o.onclick=i),s[0]&9257|s[1]&268435456&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(r){t||(de(e.$$.fragment,r),t=!0)},o(r){Ie(e.$$.fragment,r),t=!1},d(r){lt(e,r)}}}function R2(n){let e,t,i=n[10]("radar.geofenceIntrusion")+"",r,s;return{c(){e=Re("svg"),t=Re("title"),r=he(i),s=Re("path"),this.h()},l(o){e=Oe(o,"svg",{xmlns:!0,style:!0,height:!0,width:!0,viewBox:!0,fill:!0});var a=T(e);t=Oe(a,"title",{});var l=T(t);r=fe(l,i),l.forEach(_),s=Oe(a,"path",{d:!0}),T(s).forEach(_),a.forEach(_),this.h()},h(){g(s,"d","M480-320q17 0 28.5-11.5T520-360q0-17-11.5-28.5T480-400q-17 0-28.5 11.5T440-360q0 17 11.5 28.5T480-320Zm-40-160h80v-200h-80v200Zm40 400q-139-35-229.5-159.5T160-516v-244l320-120 320 120v244q0 152-90.5 276.5T480-80Zm0-84q104-33 172-132t68-220v-189l-240-90-240 90v189q0 121 68 220t172 132Zm0-316Z"),g(e,"xmlns","http://www.w3.org/2000/svg"),B(e,"min-width","22px"),g(e,"height","22px"),g(e,"width","22px"),g(e,"viewBox","0 -960 960 960"),g(e,"fill","#E02525")},m(o,a){Z(o,e,a),p(e,t),p(t,r),p(e,s)},p(o,a){a[0]&1024&&i!==(i=o[10]("radar.geofenceIntrusion")+"")&&Ee(r,i)},d(o){o&&_(e)}}}function O2(n){let e,t,i=n[10]("aircraftView.crackedFwTitle")+"",r,s;return{c(){e=Re("svg"),t=Re("title"),r=he(i),s=Re("path"),this.h()},l(o){e=Oe(o,"svg",{class:!0,xmlns:!0,style:!0,viewBox:!0,fill:!0});var a=T(e);t=Oe(a,"title",{});var l=T(t);r=fe(l,i),l.forEach(_),s=Oe(a,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0}),T(s).forEach(_),a.forEach(_),this.h()},h(){g(s,"d","M12 15H12.01M12 12V9M4.98207 19H19.0179C20.5615 19 21.5233 17.3256 20.7455 15.9923L13.7276 3.96153C12.9558 2.63852 11.0442 2.63852 10.2724 3.96153L3.25452 15.9923C2.47675 17.3256 3.43849 19 4.98207 19Z"),g(s,"stroke","#cc614b"),g(s,"stroke-width","2"),g(s,"stroke-linecap","round"),g(s,"stroke-linejoin","round"),g(e,"class","dont-shrink"),g(e,"xmlns","http://www.w3.org/2000/svg"),B(e,"margin-top","2px"),B(e,"width","21px"),B(e,"height","21px"),g(e,"viewBox","0 0 24 24"),g(e,"fill","none")},m(o,a){Z(o,e,a),p(e,t),p(t,r),p(e,s)},p(o,a){a[0]&1024&&i!==(i=o[10]("aircraftView.crackedFwTitle")+"")&&Ee(r,i)},d(o){o&&_(e)}}}function x2(n){let e,t=n[10]("flights.region."+n[36])+"",i,r,s,o="";return{c(){e=A("p"),i=he(t),r=ee(),s=A("p"),s.textContent=o,this.h()},l(a){e=R(a,"P",{style:!0});var l=T(e);i=fe(l,t),l.forEach(_),r=te(a),s=R(a,"P",{style:!0,"data-svelte-h":!0}),rn(s)!=="svelte-12xgcl4"&&(s.textContent=o),this.h()},h(){B(e,"font-size","14px"),B(e,"color","#888"),B(s,"font-size","14px"),B(s,"color","#888")},m(a,l){Z(a,e,l),p(e,i),Z(a,r,l),Z(a,s,l)},p(a,l){l[0]&1056&&t!==(t=a[10]("flights.region."+a[36])+"")&&Ee(i,t)},d(a){a&&(_(e),_(r),_(s))}}}function F2(n){let e,t,i,r="ADS-B";return{c(){e=A("div"),t=ee(),i=A("p"),i.textContent=r,this.h()},l(s){e=R(s,"DIV",{class:!0}),T(e).forEach(_),t=te(s),i=R(s,"P",{class:!0,style:!0,"data-svelte-h":!0}),rn(i)!=="svelte-r96l2i"&&(i.textContent=r),this.h()},h(){g(e,"class","grow"),g(i,"class","sensor-type svelte-1ev80h8"),B(i,"justify-self","end")},m(s,o){Z(s,e,o),Z(s,t,o),Z(s,i,o)},d(s){s&&(_(e),_(t),_(i))}}}function WS(n){var q,ne,J,ge,ie,le,pe,ye,be,re,me;let e,t,i,r=(((q=n[44])==null?void 0:q.identifier)||(n[40]?((ne=n[40])==null?void 0:ne.type)==si.DRID?(ge=(J=n[40])==null?void 0:J.data)!=null&&ge.make&&((le=(ie=n[40])==null?void 0:ie.data)!=null&&le.model)?`${n[40].data.make} ${n[40].data.model}`:n[37].startsWith("1581")?n[10]("radar.unknownDJIModel"):n[10]("radar.unknownModel"):((ye=(pe=n[40])==null?void 0:pe.data)==null?void 0:ye.callsign)||((me=(re=(be=n[40])==null?void 0:be.data)==null?void 0:re.icao)==null?void 0:me.toUpperCase())||n[37]:n[37]))+"",s,o,a,l,h,d,m=n[39].toFixed(1)+"",v,k,w=n[0].counterPeriodSecs+"",E,I,M,C,D,O,P,F,V,$=n[17](n[35])+"",G,U,H=n[40]&&n[41].charAt(0)=="2",j=n[38]&&R2(n),Q=n[56]&&O2(n),W=n[36]&&x2(n),Y=H&&F2();return{c(){e=A("div"),t=A("div"),i=A("h3"),s=he(r),a=ee(),j&&j.c(),l=ee(),Q&&Q.c(),h=ee(),d=A("p"),v=he(m),k=he(" / "),E=he(w),I=he("s"),C=ee(),D=A("div"),O=ee(),P=A("div"),W&&W.c(),F=ee(),V=A("p"),G=he($),U=ee(),Y&&Y.c(),this.h()},l(ke){e=R(ke,"DIV",{class:!0});var X=T(e);t=R(X,"DIV",{class:!0});var ue=T(t);i=R(ue,"H3",{style:!0});var _e=T(i);s=fe(_e,r),_e.forEach(_),a=te(ue),j&&j.l(ue),l=te(ue),Q&&Q.l(ue),h=te(ue),d=R(ue,"P",{class:!0,style:!0});var oe=T(d);v=fe(oe,m),k=fe(oe," / "),E=fe(oe,w),I=fe(oe,"s"),oe.forEach(_),C=te(ue),D=R(ue,"DIV",{class:!0}),T(D).forEach(_),ue.forEach(_),O=te(X),P=R(X,"DIV",{class:!0});var ae=T(P);W&&W.l(ae),F=te(ae),V=R(ae,"P",{style:!0});var Se=T(V);G=fe(Se,$),Se.forEach(_),U=te(ae),Y&&Y.l(ae),ae.forEach(_),X.forEach(_),this.h()},h(){var ke;g(i,"style",o=`text-overflow: ellipsis; white-space: nowrap; min-width: 0; overflow: hidden; color: ${Ga[n[13]][((ke=n[44])==null?void 0:ke.relationship)||an.UNKNOWN]};`),g(d,"class","bubble dont-shrink svelte-1ev80h8"),g(d,"style",M=`${n[38]?"":"margin-left: 4px;"} ${n[39]==0?"background-color: #d66;":""}`),g(D,"class","grow"),g(t,"class","row center-cross g4"),B(V,"font-size","14px"),B(V,"color","#888"),g(P,"class","row g8"),g(e,"class","column width100")},m(ke,X){Z(ke,e,X),p(e,t),p(t,i),p(i,s),p(t,a),j&&j.m(t,null),p(t,l),Q&&Q.m(t,null),p(t,h),p(t,d),p(d,v),p(d,k),p(d,E),p(d,I),p(t,C),p(t,D),p(e,O),p(e,P),W&&W.m(P,null),p(P,F),p(P,V),p(V,G),p(P,U),Y&&Y.m(P,null)},p(ke,X){var ue,_e,oe,ae,Se,Me,we,Te,Ae,Ne,De,_t;X[0]&1064&&r!==(r=(((ue=ke[44])==null?void 0:ue.identifier)||(ke[40]?((_e=ke[40])==null?void 0:_e.type)==si.DRID?(ae=(oe=ke[40])==null?void 0:oe.data)!=null&&ae.make&&((Me=(Se=ke[40])==null?void 0:Se.data)!=null&&Me.model)?`${ke[40].data.make} ${ke[40].data.model}`:ke[37].startsWith("1581")?ke[10]("radar.unknownDJIModel"):ke[10]("radar.unknownModel"):((Te=(we=ke[40])==null?void 0:we.data)==null?void 0:Te.callsign)||((De=(Ne=(Ae=ke[40])==null?void 0:Ae.data)==null?void 0:Ne.icao)==null?void 0:De.toUpperCase())||ke[37]:ke[37]))+"")&&Ee(s,r),X[0]&8232&&o!==(o=`text-overflow: ellipsis; white-space: nowrap; min-width: 0; overflow: hidden; color: ${Ga[ke[13]][((_t=ke[44])==null?void 0:_t.relationship)||an.UNKNOWN]};`)&&g(i,"style",o),ke[38]?j?j.p(ke,X):(j=R2(ke),j.c(),j.m(t,l)):j&&(j.d(1),j=null),ke[56]?Q?Q.p(ke,X):(Q=O2(ke),Q.c(),Q.m(t,h)):Q&&(Q.d(1),Q=null),X[0]&32&&m!==(m=ke[39].toFixed(1)+"")&&Ee(v,m),X[0]&1&&w!==(w=ke[0].counterPeriodSecs+"")&&Ee(E,w),X[0]&32&&M!==(M=`${ke[38]?"":"margin-left: 4px;"} ${ke[39]==0?"background-color: #d66;":""}`)&&g(d,"style",M),ke[36]?W?W.p(ke,X):(W=x2(ke),W.c(),W.m(P,F)):W&&(W.d(1),W=null),X[0]&32&&$!==($=ke[17](ke[35])+"")&&Ee(G,$),X[0]&32&&(H=ke[40]&&ke[41].charAt(0)=="2"),H?Y||(Y=F2(),Y.c(),Y.m(P,null)):Y&&(Y.d(1),Y=null)},d(ke){ke&&_(e),j&&j.d(),Q&&Q.d(),W&&W.d(),Y&&Y.d()}}}function B2(n,e){let t,i=e[41].charAt(0)!="2"||e[6],r,s,o=i&&A2(xh(e));return{key:n,first:null,c(){t=dt(),o&&o.c(),r=dt(),this.h()},l(a){t=dt(),o&&o.l(a),r=dt(),this.h()},h(){this.first=t},m(a,l){Z(a,t,l),o&&o.m(a,l),Z(a,r,l),s=!0},p(a,l){e=a,l[0]&96&&(i=e[41].charAt(0)!="2"||e[6]),i?o?(o.p(xh(e),l),l[0]&96&&de(o,1)):(o=A2(xh(e)),o.c(),de(o,1),o.m(r.parentNode,r)):o&&(bt(),Ie(o,1,1,()=>{o=null}),wt())},i(a){s||(de(o),s=!0)},o(a){Ie(o),s=!1},d(a){a&&(_(t),_(r)),o&&o.d(a)}}}function $2(n){let e,t,i=n[10]("radar.nonActive")+"",r,s,o;return{c(){e=A("div"),t=A("p"),r=he(i),s=ee(),o=A("hr"),this.h()},l(a){e=R(a,"DIV",{class:!0,style:!0});var l=T(e);t=R(l,"P",{class:!0});var h=T(t);r=fe(h,i),h.forEach(_),s=te(l),o=R(l,"HR",{class:!0}),l.forEach(_),this.h()},h(){g(t,"class","non-active-label svelte-1ev80h8"),g(o,"class","grow"),g(e,"class","row width100 g8"),B(e,"padding","8px 16px")},m(a,l){Z(a,e,l),p(e,t),p(t,r),p(e,s),p(e,o)},p(a,l){l[0]&1024&&i!==(i=a[10]("radar.nonActive")+"")&&Ee(r,i)},d(a){a&&_(e)}}}function V2(n){let e,t=n[10]("radar.modulation")+"",i,r,s,o=n[48][1]+"",a;return{c(){e=A("p"),i=he(t),r=he(": "),s=A("span"),a=he(o),this.h()},l(l){e=R(l,"P",{class:!0,style:!0});var h=T(e);i=fe(h,t),r=fe(h,": "),s=R(h,"SPAN",{class:!0});var d=T(s);a=fe(d,o),d.forEach(_),h.forEach(_),this.h()},h(){g(s,"class","svelte-1ev80h8"),g(e,"class","details svelte-1ev80h8"),B(e,"font-size","16px")},m(l,h){Z(l,e,h),p(e,i),p(e,r),p(e,s),p(s,a)},p(l,h){h[0]&1024&&t!==(t=l[10]("radar.modulation")+"")&&Ee(i,t),h[0]&256&&o!==(o=l[48][1]+"")&&Ee(a,o)},d(l){l&&_(e)}}}function z2(n){let e,t=n[10]("radar.rssi")+"",i,r,s,o=n[45].extra.rssi_dbm+"",a,l;return{c(){e=A("p"),i=he(t),r=he(": "),s=A("span"),a=he(o),l=he(" dBm"),this.h()},l(h){e=R(h,"P",{class:!0});var d=T(e);i=fe(d,t),r=fe(d,": "),s=R(d,"SPAN",{class:!0});var m=T(s);a=fe(m,o),l=fe(m," dBm"),m.forEach(_),d.forEach(_),this.h()},h(){g(s,"class","svelte-1ev80h8"),g(e,"class","details svelte-1ev80h8")},m(h,d){Z(h,e,d),p(e,i),p(e,r),p(e,s),p(s,a),p(s,l)},p(h,d){d[0]&1024&&t!==(t=h[10]("radar.rssi")+"")&&Ee(i,t),d[0]&256&&o!==(o=h[45].extra.rssi_dbm+"")&&Ee(a,o)},d(h){h&&_(e)}}}function G2(n){let e,t=n[10]("radar.centerFrequency")+"",i,r,s,o=n[45].extra.center_frequency_mhz+"",a,l;return{c(){e=A("p"),i=he(t),r=he(": "),s=A("span"),a=he(o),l=he(" MHz"),this.h()},l(h){e=R(h,"P",{class:!0});var d=T(e);i=fe(d,t),r=fe(d,": "),s=R(d,"SPAN",{class:!0});var m=T(s);a=fe(m,o),l=fe(m," MHz"),m.forEach(_),d.forEach(_),this.h()},h(){g(s,"class","svelte-1ev80h8"),g(e,"class","details svelte-1ev80h8")},m(h,d){Z(h,e,d),p(e,i),p(e,r),p(e,s),p(s,a),p(s,l)},p(h,d){d[0]&1024&&t!==(t=h[10]("radar.centerFrequency")+"")&&Ee(i,t),d[0]&256&&o!==(o=h[45].extra.center_frequency_mhz+"")&&Ee(a,o)},d(h){h&&_(e)}}}function H2(n){let e,t=n[50]+"",i,r,s,o,a="";return{c(){e=A("p"),i=he(t),s=ee(),o=A("p"),o.textContent=a,this.h()},l(l){e=R(l,"P",{class:!0,style:!0,title:!0});var h=T(e);i=fe(h,t),h.forEach(_),s=te(l),o=R(l,"P",{style:!0,"data-svelte-h":!0}),rn(o)!=="svelte-12xgcl4"&&(o.textContent=a),this.h()},h(){g(e,"class","truncate"),B(e,"font-size","14px"),B(e,"color","#888"),g(e,"title",r=n[50]),B(o,"font-size","14px"),B(o,"color","#888")},m(l,h){Z(l,e,h),p(e,i),Z(l,s,h),Z(l,o,h)},p(l,h){h[0]&2304&&t!==(t=l[50]+"")&&Ee(i,t),h[0]&2304&&r!==(r=l[50])&&g(e,"title",r)},d(l){l&&(_(e),_(s),_(o))}}}function XS(n){let e,t,i,r=n[48][0]+"",s,o,a,l,h,d,m,v,k,w,E=n[17](n[45].lastUpdateTime*1e3)+"",I,M,C,D,O,P=n[46]+"",F,V,$=n[48][1]&&V2(n),G=n[45].extra.rssi_dbm&&z2(n),U=n[45].extra.center_frequency_mhz&&G2(n),H=n[50]&&H2(n);return{c(){e=A("div"),t=A("div"),i=A("h3"),s=he(r),o=ee(),a=A("div"),$&&$.c(),l=ee(),h=A("div"),G&&G.c(),d=ee(),U&&U.c(),m=ee(),v=A("div"),H&&H.c(),k=ee(),w=A("p"),I=he(E),M=ee(),C=A("div"),D=ee(),O=A("p"),F=he(P),this.h()},l(j){e=R(j,"DIV",{class:!0});var Q=T(e);t=R(Q,"DIV",{class:!0});var W=T(t);i=R(W,"H3",{style:!0});var Y=T(i);s=fe(Y,r),Y.forEach(_),W.forEach(_),o=te(Q),a=R(Q,"DIV",{class:!0,style:!0});var q=T(a);$&&$.l(q),l=te(q),h=R(q,"DIV",{class:!0});var ne=T(h);G&&G.l(ne),d=te(ne),U&&U.l(ne),ne.forEach(_),q.forEach(_),m=te(Q),v=R(Q,"DIV",{class:!0});var J=T(v);H&&H.l(J),k=te(J),w=R(J,"P",{class:!0,style:!0});var ge=T(w);I=fe(ge,E),ge.forEach(_),M=te(J),C=R(J,"DIV",{class:!0}),T(C).forEach(_),D=te(J),O=R(J,"P",{class:!0,style:!0,title:!0});var ie=T(O);F=fe(ie,P),ie.forEach(_),J.forEach(_),Q.forEach(_),this.h()},h(){B(i,"text-overflow","ellipsis"),B(i,"white-space","nowrap"),B(i,"min-width","0"),B(i,"overflow","hidden"),g(t,"class","row center-cross g8"),g(h,"class","row g16"),g(a,"class","column width100"),B(a,"justify-content","stretch"),g(w,"class","dont-shrink"),B(w,"font-size","14px"),B(w,"color","#888"),g(C,"class","grow"),g(O,"class","sensor-type svelte-1ev80h8"),B(O,"justify-self","end"),g(O,"title",V=n[47]?n[47]:n[46]),g(v,"class","row g8"),g(e,"class","column width100")},m(j,Q){Z(j,e,Q),p(e,t),p(t,i),p(i,s),p(e,o),p(e,a),$&&$.m(a,null),p(a,l),p(a,h),G&&G.m(h,null),p(h,d),U&&U.m(h,null),p(e,m),p(e,v),H&&H.m(v,null),p(v,k),p(v,w),p(w,I),p(v,M),p(v,C),p(v,D),p(v,O),p(O,F)},p(j,Q){Q[0]&256&&r!==(r=j[48][0]+"")&&Ee(s,r),j[48][1]?$?$.p(j,Q):($=V2(j),$.c(),$.m(a,l)):$&&($.d(1),$=null),j[45].extra.rssi_dbm?G?G.p(j,Q):(G=z2(j),G.c(),G.m(h,d)):G&&(G.d(1),G=null),j[45].extra.center_frequency_mhz?U?U.p(j,Q):(U=G2(j),U.c(),U.m(h,null)):U&&(U.d(1),U=null),j[50]?H?H.p(j,Q):(H=H2(j),H.c(),H.m(v,k)):H&&(H.d(1),H=null),Q[0]&256&&E!==(E=j[17](j[45].lastUpdateTime*1e3)+"")&&Ee(I,E),Q[0]&256&&P!==(P=j[46]+"")&&Ee(F,P),Q[0]&256&&V!==(V=j[47]?j[47]:j[46])&&g(O,"title",V)},d(j){j&&_(e),$&&$.d(),G&&G.d(),U&&U.d(),H&&H.d()}}}function U2(n,e){let t,i,r;return i=new fn({props:{style:"opacity: 0.5;",class:"row g8 p816 hoverable noselect",onclick:nI,$$slots:{default:[XS]},$$scope:{ctx:e}}}),{key:n,first:null,c(){t=dt(),st(i.$$.fragment),this.h()},l(s){t=dt(),ot(i.$$.fragment,s),this.h()},h(){this.first=t},m(s,o){Z(s,t,o),at(i,s,o),r=!0},p(s,o){e=s;const a={};o[0]&3328|o[1]&268435456&&(a.$$scope={dirty:o,ctx:e}),i.$set(a)},i(s){r||(de(i.$$.fragment,s),r=!0)},o(s){Ie(i.$$.fragment,s),r=!1},d(s){s&&_(t),lt(i,s)}}}function q2(n){let e,t;function i(){return n[30](n[37])}return e=new fn({props:{style:"opacity: 0.5;",class:"row g8 p816 hoverable noselect",onclick:i,$$slots:{default:[KS]},$$scope:{ctx:n}}}),{c(){st(e.$$.fragment)},l(r){ot(e.$$.fragment,r)},m(r,s){at(e,r,s),t=!0},p(r,s){n=r;const o={};s[0]&4608&&(o.onclick=i),s[0]&9737|s[1]&268435456&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(r){t||(de(e.$$.fragment,r),t=!0)},o(r){Ie(e.$$.fragment,r),t=!1},d(r){lt(e,r)}}}function Z2(n){let e,t,i=n[10]("radar.geofenceIntrusion")+"",r,s;return{c(){e=Re("svg"),t=Re("title"),r=he(i),s=Re("path"),this.h()},l(o){e=Oe(o,"svg",{xmlns:!0,style:!0,height:!0,width:!0,viewBox:!0,fill:!0});var a=T(e);t=Oe(a,"title",{});var l=T(t);r=fe(l,i),l.forEach(_),s=Oe(a,"path",{d:!0}),T(s).forEach(_),a.forEach(_),this.h()},h(){g(s,"d","M480-320q17 0 28.5-11.5T520-360q0-17-11.5-28.5T480-400q-17 0-28.5 11.5T440-360q0 17 11.5 28.5T480-320Zm-40-160h80v-200h-80v200Zm40 400q-139-35-229.5-159.5T160-516v-244l320-120 320 120v244q0 152-90.5 276.5T480-80Zm0-84q104-33 172-132t68-220v-189l-240-90-240 90v189q0 121 68 220t172 132Zm0-316Z"),g(e,"xmlns","http://www.w3.org/2000/svg"),B(e,"min-width","22px"),g(e,"height","22px"),g(e,"width","22px"),g(e,"viewBox","0 -960 960 960"),g(e,"fill","#E02525")},m(o,a){Z(o,e,a),p(e,t),p(t,r),p(e,s)},p(o,a){a[0]&1024&&i!==(i=o[10]("radar.geofenceIntrusion")+"")&&Ee(r,i)},d(o){o&&_(e)}}}function Y2(n){let e,t=n[10]("flights.region."+n[36])+"",i,r,s,o="";return{c(){e=A("p"),i=he(t),r=ee(),s=A("p"),s.textContent=o,this.h()},l(a){e=R(a,"P",{style:!0});var l=T(e);i=fe(l,t),l.forEach(_),r=te(a),s=R(a,"P",{style:!0,"data-svelte-h":!0}),rn(s)!=="svelte-12xgcl4"&&(s.textContent=o),this.h()},h(){B(e,"font-size","14px"),B(e,"color","#888"),B(s,"font-size","14px"),B(s,"color","#888")},m(a,l){Z(a,e,l),p(e,i),Z(a,r,l),Z(a,s,l)},p(a,l){l[0]&1536&&t!==(t=a[10]("flights.region."+a[36])+"")&&Ee(i,t)},d(a){a&&(_(e),_(r),_(s))}}}function j2(n){let e,t,i,r="ADS-B";return{c(){e=A("div"),t=ee(),i=A("p"),i.textContent=r,this.h()},l(s){e=R(s,"DIV",{class:!0}),T(e).forEach(_),t=te(s),i=R(s,"P",{class:!0,style:!0,"data-svelte-h":!0}),rn(i)!=="svelte-r96l2i"&&(i.textContent=r),this.h()},h(){g(e,"class","grow"),g(i,"class","sensor-type svelte-1ev80h8"),B(i,"justify-self","end")},m(s,o){Z(s,e,o),Z(s,t,o),Z(s,i,o)},d(s){s&&(_(e),_(t),_(i))}}}function KS(n){var Q,W,Y,q,ne,J,ge,ie,le,pe,ye;let e,t,i,r=(((Q=n[44])==null?void 0:Q.identifier)||(n[40]?((W=n[40])==null?void 0:W.type)==si.DRID?(q=(Y=n[40])==null?void 0:Y.data)!=null&&q.make&&((J=(ne=n[40])==null?void 0:ne.data)!=null&&J.model)?`${n[40].data.make} ${n[40].data.model}`:n[37]:((ie=(ge=n[40])==null?void 0:ge.data)==null?void 0:ie.callsign)||((ye=(pe=(le=n[40])==null?void 0:le.data)==null?void 0:pe.icao)==null?void 0:ye.toUpperCase())||n[37]:n[37]))+"",s,o,a,l,h,d=n[39].toFixed(1)+"",m,v,k=n[0].counterPeriodSecs+"",w,E,I,M,C,D,O,P=n[17](n[35])+"",F,V,$=n[40]&&n[41].charAt(0)=="2",G,U=n[38]&&Z2(n),H=n[36]&&Y2(n),j=$&&j2();return{c(){e=A("div"),t=A("div"),i=A("h3"),s=he(r),a=ee(),U&&U.c(),l=ee(),h=A("p"),m=he(d),v=he(" / "),w=he(k),E=he("s"),M=ee(),C=A("div"),H&&H.c(),D=ee(),O=A("p"),F=he(P),V=ee(),j&&j.c(),G=ee(),this.h()},l(be){e=R(be,"DIV",{class:!0});var re=T(e);t=R(re,"DIV",{class:!0});var me=T(t);i=R(me,"H3",{style:!0});var ke=T(i);s=fe(ke,r),ke.forEach(_),a=te(me),U&&U.l(me),l=te(me),h=R(me,"P",{class:!0,style:!0});var X=T(h);m=fe(X,d),v=fe(X," / "),w=fe(X,k),E=fe(X,"s"),X.forEach(_),me.forEach(_),M=te(re),C=R(re,"DIV",{class:!0});var ue=T(C);H&&H.l(ue),D=te(ue),O=R(ue,"P",{style:!0});var _e=T(O);F=fe(_e,P),_e.forEach(_),V=te(ue),j&&j.l(ue),ue.forEach(_),re.forEach(_),G=te(be),this.h()},h(){var be;g(i,"style",o=`text-overflow: ellipsis; white-space: nowrap; min-width: 0; overflow: hidden; color: ${Ga[n[13]][((be=n[44])==null?void 0:be.relationship)||an.UNKNOWN]};`),g(h,"class","bubble dont-shrink svelte-1ev80h8"),g(h,"style",I=`${n[38]?"":"margin-left: 4px;"} ${n[39]==0?"background-color: #d66;":""}`),g(t,"class","row center-cross g8"),B(O,"font-size","14px"),B(O,"color","#888"),g(C,"class","row g8"),g(e,"class","column width100")},m(be,re){Z(be,e,re),p(e,t),p(t,i),p(i,s),p(t,a),U&&U.m(t,null),p(t,l),p(t,h),p(h,m),p(h,v),p(h,w),p(h,E),p(e,M),p(e,C),H&&H.m(C,null),p(C,D),p(C,O),p(O,F),p(C,V),j&&j.m(C,null),Z(be,G,re)},p(be,re){var me,ke,X,ue,_e,oe,ae,Se,Me,we,Te,Ae;re[0]&520&&r!==(r=(((me=be[44])==null?void 0:me.identifier)||(be[40]?((ke=be[40])==null?void 0:ke.type)==si.DRID?(ue=(X=be[40])==null?void 0:X.data)!=null&&ue.make&&((oe=(_e=be[40])==null?void 0:_e.data)!=null&&oe.model)?`${be[40].data.make} ${be[40].data.model}`:be[37]:((Se=(ae=be[40])==null?void 0:ae.data)==null?void 0:Se.callsign)||((Te=(we=(Me=be[40])==null?void 0:Me.data)==null?void 0:we.icao)==null?void 0:Te.toUpperCase())||be[37]:be[37]))+"")&&Ee(s,r),re[0]&8712&&o!==(o=`text-overflow: ellipsis; white-space: nowrap; min-width: 0; overflow: hidden; color: ${Ga[be[13]][((Ae=be[44])==null?void 0:Ae.relationship)||an.UNKNOWN]};`)&&g(i,"style",o),be[38]?U?U.p(be,re):(U=Z2(be),U.c(),U.m(t,l)):U&&(U.d(1),U=null),re[0]&512&&d!==(d=be[39].toFixed(1)+"")&&Ee(m,d),re[0]&1&&k!==(k=be[0].counterPeriodSecs+"")&&Ee(w,k),re[0]&512&&I!==(I=`${be[38]?"":"margin-left: 4px;"} ${be[39]==0?"background-color: #d66;":""}`)&&g(h,"style",I),be[36]?H?H.p(be,re):(H=Y2(be),H.c(),H.m(C,D)):H&&(H.d(1),H=null),re[0]&512&&P!==(P=be[17](be[35])+"")&&Ee(F,P),re[0]&512&&($=be[40]&&be[41].charAt(0)=="2"),$?j||(j=j2(),j.c(),j.m(C,null)):j&&(j.d(1),j=null)},d(be){be&&(_(e),_(G)),U&&U.d(),H&&H.d(),j&&j.d()}}}function W2(n,e){let t,i=e[41].charAt(0)!="2"||e[6],r,s,o=i&&q2(Oh(e));return{key:n,first:null,c(){t=dt(),o&&o.c(),r=dt(),this.h()},l(a){t=dt(),o&&o.l(a),r=dt(),this.h()},h(){this.first=t},m(a,l){Z(a,t,l),o&&o.m(a,l),Z(a,r,l),s=!0},p(a,l){e=a,l[0]&576&&(i=e[41].charAt(0)!="2"||e[6]),i?o?(o.p(Oh(e),l),l[0]&576&&de(o,1)):(o=q2(Oh(e)),o.c(),de(o,1),o.m(r.parentNode,r)):o&&(bt(),Ie(o,1,1,()=>{o=null}),wt())},i(a){s||(de(o),s=!0)},o(a){Ie(o),s=!1},d(a){a&&(_(t),_(r)),o&&o.d(a)}}}function JS(n){let e,t,i,r,s=n[10]("radar.airTraffic")+"",o,a,l,h=(n[7]?n[7]==1?n[10]("radar.oneDroneAirborne"):n[10]("radar.dronesAirborne",{values:{count:n[7]}}):n[10]("radar.noDronesAirborne"))+"",d,m,v,k='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M19 5L5 19M5.00001 5L19 19" stroke="#fff" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>',w,E,I,M=n[10]("radar.measurementPeriod")+"",C,D,O,P,F,V,$,G,U=n[10]("units.sec")+"",H,j,Q,W,Y,q,ne,J,ge=[],ie=new Map,le,pe=[],ye=new Map,be,re,me=[],ke=new Map,X,ue=[],_e=new Map,oe,ae,Se,Me=n[7]===0&&T2(n),we=Bt(n[4]);const Te=Ve=>Ve[45].__appearIndex;for(let Ve=0;Ve<we.length;Ve+=1){let Ue=M2(n,we,Ve),Ke=Te(Ue);ie.set(Ke,ge[Ve]=D2(Ke,Ue))}let Ae=Bt(n[5]);const Ne=Ve=>Ve[37];for(let Ve=0;Ve<Ae.length;Ve+=1){let Ue=I2(n,Ae,Ve),Ke=Ne(Ue);ye.set(Ke,pe[Ve]=B2(Ke,Ue))}let De=(n[9].length>0||n[8].length>0)&&$2(n),_t=Bt(n[8]);const Fe=Ve=>Ve[45].__appearIndex;for(let Ve=0;Ve<_t.length;Ve+=1){let Ue=S2(n,_t,Ve),Ke=Fe(Ue);ke.set(Ke,me[Ve]=U2(Ke,Ue))}let Pe=Bt(n[9]);const je=Ve=>Ve[37];for(let Ve=0;Ve<Pe.length;Ve+=1){let Ue=E2(n,Pe,Ve),Ke=je(Ue);_e.set(Ke,ue[Ve]=W2(Ke,Ue))}return{c(){e=A("div"),t=A("div"),i=A("div"),r=A("p"),o=he(s),a=ee(),l=A("p"),d=he(h),m=ee(),v=A("button"),v.innerHTML=k,w=ee(),E=A("div"),I=A("p"),C=he(M),D=ee(),O=A("div"),P=ee(),F=A("div"),V=A("input"),$=ee(),G=A("p"),H=he(U),j=ee(),Q=A("hr"),W=ee(),Y=A("div"),q=A("div"),ne=ee(),Me&&Me.c(),J=ee();for(let Ve=0;Ve<ge.length;Ve+=1)ge[Ve].c();le=ee();for(let Ve=0;Ve<pe.length;Ve+=1)pe[Ve].c();be=ee(),De&&De.c(),re=ee();for(let Ve=0;Ve<me.length;Ve+=1)me[Ve].c();X=ee();for(let Ve=0;Ve<ue.length;Ve+=1)ue[Ve].c();this.h()},l(Ve){e=R(Ve,"DIV",{class:!0});var Ue=T(e);t=R(Ue,"DIV",{class:!0,style:!0});var Ke=T(t);i=R(Ke,"DIV",{class:!0});var We=T(i);r=R(We,"P",{style:!0});var ze=T(r);o=fe(ze,s),ze.forEach(_),a=te(We),l=R(We,"P",{style:!0});var Et=T(l);d=fe(Et,h),Et.forEach(_),We.forEach(_),m=te(Ke),v=R(Ke,"BUTTON",{class:!0,style:!0,"data-svelte-h":!0}),rn(v)!=="svelte-ynny9p"&&(v.innerHTML=k),Ke.forEach(_),w=te(Ue),E=R(Ue,"DIV",{class:!0});var rt=T(E);I=R(rt,"P",{class:!0,style:!0});var ft=T(I);C=fe(ft,M),ft.forEach(_),D=te(rt),O=R(rt,"DIV",{class:!0}),T(O).forEach(_),P=te(rt),F=R(rt,"DIV",{class:!0});var Ut=T(F);V=R(Ut,"INPUT",{style:!0,type:!0,step:!0,min:!0}),$=te(Ut),G=R(Ut,"P",{class:!0,style:!0});var Qe=T(G);H=fe(Qe,U),Qe.forEach(_),Ut.forEach(_),rt.forEach(_),j=te(Ue),Q=R(Ue,"HR",{}),W=te(Ue),Y=R(Ue,"DIV",{class:!0});var yt=T(Y);q=R(yt,"DIV",{class:!0,style:!0}),T(q).forEach(_),ne=te(yt),Me&&Me.l(yt),J=te(yt);for(let mt=0;mt<ge.length;mt+=1)ge[mt].l(yt);le=te(yt);for(let mt=0;mt<pe.length;mt+=1)pe[mt].l(yt);be=te(yt),De&&De.l(yt),re=te(yt);for(let mt=0;mt<me.length;mt+=1)me[mt].l(yt);X=te(yt);for(let mt=0;mt<ue.length;mt+=1)ue[mt].l(yt);yt.forEach(_),Ue.forEach(_),this.h()},h(){B(r,"font-size","18px"),B(l,"font-size","12px"),g(i,"class","column grow"),g(v,"class","close svelte-1ev80h8"),B(v,"background","none"),B(v,"padding","0"),B(v,"border","none"),B(v,"outline","none"),B(v,"margin","0"),B(v,"height","24px"),g(t,"class","row center-cross info-row svelte-1ev80h8"),B(t,"background-color","#445"),g(I,"class","p816 grow"),B(I,"font-size","12px"),B(I,"color","#888"),B(I,"text-transform","uppercase"),g(O,"class","vr"),B(V,"all","unset"),B(V,"text-align","right"),B(V,"width","48px"),B(V,"-moz-appearance","textfield"),g(V,"type","number"),g(V,"step","0.1"),g(V,"min","0.1"),g(G,"class","p816 grow"),B(G,"font-size","12px"),B(G,"color","#888"),g(F,"class","row"),g(E,"class","row g8 width100"),g(q,"class","sep"),B(q,"border-top","none"),g(Y,"class","panel-scrollable column"),g(e,"class","panel column")},m(Ve,Ue){Z(Ve,e,Ue),p(e,t),p(t,i),p(i,r),p(r,o),p(i,a),p(i,l),p(l,d),p(t,m),p(t,v),p(e,w),p(e,E),p(E,I),p(I,C),p(E,D),p(E,O),p(E,P),p(E,F),p(F,V),fi(V,n[0].counterPeriodSecs),p(F,$),p(F,G),p(G,H),p(e,j),p(e,Q),p(e,W),p(e,Y),p(Y,q),p(Y,ne),Me&&Me.m(Y,null),p(Y,J);for(let Ke=0;Ke<ge.length;Ke+=1)ge[Ke]&&ge[Ke].m(Y,null);p(Y,le);for(let Ke=0;Ke<pe.length;Ke+=1)pe[Ke]&&pe[Ke].m(Y,null);p(Y,be),De&&De.m(Y,null),p(Y,re);for(let Ke=0;Ke<me.length;Ke+=1)me[Ke]&&me[Ke].m(Y,null);p(Y,X);for(let Ke=0;Ke<ue.length;Ke+=1)ue[Ke]&&ue[Ke].m(Y,null);oe=!0,ae||(Se=[nt(v,"click",n[20]),nt(V,"input",n[28]),nt(V,"focus",QS),nt(V,"submit",eI)],ae=!0)},p(Ve,Ue){(!oe||Ue[0]&1024)&&s!==(s=Ve[10]("radar.airTraffic")+"")&&Ee(o,s),(!oe||Ue[0]&1152)&&h!==(h=(Ve[7]?Ve[7]==1?Ve[10]("radar.oneDroneAirborne"):Ve[10]("radar.dronesAirborne",{values:{count:Ve[7]}}):Ve[10]("radar.noDronesAirborne"))+"")&&Ee(d,h),(!oe||Ue[0]&1024)&&M!==(M=Ve[10]("radar.measurementPeriod")+"")&&Ee(C,M),Ue[0]&1&&Sv(V.value)!==Ve[0].counterPeriodSecs&&fi(V,Ve[0].counterPeriodSecs),(!oe||Ue[0]&1024)&&U!==(U=Ve[10]("units.sec")+"")&&Ee(H,U),Ve[7]===0?Me?Me.p(Ve,Ue):(Me=T2(Ve),Me.c(),Me.m(Y,J)):Me&&(Me.d(1),Me=null),Ue[0]&396304&&(we=Bt(Ve[4]),bt(),ge=vr(ge,Ue,Te,1,Ve,we,ie,Y,vs,D2,le,M2),wt()),Ue[0]&668777&&(Ae=Bt(Ve[5]),bt(),pe=vr(pe,Ue,Ne,1,Ve,Ae,ye,Y,vs,B2,be,I2),wt()),Ve[9].length>0||Ve[8].length>0?De?De.p(Ve,Ue):(De=$2(Ve),De.c(),De.m(Y,re)):De&&(De.d(1),De=null),Ue[0]&396544&&(_t=Bt(Ve[8]),bt(),me=vr(me,Ue,Fe,1,Ve,_t,ke,Y,vs,U2,X,S2),wt()),Ue[0]&669257&&(Pe=Bt(Ve[9]),bt(),ue=vr(ue,Ue,je,1,Ve,Pe,_e,Y,vs,W2,null,E2),wt())},i(Ve){if(!oe){for(let Ue=0;Ue<we.length;Ue+=1)de(ge[Ue]);for(let Ue=0;Ue<Ae.length;Ue+=1)de(pe[Ue]);for(let Ue=0;Ue<_t.length;Ue+=1)de(me[Ue]);for(let Ue=0;Ue<Pe.length;Ue+=1)de(ue[Ue]);oe=!0}},o(Ve){for(let Ue=0;Ue<ge.length;Ue+=1)Ie(ge[Ue]);for(let Ue=0;Ue<pe.length;Ue+=1)Ie(pe[Ue]);for(let Ue=0;Ue<me.length;Ue+=1)Ie(me[Ue]);for(let Ue=0;Ue<ue.length;Ue+=1)Ie(ue[Ue]);oe=!1},d(Ve){Ve&&_(e),Me&&Me.d();for(let Ue=0;Ue<ge.length;Ue+=1)ge[Ue].d();for(let Ue=0;Ue<pe.length;Ue+=1)pe[Ue].d();De&&De.d();for(let Ue=0;Ue<me.length;Ue+=1)me[Ue].d();for(let Ue=0;Ue<ue.length;Ue+=1)ue[Ue].d();ae=!1,Bn(Se)}}}const QS=n=>{var e;return(e=n==null?void 0:n.target)==null?void 0:e.select()},eI=n=>{var e;return(e=n==null?void 0:n.target)==null?void 0:e.blur()},tI=()=>{},nI=()=>{};function iI(n,e,t){let i,r,s,o,a,l,h,d,m,v,k,w=$e,E=()=>(w(),w=Dt(F,re=>t(27,k=re)),F),I,M,C,D=$e,O=()=>(D(),D=Dt($,re=>t(13,C=re)),$);He(n,Nn,re=>t(10,d=re)),He(n,Li,re=>t(12,M=re)),n.$$.on_destroy.push(()=>w()),n.$$.on_destroy.push(()=>D());const P=3*60*1e3;let{trafficHistory:F}=e;E();let{trafficService:V}=e,{iconSet:$}=e;O();let{signalDetectionHistoryService:G}=e,{sensorsAreas:U}=e,{reactiveDroneRelationService:H}=e;const j=ii.settings.fields.traffic_list_shows_adsb;He(n,j,re=>t(6,v=re));const Q=G?G.sortedTrafficStore:null;He(n,Q,re=>t(26,m=re));let W=Date.now(),Y;mi(()=>(Y=setInterval(()=>{t(23,W=Date.now())},1e3),()=>{clearInterval(Y)}));const q=U==null?void 0:U.sensors;He(n,q,re=>t(11,I=re));function ne(re){const me=W-re;return me<5*1e3?d("radar.updatedJustNow"):me<60*1e3?d("radar.updatedNSecondsAgo",{values:{seconds:Math.floor(me/1e3)}}):me<60*60*1e3?d("radar.updatedNMinutesAgo",{values:{minutes:Math.floor(me/(60*1e3))}}):me<24*60*60*1e3?d("radar.updatedNHoursAgo",{values:{hours:Math.floor(me/(60*60*1e3))}}):d("radar.updatedNDaysAgo",{values:{days:Math.floor(me/(24*60*60*1e3))}})}const J={rf:"RF",audio:"Audio"};function ge(re){if(re.brand){if(re.brand.includes(":")){let[me,ke]=re.brand.split(":");return me=me.trim().toLowerCase(),ke=ke.trim(),ke=ke.charAt(0).toUpperCase()+ke.slice(1),me in J?[J[me],ke]:[me.toUpperCase(),ke]}return[re.brand.charAt(0).toUpperCase()+re.brand.slice(1),void 0]}return["Signal",void 0]}function ie(re){nn.goto({type:Tt.AircraftView,aid:re})}function le(){nn.goto(null)}function pe(){V.counterPeriodSecs=Sv(this.value),t(0,V)}const ye=re=>(M==null?void 0:M.hasPermission(100))&&ie(re),be=re=>(M==null?void 0:M.hasPermission(100))&&ie(re);return n.$$set=re=>{"trafficHistory"in re&&E(t(1,F=re.trafficHistory)),"trafficService"in re&&t(0,V=re.trafficService),"iconSet"in re&&O(t(2,$=re.iconSet)),"signalDetectionHistoryService"in re&&t(21,G=re.signalDetectionHistoryService),"sensorsAreas"in re&&t(22,U=re.sensorsAreas),"reactiveDroneRelationService"in re&&t(3,H=re.reactiveDroneRelationService)},n.$$.update=()=>{n.$$.dirty[0]&142606400&&t(5,i=k.filter(re=>re.lastUpdateTime>=W-P&&(v||re.flightId.charAt(0)!="2"))),n.$$.dirty[0]&142606400&&t(9,r=k.filter(re=>re.lastUpdateTime<W-P&&(v||re.flightId.charAt(0)!="2"))),n.$$.dirty[0]&77594624&&t(4,s=G&&m?m.filter(re=>re.lastUpdateTime*1e3>=W-P):[]),n.$$.dirty[0]&77594624&&t(8,o=G&&m?m.filter(re=>re.lastUpdateTime*1e3<W-P):[]),n.$$.dirty[0]&32&&t(25,a=i.length),n.$$.dirty[0]&16&&t(24,l=s.length),n.$$.dirty[0]&50331648&&t(7,h=a+l)},[V,F,$,H,s,i,v,h,o,r,d,I,M,C,j,Q,q,ne,ge,ie,le,G,U,W,l,a,m,k,pe,ye,be]}class rI extends Wt{constructor(e){super(),Xt(this,e,iI,JS,zt,{trafficHistory:1,trafficService:0,iconSet:2,signalDetectionHistoryService:21,sensorsAreas:22,reactiveDroneRelationService:3},null,[-1,-1])}}function X2(n){let e,t,i=("00"+n[0].getHours()).slice(-2)+"",r,s,o,a=("00"+n[0].getMinutes()).slice(-2)+"",l,h,d,m,v=n[1]!=="minute"&&K2(n);return{c(){e=A("div"),t=A("span"),r=he(i),s=he(`:
		`),o=A("span"),l=he(a),h=ee(),v&&v.c(),this.h()},l(k){e=R(k,"DIV",{class:!0,role:!0});var w=T(e);t=R(w,"SPAN",{role:!0,"aria-label":!0,tabindex:!0,contenteditable:!0,inputmode:!0,class:!0});var E=T(t);r=fe(E,i),E.forEach(_),s=fe(w,`:
		`),o=R(w,"SPAN",{role:!0,"aria-label":!0,tabindex:!0,contenteditable:!0,inputmode:!0,class:!0});var I=T(o);l=fe(I,a),I.forEach(_),h=te(w),v&&v.l(w),w.forEach(_),this.h()},h(){g(t,"role","spinbutton"),g(t,"aria-label","Hours"),g(t,"tabindex","0"),g(t,"contenteditable",""),g(t,"inputmode","numeric"),g(t,"class","svelte-mzlxg7"),g(o,"role","spinbutton"),g(o,"aria-label","Minutes"),g(o,"tabindex","0"),g(o,"contenteditable",""),g(o,"inputmode","numeric"),g(o,"class","svelte-mzlxg7"),g(e,"class","time-picker svelte-mzlxg7"),g(e,"role","none")},m(k,w){Z(k,e,w),p(e,t),p(t,r),n[6](t),p(e,s),p(e,o),p(o,l),n[7](o),p(e,h),v&&v.m(e,null),d||(m=[nt(t,"keydown",n[3]),nt(t,"input",n[4]),nt(t,"focus",$c),nt(o,"keydown",n[3]),nt(o,"input",n[4]),nt(o,"focus",$c),nt(e,"mousedown",n[10])],d=!0)},p(k,w){w&1&&i!==(i=("00"+k[0].getHours()).slice(-2)+"")&&Na(r,i),w&1&&a!==(a=("00"+k[0].getMinutes()).slice(-2)+"")&&Na(l,a),k[1]!=="minute"?v?v.p(k,w):(v=K2(k),v.c(),v.m(e,null)):v&&(v.d(1),v=null)},d(k){k&&_(e),n[6](null),n[7](null),v&&v.d(),d=!1,Bn(m)}}}function K2(n){let e,t,i=("00"+n[0].getSeconds()).slice(-2)+"",r,s,o,a,l,h=n[1]!=="second"&&J2(n);return{c(){e=he(":"),t=A("span"),r=he(i),s=ee(),h&&h.c(),o=dt(),this.h()},l(d){e=fe(d,":"),t=R(d,"SPAN",{role:!0,"aria-label":!0,tabindex:!0,contenteditable:!0,inputmode:!0,class:!0});var m=T(t);r=fe(m,i),m.forEach(_),s=te(d),h&&h.l(d),o=dt(),this.h()},h(){g(t,"role","spinbutton"),g(t,"aria-label","Seconds"),g(t,"tabindex","0"),g(t,"contenteditable",""),g(t,"inputmode","numeric"),g(t,"class","svelte-mzlxg7")},m(d,m){Z(d,e,m),Z(d,t,m),p(t,r),n[8](t),Z(d,s,m),h&&h.m(d,m),Z(d,o,m),a||(l=[nt(t,"keydown",n[3]),nt(t,"input",n[4]),nt(t,"focus",$c)],a=!0)},p(d,m){m&1&&i!==(i=("00"+d[0].getSeconds()).slice(-2)+"")&&Na(r,i),d[1]!=="second"?h?h.p(d,m):(h=J2(d),h.c(),h.m(o.parentNode,o)):h&&(h.d(1),h=null)},d(d){d&&(_(e),_(t),_(s),_(o)),n[8](null),h&&h.d(d),a=!1,Bn(l)}}}function J2(n){let e,t,i=("000"+n[0].getMilliseconds()).slice(-3)+"",r,s,o;return{c(){e=he("."),t=A("span"),r=he(i),this.h()},l(a){e=fe(a,"."),t=R(a,"SPAN",{role:!0,"aria-label":!0,tabindex:!0,contenteditable:!0,inputmode:!0,class:!0});var l=T(t);r=fe(l,i),l.forEach(_),this.h()},h(){g(t,"role","spinbutton"),g(t,"aria-label","Milliseconds"),g(t,"tabindex","0"),g(t,"contenteditable",""),g(t,"inputmode","numeric"),g(t,"class","svelte-mzlxg7")},m(a,l){Z(a,e,l),Z(a,t,l),p(t,r),n[9](t),s||(o=[nt(t,"keydown",n[3]),nt(t,"input",n[4]),nt(t,"focus",$c)],s=!0)},p(a,l){l&1&&i!==(i=("000"+a[0].getMilliseconds()).slice(-3)+"")&&Na(r,i)},d(a){a&&(_(e),_(t)),n[9](null),s=!1,Bn(o)}}}function sI(n){let e,t=n[1]&&X2(n);return{c(){t&&t.c(),e=dt()},l(i){t&&t.l(i),e=dt()},m(i,r){t&&t.m(i,r),Z(i,e,r)},p(i,[r]){i[1]?t?t.p(i,r):(t=X2(i),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:$e,o:$e,d(i){i&&_(e),t&&t.d(i)}}}function pc(n){const e=window.getSelection(),t=document.createRange();t.selectNodeContents(n),e==null||e.removeAllRanges(),e==null||e.addRange(t)}function oI(n,e,t){return t&&n<0?e:t&&n>e?0:Math.max(0,Math.min(e,n))}function Fh(n){const e=n.getAttribute("aria-label");if(e==="Hours")return{label:e,len:2,max:23};if(e==="Minutes")return{label:e,len:2,max:59};if(e==="Seconds")return{label:e,len:2,max:59};if(e==="Milliseconds")return{label:e,len:3,max:999};throw new Error("Invalid label "+e)}function Bh(n,e){return parseInt(n.replace(/[^\d]/g,"").slice(-e))}function $c(n){pc(n.currentTarget)}function aI(n,e,t){let{browseDate:i}=e,{timePrecision:r}=e,{setTime:s}=e,o=[];function a(M){if(M.key==="ArrowUp"||M.key==="ArrowDown"){const C=l(M.currentTarget),D=M.key==="ArrowUp"?1:-1;d(M.currentTarget,C+D,!0),M.preventDefault(),pc(M.currentTarget)}else if(M.key==="ArrowLeft"||M.key==="ArrowRight"||":;-,.".includes(M.key)){const C=o.indexOf(M.currentTarget),D=M.key==="ArrowLeft"?-1:1,O=o[C+D];M.preventDefault(),O&&(O.focus(),pc(O))}}function l(M){const C=Fh(M).label;return C==="Hours"?i.getHours():C==="Minutes"?i.getMinutes():C==="Seconds"?i.getSeconds():i.getMilliseconds()}function h(M){const C=("00"+M.getHours()).slice(-2),D=("00"+M.getMinutes()).slice(-2),O=("00"+M.getSeconds()).slice(-2),P=("000"+M.getMilliseconds()).slice(-3);o[0]&&o[0].innerText!==C&&t(2,o[0].innerText=C,o),o[1]&&o[1].innerText!==D&&t(2,o[1].innerText=D,o),o[2]&&o[2].innerText!==O&&t(2,o[2].innerText=O,o),o[3]&&o[3].innerText!==P&&t(2,o[3].innerText=P,o)}function d(M,C,D=!1){const O=Fh(M);C=oI(C,O.max,D),O.label==="Hours"?i.setHours(C):O.label==="Minutes"?i.setMinutes(C):O.label==="Seconds"?i.setSeconds(C):O.label==="Milliseconds"&&i.setMilliseconds(C),t(0,i=s(i)),h(i)}function m(M){const C=M,D=Fh(C.currentTarget);let O;if(C.inputType==="insertText"){const P="000"+l(C.currentTarget);O=Bh(P+C.currentTarget.innerText,D.len),O>D.max&&C.data&&(O=Bh(C.data,D.len))}else O=Bh("000"+C.currentTarget.innerText,D.len);d(C.currentTarget,O),pc(C.currentTarget)}function v(M){un[M?"unshift":"push"](()=>{o[0]=M,t(2,o)})}function k(M){un[M?"unshift":"push"](()=>{o[1]=M,t(2,o)})}function w(M){un[M?"unshift":"push"](()=>{o[2]=M,t(2,o)})}function E(M){un[M?"unshift":"push"](()=>{o[3]=M,t(2,o)})}const I=M=>{M.target instanceof HTMLElement&&M.target.tagName==="SPAN"&&(M.target.focus(),M.preventDefault())};return n.$$set=M=>{"browseDate"in M&&t(0,i=M.browseDate),"timePrecision"in M&&t(1,r=M.timePrecision),"setTime"in M&&t(5,s=M.setTime)},n.$$.update=()=>{n.$$.dirty&1&&h(i)},[i,r,o,a,m,s,v,k,w,E,I]}let lI=class extends Wt{constructor(e){super(),Xt(this,e,aI,sI,zt,{browseDate:0,timePrecision:1,setTime:5})}};function uI(n){return n%4===0&&n%100!==0||n%400===0}function jl(n,e){return[31,uI(n)?29:28,31,30,31,30,31,31,30,31,30,31][e]}function Q2(n,e){let t="";if(n)for(const i of e)typeof i=="string"?t+=i:t+=i.toString(n);return t}function $h(n,e){const t=jl(n,e),i=[];for(let r=0;r<t;r++)i.push({year:n,month:e,number:r+1});return i}function cI(n,e){const t=n.getFullYear(),i=n.getMonth(),r=new Date(t,i,1).getDay();let s=[];const o=(r-e+7)%7;if(o>0){let d=i-1,m=t;d===-1&&(d=11,m=t-1),s=$h(m,d).slice(-o)}s=s.concat($h(t,i));let a=i+1,l=t;a===12&&(a=0,l=t+1);const h=42-s.length;return s=s.concat($h(l,a).slice(0,h)),s}function eg(n,e){e===null?n.setHours(0,0,0,0):e==="minute"?n.setSeconds(0,0):e==="second"&&n.setMilliseconds(0)}function ps(n){return new Date(n)}function ka(n,e,t,i,r){let s=ps(e);return n>e?(Gu(s,-1,t,i,r),s<t&&(s=Vc(s,t,i),Gu(s,1,t,i,r))):s>=n&&(Gu(s,1,t,i,r),s>i&&(s=Vc(s,t,i),Gu(s,-1,t,i,r))),(s<t||s>i)&&(s=h0(s,t,i)),s}function Gu(n,e,t,i,r){let o=0;for(;r!=null&&r(n)&&n>=t&&n<=i&&o<=36525;)n.setDate(n.getDate()+e),o++}function h0(n,e,t){return n>t?ps(t):n<e?ps(e):ps(n)}function Vc(n,e,t){const i=h0(n,e,t);return n=new Date(i.getFullYear(),i.getMonth(),i.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()),n>t&&n.setDate(t.getDate()),n<e&&n.setDate(e.getDate()),n}function hI(){return{weekdays:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekStartsOn:1}}function K3(n){const e=hI();return typeof n.weekStartsOn=="number"&&(e.weekStartsOn=n.weekStartsOn),n.months&&(e.months=n.months),n.shortMonths&&(e.shortMonths=n.shortMonths),n.weekdays&&(e.weekdays=n.weekdays),e}function tg(n,e,t){const i=n.slice();return i[38]=e[t],i[40]=t,i}function ng(n,e,t){const i=n.slice();return i[41]=e[t],i}function ig(n,e,t){const i=n.slice();return i[38]=e[t],i[45]=t,i}function rg(n,e,t){const i=n.slice();return i[46]=e[t],i}function sg(n,e,t){const i=n.slice();return i[46]=e[t],i}function og(n,e,t){const i=n.slice();return i[51]=e[t],i[45]=t,i}function ag(n,e,t){const i=n.slice();return i[51]=e[t],i[45]=t,i}function lg(n){let e,t=n[51]+"",i,r;return{c(){e=A("option"),i=he(t),this.h()},l(s){e=R(s,"OPTION",{});var o=T(e);i=fe(o,t),o.forEach(_),this.h()},h(){e.disabled=r=new Date(n[9],n[45],jl(n[9],n[45]),23,59,59,999)<n[2]||new Date(n[9],n[45])>n[3],e.__value=n[45],fi(e,e.__value)},m(s,o){Z(s,e,o),p(e,i)},p(s,o){o[0]&32&&t!==(t=s[51]+"")&&Ee(i,t),o[0]&588&&r!==(r=new Date(s[9],s[45],jl(s[9],s[45]),23,59,59,999)<s[2]||new Date(s[9],s[45])>s[3])&&(e.disabled=r)},d(s){s&&_(e)}}}function ug(n){let e,t=n[51]+"",i,r;return{c(){e=A("option"),i=he(t),this.h()},l(s){e=R(s,"OPTION",{});var o=T(e);i=fe(o,t),o.forEach(_),this.h()},h(){e.__value=n[45],fi(e,e.__value),e.selected=r=n[45]===n[8]},m(s,o){Z(s,e,o),p(e,i)},p(s,o){o[0]&32&&t!==(t=s[51]+"")&&Ee(i,t),o[0]&256&&r!==(r=s[45]===s[8])&&(e.selected=r)},d(s){s&&_(e)}}}function cg(n){let e,t=n[46]+"",i,r;return{c(){e=A("option"),i=he(t),this.h()},l(s){e=R(s,"OPTION",{});var o=T(e);i=fe(o,t),o.forEach(_),this.h()},h(){e.__value=r=n[46],fi(e,e.__value)},m(s,o){Z(s,e,o),p(e,i)},p(s,o){o[0]&64&&t!==(t=s[46]+"")&&Ee(i,t),o[0]&64&&r!==(r=s[46])&&(e.__value=r,fi(e,e.__value))},d(s){s&&_(e)}}}function hg(n){let e,t=n[46]+"",i,r,s;return{c(){e=A("option"),i=he(t),this.h()},l(o){e=R(o,"OPTION",{});var a=T(e);i=fe(a,t),a.forEach(_),this.h()},h(){e.__value=r=n[46],fi(e,e.__value),e.selected=s=n[46]===n[4].getFullYear()},m(o,a){Z(o,e,a),p(e,i)},p(o,a){a[0]&64&&t!==(t=o[46]+"")&&Ee(i,t),a[0]&64&&r!==(r=o[46])&&(e.__value=r,fi(e,e.__value)),a[0]&80&&s!==(s=o[46]===o[4].getFullYear())&&(e.selected=s)},d(o){o&&_(e)}}}function fI(n){let e,t=n[5].weekdays[n[5].weekStartsOn+n[45]-7]+"",i;return{c(){e=A("div"),i=he(t),this.h()},l(r){e=R(r,"DIV",{class:!0});var s=T(e);i=fe(s,t),s.forEach(_),this.h()},h(){g(e,"class","header-cell svelte-w239uu")},m(r,s){Z(r,e,s),p(e,i)},p(r,s){s[0]&32&&t!==(t=r[5].weekdays[r[5].weekStartsOn+r[45]-7]+"")&&Ee(i,t)},d(r){r&&_(e)}}}function dI(n){let e,t=n[5].weekdays[n[5].weekStartsOn+n[45]]+"",i;return{c(){e=A("div"),i=he(t),this.h()},l(r){e=R(r,"DIV",{class:!0});var s=T(e);i=fe(s,t),s.forEach(_),this.h()},h(){g(e,"class","header-cell svelte-w239uu")},m(r,s){Z(r,e,s),p(e,i)},p(r,s){s[0]&32&&t!==(t=r[5].weekdays[r[5].weekStartsOn+r[45]]+"")&&Ee(i,t)},d(r){r&&_(e)}}}function fg(n){let e;function t(s,o){return s[45]+s[5].weekStartsOn<7?dI:fI}let i=t(n),r=i(n);return{c(){r.c(),e=dt()},l(s){r.l(s),e=dt()},m(s,o){r.m(s,o),Z(s,e,o)},p(s,o){i===(i=t(s))&&r?r.p(s,o):(r.d(1),r=i(s),r&&(r.c(),r.m(e.parentNode,e)))},d(s){s&&_(e),r.d(s)}}}function dg(n){let e,t,i=n[41].number+"",r,s,o;function a(){return n[29](n[41])}return{c(){e=A("div"),t=A("span"),r=he(i),this.h()},l(l){e=R(l,"DIV",{class:!0});var h=T(e);t=R(h,"SPAN",{class:!0});var d=T(t);r=fe(d,i),d.forEach(_),h.forEach(_),this.h()},h(){g(t,"class","svelte-w239uu"),g(e,"class","cell svelte-w239uu"),Tn(e,"disabled",!Lf(n[41],n[2],n[3])||n[12](n[41])),Tn(e,"selected",n[0]&&n[41].year===n[0].getFullYear()&&n[41].month===n[0].getMonth()&&n[41].number===n[0].getDate()),Tn(e,"today",n[41].year===n[11].getFullYear()&&n[41].month===n[11].getMonth()&&n[41].number===n[11].getDate()),Tn(e,"other-month",n[41].month!==n[8])},m(l,h){Z(l,e,h),p(e,t),p(t,r),s||(o=nt(e,"click",a),s=!0)},p(l,h){n=l,h[0]&128&&i!==(i=n[41].number+"")&&Ee(r,i),h[0]&4236&&Tn(e,"disabled",!Lf(n[41],n[2],n[3])||n[12](n[41])),h[0]&129&&Tn(e,"selected",n[0]&&n[41].year===n[0].getFullYear()&&n[41].month===n[0].getMonth()&&n[41].number===n[0].getDate()),h[0]&2176&&Tn(e,"today",n[41].year===n[11].getFullYear()&&n[41].month===n[11].getMonth()&&n[41].number===n[11].getDate()),h[0]&384&&Tn(e,"other-month",n[41].month!==n[8])},d(l){l&&_(e),s=!1,o()}}}function gg(n){let e,t=Bt(n[7].slice(n[40]*7,n[40]*7+7)),i=[];for(let r=0;r<t.length;r+=1)i[r]=dg(ng(n,t,r));return{c(){e=A("div");for(let r=0;r<i.length;r+=1)i[r].c();this.h()},l(r){e=R(r,"DIV",{class:!0});var s=T(e);for(let o=0;o<i.length;o+=1)i[o].l(s);s.forEach(_),this.h()},h(){g(e,"class","week svelte-w239uu")},m(r,s){Z(r,e,s);for(let o=0;o<i.length;o+=1)i[o]&&i[o].m(e,null)},p(r,s){if(s[0]&39309){t=Bt(r[7].slice(r[40]*7,r[40]*7+7));let o;for(o=0;o<t.length;o+=1){const a=ng(r,t,o);i[o]?i[o].p(a,s):(i[o]=dg(a),i[o].c(),i[o].m(e,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=t.length}},d(r){r&&_(e),ui(i,r)}}}function gI(n){let e,t,i,r,s='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="svelte-w239uu"><path d="M5 3l3.057-3 11.943 12-11.943 12-3.057-3 9-9z" transform="rotate(180, 12, 12)"></path></svg>',o,a,l,h,d,m,v,k,w,E,I,M,C,D,O,P,F,V,$='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="svelte-w239uu"><path d="M5 3l3.057-3 11.943 12-11.943 12-3.057-3 9-9z"></path></svg>',G,U,H,j,Q,W,Y,q,ne,J,ge=Bt(n[5].months),ie=[];for(let we=0;we<ge.length;we+=1)ie[we]=lg(ag(n,ge,we));let le=Bt(n[5].months),pe=[];for(let we=0;we<le.length;we+=1)pe[we]=ug(og(n,le,we));let ye=Bt(n[6]),be=[];for(let we=0;we<ye.length;we+=1)be[we]=cg(sg(n,ye,we));let re=Bt(n[6]),me=[];for(let we=0;we<re.length;we+=1)me[we]=hg(rg(n,re,we));let ke=Bt(Array(7)),X=[];for(let we=0;we<ke.length;we+=1)X[we]=fg(ig(n,ke,we));let ue=Bt(Array(6)),_e=[];for(let we=0;we<ue.length;we+=1)_e[we]=gg(tg(n,ue,we));function oe(we){n[30](we)}let ae={timePrecision:n[1],setTime:n[10]};n[4]!==void 0&&(ae.browseDate=n[4]),Q=new lI({props:ae}),un.push(()=>jn(Q,"browseDate",oe));const Se=n[23].default,Me=Jl(Se,n,n[22],null);return{c(){e=A("div"),t=A("div"),i=A("div"),r=A("button"),r.innerHTML=s,o=ee(),a=A("div"),l=A("select");for(let we=0;we<ie.length;we+=1)ie[we].c();h=ee(),d=A("select");for(let we=0;we<pe.length;we+=1)pe[we].c();m=ee(),v=Re("svg"),k=Re("path"),w=ee(),E=A("div"),I=A("select");for(let we=0;we<be.length;we+=1)be[we].c();M=ee(),C=A("select");for(let we=0;we<me.length;we+=1)me[we].c();D=ee(),O=Re("svg"),P=Re("path"),F=ee(),V=A("button"),V.innerHTML=$,G=ee(),U=A("div");for(let we=0;we<X.length;we+=1)X[we].c();H=ee();for(let we=0;we<_e.length;we+=1)_e[we].c();j=ee(),st(Q.$$.fragment),Y=ee(),Me&&Me.c(),this.h()},l(we){e=R(we,"DIV",{class:!0,tabindex:!0});var Te=T(e);t=R(Te,"DIV",{class:!0,tabindex:!0});var Ae=T(t);i=R(Ae,"DIV",{class:!0});var Ne=T(i);r=R(Ne,"BUTTON",{type:!0,"aria-label":!0,class:!0,tabindex:!0,"data-svelte-h":!0}),rn(r)!=="svelte-v2azqq"&&(r.innerHTML=s),o=te(Ne),a=R(Ne,"DIV",{class:!0});var De=T(a);l=R(De,"SELECT",{class:!0});var _t=T(l);for(let ze=0;ze<ie.length;ze+=1)ie[ze].l(_t);_t.forEach(_),h=te(De),d=R(De,"SELECT",{class:!0,tabindex:!0});var Fe=T(d);for(let ze=0;ze<pe.length;ze+=1)pe[ze].l(Fe);Fe.forEach(_),m=te(De),v=Oe(De,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0,class:!0});var Pe=T(v);k=Oe(Pe,"path",{d:!0,transform:!0}),T(k).forEach(_),Pe.forEach(_),De.forEach(_),w=te(Ne),E=R(Ne,"DIV",{class:!0});var je=T(E);I=R(je,"SELECT",{class:!0});var Ve=T(I);for(let ze=0;ze<be.length;ze+=1)be[ze].l(Ve);Ve.forEach(_),M=te(je),C=R(je,"SELECT",{class:!0,tabindex:!0});var Ue=T(C);for(let ze=0;ze<me.length;ze+=1)me[ze].l(Ue);Ue.forEach(_),D=te(je),O=Oe(je,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0,class:!0});var Ke=T(O);P=Oe(Ke,"path",{d:!0,transform:!0}),T(P).forEach(_),Ke.forEach(_),je.forEach(_),F=te(Ne),V=R(Ne,"BUTTON",{type:!0,"aria-label":!0,class:!0,tabindex:!0,"data-svelte-h":!0}),rn(V)!=="svelte-ft7e2n"&&(V.innerHTML=$),Ne.forEach(_),G=te(Ae),U=R(Ae,"DIV",{class:!0});var We=T(U);for(let ze=0;ze<X.length;ze+=1)X[ze].l(We);We.forEach(_),H=te(Ae);for(let ze=0;ze<_e.length;ze+=1)_e[ze].l(Ae);j=te(Ae),ot(Q.$$.fragment,Ae),Y=te(Ae),Me&&Me.l(Ae),Ae.forEach(_),Te.forEach(_),this.h()},h(){g(r,"type","button"),g(r,"aria-label","Previous month"),g(r,"class","page-button svelte-w239uu"),g(r,"tabindex","-1"),g(l,"class","svelte-w239uu"),g(d,"class","dummy-select svelte-w239uu"),g(d,"tabindex","-1"),g(k,"d","M6 0l12 12-12 12z"),g(k,"transform","rotate(90, 12, 12)"),g(v,"xmlns","http://www.w3.org/2000/svg"),g(v,"width","24"),g(v,"height","24"),g(v,"viewBox","0 0 24 24"),g(v,"class","svelte-w239uu"),g(a,"class","dropdown month svelte-w239uu"),g(I,"class","svelte-w239uu"),g(C,"class","dummy-select svelte-w239uu"),g(C,"tabindex","-1"),g(P,"d","M6 0l12 12-12 12z"),g(P,"transform","rotate(90, 12, 12)"),g(O,"xmlns","http://www.w3.org/2000/svg"),g(O,"width","24"),g(O,"height","24"),g(O,"viewBox","0 0 24 24"),g(O,"class","svelte-w239uu"),g(E,"class","dropdown year svelte-w239uu"),g(V,"type","button"),g(V,"aria-label","Next month"),g(V,"class","page-button svelte-w239uu"),g(V,"tabindex","-1"),g(i,"class","top svelte-w239uu"),g(U,"class","header svelte-w239uu"),g(t,"class","tab-container svelte-w239uu"),g(t,"tabindex","-1"),g(e,"class","date-time-picker svelte-w239uu"),g(e,"tabindex","0")},m(we,Te){Z(we,e,Te),p(e,t),p(t,i),p(i,r),p(i,o),p(i,a),p(a,l);for(let Ae=0;Ae<ie.length;Ae+=1)ie[Ae]&&ie[Ae].m(l,null);Cs(l,n[8]),p(a,h),p(a,d);for(let Ae=0;Ae<pe.length;Ae+=1)pe[Ae]&&pe[Ae].m(d,null);p(a,m),p(a,v),p(v,k),p(i,w),p(i,E),p(E,I);for(let Ae=0;Ae<be.length;Ae+=1)be[Ae]&&be[Ae].m(I,null);Cs(I,n[9]),p(E,M),p(E,C);for(let Ae=0;Ae<me.length;Ae+=1)me[Ae]&&me[Ae].m(C,null);p(E,D),p(E,O),p(O,P),p(i,F),p(i,V),p(t,G),p(t,U);for(let Ae=0;Ae<X.length;Ae+=1)X[Ae]&&X[Ae].m(U,null);p(t,H);for(let Ae=0;Ae<_e.length;Ae+=1)_e[Ae]&&_e[Ae].m(t,null);p(t,j),at(Q,t,null),p(t,Y),Me&&Me.m(t,null),q=!0,ne||(J=[nt(r,"click",n[25]),nt(l,"keydown",n[17]),nt(l,"input",n[26]),nt(I,"input",n[27]),nt(I,"keydown",n[16]),nt(V,"click",n[28]),nt(e,"focusout",n[24]),nt(e,"keydown",n[18])],ne=!0)},p(we,Te){if(Te[0]&556){ge=Bt(we[5].months);let Ne;for(Ne=0;Ne<ge.length;Ne+=1){const De=ag(we,ge,Ne);ie[Ne]?ie[Ne].p(De,Te):(ie[Ne]=lg(De),ie[Ne].c(),ie[Ne].m(l,null))}for(;Ne<ie.length;Ne+=1)ie[Ne].d(1);ie.length=ge.length}if((!q||Te[0]&256)&&Cs(l,we[8]),Te[0]&288){le=Bt(we[5].months);let Ne;for(Ne=0;Ne<le.length;Ne+=1){const De=og(we,le,Ne);pe[Ne]?pe[Ne].p(De,Te):(pe[Ne]=ug(De),pe[Ne].c(),pe[Ne].m(d,null))}for(;Ne<pe.length;Ne+=1)pe[Ne].d(1);pe.length=le.length}if(Te[0]&64){ye=Bt(we[6]);let Ne;for(Ne=0;Ne<ye.length;Ne+=1){const De=sg(we,ye,Ne);be[Ne]?be[Ne].p(De,Te):(be[Ne]=cg(De),be[Ne].c(),be[Ne].m(I,null))}for(;Ne<be.length;Ne+=1)be[Ne].d(1);be.length=ye.length}if((!q||Te[0]&576)&&Cs(I,we[9]),Te[0]&80){re=Bt(we[6]);let Ne;for(Ne=0;Ne<re.length;Ne+=1){const De=rg(we,re,Ne);me[Ne]?me[Ne].p(De,Te):(me[Ne]=hg(De),me[Ne].c(),me[Ne].m(C,null))}for(;Ne<me.length;Ne+=1)me[Ne].d(1);me.length=re.length}if(Te[0]&32){ke=Bt(Array(7));let Ne;for(Ne=0;Ne<ke.length;Ne+=1){const De=ig(we,ke,Ne);X[Ne]?X[Ne].p(De,Te):(X[Ne]=fg(De),X[Ne].c(),X[Ne].m(U,null))}for(;Ne<X.length;Ne+=1)X[Ne].d(1);X.length=ke.length}if(Te[0]&39309){ue=Bt(Array(6));let Ne;for(Ne=0;Ne<ue.length;Ne+=1){const De=tg(we,ue,Ne);_e[Ne]?_e[Ne].p(De,Te):(_e[Ne]=gg(De),_e[Ne].c(),_e[Ne].m(t,j))}for(;Ne<_e.length;Ne+=1)_e[Ne].d(1);_e.length=ue.length}const Ae={};Te[0]&2&&(Ae.timePrecision=we[1]),!W&&Te[0]&16&&(W=!0,Ae.browseDate=we[4],Yn(()=>W=!1)),Q.$set(Ae),Me&&Me.p&&(!q||Te[0]&4194304)&&Ql(Me,Se,we,we[22],q?tu(Se,we[22],Te,null):eu(we[22]),null)},i(we){q||(de(Q.$$.fragment,we),de(Me,we),q=!0)},o(we){Ie(Q.$$.fragment,we),Ie(Me,we),q=!1},d(we){we&&_(e),ui(ie,we),ui(pe,we),ui(be,we),ui(me,we),ui(X,we),ui(_e,we),lt(Q),Me&&Me.d(we),ne=!1,Bn(J)}}}function Lf(n,e,t){const i=new Date(n.year,n.month,n.number),r=new Date(e.getFullYear(),e.getMonth(),e.getDate()),s=new Date(t.getFullYear(),t.getMonth(),t.getDate());return i>=r&&i<=s}function mI(n,e,t){let i,r,s,o,{$$slots:a={},$$scope:l}=e;const h=Ha();let{value:d=null}=e;function m(re){re.getTime()!==(d==null?void 0:d.getTime())&&(t(4,P=ka(d??P,re,M,C,D)),eg(P,I),t(0,d=ps(P)))}function v(re){t(4,P=Vc(re,M,C)),!U&&d&&m(P)}function k(re){return t(4,P=h0(re,M,C)),d&&m(P),P}const w=new Date,E=new Date;let{timePrecision:I=null}=e,{min:M=new Date(E.getFullYear()-20,0,1)}=e,{max:C=new Date(E.getFullYear(),11,31,23,59,59,999)}=e,{isDisabledDate:D=null}=e;function O(re){return D==null?void 0:D(new Date(re.year,re.month,re.number))}let P=ps(d||Vc(E,M,C));function F(re){P.getTime()!==(re==null?void 0:re.getTime())&&(t(4,P=re?ps(re):P),eg(P,I))}let V=$(M,C);function $(re,me){let ke=[];for(let X=re.getFullYear();X<=me.getFullYear();X++)ke.push(X);return ke}let{locale:G={}}=e,{browseWithoutSelecting:U=!1}=e;function H(re){P.setFullYear(re),v(P)}function j(re){let me=P.getFullYear();re===12?(re=0,me++):re===-1&&(re=11,me--);const ke=jl(me,re),X=Math.min(P.getDate(),ke);v(new Date(me,re,X,P.getHours(),P.getMinutes(),P.getSeconds(),P.getMilliseconds()))}function Q(re){Lf(re,M,C)&&!O(re)&&(P.setFullYear(0),P.setMonth(0),P.setDate(1),P.setFullYear(re.year),P.setMonth(re.month),P.setDate(re.number),m(P),h("select",ps(P)))}function W(re){if(re.shiftKey&&re.key==="ArrowUp")H(P.getFullYear()-1);else if(re.shiftKey&&re.key==="ArrowDown")H(P.getFullYear()+1);else if(re.shiftKey&&re.key==="ArrowLeft")j(P.getMonth()-1);else if(re.shiftKey&&re.key==="ArrowRight")j(P.getMonth()+1);else return!1;return re.preventDefault(),!0}function Y(re){if(re.shiftKey||re.altKey){W(re);return}else if(re.key==="ArrowUp")H(P.getFullYear()-1);else if(re.key==="ArrowDown")H(P.getFullYear()+1);else if(re.key==="ArrowLeft")j(P.getMonth()-1);else if(re.key==="ArrowRight")j(P.getMonth()+1);else{W(re);return}re.preventDefault()}function q(re){if(re.shiftKey||re.altKey){W(re);return}else if(re.key==="ArrowUp"||re.key==="ArrowLeft")j(P.getMonth()-1);else if(re.key==="ArrowDown"||re.key==="ArrowRight")j(P.getMonth()+1);else{W(re);return}re.preventDefault()}function ne(re){var ke,X;let me=re.shiftKey||re.altKey;if(!(((ke=re.target)==null?void 0:ke.tagName)==="SELECT"||((X=re.target)==null?void 0:X.tagName)==="SPAN")){if(me){W(re);return}else if(re.key==="ArrowUp")P.setDate(P.getDate()-7),m(P);else if(re.key==="ArrowDown")P.setDate(P.getDate()+7),m(P);else if(re.key==="ArrowLeft")P.setDate(P.getDate()-1),m(P);else if(re.key==="ArrowRight")P.setDate(P.getDate()+1),m(P);else if(re.key==="Enter")m(P),h("select",ps(P));else return;re.preventDefault()}}function J(re){tf.call(this,n,re)}const ge=()=>j(P.getMonth()-1),ie=re=>j(parseInt(re.currentTarget.value)),le=re=>H(parseInt(re.currentTarget.value)),pe=()=>j(P.getMonth()+1),ye=re=>Q(re);function be(re){P=re,t(4,P)}return n.$$set=re=>{"value"in re&&t(0,d=re.value),"timePrecision"in re&&t(1,I=re.timePrecision),"min"in re&&t(2,M=re.min),"max"in re&&t(3,C=re.max),"isDisabledDate"in re&&t(19,D=re.isDisabledDate),"locale"in re&&t(20,G=re.locale),"browseWithoutSelecting"in re&&t(21,U=re.browseWithoutSelecting),"$$scope"in re&&t(22,l=re.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&524317&&(d&&d>C?m(ka(d,C,M,C,D)):d&&d<M?m(ka(d,M,M,C,D)):d&&(D!=null&&D(d))&&m(ka(P,d,M,C,D))),n.$$.dirty[0]&1&&F(d),n.$$.dirty[0]&12&&t(6,V=$(M,C)),n.$$.dirty[0]&1048576&&t(5,i=K3(G)),n.$$.dirty[0]&16&&t(9,r=P.getFullYear()),n.$$.dirty[0]&16&&t(8,s=P.getMonth()),n.$$.dirty[0]&48&&t(7,o=cI(P,i.weekStartsOn))},[d,I,M,C,P,i,V,o,s,r,k,w,O,H,j,Q,Y,q,ne,D,G,U,l,a,J,ge,ie,le,pe,ye,be]}class J3 extends Wt{constructor(e){super(),Xt(this,e,mI,gI,zt,{value:0,timePrecision:1,min:2,max:3,isDisabledDate:19,locale:20,browseWithoutSelecting:21},null,[-1,-1])}}function _I(n){return n<.5?4*n*n*n:.5*Math.pow(2*n-2,3)+1}function pI(n){const e=n-1;return e*e*e+1}function vI(n){return--n*n*n*n*n+1}function yI(n,{delay:e=0,duration:t=400,easing:i=pI,x:r=0,y:s=0,opacity:o=0}={}){const a=getComputedStyle(n),l=+a.opacity,h=a.transform==="none"?"":a.transform,d=l*(1-o),[m,v]=D0(r),[k,w]=D0(s);return{delay:e,duration:t,easing:i,css:(E,I)=>`
			transform: ${h} translate(${(1-E)*m}${v}, ${(1-E)*k}${w});
			opacity: ${l-d*I}`}}function mg(n,e,t){let i="",r=!0;t=t||new Date(new Date().getFullYear(),0,1,0,0,0,0);let s=t.getFullYear(),o=t.getMonth(),a=t.getDate(),l=t.getHours(),h=t.getMinutes(),d=t.getSeconds();const m=t.getMilliseconds();function v(M){for(let C=0;C<M.length;C++)if(n.startsWith(M[C]))n=n.slice(1);else{r=!1,n.length===0&&(i=M.slice(C));return}}function k(M,C,D){const O=n.match(M);if(O!=null&&O[0]){n=n.slice(O[0].length);const P=parseInt(O[0]);return P>D||P<C?(r=!1,null):P}else return r=!1,null}function w(M){const C=M.findIndex(D=>D.toLowerCase()===n.slice(0,D.length).toLowerCase());return C>=0?(n=n.slice(M[C].length),C):(r=!1,null)}function E(M){if(typeof M=="string")v(M);else if(M.id==="yy"){const C=k(/^[0-9]{2}/,0,99);C!==null&&(s=2e3+C)}else if(M.id==="yyyy"){const C=k(/^[0-9]{4}/,0,9999);C!==null&&(s=C)}else if(M.id==="MM"){const C=k(/^[0-9]{2}/,1,12);C!==null&&(o=C-1)}else if(M.id==="MMM"){const C=w(M.allowedValues||[]);C!==null&&(o=C)}else if(M.id==="dd"){const C=k(/^[0-9]{2}/,1,31);C!==null&&(a=C)}else if(M.id==="HH"){const C=k(/^[0-9]{2}/,0,23);C!==null&&(l=C)}else if(M.id==="mm"){const C=k(/^[0-9]{2}/,0,59);C!==null&&(h=C)}else if(M.id==="ss"){const C=k(/^[0-9]{2}/,0,59);C!==null&&(d=C)}}for(const M of e)if(E(M),!r)break;const I=jl(s,o);return a>I&&(r=!1),{date:r?new Date(s,o,a,l,h,d,m):null,missingPunctuation:i}}function fl(n){return("0"+n.toString()).slice(-2)}function bI(n,e){if(n.startsWith("yyyy"))return{id:"yyyy",toString:t=>t.getFullYear().toString()};if(n.startsWith("yy"))return{id:"yy",toString:t=>t.getFullYear().toString().slice(-2)};if(n.startsWith("MMM"))return{id:"MMM",allowedValues:e.shortMonths,toString:t=>e.shortMonths[t.getMonth()]};if(n.startsWith("MM"))return{id:"MM",toString:t=>fl(t.getMonth()+1)};if(n.startsWith("dd"))return{id:"dd",toString:t=>fl(t.getDate())};if(n.startsWith("HH"))return{id:"HH",toString:t=>fl(t.getHours())};if(n.startsWith("mm"))return{id:"mm",toString:t=>fl(t.getMinutes())};if(n.startsWith("ss"))return{id:"ss",toString:t=>fl(t.getSeconds())}}function _g(n,e={}){const t=K3(e),i=[];for(;n.length>0;){const r=bI(n,t);r?(i.push(r),n=n.slice(r.id.length)):typeof i[i.length-1]=="string"?(i[i.length-1]+=n[0],n=n.slice(1)):(i.push(n[0]),n=n.slice(1))}return i}function pg(n){let e,t,i,r,s=`${n[19]}px`,o;function a(h){n[35](h)}let l={min:n[3],max:n[4],locale:n[10],browseWithoutSelecting:n[11],timePrecision:n[12],isDisabledDate:n[13],$$slots:{default:[wI]},$$scope:{ctx:n}};return n[15]!==void 0&&(l.value=n[15]),t=new J3({props:l}),un.push(()=>jn(t,"value",a)),t.$on("focusout",n[22]),t.$on("select",n[24]),{c(){e=A("div"),st(t.$$.fragment),this.h()},l(h){e=R(h,"DIV",{class:!0});var d=T(e);ot(t.$$.fragment,d),d.forEach(_),this.h()},h(){g(e,"class","picker svelte-1vabmef"),Tn(e,"visible",n[2]),Tn(e,"above",n[18]),B(e,"--picker-left-position",s)},m(h,d){Z(h,e,d),at(t,e,null),n[36](e),o=!0},p(h,d){const m={};d[0]&8&&(m.min=h[3]),d[0]&16&&(m.max=h[4]),d[0]&1024&&(m.locale=h[10]),d[0]&2048&&(m.browseWithoutSelecting=h[11]),d[0]&4096&&(m.timePrecision=h[12]),d[0]&8192&&(m.isDisabledDate=h[13]),d[1]&64&&(m.$$scope={dirty:d,ctx:h}),!i&&d[0]&32768&&(i=!0,m.value=h[15],Yn(()=>i=!1)),t.$set(m),(!o||d[0]&4)&&Tn(e,"visible",h[2]),(!o||d[0]&262144)&&Tn(e,"above",h[18]),d[0]&524288&&s!==(s=`${h[19]}px`)&&B(e,"--picker-left-position",s)},i(h){o||(de(t.$$.fragment,h),h&&Wc(()=>{o&&(r||(r=R0(e,n[25],{},!0)),r.run(1))}),o=!0)},o(h){Ie(t.$$.fragment,h),h&&(r||(r=R0(e,n[25],{},!1)),r.run(0)),o=!1},d(h){h&&_(e),lt(t),n[36](null),h&&r&&r.end()}}}function wI(n){let e;const t=n[30].default,i=Jl(t,n,n[37],null);return{c(){i&&i.c()},l(r){i&&i.l(r)},m(r,s){i&&i.m(r,s),e=!0},p(r,s){i&&i.p&&(!e||s[1]&64)&&Ql(i,t,r,r[37],e?tu(t,r[37],s,null):eu(r[37]),null)},i(r){e||(de(i,r),e=!0)},o(r){Ie(i,r),e=!1},d(r){i&&i.d(r)}}}function kI(n){let e,t,i,r,s,o,a,l=n[2]&&!n[7]&&pg(n);return{c(){e=A("div"),t=A("input"),i=ee(),l&&l.c(),this.h()},l(h){e=R(h,"DIV",{class:!0});var d=T(e);t=R(d,"INPUT",{type:!0,autocomplete:!0,id:!0,placeholder:!0,class:!0}),i=te(d),l&&l.l(d),d.forEach(_),this.h()},h(){g(t,"type","text"),g(t,"autocomplete","off"),t.value=n[0],g(t,"id",n[5]),g(t,"placeholder",n[6]),t.disabled=n[7],t.required=n[8],g(t,"class","svelte-1vabmef"),Tn(t,"invalid",!n[1]),g(e,"class",r="date-time-field "+n[9]+" svelte-1vabmef")},m(h,d){Z(h,e,d),p(e,t),n[31](t),p(e,i),l&&l.m(e,null),s=!0,o||(a=[nt(t,"focus",n[32]),nt(t,"mousedown",n[33]),nt(t,"input",n[34]),nt(e,"focusout",n[22]),nt(e,"keydown",n[23])],o=!0)},p(h,d){(!s||d[0]&1&&t.value!==h[0])&&(t.value=h[0]),(!s||d[0]&32)&&g(t,"id",h[5]),(!s||d[0]&64)&&g(t,"placeholder",h[6]),(!s||d[0]&128)&&(t.disabled=h[7]),(!s||d[0]&256)&&(t.required=h[8]),(!s||d[0]&2)&&Tn(t,"invalid",!h[1]),h[2]&&!h[7]?l?(l.p(h,d),d[0]&132&&de(l,1)):(l=pg(h),l.c(),de(l,1),l.m(e,null)):l&&(bt(),Ie(l,1,1,()=>{l=null}),wt()),(!s||d[0]&512&&r!==(r="date-time-field "+h[9]+" svelte-1vabmef"))&&g(e,"class",r)},i(h){s||(de(l),s=!0)},o(h){Ie(l),s=!1},d(h){h&&_(e),n[31](null),l&&l.d(),o=!1,Bn(a)}}}function EI(n,e,t){let i,r,{$$slots:s={},$$scope:o}=e;const a=Ha(),l=new Date,h=Pn(null);He(n,h,oe=>t(38,r=oe));const d={subscribe:h.subscribe,set:oe=>{oe==null?(h.set(null),t(26,m=oe)):(oe.getTime()!==(r==null?void 0:r.getTime())||oe.getTime()!==(m==null?void 0:m.getTime()))&&(h.set(ps(oe)),t(26,m=oe))}};He(n,d,oe=>t(15,i=oe));let{value:m=null}=e,{min:v=new Date(l.getFullYear()-20,0,1)}=e,{max:k=new Date(l.getFullYear(),11,31,23,59,59,999)}=e,{id:w=null}=e,{placeholder:E="2020-12-31 23:00:00"}=e,{valid:I=!0}=e,{disabled:M=!1}=e,{required:C=!1}=e,{class:D=""}=e,{locale:O={}}=e,{format:P="yyyy-MM-dd HH:mm:ss"}=e,F=_g(P,O);function V(oe,ae){t(0,$=Q2(oe,ae))}let{text:$=Q2(i,F)}=e;function G(oe,ae){if(oe.length){const Se=mg(oe,ae,i);Se.date!==null?(t(1,I=!0),d.set(ka(l,Se.date,v,k,W))):t(1,I=!1)}else t(1,I=!0),m&&(t(26,m=null),d.set(null))}let{visible:U=!1}=e,{closeOnSelection:H=!1}=e,{browseWithoutSelecting:j=!1}=e,{timePrecision:Q=null}=e,{isDisabledDate:W=null}=e;function Y(oe){(oe==null?void 0:oe.currentTarget)instanceof HTMLElement&&oe.relatedTarget&&oe.relatedTarget instanceof Node&&oe.currentTarget.contains(oe.relatedTarget)||t(2,U=!1)}function q(oe){oe.key==="Escape"&&U?(t(2,U=!1),oe.preventDefault(),oe.stopPropagation()):oe.key==="Enter"&&(t(2,U=!U),oe.preventDefault())}function ne(oe){a("select",oe.detail),H&&t(2,U=!1)}let{dynamicPositioning:J=!1}=e,ge,ie,le=!1,pe=null;function ye(){if(t(18,le=!1),t(19,pe=null),U&&ie&&J){const oe=ge.getBoundingClientRect(),ae=ie.offsetWidth-oe.width,Se=oe.bottom+ie.offsetHeight+5,Me=oe.left+ie.offsetWidth+5;if(Se>window.innerHeight&&t(18,le=!0),Me>window.innerWidth&&(t(19,pe=-ae),oe.left<ae+5)){const Te=window.innerWidth/2-ie.offsetWidth/2;t(19,pe=Te-oe.left)}}}function be(oe){return ye(),yI(oe,{duration:200,easing:_I,y:le?5:-5})}function re(oe){un[oe?"unshift":"push"](()=>{ge=oe,t(16,ge)})}const me=()=>t(2,U=!0),ke=()=>t(2,U=!0),X=oe=>{if(oe instanceof InputEvent&&oe.inputType==="insertText"&&typeof oe.data=="string"&&oe.currentTarget.value===$+oe.data){let ae=mg($,F,i);if(ae.missingPunctuation!==""&&!ae.missingPunctuation.startsWith(oe.data)){t(0,$=$+ae.missingPunctuation+oe.data);return}}t(0,$=oe.currentTarget.value)};function ue(oe){i=oe,d.set(i)}function _e(oe){un[oe?"unshift":"push"](()=>{ie=oe,t(17,ie)})}return n.$$set=oe=>{"value"in oe&&t(26,m=oe.value),"min"in oe&&t(3,v=oe.min),"max"in oe&&t(4,k=oe.max),"id"in oe&&t(5,w=oe.id),"placeholder"in oe&&t(6,E=oe.placeholder),"valid"in oe&&t(1,I=oe.valid),"disabled"in oe&&t(7,M=oe.disabled),"required"in oe&&t(8,C=oe.required),"class"in oe&&t(9,D=oe.class),"locale"in oe&&t(10,O=oe.locale),"format"in oe&&t(27,P=oe.format),"text"in oe&&t(0,$=oe.text),"visible"in oe&&t(2,U=oe.visible),"closeOnSelection"in oe&&t(28,H=oe.closeOnSelection),"browseWithoutSelecting"in oe&&t(11,j=oe.browseWithoutSelecting),"timePrecision"in oe&&t(12,Q=oe.timePrecision),"isDisabledDate"in oe&&t(13,W=oe.isDisabledDate),"dynamicPositioning"in oe&&t(29,J=oe.dynamicPositioning),"$$scope"in oe&&t(37,o=oe.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&67117080&&d.set(m&&ka(l,m,v,k,W)),n.$$.dirty[0]&134218752&&t(14,F=_g(P,O)),n.$$.dirty[0]&49152&&V(i,F),n.$$.dirty[0]&16385&&G($,F)},[$,I,U,v,k,w,E,M,C,D,O,j,Q,W,F,i,ge,ie,le,pe,h,d,Y,q,ne,be,m,P,H,J,s,re,me,ke,X,ue,_e,o]}class zc extends Wt{constructor(e){super(),Xt(this,e,EI,kI,zt,{value:26,min:3,max:4,id:5,placeholder:6,valid:1,disabled:7,required:8,class:9,locale:10,format:27,text:0,visible:2,closeOnSelection:28,browseWithoutSelecting:11,timePrecision:12,isDisabledDate:13,dynamicPositioning:29},null,[-1,-1])}}function SI(n){let e,t,i=!1,r,s,o,a,l,h,d,m,v,k;return m=N4(n[15][0]),{c(){e=A("label"),t=A("input"),s=ee(),o=A("span"),l=ee(),h=he(n[7]),this.h()},l(w){e=R(w,"LABEL",{id:!0,class:!0,style:!0,for:!0});var E=T(e);t=R(E,"INPUT",{type:!0,id:!0,name:!0,class:!0,style:!0}),s=te(E),o=R(E,"SPAN",{class:!0,style:!0}),T(o).forEach(_),l=te(E),h=fe(E,n[7]),E.forEach(_),this.h()},h(){g(t,"type","radio"),g(t,"id",n[10]),g(t,"name",n[11]),t.__value=n[8],fi(t,t.__value),t.disabled=n[9],g(t,"class",r=Ui(n[1])+" svelte-n3oqbw"),g(t,"style",n[2]),g(o,"class",a=Ui("checkmark "+n[3])+" svelte-n3oqbw"),g(o,"style",n[4]),g(e,"id","radio-label"),g(e,"class",d=Ui(n[5])+" svelte-n3oqbw"),g(e,"style",n[6]),g(e,"for",n[12]),m.p(t)},m(w,E){Z(w,e,E),p(e,t),t.checked=t.__value===n[0],p(e,s),p(e,o),p(e,l),p(e,h),v||(k=[nt(t,"change",n[14]),nt(t,"change",n[13])],v=!0)},p(w,[E]){E&1024&&g(t,"id",w[10]),E&2048&&g(t,"name",w[11]),E&256&&(t.__value=w[8],fi(t,t.__value),i=!0),E&512&&(t.disabled=w[9]),E&2&&r!==(r=Ui(w[1])+" svelte-n3oqbw")&&g(t,"class",r),E&4&&g(t,"style",w[2]),(i||E&1)&&(t.checked=t.__value===w[0]),E&8&&a!==(a=Ui("checkmark "+w[3])+" svelte-n3oqbw")&&g(o,"class",a),E&16&&g(o,"style",w[4]),E&128&&Ee(h,w[7]),E&32&&d!==(d=Ui(w[5])+" svelte-n3oqbw")&&g(e,"class",d),E&64&&g(e,"style",w[6])},i:$e,o:$e,d(w){w&&_(e),m.r(),v=!1,Bn(k)}}}function II(n,e,t){let{radioClass:i=""}=e,{radioStyle:r=""}=e,{checkmarkClass:s=""}=e,{checkmarkStyle:o=""}=e,{labelClass:a=""}=e,{labelStyle:l=""}=e,{label:h=""}=e,{value:d}=e,{group:m}=e,{disabled:v=!1}=e,{id:k=void 0}=e,{name:w=void 0}=e;const E=k||`radio-${Math.random().toString(36).substring(2,9)}`,I=Ha();function M(){I("change",m)}const C=[[]];function D(){m=this.__value,t(0,m)}return n.$$set=O=>{"radioClass"in O&&t(1,i=O.radioClass),"radioStyle"in O&&t(2,r=O.radioStyle),"checkmarkClass"in O&&t(3,s=O.checkmarkClass),"checkmarkStyle"in O&&t(4,o=O.checkmarkStyle),"labelClass"in O&&t(5,a=O.labelClass),"labelStyle"in O&&t(6,l=O.labelStyle),"label"in O&&t(7,h=O.label),"value"in O&&t(8,d=O.value),"group"in O&&t(0,m=O.group),"disabled"in O&&t(9,v=O.disabled),"id"in O&&t(10,k=O.id),"name"in O&&t(11,w=O.name)},[m,i,r,s,o,a,l,h,d,v,k,w,E,M,D,C]}class Wl extends Wt{constructor(e){super(),Xt(this,e,II,SI,zt,{radioClass:1,radioStyle:2,checkmarkClass:3,checkmarkStyle:4,labelClass:5,labelStyle:6,label:7,value:8,group:0,disabled:9,id:10,name:11})}}function MI(n){let e,t,i=bo(n[0].getHours())+"",r,s,o,a,l=":",h,d,m=bo(n[0].getMinutes())+"",v,k,w,E;return{c(){e=A("div"),t=A("span"),r=he(i),o=ee(),a=A("span"),a.textContent=l,h=ee(),d=A("span"),v=he(m),this.h()},l(I){e=R(I,"DIV",{class:!0});var M=T(e);t=R(M,"SPAN",{role:!0,"aria-label":!0,tabindex:!0,contenteditable:!0,inputmode:!0,id:!0,style:!0,class:!0});var C=T(t);r=fe(C,i),C.forEach(_),o=te(M),a=R(M,"SPAN",{"data-svelte-h":!0}),rn(a)!=="svelte-5vnx5k"&&(a.textContent=l),h=te(M),d=R(M,"SPAN",{role:!0,"aria-label":!0,tabindex:!0,contenteditable:!0,inputmode:!0,id:!0,style:!0,class:!0});var D=T(d);v=fe(D,m),D.forEach(_),M.forEach(_),this.h()},h(){g(t,"role","spinbutton"),g(t,"aria-label","Hours"),g(t,"tabindex","0"),g(t,"contenteditable",""),g(t,"inputmode","numeric"),g(t,"id",s=n[1]+"-hour"),B(t,"width","50px"),B(t,"display","inline-block"),B(t,"text-align","center"),g(t,"class","svelte-1htdkq6"),g(d,"role","spinbutton"),g(d,"aria-label","Minutes"),g(d,"tabindex","0"),g(d,"contenteditable",""),g(d,"inputmode","numeric"),g(d,"id",k=n[1]+"-minute"),B(d,"width","50px"),B(d,"display","inline-block"),B(d,"text-align","center"),g(d,"class","svelte-1htdkq6"),g(e,"class","row g4 center-cross")},m(I,M){Z(I,e,M),p(e,t),p(t,r),n[8](t),p(e,o),p(e,a),p(e,h),p(e,d),p(d,v),n[12](d),w||(E=[nt(t,"keydown",n[9]),nt(t,"input",n[10]),nt(t,"focus",bg),nt(t,"blur",n[11]),nt(d,"keydown",n[13]),nt(d,"input",n[14]),nt(d,"focus",bg),nt(d,"blur",n[15])],w=!0)},p(I,[M]){M&1&&i!==(i=bo(I[0].getHours())+"")&&Na(r,i),M&2&&s!==(s=I[1]+"-hour")&&g(t,"id",s),M&1&&m!==(m=bo(I[0].getMinutes())+"")&&Na(v,m),M&2&&k!==(k=I[1]+"-minute")&&g(d,"id",k)},i:$e,o:$e,d(I){I&&_(e),n[8](null),n[12](null),w=!1,Bn(E)}}}function bo(n){return("00"+n).slice(-2)}function vg(n,e,t){return Math.max(e,Math.min(t,n))}function yg(n){const e=window.getSelection(),t=document.createRange();t.selectNodeContents(n),t.collapse(!1),e==null||e.removeAllRanges(),e==null||e.addRange(t)}function Q3(n){const e=window.getSelection(),t=document.createRange();t.selectNodeContents(n),e==null||e.removeAllRanges(),e==null||e.addRange(t)}function bg(n){Q3(n.currentTarget)}function TI(n,e,t){let{date:i}=e,{idPrefix:r}=e,{minDate:s}=e;const o=Ha();function a(P,F){let V=i.getHours(),$=i.getMinutes();P==="hour"?V=vg(F,0,23):$=vg(F,0,59);let G=new Date(i);G.setHours(V),G.setMinutes($),s&&G.getTime()<s.getTime()&&(G=new Date(s)),t(0,i=new Date(G)),o("timeChange")}function l(P,F){const V=P.target;let $=V.innerText.replace(/[^\d]/g,"");$.length>2&&($=$.slice(0,2)),V.innerText=$,a(F,parseInt($)||0),yg(V),F==="hour"&&$.length===2&&v&&(v.focus(),Q3(v))}function h(P,F){const V=P.currentTarget;let $=F==="hour"?i.getHours():i.getMinutes();if(P.key==="ArrowUp"||P.key==="ArrowDown"){let G=P.key==="ArrowUp"?1:-1;a(F,$+G),P.preventDefault(),V.innerText=bo(F==="hour"?i.getHours():i.getMinutes()),yg(V)}else P.key.length===1&&!/[0-9]/.test(P.key)&&P.preventDefault()}function d(P,F){const V=P.currentTarget;V.innerText=bo(F==="hour"?i.getHours():i.getMinutes())}let m,v;function k(P){un[P?"unshift":"push"](()=>{m=P,t(2,m),t(0,i),t(3,v)})}const w=P=>h(P,"hour"),E=P=>l(P,"hour"),I=P=>d(P,"hour");function M(P){un[P?"unshift":"push"](()=>{v=P,t(3,v),t(2,m),t(0,i)})}const C=P=>h(P,"minute"),D=P=>l(P,"minute"),O=P=>d(P,"minute");return n.$$set=P=>{"date"in P&&t(0,i=P.date),"idPrefix"in P&&t(1,r=P.idPrefix),"minDate"in P&&t(7,s=P.minDate)},n.$$.update=()=>{n.$$.dirty&13&&(m&&document.activeElement!==m&&t(2,m.innerText=bo(i.getHours()),m),v&&document.activeElement!==v&&t(3,v.innerText=bo(i.getMinutes()),v))},[i,r,m,v,l,h,d,s,k,w,E,I,M,C,D,O]}class Gc extends Wt{constructor(e){super(),Xt(this,e,TI,MI,zt,{date:0,idPrefix:1,minDate:7})}}function wg(n){let e,t=n[19]("knownDrones.serialNumberInvalid")+"",i;return{c(){e=A("p"),i=he(t),this.h()},l(r){e=R(r,"P",{style:!0});var s=T(e);i=fe(s,t),s.forEach(_),this.h()},h(){B(e,"font-size","10px"),B(e,"color","red"),B(e,"margin-top","2px")},m(r,s){Z(r,e,s),p(e,i)},p(r,s){s[0]&524288&&t!==(t=r[19]("knownDrones.serialNumberInvalid")+"")&&Ee(i,t)},d(r){r&&_(e)}}}function LI(n){let e,t,i=n[19]("knownDrones.noPermission")+"",r;return{c(){e=A("div"),t=A("p"),r=he(i),this.h()},l(s){e=R(s,"DIV",{class:!0,style:!0});var o=T(e);t=R(o,"P",{style:!0});var a=T(t);r=fe(a,i),a.forEach(_),o.forEach(_),this.h()},h(){B(t,"color","#f44"),B(t,"font-size","14px"),g(e,"class","row"),B(e,"margin-top","16px")},m(s,o){Z(s,e,o),p(e,t),p(t,r)},p(s,o){o[0]&524288&&i!==(i=s[19]("knownDrones.noPermission")+"")&&Ee(r,i)},i:$e,o:$e,d(s){s&&_(e)}}}function CI(n){let e,t,i=n[19]("knownDrones.identifierLabel")+"",r,s,o,a="*",l,h,d,m,v,k=n[19]("knownDrones.notesLabel")+"",w,E,I,M,C,D,O=n[19]("knownDrones.expiryLabel")+"",P,F,V,$,G,U,H,j,Q,W,Y,q,ne,J,ge,ie,le,pe,ye,be,re,me=n[19]("knownDrones.droneAdded")+"",ke,X,ue,_e;function oe(Pe){n[49](Pe)}let ae={label:n[19]("knownDrones.indefinite"),value:"indefinite",id:"rb-indefinite",name:"expiryOption"};n[17]!==void 0&&(ae.group=n[17]),$=new Wl({props:ae}),un.push(()=>jn($,"group",oe));function Se(Pe){n[50](Pe)}let Me={label:n[19]("knownDrones.fixedTerm"),value:"fixedTerm",id:"rb-fixedTerm",name:"expiryOption"};n[17]!==void 0&&(Me.group=n[17]),H=new Wl({props:Me}),un.push(()=>jn(H,"group",Se));let we=n[17]==="fixedTerm"&&kg(n);function Te(Pe,je){return Pe[20]?NI:PI}let Ae=Te(n),Ne=Ae(n),De=n[24]&&n[25]&&n[26]&&Eg(n),_t=n[23]&&n[23]!==""&&Sg(n),Fe=n[20]&&Ig(n);return{c(){e=A("div"),t=A("label"),r=he(i),s=ee(),o=A("span"),o.textContent=a,l=ee(),h=A("input"),d=ee(),m=A("div"),v=A("label"),w=he(k),E=ee(),I=A("textarea"),M=ee(),C=A("div"),D=A("label"),P=he(O),F=ee(),V=A("div"),st($.$$.fragment),U=ee(),st(H.$$.fragment),Q=ee(),we&&we.c(),W=ee(),Y=A("div"),Ne.c(),q=ee(),De&&De.c(),ne=ee(),_t&&_t.c(),J=ee(),Fe&&Fe.c(),ge=ee(),ie=A("div"),le=A("div"),pe=Re("svg"),ye=Re("path"),be=ee(),re=A("p"),ke=he(me),this.h()},l(Pe){e=R(Pe,"DIV",{});var je=T(e);t=R(je,"LABEL",{for:!0,style:!0});var Ve=T(t);r=fe(Ve,i),s=te(Ve),o=R(Ve,"SPAN",{style:!0,"data-svelte-h":!0}),rn(o)!=="svelte-199aewp"&&(o.textContent=a),Ve.forEach(_),l=te(je),h=R(je,"INPUT",{type:!0,id:!0,class:!0,maxlength:!0}),je.forEach(_),d=te(Pe),m=R(Pe,"DIV",{});var Ue=T(m);v=R(Ue,"LABEL",{for:!0,style:!0});var Ke=T(v);w=fe(Ke,k),Ke.forEach(_),E=te(Ue),I=R(Ue,"TEXTAREA",{id:!0,class:!0,rows:!0,maxlength:!0}),T(I).forEach(_),Ue.forEach(_),M=te(Pe),C=R(Pe,"DIV",{});var We=T(C);D=R(We,"LABEL",{style:!0});var ze=T(D);P=fe(ze,O),ze.forEach(_),F=te(We),V=R(We,"DIV",{class:!0,style:!0});var Et=T(V);ot($.$$.fragment,Et),U=te(Et),ot(H.$$.fragment,Et),Et.forEach(_),Q=te(We),we&&we.l(We),We.forEach(_),W=te(Pe),Y=R(Pe,"DIV",{class:!0});var rt=T(Y);Ne.l(rt),q=te(rt),De&&De.l(rt),ne=te(rt),_t&&_t.l(rt),J=te(rt),Fe&&Fe.l(rt),rt.forEach(_),ge=te(Pe),ie=R(Pe,"DIV",{class:!0,style:!0});var ft=T(ie);le=R(ft,"DIV",{class:!0,style:!0});var Ut=T(le);pe=Oe(Ut,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0,fill:!0});var Qe=T(pe);ye=Oe(Qe,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0}),T(ye).forEach(_),Qe.forEach(_),be=te(Ut),re=R(Ut,"P",{style:!0});var yt=T(re);ke=fe(yt,me),yt.forEach(_),Ut.forEach(_),ft.forEach(_),this.h()},h(){B(o,"color","red"),g(t,"for","identifier-input"),B(t,"font-size","12px"),B(t,"color","#666"),B(t,"cursor","default"),g(h,"type","text"),g(h,"id","identifier-input"),g(h,"class","input-box svelte-rxmkao"),g(h,"maxlength","20"),h.required=!0,g(v,"for","notes-input"),B(v,"font-size","12px"),B(v,"color","#666"),B(v,"cursor","default"),g(I,"id","notes-input"),g(I,"class","input-box svelte-rxmkao"),g(I,"rows","3"),g(I,"maxlength","200"),B(D,"font-size","12px"),B(D,"color","#666"),B(D,"cursor","default"),g(V,"class","row g16 center-cross"),B(V,"margin-bottom","8px"),g(Y,"class","column g8"),g(ye,"d","M5 13l4 4L19 7"),g(ye,"stroke","#4c6"),g(ye,"stroke-width","2"),g(ye,"stroke-linecap","round"),g(ye,"stroke-linejoin","round"),g(pe,"xmlns","http://www.w3.org/2000/svg"),g(pe,"width","14"),g(pe,"height","14"),g(pe,"viewBox","0 0 24 24"),g(pe,"fill","none"),B(re,"font-size","12px"),B(re,"color","#486"),g(le,"class","row g4"),B(le,"opacity",n[31]),B(le,"transition","opacity 0.1s ease-in-out"),g(ie,"class","row"),B(ie,"justify-content","flex-end")},m(Pe,je){Z(Pe,e,je),p(e,t),p(t,r),p(t,s),p(t,o),p(e,l),p(e,h),fi(h,n[21]),n[46](h),Z(Pe,d,je),Z(Pe,m,je),p(m,v),p(v,w),p(m,E),p(m,I),fi(I,n[28]),n[48](I),Z(Pe,M,je),Z(Pe,C,je),p(C,D),p(D,P),p(C,F),p(C,V),at($,V,null),p(V,U),at(H,V,null),p(C,Q),we&&we.m(C,null),Z(Pe,W,je),Z(Pe,Y,je),Ne.m(Y,null),p(Y,q),De&&De.m(Y,null),p(Y,ne),_t&&_t.m(Y,null),p(Y,J),Fe&&Fe.m(Y,null),Z(Pe,ge,je),Z(Pe,ie,je),p(ie,le),p(le,pe),p(pe,ye),p(le,be),p(le,re),p(re,ke),X=!0,ue||(_e=[nt(h,"input",n[45]),nt(I,"input",n[47])],ue=!0)},p(Pe,je){(!X||je[0]&524288)&&i!==(i=Pe[19]("knownDrones.identifierLabel")+"")&&Ee(r,i),je[0]&2097152&&h.value!==Pe[21]&&fi(h,Pe[21]),(!X||je[0]&524288)&&k!==(k=Pe[19]("knownDrones.notesLabel")+"")&&Ee(w,k),je[0]&268435456&&fi(I,Pe[28]),(!X||je[0]&524288)&&O!==(O=Pe[19]("knownDrones.expiryLabel")+"")&&Ee(P,O);const Ve={};je[0]&524288&&(Ve.label=Pe[19]("knownDrones.indefinite")),!G&&je[0]&131072&&(G=!0,Ve.group=Pe[17],Yn(()=>G=!1)),$.$set(Ve);const Ue={};je[0]&524288&&(Ue.label=Pe[19]("knownDrones.fixedTerm")),!j&&je[0]&131072&&(j=!0,Ue.group=Pe[17],Yn(()=>j=!1)),H.$set(Ue),Pe[17]==="fixedTerm"?we?(we.p(Pe,je),je[0]&131072&&de(we,1)):(we=kg(Pe),we.c(),de(we,1),we.m(C,null)):we&&(bt(),Ie(we,1,1,()=>{we=null}),wt()),Ae===(Ae=Te(Pe))&&Ne?Ne.p(Pe,je):(Ne.d(1),Ne=Ae(Pe),Ne&&(Ne.c(),Ne.m(Y,q))),Pe[24]&&Pe[25]&&Pe[26]?De?De.p(Pe,je):(De=Eg(Pe),De.c(),De.m(Y,ne)):De&&(De.d(1),De=null),Pe[23]&&Pe[23]!==""?_t?_t.p(Pe,je):(_t=Sg(Pe),_t.c(),_t.m(Y,J)):_t&&(_t.d(1),_t=null),Pe[20]?Fe?Fe.p(Pe,je):(Fe=Ig(Pe),Fe.c(),Fe.m(Y,null)):Fe&&(Fe.d(1),Fe=null),(!X||je[0]&524288)&&me!==(me=Pe[19]("knownDrones.droneAdded")+"")&&Ee(ke,me),(!X||je[1]&1)&&B(le,"opacity",Pe[31])},i(Pe){X||(de($.$$.fragment,Pe),de(H.$$.fragment,Pe),de(we),X=!0)},o(Pe){Ie($.$$.fragment,Pe),Ie(H.$$.fragment,Pe),Ie(we),X=!1},d(Pe){Pe&&(_(e),_(d),_(m),_(M),_(C),_(W),_(Y),_(ge),_(ie)),n[46](null),n[48](null),lt($),lt(H),we&&we.d(),Ne.d(),De&&De.d(),_t&&_t.d(),Fe&&Fe.d(),ue=!1,Bn(_e)}}}function kg(n){let e,t,i,r=n[19]("knownDrones.from")+"",s,o,a,l,h,d,m,v,k,w,E,I=n[19]("knownDrones.until")+"",M,C,D,O,P,F,V,$,G;function U(J){n[51](J)}let H={class:"always-open-above",min:new Date,max:new Date(new Date().setFullYear(new Date().getFullYear()+10)),dynamicPositioning:!0,locale:n[10],format:n[29]&&n[29]==="eng"?"dd-MM-yyyy":"dd.MM.yyyy",placeholder:"",closeOnSelection:!0,id:"expiry-start-date"};n[18]!==void 0&&(H.value=n[18]),l=new zc({props:H}),un.push(()=>jn(l,"value",U));function j(J){n[52](J)}let Q={idPrefix:"valid-from",minDate:new Date};n[18]!==void 0&&(Q.date=n[18]),m=new Gc({props:Q}),un.push(()=>jn(m,"date",j)),m.$on("timeChange",n[34]);function W(J){n[53](J)}let Y={class:"always-open-above",min:new Date(n[18].getTime()+6e4),max:new Date(new Date().setFullYear(new Date().getFullYear()+10)),dynamicPositioning:!0,locale:n[10],format:n[29]&&n[29]==="eng"?"dd-MM-yyyy":"dd.MM.yyyy",placeholder:"",closeOnSelection:!0,id:"expiry-end-date"};n[16]!==void 0&&(Y.value=n[16]),O=new zc({props:Y}),un.push(()=>jn(O,"value",W));function q(J){n[54](J)}let ne={idPrefix:"valid-from",minDate:new Date};return n[16]!==void 0&&(ne.date=n[16]),V=new Gc({props:ne}),un.push(()=>jn(V,"date",q)),V.$on("timeChange",n[35]),{c(){e=A("div"),t=A("div"),i=A("label"),s=he(r),o=ee(),a=A("div"),st(l.$$.fragment),d=ee(),st(m.$$.fragment),k=ee(),w=A("div"),E=A("label"),M=he(I),C=ee(),D=A("div"),st(O.$$.fragment),F=ee(),st(V.$$.fragment),this.h()},l(J){e=R(J,"DIV",{class:!0,style:!0});var ge=T(e);t=R(ge,"DIV",{class:!0});var ie=T(t);i=R(ie,"LABEL",{for:!0,style:!0});var le=T(i);s=fe(le,r),le.forEach(_),o=te(ie),a=R(ie,"DIV",{class:!0});var pe=T(a);ot(l.$$.fragment,pe),d=te(pe),ot(m.$$.fragment,pe),pe.forEach(_),ie.forEach(_),k=te(ge),w=R(ge,"DIV",{class:!0});var ye=T(w);E=R(ye,"LABEL",{for:!0,style:!0});var be=T(E);M=fe(be,I),be.forEach(_),C=te(ye),D=R(ye,"DIV",{class:!0});var re=T(D);ot(O.$$.fragment,re),F=te(re),ot(V.$$.fragment,re),re.forEach(_),ye.forEach(_),ge.forEach(_),this.h()},h(){g(i,"for","expiry-start-date"),B(i,"font-size","12px"),B(i,"color","#666"),B(i,"cursor","default"),g(a,"class","row g8"),g(t,"class","column g4"),g(E,"for","expiry-end-date"),B(E,"font-size","12px"),B(E,"color","#666"),B(E,"cursor","default"),g(D,"class","row g8"),g(w,"class","column g4"),g(e,"class","column g8"),B(e,"margin-bottom","8px")},m(J,ge){Z(J,e,ge),p(e,t),p(t,i),p(i,s),p(t,o),p(t,a),at(l,a,null),p(a,d),at(m,a,null),p(e,k),p(e,w),p(w,E),p(E,M),p(w,C),p(w,D),at(O,D,null),p(D,F),at(V,D,null),G=!0},p(J,ge){(!G||ge[0]&524288)&&r!==(r=J[19]("knownDrones.from")+"")&&Ee(s,r);const ie={};ge[0]&1024&&(ie.locale=J[10]),ge[0]&536870912&&(ie.format=J[29]&&J[29]==="eng"?"dd-MM-yyyy":"dd.MM.yyyy"),!h&&ge[0]&262144&&(h=!0,ie.value=J[18],Yn(()=>h=!1)),l.$set(ie);const le={};!v&&ge[0]&262144&&(v=!0,le.date=J[18],Yn(()=>v=!1)),m.$set(le),(!G||ge[0]&524288)&&I!==(I=J[19]("knownDrones.until")+"")&&Ee(M,I);const pe={};ge[0]&262144&&(pe.min=new Date(J[18].getTime()+6e4)),ge[0]&1024&&(pe.locale=J[10]),ge[0]&536870912&&(pe.format=J[29]&&J[29]==="eng"?"dd-MM-yyyy":"dd.MM.yyyy"),!P&&ge[0]&65536&&(P=!0,pe.value=J[16],Yn(()=>P=!1)),O.$set(pe);const ye={};!$&&ge[0]&65536&&($=!0,ye.date=J[16],Yn(()=>$=!1)),V.$set(ye)},i(J){G||(de(l.$$.fragment,J),de(m.$$.fragment,J),de(O.$$.fragment,J),de(V.$$.fragment,J),G=!0)},o(J){Ie(l.$$.fragment,J),Ie(m.$$.fragment,J),Ie(O.$$.fragment,J),Ie(V.$$.fragment,J),G=!1},d(J){J&&_(e),lt(l),lt(m),lt(O),lt(V)}}}function PI(n){let e,t,i=n[19]("knownDrones.addFriendly")+"",r,s,o,a,l=n[19]("knownDrones.addHostile")+"",h,d,m,v,k=n[19]("knownDrones.addNeutral")+"",w,E,I,M;return{c(){e=A("div"),t=A("button"),r=he(i),o=ee(),a=A("button"),h=he(l),m=ee(),v=A("button"),w=he(k),this.h()},l(C){e=R(C,"DIV",{class:!0});var D=T(e);t=R(D,"BUTTON",{class:!0});var O=T(t);r=fe(O,i),O.forEach(_),o=te(D),a=R(D,"BUTTON",{class:!0});var P=T(a);h=fe(P,l),P.forEach(_),D.forEach(_),m=te(C),v=R(C,"BUTTON",{class:!0});var F=T(v);w=fe(F,k),F.forEach(_),this.h()},h(){g(t,"class",s="add-button width100 "+(n[30]==="mil_icons"?"mil":"")+" friendly svelte-rxmkao"),Tn(t,"disabled",n[25]),g(a,"class",d="add-button width100 "+(n[30]==="mil_icons"?"mil":"")+" hostile svelte-rxmkao"),Tn(a,"disabled",n[25]),g(e,"class","row g8"),g(v,"class",E="add-button width100 "+(n[30]==="mil_icons"?"mil":"")+" neutral svelte-rxmkao"),Tn(v,"disabled",n[25])},m(C,D){Z(C,e,D),p(e,t),p(t,r),p(e,o),p(e,a),p(a,h),Z(C,m,D),Z(C,v,D),p(v,w),I||(M=[nt(t,"click",n[56]),nt(a,"click",n[57]),nt(v,"click",n[58])],I=!0)},p(C,D){D[0]&524288&&i!==(i=C[19]("knownDrones.addFriendly")+"")&&Ee(r,i),D[0]&1073741824&&s!==(s="add-button width100 "+(C[30]==="mil_icons"?"mil":"")+" friendly svelte-rxmkao")&&g(t,"class",s),D[0]&1107296256&&Tn(t,"disabled",C[25]),D[0]&524288&&l!==(l=C[19]("knownDrones.addHostile")+"")&&Ee(h,l),D[0]&1073741824&&d!==(d="add-button width100 "+(C[30]==="mil_icons"?"mil":"")+" hostile svelte-rxmkao")&&g(a,"class",d),D[0]&1107296256&&Tn(a,"disabled",C[25]),D[0]&524288&&k!==(k=C[19]("knownDrones.addNeutral")+"")&&Ee(w,k),D[0]&1073741824&&E!==(E="add-button width100 "+(C[30]==="mil_icons"?"mil":"")+" neutral svelte-rxmkao")&&g(v,"class",E),D[0]&1107296256&&Tn(v,"disabled",C[25])},d(C){C&&(_(e),_(m),_(v)),I=!1,Bn(M)}}}function NI(n){let e,t=n[19]("knownDrones.updateDrone")+"",i,r,s;return{c(){e=A("button"),i=he(t),this.h()},l(o){e=R(o,"BUTTON",{class:!0});var a=T(e);i=fe(a,t),a.forEach(_),this.h()},h(){g(e,"class","add-button width100 update svelte-rxmkao"),Tn(e,"disabled",n[25])},m(o,a){Z(o,e,a),p(e,i),r||(s=nt(e,"click",n[55]),r=!0)},p(o,a){a[0]&524288&&t!==(t=o[19]("knownDrones.updateDrone")+"")&&Ee(i,t),a[0]&33554432&&Tn(e,"disabled",o[25])},d(o){o&&_(e),r=!1,s()}}}function Eg(n){let e,t;return{c(){e=A("p"),t=he(n[26]),this.h()},l(i){e=R(i,"P",{style:!0});var r=T(e);t=fe(r,n[26]),r.forEach(_),this.h()},h(){B(e,"font-size","12px"),B(e,"color","red"),B(e,"margin-top","2px")},m(i,r){Z(i,e,r),p(e,t)},p(i,r){r[0]&67108864&&Ee(t,i[26])},d(i){i&&_(e)}}}function Sg(n){let e,t;return{c(){e=A("p"),t=he(n[23]),this.h()},l(i){e=R(i,"P",{style:!0});var r=T(e);t=fe(r,n[23]),r.forEach(_),this.h()},h(){B(e,"font-size","12px"),B(e,"color","red"),B(e,"margin-top","2px")},m(i,r){Z(i,e,r),p(e,t)},p(i,r){r[0]&8388608&&Ee(t,i[23])},d(i){i&&_(e)}}}function Ig(n){let e,t=n[19]("knownDrones.cancelEdit")+"",i,r,s;return{c(){e=A("button"),i=he(t),this.h()},l(o){e=R(o,"BUTTON",{class:!0});var a=T(e);i=fe(a,t),a.forEach(_),this.h()},h(){g(e,"class","width100 outline")},m(o,a){Z(o,e,a),p(e,i),r||(s=nt(e,"click",function(){Eo(n[12])&&n[12].apply(this,arguments)}),r=!0)},p(o,a){n=o,a[0]&524288&&t!==(t=n[19]("knownDrones.cancelEdit")+"")&&Ee(i,t)},d(o){o&&_(e),r=!1,s()}}}function DI(n){let e,t,i,r=n[19]("knownDrones.searchLabel")+"",s,o,a,l="*",h,d,m,v,k,w,E,I,M,C,D,O=n[20]===null&&n[22]&&!n[15]&&wg(n);const P=[CI,LI],F=[];function V($,G){var U;return G[0]&134217728&&(w=null),w==null&&(w=!!((U=$[27])!=null&&U.hasPermission(21))),w?0:1}return E=V(n,[-1,-1,-1]),I=F[E]=P[E](n),{c(){e=A("div"),t=A("div"),i=A("label"),s=he(r),o=ee(),a=A("span"),a.textContent=l,h=ee(),d=A("input"),v=ee(),O&&O.c(),k=ee(),I.c(),this.h()},l($){e=R($,"DIV",{class:!0,style:!0});var G=T(e);t=R(G,"DIV",{});var U=T(t);i=R(U,"LABEL",{for:!0,style:!0});var H=T(i);s=fe(H,r),o=te(H),a=R(H,"SPAN",{style:!0,"data-svelte-h":!0}),rn(a)!=="svelte-199aewp"&&(a.textContent=l),H.forEach(_),h=te(U),d=R(U,"INPUT",{type:!0,class:!0,id:!0,maxlength:!0}),v=te(U),O&&O.l(U),U.forEach(_),k=te(G),I.l(G),G.forEach(_),this.h()},h(){B(a,"color","red"),g(i,"for","serial-number-input"),B(i,"font-size","12px"),B(i,"color","#666"),B(i,"cursor","default"),g(d,"type","text"),g(d,"class","search-box svelte-rxmkao"),g(d,"id","search-box"),d.readOnly=m=n[20]!==null,g(d,"maxlength","20"),d.required=!0,g(e,"class","sep column p816 g4"),B(e,"border-top","none"),B(e,"height","auto")},m($,G){Z($,e,G),p(e,t),p(t,i),p(i,s),p(i,o),p(i,a),p(t,h),p(t,d),fi(d,n[22]),n[44](d),p(t,v),O&&O.m(t,null),p(e,k),F[E].m(e,null),M=!0,C||(D=[nt(d,"input",n[43]),nt(d,"input",n[33])],C=!0)},p($,G){(!M||G[0]&524288)&&r!==(r=$[19]("knownDrones.searchLabel")+"")&&Ee(s,r),(!M||G[0]&1048576&&m!==(m=$[20]!==null))&&(d.readOnly=m),G[0]&4194304&&d.value!==$[22]&&fi(d,$[22]),$[20]===null&&$[22]&&!$[15]?O?O.p($,G):(O=wg($),O.c(),O.m(t,null)):O&&(O.d(1),O=null);let U=E;E=V($,G),E===U?F[E].p($,G):(bt(),Ie(F[U],1,1,()=>{F[U]=null}),wt(),I=F[E],I?I.p($,G):(I=F[E]=P[E]($),I.c()),de(I,1),I.m(e,null))},i($){M||(de(I),M=!0)},o($){Ie(I),M=!1},d($){$&&_(e),n[44](null),O&&O.d(),F[E].d(),C=!1,Bn(D)}}}function Hu(n){n.key.length===1&&/[a-zA-Z]/.test(n.key)&&n.preventDefault()}function AI(n,e,t){let i,r,s,o,a,l,h,d=$e,m=()=>(d(),d=Dt(Me,ut=>t(16,h=ut)),Me),v,k=$e,w=()=>(k(),k=Dt(ae,ut=>t(17,v=ut)),ae),E,I=$e,M=()=>(I(),I=Dt(Se,ut=>t(18,E=ut)),Se),C,D,O=$e,P=()=>(O(),O=Dt(we,ut=>t(20,D=ut)),we),F,V=$e,$=()=>(V(),V=Dt(_e,ut=>t(21,F=ut)),_e),G,U=$e,H=()=>(U(),U=Dt(ue,ut=>t(22,G=ut)),ue),j,Q=$e,W=()=>(Q(),Q=Dt(Fe,ut=>t(23,j=ut)),Fe),Y,q,ne=$e,J=()=>(ne(),ne=Dt(oe,ut=>t(28,q=ut)),oe),ge,ie,le=$e,pe=()=>(le(),le=Dt(Pe,ut=>t(30,ie=ut)),Pe),ye,be=$e,re=()=>(be(),be=Dt(Ne,ut=>t(31,ye=ut)),Ne);He(n,Nn,ut=>t(19,C=ut)),He(n,Li,ut=>t(27,Y=ut)),He(n,So,ut=>t(29,ge=ut)),n.$$.on_destroy.push(()=>d()),n.$$.on_destroy.push(()=>k()),n.$$.on_destroy.push(()=>I()),n.$$.on_destroy.push(()=>O()),n.$$.on_destroy.push(()=>V()),n.$$.on_destroy.push(()=>U()),n.$$.on_destroy.push(()=>Q()),n.$$.on_destroy.push(()=>ne()),n.$$.on_destroy.push(()=>le()),n.$$.on_destroy.push(()=>be());let{searchInput:me}=e,{identifierInput:ke}=e,{notesInput:X}=e,{searchTerm:ue}=e;H();let{identifier:_e}=e;$();let{notes:oe}=e;J();let{selectedExpiry:ae}=e;w();let{expiryStart:Se}=e;M();let{expiryEnd:Me}=e;m();let{editingDrone:we}=e;P();let{filteredDrones:Te}=e,{datePickerCompatibleLocale:Ae}=e,{successNotificationOpacity:Ne}=e;re();let{handleSaveDrone:De}=e,{resetAndClearEditingState:_t}=e,{apiError:Fe}=e;W();let{iconSet:Pe}=e;pe();let je=!1,Ve,Ue;function Ke(ut){a?(t(24,je=!0),clearTimeout(Ve),Ve=setTimeout(()=>{t(24,je=!1)},4e3)):De(ut)}function We(ut){const jt=ut.target;ue.set(jt.value)}ls(()=>{clearTimeout(Ve),clearTimeout(Ue)});function ze(){const ut=new Date;E&&E.getTime()<ut.getTime()&&Se.set(ut),Et()}function Et(){const ut=new Date,jt=E?new Date(Math.max(E.getTime()+1*60*1e3,ut.getTime()+1*60*1e3)):new Date(ut.getTime()+1*60*1e3);h.getTime()<jt.getTime()&&Me.set(jt)}let rt,ft;const Ut=()=>{rt=document.getElementById("expiry-start-date"),ft=document.getElementById("expiry-end-date"),rt==null||rt.addEventListener("keydown",Hu),ft==null||ft.addEventListener("keydown",Hu),rt==null||rt.addEventListener("blur",ze),ft==null||ft.addEventListener("blur",Et)},Qe=()=>{rt==null||rt.removeEventListener("keydown",Hu),ft==null||ft.removeEventListener("keydown",Hu),rt==null||rt.removeEventListener("blur",ze),ft==null||ft.removeEventListener("blur",Et),rt=null,ft=null};ls(Qe);let yt=null;function mt(){G=this.value,ue.set(G)}function Ft(ut){un[ut?"unshift":"push"](()=>{me=ut,t(0,me)})}function qt(){F=this.value,_e.set(F)}function vt(ut){un[ut?"unshift":"push"](()=>{ke=ut,t(1,ke)})}function $t(){q=this.value,oe.set(q)}function dn(ut){un[ut?"unshift":"push"](()=>{X=ut,t(2,X)})}function sn(ut){v=ut,ae.set(v)}function pn(ut){v=ut,ae.set(v)}function Ye(ut){E=ut,Se.set(E)}function Vt(ut){E=ut,Se.set(E)}function Mt(ut){h=ut,Me.set(h)}function Rt(ut){h=ut,Me.set(h)}const gt=()=>Ke(),it=()=>Ke(an.FRIENDLY),St=()=>Ke(an.HOSTILE),Jt=()=>Ke(an.NEUTRAL);return n.$$set=ut=>{"searchInput"in ut&&t(0,me=ut.searchInput),"identifierInput"in ut&&t(1,ke=ut.identifierInput),"notesInput"in ut&&t(2,X=ut.notesInput),"searchTerm"in ut&&H(t(3,ue=ut.searchTerm)),"identifier"in ut&&$(t(4,_e=ut.identifier)),"notes"in ut&&J(t(5,oe=ut.notes)),"selectedExpiry"in ut&&w(t(6,ae=ut.selectedExpiry)),"expiryStart"in ut&&M(t(7,Se=ut.expiryStart)),"expiryEnd"in ut&&m(t(8,Me=ut.expiryEnd)),"editingDrone"in ut&&P(t(9,we=ut.editingDrone)),"filteredDrones"in ut&&t(36,Te=ut.filteredDrones),"datePickerCompatibleLocale"in ut&&t(10,Ae=ut.datePickerCompatibleLocale),"successNotificationOpacity"in ut&&re(t(11,Ne=ut.successNotificationOpacity)),"handleSaveDrone"in ut&&t(37,De=ut.handleSaveDrone),"resetAndClearEditingState"in ut&&t(12,_t=ut.resetAndClearEditingState),"apiError"in ut&&W(t(13,Fe=ut.apiError)),"iconSet"in ut&&pe(t(14,Pe=ut.iconSet))},n.$$.update=()=>{if(n.$$.dirty[0]&8396800|n.$$.dirty[1]&128&&j&&(clearTimeout(Ue),t(38,Ue=setTimeout(()=>{Fe.set("")},4e3))),n.$$.dirty[0]&4194304&&t(15,i=/^[A-Za-z0-9]*$/.test(G)),n.$$.dirty[0]&5701632|n.$$.dirty[1]&32&&t(42,r=!D&&Te.some(ut=>{const jt=ut.serialNumber.toUpperCase()===G.toUpperCase();if(jt&&ut.expiryStart&&ut.expiryEnd&&v==="fixedTerm"&&E&&h){const gn=ut.expiryStart.getTime(),Be=ut.expiryEnd.getTime(),tt=E.getTime(),en=h.getTime();return gn<en&&tt<Be}return jt})),n.$$.dirty[0]&5373952|n.$$.dirty[1]&32&&t(40,s=D&&v==="indefinite"&&Te.filter(ut=>ut.serialNumber.toUpperCase()===G.toUpperCase()).length>1),n.$$.dirty[0]&458752&&t(41,o=v==="fixedTerm"&&h<=E),n.$$.dirty[0]&7372800|n.$$.dirty[1]&3584&&t(25,a=!G||!i||!F||!D&&r||o||s),n.$$.dirty[0]&7864320|n.$$.dirty[1]&3584&&t(26,l=G?F?!D&&r?C("knownDrones.error.droneExists"):o?C("knownDrones.error.invalidExpiry"):s?C("knownDrones.error.indefiniteConflict"):"":C("knownDrones.error.identifierRequired"):C("knownDrones.error.serialNumberRequired")),n.$$.dirty[0]&131072&&typeof window<"u"&&(v!=="indefinite"?Xc().then(Ut):Qe()),n.$$.dirty[0]&196864|n.$$.dirty[1]&256&&v!=="indefinite"&&h){const ut=h?`${h.getDate()}-${h.getMonth()}-${h.getFullYear()}`:null;if(ut&&ut!==yt){if(h.getHours()!==23||h.getMinutes()!==59){const jt=new Date(h);jt.setHours(23,59,0,0),Me.set(jt)}t(39,yt=ut)}}},[me,ke,X,ue,_e,oe,ae,Se,Me,we,Ae,Ne,_t,Fe,Pe,i,h,v,E,C,D,F,G,j,je,a,l,Y,q,ge,ie,ye,Ke,We,ze,Et,Te,De,Ue,yt,s,o,r,mt,Ft,qt,vt,$t,dn,sn,pn,Ye,Vt,Mt,Rt,gt,it,St,Jt]}class RI extends Wt{constructor(e){super(),Xt(this,e,AI,DI,zt,{searchInput:0,identifierInput:1,notesInput:2,searchTerm:3,identifier:4,notes:5,selectedExpiry:6,expiryStart:7,expiryEnd:8,editingDrone:9,filteredDrones:36,datePickerCompatibleLocale:10,successNotificationOpacity:11,handleSaveDrone:37,resetAndClearEditingState:12,apiError:13,iconSet:14},null,[-1,-1,-1])}}function OI(n){let e,t,i,r=(n[0].identifier||n[0].serialNumber)+"",s,o,a,l,h=n[5]("knownDrones.removeDroneConfirm")+"",d,m,v,k=n[5]("common.cancel")+"",w,E,I,M=n[5]("knownDrones.remove")+"",C,D,O;return{c(){e=A("div"),t=A("div"),i=A("p"),s=he(r),o=ee(),a=A("div"),l=A("p"),d=he(h),m=ee(),v=A("button"),w=he(k),E=ee(),I=A("button"),C=he(M),this.h()},l(P){e=R(P,"DIV",{class:!0,style:!0});var F=T(e);t=R(F,"DIV",{class:!0});var V=T(t);i=R(V,"P",{style:!0});var $=T(i);s=fe($,r),$.forEach(_),V.forEach(_),o=te(F),a=R(F,"DIV",{class:!0});var G=T(a);l=R(G,"P",{style:!0});var U=T(l);d=fe(U,h),U.forEach(_),m=te(G),v=R(G,"BUTTON",{class:!0,style:!0});var H=T(v);w=fe(H,k),H.forEach(_),E=te(G),I=R(G,"BUTTON",{style:!0});var j=T(I);C=fe(j,M),j.forEach(_),G.forEach(_),F.forEach(_),this.h()},h(){B(i,"font-size","16px"),B(i,"font-weight","700"),g(t,"class","column grow"),B(l,"font-size","14px"),B(l,"color","#e64"),g(v,"class","outline"),B(v,"font-size","14px"),B(v,"padding","0px 16px"),B(I,"background-color","#f44"),B(I,"color","white"),B(I,"font-size","14px"),B(I,"padding","0px 16px"),g(a,"class","row g8"),g(e,"class","known-drone-entry column p816 g8"),B(e,"border-bottom","1px solid #eee"),B(e,"background-color","#fff8f0")},m(P,F){Z(P,e,F),p(e,t),p(t,i),p(i,s),p(e,o),p(e,a),p(a,l),p(l,d),p(a,m),p(a,v),p(v,w),p(a,E),p(a,I),p(I,C),D||(O=[nt(v,"click",n[9]),nt(I,"click",n[10]),nt(e,"mouseenter",n[11]),nt(e,"mouseleave",n[12])],D=!0)},p(P,F){F&1&&r!==(r=(P[0].identifier||P[0].serialNumber)+"")&&Ee(s,r),F&32&&h!==(h=P[5]("knownDrones.removeDroneConfirm")+"")&&Ee(d,h),F&32&&k!==(k=P[5]("common.cancel")+"")&&Ee(w,k),F&32&&M!==(M=P[5]("knownDrones.remove")+"")&&Ee(C,M)},d(P){P&&_(e),D=!1,Bn(O)}}}function xI(n){var ge,ie;let e,t,i,r=(n[0].identifier||n[0].serialNumber)+"",s,o,a,l=(n[0].notes||n[5]("knownDrones.noNotes"))+"",h,d,m,v,k,w,E,I=(n[0].relationship===an.FRIENDLY?n[5]("knownDrones.friendly"):n[0].relationship===an.HOSTILE?n[5]("knownDrones.hostile"):n[5]("knownDrones.neutral"))+"",M,C,D,O,P=n[5](n[0].expiryStart&&n[0].expiryEnd?"knownDrones.temporaryRole":"knownDrones.indefiniteRole")+"",F,V,$,G,U=(ge=n[4])==null?void 0:ge.hasPermission(21),H,j=(ie=n[4])==null?void 0:ie.hasPermission(21),Q,W,Y,q=n[0].expiryStart&&n[0].expiryEnd&&Mg(n),ne=U&&Tg(n),J=j&&Lg(n);return{c(){e=A("div"),t=A("div"),i=A("p"),s=he(r),o=ee(),a=A("p"),h=he(l),m=ee(),q&&q.c(),v=ee(),k=A("div"),w=A("div"),E=A("span"),M=he(I),D=ee(),O=A("p"),F=he(P),$=ee(),G=A("div"),ne&&ne.c(),H=ee(),J&&J.c(),this.h()},l(le){e=R(le,"DIV",{class:!0,style:!0});var pe=T(e);t=R(pe,"DIV",{class:!0});var ye=T(t);i=R(ye,"P",{class:!0,style:!0});var be=T(i);s=fe(be,r),be.forEach(_),o=te(ye),a=R(ye,"P",{class:!0,title:!0});var re=T(a);h=fe(re,l),re.forEach(_),m=te(ye),q&&q.l(ye),ye.forEach(_),v=te(pe),k=R(pe,"DIV",{class:!0,style:!0});var me=T(k);w=R(me,"DIV",{class:!0,style:!0});var ke=T(w);E=R(ke,"SPAN",{class:!0});var X=T(E);M=fe(X,I),X.forEach(_),ke.forEach(_),D=te(me),O=R(me,"P",{class:!0,style:!0});var ue=T(O);F=fe(ue,P),ue.forEach(_),me.forEach(_),$=te(pe),G=R(pe,"DIV",{class:!0,style:!0});var _e=T(G);ne&&ne.l(_e),H=te(_e),J&&J.l(_e),_e.forEach(_),pe.forEach(_),this.h()},h(){var le;g(i,"class","identifier svelte-1wk2g23"),B(i,"font-size","16px"),B(i,"font-weight","700"),g(a,"class","notes svelte-1wk2g23"),g(a,"title",d=n[0].notes||n[5]("knownDrones.noNotes")),g(t,"class","column grow"),g(E,"class",C="role-indicator "+(n[6]==="mil_icons"?"mil":"")+" "+(n[0].relationship===an.FRIENDLY?"friendly":n[0].relationship===an.HOSTILE?"hostile":"neutral")+" svelte-1wk2g23"),g(w,"class","row g8 center-cross"),B(w,"height","fit-content"),g(O,"class",V="role-indicator "+(n[0].expiryStart&&n[0].expiryEnd?"temporary":"indefinite")+" svelte-1wk2g23"),B(O,"font-size","12px"),g(k,"class","column g8"),B(k,"align-items","flex-end"),B(k,"justify-content","space-between"),g(G,"class","column"),B(G,"align-items","flex-end"),B(G,"justify-content","space-between"),g(e,"class",Q="known-drone-entry row p816 g4 "+((le=n[4])!=null&&le.hasPermission(21)?"clickable":"")),B(e,"border-bottom","1px solid #eee")},m(le,pe){Z(le,e,pe),p(e,t),p(t,i),p(i,s),p(t,o),p(t,a),p(a,h),p(t,m),q&&q.m(t,null),p(e,v),p(e,k),p(k,w),p(w,E),p(E,M),p(k,D),p(k,O),p(O,F),p(e,$),p(e,G),ne&&ne.m(G,null),p(G,H),J&&J.m(G,null),W||(Y=nt(e,"click",n[15]),W=!0)},p(le,pe){var ye,be,re;pe&1&&r!==(r=(le[0].identifier||le[0].serialNumber)+"")&&Ee(s,r),pe&33&&l!==(l=(le[0].notes||le[5]("knownDrones.noNotes"))+"")&&Ee(h,l),pe&33&&d!==(d=le[0].notes||le[5]("knownDrones.noNotes"))&&g(a,"title",d),le[0].expiryStart&&le[0].expiryEnd?q?q.p(le,pe):(q=Mg(le),q.c(),q.m(t,null)):q&&(q.d(1),q=null),pe&33&&I!==(I=(le[0].relationship===an.FRIENDLY?le[5]("knownDrones.friendly"):le[0].relationship===an.HOSTILE?le[5]("knownDrones.hostile"):le[5]("knownDrones.neutral"))+"")&&Ee(M,I),pe&65&&C!==(C="role-indicator "+(le[6]==="mil_icons"?"mil":"")+" "+(le[0].relationship===an.FRIENDLY?"friendly":le[0].relationship===an.HOSTILE?"hostile":"neutral")+" svelte-1wk2g23")&&g(E,"class",C),pe&33&&P!==(P=le[5](le[0].expiryStart&&le[0].expiryEnd?"knownDrones.temporaryRole":"knownDrones.indefiniteRole")+"")&&Ee(F,P),pe&1&&V!==(V="role-indicator "+(le[0].expiryStart&&le[0].expiryEnd?"temporary":"indefinite")+" svelte-1wk2g23")&&g(O,"class",V),pe&16&&(U=(ye=le[4])==null?void 0:ye.hasPermission(21)),U?ne?ne.p(le,pe):(ne=Tg(le),ne.c(),ne.m(G,H)):ne&&(ne.d(1),ne=null),pe&16&&(j=(be=le[4])==null?void 0:be.hasPermission(21)),j?J?J.p(le,pe):(J=Lg(le),J.c(),J.m(G,null)):J&&(J.d(1),J=null),pe&16&&Q!==(Q="known-drone-entry row p816 g4 "+((re=le[4])!=null&&re.hasPermission(21)?"clickable":""))&&g(e,"class",Q)},d(le){le&&_(e),q&&q.d(),ne&&ne.d(),J&&J.d(),W=!1,Y()}}}function Mg(n){let e,t,i;function r(a,l){if(l&1&&(e=null),l&1&&(t=null),e==null&&(e=new Date(a[0].expiryStart)>new Date),e)return BI;if(t==null&&(t=new Date(a[0].expiryEnd)>new Date),t)return FI}let s=r(n,-1),o=s&&s(n);return{c(){o&&o.c(),i=dt()},l(a){o&&o.l(a),i=dt()},m(a,l){o&&o.m(a,l),Z(a,i,l)},p(a,l){s===(s=r(a,l))&&o?o.p(a,l):(o&&o.d(1),o=s&&s(a),o&&(o.c(),o.m(i.parentNode,i)))},d(a){a&&_(i),o&&o.d(a)}}}function FI(n){let e,t,i=n[5]("knownDrones.roleExpires")+"",r,s,o=Ci(n[5],n[0].expiryEnd,!1,!1)+"",a;return{c(){e=A("div"),t=A("p"),r=he(i),s=ee(),a=he(o),this.h()},l(l){e=R(l,"DIV",{class:!0});var h=T(e);t=R(h,"P",{style:!0});var d=T(t);r=fe(d,i),s=te(d),a=fe(d,o),d.forEach(_),h.forEach(_),this.h()},h(){B(t,"font-size","14px"),g(e,"class","row g8 center-cross")},m(l,h){Z(l,e,h),p(e,t),p(t,r),p(t,s),p(t,a)},p(l,h){h&32&&i!==(i=l[5]("knownDrones.roleExpires")+"")&&Ee(r,i),h&33&&o!==(o=Ci(l[5],l[0].expiryEnd,!1,!1)+"")&&Ee(a,o)},d(l){l&&_(e)}}}function BI(n){let e,t,i=n[5]("knownDrones.roleStarts")+"",r,s,o=Ci(n[5],n[0].expiryStart,!1,!1)+"",a;return{c(){e=A("div"),t=A("p"),r=he(i),s=ee(),a=he(o),this.h()},l(l){e=R(l,"DIV",{class:!0});var h=T(e);t=R(h,"P",{style:!0});var d=T(t);r=fe(d,i),s=te(d),a=fe(d,o),d.forEach(_),h.forEach(_),this.h()},h(){B(t,"font-size","14px"),g(e,"class","row g8 center-cross")},m(l,h){Z(l,e,h),p(e,t),p(t,r),p(t,s),p(t,a)},p(l,h){h&32&&i!==(i=l[5]("knownDrones.roleStarts")+"")&&Ee(r,i),h&33&&o!==(o=Ci(l[5],l[0].expiryStart,!1,!1)+"")&&Ee(a,o)},d(l){l&&_(e)}}}function Tg(n){let e,t,i,r,s,o;return{c(){e=A("button"),t=Re("svg"),i=Re("path"),this.h()},l(a){e=R(a,"BUTTON",{class:!0,title:!0});var l=T(e);t=Oe(l,"svg",{style:!0,xmlns:!0,x:!0,y:!0,width:!0,height:!0,viewBox:!0,class:!0});var h=T(t);i=Oe(h,"path",{d:!0}),T(i).forEach(_),h.forEach(_),l.forEach(_),this.h()},h(){g(i,"d","M 24 4 C 20.491685 4 17.570396 6.6214322 17.080078 10 L 10.238281 10 A 1.50015 1.50015 0 0 0 9.9804688 9.9785156 A 1.50015 1.50015 0 0 0 9.7578125 10 L 6.5 10 A 1.50015 1.50015 0 1 0 6.5 13 L 8.6386719 13 L 11.15625 39.029297 C 11.427329 41.835926 13.811782 44 16.630859 44 L 31.367188 44 C 34.186411 44 36.570826 41.836168 36.841797 39.029297 L 39.361328 13 L 41.5 13 A 1.50015 1.50015 0 1 0 41.5 10 L 38.244141 10 A 1.50015 1.50015 0 0 0 37.763672 10 L 30.919922 10 C 30.429604 6.6214322 27.508315 4 24 4 z M 24 7 C 25.879156 7 27.420767 8.2681608 27.861328 10 L 20.138672 10 C 20.579233 8.2681608 22.120844 7 24 7 z M 11.650391 13 L 36.347656 13 L 33.855469 38.740234 C 33.730439 40.035363 32.667963 41 31.367188 41 L 16.630859 41 C 15.331937 41 14.267499 40.033606 14.142578 38.740234 L 11.650391 13 z M 20.476562 17.978516 A 1.50015 1.50015 0 0 0 19 19.5 L 19 34.5 A 1.50015 1.50015 0 1 0 22 34.5 L 22 19.5 A 1.50015 1.50015 0 0 0 20.476562 17.978516 z M 27.476562 17.978516 A 1.50015 1.50015 0 0 0 26 19.5 L 26 34.5 A 1.50015 1.50015 0 1 0 29 34.5 L 29 19.5 A 1.50015 1.50015 0 0 0 27.476562 17.978516 z"),B(t,"fill","#f44"),g(t,"xmlns","http://www.w3.org/2000/svg"),g(t,"x","0px"),g(t,"y","0px"),g(t,"width","24"),g(t,"height","24"),g(t,"viewBox","0 0 48 48"),g(t,"class","svelte-1wk2g23"),g(e,"class","hoverable icon-button svelte-1wk2g23"),g(e,"title",r=n[5]("knownDrones.removeDroneTitle"))},m(a,l){Z(a,e,l),p(e,t),p(t,i),s||(o=nt(e,"click",n[8]),s=!0)},p(a,l){l&32&&r!==(r=a[5]("knownDrones.removeDroneTitle"))&&g(e,"title",r)},d(a){a&&_(e),s=!1,o()}}}function Lg(n){let e,t,i,r,s,o;return{c(){e=A("button"),t=Re("svg"),i=Re("path"),this.h()},l(a){e=R(a,"BUTTON",{class:!0,title:!0});var l=T(e);t=Oe(l,"svg",{xmlns:!0,height:!0,viewBox:!0,width:!0,fill:!0});var h=T(t);i=Oe(h,"path",{d:!0}),T(i).forEach(_),h.forEach(_),l.forEach(_),this.h()},h(){g(i,"d","M476.92-247.69ZM180-223.85v-52.77q0-29.38 15.96-54.42 15.96-25.04 42.66-38.5 59.3-29.07 119.65-43.61 60.35-14.54 121.73-14.54 32 0 63.58 3.92 31.57 3.92 63.34 12l-50.07 50.69q-19.71-2.83-38.43-4.72-18.72-1.89-38.42-1.89-54.7 0-108.43 13.11-53.72 13.12-105.42 38.58-12.07 6.54-19.11 16.88-7.04 10.35-7.04 22.5v28.93h236.92v60H216.16q-15.37 0-25.76-10.4-10.4-10.39-10.4-25.76Zm384.62 47.69v-39.61q0-14.63 5.92-27.89t15.77-23.11l195.46-195.08q7.46-7.46 16.11-10.5 8.65-3.03 17.3-3.03 9.43 0 18.25 3.53 8.82 3.54 16.03 10.62l37 37.38q6.46 7.47 10 16.16Q900-399 900-390.31t-3.23 17.69q-3.23 9-10.31 16.46L691.38-161.08q-9.84 9.85-23.1 15.46-13.26 5.62-27.9 5.62h-39.61q-15.37 0-25.76-10.4-10.39-10.39-10.39-25.76Zm287.69-214.15-37-37.38 37 37.38Zm-240 202.62h38l129.84-130.47-18.38-19-18.62-18.76-130.84 130.23v38Zm149.46-149.47-18.62-18.76 37 37.76-18.38-19ZM480-492.31q-57.75 0-98.87-41.12Q340-574.56 340-632.31q0-57.75 41.13-98.87 41.12-41.13 98.87-41.13 57.75 0 98.87 41.13Q620-690.06 620-632.31q0 57.75-41.13 98.88-41.12 41.12-98.87 41.12Zm0-60q33 0 56.5-23.5t23.5-56.5q0-33-23.5-56.5t-56.5-23.5q-33 0-56.5 23.5t-23.5 56.5q0 33 23.5 56.5t56.5 23.5Zm0-80Z"),g(t,"xmlns","http://www.w3.org/2000/svg"),g(t,"height","24px"),g(t,"viewBox","0 -960 960 960"),g(t,"width","24px"),g(t,"fill","#000"),g(e,"class","hoverable edit-role-button svelte-1wk2g23"),g(e,"title",r=n[5]("knownDrones.editDroneTitle"))},m(a,l){Z(a,e,l),p(e,t),p(t,i),s||(o=nt(e,"click",n[14]),s=!0)},p(a,l){l&32&&r!==(r=a[5]("knownDrones.editDroneTitle"))&&g(e,"title",r)},d(a){a&&_(e),s=!1,o()}}}function $I(n){let e;function t(s,o){if(s[3]==="idle")return xI;if(s[3]==="confirmDelete")return OI}let i=t(n),r=i&&i(n);return{c(){r&&r.c(),e=dt()},l(s){r&&r.l(s),e=dt()},m(s,o){r&&r.m(s,o),Z(s,e,o)},p(s,[o]){i===(i=t(s))&&r?r.p(s,o):(r&&r.d(1),r=i&&i(s),r&&(r.c(),r.m(e.parentNode,e)))},i:$e,o:$e,d(s){s&&_(e),r&&r.d(s)}}}function VI(n,e,t){let i,r,s,o,a=$e,l=()=>(a(),a=Dt(v,F=>t(6,o=F)),v);He(n,Li,F=>t(4,r=F)),He(n,Nn,F=>t(5,s=F)),n.$$.on_destroy.push(()=>a());let{drone:h}=e,{editDrone:d}=e,{removeDroneRelation:m}=e,{iconSet:v}=e;l();const k=new Ot("idle");He(n,k,F=>t(3,i=F));let w;function E(){kn(k,i="confirmDelete",i)}function I(){kn(k,i="idle",i),clearTimeout(w)}async function M(){kn(k,i="idle",i),clearTimeout(w),await m(h.id)}function C(){i==="confirmDelete"&&clearTimeout(w)}function D(){i==="confirmDelete"&&(w=setTimeout(()=>{kn(k,i="idle",i)},1e3))}const O=()=>d(h),P=()=>(r==null?void 0:r.hasPermission(21))&&d(h);return n.$$set=F=>{"drone"in F&&t(0,h=F.drone),"editDrone"in F&&t(1,d=F.editDrone),"removeDroneRelation"in F&&t(13,m=F.removeDroneRelation),"iconSet"in F&&l(t(2,v=F.iconSet))},[h,d,v,i,r,s,o,k,E,I,M,C,D,m,O,P]}class zI extends Wt{constructor(e){super(),Xt(this,e,VI,$I,zt,{drone:0,editDrone:1,removeDroneRelation:13,iconSet:2})}}function Cg(n,e,t){const i=n.slice();return i[47]=e[t],i}function Pg(n){let e,t,i=n[2]("knownDrones.found")+"",r,s,o=n[9].length+"",a,l;return{c(){e=A("span"),t=he("("),r=he(i),s=ee(),a=he(o),l=he(")"),this.h()},l(h){e=R(h,"SPAN",{style:!0});var d=T(e);t=fe(d,"("),r=fe(d,i),s=te(d),a=fe(d,o),l=fe(d,")"),d.forEach(_),this.h()},h(){B(e,"color","#666")},m(h,d){Z(h,e,d),p(e,t),p(e,r),p(e,s),p(e,a),p(e,l)},p(h,d){d[0]&4&&i!==(i=h[2]("knownDrones.found")+"")&&Ee(r,i),d[0]&512&&o!==(o=h[9].length+"")&&Ee(a,o)},d(h){h&&_(e)}}}function GI(n){let e,t,i=(n[1]?n[2]("knownDrones.noSearchResults"):n[2]("knownDrones.noDrones"))+"",r;return{c(){e=A("div"),t=A("p"),r=he(i),this.h()},l(s){e=R(s,"DIV",{class:!0,style:!0});var o=T(e);t=R(o,"P",{class:!0});var a=T(t);r=fe(a,i),a.forEach(_),o.forEach(_),this.h()},h(){g(t,"class","centered"),g(e,"class","p816"),B(e,"border-top","1px solid #e8e8e8")},m(s,o){Z(s,e,o),p(e,t),p(t,r)},p(s,o){o[0]&6&&i!==(i=(s[1]?s[2]("knownDrones.noSearchResults"):s[2]("knownDrones.noDrones"))+"")&&Ee(r,i)},i:$e,o:$e,d(s){s&&_(e)}}}function HI(n){let e,t,i=Bt(n[9]),r=[];for(let o=0;o<i.length;o+=1)r[o]=Ng(Cg(n,i,o));const s=o=>Ie(r[o],1,1,()=>{r[o]=null});return{c(){e=A("div");for(let o=0;o<r.length;o+=1)r[o].c()},l(o){e=R(o,"DIV",{});var a=T(e);for(let l=0;l<r.length;l+=1)r[l].l(a);a.forEach(_)},m(o,a){Z(o,e,a);for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(e,null);t=!0},p(o,a){if(a[0]&335544833){i=Bt(o[9]);let l;for(l=0;l<i.length;l+=1){const h=Cg(o,i,l);r[l]?(r[l].p(h,a),de(r[l],1)):(r[l]=Ng(h),r[l].c(),de(r[l],1),r[l].m(e,null))}for(bt(),l=i.length;l<r.length;l+=1)s(l);wt()}},i(o){if(!t){for(let a=0;a<i.length;a+=1)de(r[a]);t=!0}},o(o){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)Ie(r[a]);t=!1},d(o){o&&_(e),ui(r,o)}}}function Ng(n){let e,t;return e=new zI({props:{drone:n[47],editDrone:n[26],removeDroneRelation:n[28],iconSet:n[0]}}),{c(){st(e.$$.fragment)},l(i){ot(e.$$.fragment,i)},m(i,r){at(e,i,r),t=!0},p(i,r){const s={};r[0]&512&&(s.drone=i[47]),r[0]&1&&(s.iconSet=i[0]),e.$set(s)},i(i){t||(de(e.$$.fragment,i),t=!0)},o(i){Ie(e.$$.fragment,i),t=!1},d(i){lt(e,i)}}}function UI(n){let e,t,i,r,s=n[2]("knownDrones.title")+"",o,a,l,h=n[2]("knownDrones.description")+"",d,m,v,k='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M19 5L5 19M5.00001 5L19 19" stroke="#fff" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>',w,E,I,M,C,D=n[2]("knownDrones.additionalDescription")+"",O,P,F,V,$,G,U,H,j=n[2]("knownDrones.searchResultsDrones")+"",Q,W,Y,q,ne,J=n[2]("knownDrones.sort.friendlyFirst")+"",ge,ie,le=n[2]("knownDrones.sort.hostileFirst")+"",pe,ye,be=n[2]("knownDrones.sort.neutralFirst")+"",re,me,ke=n[2]("knownDrones.sort.temporaryFirst")+"",X,ue,_e=n[2]("knownDrones.sort.indefiniteFirst")+"",oe,ae,Se,Me,we,Te,Ae;function Ne(Ke){n[33](Ke)}function De(Ke){n[34](Ke)}function _t(Ke){n[35](Ke)}let Fe={searchTerm:n[19],identifier:n[20],notes:n[21],selectedExpiry:n[12],expiryStart:n[22],expiryEnd:n[23],editingDrone:n[16],filteredDrones:n[4],datePickerCompatibleLocale:n[8],successNotificationOpacity:n[17],handleSaveDrone:n[27],resetAndClearEditingState:n[25],apiError:n[10],iconSet:n[0]};n[5]!==void 0&&(Fe.searchInput=n[5]),n[6]!==void 0&&(Fe.identifierInput=n[6]),n[7]!==void 0&&(Fe.notesInput=n[7]),P=new RI({props:Fe}),un.push(()=>jn(P,"searchInput",Ne)),un.push(()=>jn(P,"identifierInput",De)),un.push(()=>jn(P,"notesInput",_t));let Pe=n[1]&&Pg(n);const je=[HI,GI],Ve=[];function Ue(Ke,We){return Ke[9].length>0?0:1}return Se=Ue(n),Me=Ve[Se]=je[Se](n),{c(){e=A("div"),t=A("div"),i=A("div"),r=A("p"),o=he(s),a=ee(),l=A("p"),d=he(h),m=ee(),v=A("button"),v.innerHTML=k,w=ee(),E=A("div"),I=A("div"),M=A("p"),C=new Ua(!1),O=ee(),st(P.$$.fragment),G=ee(),U=A("div"),H=A("p"),Q=he(j),W=ee(),Pe&&Pe.c(),Y=ee(),q=A("select"),ne=A("option"),ge=he(J),ie=A("option"),pe=he(le),ye=A("option"),re=he(be),me=A("option"),X=he(ke),ue=A("option"),oe=he(_e),ae=ee(),Me.c(),this.h()},l(Ke){e=R(Ke,"DIV",{class:!0,style:!0});var We=T(e);t=R(We,"DIV",{class:!0,style:!0});var ze=T(t);i=R(ze,"DIV",{class:!0});var Et=T(i);r=R(Et,"P",{class:!0,style:!0});var rt=T(r);o=fe(rt,s),rt.forEach(_),a=te(Et),l=R(Et,"P",{style:!0});var ft=T(l);d=fe(ft,h),ft.forEach(_),Et.forEach(_),m=te(ze),v=R(ze,"BUTTON",{style:!0,"data-svelte-h":!0}),rn(v)!=="svelte-1wief1w"&&(v.innerHTML=k),ze.forEach(_),w=te(We),E=R(We,"DIV",{class:!0});var Ut=T(E);I=R(Ut,"DIV",{class:!0,style:!0});var Qe=T(I);M=R(Qe,"P",{style:!0});var yt=T(M);C=qa(yt,!1),yt.forEach(_),Qe.forEach(_),O=te(Ut),ot(P.$$.fragment,Ut),G=te(Ut),U=R(Ut,"DIV",{class:!0,style:!0});var mt=T(U);H=R(mt,"P",{});var Ft=T(H);Q=fe(Ft,j),W=te(Ft),Pe&&Pe.l(Ft),Ft.forEach(_),Y=te(mt),q=R(mt,"SELECT",{class:!0});var qt=T(q);ne=R(qt,"OPTION",{});var vt=T(ne);ge=fe(vt,J),vt.forEach(_),ie=R(qt,"OPTION",{});var $t=T(ie);pe=fe($t,le),$t.forEach(_),ye=R(qt,"OPTION",{});var dn=T(ye);re=fe(dn,be),dn.forEach(_),me=R(qt,"OPTION",{});var sn=T(me);X=fe(sn,ke),sn.forEach(_),ue=R(qt,"OPTION",{});var pn=T(ue);oe=fe(pn,_e),pn.forEach(_),qt.forEach(_),mt.forEach(_),ae=te(Ut),Me.l(Ut),Ut.forEach(_),We.forEach(_),this.h()},h(){g(r,"class","grow"),B(r,"font-size","18px"),B(l,"font-size","12px"),g(i,"class","column grow"),B(v,"background","none"),B(v,"padding","0"),B(v,"border","none"),B(v,"outline","none"),B(v,"margin","0"),B(v,"height","24px"),g(t,"class","row center-cross info-row svelte-x6sey5"),B(t,"background-color","#445"),B(t,"border-radius","6px 6px 0 0"),C.a=null,B(M,"font-size","14px"),g(I,"class","row width100 p816"),B(I,"border-bottom","1px solid #ddd"),ne.__value="friendlyFirst",fi(ne,ne.__value),ie.__value="hostileFirst",fi(ie,ie.__value),ye.__value="neutralFirst",fi(ye,ye.__value),me.__value="temporaryFirst",fi(me,me.__value),ue.__value="indefiniteFirst",fi(ue,ue.__value),g(q,"class","sort-dropdown svelte-x6sey5"),n[3]===void 0&&Wc(()=>n[36].call(q)),g(U,"class","row g8 p816 center-cross space-main"),B(U,"border-bottom","1px solid #e8e8e8"),B(U,"position","relative"),g(E,"class","panel-scrollable"),g(e,"class","panel column"),B(e,"overflow","visible"),B(e,"border-radius","6px")},m(Ke,We){Z(Ke,e,We),p(e,t),p(t,i),p(i,r),p(r,o),p(i,a),p(i,l),p(l,d),p(t,m),p(t,v),p(e,w),p(e,E),p(E,I),p(I,M),C.m(D,M),p(E,O),at(P,E,null),p(E,G),p(E,U),p(U,H),p(H,Q),p(H,W),Pe&&Pe.m(H,null),p(U,Y),p(U,q),p(q,ne),p(ne,ge),p(q,ie),p(ie,pe),p(q,ye),p(ye,re),p(q,me),p(me,X),p(q,ue),p(ue,oe),Cs(q,n[3],!0),p(E,ae),Ve[Se].m(E,null),we=!0,Te||(Ae=[nt(v,"click",n[24]),nt(q,"change",n[36])],Te=!0)},p(Ke,We){(!we||We[0]&4)&&s!==(s=Ke[2]("knownDrones.title")+"")&&Ee(o,s),(!we||We[0]&4)&&h!==(h=Ke[2]("knownDrones.description")+"")&&Ee(d,h),(!we||We[0]&4)&&D!==(D=Ke[2]("knownDrones.additionalDescription")+"")&&C.p(D);const ze={};We[0]&16&&(ze.filteredDrones=Ke[4]),We[0]&256&&(ze.datePickerCompatibleLocale=Ke[8]),We[0]&1&&(ze.iconSet=Ke[0]),!F&&We[0]&32&&(F=!0,ze.searchInput=Ke[5],Yn(()=>F=!1)),!V&&We[0]&64&&(V=!0,ze.identifierInput=Ke[6],Yn(()=>V=!1)),!$&&We[0]&128&&($=!0,ze.notesInput=Ke[7],Yn(()=>$=!1)),P.$set(ze),(!we||We[0]&4)&&j!==(j=Ke[2]("knownDrones.searchResultsDrones")+"")&&Ee(Q,j),Ke[1]?Pe?Pe.p(Ke,We):(Pe=Pg(Ke),Pe.c(),Pe.m(H,null)):Pe&&(Pe.d(1),Pe=null),(!we||We[0]&4)&&J!==(J=Ke[2]("knownDrones.sort.friendlyFirst")+"")&&Ee(ge,J),(!we||We[0]&4)&&le!==(le=Ke[2]("knownDrones.sort.hostileFirst")+"")&&Ee(pe,le),(!we||We[0]&4)&&be!==(be=Ke[2]("knownDrones.sort.neutralFirst")+"")&&Ee(re,be),(!we||We[0]&4)&&ke!==(ke=Ke[2]("knownDrones.sort.temporaryFirst")+"")&&Ee(X,ke),(!we||We[0]&4)&&_e!==(_e=Ke[2]("knownDrones.sort.indefiniteFirst")+"")&&Ee(oe,_e),We[0]&8&&Cs(q,Ke[3]);let Et=Se;Se=Ue(Ke),Se===Et?Ve[Se].p(Ke,We):(bt(),Ie(Ve[Et],1,1,()=>{Ve[Et]=null}),wt(),Me=Ve[Se],Me?Me.p(Ke,We):(Me=Ve[Se]=je[Se](Ke),Me.c()),de(Me,1),Me.m(E,null))},i(Ke){we||(de(P.$$.fragment,Ke),de(Me),we=!0)},o(Ke){Ie(P.$$.fragment,Ke),Ie(Me),we=!1},d(Ke){Ke&&_(e),lt(P),Pe&&Pe.d(),Ve[Se].d(),Te=!1,Bn(Ae)}}}function qI(n,e,t){let i,r,s,o,a,l,h,d,m,v,k,w,E,I,M,C;He(n,nn,Se=>t(45,v=Se)),He(n,Nn,Se=>t(2,w=Se));let{knownDronesService:D}=e,{iconSet:O}=e,P=new Ot(""),F=D.knownDrones;He(n,F,Se=>t(32,C=Se));let V=new Ot("indefinite");He(n,V,Se=>t(41,a=Se));const $=Pn([]);He(n,$,Se=>t(4,M=Se));const G=Pn("friendlyFirst");He(n,G,Se=>t(3,I=Se));const U=Pn([]);He(n,U,Se=>t(9,E=Se));const H=Pn(null);He(n,H,Se=>t(39,s=Se));let j,Q,W;const Y=Pn(0);let q;const ne=Pn("");He(n,ne,Se=>t(31,k=Se));const J=Pn("");He(n,J,Se=>t(1,m=Se));const ge=Pn("");He(n,ge,Se=>t(44,d=Se));const ie=Pn("");He(n,ie,Se=>t(43,h=Se));const le=new Ot(new Date);He(n,le,Se=>t(42,l=Se));const pe=new Ot(new Date(new Date().getTime()+6e4));He(n,pe,Se=>t(40,o=Se));let ye;mi(()=>{j&&setTimeout(()=>j.focus(),0),re(),(v==null?void 0:v.type)===Tt.KnownDrones&&v.prefillData&&(v.prefillData.identifier?(J.set(v.prefillData.serialNumber),ge.set(v.prefillData.identifier),ie.set(v.prefillData.notes||""),v.prefillData.expiryStart&&v.prefillData.expiryEnd?(le.set(new Date(v.prefillData.expiryStart)),pe.set(new Date(v.prefillData.expiryEnd)),V.set("fixedTerm")):V.set("indefinite"),W&&setTimeout(()=>{W.focus()},0)):(J.set(v.prefillData.serialNumber),Q&&setTimeout(()=>{Q.focus()},0)))});function be(){nn.goto(null)}async function re(){console.log("Resetting and clearing editing state"),P.set(""),H.set(null),J.set(""),ge.set(""),ie.set("");const Se=new Date;le.set(new Date(Se.getTime())),pe.set(new Date(Se.getTime()+6e4)),await Xc(),V.set("indefinite"),j&&j.focus()}function me(Se){var we;P.set(""),H.set(Se),J.set(Se.serialNumber),ge.set(Se.identifier||""),ie.set(((we=Se.notes)==null?void 0:we.trim())||""),V.set(Se.expiryStart&&Se.expiryEnd?"fixedTerm":"indefinite");const Me=new Date;Se.expiryStart&&Se.expiryEnd?(le.set(Se.expiryStart?new Date(Se.expiryStart):Me),pe.set(Se.expiryEnd?new Date(Se.expiryEnd):new Date(Me.getTime()+6e4))):(le.set(Me),pe.set(new Date(Me.getTime()+6e4))),Q&&Q.focus(),Y.set(0),clearTimeout(q)}async function ke(Se){P.set("");const Me=m.trim().toUpperCase();if(!s&&!r){console.error("Serial number is invalid for adding a new drone."),j&&j.focus();return}if(a==="fixedTerm"&&o<=l){console.error("Expiry end date must be after start date.");return}const we=s?s.relationship:Se,Te={identifier:d.trim(),notes:h.trim(),expiryStart:a==="fixedTerm"?l.getTime():null,expiryEnd:a==="fixedTerm"?o.getTime():null};if(D){if(s)try{await D.updateDroneRelation(s.id,Me,we,Te)}catch(Ne){console.error("Failed to update drone relation:",Ne),P.set(Ne.message||"Failed to update drone relation");return}else try{await D.addDroneRelation(Me,we,Te)}catch(Ne){console.error("Failed to add drone relation:",Ne),P.set(Ne.message||"Failed to add drone relation");return}Y.set(1),clearTimeout(q),q=setTimeout(()=>{Y.set(0)},3e3),s!==null||j&&j.focus()}re()}async function X(Se){if(D){try{await D.deleteDroneRelation(Se)}catch(Me){console.error("Failed to delete drone relation:",Me),P.set(Me.message||"Failed to delete drone relation");return}s&&s.id===Se&&re()}}function ue(Se){j=Se,t(5,j)}function _e(Se){Q=Se,t(6,Q)}function oe(Se){W=Se,t(7,W)}function ae(){I=Ev(this),G.set(I)}return n.$$set=Se=>{"knownDronesService"in Se&&t(29,D=Se.knownDronesService),"iconSet"in Se&&t(0,O=Se.iconSet)},n.$$.update=()=>{if(n.$$.dirty[1]&2&&t(30,i=C?Array.from(C.values()).map(Se=>({id:Se.id,serialNumber:Se.serialNumber,relationship:Se.relationship,identifier:Se.identifier??void 0,notes:Se.notes??void 0,expiryStart:Se.expiryStart?new Date(Se.expiryStart):void 0,expiryEnd:Se.expiryEnd?new Date(Se.expiryEnd):void 0})):[]),n.$$.dirty[0]&1073741826&&kn($,M=m?i.filter(Se=>{var Me;return Se.serialNumber.toUpperCase().includes(m.toUpperCase())||((Me=Se.identifier)==null?void 0:Me.toUpperCase().includes(m.toUpperCase()))}):i,M),n.$$.dirty[0]&24){const Se=[...M];Se.sort((Me,we)=>{if(I==="friendlyFirst"){if(Me.relationship===an.FRIENDLY&&we.relationship!==an.FRIENDLY)return-1;if(Me.relationship!==an.FRIENDLY&&we.relationship===an.FRIENDLY)return 1}else if(I==="hostileFirst"){if(Me.relationship===an.HOSTILE&&we.relationship!==an.HOSTILE)return-1;if(Me.relationship!==an.HOSTILE&&we.relationship===an.HOSTILE)return 1}else if(I==="neutralFirst"){if(Me.relationship===an.NEUTRAL&&we.relationship!==an.NEUTRAL)return-1;if(Me.relationship!==an.NEUTRAL&&we.relationship===an.NEUTRAL)return 1}else if(I==="temporaryFirst"){const Te=!!Me.expiryStart,Ae=!!we.expiryStart;if(Te&&!Ae)return-1;if(!Te&&Ae)return 1}else if(I==="indefiniteFirst"){const Te=!!Me.expiryStart,Ae=!!we.expiryStart;if(!Te&&Ae)return-1;if(Te&&!Ae)return 1}return(Me.identifier||"").localeCompare(we.identifier||"")}),kn(U,E=Se,E)}if(n.$$.dirty[0]&4){const Se=Array(7).fill(null).map((we,Te)=>w(`datepicker.weekdays.${Te}`)),Me=Array(12).fill(null).map((we,Te)=>w(`datepicker.months.${Te}`));t(8,ye={weekdays:Se,months:Me,weekStartsOn:1})}n.$$.dirty[1]&1&&(r=/^[A-Z0-9]*$/.test(k))},[O,m,w,I,M,j,Q,W,ye,E,P,F,V,$,G,U,H,Y,ne,J,ge,ie,le,pe,be,re,me,ke,X,D,i,k,C,ue,_e,oe,ae]}class ZI extends Wt{constructor(e){super(),Xt(this,e,qI,UI,zt,{knownDronesService:29,iconSet:0},null,[-1,-1])}}const Dg="/weather_icons/clear-day.svg",Ag="/weather_icons/partly-cloudy-day.svg",YI="/weather_icons/cloudy.svg",jI="/weather_icons/overcast.svg",Rg="/weather_icons/partly-cloudy-day-rain.svg",WI="/weather_icons/rain.svg",XI="/weather_icons/overcast-rain.svg",Og="/weather_icons/extreme-rain.svg",KI="/weather_icons/hail.svg",JI="/weather_icons/sleet.svg",QI="/weather_icons/overcast-sleet.svg",xg="/weather_icons/partly-cloudy-day-snow.svg",eM="/weather_icons/snow.svg",tM="/weather_icons/overcast-snow.svg",Fg="/weather_icons/extreme-snow.svg",nM="/weather_icons/mist.svg",iM="/weather_icons/fog.svg",rM="/weather_icons/snowflake.svg",Bg="/weather_icons/barometer.svg";function sM(n){return{type:"FeatureCollection",features:n.map(e=>{var t,i;return{type:"Feature",geometry:{type:"Point",coordinates:[(t=e.coordinates)==null?void 0:t.lng,(i=e.coordinates)==null?void 0:i.lat]},properties:e}})}}function oM(){return Hr("/api/v1/weather/latest").then(e=>{let t=e;t=t.filter(r=>typeof r.airTemperature=="number"&&!isNaN(r.airTemperature)||typeof r.windSpeed=="number"&&!isNaN(r.windSpeed)||typeof r.visibility=="number"&&!isNaN(r.visibility)||typeof r.precipitations=="number"&&!isNaN(r.precipitations)||typeof r.phenomenon=="string"&&r.phenomenon.length>0).map(r=>({...r,relativeHumidity:Math.round(r.relativeHumidity??0)}));const i=sM(t);return Ct.geoJSON(i,{pointToLayer:(r,s)=>{var I,M,C,D,O;const o=(I=r.properties)==null?void 0:I.airTemperature,a=(M=r.properties)==null?void 0:M.windSpeed,l=(C=r.properties)==null?void 0:C.precipitations,h=(D=r.properties)==null?void 0:D.visibility;let d=[];typeof o=="number"&&!isNaN(o)&&d.push(`${Math.round(o)}C`),typeof l=="number"&&!isNaN(l)&&l>0&&d.push(`${l.toFixed(1)}mm`),typeof a=="number"&&!isNaN(a)&&d.push(`${Math.round(a)}m/s`),typeof h=="number"&&!isNaN(h)&&d.push(`${h}km`);const m=d.join("  "),v=((O=r.properties)==null?void 0:O.phenomenon)??"";let k=Dg;v?k={Clear:Dg,Overcast:jI,"Few clouds":Ag,"Variable clouds":YI,"Cloudy with clear spells":Ag,"Light snow shower":xg,"Moderate snow shower":xg,"Heavy snow shower":Fg,"Light shower":Rg,"Moderate shower":Rg,"Heavy shower":Og,"Light rain":WI,"Moderate rain":XI,"Heavy rain":Og,Glaze:rM,"Light sleet":JI,"Moderate sleet":QI,"Light snowfall":eM,"Moderate snowfall":tM,"Heavy snowfall":Fg,Hail:KI,Mist:nM,Fog:iM}[v]||Bg:k=Bg;const w=`
                        <div style="display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;">
                            <img src="${k}" style="width:40px;height:40px;display:block;filter:drop-shadow(0 0 8px #222) drop-shadow(0 0 16px #2228);" />
                            ${m?`<div style="width:fit-content;white-space:nowrap;background:rgba(32,32,32,0.3);color:#fff;border-radius:4px;padding:2px 4px;margin-top:2px;font-size:0.9em;text-shadow:0 1px 6px #222;">${m}</div>`:""}
                        </div>
                    `,E=Ct.divIcon({className:"weather-label",html:w,iconSize:[40,40],iconAnchor:[20,20]});return Ct.marker(s,{icon:E,interactive:!0})},attribution:"Weather data: <a href='https://www.ilmateenistus.ee/'>Keskonnaagentuur</a>, <a href='https://bas.dev/work/meteocons'>Meteocons</a>"})})}const Vh=new To(oM,{ttlSecs:10*60,keepAliveWithZeroSubscribers:!1,loadInitially:!0,retryPeriodSecs:10});function $g(n,e,t){const i=n.slice();return i[43]=e[t],i}function aM(n){let e,t,i,r,s,o=n[9](n[43].displayName)+"",a,l;return{c(){e=A("img"),r=ee(),s=A("p"),a=he(o),l=ee(),this.h()},l(h){e=R(h,"IMG",{class:!0,src:!0,style:!0,alt:!0}),r=te(h),s=R(h,"P",{class:!0,style:!0});var d=T(s);a=fe(d,o),d.forEach(_),l=te(h),this.h()},h(){g(e,"class","layer-option"),zi(e.src,t=n[43].displayPictureURL)||g(e,"src",t),B(e,"width","50px"),B(e,"min-height","50px"),B(e,"height","50px"),B(e,"object-fit","cover"),g(e,"alt",i=n[9](n[43].displayName)),g(s,"class","layer-name"),B(s,"font-size","14px"),B(s,"text-align","center")},m(h,d){Z(h,e,d),Z(h,r,d),Z(h,s,d),p(s,a),Z(h,l,d)},p(h,d){d[0]&1&&!zi(e.src,t=h[43].displayPictureURL)&&g(e,"src",t),d[0]&513&&i!==(i=h[9](h[43].displayName))&&g(e,"alt",i),d[0]&513&&o!==(o=h[9](h[43].displayName)+"")&&Ee(a,o)},d(h){h&&(_(e),_(r),_(s),_(l))}}}function Vg(n){let e,t;function i(){return n[34](n[43])}return e=new fn({props:{class:"column center-cross g4 "+(n[10]===n[43]?"selected":"not-selected"),onclick:i,$$slots:{default:[aM]},$$scope:{ctx:n}}}),{c(){st(e.$$.fragment)},l(r){ot(e.$$.fragment,r)},m(r,s){at(e,r,s),t=!0},p(r,s){n=r;const o={};s[0]&1025&&(o.class="column center-cross g4 "+(n[10]===n[43]?"selected":"not-selected")),s[0]&3&&(o.onclick=i),s[0]&513|s[1]&32768&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(r){t||(de(e.$$.fragment,r),t=!0)},o(r){Ie(e.$$.fragment,r),t=!1},d(r){lt(e,r)}}}function zg(n){var Q,W;let e,t,i,r,s,o,a=n[9]("layerSettings.mapDataLayers")+"",l,h,d,m,v,k,w,E=(Q=n[11])==null?void 0:Q.hasPermission(301),I,M=(W=n[11])==null?void 0:W.hasPermission(200),C,D,O,P,F,V,$,G,U;k=new fn({props:{class:"column center-cross g4 "+(n[12]?"selected":"not-selected"),onclick:n[35],$$slots:{default:[lM]},$$scope:{ctx:n}}});let H=E&&Gg(n),j=M&&Hg(n);return D=new fn({props:{class:"column center-cross g4 "+(n[15]?"selected":"not-selected"),onclick:n[38],$$slots:{default:[hM]},$$scope:{ctx:n}}}),P=new fn({props:{class:"column center-cross g4 "+(n[8]?"selected":"not-selected"),onclick:n[25],style:"opacity: "+(n[3]?.5:1)+";",disabled:!n[6],$$slots:{default:[fM]},$$scope:{ctx:n}}}),V=new fn({props:{class:"column center-cross g4 "+(n[7]?"selected":"not-selected"),onclick:n[26],style:"opacity: "+(n[4]?.5:1)+";",disabled:!n[5],$$slots:{default:[dM]},$$scope:{ctx:n}}}),G=new fn({props:{class:"column center-cross g4 "+(n[16]?"selected":"not-selected"),onclick:n[39],$$slots:{default:[gM]},$$scope:{ctx:n}}}),{c(){e=A("div"),t=ee(),i=A("div"),r=A("div"),s=A("p"),o=A("b"),l=he(a),h=ee(),d=A("hr"),m=ee(),v=A("div"),st(k.$$.fragment),w=ee(),H&&H.c(),I=ee(),j&&j.c(),C=ee(),st(D.$$.fragment),O=ee(),st(P.$$.fragment),F=ee(),st(V.$$.fragment),$=ee(),st(G.$$.fragment),this.h()},l(Y){e=R(Y,"DIV",{class:!0}),T(e).forEach(_),t=te(Y),i=R(Y,"DIV",{class:!0});var q=T(i);r=R(q,"DIV",{class:!0,style:!0});var ne=T(r);s=R(ne,"P",{});var J=T(s);o=R(J,"B",{});var ge=T(o);l=fe(ge,a),ge.forEach(_),J.forEach(_),ne.forEach(_),h=te(q),d=R(q,"HR",{}),m=te(q),v=R(q,"DIV",{class:!0,style:!0});var ie=T(v);ot(k.$$.fragment,ie),w=te(ie),H&&H.l(ie),I=te(ie),j&&j.l(ie),C=te(ie),ot(D.$$.fragment,ie),O=te(ie),ot(P.$$.fragment,ie),F=te(ie),ot(V.$$.fragment,ie),$=te(ie),ot(G.$$.fragment,ie),ie.forEach(_),q.forEach(_),this.h()},h(){g(e,"class","sep"),g(r,"class","row center-cross p816"),B(r,"justify-content","space-between"),g(v,"class","g8 p816"),B(v,"display","grid"),B(v,"grid-template-columns","repeat(auto-fill, minmax(60px, 1fr))"),g(i,"class","column")},m(Y,q){Z(Y,e,q),Z(Y,t,q),Z(Y,i,q),p(i,r),p(r,s),p(s,o),p(o,l),p(i,h),p(i,d),p(i,m),p(i,v),at(k,v,null),p(v,w),H&&H.m(v,null),p(v,I),j&&j.m(v,null),p(v,C),at(D,v,null),p(v,O),at(P,v,null),p(v,F),at(V,v,null),p(v,$),at(G,v,null),U=!0},p(Y,q){var pe,ye;(!U||q[0]&512)&&a!==(a=Y[9]("layerSettings.mapDataLayers")+"")&&Ee(l,a);const ne={};q[0]&4096&&(ne.class="column center-cross g4 "+(Y[12]?"selected":"not-selected")),q[0]&4096&&(ne.onclick=Y[35]),q[0]&512|q[1]&32768&&(ne.$$scope={dirty:q,ctx:Y}),k.$set(ne),q[0]&2048&&(E=(pe=Y[11])==null?void 0:pe.hasPermission(301)),E?H?(H.p(Y,q),q[0]&2048&&de(H,1)):(H=Gg(Y),H.c(),de(H,1),H.m(v,I)):H&&(bt(),Ie(H,1,1,()=>{H=null}),wt()),q[0]&2048&&(M=(ye=Y[11])==null?void 0:ye.hasPermission(200)),M?j?(j.p(Y,q),q[0]&2048&&de(j,1)):(j=Hg(Y),j.c(),de(j,1),j.m(v,C)):j&&(bt(),Ie(j,1,1,()=>{j=null}),wt());const J={};q[0]&32768&&(J.class="column center-cross g4 "+(Y[15]?"selected":"not-selected")),q[0]&32768&&(J.onclick=Y[38]),q[0]&512|q[1]&32768&&(J.$$scope={dirty:q,ctx:Y}),D.$set(J);const ge={};q[0]&256&&(ge.class="column center-cross g4 "+(Y[8]?"selected":"not-selected")),q[0]&8&&(ge.style="opacity: "+(Y[3]?.5:1)+";"),q[0]&64&&(ge.disabled=!Y[6]),q[0]&512|q[1]&32768&&(ge.$$scope={dirty:q,ctx:Y}),P.$set(ge);const ie={};q[0]&128&&(ie.class="column center-cross g4 "+(Y[7]?"selected":"not-selected")),q[0]&16&&(ie.style="opacity: "+(Y[4]?.5:1)+";"),q[0]&32&&(ie.disabled=!Y[5]),q[0]&512|q[1]&32768&&(ie.$$scope={dirty:q,ctx:Y}),V.$set(ie);const le={};q[0]&65536&&(le.class="column center-cross g4 "+(Y[16]?"selected":"not-selected")),q[0]&65536&&(le.onclick=Y[39]),q[0]&512|q[1]&32768&&(le.$$scope={dirty:q,ctx:Y}),G.$set(le)},i(Y){U||(de(k.$$.fragment,Y),de(H),de(j),de(D.$$.fragment,Y),de(P.$$.fragment,Y),de(V.$$.fragment,Y),de(G.$$.fragment,Y),U=!0)},o(Y){Ie(k.$$.fragment,Y),Ie(H),Ie(j),Ie(D.$$.fragment,Y),Ie(P.$$.fragment,Y),Ie(V.$$.fragment,Y),Ie(G.$$.fragment,Y),U=!1},d(Y){Y&&(_(e),_(t),_(i)),lt(k),H&&H.d(),j&&j.d(),lt(D),lt(P),lt(V),lt(G)}}}function lM(n){let e,t,i,r,s,o=n[9]("layerSettings.flightRestrictionZones")+"",a;return{c(){e=A("img"),r=ee(),s=A("p"),a=he(o),this.h()},l(l){e=R(l,"IMG",{class:!0,src:!0,style:!0,alt:!0}),r=te(l),s=R(l,"P",{class:!0,style:!0});var h=T(s);a=fe(h,o),h.forEach(_),this.h()},h(){g(e,"class","layer-option"),zi(e.src,t="/layer_previews/airzone_layer.png")||g(e,"src",t),B(e,"width","50px"),B(e,"min-height","50px"),B(e,"height","50px"),B(e,"object-fit","cover"),g(e,"alt",i=n[9]("layerSettings.flightRestrictionZones")),g(s,"class","layer-name"),B(s,"font-size","14px"),B(s,"text-align","center")},m(l,h){Z(l,e,h),Z(l,r,h),Z(l,s,h),p(s,a)},p(l,h){h[0]&512&&i!==(i=l[9]("layerSettings.flightRestrictionZones"))&&g(e,"alt",i),h[0]&512&&o!==(o=l[9]("layerSettings.flightRestrictionZones")+"")&&Ee(a,o)},d(l){l&&(_(e),_(r),_(s))}}}function Gg(n){let e,t;return e=new fn({props:{class:"column center-cross g4 "+(n[13]?"selected":"not-selected"),onclick:n[36],$$slots:{default:[uM]},$$scope:{ctx:n}}}),{c(){st(e.$$.fragment)},l(i){ot(e.$$.fragment,i)},m(i,r){at(e,i,r),t=!0},p(i,r){const s={};r[0]&8192&&(s.class="column center-cross g4 "+(i[13]?"selected":"not-selected")),r[0]&8192&&(s.onclick=i[36]),r[0]&512|r[1]&32768&&(s.$$scope={dirty:r,ctx:i}),e.$set(s)},i(i){t||(de(e.$$.fragment,i),t=!0)},o(i){Ie(e.$$.fragment,i),t=!1},d(i){lt(e,i)}}}function uM(n){let e,t,i,r,s,o=n[9]("layerSettings.geofenceZones")+"",a;return{c(){e=A("img"),r=ee(),s=A("p"),a=he(o),this.h()},l(l){e=R(l,"IMG",{class:!0,src:!0,style:!0,alt:!0}),r=te(l),s=R(l,"P",{class:!0,style:!0});var h=T(s);a=fe(h,o),h.forEach(_),this.h()},h(){g(e,"class","layer-option"),zi(e.src,t="/layer_previews/geofence_layer.png")||g(e,"src",t),B(e,"width","50px"),B(e,"min-height","50px"),B(e,"height","50px"),B(e,"object-fit","cover"),g(e,"alt",i=n[9]("layerSettings.geofenceZones")),g(s,"class","layer-name"),B(s,"font-size","14px"),B(s,"text-align","center")},m(l,h){Z(l,e,h),Z(l,r,h),Z(l,s,h),p(s,a)},p(l,h){h[0]&512&&i!==(i=l[9]("layerSettings.geofenceZones"))&&g(e,"alt",i),h[0]&512&&o!==(o=l[9]("layerSettings.geofenceZones")+"")&&Ee(a,o)},d(l){l&&(_(e),_(r),_(s))}}}function Hg(n){let e,t;return e=new fn({props:{class:"column center-cross g4 "+(n[14]?"selected":"not-selected"),onclick:n[37],$$slots:{default:[cM]},$$scope:{ctx:n}}}),{c(){st(e.$$.fragment)},l(i){ot(e.$$.fragment,i)},m(i,r){at(e,i,r),t=!0},p(i,r){const s={};r[0]&16384&&(s.class="column center-cross g4 "+(i[14]?"selected":"not-selected")),r[0]&16384&&(s.onclick=i[37]),r[0]&512|r[1]&32768&&(s.$$scope={dirty:r,ctx:i}),e.$set(s)},i(i){t||(de(e.$$.fragment,i),t=!0)},o(i){Ie(e.$$.fragment,i),t=!1},d(i){lt(e,i)}}}function cM(n){let e,t,i,r,s,o=n[9]("layerSettings.sensors")+"",a;return{c(){e=A("img"),r=ee(),s=A("p"),a=he(o),this.h()},l(l){e=R(l,"IMG",{class:!0,src:!0,style:!0,alt:!0}),r=te(l),s=R(l,"P",{class:!0,style:!0});var h=T(s);a=fe(h,o),h.forEach(_),this.h()},h(){g(e,"class","layer-option"),zi(e.src,t="/layer_previews/sensors_layer.png")||g(e,"src",t),B(e,"width","50px"),B(e,"min-height","50px"),B(e,"height","50px"),B(e,"object-fit","cover"),g(e,"alt",i=n[9]("layerSettings.sensors")),g(s,"class","layer-name"),B(s,"font-size","14px"),B(s,"text-align","center")},m(l,h){Z(l,e,h),Z(l,r,h),Z(l,s,h),p(s,a)},p(l,h){h[0]&512&&i!==(i=l[9]("layerSettings.sensors"))&&g(e,"alt",i),h[0]&512&&o!==(o=l[9]("layerSettings.sensors")+"")&&Ee(a,o)},d(l){l&&(_(e),_(r),_(s))}}}function hM(n){let e,t,i,r,s,o=n[9]("layerSettings.mannedAircrafts")+"",a;return{c(){e=A("img"),r=ee(),s=A("p"),a=he(o),this.h()},l(l){e=R(l,"IMG",{class:!0,src:!0,style:!0,alt:!0}),r=te(l),s=R(l,"P",{class:!0,style:!0});var h=T(s);a=fe(h,o),h.forEach(_),this.h()},h(){g(e,"class","layer-option"),zi(e.src,t="/layer_previews/manned_aircraft_layer.png")||g(e,"src",t),B(e,"width","50px"),B(e,"min-height","50px"),B(e,"height","50px"),B(e,"object-fit","cover"),g(e,"alt",i=n[9]("layerSettings.mannedAircrafts")),g(s,"class","layer-name"),B(s,"font-size","14px"),B(s,"text-align","center")},m(l,h){Z(l,e,h),Z(l,r,h),Z(l,s,h),p(s,a)},p(l,h){h[0]&512&&i!==(i=l[9]("layerSettings.mannedAircrafts"))&&g(e,"alt",i),h[0]&512&&o!==(o=l[9]("layerSettings.mannedAircrafts")+"")&&Ee(a,o)},d(l){l&&(_(e),_(r),_(s))}}}function fM(n){let e,t,i,r,s,o=n[9]("layerSettings.gridLayer")+"",a;return{c(){e=A("img"),r=ee(),s=A("p"),a=he(o),this.h()},l(l){e=R(l,"IMG",{class:!0,src:!0,style:!0,alt:!0}),r=te(l),s=R(l,"P",{class:!0,style:!0});var h=T(s);a=fe(h,o),h.forEach(_),this.h()},h(){g(e,"class","layer-option"),zi(e.src,t="/layer_previews/grid_layer.png")||g(e,"src",t),B(e,"width","50px"),B(e,"min-height","50px"),B(e,"height","50px"),B(e,"object-fit","cover"),g(e,"alt",i=n[9]("layerSettings.gridLayer")),g(s,"class","layer-name"),B(s,"font-size","14px"),B(s,"text-align","center")},m(l,h){Z(l,e,h),Z(l,r,h),Z(l,s,h),p(s,a)},p(l,h){h[0]&512&&i!==(i=l[9]("layerSettings.gridLayer"))&&g(e,"alt",i),h[0]&512&&o!==(o=l[9]("layerSettings.gridLayer")+"")&&Ee(a,o)},d(l){l&&(_(e),_(r),_(s))}}}function dM(n){let e,t,i,r,s,o=n[9]("layerSettings.cadastralLayer")+"",a;return{c(){e=A("img"),r=ee(),s=A("p"),a=he(o),this.h()},l(l){e=R(l,"IMG",{class:!0,src:!0,style:!0,alt:!0}),r=te(l),s=R(l,"P",{class:!0,style:!0});var h=T(s);a=fe(h,o),h.forEach(_),this.h()},h(){g(e,"class","layer-option"),zi(e.src,t="/layer_previews/cadastral_layer.png")||g(e,"src",t),B(e,"width","50px"),B(e,"min-height","50px"),B(e,"height","50px"),B(e,"object-fit","cover"),g(e,"alt",i=n[9]("layerSettings.cadastralLayer")),g(s,"class","layer-name"),B(s,"font-size","14px"),B(s,"text-align","center")},m(l,h){Z(l,e,h),Z(l,r,h),Z(l,s,h),p(s,a)},p(l,h){h[0]&512&&i!==(i=l[9]("layerSettings.cadastralLayer"))&&g(e,"alt",i),h[0]&512&&o!==(o=l[9]("layerSettings.cadastralLayer")+"")&&Ee(a,o)},d(l){l&&(_(e),_(r),_(s))}}}function gM(n){let e,t,i,r,s,o=n[9]("layerSettings.weatherLayer")+"",a;return{c(){e=A("img"),r=ee(),s=A("p"),a=he(o),this.h()},l(l){e=R(l,"IMG",{class:!0,src:!0,style:!0,alt:!0}),r=te(l),s=R(l,"P",{class:!0,style:!0});var h=T(s);a=fe(h,o),h.forEach(_),this.h()},h(){g(e,"class","layer-option"),zi(e.src,t="/layer_previews/weather_layer.png")||g(e,"src",t),B(e,"width","50px"),B(e,"min-height","50px"),B(e,"height","50px"),B(e,"object-fit","cover"),g(e,"alt",i=n[9]("layerSettings.weatherLayer")),g(s,"class","layer-name"),B(s,"font-size","14px"),B(s,"text-align","center")},m(l,h){Z(l,e,h),Z(l,r,h),Z(l,s,h),p(s,a)},p(l,h){h[0]&512&&i!==(i=l[9]("layerSettings.weatherLayer"))&&g(e,"alt",i),h[0]&512&&o!==(o=l[9]("layerSettings.weatherLayer")+"")&&Ee(a,o)},d(l){l&&(_(e),_(r),_(s))}}}function mM(n){let e,t,i,r,s,o=n[9]("layerSettings.mapLayers")+"",a,l,h,d,m,v,k,w,E,I=Bt(n[0]),M=[];for(let O=0;O<I.length;O+=1)M[O]=Vg($g(n,I,O));const C=O=>Ie(M[O],1,1,()=>{M[O]=null});let D=n[11]&&zg(n);return{c(){e=A("div"),t=A("div"),i=A("div"),r=A("p"),s=A("b"),a=he(o),l=ee(),h=A("hr"),d=ee(),m=A("div");for(let O=0;O<M.length;O+=1)M[O].c();v=ee(),D&&D.c(),this.h()},l(O){e=R(O,"DIV",{class:!0,style:!0});var P=T(e);t=R(P,"DIV",{class:!0});var F=T(t);i=R(F,"DIV",{class:!0,style:!0});var V=T(i);r=R(V,"P",{});var $=T(r);s=R($,"B",{});var G=T(s);a=fe(G,o),G.forEach(_),$.forEach(_),V.forEach(_),l=te(F),h=R(F,"HR",{}),d=te(F),m=R(F,"DIV",{class:!0,style:!0});var U=T(m);for(let H=0;H<M.length;H+=1)M[H].l(U);U.forEach(_),F.forEach(_),v=te(P),D&&D.l(P),P.forEach(_),this.h()},h(){g(i,"class","row center-cross p816"),B(i,"justify-content","space-between"),g(m,"class","p816 g8"),B(m,"display","grid"),B(m,"grid-template-columns","repeat(auto-fill, minmax(60px, 1fr))"),g(t,"class","column"),g(e,"class","panel column grow rel"),B(e,"cursor","default"),B(e,"width","275px"),B(e,"max-width","100%")},m(O,P){Z(O,e,P),p(e,t),p(t,i),p(i,r),p(r,s),p(s,a),p(t,l),p(t,h),p(t,d),p(t,m);for(let F=0;F<M.length;F+=1)M[F]&&M[F].m(m,null);p(e,v),D&&D.m(e,null),n[40](e),k=!0,w||(E=[nt(e,"click",A0(n[32])),nt(e,"touchstart",A0(n[33]))],w=!0)},p(O,P){if((!k||P[0]&512)&&o!==(o=O[9]("layerSettings.mapLayers")+"")&&Ee(a,o),P[0]&1539){I=Bt(O[0]);let F;for(F=0;F<I.length;F+=1){const V=$g(O,I,F);M[F]?(M[F].p(V,P),de(M[F],1)):(M[F]=Vg(V),M[F].c(),de(M[F],1),M[F].m(m,null))}for(bt(),F=I.length;F<M.length;F+=1)C(F);wt()}O[11]?D?(D.p(O,P),P[0]&2048&&de(D,1)):(D=zg(O),D.c(),de(D,1),D.m(e,null)):D&&(bt(),Ie(D,1,1,()=>{D=null}),wt())},i(O){if(!k){for(let P=0;P<I.length;P+=1)de(M[P]);de(D),k=!0}},o(O){M=M.filter(Boolean);for(let P=0;P<M.length;P+=1)Ie(M[P]);Ie(D),k=!1},d(O){O&&_(e),ui(M,O),D&&D.d(),n[40](null),w=!1,Bn(E)}}}function _M(n,e,t){let i,r,s,o,a,l,h,d,m=$e,v=()=>(m(),m=Dt(F,ae=>t(10,d=ae)),F),k,w,E,I,M,C;He(n,Nn,ae=>t(9,h=ae)),He(n,Li,ae=>t(11,k=ae)),n.$$.on_destroy.push(()=>m());let{layers:D}=e,{map:O}=e,{mapManager:P}=e,{mapCurrentLayer:F}=e;v();let{onLayerSettingsToggle:V}=e,$,{geofence_layer_shown:G,airzones_layer_shown:U,sensors_layer_shown:H,manned_aircrafts_layer_shown:j,grid_layer_shown:Q,cadastral_layer_shown:W,weather_layer_shown:Y}=ii.settings.fields;He(n,G,ae=>t(13,E=ae)),He(n,U,ae=>t(12,w=ae)),He(n,H,ae=>t(14,I=ae)),He(n,j,ae=>t(15,M=ae)),He(n,Q,ae=>t(8,a=ae)),He(n,W,ae=>t(7,o=ae)),He(n,Y,ae=>t(16,C=ae));let q=!1,ne=!1;const J=P.availableLayers;He(n,J,ae=>t(31,l=ae));function ge(){const ae=O.getZoom();t(3,q=ae<(P.allLayers["1x1UTMGridOverlayLayer"].minZoom||13)),t(4,ne=ae<(P.allLayers.CadastralOverlayLayer.minZoom||13))}function ie(ae){const Se=document.getElementById("layers-button");$&&!$.contains(ae.target)&&Se&&!Se.contains(ae.target)&&V()}function le(){if(q&&a){const ae=P.allLayers["1x1UTMGridOverlayLayer"].minZoom||13;O.setZoom(ae);return}Q.set(!a)}function pe(){if(ne&&o){const ae=P.allLayers.CadastralOverlayLayer.minZoom||13;O.setZoom(ae);return}W.set(!o)}mi(()=>{document.addEventListener("touchstart",ie),O.on("zoomend",ge),ge()}),ls(()=>{document.removeEventListener("touchstart",ie),O.off("zoomend",ge)});function ye(ae){tf.call(this,n,ae)}function be(ae){tf.call(this,n,ae)}const re=ae=>F.set(ae),me=()=>U.set(!w),ke=()=>G.set(!E),X=()=>H.set(!I),ue=()=>j.set(!M),_e=()=>Y.set(!C);function oe(ae){un[ae?"unshift":"push"](()=>{$=ae,t(2,$)})}return n.$$set=ae=>{"layers"in ae&&t(0,D=ae.layers),"map"in ae&&t(27,O=ae.map),"mapManager"in ae&&t(28,P=ae.mapManager),"mapCurrentLayer"in ae&&v(t(1,F=ae.mapCurrentLayer)),"onLayerSettingsToggle"in ae&&t(29,V=ae.onLayerSettingsToggle)},n.$$.update=()=>{n.$$.dirty[1]&1&&t(30,i=new Set(l.filter(ae=>ae.type==="overlay").map(ae=>ae.id))),n.$$.dirty[0]&1073741824&&t(6,r=i.has("grid")),n.$$.dirty[0]&1073741824&&t(5,s=i.has("cadastral"))},[D,F,$,q,ne,s,r,o,a,h,d,k,w,E,I,M,C,G,U,H,j,Q,W,Y,J,le,pe,O,P,V,i,l,ye,be,re,me,ke,X,ue,_e,oe]}class pM extends Wt{constructor(e){super(),Xt(this,e,_M,mM,zt,{layers:0,map:27,mapManager:28,mapCurrentLayer:1,onLayerSettingsToggle:29},null,[-1,-1])}}function Ug(n){let e,t;return e=new pM({props:{layers:n[4],map:n[0],mapManager:n[1],mapCurrentLayer:n[2],onLayerSettingsToggle:n[8]}}),{c(){st(e.$$.fragment)},l(i){ot(e.$$.fragment,i)},m(i,r){at(e,i,r),t=!0},p(i,r){const s={};r&16&&(s.layers=i[4]),r&1&&(s.map=i[0]),r&2&&(s.mapManager=i[1]),r&4&&(s.mapCurrentLayer=i[2]),e.$set(s)},i(i){t||(de(e.$$.fragment,i),t=!0)},o(i){Ie(e.$$.fragment,i),t=!1},d(i){lt(e,i)}}}function vM(n){let e,t,i,r,s,o,a,l,h=n[6]("mapLayers.layers")+"",d,m,v,k,w,E,I,M=n[3]&&Ug(n);return{c(){e=A("div"),t=A("div"),i=A("img"),o=ee(),a=A("div"),l=A("span"),d=he(h),m=ee(),v=A("div"),k=ee(),M&&M.c(),this.h()},l(C){e=R(C,"DIV",{class:!0,style:!0,role:!0});var D=T(e);t=R(D,"DIV",{id:!0,class:!0,style:!0});var O=T(t);i=R(O,"IMG",{src:!0,style:!0,alt:!0}),o=te(O),a=R(O,"DIV",{class:!0,style:!0});var P=T(a);l=R(P,"SPAN",{class:!0,style:!0});var F=T(l);d=fe(F,h),F.forEach(_),m=te(P),v=R(P,"DIV",{class:!0,style:!0}),T(v).forEach(_),P.forEach(_),O.forEach(_),k=te(D),M&&M.l(D),D.forEach(_),this.h()},h(){zi(i.src,r=n[5].displayPictureURL)||g(i,"src",r),B(i,"width","100%"),B(i,"height","100%"),B(i,"object-fit","cover"),g(i,"alt",s=n[5].displayName),g(l,"class","noselect svelte-by672a"),B(l,"z-index","1"),B(l,"bottom","0"),B(l,"font-weight","600"),B(l,"font-size","14px"),g(v,"class","gradient svelte-by672a"),B(v,"position","absolute"),B(v,"bottom","0"),B(v,"left","0"),B(v,"width","100%"),B(v,"height","60%"),B(v,"background","linear-gradient(to top, rgba(0,0,0,0.8) 0%, rgba(0,0,0,0) 100%)"),g(a,"class","column center-cross center-main"),B(a,"width","100%"),B(a,"height","100%"),B(a,"position","absolute"),B(a,"top","0"),B(a,"left","0"),B(a,"justify-content","flex-end"),B(a,"align-items","center"),B(a,"padding","8px"),g(t,"id","layers-button"),g(t,"class","layer-option chosen-layer rel svelte-by672a"),B(t,"width","80px"),B(t,"min-height","80px"),B(t,"height","80px"),g(e,"class","column g8 container p16 space-cross svelte-by672a"),B(e,"flex-direction","column-reverse"),g(e,"role","group")},m(C,D){Z(C,e,D),p(e,t),p(t,i),p(t,o),p(t,a),p(a,l),p(l,d),p(a,m),p(a,v),p(e,k),M&&M.m(e,null),w=!0,E||(I=[nt(e,"mouseenter",n[9]),nt(e,"mouseleave",n[10]),nt(e,"touchstart",n[11],{passive:!0})],E=!0)},p(C,[D]){(!w||D&32&&!zi(i.src,r=C[5].displayPictureURL))&&g(i,"src",r),(!w||D&32&&s!==(s=C[5].displayName))&&g(i,"alt",s),(!w||D&64)&&h!==(h=C[6]("mapLayers.layers")+"")&&Ee(d,h),C[3]?M?(M.p(C,D),D&8&&de(M,1)):(M=Ug(C),M.c(),de(M,1),M.m(e,null)):M&&(bt(),Ie(M,1,1,()=>{M=null}),wt())},i(C){w||(de(M),w=!0)},o(C){Ie(M),w=!1},d(C){C&&_(e),M&&M.d(),E=!1,Bn(I)}}}function yM(n,e,t){let i,r,s=$e,o=()=>(s(),s=Dt(d,M=>t(5,r=M)),d),a;He(n,Nn,M=>t(6,a=M)),n.$$.on_destroy.push(()=>s());let{map:l}=e,{mapManager:h}=e,{mapCurrentLayer:d}=e;o();let m=!1;function v(){t(3,m=!1)}const k=()=>v(),w=()=>t(3,m=!0),E=()=>t(3,m=!1),I=()=>t(3,m=!m);return n.$$set=M=>{"map"in M&&t(0,l=M.map),"mapManager"in M&&t(1,h=M.mapManager),"mapCurrentLayer"in M&&o(t(2,d=M.mapCurrentLayer))},n.$$.update=()=>{n.$$.dirty&2&&t(4,i=h.listLayers().filter(M=>!M.hiddenFromQuickSwitch))},[l,h,d,m,i,r,a,v,k,w,E,I]}class bM extends Wt{constructor(e){super(),Xt(this,e,yM,vM,zt,{map:0,mapManager:1,mapCurrentLayer:2})}}function wM(n){let e,t;const i=n[1].default,r=Jl(i,n,n[0],null);return{c(){e=A("div"),r&&r.c(),this.h()},l(s){e=R(s,"DIV",{id:!0,class:!0,style:!0});var o=T(e);r&&r.l(o),o.forEach(_),this.h()},h(){g(e,"id","map-controls"),g(e,"class","row space-cross svelte-btpj61"),B(e,"flex-direction","row")},m(s,o){Z(s,e,o),r&&r.m(e,null),t=!0},p(s,[o]){r&&r.p&&(!t||o&1)&&Ql(r,i,s,s[0],t?tu(i,s[0],o,null):eu(s[0]),null)},i(s){t||(de(r,s),t=!0)},o(s){Ie(r,s),t=!1},d(s){s&&_(e),r&&r.d(s)}}}function kM(n,e,t){let{$$slots:i={},$$scope:r}=e;return n.$$set=s=>{"$$scope"in s&&t(0,r=s.$$scope)},[r,i]}class EM extends Wt{constructor(e){super(),Xt(this,e,kM,wM,zt,{})}}const Uu="sensors-pane";function SM(n,e,t){let i,r=$e,s=()=>(r(),r=Dt(v,O=>t(11,i=O)),v),o,a;n.$$.on_destroy.push(()=>r());let{map:l}=e,{healthReportFetcher:h}=e,{sensorsAreas:d}=e,{latLng:m={lat:0,lng:0}}=e,{latLngStore:v=null}=e;s();let{onClick:k=()=>{}}=e;const w=h.latestHealthReport;He(n,w,O=>t(12,o=O));const E=d.sensors;He(n,E,O=>t(13,a=O));const I=Array.from((a==null?void 0:a.values())||[]).filter(O=>O.location==m)[0];if(!l.getPane(Uu)){l.createPane(Uu);const O=l.getPane(Uu);O&&(O.style.zIndex="1000")}let M=Ta,C=!1;switch(I==null?void 0:I.type){case 0:M=Ta;break;case 1:M=T3;break;case 2:M=Ta;break;case 3:M=L3;break;case 4:M=C3;break}let{marker:D=new Ct.Marker(v!==null&&i!==null?[i.lat,i.lng]:[m.lat,m.lng],{icon:M,pane:Uu})}=e;return mi(()=>(D.addTo(l),D.on("click",k),()=>{D.remove()})),n.$$set=O=>{"map"in O&&t(3,l=O.map),"healthReportFetcher"in O&&t(4,h=O.healthReportFetcher),"sensorsAreas"in O&&t(5,d=O.sensorsAreas),"latLng"in O&&t(6,m=O.latLng),"latLngStore"in O&&s(t(0,v=O.latLngStore)),"onClick"in O&&t(7,k=O.onClick),"marker"in O&&t(8,D=O.marker)},n.$$.update=()=>{if(n.$$.dirty&5120&&o)if(t(10,C=!!(o!=null&&o.sender_reports[I.id])),C)switch(I==null?void 0:I.type){case 0:t(9,M=Vd);break;case 1:t(9,M=Wb);break;case 2:t(9,M=Vd);break;case 3:t(9,M=Kb);break;case 4:t(9,M=Qb);break}else switch(I==null?void 0:I.type){case 0:t(9,M=zd);break;case 1:t(9,M=Xb);break;case 2:t(9,M=zd);break;case 3:t(9,M=Jb);break;case 4:t(9,M=ew);break}if(n.$$.dirty&768&&D.setIcon(M),n.$$.dirty&1280){const O=I.id%1e4,P=C?0:1e4;D.setZIndexOffset(O+P)}n.$$.dirty&2305&&v!==null&&i!==null&&D.setLatLng([i.lat,i.lng])},[v,w,E,l,h,d,m,k,D,M,C,i,o]}class IM extends Wt{constructor(e){super(),Xt(this,e,SM,null,zt,{map:3,healthReportFetcher:4,sensorsAreas:5,latLng:6,latLngStore:0,onClick:7,marker:8})}}async function MM(){return await Hr("/api/v1/health")}const TM=4;class LM{constructor(e){Ge(this,"latestHealthReport");this.latestHealthReport=new To(MM,{ttlSecs:TM,loadInitially:!0})}}function qg(n,e,t){const i=n.slice();return i[10]=e[t],i}function Zg(n){let e,t;function i(){return n[9](n[10])}return e=new IM({props:{map:n[0],latLng:n[10].location,onClick:i,healthReportFetcher:n[2],sensorsAreas:n[1]}}),{c(){st(e.$$.fragment)},l(r){ot(e.$$.fragment,r)},m(r,s){at(e,r,s),t=!0},p(r,s){n=r;const o={};s&1&&(o.map=n[0]),s&8&&(o.latLng=n[10].location),s&8&&(o.onClick=i),s&4&&(o.healthReportFetcher=n[2]),s&2&&(o.sensorsAreas=n[1]),e.$set(o)},i(r){t||(de(e.$$.fragment,r),t=!0)},o(r){Ie(e.$$.fragment,r),t=!1},d(r){lt(e,r)}}}function Yg(n,e){let t,i,r,s=e[10].location&&e[10].id!==e[4]&&Zg(e);return{key:n,first:null,c(){t=dt(),s&&s.c(),i=dt(),this.h()},l(o){t=dt(),s&&s.l(o),i=dt(),this.h()},h(){this.first=t},m(o,a){Z(o,t,a),s&&s.m(o,a),Z(o,i,a),r=!0},p(o,a){e=o,e[10].location&&e[10].id!==e[4]?s?(s.p(e,a),a&24&&de(s,1)):(s=Zg(e),s.c(),de(s,1),s.m(i.parentNode,i)):s&&(bt(),Ie(s,1,1,()=>{s=null}),wt())},i(o){r||(de(s),r=!0)},o(o){Ie(s),r=!1},d(o){o&&(_(t),_(i)),s&&s.d(o)}}}function CM(n){let e=[],t=new Map,i,r,s=Bt(n[3]);const o=a=>a[10].id;for(let a=0;a<s.length;a+=1){let l=qg(n,s,a),h=o(l);t.set(h,e[a]=Yg(h,l))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();i=dt()},l(a){for(let l=0;l<e.length;l+=1)e[l].l(a);i=dt()},m(a,l){for(let h=0;h<e.length;h+=1)e[h]&&e[h].m(a,l);Z(a,i,l),r=!0},p(a,[l]){l&95&&(s=Bt(a[3]),bt(),e=vr(e,l,o,1,a,s,t,i.parentNode,vs,Yg,i,qg),wt())},i(a){if(!r){for(let l=0;l<s.length;l+=1)de(e[l]);r=!0}},o(a){for(let l=0;l<e.length;l+=1)Ie(e[l]);r=!1},d(a){a&&_(i);for(let l=0;l<e.length;l+=1)e[l].d(a)}}}function PM(n,e,t){let i,r,s,o,a=$e,l=()=>(a(),a=Dt(i,E=>t(8,o=E)),i);He(n,nn,E=>t(7,s=E)),n.$$.on_destroy.push(()=>a());let{map:h}=e,{sensorsAreas:d}=e,{healthReportFetcher:m}=e,v=[];function k(E){nn.goto({type:Tt.SensorView,sensorId:E.id})}const w=E=>k(E);return n.$$set=E=>{"map"in E&&t(0,h=E.map),"sensorsAreas"in E&&t(1,d=E.sensorsAreas),"healthReportFetcher"in E&&t(2,m=E.healthReportFetcher)},n.$$.update=()=>{n.$$.dirty&2&&l(t(5,i=d.sensors)),n.$$.dirty&256&&t(3,v=o?o.values().toArray():[]),n.$$.dirty&128&&t(4,r=(s==null?void 0:s.type)===Tt.SensorRelocating?s.sensorId:null)},[h,d,m,v,r,i,k,s,o,w]}class NM extends Wt{constructor(e){super(),Xt(this,e,PM,CM,zt,{map:0,sensorsAreas:1,healthReportFetcher:2})}}const dl=12,qu="draggable-sensor-marker-pane";function DM(n,e,t){let i,r=$e,s=()=>(r(),r=Dt(l,m=>t(3,i=m)),l);n.$$.on_destroy.push(()=>r());let{map:o}=e,{type:a}=e,{latLng:l=Pn({lat:0,lng:0})}=e;if(s(),!o.getPane(qu)){o.createPane(qu);const m=o.getPane(qu);m&&(m.style.zIndex="9000")}let h=d();h.on("drag",function(){l.set(h.getLatLng())}),mi(()=>(h.addTo(o),()=>{h.remove()}));function d(){const m=Ct.DomUtil.create("div","sensor-draggable-icon");m.style.position="relative",m.style.width=bn+dl*2+"px",m.style.height=bn+dl*2+"px";const v=Ct.DomUtil.create("img","marker-icon",m);function k(D){switch(D){case 0:return fc;case 1:return S3;case 2:return fc;case 3:return I3;case 4:return M3;default:return fc}}v.src=k(a),v.className="sensor-draggable-icon",v.style.position="absolute",v.style.top=dl+"px",v.style.left=dl+"px",v.style.width=bn+"px",v.style.height=bn+"px",v.style.pointerEvents="none";const w=document.createElementNS("http://www.w3.org/2000/svg","svg");w.style.position="absolute",w.style.top="0px",w.style.left="0px",w.setAttribute("width","100%"),w.setAttribute("height","100%"),w.style.pointerEvents="none",m.appendChild(w);const E=document.createElementNS("http://www.w3.org/2000/svg","circle");E.setAttribute("cx","50%"),E.setAttribute("cy","50%"),E.setAttribute("r","45%"),E.setAttribute("stroke","#fff"),E.setAttribute("stroke-width","2"),E.setAttribute("fill","none"),E.setAttribute("stroke-dasharray","20 10"),w.appendChild(E);const I=bn+dl*2,M=Ct.divIcon({html:m,className:"",iconSize:[I,I],iconAnchor:[I/2,I/2]}),C=Ct.marker([0,0],{icon:M,draggable:!0,pane:qu});return C.setZIndexOffset(1e3),C.on("dragstart",function(){w.style.opacity="0"}),C.on("dragend",function(){w.style.opacity="1"}),C}return n.$$set=m=>{"map"in m&&t(1,o=m.map),"type"in m&&t(2,a=m.type),"latLng"in m&&s(t(0,l=m.latLng))},n.$$.update=()=>{n.$$.dirty&8&&h.setLatLng([i.lat,i.lng])},[l,o,a,i]}class AM extends Wt{constructor(e){super(),Xt(this,e,DM,null,zt,{map:1,type:2,latLng:0})}}function jg(n){let e,t,i;function r(o){n[7](o)}let s={map:n[0],type:n[3].type};return n[2]!==void 0&&(s.latLng=n[2]),e=new AM({props:s}),un.push(()=>jn(e,"latLng",r)),{c(){st(e.$$.fragment)},l(o){ot(e.$$.fragment,o)},m(o,a){at(e,o,a),i=!0},p(o,a){const l={};a&1&&(l.map=o[0]),a&8&&(l.type=o[3].type),!t&&a&4&&(t=!0,l.latLng=o[2],Yn(()=>t=!1)),e.$set(l)},i(o){i||(de(e.$$.fragment,o),i=!0)},o(o){Ie(e.$$.fragment,o),i=!1},d(o){lt(e,o)}}}function RM(n){let e,t,i=n[4]&&n[3]&&jg(n);return{c(){i&&i.c(),e=dt()},l(r){i&&i.l(r),e=dt()},m(r,s){i&&i.m(r,s),Z(r,e,s),t=!0},p(r,[s]){r[4]&&r[3]?i?(i.p(r,s),s&24&&de(i,1)):(i=jg(r),i.c(),de(i,1),i.m(e.parentNode,e)):i&&(bt(),Ie(i,1,1,()=>{i=null}),wt())},i(r){t||(de(i),t=!0)},o(r){Ie(i),t=!1},d(r){r&&_(e),i&&i.d(r)}}}function OM(n,e,t){let i,r,s=$e,o=()=>(s(),s=Dt(m,E=>t(6,r=E)),m),a,l=$e,h=()=>(l(),l=Dt(v,E=>t(4,a=E)),v);He(n,nn,E=>t(5,i=E)),n.$$.on_destroy.push(()=>s()),n.$$.on_destroy.push(()=>l());let{map:d}=e,{sensorsAreas:m}=e;o();let v=i.newLocation;h();let k;function w(E){v=E,h(t(2,v))}return n.$$set=E=>{"map"in E&&t(0,d=E.map),"sensorsAreas"in E&&o(t(1,m=E.sensorsAreas))},n.$$.update=()=>{var E;n.$$.dirty&96&&t(3,k=(E=r==null?void 0:r.sensors.current)==null?void 0:E.get(i.sensorId))},[d,m,v,k,a,i,r,w]}class xM extends Wt{constructor(e){super(),Xt(this,e,OM,RM,zt,{map:0,sensorsAreas:1})}}function FM(n,e,t){let i,r=$e,s=()=>(r(),r=Dt(l,P=>t(5,i=P)),l);n.$$.on_destroy.push(()=>r());let{map:o}=e,{signalService:a}=e,{iconSet:l}=e;s();let{playbackSpeed:h}=e;function d(P,F,V,$=[0,0],G="right",U,H){let j=F;return V&&V.confidence&&(j+=`<br><span style="font-size: 14px;">${(V.confidence*100).toFixed(0)}%</span>`),Ct.tooltip({permanent:!0,direction:G,className:"detection-label"+(U?" remote":"")+(G==="left"?" left":G==="top"||G==="bottom"?" center":""),offset:$,pane:H||"tooltipPane"}).setLatLng(P).setContent(j)}class m{constructor(F,V){Ge(this,"map");Ge(this,"label");Ge(this,"location");Ge(this,"ttl");Ge(this,"extra");Ge(this,"createdAt");Ge(this,"filteredLabel");Ge(this,"detectionType");Ge(this,"color");this.map=F,this.label=V.l,this.location=V.c,this.ttl=V.d,this.extra=V.e,this.createdAt=Date.now(),this.filteredLabel=this.label,this.detectionType=null,this.color="#a44",this.label.includes("Drone")?(this.filteredLabel=this.filteredLabel.replace(" Drone",""),this.label.includes("FPV")?this.detectionType="fpv_drone":this.detectionType="drone"):this.label.includes("Remote")&&(this.filteredLabel=this.filteredLabel.replace(" Remote",""),this.detectionType="pilot"),this.detectionType==="pilot"&&(this.color="#4381C1")}}class v extends m{constructor(V,$){if($.st!==po.HOTSPOT)throw new Error(`Invalid type for HotspotSignalDetection: ${$.st}`);if($.r===void 0)throw new Error("Hotspot signal detection requires km field");super(V,$);Ge(this,"radiusKm");Ge(this,"circle");Ge(this,"tooltip");Ge(this,"iconMarker");this.radiusKm=$.r,this.__addToMap()}__addToMap(){if(this.circle=Ct.circle(this.location,{radius:this.radiusKm*1e3,fillColor:this.color,fillOpacity:.3,color:this.color,opacity:.6,weight:6,stroke:!0,className:"hotspot-circle"}).addTo(this.map),this.detectionType){const $=Math.max(24,this.radiusKm*1e3*.0125),G=`/icon_sets_251019/${i}/${this.detectionType}/${i==="mil_icons"?"unknown":"default_signal"}.png`,U=Ct.divIcon({className:"hotspot-detection-icon",html:`
                        <img src="${G}"
                             width="${$}"
                             height="${$}"
                        />
                    `,iconSize:[$,$],iconAnchor:[$/2,$/2]});this.iconMarker=Ct.marker(this.location,{icon:U,interactive:!1}).addTo(this.map)}const V=eo(this.location,90,this.radiusKm*1e3);this.tooltip=d([V.lat,V.lng],this.filteredLabel,this.extra,void 0,void 0,this.detectionType==="pilot").addTo(this.map)}removeFromMap(){this.circle&&this.map.removeLayer(this.circle),this.tooltip&&this.map.removeLayer(this.tooltip),this.iconMarker&&this.map.removeLayer(this.iconMarker)}updateIcon(){this.iconMarker&&(this.removeFromMap(),this.__addToMap())}}class k extends m{constructor(V,$){if($.st!==po.DIRECTIONAL)throw new Error(`Invalid type for DirectionalSignalDetection: ${$.st}`);if($.az===void 0||$.bw===void 0||$.r===void 0)throw new Error("Directional signal detection requires adeg, bdeg, and km fields");super(V,$);Ge(this,"azimuthDeg");Ge(this,"beamwidthDeg");Ge(this,"distanceKm");Ge(this,"beamDistribution");Ge(this,"svgLayer");Ge(this,"tooltip");this.azimuthDeg=$.az,this.beamwidthDeg=$.bw,this.distanceKm=$.r,this.beamDistribution=$4.LINEAR,this.__addToMap()}normalizeTurfBearing(V){let $=(V%360+360)%360;return $>180?$-=360:$<-180&&($=($%360+360)%360,$>180&&($-=360)),$===-0?0:$}__addToMap(){const V=this.location,$=this.distanceKm*1e3;if($<=0||this.beamwidthDeg<=0){console.warn(`Directional beam "${this.label}" has zero radius or beamwidth, not drawing.`);return}this.beamwidthDeg>=360&&(this.beamwidthDeg=359.99);const G=this.azimuthDeg-this.beamwidthDeg/2,U=this.azimuthDeg+this.beamwidthDeg/2,H=G-90,j=U-90,Q=Me=>Me*Math.PI/180,W=$*Math.cos(Q(H)),Y=$*Math.sin(Q(H)),q=$*Math.cos(Q(j)),ne=$*Math.sin(Q(j)),J=this.beamwidthDeg>180?1:0,ie=`M 0 0 L ${W} ${Y} A ${$} ${$} 0 ${J} 1 ${q} ${ne} Z`,le=Math.max(1,$*.025);let pe="";if(this.detectionType){const Me=$*.9,we=Me*Math.cos(Q(this.azimuthDeg-90)),Te=Me*Math.sin(Q(this.azimuthDeg-90)),Ae=Math.max(24,$*.05);pe=`
                    <image
                        href="${`/icon_sets_251019/${i}/${this.detectionType}/${i==="mil_icons"?"unknown":"default_signal"}.png`}"
                        x="${we-Ae/2}"
                        y="${Te-Ae/2}"
                        height="${Ae}"
                        width="${Ae}"
                    />
                `}const ye=`
                <svg    xmlns="http://www.w3.org/2000/svg"
                        viewBox="${-($+le)} ${-($+le)} ${2*($+le)} ${2*($+le)}"
                        width="100%" height="100%">
                    <path
                        d="${ie}"
                        fill="${this.color}" fill-opacity="0.3"
                        stroke="${this.color}" stroke-opacity="0.6" stroke-width="${le}" stroke-linejoin="round"
                    />
                    ${pe}
                </svg>`,be=new DOMParser().parseFromString(ye,"image/svg+xml").documentElement,re=$*Math.sqrt(2),me=eo(V,this.normalizeTurfBearing(225),re),ke=eo(V,this.normalizeTurfBearing(45),re),X=Ct.latLngBounds([me.lat,me.lng],[ke.lat,ke.lng]),ue="directional-signal-detections-pane";if(!this.map.getPane(ue)){this.map.createPane(ue);const Me=this.map.getPane(ue);Me&&(Me.style.zIndex="8300")}this.svgLayer=Ct.svgOverlay(be,X,{opacity:1,interactive:!1,pane:"directional-signal-detections-pane"}).addTo(this.map);const _e=this.normalizeTurfBearing(this.azimuthDeg),oe=eo(V,_e,$),ae=_e<45&&_e>-45?"top":_e>=45&&_e<=135?"right":_e>135||_e<-135?"bottom":"left",Se=[4*Math.cos((_e-90)*Math.PI/180),4*Math.sin((_e-90)*Math.PI/180)];this.tooltip=d([oe.lat,oe.lng],this.filteredLabel,this.extra,Se,ae,this.detectionType==="pilot","directional-signal-detections-pane").addTo(this.map)}removeFromMap(){this.svgLayer&&this.map.removeLayer(this.svgLayer),this.tooltip&&this.map.removeLayer(this.tooltip)}updateIcon(){this.svgLayer&&(this.removeFromMap(),this.__addToMap())}}class w extends m{constructor(V,$){if($.st!==po.RADIAL)throw new Error(`Invalid type for RadialSignalDetection: ${$.st}`);if($.r===void 0)throw new Error("Radial signal detection requires km field");super(V,$);Ge(this,"distanceKm");Ge(this,"circle");Ge(this,"tooltip");Ge(this,"iconMarker");this.distanceKm=$.r,this.__addToMap()}__addToMap(){if(this.circle=Ct.circle(this.location,{radius:this.distanceKm*1e3,fill:!1,color:this.color,opacity:.6,weight:12,stroke:!0}).addTo(this.map),this.detectionType){const $=Math.max(24,this.distanceKm*1e3*.0125),G=`/icon_sets_251019/${i}/${this.detectionType}/${i==="mil_icons"?"unknown":"default_signal"}.png`,U=Ct.divIcon({className:"radial-detection-icon",html:`
                        <img src="${G}"
                             width="${$}"
                             height="${$}"
                        />
                    `,iconSize:[$,$],iconAnchor:[$/2,$/2]});this.iconMarker=Ct.marker(this.location,{icon:U,interactive:!1}).addTo(this.map)}const V=eo(this.location,90,this.distanceKm*1e3);this.tooltip=d([V.lat,V.lng],this.filteredLabel,this.extra,void 0,void 0,this.detectionType==="pilot").addTo(this.map)}removeFromMap(){this.circle&&this.map.removeLayer(this.circle),this.tooltip&&this.map.removeLayer(this.tooltip),this.iconMarker&&this.map.removeLayer(this.iconMarker)}updateIcon(){this.iconMarker&&(this.removeFromMap(),this.__addToMap())}}class E extends m{constructor(V,$){if($.st!==po.PRESENCE)throw new Error(`Invalid type for PresenceSignalDetection: ${$.st}`);super(V,$);Ge(this,"rectangle");Ge(this,"tooltip");this.__addToMap()}__addToMap(){const V=Ct.divIcon({className:"presence-icon",html:`
                    <svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <rect width="48" height="48" fill="none" stroke="${this.color}"  stroke-width="6" stroke-opacity="0.8" stroke-linejoin="miter"/>
                    </svg>
                `,iconSize:[48,48],iconAnchor:[24,24]});this.rectangle=Ct.marker(this.location,{icon:V}).addTo(this.map),this.tooltip=d([this.location.lat,this.location.lng],this.label,this.extra,[19,0],void 0,this.detectionType==="pilot").addTo(this.map)}removeFromMap(){this.rectangle&&this.map.removeLayer(this.rectangle),this.tooltip&&this.map.removeLayer(this.tooltip)}}function I(P,F){switch(F.st){case po.HOTSPOT:return new v(P,F);case po.DIRECTIONAL:return new k(P,F);case po.RADIAL:return new w(P,F);case po.PRESENCE:return new E(P,F);default:throw new Error(`Unknown signal detection type: ${F.st}`)}}const M=[];let C=!1;const D=(P=!1)=>{if(C){C=!1;return}const F=Date.now();M.forEach((V,$)=>{F-V.createdAt>V.ttl*1e3/(h&&h.current||1)-(P?100:0)&&(V.removeFromMap(),M.splice($,1))})};setInterval(D,100);function O(P){let F;try{F=I(o,P)}catch(V){console.error("SignalDetection: Error creating signal detection layer:",V);return}D(!0),C=!0,M.push(F)}return mi(()=>{if(a&&o){console.log("SignalDetection: Subscribing to signal detection service");const P=a.subscribe(V=>{console.log("SignalDetection: Received update:",V),O(V)},()=>{console.log("SignalDetection: Service disconnected")}),F=l.subscribe(()=>{for(const V of M)V instanceof k&&V.updateIcon(),V instanceof w&&V.updateIcon()});return()=>{console.log("SignalDetection: Unsubscribing from signal detection service"),P(),F(),M.forEach(V=>{V.removeFromMap()})}}}),n.$$set=P=>{"map"in P&&t(1,o=P.map),"signalService"in P&&t(2,a=P.signalService),"iconSet"in P&&s(t(0,l=P.iconSet)),"playbackSpeed"in P&&t(3,h=P.playbackSpeed)},[l,o,a,h]}class BM extends Wt{constructor(e){super(),Xt(this,e,FM,null,zt,{map:1,signalService:2,iconSet:0,playbackSpeed:3})}}const js="echodyne-pane",$M=15e3,Ws=32,Wg=8,VM=2,zh=.9,Gh="#fff",zM=2;function GM(n,e,t){let i;He(n,Nn,W=>t(7,i=W));let{map:r}=e,{radarService:s}=e,{iconSet:o}=e,a;if(!r.getPane(js)){r.createPane(js);const W=r.getPane(js);W&&(W.style.zIndex="8300")}const l=new Map;let h=!1;const d=new Map,m=new Map;let v=null;function k(W){switch(W){case Vr.UAV:return"#FF4060";case Vr.AIRCRAFT:return"blue";case Vr.BIRD:return"yellow";case Vr.VEHICLE:return"#93A9DF";case Vr.WALKER:return"lightgreen";case Vr.CLUTTER:return"gray";default:return"black"}}function w(W){switch(W){case Vr.UAV:return"drone";case Vr.AIRCRAFT:return"aircraft";case Vr.BIRD:return"bird";case Vr.VEHICLE:return"vehicle";case Vr.WALKER:return"walker";default:return"bird"}}function E(W){const Y=w(W);console.log("Creating MIL icon for class",W,"variant",Y);const q=`/icon_sets_251019/mil_icons/radar_icons/${Y}.png`;return Ct.divIcon({className:"radar-mil-icon",html:`<img src="${q}" width="${Ws}" height="${Ws}" />`,iconSize:[Ws,Ws],iconAnchor:[Ws/2,Ws/2]})}function I(){for(const[W,Y]of l)Y.birdTooltip&&Y.birdTooltip.setContent(i("radarDetection.bird"))}function M(){for(const[W,Y]of l){if(!Y.lastPacket)continue;const q=Y.lastPacket,ne=k(q.c);if(a==="mil_icons"){Y.head.setStyle({opacity:0,fillOpacity:0});const J=E(q.c);J&&(Y.iconMarker?(Y.iconMarker.setIcon(J),Y.iconMarker.setLatLng(q.loc)):Y.iconMarker=Ct.marker(q.loc,{icon:J,pane:js,interactive:!1}).addTo(r))}else Y.head.setStyle({opacity:1,fillOpacity:zh,color:Gh,fillColor:ne}),Y.iconMarker&&(Y.iconMarker.remove(),Y.iconMarker=null)}}function C(W){const Y=l.get(W);if(!Y)return;const q=d.get(W);if(q&&q.length>0){for(const J of q)Y.trail.addLatLng(J);d.delete(W)}const ne=m.get(W);if(ne){const J=k(ne.c);U(Y,ne,J),m.delete(W)}}function D(){for(const[W,Y]of d){const q=l.get(W);if(q)for(const ne of Y)q.trail.addLatLng(ne)}d.clear();for(const[W,Y]of m){const q=l.get(W);if(!q)continue;const ne=k(Y.c);U(q,Y,ne)}m.clear()}function O(){const W=Date.now();for(const[Y,q]of l)W-q.lastUpdate>$M&&(q.head.remove(),q.trail.remove(),q.iconMarker&&q.iconMarker.remove(),q.birdTooltip&&q.birdTooltip.remove(),l.delete(Y),d.delete(Y),m.delete(Y))}function P(){h=!0}function F(){h=!1,D()}function V(W,Y){if(a==="mil_icons")return`<span style="color:${Y}; vertical-align: middle; margin: 0;">${W.alt.toFixed(0)} m</span>`;const q=V4[W.c]||"Unknown";return`<span style="color:${Y}; vertical-align: middle; margin: 0;">${W.alt.toFixed(0)} m</span> &middot; <span style="font-size:8px; margin: 0; vertical-align: middle;">${q}</span>`}function $(){return a==="mil_icons"?[Ws/2+2,0]:[Wg+2,0]}function G(W,Y,q=!1){const ne=$(),J=W.getTooltip();J&&!q?J.setContent(Y):(J&&W.unbindTooltip(),W.bindTooltip(Y,{permanent:!0,direction:"right",offset:ne,className:"echodyne-alt-label",pane:js}))}function U(W,Y,q){var ne;if(W.head.setLatLng(Y.loc),W.lastPacket=Y,a==="mil_icons"){W.head.setStyle({opacity:0,fillOpacity:0});const J=E(Y.c);J&&(W.iconMarker?(W.iconMarker.setLatLng(Y.loc),W.iconMarker.setIcon(J)):W.iconMarker=Ct.marker(Y.loc,{icon:J,pane:js,interactive:!1}).addTo(r))}else W.head.setStyle({opacity:1,fillOpacity:zh,color:Gh,fillColor:q}),W.iconMarker&&(W.iconMarker.remove(),W.iconMarker=null);W.trail.setStyle({color:q}),G(W.head,V(Y,q)),Y.c===Vr.BIRD&&a==="mil_icons"?W.birdTooltip?(W.birdTooltip.setLatLng(Y.loc),W.birdTooltip.setContent(i("radarDetection.bird"))):W.birdTooltip=Ct.tooltip({permanent:!0,direction:"right",offset:[Ws/2+2,Ws/2+2],className:"bird-label",pane:js}).setLatLng(Y.loc).setContent(i("radarDetection.bird")).addTo(r):W.birdTooltip&&(W.birdTooltip.remove(),W.birdTooltip=null),W.head.bringToFront(),W.iconMarker&&((ne=W.iconMarker.getElement())==null||ne.style.setProperty("z-index","9000")),W.lastUpdate=Date.now()}function H(W,Y){const q=new yi.CircleMarker(W.loc,{radius:Wg,color:Gh,weight:VM,fill:!0,fillOpacity:zh,fillColor:Y,pane:js}).addTo(r),ne=new yi.Polyline([],{color:Y,weight:zM,pane:js}).addTo(r),J={head:q,iconMarker:null,birdTooltip:null,trail:ne,lastUpdate:Date.now(),lastPacket:W};return U(J,W,Y),G(q,V(W,Y)),J}function j(W){const Y=`${W.sid}:${W.tid}`,q=k(W.c);let ne=l.get(Y);if(ne||(ne=H(W,q),l.set(Y,ne)),h){m.set(Y,W);const J=d.get(Y)??[];J.push(W.loc),d.set(Y,J)}else C(Y),U(ne,W,q),ne.trail.addLatLng(W.loc)}function Q(){v!==null&&(clearInterval(v),v=null);for(const[W,Y]of l)Y.head.remove(),Y.trail.remove(),Y.iconMarker&&Y.iconMarker.remove(),Y.birdTooltip&&Y.birdTooltip.remove();l.clear(),d.clear(),m.clear(),r.off("zoomstart",P),r.off("zoomend",F)}return mi(()=>{r.on("zoomstart",P),r.on("zoomend",F);const W=o.subscribe(ne=>{a=ne;for(const[J,ge]of l){if(!ge.lastPacket)continue;const ie=ge.lastPacket,le=k(ie.c);G(ge.head,V(ie,le),!0)}M()}),Y=So.subscribe(()=>{I()});v=window.setInterval(()=>{O()},1e3);const q=s.subscribe(ne=>{j(ne)},()=>q());return()=>{Q(),q(),W(),Y()}}),n.$$set=W=>{"map"in W&&t(0,r=W.map),"radarService"in W&&t(1,s=W.radarService),"iconSet"in W&&t(2,o=W.iconSet)},[r,s,o]}class HM extends Wt{constructor(e){super(),Xt(this,e,GM,null,zt,{map:0,radarService:1,iconSet:2})}}(function(){var n=L.Marker.prototype._initIcon,e=L.Marker.prototype._setPos,t=L.DomUtil.TRANSFORM==="msTransform";L.Marker.addInitHook(function(){var i=this.options.icon&&this.options.icon.options,r=i&&this.options.icon.options.iconAnchor;r&&(r=r[0]+"px "+r[1]+"px"),this.options.rotationOrigin=this.options.rotationOrigin||r||"center bottom",this.options.rotationAngle=this.options.rotationAngle||0,this.on("drag",function(s){s.target._applyRotation()})}),L.Marker.include({_initIcon:function(){n.call(this)},_setPos:function(i){e.call(this,i),this._applyRotation()},_applyRotation:function(){this.options.rotationAngle&&(this._icon.style[L.DomUtil.TRANSFORM+"Origin"]=this.options.rotationOrigin,t?this._icon.style[L.DomUtil.TRANSFORM]="rotate("+this.options.rotationAngle+"deg)":this._icon.style[L.DomUtil.TRANSFORM]+=" rotateZ("+this.options.rotationAngle+"deg)")},setRotationAngle:function(i){return this.options.rotationAngle=i,this.update(),this},setRotationOrigin:function(i){return this.options.rotationOrigin=i,this.update(),this}})})();const Xg=5,Kg=20,UM=60*1e3,qM=15*1e3;class ZM{constructor(e,t){Ge(this,"map");Ge(this,"userStore");Ge(this,"mapAlreadyMovedInitially",!1);Ge(this,"currentUserDefaultCenter",null);Ge(this,"userIsActive",!1);Ge(this,"userInactiveMinutes",0);Ge(this,"currentResetTimeoutMinutes",Xg);Ge(this,"autoRecenterMistakesCount",0);Ge(this,"isAutoRecenterDisabled",!1);Ge(this,"mainLoopIntervalId",null);Ge(this,"postRecenterCheckTimerId",null);Ge(this,"userStoreUnsubscribe",null);Ge(this,"onMapInteraction",()=>{this.mapAlreadyMovedInitially||(this.mapAlreadyMovedInitially=!0),!this.isAutoRecenterDisabled&&this.currentUserDefaultCenter&&(this.userIsActive=!0)});Ge(this,"handleUserUpdate",e=>{var i,r;const t=(r=(i=e==null?void 0:e.profile)==null?void 0:i.organization)==null?void 0:r.mapDefaultCenter;if(this.currentUserDefaultCenter=t?{lat:t.lat,lng:t.lng}:null,this.currentUserDefaultCenter&&this.map){if(!this.mapAlreadyMovedInitially){console.log("Service: Applying user's default map center",this.currentUserDefaultCenter);try{this.map.setView(this.currentUserDefaultCenter,8)}catch(s){console.error("Service: Failed to apply user's default map center",s)}}this.isAutoRecenterDisabled=!1,this.autoRecenterMistakesCount=0,this.currentResetTimeoutMinutes=Xg,this.userInactiveMinutes=0,this.userIsActive=!1,this.postRecenterCheckTimerId&&clearTimeout(this.postRecenterCheckTimerId),this.postRecenterCheckTimerId=null,this.mainLoopIntervalId&&clearInterval(this.mainLoopIntervalId),this.mainLoopIntervalId=setInterval(this.handleMainLoop,UM),console.log("Service: User profile loaded/changed. Inactivity tracking (re)started.")}else this.mainLoopIntervalId&&clearInterval(this.mainLoopIntervalId),this.mainLoopIntervalId=null,this.postRecenterCheckTimerId&&clearTimeout(this.postRecenterCheckTimerId),this.postRecenterCheckTimerId=null,this.isAutoRecenterDisabled=!0,console.log("Service: No default map center or user logged out. Inactivity tracking stopped.")});Ge(this,"handleMainLoop",()=>{this.isAutoRecenterDisabled||!this.currentUserDefaultCenter||!this.map||(this.userIsActive?(this.userIsActive=!1,this.userInactiveMinutes=0):this.userInactiveMinutes++,console.log(`Service: User inactive minutes: ${this.userInactiveMinutes}, Timeout at: ${this.currentResetTimeoutMinutes}`),this.userInactiveMinutes>=this.currentResetTimeoutMinutes&&(console.log("Service: Map recentering due to inactivity."),this.map.setView(this.currentUserDefaultCenter,8),this.userInactiveMinutes=0,this.postRecenterCheckTimerId&&clearTimeout(this.postRecenterCheckTimerId),this.postRecenterCheckTimerId=setTimeout(this.handlePostRecenterCheck,qM)))});Ge(this,"handlePostRecenterCheck",()=>{this.postRecenterCheckTimerId=null,!(this.isAutoRecenterDisabled||!this.currentUserDefaultCenter||!this.map)&&(this.userIsActive?(this.autoRecenterMistakesCount++,console.log(`Service: User reacted to recenter. Mistake count: ${this.autoRecenterMistakesCount}`),this.autoRecenterMistakesCount===1?(this.currentResetTimeoutMinutes=Kg,console.log(`Service: Increasing auto-recenter timeout to ${Kg} minutes.`)):this.autoRecenterMistakesCount>=2&&(this.isAutoRecenterDisabled=!0,console.log("Service: Auto-recenter disabled due to repeated unwanted recenters."),this.mainLoopIntervalId&&clearInterval(this.mainLoopIntervalId),this.mainLoopIntervalId=null)):console.log("Service: User did not react to recenter. Timeout remains as is."),this.userIsActive=!1,this.userInactiveMinutes=0)});this.map=e,this.userStore=t}start(){this.map.on("dragstart",this.onMapInteraction),this.map.on("zoomstart",this.onMapInteraction),this.map.on("click",this.onMapInteraction),this.map.on("mousemove",this.onMapInteraction),this.userStoreUnsubscribe=this.userStore.subscribe(this.handleUserUpdate),console.log("ViewResetTimeoutService started.")}stop(){this.map.off("dragstart",this.onMapInteraction),this.map.off("zoomstart",this.onMapInteraction),this.map.off("click",this.onMapInteraction),this.map.off("mousemove",this.onMapInteraction),this.userStoreUnsubscribe&&(this.userStoreUnsubscribe(),this.userStoreUnsubscribe=null),this.mainLoopIntervalId&&(clearInterval(this.mainLoopIntervalId),this.mainLoopIntervalId=null),this.postRecenterCheckTimerId&&(clearTimeout(this.postRecenterCheckTimerId),this.postRecenterCheckTimerId=null),console.log("ViewResetTimeoutService stopped.")}}function Jg(n,e,t){const i=n.slice();return i[3]=e[t].name,i[4]=e[t].datapoints,i}function YM(n){let e,t,i=n[3]+"",r,s,o,a=n[0]("recordings.nDataPoints",{values:{count:n[4]}})+"",l,h;return{c(){e=A("div"),t=A("b"),r=he(i),s=ee(),o=A("p"),l=he(a),h=ee(),this.h()},l(d){e=R(d,"DIV",{class:!0});var m=T(e);t=R(m,"B",{});var v=T(t);r=fe(v,i),v.forEach(_),s=te(m),o=R(m,"P",{style:!0});var k=T(o);l=fe(k,a),k.forEach(_),m.forEach(_),h=te(d),this.h()},h(){B(o,"font-size","10px"),B(o,"color","#888"),g(e,"class","column")},m(d,m){Z(d,e,m),p(e,t),p(t,r),p(e,s),p(e,o),p(o,l),Z(d,h,m)},p(d,m){m&1&&a!==(a=d[0]("recordings.nDataPoints",{values:{count:d[4]}})+"")&&Ee(l,a)},d(d){d&&(_(e),_(h))}}}function Qg(n,e){let t,i,r;return i=new fn({props:{class:"row g8 p816 hoverable noselect",onclick:WM,$$slots:{default:[YM]},$$scope:{ctx:e}}}),{key:n,first:null,c(){t=dt(),st(i.$$.fragment),this.h()},l(s){t=dt(),ot(i.$$.fragment,s),this.h()},h(){this.first=t},m(s,o){Z(s,t,o),at(i,s,o),r=!0},p(s,o){e=s;const a={};o&129&&(a.$$scope={dirty:o,ctx:e}),i.$set(a)},i(s){r||(de(i.$$.fragment,s),r=!0)},o(s){Ie(i.$$.fragment,s),r=!1},d(s){s&&_(t),lt(i,s)}}}function jM(n){let e,t,i,r,s,o=n[0]("recordings.recordings")+"",a,l,h,d=(n[1].length?n[1].length==1?n[0]("recordings.oneRecording"):n[0]("recordings.nRecordings",{values:{count:n[1].length}}):n[0]("recordings.noRecordings"))+"",m,v,k,w='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M19 5L5 19M5.00001 5L19 19" stroke="#fff" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>',E,I=[],M=new Map,C,D,O,P,F='<svg class="hoverable noselect clickable" style="width: 32px; height: 32px; padding: 8px; opacity: 0.5;" xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 60 60" fill="none"><path d="M38.7868 51.2132L17.5736 30L38.7868 8.7868L43.0294 13.0294L26.0589 30L43.0294 46.9706L38.7868 51.2132Z" fill="black"></path></svg> <div class="vr"></div> <p class="p816 grow" style="text-align: center; font-size: 12px;">Leht 1 / 1</p> <div class="vr"></div> <svg class="hoverable noselect clickable" style="width: 32px; height: 32px; padding: 8px; opacity: 0.5;" xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 60 60" fill="none"><path d="M21.2132 8.7868L42.4264 30L21.2132 51.2132L16.9706 46.9706L33.9411 30L16.9706 13.0294L21.2132 8.7868Z" fill="black"></path></svg>',V,$,G,U=Bt(n[1]);const H=j=>j[3];for(let j=0;j<U.length;j+=1){let Q=Jg(n,U,j),W=H(Q);M.set(W,I[j]=Qg(W,Q))}return{c(){e=A("div"),t=A("div"),i=A("div"),r=A("div"),s=A("p"),a=he(o),l=ee(),h=A("p"),m=he(d),v=ee(),k=A("button"),k.innerHTML=w,E=ee();for(let j=0;j<I.length;j+=1)I[j].c();C=ee(),D=A("hr"),O=ee(),P=A("div"),P.innerHTML=F,this.h()},l(j){e=R(j,"DIV",{class:!0});var Q=T(e);t=R(Q,"DIV",{class:!0});var W=T(t);i=R(W,"DIV",{class:!0,style:!0});var Y=T(i);r=R(Y,"DIV",{class:!0});var q=T(r);s=R(q,"P",{style:!0});var ne=T(s);a=fe(ne,o),ne.forEach(_),l=te(q),h=R(q,"P",{style:!0});var J=T(h);m=fe(J,d),J.forEach(_),q.forEach(_),v=te(Y),k=R(Y,"BUTTON",{class:!0,style:!0,"data-svelte-h":!0}),rn(k)!=="svelte-1qep5uh"&&(k.innerHTML=w),Y.forEach(_),E=te(W);for(let ge=0;ge<I.length;ge+=1)I[ge].l(W);W.forEach(_),C=te(Q),D=R(Q,"HR",{}),O=te(Q),P=R(Q,"DIV",{class:!0,"data-svelte-h":!0}),rn(P)!=="svelte-o3jdaz"&&(P.innerHTML=F),Q.forEach(_),this.h()},h(){B(s,"font-size","18px"),B(h,"font-size","12px"),g(r,"class","column grow"),g(k,"class","close svelte-dv9a5y"),B(k,"background","none"),B(k,"padding","0"),B(k,"border","none"),B(k,"outline","none"),B(k,"margin","0"),B(k,"height","24px"),g(i,"class","row center-cross info-row svelte-dv9a5y"),B(i,"background-color","#445"),B(i,"position","sticky"),B(i,"top","0"),g(t,"class","grow panel-scrollable column"),g(P,"class","row"),g(e,"class","panel column")},m(j,Q){Z(j,e,Q),p(e,t),p(t,i),p(i,r),p(r,s),p(s,a),p(r,l),p(r,h),p(h,m),p(i,v),p(i,k),p(t,E);for(let W=0;W<I.length;W+=1)I[W]&&I[W].m(t,null);p(e,C),p(e,D),p(e,O),p(e,P),V=!0,$||(G=nt(k,"click",n[2]),$=!0)},p(j,[Q]){(!V||Q&1)&&o!==(o=j[0]("recordings.recordings")+"")&&Ee(a,o),(!V||Q&1)&&d!==(d=(j[1].length?j[1].length==1?j[0]("recordings.oneRecording"):j[0]("recordings.nRecordings",{values:{count:j[1].length}}):j[0]("recordings.noRecordings"))+"")&&Ee(m,d),Q&3&&(U=Bt(j[1]),bt(),I=vr(I,Q,H,1,j,U,M,t,vs,Qg,null,Jg),wt())},i(j){if(!V){for(let Q=0;Q<U.length;Q+=1)de(I[Q]);V=!0}},o(j){for(let Q=0;Q<I.length;Q+=1)Ie(I[Q]);V=!1},d(j){j&&_(e);for(let Q=0;Q<I.length;Q+=1)I[Q].d();$=!1,G()}}}function WM(){}function XM(n,e,t){let i;He(n,Nn,o=>t(0,i=o));const r=[{name:"2.7 km Kuppel-antenn",datapoints:3824},{name:"4.6 km Kuppel-antenn",datapoints:7124},{name:"05-06-2024.037",datapoints:655},{name:"09-06-2024.052",datapoints:917},{name:"12-06-2024.029",datapoints:510},{name:"13-06-2024.048",datapoints:848},{name:"14-06-2024.154",datapoints:2703},{name:"16-06-2024.139",datapoints:2441},{name:"17-06-2024.021",datapoints:379},{name:"18-06-2024.386",datapoints:6734},{name:"20-06-2024.101",datapoints:1772},{name:"22-06-2024.055",datapoints:965}];function s(){nn.goto(null)}return[i,r,s]}class KM extends Wt{constructor(e){super(),Xt(this,e,XM,jM,zt,{})}}function JM(n){let e,t,i,r,s,o,a,l,h,d,m;return{c(){e=A("label"),t=A("input"),r=ee(),s=A("span"),a=ee(),l=he(n[7]),this.h()},l(v){e=R(v,"LABEL",{id:!0,class:!0,style:!0,for:!0});var k=T(e);t=R(k,"INPUT",{type:!0,id:!0,name:!0,class:!0,style:!0}),r=te(k),s=R(k,"SPAN",{class:!0,style:!0}),T(s).forEach(_),a=te(k),l=fe(k,n[7]),k.forEach(_),this.h()},h(){g(t,"type","checkbox"),g(t,"id",n[9]),g(t,"name",n[10]),t.disabled=n[8],g(t,"class",i=Ui(n[1])+" svelte-1jldfme"),g(t,"style",n[2]),g(s,"class",o=Ui("checkmark "+n[3])+" svelte-1jldfme"),g(s,"style",n[4]),g(e,"id","checkbox-label"),g(e,"class",h=Ui(n[5])+" svelte-1jldfme"),g(e,"style",n[6]),g(e,"for",n[11])},m(v,k){Z(v,e,k),p(e,t),t.checked=n[0],p(e,r),p(e,s),p(e,a),p(e,l),d||(m=[nt(t,"change",n[13]),nt(t,"change",n[12])],d=!0)},p(v,[k]){k&512&&g(t,"id",v[9]),k&1024&&g(t,"name",v[10]),k&256&&(t.disabled=v[8]),k&2&&i!==(i=Ui(v[1])+" svelte-1jldfme")&&g(t,"class",i),k&4&&g(t,"style",v[2]),k&1&&(t.checked=v[0]),k&8&&o!==(o=Ui("checkmark "+v[3])+" svelte-1jldfme")&&g(s,"class",o),k&16&&g(s,"style",v[4]),k&128&&Ee(l,v[7]),k&32&&h!==(h=Ui(v[5])+" svelte-1jldfme")&&g(e,"class",h),k&64&&g(e,"style",v[6])},i:$e,o:$e,d(v){v&&_(e),d=!1,Bn(m)}}}function QM(n,e,t){let{checkboxClass:i=""}=e,{checkboxStyle:r=""}=e,{checkmarkClass:s=""}=e,{checkmarkStyle:o=""}=e,{labelClass:a=""}=e,{labelStyle:l=""}=e,{label:h=""}=e,{checked:d=!1}=e,{disabled:m=!1}=e,{id:v=void 0}=e,{name:k=void 0}=e;const w=v||`checkbox-${Math.random().toString(36).substring(2,9)}`,E=Ha();function I(C){const D=C.target;t(0,d=D.checked),E("change",d)}function M(){d=this.checked,t(0,d)}return n.$$set=C=>{"checkboxClass"in C&&t(1,i=C.checkboxClass),"checkboxStyle"in C&&t(2,r=C.checkboxStyle),"checkmarkClass"in C&&t(3,s=C.checkmarkClass),"checkmarkStyle"in C&&t(4,o=C.checkmarkStyle),"labelClass"in C&&t(5,a=C.labelClass),"labelStyle"in C&&t(6,l=C.labelStyle),"label"in C&&t(7,h=C.label),"checked"in C&&t(0,d=C.checked),"disabled"in C&&t(8,m=C.disabled),"id"in C&&t(9,v=C.id),"name"in C&&t(10,k=C.name)},[d,i,r,s,o,a,l,h,m,v,k,w,I,M]}class so extends Wt{constructor(e){super(),Xt(this,e,QM,JM,zt,{checkboxClass:1,checkboxStyle:2,checkmarkClass:3,checkmarkStyle:4,labelClass:5,labelStyle:6,label:7,checked:0,disabled:8,id:9,name:10})}}function em(n,e,t){const i=n.slice();return i[35]=e[t],i}function tm(n,e,t){const i=n.slice();return i[32]=e[t],i}function nm(n,e,t){const i=n.slice();return i[29]=e[t],i}function im(n,e,t){const i=n.slice();return i[38]=e[t],i[40]=t,i}function rm(n){let e,t,i=Bt(Object.values(Ki)),r=[];for(let o=0;o<i.length;o+=1)r[o]=sm(im(n,i,o));const s=o=>Ie(r[o],1,1,()=>{r[o]=null});return{c(){for(let o=0;o<r.length;o+=1)r[o].c();e=dt()},l(o){for(let a=0;a<r.length;a+=1)r[a].l(o);e=dt()},m(o,a){for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(o,a);Z(o,e,a),t=!0},p(o,a){if(a[0]&65795){i=Bt(Object.values(Ki));let l;for(l=0;l<i.length;l+=1){const h=im(o,i,l);r[l]?(r[l].p(h,a),de(r[l],1)):(r[l]=sm(h),r[l].c(),de(r[l],1),r[l].m(e.parentNode,e))}for(bt(),l=i.length;l<r.length;l+=1)s(l);wt()}},i(o){if(!t){for(let a=0;a<i.length;a+=1)de(r[a]);t=!0}},o(o){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)Ie(r[a]);t=!1},d(o){o&&_(e),ui(r,o)}}}function eT(n){var o;let e,t,i,r=n[40]!==0&&iT();function s(){return n[21](n[38])}return t=new fn({props:{class:"row center-cross center g8 p816 hoverable noselect",onclick:s,style:"flex: 1;",styleInner:"width: 100%; border-bottom: 4px solid "+(((o=n[1])==null?void 0:o.page)===n[38]?"#445;":"transparent")+";",$$slots:{default:[rT]},$$scope:{ctx:n}}}),{c(){r&&r.c(),e=ee(),st(t.$$.fragment)},l(a){r&&r.l(a),e=te(a),ot(t.$$.fragment,a)},m(a,l){r&&r.m(a,l),Z(a,e,l),at(t,a,l),i=!0},p(a,l){var d;n=a;const h={};l[0]&2&&(h.styleInner="width: 100%; border-bottom: 4px solid "+(((d=n[1])==null?void 0:d.page)===n[38]?"#445;":"transparent")+";"),l[0]&256|l[1]&1024&&(h.$$scope={dirty:l,ctx:n}),t.$set(h)},i(a){i||(de(t.$$.fragment,a),i=!0)},o(a){Ie(t.$$.fragment,a),i=!1},d(a){a&&_(e),r&&r.d(a),lt(t,a)}}}function tT(n){return{c:$e,l:$e,m:$e,p:$e,i:$e,o:$e,d:$e}}function nT(n){let e,t;function i(){return n[20](n[38])}return e=new fn({props:{class:"row center-cross center g8 p816 hoverable noselect",onclick:i,styleInner:"width: 100%; height: 100%; border-bottom: 4px solid transparent;",$$slots:{default:[sT]},$$scope:{ctx:n}}}),{c(){st(e.$$.fragment)},l(r){ot(e.$$.fragment,r)},m(r,s){at(e,r,s),t=!0},p(r,s){n=r;const o={};s[1]&1024&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(r){t||(de(e.$$.fragment,r),t=!0)},o(r){Ie(e.$$.fragment,r),t=!1},d(r){lt(e,r)}}}function iT(n){let e;return{c(){e=A("div"),this.h()},l(t){e=R(t,"DIV",{style:!0,class:!0}),T(e).forEach(_),this.h()},h(){B(e,"height","100%"),g(e,"class","vr")},m(t,i){Z(t,e,i)},d(t){t&&_(e)}}}function rT(n){let e=n[8]("account.pages."+n[38])+"",t,i;return{c(){t=he(e),i=ee()},l(r){t=fe(r,e),i=te(r)},m(r,s){Z(r,t,s),Z(r,i,s)},p(r,s){s[0]&256&&e!==(e=r[8]("account.pages."+r[38])+"")&&Ee(t,e)},d(r){r&&(_(t),_(i))}}}function sT(n){let e,t,i,r,s,o;return{c(){e=Re("svg"),t=Re("g"),i=Re("g"),r=Re("g"),s=Re("path"),o=ee(),this.h()},l(a){e=Oe(a,"svg",{style:!0,viewBox:!0,fill:!0,xmlns:!0});var l=T(e);t=Oe(l,"g",{id:!0,"stroke-width":!0}),T(t).forEach(_),i=Oe(l,"g",{id:!0,"stroke-linecap":!0,"stroke-linejoin":!0}),T(i).forEach(_),r=Oe(l,"g",{id:!0});var h=T(r);s=Oe(h,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0}),T(s).forEach(_),h.forEach(_),l.forEach(_),o=te(a),this.h()},h(){g(t,"id","SVGRepo_bgCarrier"),g(t,"stroke-width","0"),g(i,"id","SVGRepo_tracerCarrier"),g(i,"stroke-linecap","round"),g(i,"stroke-linejoin","round"),g(s,"d","M8 17L3 12M3 12L8 7M3 12H21"),g(s,"stroke","#000000"),g(s,"stroke-width","2"),g(s,"stroke-linecap","round"),g(s,"stroke-linejoin","round"),g(r,"id","SVGRepo_iconCarrier"),B(e,"width","16px"),B(e,"height","16px"),g(e,"viewBox","0 0 24 24"),g(e,"fill","none"),g(e,"xmlns","http://www.w3.org/2000/svg")},m(a,l){Z(a,e,l),p(e,t),p(e,i),p(e,r),p(r,s),Z(a,o,l)},p:$e,d(a){a&&(_(e),_(o))}}}function sm(n){let e,t,i,r,s;const o=[nT,tT,eT],a=[];function l(h,d){var m;return d[0]&1&&(e=null),h[38]===Ki.Details?0:(e==null&&(e=h[38]===Ki.Permissions&&!((m=h[0])!=null&&m.hasPermission(101))),e?1:h[38]!==Ki.PasswordChange?2:-1)}return~(t=l(n,[-1,-1]))&&(i=a[t]=o[t](n)),{c(){i&&i.c(),r=dt()},l(h){i&&i.l(h),r=dt()},m(h,d){~t&&a[t].m(h,d),Z(h,r,d),s=!0},p(h,d){let m=t;t=l(h,d),t===m?~t&&a[t].p(h,d):(i&&(bt(),Ie(a[m],1,1,()=>{a[m]=null}),wt()),~t?(i=a[t],i?i.p(h,d):(i=a[t]=o[t](h),i.c()),de(i,1),i.m(r.parentNode,r)):i=null)},i(h){s||(de(i),s=!0)},o(h){Ie(i),s=!1},d(h){h&&_(r),~t&&a[t].d(h)}}}function oT(n){let e,t,i,r,s,o,a,l,h=n[8]("account.passwordLabel")+"",d,m,v,k,w,E,I,M=n[8]("account.repeatPasswordLabel")+"",C,D,O,P,F,V,$,G,U=n[8]("account.changePassword")+"",H,j,Q,W;function Y(ie){n[26](ie)}let q={name:"password",id:"password",autocomplete:"new-password"};n[4]!==void 0&&(q.value=n[4]),v=new O0({props:q}),un.push(()=>jn(v,"value",Y));function ne(ie){n[27](ie)}let J={name:"repeatPassword",id:"repeatPassword",autocomplete:"new-password"};n[5]!==void 0&&(J.value=n[5]),O=new O0({props:J}),un.push(()=>jn(O,"value",ne));let ge=n[7]&&om(n);return{c(){e=A("div"),t=ee(),i=A("form"),r=A("input"),o=ee(),a=A("div"),l=A("label"),d=he(h),m=ee(),st(v.$$.fragment),w=ee(),E=A("div"),I=A("label"),C=he(M),D=ee(),st(O.$$.fragment),F=ee(),ge&&ge.c(),V=ee(),$=A("div"),G=A("button"),H=he(U),this.h()},l(ie){e=R(ie,"DIV",{class:!0}),T(e).forEach(_),t=te(ie),i=R(ie,"FORM",{});var le=T(i);r=R(le,"INPUT",{type:!0,name:!0,autocomplete:!0,style:!0}),o=te(le),a=R(le,"DIV",{class:!0});var pe=T(a);l=R(pe,"LABEL",{for:!0,class:!0,style:!0});var ye=T(l);d=fe(ye,h),ye.forEach(_),m=te(pe),ot(v.$$.fragment,pe),pe.forEach(_),w=te(le),E=R(le,"DIV",{class:!0});var be=T(E);I=R(be,"LABEL",{for:!0,class:!0,style:!0});var re=T(I);C=fe(re,M),re.forEach(_),D=te(be),ot(O.$$.fragment,be),be.forEach(_),F=te(le),ge&&ge.l(le),V=te(le),$=R(le,"DIV",{class:!0,style:!0});var me=T($);G=R(me,"BUTTON",{class:!0,type:!0});var ke=T(G);H=fe(ke,U),ke.forEach(_),me.forEach(_),le.forEach(_),this.h()},h(){var ie;g(e,"class","sep"),g(r,"type","email"),g(r,"name","email"),g(r,"autocomplete","username"),r.value=s=(ie=n[0])==null?void 0:ie.profile.email,B(r,"position","absolute"),B(r,"left","-9999px"),B(r,"width","1px"),B(r,"height","1px"),r.readOnly=!0,g(l,"for","password"),g(l,"class","field-label"),B(l,"color","#888"),B(l,"font-size","14px"),g(a,"class","column p816 hoverable g4"),g(I,"for","repeatPassword"),g(I,"class","field-label"),B(I,"color","#888"),B(I,"font-size","14px"),g(E,"class","column p816 hoverable g4"),g(G,"class","button-container row center-cross g8 p816 noselect svelte-uusdon"),g(G,"type","submit"),G.disabled=n[6],g($,"class","row g8 p816"),B($,"justify-content","flex-end")},m(ie,le){Z(ie,e,le),Z(ie,t,le),Z(ie,i,le),p(i,r),p(i,o),p(i,a),p(a,l),p(l,d),p(a,m),at(v,a,null),p(i,w),p(i,E),p(E,I),p(I,C),p(E,D),at(O,E,null),p(i,F),ge&&ge.m(i,null),p(i,V),p(i,$),p($,G),p(G,H),j=!0,Q||(W=nt(i,"submit",ro(n[18])),Q=!0)},p(ie,le){var be;(!j||le[0]&1&&s!==(s=(be=ie[0])==null?void 0:be.profile.email)&&r.value!==s)&&(r.value=s),(!j||le[0]&256)&&h!==(h=ie[8]("account.passwordLabel")+"")&&Ee(d,h);const pe={};!k&&le[0]&16&&(k=!0,pe.value=ie[4],Yn(()=>k=!1)),v.$set(pe),(!j||le[0]&256)&&M!==(M=ie[8]("account.repeatPasswordLabel")+"")&&Ee(C,M);const ye={};!P&&le[0]&32&&(P=!0,ye.value=ie[5],Yn(()=>P=!1)),O.$set(ye),ie[7]?ge?ge.p(ie,le):(ge=om(ie),ge.c(),ge.m(i,V)):ge&&(ge.d(1),ge=null),(!j||le[0]&256)&&U!==(U=ie[8]("account.changePassword")+"")&&Ee(H,U),(!j||le[0]&64)&&(G.disabled=ie[6])},i(ie){j||(de(v.$$.fragment,ie),de(O.$$.fragment,ie),j=!0)},o(ie){Ie(v.$$.fragment,ie),Ie(O.$$.fragment,ie),j=!1},d(ie){ie&&(_(e),_(t),_(i)),lt(v),lt(O),ge&&ge.d(),Q=!1,W()}}}function aT(n){var E;let e,t,i,r,s,o=n[8]("account.accountRoles")+"",a,l,h=[],d=new Map,m,v=Bt(((E=n[0])==null?void 0:E.profile.roles)||[]);const k=I=>I[35];for(let I=0;I<v.length;I+=1){let M=em(n,v,I),C=k(M);d.set(C,h[I]=lm(C,M))}let w=null;return v.length||(w=am(n)),{c(){e=A("div"),t=ee(),i=A("div"),r=A("div"),s=A("p"),a=he(o),l=ee();for(let I=0;I<h.length;I+=1)h[I].c();m=dt(),w&&w.c(),this.h()},l(I){e=R(I,"DIV",{class:!0,style:!0}),T(e).forEach(_),t=te(I),i=R(I,"DIV",{class:!0});var M=T(i);r=R(M,"DIV",{class:!0});var C=T(r);s=R(C,"P",{});var D=T(s);a=fe(D,o),D.forEach(_),C.forEach(_),M.forEach(_),l=te(I);for(let O=0;O<h.length;O+=1)h[O].l(I);m=dt(),w&&w.l(I),this.h()},h(){g(e,"class","sep"),B(e,"border-top","none"),g(r,"class","column"),g(i,"class","row g8 p816 hoverable")},m(I,M){Z(I,e,M),Z(I,t,M),Z(I,i,M),p(i,r),p(r,s),p(s,a),Z(I,l,M);for(let C=0;C<h.length;C+=1)h[C]&&h[C].m(I,M);Z(I,m,M),w&&w.m(I,M)},p(I,M){var C;M[0]&256&&o!==(o=I[8]("account.accountRoles")+"")&&Ee(a,o),M[0]&257&&(v=Bt(((C=I[0])==null?void 0:C.profile.roles)||[]),h=vr(h,M,k,1,I,v,d,m.parentNode,Jc,lm,m,em),!v.length&&w?w.p(I,M):v.length?w&&(w.d(1),w=null):(w=am(I),w.c(),w.m(m.parentNode,m)))},i:$e,o:$e,d(I){I&&(_(e),_(t),_(i),_(l),_(m));for(let M=0;M<h.length;M+=1)h[M].d(I);w&&w.d(I)}}}function lT(n){let e,t,i,r,s,o=n[8]("account.accountPermissions")+"",a,l,h,d,m,v;const k=[hT,cT],w=[];function E(I,M){return I[11]===null?0:1}return h=E(n),d=w[h]=k[h](n),{c(){e=A("div"),t=ee(),i=A("div"),r=A("div"),s=A("p"),a=he(o),l=ee(),d.c(),m=dt(),this.h()},l(I){e=R(I,"DIV",{class:!0,style:!0}),T(e).forEach(_),t=te(I),i=R(I,"DIV",{class:!0});var M=T(i);r=R(M,"DIV",{class:!0});var C=T(r);s=R(C,"P",{});var D=T(s);a=fe(D,o),D.forEach(_),C.forEach(_),M.forEach(_),l=te(I),d.l(I),m=dt(),this.h()},h(){g(e,"class","sep"),B(e,"border-top","none"),g(r,"class","column"),g(i,"class","row g8 p816 hoverable")},m(I,M){Z(I,e,M),Z(I,t,M),Z(I,i,M),p(i,r),p(r,s),p(s,a),Z(I,l,M),w[h].m(I,M),Z(I,m,M),v=!0},p(I,M){(!v||M[0]&256)&&o!==(o=I[8]("account.accountPermissions")+"")&&Ee(a,o);let C=h;h=E(I),h===C?w[h].p(I,M):(bt(),Ie(w[C],1,1,()=>{w[C]=null}),wt(),d=w[h],d?d.p(I,M):(d=w[h]=k[h](I),d.c()),de(d,1),d.m(m.parentNode,m))},i(I){v||(de(d),v=!0)},o(I){Ie(d),v=!1},d(I){I&&(_(e),_(t),_(i),_(l),_(m)),w[h].d(I)}}}function uT(n){var Ji,Yi,Mr,lo,cs,uo,ks,ei;let e,t,i,r,s,o=n[8]("account.settings")+"",a,l,h,d,m,v,k,w,E,I,M=n[8]("iconSets.title")+"",C,D,O,P,F,V,$,G,U,H=n[8]("account.accountDetails")+"",j,Q,W,Y,q,ne=n[8]("account.email")+"",J,ge,ie,le=((Ji=n[0])==null?void 0:Ji.profile.email)+"",pe,ye,be,re,me,ke=n[8]("account.country")+"",X,ue,_e,oe=((Yi=n[0])==null?void 0:Yi.profile.country)+"",ae,Se,Me,we,Te,Ae=n[8]("account.organization")+"",Ne,De,_t,Fe=((Mr=n[0])==null?void 0:Mr.profile.organization.name)+"",Pe,je,Ve,Ue,Ke,We=n[8]("account.phone")+"",ze,Et,rt,ft=((lo=n[0])==null?void 0:lo.profile.phone)+"",Ut,Qe,yt,mt,Ft,qt=n[8]("account.lastLoginTimestamp")+"",vt,$t,dn,sn=((cs=n[0])!=null&&cs.profile?new Date((uo=n[0])==null?void 0:uo.profile.lastLoginTimestamp).toLocaleString("et-EE",{dateStyle:"medium",timeStyle:"medium"}):"-")+"",pn,Ye,Vt,Mt,Rt,gt=n[8]("account.registrationTimestamp")+"",it,St,Jt,ut=((ks=n[0])!=null&&ks.profile?new Date((ei=n[0])==null?void 0:ei.profile.registrationTimestamp).toLocaleString("et-EE",{dateStyle:"medium",timeStyle:"medium"}):"-")+"",jt,gn,Be,tt,en,Fn,Vn,Zt=n[8]("account.organizationSettings")+"",cn,Un,mn,tn,En,Ln,xt=n[8]("account.mapCenterDescription")+"",qe,kt,Gt,Je,It,wn,Cn,oi,ri,ci,vn,zn,Mi,wi,_n,qn=n[8]("account.openSourceAttribution")+"",Er,or,Ri,ar=n[8]("account.openSourceAttributionLink")+"",yn,Gn,$n;function qr(et){n[22](et)}let gi={labelClass:"hoverable",labelStyle:"padding: 8px 16px;",label:n[8]("account.showPlanesInTrafficList"),id:"traffic-list-shows-adsb"};n[9]!==void 0&&(gi.checked=n[9]),h=new so({props:gi}),un.push(()=>jn(h,"checked",qr));let Sr=Bt(Fc),Jn=[];for(let et=0;et<Sr.length;et+=1)Jn[et]=hm(nm(n,Sr,et));const Ir=et=>Ie(Jn[et],1,1,()=>{Jn[et]=null});mn=new fn({props:{class:"row center-cross g8 p816 hoverable noselect",onclick:n[17],styleInner:"border-block: 1px solid #e8e8e8;",$$slots:{default:[gT]},$$scope:{ctx:n}}});let On=n[3]===!1&&fm(n);return It=new fn({props:{class:"row center-cross g8 p816 hoverable noselect",onclick:z4,$$slots:{default:[mT]},$$scope:{ctx:n}}}),Cn=new fn({props:{class:"row center-cross g8 p816 hoverable noselect",onclick:G4,styleInner:"border-top: 1px solid #e8e8e8",$$slots:{default:[_T]},$$scope:{ctx:n}}}),ri=new fn({props:{class:"row center-cross g8 p816 hoverable noselect",onclick:n[24],styleInner:"border-top: 1px solid #e8e8e8;",$$slots:{default:[pT]},$$scope:{ctx:n}}}),vn=new fn({props:{class:"row center-cross g8 p816 hoverable noselect",onclick:n[25],styleInner:"border-top: 1px solid #e8e8e8;",$$slots:{default:[vT]},$$scope:{ctx:n}}}),{c(){e=A("div"),t=ee(),i=A("div"),r=A("div"),s=A("p"),a=he(o),l=ee(),st(h.$$.fragment),m=ee(),v=A("div"),k=ee(),w=A("div"),E=A("div"),I=A("p"),C=he(M),D=ee(),O=A("div");for(let et=0;et<Jn.length;et+=1)Jn[et].c();P=ee(),F=A("div"),V=ee(),$=A("div"),G=A("div"),U=A("p"),j=he(H),Q=ee(),W=A("div"),Y=A("div"),q=A("b"),J=he(ne),ge=ee(),ie=A("p"),pe=he(le),ye=ee(),be=A("div"),re=A("div"),me=A("b"),X=he(ke),ue=ee(),_e=A("p"),ae=he(oe),Se=ee(),Me=A("div"),we=A("div"),Te=A("b"),Ne=he(Ae),De=ee(),_t=A("p"),Pe=he(Fe),je=ee(),Ve=A("div"),Ue=A("div"),Ke=A("b"),ze=he(We),Et=ee(),rt=A("p"),Ut=he(ft),Qe=ee(),yt=A("div"),mt=A("div"),Ft=A("b"),vt=he(qt),$t=ee(),dn=A("p"),pn=he(sn),Ye=ee(),Vt=A("div"),Mt=A("div"),Rt=A("b"),it=he(gt),St=ee(),Jt=A("p"),jt=he(ut),gn=ee(),Be=A("div"),tt=ee(),en=A("div"),Fn=A("div"),Vn=A("p"),cn=he(Zt),Un=ee(),st(mn.$$.fragment),tn=ee(),On&&On.c(),En=ee(),Ln=A("p"),qe=he(xt),kt=ee(),Gt=A("div"),Je=ee(),st(It.$$.fragment),wn=ee(),st(Cn.$$.fragment),oi=ee(),st(ri.$$.fragment),ci=ee(),st(vn.$$.fragment),zn=ee(),Mi=A("div"),wi=ee(),_n=A("p"),Er=he(qn),or=ee(),Ri=A("a"),yn=he(ar),Gn=he("."),this.h()},l(et){e=R(et,"DIV",{class:!0}),T(e).forEach(_),t=te(et),i=R(et,"DIV",{class:!0,style:!0});var Pt=T(i);r=R(Pt,"DIV",{class:!0});var Oi=T(r);s=R(Oi,"P",{});var Pi=T(s);a=fe(Pi,o),Pi.forEach(_),Oi.forEach(_),Pt.forEach(_),l=te(et),ot(h.$$.fragment,et),m=te(et),v=R(et,"DIV",{class:!0}),T(v).forEach(_),k=te(et),w=R(et,"DIV",{class:!0});var _i=T(w);E=R(_i,"DIV",{class:!0,style:!0});var Zr=T(E);I=R(Zr,"P",{});var Sn=T(I);C=fe(Sn,M),Sn.forEach(_),Zr.forEach(_),D=te(_i),O=R(_i,"DIV",{class:!0});var $i=T(O);for(let Lr=0;Lr<Jn.length;Lr+=1)Jn[Lr].l($i);$i.forEach(_),_i.forEach(_),P=te(et),F=R(et,"DIV",{class:!0}),T(F).forEach(_),V=te(et),$=R(et,"DIV",{class:!0});var Xn=T($);G=R(Xn,"DIV",{class:!0});var xr=T(G);U=R(xr,"P",{});var hs=T(U);j=fe(hs,H),hs.forEach(_),xr.forEach(_),Xn.forEach(_),Q=te(et),W=R(et,"DIV",{class:!0});var Yr=T(W);Y=R(Yr,"DIV",{class:!0});var Rn=T(Y);q=R(Rn,"B",{style:!0});var pi=T(q);J=fe(pi,ne),pi.forEach(_),ge=te(Rn),ie=R(Rn,"P",{});var Fr=T(ie);pe=fe(Fr,le),Fr.forEach(_),Rn.forEach(_),Yr.forEach(_),ye=te(et),be=R(et,"DIV",{class:!0});var Tr=T(be);re=R(Tr,"DIV",{class:!0});var An=T(re);me=R(An,"B",{style:!0});var Qi=T(me);X=fe(Qi,ke),Qi.forEach(_),ue=te(An),_e=R(An,"P",{});var Ni=T(_e);ae=fe(Ni,oe),Ni.forEach(_),An.forEach(_),Tr.forEach(_),Se=te(et),Me=R(et,"DIV",{class:!0});var co=T(Me);we=R(co,"DIV",{class:!0});var Es=T(we);Te=R(Es,"B",{style:!0});var ho=T(Te);Ne=fe(ho,Ae),ho.forEach(_),De=te(Es),_t=R(Es,"P",{});var zs=T(_t);Pe=fe(zs,Fe),zs.forEach(_),Es.forEach(_),co.forEach(_),je=te(et),Ve=R(et,"DIV",{class:!0});var Jo=T(Ve);Ue=R(Jo,"DIV",{class:!0});var Ss=T(Ue);Ke=R(Ss,"B",{style:!0});var Mn=T(Ke);ze=fe(Mn,We),Mn.forEach(_),Et=te(Ss),rt=R(Ss,"P",{});var Gs=T(rt);Ut=fe(Gs,ft),Gs.forEach(_),Ss.forEach(_),Jo.forEach(_),Qe=te(et),yt=R(et,"DIV",{class:!0});var er=T(yt);mt=R(er,"DIV",{class:!0});var ki=T(mt);Ft=R(ki,"B",{style:!0});var jr=T(Ft);vt=fe(jr,qt),jr.forEach(_),$t=te(ki),dn=R(ki,"P",{});var Qo=T(dn);pn=fe(Qo,sn),Qo.forEach(_),ki.forEach(_),er.forEach(_),Ye=te(et),Vt=R(et,"DIV",{class:!0});var Br=T(Vt);Mt=R(Br,"DIV",{class:!0});var Hs=T(Mt);Rt=R(Hs,"B",{style:!0});var Wr=T(Rt);it=fe(Wr,gt),Wr.forEach(_),St=te(Hs),Jt=R(Hs,"P",{});var ea=T(Jt);jt=fe(ea,ut),ea.forEach(_),Hs.forEach(_),Br.forEach(_),gn=te(et),Be=R(et,"DIV",{class:!0}),T(Be).forEach(_),tt=te(et),en=R(et,"DIV",{class:!0});var lr=T(en);Fn=R(lr,"DIV",{class:!0});var Us=T(Fn);Vn=R(Us,"P",{});var ta=T(Vn);cn=fe(ta,Zt),ta.forEach(_),Us.forEach(_),lr.forEach(_),Un=te(et),ot(mn.$$.fragment,et),tn=te(et),On&&On.l(et),En=te(et),Ln=R(et,"P",{class:!0,style:!0});var ur=T(Ln);qe=fe(ur,xt),ur.forEach(_),kt=te(et),Gt=R(et,"DIV",{class:!0}),T(Gt).forEach(_),Je=te(et),ot(It.$$.fragment,et),wn=te(et),ot(Cn.$$.fragment,et),oi=te(et),ot(ri.$$.fragment,et),ci=te(et),ot(vn.$$.fragment,et),zn=te(et),Mi=R(et,"DIV",{class:!0}),T(Mi).forEach(_),wi=te(et),_n=R(et,"P",{class:!0,style:!0});var qs=T(_n);Er=fe(qs,qn),or=te(qs),Ri=R(qs,"A",{href:!0,class:!0});var Ao=T(Ri);yn=fe(Ao,ar),Ao.forEach(_),Gn=fe(qs,"."),qs.forEach(_),this.h()},h(){g(e,"class","sep"),g(r,"class","column"),g(i,"class","row g8 p816 hoverable"),B(i,"border-bottom","1px solid #e8e8e8"),g(v,"class","sep"),g(E,"class","column p816"),B(E,"justify-content","space-between"),B(E,"border-bottom","1px solid #e8e8e8"),g(O,"class","column g4 p816"),g(w,"class","column"),g(F,"class","sep"),g(G,"class","column"),g($,"class","row g8 p816 hoverable"),B(q,"font-size","12px"),g(Y,"class","column"),g(W,"class","row g8 p816 hoverable detail svelte-uusdon"),B(me,"font-size","12px"),g(re,"class","column"),g(be,"class","row g8 p816 hoverable detail svelte-uusdon"),B(Te,"font-size","12px"),g(we,"class","column"),g(Me,"class","row g8 p816 hoverable detail svelte-uusdon"),B(Ke,"font-size","12px"),g(Ue,"class","column"),g(Ve,"class","row g8 p816 hoverable detail svelte-uusdon"),B(Ft,"font-size","12px"),g(mt,"class","column"),g(yt,"class","row g8 p816 hoverable detail svelte-uusdon"),B(Rt,"font-size","12px"),g(Mt,"class","column"),g(Vt,"class","row g8 p816 hoverable detail svelte-uusdon"),g(Be,"class","sep"),g(Fn,"class","column"),g(en,"class","row g8 p816 hoverable"),g(Ln,"class","p816"),B(Ln,"font-size","12px"),B(Ln,"color","#444"),g(Gt,"class","sep"),g(Mi,"class","sep"),g(Ri,"href","/attributions"),g(Ri,"class","attributions-link svelte-uusdon"),g(_n,"class","p816"),B(_n,"font-size","12px"),B(_n,"color","#444")},m(et,Pt){Z(et,e,Pt),Z(et,t,Pt),Z(et,i,Pt),p(i,r),p(r,s),p(s,a),Z(et,l,Pt),at(h,et,Pt),Z(et,m,Pt),Z(et,v,Pt),Z(et,k,Pt),Z(et,w,Pt),p(w,E),p(E,I),p(I,C),p(w,D),p(w,O);for(let Oi=0;Oi<Jn.length;Oi+=1)Jn[Oi]&&Jn[Oi].m(O,null);Z(et,P,Pt),Z(et,F,Pt),Z(et,V,Pt),Z(et,$,Pt),p($,G),p(G,U),p(U,j),Z(et,Q,Pt),Z(et,W,Pt),p(W,Y),p(Y,q),p(q,J),p(Y,ge),p(Y,ie),p(ie,pe),Z(et,ye,Pt),Z(et,be,Pt),p(be,re),p(re,me),p(me,X),p(re,ue),p(re,_e),p(_e,ae),Z(et,Se,Pt),Z(et,Me,Pt),p(Me,we),p(we,Te),p(Te,Ne),p(we,De),p(we,_t),p(_t,Pe),Z(et,je,Pt),Z(et,Ve,Pt),p(Ve,Ue),p(Ue,Ke),p(Ke,ze),p(Ue,Et),p(Ue,rt),p(rt,Ut),Z(et,Qe,Pt),Z(et,yt,Pt),p(yt,mt),p(mt,Ft),p(Ft,vt),p(mt,$t),p(mt,dn),p(dn,pn),Z(et,Ye,Pt),Z(et,Vt,Pt),p(Vt,Mt),p(Mt,Rt),p(Rt,it),p(Mt,St),p(Mt,Jt),p(Jt,jt),Z(et,gn,Pt),Z(et,Be,Pt),Z(et,tt,Pt),Z(et,en,Pt),p(en,Fn),p(Fn,Vn),p(Vn,cn),Z(et,Un,Pt),at(mn,et,Pt),Z(et,tn,Pt),On&&On.m(et,Pt),Z(et,En,Pt),Z(et,Ln,Pt),p(Ln,qe),Z(et,kt,Pt),Z(et,Gt,Pt),Z(et,Je,Pt),at(It,et,Pt),Z(et,wn,Pt),at(Cn,et,Pt),Z(et,oi,Pt),at(ri,et,Pt),Z(et,ci,Pt),at(vn,et,Pt),Z(et,zn,Pt),Z(et,Mi,Pt),Z(et,wi,Pt),Z(et,_n,Pt),p(_n,Er),p(_n,or),p(_n,Ri),p(Ri,yn),p(_n,Gn),$n=!0},p(et,Pt){var Xn,xr,hs,Yr,Rn,pi,Fr,Tr;(!$n||Pt[0]&256)&&o!==(o=et[8]("account.settings")+"")&&Ee(a,o);const Oi={};if(Pt[0]&256&&(Oi.label=et[8]("account.showPlanesInTrafficList")),!d&&Pt[0]&512&&(d=!0,Oi.checked=et[9],Yn(()=>d=!1)),h.$set(Oi),(!$n||Pt[0]&256)&&M!==(M=et[8]("iconSets.title")+"")&&Ee(C,M),Pt[0]&1280){Sr=Bt(Fc);let An;for(An=0;An<Sr.length;An+=1){const Qi=nm(et,Sr,An);Jn[An]?(Jn[An].p(Qi,Pt),de(Jn[An],1)):(Jn[An]=hm(Qi),Jn[An].c(),de(Jn[An],1),Jn[An].m(O,null))}for(bt(),An=Sr.length;An<Jn.length;An+=1)Ir(An);wt()}(!$n||Pt[0]&256)&&H!==(H=et[8]("account.accountDetails")+"")&&Ee(j,H),(!$n||Pt[0]&256)&&ne!==(ne=et[8]("account.email")+"")&&Ee(J,ne),(!$n||Pt[0]&1)&&le!==(le=((Xn=et[0])==null?void 0:Xn.profile.email)+"")&&Ee(pe,le),(!$n||Pt[0]&256)&&ke!==(ke=et[8]("account.country")+"")&&Ee(X,ke),(!$n||Pt[0]&1)&&oe!==(oe=((xr=et[0])==null?void 0:xr.profile.country)+"")&&Ee(ae,oe),(!$n||Pt[0]&256)&&Ae!==(Ae=et[8]("account.organization")+"")&&Ee(Ne,Ae),(!$n||Pt[0]&1)&&Fe!==(Fe=((hs=et[0])==null?void 0:hs.profile.organization.name)+"")&&Ee(Pe,Fe),(!$n||Pt[0]&256)&&We!==(We=et[8]("account.phone")+"")&&Ee(ze,We),(!$n||Pt[0]&1)&&ft!==(ft=((Yr=et[0])==null?void 0:Yr.profile.phone)+"")&&Ee(Ut,ft),(!$n||Pt[0]&256)&&qt!==(qt=et[8]("account.lastLoginTimestamp")+"")&&Ee(vt,qt),(!$n||Pt[0]&1)&&sn!==(sn=((Rn=et[0])!=null&&Rn.profile?new Date((pi=et[0])==null?void 0:pi.profile.lastLoginTimestamp).toLocaleString("et-EE",{dateStyle:"medium",timeStyle:"medium"}):"-")+"")&&Ee(pn,sn),(!$n||Pt[0]&256)&&gt!==(gt=et[8]("account.registrationTimestamp")+"")&&Ee(it,gt),(!$n||Pt[0]&1)&&ut!==(ut=((Fr=et[0])!=null&&Fr.profile?new Date((Tr=et[0])==null?void 0:Tr.profile.registrationTimestamp).toLocaleString("et-EE",{dateStyle:"medium",timeStyle:"medium"}):"-")+"")&&Ee(jt,ut),(!$n||Pt[0]&256)&&Zt!==(Zt=et[8]("account.organizationSettings")+"")&&Ee(cn,Zt);const Pi={};Pt[0]&268|Pt[1]&1024&&(Pi.$$scope={dirty:Pt,ctx:et}),mn.$set(Pi),et[3]===!1?On?On.p(et,Pt):(On=fm(et),On.c(),On.m(En.parentNode,En)):On&&(On.d(1),On=null),(!$n||Pt[0]&256)&&xt!==(xt=et[8]("account.mapCenterDescription")+"")&&Ee(qe,xt);const _i={};Pt[0]&256|Pt[1]&1024&&(_i.$$scope={dirty:Pt,ctx:et}),It.$set(_i);const Zr={};Pt[0]&256|Pt[1]&1024&&(Zr.$$scope={dirty:Pt,ctx:et}),Cn.$set(Zr);const Sn={};Pt[0]&256|Pt[1]&1024&&(Sn.$$scope={dirty:Pt,ctx:et}),ri.$set(Sn);const $i={};Pt[0]&1&&($i.onclick=et[25]),Pt[0]&256|Pt[1]&1024&&($i.$$scope={dirty:Pt,ctx:et}),vn.$set($i),(!$n||Pt[0]&256)&&qn!==(qn=et[8]("account.openSourceAttribution")+"")&&Ee(Er,qn),(!$n||Pt[0]&256)&&ar!==(ar=et[8]("account.openSourceAttributionLink")+"")&&Ee(yn,ar)},i(et){if(!$n){de(h.$$.fragment,et);for(let Pt=0;Pt<Sr.length;Pt+=1)de(Jn[Pt]);de(mn.$$.fragment,et),de(It.$$.fragment,et),de(Cn.$$.fragment,et),de(ri.$$.fragment,et),de(vn.$$.fragment,et),$n=!0}},o(et){Ie(h.$$.fragment,et),Jn=Jn.filter(Boolean);for(let Pt=0;Pt<Jn.length;Pt+=1)Ie(Jn[Pt]);Ie(mn.$$.fragment,et),Ie(It.$$.fragment,et),Ie(Cn.$$.fragment,et),Ie(ri.$$.fragment,et),Ie(vn.$$.fragment,et),$n=!1},d(et){et&&(_(e),_(t),_(i),_(l),_(m),_(v),_(k),_(w),_(P),_(F),_(V),_($),_(Q),_(W),_(ye),_(be),_(Se),_(Me),_(je),_(Ve),_(Qe),_(yt),_(Ye),_(Vt),_(gn),_(Be),_(tt),_(en),_(Un),_(tn),_(En),_(Ln),_(kt),_(Gt),_(Je),_(wn),_(oi),_(ci),_(zn),_(Mi),_(wi),_(_n)),lt(h,et),ui(Jn,et),lt(mn,et),On&&On.d(et),lt(It,et),lt(Cn,et),lt(ri,et),lt(vn,et)}}}function om(n){let e,t,i=(n[7]==="success"?n[8]("account.passwordChangeSuccess"):n[7])+"",r;return{c(){e=A("span"),t=new Ua(!1),this.h()},l(s){e=R(s,"SPAN",{class:!0});var o=T(e);t=qa(o,!1),o.forEach(_),this.h()},h(){t.a=null,g(e,"class",r="status-message "+(n[7]==="success"?"":"error")+" svelte-uusdon")},m(s,o){Z(s,e,o),t.m(i,e)},p(s,o){o[0]&384&&i!==(i=(s[7]==="success"?s[8]("account.passwordChangeSuccess"):s[7])+"")&&t.p(i),o[0]&128&&r!==(r="status-message "+(s[7]==="success"?"":"error")+" svelte-uusdon")&&g(e,"class",r)},d(s){s&&_(e)}}}function am(n){let e,t,i=n[8]("account.noRoles")+"",r,s;return{c(){e=A("div"),t=A("p"),r=he(i),s=ee(),this.h()},l(o){e=R(o,"DIV",{class:!0,style:!0});var a=T(e);t=R(a,"P",{});var l=T(t);r=fe(l,i),l.forEach(_),s=te(a),a.forEach(_),this.h()},h(){g(e,"class","row p816 center center-cross detail svelte-uusdon"),B(e,"padding-left","0")},m(o,a){Z(o,e,a),p(e,t),p(t,r),p(e,s)},p(o,a){a[0]&256&&i!==(i=o[8]("account.noRoles")+"")&&Ee(r,i)},d(o){o&&_(e)}}}function lm(n,e){let t,i,r,s=e[35]+"",o,a;return{key:n,first:null,c(){t=A("div"),i=A("div"),r=A("b"),o=he(s),a=ee(),this.h()},l(l){t=R(l,"DIV",{class:!0});var h=T(t);i=R(h,"DIV",{class:!0});var d=T(i);r=R(d,"B",{});var m=T(r);o=fe(m,s),m.forEach(_),d.forEach(_),a=te(h),h.forEach(_),this.h()},h(){g(i,"class","column"),g(t,"class","row g8 p816 hoverable detail svelte-uusdon"),this.first=t},m(l,h){Z(l,t,h),p(t,i),p(i,r),p(r,o),p(t,a)},p(l,h){e=l,h[0]&1&&s!==(s=e[35]+"")&&Ee(o,s)},d(l){l&&_(t)}}}function cT(n){let e=[],t=new Map,i,r=Bt(n[11]);const s=a=>a[32].id;for(let a=0;a<r.length;a+=1){let l=tm(n,r,a),h=s(l);t.set(h,e[a]=cm(h,l))}let o=null;return r.length||(o=um(n)),{c(){for(let a=0;a<e.length;a+=1)e[a].c();i=dt(),o&&o.c()},l(a){for(let l=0;l<e.length;l+=1)e[l].l(a);i=dt(),o&&o.l(a)},m(a,l){for(let h=0;h<e.length;h+=1)e[h]&&e[h].m(a,l);Z(a,i,l),o&&o.m(a,l)},p(a,l){l[0]&2304&&(r=Bt(a[11]),e=vr(e,l,s,1,a,r,t,i.parentNode,Jc,cm,i,tm),!r.length&&o?o.p(a,l):r.length?o&&(o.d(1),o=null):(o=um(a),o.c(),o.m(i.parentNode,i)))},i:$e,o:$e,d(a){a&&_(i);for(let l=0;l<e.length;l+=1)e[l].d(a);o&&o.d(a)}}}function hT(n){let e,t,i;return t=new ws({props:{color:"#aa8800",size:"32"}}),{c(){e=A("div"),st(t.$$.fragment),this.h()},l(r){e=R(r,"DIV",{class:!0,style:!0});var s=T(e);ot(t.$$.fragment,s),s.forEach(_),this.h()},h(){g(e,"class","column center center-cross"),B(e,"height","64px")},m(r,s){Z(r,e,s),at(t,e,null),i=!0},p:$e,i(r){i||(de(t.$$.fragment,r),i=!0)},o(r){Ie(t.$$.fragment,r),i=!1},d(r){r&&_(e),lt(t)}}}function um(n){let e,t,i=n[8]("account.noPermissions")+"",r,s;return{c(){e=A("div"),t=A("p"),r=he(i),s=ee(),this.h()},l(o){e=R(o,"DIV",{class:!0,style:!0});var a=T(e);t=R(a,"P",{});var l=T(t);r=fe(l,i),l.forEach(_),s=te(a),a.forEach(_),this.h()},h(){g(e,"class","row p816 center center-cross detail svelte-uusdon"),B(e,"padding-left","0")},m(o,a){Z(o,e,a),p(e,t),p(t,r),p(e,s)},p(o,a){a[0]&256&&i!==(i=o[8]("account.noPermissions")+"")&&Ee(r,i)},d(o){o&&_(e)}}}function cm(n,e){let t,i,r,s=e[32].name+"",o,a,l,h=e[32].description+"",d,m;return{key:n,first:null,c(){t=A("div"),i=A("div"),r=A("b"),o=he(s),a=ee(),l=A("p"),d=he(h),m=ee(),this.h()},l(v){t=R(v,"DIV",{class:!0});var k=T(t);i=R(k,"DIV",{class:!0});var w=T(i);r=R(w,"B",{});var E=T(r);o=fe(E,s),E.forEach(_),a=te(w),l=R(w,"P",{style:!0});var I=T(l);d=fe(I,h),I.forEach(_),w.forEach(_),m=te(k),k.forEach(_),this.h()},h(){B(l,"font-size","12px"),g(i,"class","column"),g(t,"class","row g8 p816 hoverable detail svelte-uusdon"),this.first=t},m(v,k){Z(v,t,k),p(t,i),p(i,r),p(r,o),p(i,a),p(i,l),p(l,d),p(t,m)},p(v,k){e=v,k[0]&2048&&s!==(s=e[32].name+"")&&Ee(o,s),k[0]&2048&&h!==(h=e[32].description+"")&&Ee(d,h)},d(v){v&&_(t)}}}function hm(n){let e,t,i;function r(o){n[23](o)}let s={value:n[29],name:"icon-type",label:n[8](`iconSets.${n[29]}`),id:`rb-${n[29]}`};return n[10]!==void 0&&(s.group=n[10]),e=new Wl({props:s}),un.push(()=>jn(e,"group",r)),{c(){st(e.$$.fragment)},l(o){ot(e.$$.fragment,o)},m(o,a){at(e,o,a),i=!0},p(o,a){const l={};a[0]&256&&(l.label=o[8](`iconSets.${o[29]}`)),!t&&a[0]&1024&&(t=!0,l.group=o[10],Yn(()=>t=!1)),e.$set(l)},i(o){i||(de(e.$$.fragment,o),i=!0)},o(o){Ie(e.$$.fragment,o),i=!1},d(o){lt(e,o)}}}function fT(n){let e,t;return{c(){e=Re("svg"),t=Re("path"),this.h()},l(i){e=Oe(i,"svg",{style:!0,xmlns:!0,x:!0,y:!0,width:!0,height:!0,viewBox:!0});var r=T(e);t=Oe(r,"path",{d:!0}),T(t).forEach(_),r.forEach(_),this.h()},h(){g(t,"d","M 19.28125 5.28125 L 9 15.5625 L 4.71875 11.28125 L 3.28125 12.71875 L 8.28125 17.71875 L 9 18.40625 L 9.71875 17.71875 L 20.71875 6.71875 Z"),B(e,"fill","#6c6"),g(e,"xmlns","http://www.w3.org/2000/svg"),g(e,"x","0px"),g(e,"y","0px"),g(e,"width","24"),g(e,"height","24"),g(e,"viewBox","0 0 24 24")},m(i,r){Z(i,e,r),p(e,t)},i:$e,o:$e,d(i){i&&_(e)}}}function dT(n){let e,t,i;return t=new ws({props:{size:"24",color:"#aa8800"}}),{c(){e=A("span"),st(t.$$.fragment),this.h()},l(r){e=R(r,"SPAN",{class:!0});var s=T(e);ot(t.$$.fragment,s),s.forEach(_),this.h()},h(){g(e,"class","spinner svelte-uusdon")},m(r,s){Z(r,e,s),at(t,e,null),i=!0},i(r){i||(de(t.$$.fragment,r),i=!0)},o(r){Ie(t.$$.fragment,r),i=!1},d(r){r&&_(e),lt(t)}}}function gT(n){let e,t,i,r,s,o,a,l,h,d,m,v=n[8]("account.setCurrentViewAsDefault")+"",k,w,E,I,M,C;const D=[dT,fT],O=[];function P(F,V){return F[2]?0:F[3]===!0?1:-1}return~(E=P(n))&&(I=O[E]=D[E](n)),{c(){e=Re("svg"),t=Re("g"),i=Re("path"),r=Re("path"),s=Re("path"),o=Re("path"),a=Re("defs"),l=Re("clipPath"),h=Re("rect"),d=ee(),m=A("b"),k=he(v),w=ee(),I&&I.c(),M=dt(),this.h()},l(F){e=Oe(F,"svg",{style:!0,xmlns:!0,width:!0,height:!0,viewBox:!0,fill:!0});var V=T(e);t=Oe(V,"g",{"clip-path":!0});var $=T(t);i=Oe($,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0}),T(i).forEach(_),r=Oe($,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0}),T(r).forEach(_),s=Oe($,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0}),T(s).forEach(_),o=Oe($,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0}),T(o).forEach(_),$.forEach(_),a=Oe(V,"defs",{});var G=T(a);l=Oe(G,"clipPath",{id:!0});var U=T(l);h=Oe(U,"rect",{width:!0,height:!0,fill:!0}),T(h).forEach(_),U.forEach(_),G.forEach(_),V.forEach(_),d=te(F),m=R(F,"B",{class:!0});var H=T(m);k=fe(H,v),H.forEach(_),w=te(F),I&&I.l(F),M=dt(),this.h()},h(){g(i,"d","M4 9.00006L4 6.00006C4 4.89549 4.89543 4.00006 6 4.00006L9 4.00006"),g(i,"stroke","#292929"),g(i,"stroke-width","2.5"),g(i,"stroke-linecap","round"),g(i,"stroke-linejoin","round"),g(r,"d","M20 15.0001V18.0001C20 19.1046 19.1046 20.0001 18 20.0001H15"),g(r,"stroke","#292929"),g(r,"stroke-width","2.5"),g(r,"stroke-linecap","round"),g(r,"stroke-linejoin","round"),g(s,"d","M15 4.00006L18 4.00006C19.1046 4.00006 20 4.89549 20 6.00006L20 9.00006"),g(s,"stroke","#292929"),g(s,"stroke-width","2.5"),g(s,"stroke-linecap","round"),g(s,"stroke-linejoin","round"),g(o,"d","M9 20.0001L6 20.0001C4.89543 20.0001 4 19.1046 4 18.0001L4 15.0001"),g(o,"stroke","#292929"),g(o,"stroke-width","2.5"),g(o,"stroke-linecap","round"),g(o,"stroke-linejoin","round"),g(t,"clip-path","url(#clip0_429_11088)"),g(h,"width","24"),g(h,"height","24"),g(h,"fill","white"),g(l,"id","clip0_429_11088"),B(e,"width","40px"),B(e,"height","40px"),B(e,"padding","8px"),g(e,"xmlns","http://www.w3.org/2000/svg"),g(e,"width","800px"),g(e,"height","800px"),g(e,"viewBox","0 0 24 24"),g(e,"fill","none"),g(m,"class","grow")},m(F,V){Z(F,e,V),p(e,t),p(t,i),p(t,r),p(t,s),p(t,o),p(e,a),p(a,l),p(l,h),Z(F,d,V),Z(F,m,V),p(m,k),Z(F,w,V),~E&&O[E].m(F,V),Z(F,M,V),C=!0},p(F,V){(!C||V[0]&256)&&v!==(v=F[8]("account.setCurrentViewAsDefault")+"")&&Ee(k,v);let $=E;E=P(F),E!==$&&(I&&(bt(),Ie(O[$],1,1,()=>{O[$]=null}),wt()),~E?(I=O[E],I||(I=O[E]=D[E](F),I.c()),de(I,1),I.m(M.parentNode,M)):I=null)},i(F){C||(de(I),C=!0)},o(F){Ie(I),C=!1},d(F){F&&(_(e),_(d),_(m),_(w),_(M)),~E&&O[E].d(F)}}}function fm(n){let e,t=n[8]("account.mapCenterSaveError")+"",i;return{c(){e=A("div"),i=he(t),this.h()},l(r){e=R(r,"DIV",{class:!0,style:!0});var s=T(e);i=fe(s,t),s.forEach(_),this.h()},h(){g(e,"class","p816"),B(e,"color","#c44"),B(e,"font-size","12px")},m(r,s){Z(r,e,s),p(e,i)},p(r,s){s[0]&256&&t!==(t=r[8]("account.mapCenterSaveError")+"")&&Ee(i,t)},d(r){r&&_(e)}}}function mT(n){let e,t,i,r,s,o,a,l=n[8]("account.logOut")+"",h;return{c(){e=Re("svg"),t=Re("g"),i=Re("g"),r=Re("g"),s=Re("path"),o=ee(),a=A("b"),h=he(l),this.h()},l(d){e=Oe(d,"svg",{style:!0,viewBox:!0,fill:!0,xmlns:!0});var m=T(e);t=Oe(m,"g",{id:!0,"stroke-width":!0}),T(t).forEach(_),i=Oe(m,"g",{id:!0,"stroke-linecap":!0,"stroke-linejoin":!0}),T(i).forEach(_),r=Oe(m,"g",{id:!0});var v=T(r);s=Oe(v,"path",{d:!0,fill:!0}),T(s).forEach(_),v.forEach(_),m.forEach(_),o=te(d),a=R(d,"B",{});var k=T(a);h=fe(k,l),k.forEach(_),this.h()},h(){g(t,"id","SVGRepo_bgCarrier"),g(t,"stroke-width","0"),g(i,"id","SVGRepo_tracerCarrier"),g(i,"stroke-linecap","round"),g(i,"stroke-linejoin","round"),g(s,"d","M2 6a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v2a1 1 0 1 1-2 0V6H4v12h9v-2a1 1 0 1 1 2 0v2a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6zm15.293 2.293a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1 0 1.414l-3 3a1 1 0 0 1-1.414-1.414L18.586 13H9a1 1 0 1 1 0-2h9.586l-1.293-1.293a1 1 0 0 1 0-1.414z"),g(s,"fill","#000"),g(r,"id","SVGRepo_iconCarrier"),B(e,"width","40px"),B(e,"height","40px"),B(e,"padding","8px"),g(e,"viewBox","0 0 24 24"),g(e,"fill","none"),g(e,"xmlns","http://www.w3.org/2000/svg")},m(d,m){Z(d,e,m),p(e,t),p(e,i),p(e,r),p(r,s),Z(d,o,m),Z(d,a,m),p(a,h)},p(d,m){m[0]&256&&l!==(l=d[8]("account.logOut")+"")&&Ee(h,l)},d(d){d&&(_(e),_(o),_(a))}}}function _T(n){let e,t,i,r,s=n[8]("account.logOutEverywhere")+"",o;return{c(){e=Re("svg"),t=Re("path"),i=ee(),r=A("b"),o=he(s),this.h()},l(a){e=Oe(a,"svg",{xmlns:!0,height:!0,viewBox:!0,width:!0,style:!0,fill:!0});var l=T(e);t=Oe(l,"path",{xmlns:!0,d:!0}),T(t).forEach(_),l.forEach(_),i=te(a),r=R(a,"B",{});var h=T(r);o=fe(h,s),h.forEach(_),this.h()},h(){g(t,"xmlns","http://www.w3.org/2000/svg"),g(t,"d","M320-240q-33 0-56.5-23.5T240-320v-80h80v80h480v-400H320v80h-80v-160q0-33 23.5-56.5T320-880h480q33 0 56.5 23.5T880-800v480q0 33-23.5 56.5T800-240H320ZM160-80q-33 0-56.5-23.5T80-160v-560h80v560h560v80H160Zm360-280-56-56 63-64H240v-80h287l-63-64 56-56 160 160-160 160Z"),g(e,"xmlns","http://www.w3.org/2000/svg"),g(e,"height","40px"),g(e,"viewBox","0 -960 960 960"),g(e,"width","40px"),B(e,"padding","8px"),g(e,"fill","#000")},m(a,l){Z(a,e,l),p(e,t),Z(a,i,l),Z(a,r,l),p(r,o)},p(a,l){l[0]&256&&s!==(s=a[8]("account.logOutEverywhere")+"")&&Ee(o,s)},d(a){a&&(_(e),_(i),_(r))}}}function pT(n){let e,t,i,r,s=n[8]("account.changePassword")+"",o;return{c(){e=Re("svg"),t=Re("path"),i=ee(),r=A("b"),o=he(s),this.h()},l(a){e=Oe(a,"svg",{xmlns:!0,height:!0,viewBox:!0,width:!0,style:!0,fill:!0});var l=T(e);t=Oe(l,"path",{d:!0}),T(t).forEach(_),l.forEach(_),i=te(a),r=R(a,"B",{});var h=T(r);o=fe(h,s),h.forEach(_),this.h()},h(){g(t,"d","M280-400q-33 0-56.5-23.5T200-480q0-33 23.5-56.5T280-560q33 0 56.5 23.5T360-480q0 33-23.5 56.5T280-400Zm0 160q-100 0-170-70T40-480q0-100 70-170t170-70q67 0 121.5 33t86.5 87h352l120 120-180 180-80-60-80 60-85-60h-47q-32 54-86.5 87T280-240Zm0-80q56 0 98.5-34t56.5-86h125l58 41 82-61 71 55 75-75-40-40H435q-14-52-56.5-86T280-640q-66 0-113 47t-47 113q0 66 47 113t113 47Z"),g(e,"xmlns","http://www.w3.org/2000/svg"),g(e,"height","40px"),g(e,"viewBox","0 -960 960 960"),g(e,"width","40px"),B(e,"padding","8px"),g(e,"fill","#000")},m(a,l){Z(a,e,l),p(e,t),Z(a,i,l),Z(a,r,l),p(r,o)},p(a,l){l[0]&256&&s!==(s=a[8]("account.changePassword")+"")&&Ee(o,s)},d(a){a&&(_(e),_(i),_(r))}}}function vT(n){let e,t,i,r,s,o,a,l,h,d,m=n[8]("account.accountConfiguration")+"",v;return{c(){e=Re("svg"),t=Re("g"),i=Re("g"),r=Re("g"),s=Re("g"),o=Re("g"),a=Re("path"),l=Re("path"),h=ee(),d=A("b"),v=he(m),this.h()},l(k){e=Oe(k,"svg",{style:!0,viewBox:!0,fill:!0,xmlns:!0});var w=T(e);t=Oe(w,"g",{id:!0,"stroke-width":!0}),T(t).forEach(_),i=Oe(w,"g",{id:!0,"stroke-linecap":!0,"stroke-linejoin":!0}),T(i).forEach(_),r=Oe(w,"g",{id:!0});var E=T(r);s=Oe(E,"g",{id:!0});var I=T(s);o=Oe(I,"g",{id:!0});var M=T(o);a=Oe(M,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0}),T(a).forEach(_),l=Oe(M,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0}),T(l).forEach(_),M.forEach(_),I.forEach(_),E.forEach(_),w.forEach(_),h=te(k),d=R(k,"B",{});var C=T(d);v=fe(C,m),C.forEach(_),this.h()},h(){g(t,"id","SVGRepo_bgCarrier"),g(t,"stroke-width","0"),g(i,"id","SVGRepo_tracerCarrier"),g(i,"stroke-linecap","round"),g(i,"stroke-linejoin","round"),g(a,"d","M13.6006 21.0761L19.0608 17.9236C19.6437 17.5871 19.9346 17.4188 20.1465 17.1834C20.3341 16.9751 20.4759 16.7297 20.5625 16.4632C20.6602 16.1626 20.6602 15.8267 20.6602 15.1568V8.84268C20.6602 8.17277 20.6602 7.83694 20.5625 7.53638C20.4759 7.26982 20.3341 7.02428 20.1465 6.816C19.9355 6.58161 19.6453 6.41405 19.0674 6.08043L13.5996 2.92359C13.0167 2.58706 12.7259 2.41913 12.416 2.35328C12.1419 2.295 11.8584 2.295 11.5843 2.35328C11.2744 2.41914 10.9826 2.58706 10.3997 2.92359L4.93843 6.07666C4.35623 6.41279 4.06535 6.58073 3.85352 6.816C3.66597 7.02428 3.52434 7.26982 3.43773 7.53638C3.33984 7.83765 3.33984 8.17436 3.33984 8.84742V15.1524C3.33984 15.8254 3.33984 16.1619 3.43773 16.4632C3.52434 16.7297 3.66597 16.9751 3.85352 17.1834C4.06548 17.4188 4.35657 17.5871 4.93945 17.9236L10.3997 21.0761C10.9826 21.4126 11.2744 21.5806 11.5843 21.6465C11.8584 21.7047 12.1419 21.7047 12.416 21.6465C12.7259 21.5806 13.0177 21.4126 13.6006 21.0761Z"),g(a,"stroke","#000000"),g(a,"stroke-width","2"),g(a,"stroke-linecap","round"),g(a,"stroke-linejoin","round"),g(l,"d","M9 11.9998C9 13.6566 10.3431 14.9998 12 14.9998C13.6569 14.9998 15 13.6566 15 11.9998C15 10.3429 13.6569 8.99976 12 8.99976C10.3431 8.99976 9 10.3429 9 11.9998Z"),g(l,"stroke","#000000"),g(l,"stroke-width","2"),g(l,"stroke-linecap","round"),g(l,"stroke-linejoin","round"),g(o,"id","Vector"),g(s,"id","Interface / Settings_Future"),g(r,"id","SVGRepo_iconCarrier"),B(e,"width","40px"),B(e,"height","40px"),B(e,"padding","8px"),g(e,"viewBox","0 0 24 24"),g(e,"fill","none"),g(e,"xmlns","http://www.w3.org/2000/svg")},m(k,w){Z(k,e,w),p(e,t),p(e,i),p(e,r),p(r,s),p(s,o),p(o,a),p(o,l),Z(k,h,w),Z(k,d,w),p(d,v)},p(k,w){w[0]&256&&m!==(m=k[8]("account.accountConfiguration")+"")&&Ee(v,m)},d(k){k&&(_(e),_(h),_(d))}}}function yT(n){var ne,J,ge,ie,le,pe,ye,be;let e,t,i,r,s=(((ne=n[1])==null?void 0:ne.page)===Ki.PasswordChange?n[8]("account.changePassword"):n[8]("account.accountOverview"))+"",o,a,l,h=((ge=(J=n[0])==null?void 0:J.profile)==null?void 0:ge.firstName)+"",d,m,v=((le=(ie=n[0])==null?void 0:ie.profile)==null?void 0:le.lastName)+"",k,w,E,I='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M19 5L5 19M5.00001 5L19 19" stroke="#fff" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>',M,C,D,O,P,F,V,$,G,U,H,j,Q=((pe=n[1])==null?void 0:pe.type)==Tt.Account&&((ye=n[1])==null?void 0:ye.page)!==Ki.Details&&((be=n[1])==null?void 0:be.page)!==Ki.PasswordChange&&rm(n);const W=[uT,lT,aT,oT],Y=[];function q(re,me){var ke,X,ue,_e,oe,ae,Se,Me,we;return me[0]&3&&(V=null),((ke=re[1])==null?void 0:ke.type)==Tt.Account&&((X=re[1])==null?void 0:X.page)==="details"?0:(V==null&&(V=!!(((ue=re[1])==null?void 0:ue.type)==Tt.Account&&((_e=re[1])==null?void 0:_e.page)==="permissions"&&((oe=re[0])!=null&&oe.hasPermission(101)))),V?1:((ae=re[1])==null?void 0:ae.type)==Tt.Account&&((Se=re[1])==null?void 0:Se.page)==="roles"?2:((Me=re[1])==null?void 0:Me.type)==Tt.Account&&((we=re[1])==null?void 0:we.page)==="passwordChange"?3:-1)}return~($=q(n,[-1,-1]))&&(G=Y[$]=W[$](n)),{c(){e=A("div"),t=A("div"),i=A("div"),r=A("p"),o=he(s),a=ee(),l=A("p"),d=he(h),m=ee(),k=he(v),w=ee(),E=A("button"),E.innerHTML=I,M=ee(),C=A("div"),Q&&Q.c(),D=ee(),O=A("hr"),P=ee(),F=A("div"),G&&G.c(),this.h()},l(re){e=R(re,"DIV",{class:!0});var me=T(e);t=R(me,"DIV",{class:!0,style:!0});var ke=T(t);i=R(ke,"DIV",{class:!0});var X=T(i);r=R(X,"P",{style:!0});var ue=T(r);o=fe(ue,s),ue.forEach(_),a=te(X),l=R(X,"P",{style:!0});var _e=T(l);d=fe(_e,h),m=te(_e),k=fe(_e,v),_e.forEach(_),X.forEach(_),w=te(ke),E=R(ke,"BUTTON",{class:!0,style:!0,"data-svelte-h":!0}),rn(E)!=="svelte-1gt8p21"&&(E.innerHTML=I),ke.forEach(_),M=te(me),C=R(me,"DIV",{class:!0});var oe=T(C);Q&&Q.l(oe),oe.forEach(_),D=te(me),O=R(me,"HR",{}),P=te(me),F=R(me,"DIV",{class:!0});var ae=T(F);G&&G.l(ae),ae.forEach(_),me.forEach(_),this.h()},h(){B(r,"font-size","18px"),B(l,"font-size","12px"),g(i,"class","column grow"),g(E,"class","close svelte-uusdon"),B(E,"background","none"),B(E,"padding","0"),B(E,"border","none"),B(E,"outline","none"),B(E,"margin","0"),B(E,"height","24px"),g(t,"class","row center-cross info-row svelte-uusdon"),B(t,"background-color","#445"),g(C,"class","row width100"),g(F,"class","panel-scrollable"),g(e,"class","panel column")},m(re,me){Z(re,e,me),p(e,t),p(t,i),p(i,r),p(r,o),p(i,a),p(i,l),p(l,d),p(l,m),p(l,k),p(t,w),p(t,E),p(e,M),p(e,C),Q&&Q.m(C,null),p(e,D),p(e,O),p(e,P),p(e,F),~$&&Y[$].m(F,null),U=!0,H||(j=nt(E,"click",n[15]),H=!0)},p(re,me){var X,ue,_e,oe,ae,Se,Me,we;(!U||me[0]&258)&&s!==(s=(((X=re[1])==null?void 0:X.page)===Ki.PasswordChange?re[8]("account.changePassword"):re[8]("account.accountOverview"))+"")&&Ee(o,s),(!U||me[0]&1)&&h!==(h=((_e=(ue=re[0])==null?void 0:ue.profile)==null?void 0:_e.firstName)+"")&&Ee(d,h),(!U||me[0]&1)&&v!==(v=((ae=(oe=re[0])==null?void 0:oe.profile)==null?void 0:ae.lastName)+"")&&Ee(k,v),((Se=re[1])==null?void 0:Se.type)==Tt.Account&&((Me=re[1])==null?void 0:Me.page)!==Ki.Details&&((we=re[1])==null?void 0:we.page)!==Ki.PasswordChange?Q?(Q.p(re,me),me[0]&2&&de(Q,1)):(Q=rm(re),Q.c(),de(Q,1),Q.m(C,null)):Q&&(bt(),Ie(Q,1,1,()=>{Q=null}),wt());let ke=$;$=q(re,me),$===ke?~$&&Y[$].p(re,me):(G&&(bt(),Ie(Y[ke],1,1,()=>{Y[ke]=null}),wt()),~$?(G=Y[$],G?G.p(re,me):(G=Y[$]=W[$](re),G.c()),de(G,1),G.m(F,null)):G=null)},i(re){U||(de(Q),de(G),U=!0)},o(re){Ie(Q),Ie(G),U=!1},d(re){re&&_(e),Q&&Q.d(),~$&&Y[$].d(),H=!1,j()}}}function bT(n,e,t){let i,r,s,o,a,l;He(n,Nn,q=>t(8,i=q)),He(n,Li,q=>t(0,r=q)),He(n,nn,q=>t(1,s=q));let{map:h}=e;const d=ii.settings.fields.traffic_list_shows_adsb;He(n,d,q=>t(9,o=q));const m=ii.settings.fields.icon_set;He(n,m,q=>t(10,a=q));let v=!1,k=null,w=(r==null?void 0:r.verbosePermissions)??Pn(null);He(n,w,q=>t(11,l=q));let E="",I="",M=!1,C=null,D=null;function O(){nn.goto(null)}function P(q){nn.goto({type:Tt.Account,page:q})}async function F(){const q=h.getCenter();t(2,v=!0),t(3,k=null);try{await no("/api/v1/organizations/map-center",{lat:q.lat,lng:q.lng},"PATCH"),t(3,k=!0),setTimeout(()=>{t(3,k=null)},3e3)}catch(ne){console.error("Error saving map center:",ne),t(3,k=!1),setTimeout(()=>{t(3,k=null)},3e3)}finally{t(2,v=!1)}}async function V(){if(!E||!I){t(7,C=i("login.errors.passwordRequired")),D&&clearTimeout(D),D=setTimeout(()=>{t(7,C=null),D=null},3e3);return}if(E!==I){t(7,C=i("account.passwordsDoNotMatch")),D&&clearTimeout(D),D=setTimeout(()=>{t(7,C=null),D=null},3e3);return}const q=ne=>{t(7,C=ne),D&&clearTimeout(D)};if(E.length<8||E.length>72||!/[a-z]/.test(E)||!/[A-Z]/.test(E)||!/\d/.test(E)||!/[^a-zA-Z0-9]/.test(E)){q(i("account.passwordRequirements.minLength")+"<br>"+i("account.passwordRequirements.maxLength")+"<br>"+i("account.passwordRequirements.lowercase")+"<br>"+i("account.passwordRequirements.uppercase")+"<br>"+i("account.passwordRequirements.number")+"<br>"+i("account.passwordRequirements.symbol"));return}t(6,M=!0),t(7,C=null);try{await no("/api/v1/users/profile/password",{password:E,verifyPassword:I},"PATCH"),t(7,C="success"),t(4,E=""),t(5,I="")}catch{t(7,C=i("account.passwordChangeFailed"))}finally{t(6,M=!1),D&&clearTimeout(D),D=setTimeout(()=>{t(7,C=null),D=null},3e3)}}const $=q=>P(q),G=q=>P(q);function U(q){o=q,d.set(o)}function H(q){a=q,m.set(a)}const j=()=>P(Ki.PasswordChange),Q=()=>r!=null&&r.hasPermission(101)?P(Ki.Permissions):P(Ki.Roles);function W(q){E=q,t(4,E)}function Y(q){I=q,t(5,I)}return n.$$set=q=>{"map"in q&&t(19,h=q.map)},n.$$.update=()=>{n.$$.dirty[0]&3&&(s==null?void 0:s.type)==Tt.Account&&(s==null?void 0:s.page)===Ki.Permissions&&(r==null||r.ensureVerbosePermissions())},[r,s,v,k,E,I,M,C,i,o,a,l,d,m,w,O,P,F,V,h,$,G,U,H,j,Q,W,Y]}class wT extends Wt{constructor(e){super(),Xt(this,e,bT,yT,zt,{map:19},null,[-1,-1])}}class kT{constructor(e){Ge(this,"areas");Ge(this,"sensors");this.areas=new To(this.__fetchAreas,{ttlSecs:60,loadInitially:!0}),this.sensors=new To(this.__fetchSensors,{ttlSecs:60,loadInitially:!0})}async updateSensor(e){await no(`/api/v1/sensors/${e.id}`,{name:e.name,location:e.location},"PATCH"),this.sensors.invalidate()}async __fetchAreas(){const e=await Hr("/api/v1/areas");return new Map(e.map(t=>[t.id,t]))}async __fetchSensors(){const e=await Hr("/api/v1/sensors");return new Map(e.map(t=>[t.id,t]))}}function ET(n){let e,t='<svg width="16" height="16" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="svelte-cdefm7"><rect width="6.92308" height="20" rx="2" fill="#444455" class="svelte-cdefm7"></rect><rect x="12.3077" width="6.92308" height="20" rx="2" fill="#444455" class="svelte-cdefm7"></rect></svg>',i,r;return{c(){e=A("button"),e.innerHTML=t,this.h()},l(s){e=R(s,"BUTTON",{class:!0,"data-svelte-h":!0}),rn(e)!=="svelte-30sgz1"&&(e.innerHTML=t),this.h()},h(){g(e,"class","transparent svelte-cdefm7")},m(s,o){Z(s,e,o),i||(r=nt(e,"click",n[16]),i=!0)},p:$e,i:$e,o:$e,d(s){s&&_(e),i=!1,r()}}}function ST(n){let e,t='<svg width="16" height="16" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="svelte-cdefm7"><path d="M4 18.1315V1.86852C4 1.06982 4.89014 0.593429 5.5547 1.03647L17.7519 9.16795C18.3457 9.56377 18.3457 10.4362 17.7519 10.8321L5.5547 18.9635C4.89015 19.4066 4 18.9302 4 18.1315Z" fill="#444455" class="svelte-cdefm7"></path></svg>',i,r;return{c(){e=A("button"),e.innerHTML=t,this.h()},l(s){e=R(s,"BUTTON",{class:!0,"data-svelte-h":!0}),rn(e)!=="svelte-1qbfe6w"&&(e.innerHTML=t),this.h()},h(){g(e,"class","transparent svelte-cdefm7")},m(s,o){Z(s,e,o),i||(r=nt(e,"click",n[15]),i=!0)},p:$e,i:$e,o:$e,d(s){s&&_(e),i=!1,r()}}}function IT(n){let e,t;return e=new ws({props:{color:"#aa8800",size:"16"}}),{c(){st(e.$$.fragment)},l(i){ot(e.$$.fragment,i)},m(i,r){at(e,i,r),t=!0},p:$e,i(i){t||(de(e.$$.fragment,i),t=!0)},o(i){Ie(e.$$.fragment,i),t=!1},d(i){lt(e,i)}}}function dm(n){let e,t;return e=new fn({props:{onclick:n[17],style:"padding: 8px 16px 8px 0; grid-area: playback-speed;",$$slots:{default:[MT]},$$scope:{ctx:n}}}),{c(){st(e.$$.fragment)},l(i){ot(e.$$.fragment,i)},m(i,r){at(e,i,r),t=!0},p(i,r){const s={};r[0]&128|r[1]&8&&(s.$$scope={dirty:r,ctx:i}),e.$set(s)},i(i){t||(de(e.$$.fragment,i),t=!0)},o(i){Ie(e.$$.fragment,i),t=!1},d(i){lt(e,i)}}}function MT(n){let e,t,i;return{c(){e=A("p"),t=he(n[7]),i=he("x"),this.h()},l(r){e=R(r,"P",{class:!0});var s=T(e);t=fe(s,n[7]),i=fe(s,"x"),s.forEach(_),this.h()},h(){g(e,"class","playback-speed svelte-cdefm7")},m(r,s){Z(r,e,s),p(e,t),p(e,i)},p(r,s){s[0]&128&&Ee(t,r[7])},d(r){r&&_(e)}}}function gm(n){let e,t,i,r,s,o,a=n[12][0]+"",l,h,d=n[12][1]+"",m,v,k,w=n[1]&&mm(n);return{c(){e=A("div"),t=A("input"),r=ee(),w&&w.c(),s=ee(),o=A("p"),l=he(a),h=he("/"),m=he(d),this.h()},l(E){e=R(E,"DIV",{class:!0});var I=T(e);t=R(I,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),r=te(I),w&&w.l(I),I.forEach(_),s=te(E),o=R(E,"P",{class:!0});var M=T(o);l=fe(M,a),h=fe(M,"/"),m=fe(M,d),M.forEach(_),this.h()},h(){g(t,"type","range"),g(t,"min","0"),g(t,"max","100"),g(t,"step","0.1"),g(t,"class","playback-slider svelte-cdefm7"),t.value=n[10],t.disabled=i=!(n[3]instanceof ni),g(e,"class","slider-container svelte-cdefm7"),g(o,"class","playback-time svelte-cdefm7")},m(E,I){Z(E,e,I),p(e,t),p(e,r),w&&w.m(e,null),Z(E,s,I),Z(E,o,I),p(o,l),p(o,h),p(o,m),v||(k=[nt(t,"input",n[21]),nt(t,"change",n[22])],v=!0)},p(E,I){I[0]&1024&&(t.value=E[10]),I[0]&8&&i!==(i=!(E[3]instanceof ni))&&(t.disabled=i),E[1]?w?w.p(E,I):(w=mm(E),w.c(),w.m(e,null)):w&&(w.d(1),w=null),I[0]&4096&&a!==(a=E[12][0]+"")&&Ee(l,a),I[0]&4096&&d!==(d=E[12][1]+"")&&Ee(m,d)},d(E){E&&(_(e),_(s),_(o)),w&&w.d(),v=!1,Bn(k)}}}function mm(n){let e;return{c(){e=A("div"),this.h()},l(t){e=R(t,"DIV",{class:!0,style:!0}),T(e).forEach(_),this.h()},h(){g(e,"class","shadow-dot svelte-cdefm7"),B(e,"left","calc("+n[11]+"% - 5px)")},m(t,i){Z(t,e,i)},p(t,i){i[0]&2048&&B(e,"left","calc("+t[11]+"% - 5px)")},d(t){t&&_(e)}}}function TT(n){let e,t='<svg width="16" height="16" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="svelte-cdefm7"><rect width="6.92308" height="20" rx="2" fill="#444455" class="svelte-cdefm7"></rect><rect x="12.3077" width="6.92308" height="20" rx="2" fill="#444455" class="svelte-cdefm7"></rect></svg>',i,r;return{c(){e=A("button"),e.innerHTML=t,this.h()},l(s){e=R(s,"BUTTON",{class:!0,"data-svelte-h":!0}),rn(e)!=="svelte-b81jal"&&(e.innerHTML=t),this.h()},h(){g(e,"class","transparent svelte-cdefm7")},m(s,o){Z(s,e,o),i||(r=nt(e,"click",n[16]),i=!0)},p:$e,i:$e,o:$e,d(s){s&&_(e),i=!1,r()}}}function LT(n){let e,t='<svg width="16" height="16" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="svelte-cdefm7"><path d="M4 18.1315V1.86852C4 1.06982 4.89014 0.593429 5.5547 1.03647L17.7519 9.16795C18.3457 9.56377 18.3457 10.4362 17.7519 10.8321L5.5547 18.9635C4.89015 19.4066 4 18.9302 4 18.1315Z" fill="#444455" class="svelte-cdefm7"></path></svg>',i,r;return{c(){e=A("button"),e.innerHTML=t,this.h()},l(s){e=R(s,"BUTTON",{class:!0,"data-svelte-h":!0}),rn(e)!=="svelte-15rdme0"&&(e.innerHTML=t),this.h()},h(){g(e,"class","transparent svelte-cdefm7")},m(s,o){Z(s,e,o),i||(r=nt(e,"click",n[15]),i=!0)},p:$e,i:$e,o:$e,d(s){s&&_(e),i=!1,r()}}}function CT(n){let e,t;return e=new ws({props:{color:"#aa8800",size:"16"}}),{c(){st(e.$$.fragment)},l(i){ot(e.$$.fragment,i)},m(i,r){at(e,i,r),t=!0},p:$e,i(i){t||(de(e.$$.fragment,i),t=!0)},o(i){Ie(e.$$.fragment,i),t=!1},d(i){lt(e,i)}}}function _m(n){let e,t,i,r,s,o,a=n[1]&&pm(n);return{c(){e=A("div"),t=A("input"),r=ee(),a&&a.c(),this.h()},l(l){e=R(l,"DIV",{class:!0});var h=T(e);t=R(h,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),r=te(h),a&&a.l(h),h.forEach(_),this.h()},h(){g(t,"type","range"),g(t,"min","0"),g(t,"max","100"),g(t,"step","0.1"),g(t,"class","playback-slider svelte-cdefm7"),t.value=n[10],t.disabled=i=!(n[3]instanceof ni),g(e,"class","slider-container svelte-cdefm7")},m(l,h){Z(l,e,h),p(e,t),p(e,r),a&&a.m(e,null),s||(o=[nt(t,"input",n[21]),nt(t,"change",n[22])],s=!0)},p(l,h){h[0]&1024&&(t.value=l[10]),h[0]&8&&i!==(i=!(l[3]instanceof ni))&&(t.disabled=i),l[1]?a?a.p(l,h):(a=pm(l),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},d(l){l&&_(e),a&&a.d(),s=!1,Bn(o)}}}function pm(n){let e;return{c(){e=A("div"),this.h()},l(t){e=R(t,"DIV",{class:!0,style:!0}),T(e).forEach(_),this.h()},h(){g(e,"class","shadow-dot svelte-cdefm7"),B(e,"left","calc("+n[11]+"% - 5px)")},m(t,i){Z(t,e,i)},p(t,i){i[0]&2048&&B(e,"left","calc("+t[11]+"% - 5px)")},d(t){t&&_(e)}}}function vm(n){let e,t;return e=new fn({props:{onclick:n[17],class:"playback-speed-container",$$slots:{default:[PT]},$$scope:{ctx:n}}}),{c(){st(e.$$.fragment)},l(i){ot(e.$$.fragment,i)},m(i,r){at(e,i,r),t=!0},p(i,r){const s={};r[0]&128|r[1]&8&&(s.$$scope={dirty:r,ctx:i}),e.$set(s)},i(i){t||(de(e.$$.fragment,i),t=!0)},o(i){Ie(e.$$.fragment,i),t=!1},d(i){lt(e,i)}}}function PT(n){let e,t,i;return{c(){e=A("p"),t=he(n[7]),i=he("x"),this.h()},l(r){e=R(r,"P",{class:!0});var s=T(e);t=fe(s,n[7]),i=fe(s,"x"),s.forEach(_),this.h()},h(){g(e,"class","playback-speed svelte-cdefm7")},m(r,s){Z(r,e,s),p(e,t),p(e,i)},p(r,s){s[0]&128&&Ee(t,r[7])},d(r){r&&_(e)}}}function NT(n){var je,Ve,Ue,Ke;let e,t,i,r,s,o,a,l,h,d=n[8][0]+"",m,v,k,w=n[8][1]+"",E,I,M,C,D,O,P,F,V,$,G,U,H,j,Q,W,Y,q,ne=n[12][0]+"",J,ge,ie=n[12][1]+"",le,pe,ye,be,re,me=n[8][0]+"",ke,X,ue,_e=n[8][1]+"",oe,ae;const Se=[IT,ST,ET],Me=[];function we(We,ze){return We[3]===null?0:We[6]===null||We[6]===!0?1:2}i=we(n),r=Me[i]=Se[i](n);let Te=n[9]==Gr.HISTORY&&dm(n),Ae=((je=n[2])==null?void 0:je.start)&&((Ve=n[2])==null?void 0:Ve.end)&&gm(n);const Ne=[CT,LT,TT],De=[];function _t(We,ze){return We[3]===null?0:We[6]===null||We[6]===!0?1:2}$=_t(n),G=De[$]=Ne[$](n);let Fe=((Ue=n[2])==null?void 0:Ue.start)&&((Ke=n[2])==null?void 0:Ke.end)&&_m(n),Pe=n[9]==Gr.HISTORY&&vm(n);return{c(){e=A("div"),t=A("div"),r.c(),s=ee(),o=A("div"),a=ee(),l=A("p"),h=A("span"),m=he(d),v=ee(),k=A("span"),E=he(w),I=ee(),Te&&Te.c(),M=ee(),C=A("div"),D=ee(),Ae&&Ae.c(),O=ee(),P=A("div"),F=A("div"),V=A("div"),G.c(),U=ee(),Fe&&Fe.c(),H=ee(),j=A("hr"),Q=ee(),W=A("div"),Y=A("div"),q=A("p"),J=he(ne),ge=he("/"),le=he(ie),pe=ee(),Pe&&Pe.c(),ye=ee(),be=A("p"),re=A("span"),ke=he(me),X=ee(),ue=A("span"),oe=he(_e),this.h()},l(We){e=R(We,"DIV",{id:!0,style:!0,class:!0});var ze=T(e);t=R(ze,"DIV",{class:!0,style:!0});var Et=T(t);r.l(Et),Et.forEach(_),s=te(ze),o=R(ze,"DIV",{class:!0,style:!0}),T(o).forEach(_),a=te(ze),l=R(ze,"P",{class:!0});var rt=T(l);h=R(rt,"SPAN",{style:!0,class:!0});var ft=T(h);m=fe(ft,d),ft.forEach(_),v=te(rt),k=R(rt,"SPAN",{class:!0});var Ut=T(k);E=fe(Ut,w),Ut.forEach(_),rt.forEach(_),I=te(ze),Te&&Te.l(ze),M=te(ze),C=R(ze,"DIV",{class:!0,style:!0}),T(C).forEach(_),D=te(ze),Ae&&Ae.l(ze),ze.forEach(_),O=te(We),P=R(We,"DIV",{id:!0,style:!0,class:!0});var Qe=T(P);F=R(Qe,"DIV",{class:!0});var yt=T(F);V=R(yt,"DIV",{class:!0});var mt=T(V);G.l(mt),mt.forEach(_),U=te(yt),Fe&&Fe.l(yt),yt.forEach(_),H=te(Qe),j=R(Qe,"HR",{class:!0}),Q=te(Qe),W=R(Qe,"DIV",{class:!0});var Ft=T(W);Y=R(Ft,"DIV",{class:!0});var qt=T(Y);q=R(qt,"P",{class:!0});var vt=T(q);J=fe(vt,ne),ge=fe(vt,"/"),le=fe(vt,ie),vt.forEach(_),pe=te(qt),Pe&&Pe.l(qt),qt.forEach(_),ye=te(Ft),be=R(Ft,"P",{class:!0});var $t=T(be);re=R($t,"SPAN",{style:!0,class:!0});var dn=T(re);ke=fe(dn,me),dn.forEach(_),X=te($t),ue=R($t,"SPAN",{class:!0});var sn=T(ue);oe=fe(sn,_e),sn.forEach(_),$t.forEach(_),Ft.forEach(_),Qe.forEach(_),this.h()},h(){g(t,"class","bar-container svelte-cdefm7"),B(t,"grid-area","play-pause"),g(o,"class","vr svelte-cdefm7"),B(o,"grid-area","vr"),B(h,"display","inline"),B(h,"color","#668"),g(h,"class","svelte-cdefm7"),g(k,"class","svelte-cdefm7"),g(l,"class","time-display svelte-cdefm7"),g(C,"class","vr svelte-cdefm7"),B(C,"grid-area","vr2"),g(e,"id","bottom-bar"),B(e,"--handle-visible-offset",n[0]+"px"),B(e,"--sidebar-width","440px"),g(e,"class","svelte-cdefm7"),g(V,"class","bar-container svelte-cdefm7"),g(F,"class","row width100 svelte-cdefm7"),g(j,"class","width100 svelte-cdefm7"),g(q,"class","playback-time svelte-cdefm7"),g(Y,"class","row center-cross svelte-cdefm7"),B(re,"display","inline"),B(re,"color","#668"),B(re,"font-size","12px"),g(re,"class","svelte-cdefm7"),g(ue,"class","svelte-cdefm7"),g(be,"class","time-display mobile svelte-cdefm7"),g(W,"class","row width100 center-cross space-main svelte-cdefm7"),g(P,"id","bottom-bar-mobile"),B(P,"--handle-visible-offset",n[0]+"px"),B(P,"--sidebar-width","440px"),g(P,"class","svelte-cdefm7")},m(We,ze){Z(We,e,ze),p(e,t),Me[i].m(t,null),p(e,s),p(e,o),p(e,a),p(e,l),p(l,h),p(h,m),p(l,v),p(l,k),p(k,E),p(e,I),Te&&Te.m(e,null),p(e,M),p(e,C),p(e,D),Ae&&Ae.m(e,null),n[25](e),Z(We,O,ze),Z(We,P,ze),p(P,F),p(F,V),De[$].m(V,null),p(F,U),Fe&&Fe.m(F,null),p(P,H),p(P,j),p(P,Q),p(P,W),p(W,Y),p(Y,q),p(q,J),p(q,ge),p(q,le),p(Y,pe),Pe&&Pe.m(Y,null),p(W,ye),p(W,be),p(be,re),p(re,ke),p(be,X),p(be,ue),p(ue,oe),n[26](P),ae=!0},p(We,ze){var ft,Ut,Qe,yt;let Et=i;i=we(We),i===Et?Me[i].p(We,ze):(bt(),Ie(Me[Et],1,1,()=>{Me[Et]=null}),wt(),r=Me[i],r?r.p(We,ze):(r=Me[i]=Se[i](We),r.c()),de(r,1),r.m(t,null)),(!ae||ze[0]&256)&&d!==(d=We[8][0]+"")&&Ee(m,d),(!ae||ze[0]&256)&&w!==(w=We[8][1]+"")&&Ee(E,w),We[9]==Gr.HISTORY?Te?(Te.p(We,ze),ze[0]&512&&de(Te,1)):(Te=dm(We),Te.c(),de(Te,1),Te.m(e,M)):Te&&(bt(),Ie(Te,1,1,()=>{Te=null}),wt()),(ft=We[2])!=null&&ft.start&&((Ut=We[2])!=null&&Ut.end)?Ae?Ae.p(We,ze):(Ae=gm(We),Ae.c(),Ae.m(e,null)):Ae&&(Ae.d(1),Ae=null),(!ae||ze[0]&1)&&B(e,"--handle-visible-offset",We[0]+"px");let rt=$;$=_t(We),$===rt?De[$].p(We,ze):(bt(),Ie(De[rt],1,1,()=>{De[rt]=null}),wt(),G=De[$],G?G.p(We,ze):(G=De[$]=Ne[$](We),G.c()),de(G,1),G.m(V,null)),(Qe=We[2])!=null&&Qe.start&&((yt=We[2])!=null&&yt.end)?Fe?Fe.p(We,ze):(Fe=_m(We),Fe.c(),Fe.m(F,null)):Fe&&(Fe.d(1),Fe=null),(!ae||ze[0]&4096)&&ne!==(ne=We[12][0]+"")&&Ee(J,ne),(!ae||ze[0]&4096)&&ie!==(ie=We[12][1]+"")&&Ee(le,ie),We[9]==Gr.HISTORY?Pe?(Pe.p(We,ze),ze[0]&512&&de(Pe,1)):(Pe=vm(We),Pe.c(),de(Pe,1),Pe.m(Y,null)):Pe&&(bt(),Ie(Pe,1,1,()=>{Pe=null}),wt()),(!ae||ze[0]&256)&&me!==(me=We[8][0]+"")&&Ee(ke,me),(!ae||ze[0]&256)&&_e!==(_e=We[8][1]+"")&&Ee(oe,_e),(!ae||ze[0]&1)&&B(P,"--handle-visible-offset",We[0]+"px")},i(We){ae||(de(r),de(Te),de(G),de(Pe),ae=!0)},o(We){Ie(r),Ie(Te),Ie(G),Ie(Pe),ae=!1},d(We){We&&(_(e),_(O),_(P)),Me[i].d(),Te&&Te.d(),Ae&&Ae.d(),n[25](null),De[$].d(),Fe&&Fe.d(),Pe&&Pe.d(),n[26](null)}}}const Pl=[5,10,30,1],DT=Pl[0];function AT(n,e,t){let i,r,s,o=$e,a=()=>(o(),o=Dt(i,ye=>t(6,s=ye)),i),l,h,d,m,v,k,w,E,I;He(n,Lo,ye=>t(2,h=ye)),He(n,bi,ye=>t(3,d=ye)),He(n,za,ye=>t(9,k=ye)),n.$$.on_destroy.push(()=>o());let{HANDLE_VISIBLE_OFFSET:M=40}=e,C;const D=Pn(Pl[0]);He(n,D,ye=>t(7,m=ye));const O=new Yl;ls(()=>O.onDestroy());let P=Pn(V(F()));He(n,P,ye=>t(8,v=ye));function F(){return d instanceof ni?d.timestamp:d instanceof Os||d instanceof os?Math.floor(Date.now()/1e3):(console.error("Unknown drone data service type:",d),null)}function V(ye){if(ye===null)return["--.--.----","--:--:--"];const be=new Date(ye*1e3);return[`${Ys(be.getDate())}.${Ys(be.getMonth()+1)}.${be.getFullYear()}`,`${Ys(be.getHours())}:${Ys(be.getMinutes())}:${Ys(be.getSeconds())}`]}function $(ye){d instanceof ni&&d.paused.set(!1)}function G(ye){var be;d instanceof ni?d.paused.set(!0):(d instanceof Os||d instanceof os)&&((be=ye==null?void 0:ye.target)==null||be.dispatchEvent(new CustomEvent("play-back",{bubbles:!0,detail:{unixTimestamp:Math.floor(Date.now()/1e3),paused:!0}})))}function U(){d instanceof ni?d.paused.set(!0):(d instanceof Os||d instanceof os)&&(C==null||C.dispatchEvent(new CustomEvent("play-back",{bubbles:!0,detail:{unixTimestamp:Math.floor(Date.now()/1e3),paused:!0}})))}function H(){if(d instanceof ni){const ye=m;if(ye===null)return;const re=(Pl.indexOf(ye)+1)%Pl.length;d.playbackSpeed.set(Pl[re])}}const j=new Ot(0);He(n,j,ye=>t(10,w=ye));const Q=new Ot(!1);He(n,Q,ye=>t(1,l=ye));const W=new Ot(0);He(n,W,ye=>t(11,E=ye));function Y(){if(!(h!=null&&h.start)||!(h!=null&&h.end))return null;const ye=F();if(ye===null)return null;const be=ye*1e3,re=h.start,me=h.end;return be<re?0:be>me?100:(be-re)/(me-re)*100}function q(ye){if(!(h!=null&&h.start)||!(h!=null&&h.end))return["--:--","--:--"];const be=h.end-h.start,re=ye/100*be,me=ke=>{const X=Math.floor(ke/1e3),ue=Math.floor(X/3600),_e=Math.floor(X%3600/60),oe=X%60;return ue>0?`${ue}:${Ys(_e)}:${Ys(oe)}`:`${Ys(_e)}:${Ys(oe)}`};return[me(re),me(be)]}function ne(ye){Q.set(!0);const be=ye.target;j.set(parseFloat(be.value))}function J(ye){Q.set(!1);const be=ye.target,re=parseFloat(be.value);ge(re,ye)}function ge(ye,be){var ue;if(!(h!=null&&h.start)||!(h!=null&&h.end))return;const re=h.start,me=h.end,ke=re+ye/100*(me-re),X=Math.floor(ke/1e3);(ue=be==null?void 0:be.target)==null||ue.dispatchEvent(new CustomEvent("play-back",{bubbles:!0,detail:{unixTimestamp:X,paused:s??!1}}))}const ie=new Ot(q(j.current));He(n,ie,ye=>t(12,I=ye)),j.subscribe(ye=>{ie.set(q(ye))}),mi(()=>{const ye=setInterval(()=>{const re=F();if(re!==null&&P.set(V(re)),h&&!r){const me=Y();me!==null&&(W.set(me),l||j.set(me),me===100&&!s&&G(void 0))}},100),be=()=>{document.hidden&&U()};return document.addEventListener("visibilitychange",be),()=>{clearInterval(ye),document.removeEventListener("visibilitychange",be)}});function le(ye){un[ye?"unshift":"push"](()=>{C=ye,t(4,C)})}function pe(ye){un[ye?"unshift":"push"](()=>{C=ye,t(4,C)})}return n.$$set=ye=>{"HANDLE_VISIBLE_OFFSET"in ye&&t(0,M=ye.HANDLE_VISIBLE_OFFSET)},n.$$.update=()=>{if(n.$$.dirty[0]&8&&a(t(5,i=d instanceof ni?d.paused:null)),n.$$.dirty[0]&8&&(d instanceof ni?O.swap(d.playbackSpeed.subscribe(ye=>{kn(D,m=ye,m)})):O.unsubscribe()),n.$$.dirty[0]&12&&t(24,r=h&&!(d instanceof ni)),n.$$.dirty[0]&16777222&&!l&&h&&!r){const ye=Y();ye!==null&&j.set(ye)}if(n.$$.dirty[0]&16777220&&h&&!r){const ye=Y();ye!==null&&W.set(ye)}},[M,l,h,d,C,i,s,m,v,k,w,E,I,D,P,$,G,H,j,Q,W,ne,J,ie,r,le,pe]}class RT extends Wt{constructor(e){super(),Xt(this,e,AT,NT,zt,{HANDLE_VISIBLE_OFFSET:0},null,[-1,-1])}}function ym(n,e,t){const i=n.slice();i[17]=e[t];const r=i[17].startTime&&i[17].expirationTime?j3(i[5],new Date(i[17].startTime),new Date(i[17].expirationTime),!0):i[5]("geofences.indefinite");return i[18]=r,i}function bm(n,e,t){const i=n.slice();i[17]=e[t];const r=i[17].startTime&&i[17].expirationTime?j3(i[5],new Date(i[17].startTime),new Date(i[17].expirationTime),!0):i[5]("geofences.indefinite");return i[18]=r,i}function wm(n){let e,t,i=n[5]("geofences.newGeofence")+"",r,s,o;return{c(){e=A("div"),t=A("button"),r=he(i),this.h()},l(a){e=R(a,"DIV",{class:!0,style:!0});var l=T(e);t=R(l,"BUTTON",{style:!0});var h=T(t);r=fe(h,i),h.forEach(_),l.forEach(_),this.h()},h(){B(t,"font-size","14px"),g(e,"class","sep row p8"),B(e,"border-top","none"),B(e,"height","auto"),B(e,"justify-content","flex-start")},m(a,l){Z(a,e,l),p(e,t),p(t,r),s||(o=nt(t,"click",n[12]),s=!0)},p(a,l){l&32&&i!==(i=a[5]("geofences.newGeofence")+"")&&Ee(r,i)},d(a){a&&_(e),s=!1,o()}}}function km(n){let e,t,i=n[5]("geofences.inProgressTitle")+"",r,s,o,a,l,h;return o=new fn({props:{class:"row g8 p816 space-main hoverable center-cross",onclick:n[14],$$slots:{default:[xT]},$$scope:{ctx:n}}}),{c(){e=A("div"),t=A("p"),r=he(i),s=ee(),st(o.$$.fragment),a=ee(),l=A("div"),this.h()},l(d){e=R(d,"DIV",{class:!0,style:!0});var m=T(e);t=R(m,"P",{class:!0});var v=T(t);r=fe(v,i),v.forEach(_),m.forEach(_),s=te(d),ot(o.$$.fragment,d),a=te(d),l=R(d,"DIV",{class:!0}),T(l).forEach(_),this.h()},h(){g(t,"class","upcomingLabel svelte-16xxwtz"),g(e,"class","row width100 g8"),B(e,"padding","8px 16px"),B(e,"border-bottom","1px solid #ddd"),g(l,"class","sep")},m(d,m){Z(d,e,m),p(e,t),p(t,r),Z(d,s,m),at(o,d,m),Z(d,a,m),Z(d,l,m),h=!0},p(d,m){(!h||m&32)&&i!==(i=d[5]("geofences.inProgressTitle")+"")&&Ee(r,i);const v={};m&8388645&&(v.$$scope={dirty:m,ctx:d}),o.$set(v)},i(d){h||(de(o.$$.fragment,d),h=!0)},o(d){Ie(o.$$.fragment,d),h=!1},d(d){d&&(_(e),_(s),_(a),_(l)),lt(o,d)}}}function OT(n){let e,t='<svg style="opacity: 0.9; fill: #fff;" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="100" height="100" viewBox="0 0 48 48" class="svelte-16xxwtz"><path d="M 24 4 C 20.491685 4 17.570396 6.6214322 17.080078 10 L 10.238281 10 A 1.50015 1.50015 0 0 0 9.9804688 9.9785156 A 1.50015 1.50015 0 0 0 9.7578125 10 L 6.5 10 A 1.50015 1.50015 0 1 0 6.5 13 L 8.6386719 13 L 11.15625 39.029297 C 11.427329 41.835926 13.811782 44 16.630859 44 L 31.367188 44 C 34.186411 44 36.570826 41.836168 36.841797 39.029297 L 39.361328 13 L 41.5 13 A 1.50015 1.50015 0 1 0 41.5 10 L 38.244141 10 A 1.50015 1.50015 0 0 0 37.763672 10 L 30.919922 10 C 30.429604 6.6214322 27.508315 4 24 4 z M 24 7 C 25.879156 7 27.420767 8.2681608 27.861328 10 L 20.138672 10 C 20.579233 8.2681608 22.120844 7 24 7 z M 11.650391 13 L 36.347656 13 L 33.855469 38.740234 C 33.730439 40.035363 32.667963 41 31.367188 41 L 16.630859 41 C 15.331937 41 14.267499 40.033606 14.142578 38.740234 L 11.650391 13 z M 20.476562 17.978516 A 1.50015 1.50015 0 0 0 19 19.5 L 19 34.5 A 1.50015 1.50015 0 1 0 22 34.5 L 22 19.5 A 1.50015 1.50015 0 0 0 20.476562 17.978516 z M 27.476562 17.978516 A 1.50015 1.50015 0 0 0 26 19.5 L 26 34.5 A 1.50015 1.50015 0 1 0 29 34.5 L 29 19.5 A 1.50015 1.50015 0 0 0 27.476562 17.978516 z"></path></svg>';return{c(){e=A("div"),e.innerHTML=t,this.h()},l(i){e=R(i,"DIV",{class:!0,style:!0,"data-svelte-h":!0}),rn(e)!=="svelte-1wl97d6"&&(e.innerHTML=t),this.h()},h(){g(e,"class","small-button clickable svelte-16xxwtz"),B(e,"background-color","#e66"),B(e,"border","1px solid #8c8f")},m(i,r){Z(i,e,r)},p:$e,d(i){i&&_(e)}}}function xT(n){let e,t,i=n[2].name+"",r,s,o,a=n[5]("geofences.inProgress")+"",l,h,d,m;return d=new fn({props:{onclick:n[13],$$slots:{default:[OT]},$$scope:{ctx:n}}}),{c(){e=A("div"),t=A("h3"),r=he(i),s=ee(),o=A("p"),l=he(a),h=ee(),st(d.$$.fragment),this.h()},l(v){e=R(v,"DIV",{class:!0});var k=T(e);t=R(k,"H3",{});var w=T(t);r=fe(w,i),w.forEach(_),s=te(k),o=R(k,"P",{style:!0});var E=T(o);l=fe(E,a),E.forEach(_),k.forEach(_),h=te(v),ot(d.$$.fragment,v),this.h()},h(){B(o,"font-size","14px"),B(o,"color","#888"),g(e,"class","column")},m(v,k){Z(v,e,k),p(e,t),p(t,r),p(e,s),p(e,o),p(o,l),Z(v,h,k),at(d,v,k),m=!0},p(v,k){(!m||k&4)&&i!==(i=v[2].name+"")&&Ee(r,i),(!m||k&32)&&a!==(a=v[5]("geofences.inProgress")+"")&&Ee(l,a);const w={};k&5&&(w.onclick=v[13]),k&8388608&&(w.$$scope={dirty:k,ctx:v}),d.$set(w)},i(v){m||(de(d.$$.fragment,v),m=!0)},o(v){Ie(d.$$.fragment,v),m=!1},d(v){v&&(_(e),_(h)),lt(d,v)}}}function FT(n){let e,t,i,r,s=n[4].length>0&&Em(n),o=n[3].length>0&&Im(n);return{c(){e=A("div"),s&&s.c(),t=ee(),o&&o.c(),i=dt()},l(a){e=R(a,"DIV",{});var l=T(e);s&&s.l(l),l.forEach(_),t=te(a),o&&o.l(a),i=dt()},m(a,l){Z(a,e,l),s&&s.m(e,null),Z(a,t,l),o&&o.m(a,l),Z(a,i,l),r=!0},p(a,l){a[4].length>0?s?(s.p(a,l),l&16&&de(s,1)):(s=Em(a),s.c(),de(s,1),s.m(e,null)):s&&(bt(),Ie(s,1,1,()=>{s=null}),wt()),a[3].length>0?o?(o.p(a,l),l&8&&de(o,1)):(o=Im(a),o.c(),de(o,1),o.m(i.parentNode,i)):o&&(bt(),Ie(o,1,1,()=>{o=null}),wt())},i(a){r||(de(s),de(o),r=!0)},o(a){Ie(s),Ie(o),r=!1},d(a){a&&(_(e),_(t),_(i)),s&&s.d(),o&&o.d(a)}}}function BT(n){let e,t=n[5]("geofences.noGeofences")+"",i;return{c(){e=A("p"),i=he(t),this.h()},l(r){e=R(r,"P",{class:!0,style:!0});var s=T(e);i=fe(s,t),s.forEach(_),this.h()},h(){g(e,"class","p816 width100"),B(e,"text-align","center")},m(r,s){Z(r,e,s),p(e,i)},p(r,s){s&32&&t!==(t=r[5]("geofences.noGeofences")+"")&&Ee(i,t)},i:$e,o:$e,d(r){r&&_(e)}}}function Em(n){let e,t,i=n[5]("geofences.current")+"",r,s,o=[],a=new Map,l,h,d=Bt(n[4]);const m=v=>v[17].id;for(let v=0;v<d.length;v+=1){let k=bm(n,d,v),w=m(k);a.set(w,o[v]=Sm(w,k))}return{c(){e=A("div"),t=A("p"),r=he(i),s=ee();for(let v=0;v<o.length;v+=1)o[v].c();l=dt(),this.h()},l(v){e=R(v,"DIV",{class:!0,style:!0});var k=T(e);t=R(k,"P",{class:!0});var w=T(t);r=fe(w,i),w.forEach(_),k.forEach(_),s=te(v);for(let E=0;E<o.length;E+=1)o[E].l(v);l=dt(),this.h()},h(){g(t,"class","upcomingLabel svelte-16xxwtz"),g(e,"class","row width100 g8"),B(e,"padding","8px 16px"),B(e,"border-bottom","1px solid #ddd")},m(v,k){Z(v,e,k),p(e,t),p(t,r),Z(v,s,k);for(let w=0;w<o.length;w+=1)o[w]&&o[w].m(v,k);Z(v,l,k),h=!0},p(v,k){(!h||k&32)&&i!==(i=v[5]("geofences.current")+"")&&Ee(r,i),k&304&&(d=Bt(v[4]),bt(),o=vr(o,k,m,1,v,d,a,l.parentNode,vs,Sm,l,bm),wt())},i(v){if(!h){for(let k=0;k<d.length;k+=1)de(o[k]);h=!0}},o(v){for(let k=0;k<o.length;k+=1)Ie(o[k]);h=!1},d(v){v&&(_(e),_(s),_(l));for(let k=0;k<o.length;k+=1)o[k].d(v)}}}function $T(n){let e,t,i=n[17].name+"",r,s,o,a=n[18]+"",l,h;return{c(){e=A("div"),t=A("h3"),r=he(i),s=ee(),o=A("p"),l=he(a),h=ee(),this.h()},l(d){e=R(d,"DIV",{class:!0});var m=T(e);t=R(m,"H3",{});var v=T(t);r=fe(v,i),v.forEach(_),s=te(m),o=R(m,"P",{style:!0});var k=T(o);l=fe(k,a),k.forEach(_),m.forEach(_),h=te(d),this.h()},h(){B(o,"font-size","14px"),B(o,"color","#888"),g(e,"class","column")},m(d,m){Z(d,e,m),p(e,t),p(t,r),p(e,s),p(e,o),p(o,l),Z(d,h,m)},p(d,m){m&16&&i!==(i=d[17].name+"")&&Ee(r,i),m&48&&a!==(a=d[18]+"")&&Ee(l,a)},d(d){d&&(_(e),_(h))}}}function Sm(n,e){var o;let t,i,r;function s(){return e[15](e[17])}return i=new fn({props:{style:`opacity: ${(o=e[17])!=null&&o.active?1:.5};`,class:"row g8 p816 hoverable noselect geofence-row",onclick:s,$$slots:{default:[$T]},$$scope:{ctx:e}}}),{key:n,first:null,c(){t=dt(),st(i.$$.fragment),this.h()},l(a){t=dt(),ot(i.$$.fragment,a),this.h()},h(){this.first=t},m(a,l){Z(a,t,l),at(i,a,l),r=!0},p(a,l){var d;e=a;const h={};l&16&&(h.style=`opacity: ${(d=e[17])!=null&&d.active?1:.5};`),l&16&&(h.onclick=s),l&8388656&&(h.$$scope={dirty:l,ctx:e}),i.$set(h)},i(a){r||(de(i.$$.fragment,a),r=!0)},o(a){Ie(i.$$.fragment,a),r=!1},d(a){a&&_(t),lt(i,a)}}}function Im(n){let e,t,i,r,s=n[5]("geofences.upcoming")+"",o,a,l=[],h=new Map,d,m,v=Bt(n[3]);const k=w=>w[17].id;for(let w=0;w<v.length;w+=1){let E=ym(n,v,w),I=k(E);h.set(I,l[w]=Mm(I,E))}return{c(){e=A("div"),t=ee(),i=A("div"),r=A("p"),o=he(s),a=ee();for(let w=0;w<l.length;w+=1)l[w].c();d=dt(),this.h()},l(w){e=R(w,"DIV",{class:!0}),T(e).forEach(_),t=te(w),i=R(w,"DIV",{class:!0,style:!0});var E=T(i);r=R(E,"P",{class:!0});var I=T(r);o=fe(I,s),I.forEach(_),E.forEach(_),a=te(w);for(let M=0;M<l.length;M+=1)l[M].l(w);d=dt(),this.h()},h(){g(e,"class","sep"),g(r,"class","upcomingLabel svelte-16xxwtz"),g(i,"class","row width100 g8"),B(i,"padding","8px 16px"),B(i,"border-bottom","1px solid #ddd")},m(w,E){Z(w,e,E),Z(w,t,E),Z(w,i,E),p(i,r),p(r,o),Z(w,a,E);for(let I=0;I<l.length;I+=1)l[I]&&l[I].m(w,E);Z(w,d,E),m=!0},p(w,E){(!m||E&32)&&s!==(s=w[5]("geofences.upcoming")+"")&&Ee(o,s),E&296&&(v=Bt(w[3]),bt(),l=vr(l,E,k,1,w,v,h,d.parentNode,vs,Mm,d,ym),wt())},i(w){if(!m){for(let E=0;E<v.length;E+=1)de(l[E]);m=!0}},o(w){for(let E=0;E<l.length;E+=1)Ie(l[E]);m=!1},d(w){w&&(_(e),_(t),_(i),_(a),_(d));for(let E=0;E<l.length;E+=1)l[E].d(w)}}}function VT(n){let e,t,i=n[17].name+"",r,s,o,a=n[18]+"",l,h;return{c(){e=A("div"),t=A("h3"),r=he(i),s=ee(),o=A("p"),l=he(a),h=ee(),this.h()},l(d){e=R(d,"DIV",{class:!0});var m=T(e);t=R(m,"H3",{});var v=T(t);r=fe(v,i),v.forEach(_),s=te(m),o=R(m,"P",{style:!0});var k=T(o);l=fe(k,a),k.forEach(_),m.forEach(_),h=te(d),this.h()},h(){B(o,"font-size","14px"),B(o,"color","#888"),g(e,"class","column")},m(d,m){Z(d,e,m),p(e,t),p(t,r),p(e,s),p(e,o),p(o,l),Z(d,h,m)},p(d,m){m&8&&i!==(i=d[17].name+"")&&Ee(r,i),m&40&&a!==(a=d[18]+"")&&Ee(l,a)},d(d){d&&(_(e),_(h))}}}function Mm(n,e){var o;let t,i,r;function s(){return e[16](e[17])}return i=new fn({props:{style:`opacity: ${(o=e[17])!=null&&o.active?1:.5};`,class:"row g8 p816 hoverable noselect geofence-row",onclick:s,$$slots:{default:[VT]},$$scope:{ctx:e}}}),{key:n,first:null,c(){t=dt(),st(i.$$.fragment),this.h()},l(a){t=dt(),ot(i.$$.fragment,a),this.h()},h(){this.first=t},m(a,l){Z(a,t,l),at(i,a,l),r=!0},p(a,l){var d;e=a;const h={};l&8&&(h.style=`opacity: ${(d=e[17])!=null&&d.active?1:.5};`),l&8&&(h.onclick=s),l&8388648&&(h.$$scope={dirty:l,ctx:e}),i.$set(h)},i(a){r||(de(i.$$.fragment,a),r=!0)},o(a){Ie(i.$$.fragment,a),r=!1},d(a){a&&_(t),lt(i,a)}}}function zT(n){var Y;let e,t,i,r,s=n[5]("geofences.title")+"",o,a,l,h=n[5]("geofences.description")+"",d,m,v,k='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M19 5L5 19M5.00001 5L19 19" stroke="#fff" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>',w,E,I,M,C=(Y=n[6])==null?void 0:Y.hasPermission(300),D,O,P,F,V,$,G,U=C&&wm(n),H=n[2]&&km(n);const j=[BT,FT],Q=[];function W(q,ne){var J;return!q[1]||((J=q[1])==null?void 0:J.size)==0?0:1}return P=W(n),F=Q[P]=j[P](n),{c(){e=A("div"),t=A("div"),i=A("div"),r=A("p"),o=he(s),a=ee(),l=A("p"),d=he(h),m=ee(),v=A("button"),v.innerHTML=k,w=ee(),E=A("hr"),I=ee(),M=A("div"),U&&U.c(),D=ee(),H&&H.c(),O=ee(),F.c(),this.h()},l(q){e=R(q,"DIV",{class:!0});var ne=T(e);t=R(ne,"DIV",{class:!0,style:!0});var J=T(t);i=R(J,"DIV",{class:!0});var ge=T(i);r=R(ge,"P",{class:!0,style:!0});var ie=T(r);o=fe(ie,s),ie.forEach(_),a=te(ge),l=R(ge,"P",{style:!0});var le=T(l);d=fe(le,h),le.forEach(_),ge.forEach(_),m=te(J),v=R(J,"BUTTON",{class:!0,style:!0,"data-svelte-h":!0}),rn(v)!=="svelte-1gt8p21"&&(v.innerHTML=k),J.forEach(_),w=te(ne),E=R(ne,"HR",{}),I=te(ne),M=R(ne,"DIV",{class:!0});var pe=T(M);U&&U.l(pe),D=te(pe),H&&H.l(pe),O=te(pe),F.l(pe),pe.forEach(_),ne.forEach(_),this.h()},h(){g(r,"class","grow"),B(r,"font-size","18px"),B(l,"font-size","12px"),g(i,"class","column grow"),g(v,"class","close svelte-16xxwtz"),B(v,"background","none"),B(v,"padding","0"),B(v,"border","none"),B(v,"outline","none"),B(v,"margin","0"),B(v,"height","24px"),g(t,"class","row center-cross info-row svelte-16xxwtz"),B(t,"background-color","#445"),g(M,"class","panel-scrollable column"),g(e,"class","panel column")},m(q,ne){Z(q,e,ne),p(e,t),p(t,i),p(i,r),p(r,o),p(i,a),p(i,l),p(l,d),p(t,m),p(t,v),p(e,w),p(e,E),p(e,I),p(e,M),U&&U.m(M,null),p(M,D),H&&H.m(M,null),p(M,O),Q[P].m(M,null),V=!0,$||(G=nt(v,"click",n[10]),$=!0)},p(q,[ne]){var ge;(!V||ne&32)&&s!==(s=q[5]("geofences.title")+"")&&Ee(o,s),(!V||ne&32)&&h!==(h=q[5]("geofences.description")+"")&&Ee(d,h),ne&64&&(C=(ge=q[6])==null?void 0:ge.hasPermission(300)),C?U?U.p(q,ne):(U=wm(q),U.c(),U.m(M,D)):U&&(U.d(1),U=null),q[2]?H?(H.p(q,ne),ne&4&&de(H,1)):(H=km(q),H.c(),de(H,1),H.m(M,O)):H&&(bt(),Ie(H,1,1,()=>{H=null}),wt());let J=P;P=W(q),P===J?Q[P].p(q,ne):(bt(),Ie(Q[J],1,1,()=>{Q[J]=null}),wt(),F=Q[P],F?F.p(q,ne):(F=Q[P]=j[P](q),F.c()),de(F,1),F.m(M,null))},i(q){V||(de(H),de(F),V=!0)},o(q){Ie(H),Ie(F),V=!1},d(q){q&&_(e),U&&U.d(),H&&H.d(),Q[P].d(),$=!1,G()}}}function GT(n,e,t){let i,r,s,o,a;He(n,Nn,O=>t(5,o=O)),He(n,Li,O=>t(6,a=O));let{geofencesService:l}=e,{map:h}=e,d=l.geofences;He(n,d,O=>t(1,s=O));let m=l.inProgressGeofence;function v(O){nn.goto({type:Tt.GeofenceView,geofenceId:O})}function k(){const O=m||{name:"",fence:{v:[h.getCenter()],h:300},bufferOffset:0,minHeight:void 0,maxHeight:void 0};nn.goto({type:m?Tt.ContinueCreateGeofence:Tt.CreateGeofence,highlightedPointIndex:new Ot(null),resultCallback:P=>{l.newGeofence(P)},geofenceStore:new Ot(O)}),ii.settings.fields.geofence_layer_shown.set(!0)}function w(){nn.goto(null)}const E=()=>{t(2,m=null),l.setInProgressGeofence(null),k()},I=()=>{t(2,m=null),l.setInProgressGeofence(null)},M=()=>k(),C=O=>v(O.id),D=O=>v(O.id);return n.$$set=O=>{"geofencesService"in O&&t(0,l=O.geofencesService),"map"in O&&t(11,h=O.map)},n.$$.update=()=>{n.$$.dirty&2&&t(4,i=s?Array.from(s.values()).filter(O=>{const P=new Date,F=O.startTime?new Date(O.startTime):null,V=O.expirationTime?new Date(O.expirationTime):null,$=!F&&!V,G=F&&F<=P&&(!V||V>P);return $||G}).sort((O,P)=>{const F=O.expirationTime?new Date(O.expirationTime).getTime():1/0,V=P.expirationTime?new Date(P.expirationTime).getTime():1/0;return F-V}):[]),n.$$.dirty&2&&t(3,r=s?Array.from(s.values()).filter(O=>{const P=new Date,F=O.startTime?new Date(O.startTime):null;return F&&F>P}).sort((O,P)=>new Date(O.startTime).getTime()-new Date(P.startTime).getTime()):[])},[l,s,m,r,i,o,a,d,v,k,w,h,E,I,M,C,D]}class HT extends Wt{constructor(e){super(),Xt(this,e,GT,zT,zt,{geofencesService:0,map:11})}}var mr=(n=>(n[n.PHONE=1]="PHONE",n[n.EMAIL=2]="EMAIL",n[n.AUDIOVISUAL=3]="AUDIOVISUAL",n))(mr||{});class Hc{constructor(e){Ge(this,"geofences");Ge(this,"smsTemplates");Ge(this,"inProgressGeofence",null);this.geofences=new To(this.__fetchGeofences,{ttlSecs:60,loadInitially:!0,keepAliveWithZeroSubscribers:!0}),this.smsTemplates=new To(this.__fetchSmsTemplates,{ttlSecs:60,loadInitially:!0})}async fetchDetailedGeofence(e){const t=await Hr(`/api/v1/geofencing/area/${e}`);return Hc.__ensureCircleFixed(t),t}async getDetailedGeofence(e){return this.fetchDetailedGeofence(e)}async newGeofence(e){await no("/api/v1/geofencing/area",e),this.geofences.invalidate(),this.inProgressGeofence=null}async updateGeofence(e,t){await no(`/api/v1/geofencing/area/${e}`,t,"PATCH"),this.geofences.update(i=>{if(!i)return i;const r=i.get(e);return r&&Object.assign(r,t),i}),this.geofences.invalidate()}async deleteGeofence(e){await no(`/api/v1/geofencing/area/${e}`,{},"DELETE"),this.geofences.invalidate()}setInProgressGeofence(e){this.inProgressGeofence=e}static __ensureCircleFixed(e){if(e.fence.h){const t={lat:e.fence.v.reduce((i,r)=>i+r.lat,0)/e.fence.v.length,lng:e.fence.v.reduce((i,r)=>i+r.lng,0)/e.fence.v.length};e.fence={v:[t],h:e.fence.h},e.bufferOffset&&(e.buffer={v:[t],h:(e.fence.h||0)+e.bufferOffset})}}async __fetchGeofences(){const e=await Hr("/api/v1/geofencing/area");return e.forEach(Hc.__ensureCircleFixed),new Map(e.map(t=>[t.id,t]))}async __fetchSmsTemplates(){const e=await Hr("/api/v1/geofencing/templates/sms/all");let t=new Map;for(const i of e)t.has(i.kind)||t.set(i.kind,[]),t.get(i.kind).push(i);return t}}const Ho="geofence-pane-default",Zu="geofence-label-pane";function UT(n,e,t){let{map:i}=e,{mapManager:r}=e,{geofence:s}=e,{onClick:o=()=>{}}=e,{geofences:a}=e,{forView:l=!1}=e,h=450;if(!i.getPane(Ho)){i.createPane(Ho);const F=i.getPane(Ho);F&&(F.style.zIndex=h.toString())}if(!i.getPane(Zu)){i.createPane(Zu);const F=i.getPane(Zu);F&&(F.style.zIndex="5000")}const d=s.startTime&&new Date(s.startTime)>new Date,m=d?0:.5,v=d?"10, 10":void 0;let{shape:k=s.fence.h?Ct.circle(s.fence.v[0],{radius:s.fence.h,color:"#0008",fillColor:"#0008",fillOpacity:m,dashArray:v,pane:Ho}):Ct.polygon(s.fence.v,{color:"#0008",fillColor:"#0008",fillOpacity:m,dashArray:v,pane:Ho})}=e;k.on("click",o);let{bufferShape:w}=e;s.bufferOffset!==0&&(w=s.buffer.h?Ct.circle(s.fence.v[0],{radius:s.buffer.h,color:"#0004",fillColor:"#0004",fillOpacity:m,dashArray:v,pane:Ho}):Ct.polygon(s.buffer.v,{color:"#0004",fillColor:"#0004",fillOpacity:m,dashArray:v,pane:Ho}),w.on("click",o));const E=s.fence.h?s.fence.v[0]:Bc(s.fence.v),I=s.id%2147483647,M=Ct.tooltip({className:"geofence-label",content:s.name,direction:"center",permanent:!0,pane:Zu}).setLatLng(E);M.on("click",o);const C=r==null?void 0:r.currentLayer;let D;const O=C.subscribe(()=>{P()});function P(){if(D===void 0||C.current.minZoom===void 0||C.current.maxZoom===void 0)return;const F=i.getZoom(),V=Math.max(C.current.minZoom,Math.min(C.current.maxZoom,D));if(l){if(!i.hasLayer(M)){M.addTo(i);const $=M.getElement();$&&($.style.zIndex=I.toString())}}else if(F>=V){if(!i.hasLayer(M)){M.addTo(i);const $=M.getElement();$&&($.style.zIndex=I.toString())}}else i.hasLayer(M)&&M.remove()}return k.setStyle({fillColor:"#0008",fillOpacity:m,dashArray:v}),w==null||w.setStyle({fillColor:"#0004",fillOpacity:m,dashArray:v}),mi(()=>{k.addTo(i),w==null||w.addTo(i);const F=(s.fence.h,k.getBounds()),V=F.getSouthWest().distanceTo(F.getNorthEast()),$=Math.log10(10),G=Math.log10(1e5),U=Math.log10(V),H=Math.max(0,Math.min(1,(U-$)/(G-$)));h=Math.round(999-H*549);const j=`geofence-pane-${h}`;if(!i.getPane(j)){i.createPane(j);const W=i.getPane(j);W&&(W.style.zIndex=h.toString())}k.remove(),w==null||w.remove(),t(0,k.options.pane=j,k),w&&t(1,w.options.pane=j,w),k.addTo(i),w==null||w.addTo(i);const Q=(U-$)/(G-$);return D=(C.current.maxZoom??13)-((C.current.maxZoom??13)-(C.current.minZoom??3))*Q,P(),i.on("zoomend",P),()=>{k.remove(),w==null||w.remove(),M.remove(),i.off("zoomend",P),O()}}),n.$$set=F=>{"map"in F&&t(2,i=F.map),"mapManager"in F&&t(3,r=F.mapManager),"geofence"in F&&t(4,s=F.geofence),"onClick"in F&&t(5,o=F.onClick),"geofences"in F&&t(6,a=F.geofences),"forView"in F&&t(7,l=F.forView),"shape"in F&&t(0,k=F.shape),"bufferShape"in F&&t(1,w=F.bufferShape)},[k,w,i,r,s,o,a,l]}class e4 extends Wt{constructor(e){super(),Xt(this,e,UT,null,zt,{map:2,mapManager:3,geofence:4,onClick:5,geofences:6,forView:7,shape:0,bufferShape:1})}}function Tm(n,e,t){const i=n.slice();return i[8]=e[t],i}function Lm(n){let e=[],t=new Map,i,r,s=Bt(n[3].values());const o=a=>a[8].id;for(let a=0;a<s.length;a+=1){let l=Tm(n,s,a),h=o(l);t.set(h,e[a]=Nm(h,l))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();i=dt()},l(a){for(let l=0;l<e.length;l+=1)e[l].l(a);i=dt()},m(a,l){for(let h=0;h<e.length;h+=1)e[h]&&e[h].m(a,l);Z(a,i,l),r=!0},p(a,l){l&47&&(s=Bt(a[3].values()),bt(),e=vr(e,l,o,1,a,s,t,i.parentNode,vs,Nm,i,Tm),wt())},i(a){if(!r){for(let l=0;l<s.length;l+=1)de(e[l]);r=!0}},o(a){for(let l=0;l<e.length;l+=1)Ie(e[l]);r=!1},d(a){a&&_(i);for(let l=0;l<e.length;l+=1)e[l].d(a)}}}function Cm(n){let e,t;function i(){return n[7](n[8])}return e=new e4({props:{map:n[0],mapManager:n[1],geofence:n[8],onClick:i,geofences:n[3]}}),{c(){st(e.$$.fragment)},l(r){ot(e.$$.fragment,r)},m(r,s){at(e,r,s),t=!0},p(r,s){n=r;const o={};s&1&&(o.map=n[0]),s&2&&(o.mapManager=n[1]),s&8&&(o.geofence=n[8]),s&8&&(o.onClick=i),s&8&&(o.geofences=n[3]),e.$set(o)},i(r){t||(de(e.$$.fragment,r),t=!0)},o(r){Ie(e.$$.fragment,r),t=!1},d(r){lt(e,r)}}}function Pm(n){let e,t,i=n[8].id!==n[2]&&Cm(n);return{c(){i&&i.c(),e=dt()},l(r){i&&i.l(r),e=dt()},m(r,s){i&&i.m(r,s),Z(r,e,s),t=!0},p(r,s){r[8].id!==r[2]?i?(i.p(r,s),s&12&&de(i,1)):(i=Cm(r),i.c(),de(i,1),i.m(e.parentNode,e)):i&&(bt(),Ie(i,1,1,()=>{i=null}),wt())},i(r){t||(de(i),t=!0)},o(r){Ie(i),t=!1},d(r){r&&_(e),i&&i.d(r)}}}function Nm(n,e){let t,i=e[8],r,s,o=Pm(e);return{key:n,first:null,c(){t=dt(),o.c(),r=dt(),this.h()},l(a){t=dt(),o.l(a),r=dt(),this.h()},h(){this.first=t},m(a,l){Z(a,t,l),o.m(a,l),Z(a,r,l),s=!0},p(a,l){e=a,l&8&&zt(i,i=e[8])?(bt(),Ie(o,1,1,$e),wt(),o=Pm(e),o.c(),de(o,1),o.m(r.parentNode,r)):o.p(e,l)},i(a){s||(de(o),s=!0)},o(a){Ie(o),s=!1},d(a){a&&(_(t),_(r)),o.d(a)}}}function qT(n){let e,t,i=n[3]&&Lm(n);return{c(){i&&i.c(),e=dt()},l(r){i&&i.l(r),e=dt()},m(r,s){i&&i.m(r,s),Z(r,e,s),t=!0},p(r,[s]){r[3]?i?(i.p(r,s),s&8&&de(i,1)):(i=Lm(r),i.c(),de(i,1),i.m(e.parentNode,e)):i&&(bt(),Ie(i,1,1,()=>{i=null}),wt())},i(r){t||(de(i),t=!0)},o(r){Ie(i),t=!1},d(r){r&&_(e),i&&i.d(r)}}}function ZT(n,e,t){let i,{map:r}=e,{mapManager:s}=e,{geofencesService:o}=e,{ignoredGeofenceId:a=void 0}=e,l=o.geofences;He(n,l,m=>t(3,i=m));function h(m){nn.goto({type:Tt.GeofenceView,geofenceId:m})}const d=m=>h(m.id);return n.$$set=m=>{"map"in m&&t(0,r=m.map),"mapManager"in m&&t(1,s=m.mapManager),"geofencesService"in m&&t(6,o=m.geofencesService),"ignoredGeofenceId"in m&&t(2,a=m.ignoredGeofenceId)},[r,s,a,i,l,h,o,d]}class YT extends Wt{constructor(e){super(),Xt(this,e,ZT,qT,zt,{map:0,mapManager:1,geofencesService:6,ignoredGeofenceId:2})}}class jT{constructor(e){Ge(this,"map");Ge(this,"allBounds",null);Ge(this,"addedLayers",[]);Ge(this,"__animationFrameRequest",0);this.map=new yi.Map(e,{center:[59.43,24.74],zoom:11,crs:nr.__createEPSG3301Projection()}),this.map.addLayer(new Ct.TileLayer("https://tiles.maaamet.ee/tm/tms/1.0.0/foto@LEST/{z}/{x}/{y}.jpg&ASUTUS=MAAAMET&KESKKOND=LIVE&IS=TMSNAIDE",{tms:!0,maxZoom:13,minZoom:3,zIndex:1,updateWhenIdle:!1})),this.map.options.crs=nr.__createEPSG3301Projection(),this.map.dragging.disable(),this.map.touchZoom.disable(),this.map.doubleClickZoom.disable(),this.map.scrollWheelZoom.disable(),this.map.boxZoom.disable(),this.map.keyboard.disable(),this.map.zoomControl.remove(),this.map.attributionControl.remove(),this.map.on("layeradd",t=>{this.__extendBounds(t.layer),this.__fitBounds(),this.addedLayers.push(t.layer)}),this.map.on("layerremove",t=>{this.allBounds=null,this.addedLayers=this.addedLayers.filter(i=>i!==t.layer),this.addedLayers.forEach(i=>this.__extendBounds(i)),this.__fitBounds()})}__extendBounds(e){let t;if(e instanceof Ct.Polyline||e instanceof Ct.Polygon||e instanceof Ct.Circle)t=e.getBounds().pad(.1);else if(e instanceof Ct.Marker)t=e.getLatLng().toBounds(100);else return;this.allBounds?this.allBounds.extend(t):this.allBounds=t}__fitBounds(){this.__animationFrameRequest&&cancelAnimationFrame(this.__animationFrameRequest),this.__animationFrameRequest=requestAnimationFrame(()=>{this.allBounds&&this.map.fitBounds(this.allBounds,{animate:!1})})}destroy(){this.map.remove()}}function Dm(n){let e=n[1],t,i,r=Am(n);return{c(){r.c(),t=dt()},l(s){r.l(s),t=dt()},m(s,o){r.m(s,o),Z(s,t,o),i=!0},p(s,o){o&2&&zt(e,e=s[1])?(bt(),Ie(r,1,1,$e),wt(),r=Am(s),r.c(),de(r,1),r.m(t.parentNode,t)):r.p(s,o)},i(s){i||(de(r),i=!0)},o(s){Ie(r),i=!1},d(s){s&&_(t),r.d(s)}}}function Am(n){let e,t;return e=new e4({props:{map:n[2].map,mapManager:n[0],geofence:n[1],forView:!0}}),{c(){st(e.$$.fragment)},l(i){ot(e.$$.fragment,i)},m(i,r){at(e,i,r),t=!0},p(i,r){const s={};r&4&&(s.map=i[2].map),r&1&&(s.mapManager=i[0]),r&2&&(s.geofence=i[1]),e.$set(s)},i(i){t||(de(e.$$.fragment,i),t=!0)},o(i){Ie(e.$$.fragment,i),t=!1},d(i){lt(e,i)}}}function Rm(n){var h;let e,t,i,r,s,o,a=((h=n[1])==null?void 0:h.name)+"",l;return{c(){e=A("div"),t=ee(),i=A("div"),r=A("div"),s=A("div"),o=A("span"),l=he(a),this.h()},l(d){e=R(d,"DIV",{style:!0,class:!0}),T(e).forEach(_),t=te(d),i=R(d,"DIV",{style:!0,class:!0});var m=T(i);r=R(m,"DIV",{class:!0,style:!0});var v=T(r);s=R(v,"DIV",{class:!0});var k=T(s);o=R(k,"SPAN",{style:!0});var w=T(o);l=fe(w,a),w.forEach(_),k.forEach(_),v.forEach(_),m.forEach(_),this.h()},h(){B(e,"z-index","10"),g(e,"class","gradient svelte-g2xqg7"),B(o,"font-size","24px"),B(o,"font-weight","600"),g(s,"class","row center-cross g8"),g(r,"class","row center-cross g8 p816"),B(r,"width","100%"),B(i,"z-index","10"),g(i,"class","overlay svelte-g2xqg7")},m(d,m){Z(d,e,m),Z(d,t,m),Z(d,i,m),p(i,r),p(r,s),p(s,o),p(o,l)},p(d,m){var v;m&2&&a!==(a=((v=d[1])==null?void 0:v.name)+"")&&Ee(l,a)},d(d){d&&(_(e),_(t),_(i))}}}function WT(n){let e,t,i,r={ctx:n,current:null,token:null,hasCatch:!1,pending:QT,then:JT,catch:KT,blocks:[,,,]};return xs(t=n[9],r),{c(){e=dt(),r.block.c()},l(s){e=dt(),r.block.l(s)},m(s,o){Z(s,e,o),r.block.m(s,r.anchor=o),r.mount=()=>e.parentNode,r.anchor=e,i=!0},p(s,o){n=s,r.ctx=n,o&512&&t!==(t=n[9])&&xs(t,r)},i(s){i||(de(r.block),i=!0)},o(s){for(let o=0;o<3;o+=1){const a=r.blocks[o];Ie(a)}i=!1},d(s){s&&_(e),r.block.d(s),r.token=null,r=null}}}function XT(n){var ye,be;let e,t,i,r,s,o,a,l,h=n[4]("geofenceView.heightRange")+"",d,m,v,k=w1(n[4],n[1].minHeight,n[1].maxHeight)+"",w,E,I,M,C,D,O,P,F,V=n[4]("geofenceView.validityRange")+"",$,G,U,H,j,Q,W,Y=n[1]&&((ye=n[7])==null?void 0:ye.hasPermission(300)),q,ne,J=((be=n[1])==null?void 0:be.bufferOffset)&&Om(n);function ge(re,me){return re[5]&&re[6]?tL:eL}let ie=ge(n),le=ie(n);Q=new fn({props:{class:"hoverable noselect action",onclick:n[23],$$slots:{default:[nL]},$$scope:{ctx:n}}});let pe=Y&&xm(n);return{c(){J&&J.c(),e=ee(),t=A("div"),i=Re("svg"),r=Re("path"),s=ee(),o=A("div"),a=A("label"),l=A("b"),d=he(h),m=ee(),v=A("p"),w=he(k),E=ee(),I=A("div"),M=Re("svg"),C=Re("path"),D=ee(),O=A("div"),P=A("label"),F=A("b"),$=he(V),G=ee(),le.c(),U=ee(),H=A("div"),j=ee(),st(Q.$$.fragment),W=ee(),pe&&pe.c(),q=dt(),this.h()},l(re){J&&J.l(re),e=te(re),t=R(re,"DIV",{class:!0});var me=T(t);i=Oe(me,"svg",{style:!0,xmlns:!0,x:!0,y:!0,width:!0,height:!0,viewBox:!0});var ke=T(i);r=Oe(ke,"path",{d:!0});var X=T(r);X.forEach(_),ke.forEach(_),s=te(me),o=R(me,"DIV",{class:!0});var ue=T(o);a=R(ue,"LABEL",{});var _e=T(a);l=R(_e,"B",{});var oe=T(l);d=fe(oe,h),oe.forEach(_),_e.forEach(_),m=te(ue),v=R(ue,"P",{});var ae=T(v);w=fe(ae,k),ae.forEach(_),ue.forEach(_),me.forEach(_),E=te(re),I=R(re,"DIV",{class:!0});var Se=T(I);M=Oe(Se,"svg",{xmlns:!0,height:!0,viewBox:!0,width:!0,fill:!0,style:!0});var Me=T(M);C=Oe(Me,"path",{d:!0}),T(C).forEach(_),Me.forEach(_),D=te(Se),O=R(Se,"DIV",{class:!0});var we=T(O);P=R(we,"LABEL",{});var Te=T(P);F=R(Te,"B",{});var Ae=T(F);$=fe(Ae,V),Ae.forEach(_),Te.forEach(_),G=te(we),le.l(we),we.forEach(_),Se.forEach(_),U=te(re),H=R(re,"DIV",{class:!0}),T(H).forEach(_),j=te(re),ot(Q.$$.fragment,re),W=te(re),pe&&pe.l(re),q=dt(),this.h()},h(){g(r,"d","M 14.984375 2.9863281 A 1.0001 1.0001 0 0 0 14.207031 3.3769531 A 1.0001 1.0001 0 0 0 14.203125 3.3828125 L 9.2929688 8.2929688 A 1.0001 1.0001 0 1 0 10.707031 9.7070312 L 14 6.4140625 L 14 23.585938 L 10.707031 20.292969 A 1.0001 1.0001 0 0 0 9.9902344 19.990234 A 1.0001 1.0001 0 0 0 9.2929688 21.707031 L 14.205078 26.619141 A 1.0001 1.0001 0 0 0 15.796875 26.617188 L 20.707031 21.707031 A 1.0001 1.0001 0 1 0 19.292969 20.292969 L 16 23.585938 L 16 6.4140625 L 19.292969 9.7070312 A 1.0001 1.0001 0 1 0 20.707031 8.2929688 L 15.791016 3.3769531 A 1.0001 1.0001 0 0 0 14.984375 2.9863281 z"),B(i,"width","40px"),B(i,"height","40px"),B(i,"padding","8px"),g(i,"xmlns","http://www.w3.org/2000/svg"),g(i,"x","0px"),g(i,"y","0px"),g(i,"width","100"),g(i,"height","100"),g(i,"viewBox","0 0 30 30"),g(o,"class","column"),g(t,"class","row g8 p816 hoverable"),g(C,"d","M212.31-100Q182-100 161-121q-21-21-21-51.31v-535.38Q140-738 161-759q21-21 51.31-21h55.38v-53.85q0-13.15 8.81-21.96 8.81-8.8 21.96-8.8 13.16 0 21.96 8.8 8.81 8.81 8.81 21.96V-780h303.08v-54.61q0-12.77 8.61-21.39 8.62-8.61 21.39-8.61 12.77 0 21.38 8.61 8.62 8.62 8.62 21.39V-780h55.38Q778-780 799-759q21 21 21 51.31v535.38Q820-142 799-121q-21 21-51.31 21H212.31Zm0-60h535.38q4.62 0 8.46-3.85 3.85-3.84 3.85-8.46v-375.38H200v375.38q0 4.62 3.85 8.46 3.84 3.85 8.46 3.85ZM200-607.69h560v-100q0-4.62-3.85-8.46-3.84-3.85-8.46-3.85H212.31q-4.62 0-8.46 3.85-3.85 3.84-3.85 8.46v100Zm0 0V-720v112.31Zm280 210.77q-14.69 0-25.04-10.35-10.34-10.34-10.34-25.04 0-14.69 10.34-25.04 10.35-10.34 25.04-10.34t25.04 10.34q10.34 10.35 10.34 25.04 0 14.7-10.34 25.04-10.35 10.35-25.04 10.35Zm-160 0q-14.69 0-25.04-10.35-10.34-10.34-10.34-25.04 0-14.69 10.34-25.04 10.35-10.34 25.04-10.34t25.04 10.34q10.34 10.35 10.34 25.04 0 14.7-10.34 25.04-10.35 10.35-25.04 10.35Zm320 0q-14.69 0-25.04-10.35-10.34-10.34-10.34-25.04 0-14.69 10.34-25.04 10.35-10.34 25.04-10.34t25.04 10.34q10.34 10.35 10.34 25.04 0 14.7-10.34 25.04-10.35 10.35-25.04 10.35ZM480-240q-14.69 0-25.04-10.35-10.34-10.34-10.34-25.03 0-14.7 10.34-25.04 10.35-10.35 25.04-10.35t25.04 10.35q10.34 10.34 10.34 25.04 0 14.69-10.34 25.03Q494.69-240 480-240Zm-160 0q-14.69 0-25.04-10.35-10.34-10.34-10.34-25.03 0-14.7 10.34-25.04 10.35-10.35 25.04-10.35t25.04 10.35q10.34 10.34 10.34 25.04 0 14.69-10.34 25.03Q334.69-240 320-240Zm320 0q-14.69 0-25.04-10.35-10.34-10.34-10.34-25.03 0-14.7 10.34-25.04 10.35-10.35 25.04-10.35t25.04 10.35q10.34 10.34 10.34 25.04 0 14.69-10.34 25.03Q654.69-240 640-240Z"),g(M,"xmlns","http://www.w3.org/2000/svg"),g(M,"height","40px"),g(M,"viewBox","0 -960 960 960"),g(M,"width","40px"),g(M,"fill","#000"),B(M,"padding","5px"),g(O,"class","column"),g(I,"class","row g8 p816 hoverable"),g(H,"class","sep")},m(re,me){J&&J.m(re,me),Z(re,e,me),Z(re,t,me),p(t,i),p(i,r),p(t,s),p(t,o),p(o,a),p(a,l),p(l,d),p(o,m),p(o,v),p(v,w),Z(re,E,me),Z(re,I,me),p(I,M),p(M,C),p(I,D),p(I,O),p(O,P),p(P,F),p(F,$),p(O,G),le.m(O,null),Z(re,U,me),Z(re,H,me),Z(re,j,me),at(Q,re,me),Z(re,W,me),pe&&pe.m(re,me),Z(re,q,me),ne=!0},p(re,me){var X,ue;(X=re[1])!=null&&X.bufferOffset?J?J.p(re,me):(J=Om(re),J.c(),J.m(e.parentNode,e)):J&&(J.d(1),J=null),(!ne||me&16)&&h!==(h=re[4]("geofenceView.heightRange")+"")&&Ee(d,h),(!ne||me&18)&&k!==(k=w1(re[4],re[1].minHeight,re[1].maxHeight)+"")&&Ee(w,k),(!ne||me&16)&&V!==(V=re[4]("geofenceView.validityRange")+"")&&Ee($,V),ie===(ie=ge(re))&&le?le.p(re,me):(le.d(1),le=ie(re),le&&(le.c(),le.m(O,null)));const ke={};me&268435472&&(ke.$$scope={dirty:me,ctx:re}),Q.$set(ke),me&130&&(Y=re[1]&&((ue=re[7])==null?void 0:ue.hasPermission(300))),Y?pe?(pe.p(re,me),me&130&&de(pe,1)):(pe=xm(re),pe.c(),de(pe,1),pe.m(q.parentNode,q)):pe&&(bt(),Ie(pe,1,1,()=>{pe=null}),wt())},i(re){ne||(de(Q.$$.fragment,re),de(pe),ne=!0)},o(re){Ie(Q.$$.fragment,re),Ie(pe),ne=!1},d(re){re&&(_(e),_(t),_(E),_(I),_(U),_(H),_(j),_(W),_(q)),J&&J.d(re),le.d(),lt(Q,re),pe&&pe.d(re)}}}function KT(n){return{c:$e,l:$e,m:$e,i:$e,o:$e,d:$e}}function JT(n){return{c:$e,l:$e,m:$e,i:$e,o:$e,d:$e}}function QT(n){let e,t,i;return t=new ws({props:{color:"#aa8800",size:"32"}}),{c(){e=A("div"),st(t.$$.fragment),this.h()},l(r){e=R(r,"DIV",{class:!0,style:!0});var s=T(e);ot(t.$$.fragment,s),s.forEach(_),this.h()},h(){g(e,"class","column center center-cross"),B(e,"height","64px")},m(r,s){Z(r,e,s),at(t,e,null),i=!0},i(r){i||(de(t.$$.fragment,r),i=!0)},o(r){Ie(t.$$.fragment,r),i=!1},d(r){r&&_(e),lt(t)}}}function Om(n){var I;let e,t,i,r,s,o,a,l=n[4]("geofenceView.buffer")+"",h,d,m,v,k=((I=n[1])==null?void 0:I.bufferOffset)+"",w,E;return{c(){e=A("div"),t=Re("svg"),i=Re("path"),r=ee(),s=A("div"),o=A("label"),a=A("b"),h=he(l),d=ee(),m=A("div"),v=A("p"),w=he(k),E=he(" m"),this.h()},l(M){e=R(M,"DIV",{class:!0});var C=T(e);t=Oe(C,"svg",{style:!0,xmlns:!0,x:!0,y:!0,width:!0,height:!0,viewBox:!0});var D=T(t);i=Oe(D,"path",{d:!0}),T(i).forEach(_),D.forEach(_),r=te(C),s=R(C,"DIV",{class:!0});var O=T(s);o=R(O,"LABEL",{});var P=T(o);a=R(P,"B",{});var F=T(a);h=fe(F,l),F.forEach(_),P.forEach(_),d=te(O),m=R(O,"DIV",{class:!0});var V=T(m);v=R(V,"P",{});var $=T(v);w=fe($,k),E=fe($," m"),$.forEach(_),V.forEach(_),O.forEach(_),C.forEach(_),this.h()},h(){g(i,"d","M 4.9902344 3.9902344 A 1.0001 1.0001 0 0 0 4 5.1289062 L 4 10 A 1.0001 1.0001 0 1 0 6 10 L 6 7.4140625 L 10.292969 11.707031 A 1.0001 1.0001 0 1 0 11.707031 10.292969 L 7.4140625 6 L 10 6 A 1.0001 1.0001 0 1 0 10 4 L 5.1171875 4 A 1.0001 1.0001 0 0 0 4.9902344 3.9902344 z M 24.980469 3.9902344 A 1.0001 1.0001 0 0 0 24.869141 4 L 20 4 A 1.0001 1.0001 0 1 0 20 6 L 22.585938 6 L 18.292969 10.292969 A 1.0001 1.0001 0 1 0 19.707031 11.707031 L 24 7.4140625 L 24 10 A 1.0001 1.0001 0 1 0 26 10 L 26 5.1269531 A 1.0001 1.0001 0 0 0 24.980469 3.9902344 z M 10.980469 17.990234 A 1.0001 1.0001 0 0 0 10.292969 18.292969 L 6 22.585938 L 6 20 A 1.0001 1.0001 0 0 0 4.984375 18.986328 A 1.0001 1.0001 0 0 0 4 20 L 4 24.847656 A 1.0001 1.0001 0 0 0 5.1523438 26 L 10 26 A 1.0001 1.0001 0 1 0 10 24 L 7.4140625 24 L 11.707031 19.707031 A 1.0001 1.0001 0 0 0 10.980469 17.990234 z M 18.990234 17.990234 A 1.0001 1.0001 0 0 0 18.292969 19.707031 L 22.585938 24 L 20 24 A 1.0001 1.0001 0 1 0 20 26 L 24.847656 26 A 1.0001 1.0001 0 0 0 26 24.847656 L 26 20 A 1.0001 1.0001 0 0 0 24.984375 18.986328 A 1.0001 1.0001 0 0 0 24 20 L 24 22.585938 L 19.707031 18.292969 A 1.0001 1.0001 0 0 0 18.990234 17.990234 z"),B(t,"width","40px"),B(t,"height","40px"),B(t,"padding","5px"),g(t,"xmlns","http://www.w3.org/2000/svg"),g(t,"x","0px"),g(t,"y","0px"),g(t,"width","100"),g(t,"height","100"),g(t,"viewBox","0 0 30 30"),g(m,"class","row g8"),g(s,"class","column"),g(e,"class","row g8 p816 hoverable")},m(M,C){Z(M,e,C),p(e,t),p(t,i),p(e,r),p(e,s),p(s,o),p(o,a),p(a,h),p(s,d),p(s,m),p(m,v),p(v,w),p(v,E)},p(M,C){var D;C&16&&l!==(l=M[4]("geofenceView.buffer")+"")&&Ee(h,l),C&2&&k!==(k=((D=M[1])==null?void 0:D.bufferOffset)+"")&&Ee(w,k)},d(M){M&&_(e)}}}function eL(n){let e,t=n[4]("geofenceView.validUntilForever")+"",i;return{c(){e=A("p"),i=he(t)},l(r){e=R(r,"P",{});var s=T(e);i=fe(s,t),s.forEach(_)},m(r,s){Z(r,e,s),p(e,i)},p(r,s){s&16&&t!==(t=r[4]("geofenceView.validUntilForever")+"")&&Ee(i,t)},d(r){r&&_(e)}}}function tL(n){let e,t=n[4]("geofenceView.validFrom")+"",i,r,s=Ci(n[4],new Date(n[5]),!1)+"",o,a,l,h=n[4]("geofenceView.validTo")+"",d,m,v=Ci(n[4],new Date(n[6]),!1)+"",k;return{c(){e=A("p"),i=he(t),r=ee(),o=he(s),a=A("br"),l=ee(),d=he(h),m=ee(),k=he(v)},l(w){e=R(w,"P",{});var E=T(e);i=fe(E,t),r=te(E),o=fe(E,s),a=R(E,"BR",{}),l=te(E),d=fe(E,h),m=te(E),k=fe(E,v),E.forEach(_)},m(w,E){Z(w,e,E),p(e,i),p(e,r),p(e,o),p(e,a),p(e,l),p(e,d),p(e,m),p(e,k)},p(w,E){E&16&&t!==(t=w[4]("geofenceView.validFrom")+"")&&Ee(i,t),E&48&&s!==(s=Ci(w[4],new Date(w[5]),!1)+"")&&Ee(o,s),E&16&&h!==(h=w[4]("geofenceView.validTo")+"")&&Ee(d,h),E&80&&v!==(v=Ci(w[4],new Date(w[6]),!1)+"")&&Ee(k,v)},d(w){w&&_(e)}}}function nL(n){let e,t,i,r,s=n[4]("geofenceView.showOnMap")+"",o;return{c(){e=Re("svg"),t=Re("path"),i=ee(),r=A("b"),o=he(s),this.h()},l(a){e=Oe(a,"svg",{xmlns:!0,x:!0,y:!0,width:!0,height:!0,viewBox:!0});var l=T(e);t=Oe(l,"path",{d:!0}),T(t).forEach(_),l.forEach(_),i=te(a),r=R(a,"B",{});var h=T(r);o=fe(h,s),h.forEach(_),this.h()},h(){g(t,"d","M 28 4.46875 L 26.59375 5.09375 L 19.96875 7.9375 L 12.34375 5.0625 L 11.96875 4.9375 L 11.59375 5.09375 L 4.59375 8.09375 L 4 8.34375 L 4 27.53125 L 5.40625 26.90625 L 12.03125 24.0625 L 19.65625 26.9375 L 20.03125 27.0625 L 20.40625 26.90625 L 27.40625 23.90625 L 28 23.65625 Z M 13 7.4375 L 19 9.6875 L 19 24.5625 L 13 22.3125 Z M 11 7.5 L 11 22.34375 L 6 24.5 L 6 9.65625 Z M 26 7.5 L 26 22.34375 L 21 24.5 L 21 9.65625 Z"),g(e,"xmlns","http://www.w3.org/2000/svg"),g(e,"x","0px"),g(e,"y","0px"),g(e,"width","100"),g(e,"height","100"),g(e,"viewBox","0 0 32 32")},m(a,l){Z(a,e,l),p(e,t),Z(a,i,l),Z(a,r,l),p(r,o)},p(a,l){l&16&&s!==(s=a[4]("geofenceView.showOnMap")+"")&&Ee(o,s)},d(a){a&&(_(e),_(i),_(r))}}}function xm(n){let e,t,i,r,s,o;return e=new fn({props:{class:"hoverable noselect action",onclick:n[24],$$slots:{default:[iL]},$$scope:{ctx:n}}}),s=new fn({props:{class:"hoverable noselect action",onclick:n[27],$$slots:{default:[oL]},$$scope:{ctx:n}}}),{c(){st(e.$$.fragment),t=ee(),i=A("div"),r=ee(),st(s.$$.fragment),this.h()},l(a){ot(e.$$.fragment,a),t=te(a),i=R(a,"DIV",{class:!0}),T(i).forEach(_),r=te(a),ot(s.$$.fragment,a),this.h()},h(){g(i,"class","sep")},m(a,l){at(e,a,l),Z(a,t,l),Z(a,i,l),Z(a,r,l),at(s,a,l),o=!0},p(a,l){const h={};l&268435472&&(h.$$scope={dirty:l,ctx:a}),e.$set(h);const d={};l&256&&(d.onclick=a[27]),l&268435728&&(d.$$scope={dirty:l,ctx:a}),s.$set(d)},i(a){o||(de(e.$$.fragment,a),de(s.$$.fragment,a),o=!0)},o(a){Ie(e.$$.fragment,a),Ie(s.$$.fragment,a),o=!1},d(a){a&&(_(t),_(i),_(r)),lt(e,a),lt(s,a)}}}function iL(n){let e,t,i,r,s=n[4]("geofenceView.editDetails")+"",o;return{c(){e=Re("svg"),t=Re("path"),i=ee(),r=A("b"),o=he(s),this.h()},l(a){e=Oe(a,"svg",{style:!0,xmlns:!0,x:!0,y:!0,width:!0,height:!0,viewBox:!0});var l=T(e);t=Oe(l,"path",{d:!0}),T(t).forEach(_),l.forEach(_),i=te(a),r=R(a,"B",{});var h=T(r);o=fe(h,s),h.forEach(_),this.h()},h(){g(t,"d","M22 51c-1-1-4-1-4-1l-.425-1.274c-.362-1.086-1.215-1.939-2.301-2.301L14 46c0 0 .5-2.5-1-4l25-25 8 10L22 51zM52 21l-9-9 4.68-4.68c0 0 3.5-1.5 7 2s2 7 2 7L52 21zM9 50l-1.843 4.476c-.614 1.49.877 2.981 2.367 2.367L14 55 9 50z"),B(e,"width","40px"),B(e,"height","40px"),B(e,"padding","8px"),g(e,"xmlns","http://www.w3.org/2000/svg"),g(e,"x","0px"),g(e,"y","0px"),g(e,"width","100"),g(e,"height","100"),g(e,"viewBox","0 0 64 64")},m(a,l){Z(a,e,l),p(e,t),Z(a,i,l),Z(a,r,l),p(r,o)},p(a,l){l&16&&s!==(s=a[4]("geofenceView.editDetails")+"")&&Ee(o,s)},d(a){a&&(_(e),_(i),_(r))}}}function Fm(n){let e,t,i,r,s;return t=new fn({props:{onclick:n[25],$$slots:{default:[rL]},$$scope:{ctx:n}}}),r=new fn({props:{onclick:n[26],$$slots:{default:[sL]},$$scope:{ctx:n}}}),{c(){e=A("div"),st(t.$$.fragment),i=ee(),st(r.$$.fragment),this.h()},l(o){e=R(o,"DIV",{class:!0});var a=T(e);ot(t.$$.fragment,a),i=te(a),ot(r.$$.fragment,a),a.forEach(_),this.h()},h(){g(e,"class","row center-cross g8")},m(o,a){Z(o,e,a),at(t,e,null),p(e,i),at(r,e,null),s=!0},p(o,a){const l={};a&256&&(l.onclick=o[25]),a&268435456&&(l.$$scope={dirty:a,ctx:o}),t.$set(l);const h={};a&268435456&&(h.$$scope={dirty:a,ctx:o}),r.$set(h)},i(o){s||(de(t.$$.fragment,o),de(r.$$.fragment,o),s=!0)},o(o){Ie(t.$$.fragment,o),Ie(r.$$.fragment,o),s=!1},d(o){o&&_(e),lt(t),lt(r)}}}function rL(n){let e,t='<svg style="padding: 2px; opacity: 0.8;" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="100" height="100" viewBox="0 0 24 24" class="svelte-g2xqg7"><path d="M 10 5.3417969 C 9.744125 5.3417969 9.4879688 5.4412187 9.2929688 5.6367188 L 3.6367188 11.292969 C 3.2457187 11.683969 3.2457187 12.317031 3.6367188 12.707031 L 9.2929688 18.363281 C 9.6839688 18.754281 10.317031 18.754281 10.707031 18.363281 L 10.792969 18.277344 C 11.183969 17.886344 11.183969 17.253281 10.792969 16.863281 L 6.9296875 13 L 20 13 C 20.552 13 21 12.552 21 12 C 21 11.448 20.552 11 20 11 L 6.9296875 11 L 10.792969 7.1367188 C 11.183969 6.7457187 11.183969 6.1126563 10.792969 5.7226562 L 10.707031 5.6367188 C 10.511531 5.4412187 10.255875 5.3417969 10 5.3417969 z"></path></svg>';return{c(){e=A("div"),e.innerHTML=t,this.h()},l(i){e=R(i,"DIV",{class:!0,style:!0,"data-svelte-h":!0}),rn(e)!=="svelte-oosx22"&&(e.innerHTML=t),this.h()},h(){g(e,"class","small-button clickable svelte-g2xqg7"),B(e,"border","1px solid #2224")},m(i,r){Z(i,e,r)},p:$e,d(i){i&&_(e)}}}function sL(n){let e,t='<svg style="opacity: 0.9; fill: #fff;" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="100" height="100" viewBox="0 0 48 48" class="svelte-g2xqg7"><path d="M 24 4 C 20.491685 4 17.570396 6.6214322 17.080078 10 L 10.238281 10 A 1.50015 1.50015 0 0 0 9.9804688 9.9785156 A 1.50015 1.50015 0 0 0 9.7578125 10 L 6.5 10 A 1.50015 1.50015 0 1 0 6.5 13 L 8.6386719 13 L 11.15625 39.029297 C 11.427329 41.835926 13.811782 44 16.630859 44 L 31.367188 44 C 34.186411 44 36.570826 41.836168 36.841797 39.029297 L 39.361328 13 L 41.5 13 A 1.50015 1.50015 0 1 0 41.5 10 L 38.244141 10 A 1.50015 1.50015 0 0 0 37.763672 10 L 30.919922 10 C 30.429604 6.6214322 27.508315 4 24 4 z M 24 7 C 25.879156 7 27.420767 8.2681608 27.861328 10 L 20.138672 10 C 20.579233 8.2681608 22.120844 7 24 7 z M 11.650391 13 L 36.347656 13 L 33.855469 38.740234 C 33.730439 40.035363 32.667963 41 31.367188 41 L 16.630859 41 C 15.331937 41 14.267499 40.033606 14.142578 38.740234 L 11.650391 13 z M 20.476562 17.978516 A 1.50015 1.50015 0 0 0 19 19.5 L 19 34.5 A 1.50015 1.50015 0 1 0 22 34.5 L 22 19.5 A 1.50015 1.50015 0 0 0 20.476562 17.978516 z M 27.476562 17.978516 A 1.50015 1.50015 0 0 0 26 19.5 L 26 34.5 A 1.50015 1.50015 0 1 0 29 34.5 L 29 19.5 A 1.50015 1.50015 0 0 0 27.476562 17.978516 z"></path></svg>';return{c(){e=A("div"),e.innerHTML=t,this.h()},l(i){e=R(i,"DIV",{class:!0,style:!0,"data-svelte-h":!0}),rn(e)!=="svelte-1emwjjy"&&(e.innerHTML=t),this.h()},h(){g(e,"class","small-button clickable svelte-g2xqg7"),B(e,"background-color","#e66"),B(e,"border","1px solid #8c8f")},m(i,r){Z(i,e,r)},p:$e,d(i){i&&_(e)}}}function oL(n){let e,t,i,r,s=n[4]("geofenceView.delete")+"",o,a,l,h,d,m,v=n[8]&&Fm(n);return{c(){e=Re("svg"),t=Re("path"),i=ee(),r=A("b"),o=he(s),a=ee(),l=A("div"),h=ee(),v&&v.c(),d=dt(),this.h()},l(k){e=Oe(k,"svg",{style:!0,xmlns:!0,x:!0,y:!0,width:!0,height:!0,viewBox:!0});var w=T(e);t=Oe(w,"path",{d:!0}),T(t).forEach(_),w.forEach(_),i=te(k),r=R(k,"B",{style:!0});var E=T(r);o=fe(E,s),E.forEach(_),a=te(k),l=R(k,"DIV",{class:!0}),T(l).forEach(_),h=te(k),v&&v.l(k),d=dt(),this.h()},h(){g(t,"d","M 24 4 C 20.491685 4 17.570396 6.6214322 17.080078 10 L 10.238281 10 A 1.50015 1.50015 0 0 0 9.9804688 9.9785156 A 1.50015 1.50015 0 0 0 9.7578125 10 L 6.5 10 A 1.50015 1.50015 0 1 0 6.5 13 L 8.6386719 13 L 11.15625 39.029297 C 11.427329 41.835926 13.811782 44 16.630859 44 L 31.367188 44 C 34.186411 44 36.570826 41.836168 36.841797 39.029297 L 39.361328 13 L 41.5 13 A 1.50015 1.50015 0 1 0 41.5 10 L 38.244141 10 A 1.50015 1.50015 0 0 0 37.763672 10 L 30.919922 10 C 30.429604 6.6214322 27.508315 4 24 4 z M 24 7 C 25.879156 7 27.420767 8.2681608 27.861328 10 L 20.138672 10 C 20.579233 8.2681608 22.120844 7 24 7 z M 11.650391 13 L 36.347656 13 L 33.855469 38.740234 C 33.730439 40.035363 32.667963 41 31.367188 41 L 16.630859 41 C 15.331937 41 14.267499 40.033606 14.142578 38.740234 L 11.650391 13 z M 20.476562 17.978516 A 1.50015 1.50015 0 0 0 19 19.5 L 19 34.5 A 1.50015 1.50015 0 1 0 22 34.5 L 22 19.5 A 1.50015 1.50015 0 0 0 20.476562 17.978516 z M 27.476562 17.978516 A 1.50015 1.50015 0 0 0 26 19.5 L 26 34.5 A 1.50015 1.50015 0 1 0 29 34.5 L 29 19.5 A 1.50015 1.50015 0 0 0 27.476562 17.978516 z"),B(e,"width","40px"),B(e,"height","40px"),B(e,"padding","8px"),B(e,"fill","#c44"),g(e,"xmlns","http://www.w3.org/2000/svg"),g(e,"x","0px"),g(e,"y","0px"),g(e,"width","100"),g(e,"height","100"),g(e,"viewBox","0 0 48 48"),B(r,"color","#c44"),g(l,"class","grow")},m(k,w){Z(k,e,w),p(e,t),Z(k,i,w),Z(k,r,w),p(r,o),Z(k,a,w),Z(k,l,w),Z(k,h,w),v&&v.m(k,w),Z(k,d,w),m=!0},p(k,w){(!m||w&16)&&s!==(s=k[4]("geofenceView.delete")+"")&&Ee(o,s),k[8]?v?(v.p(k,w),w&256&&de(v,1)):(v=Fm(k),v.c(),de(v,1),v.m(d.parentNode,d)):v&&(bt(),Ie(v,1,1,()=>{v=null}),wt())},i(k){m||(de(v),m=!0)},o(k){Ie(v),m=!1},d(k){k&&(_(e),_(i),_(r),_(a),_(l),_(h),_(d)),v&&v.d(k)}}}function aL(n){var ne;let e,t,i='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M19 5L5 19M5.00001 5L19 19" stroke="#fff" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>',r,s,o,a,l='<svg fill="#fff" width="14" height="14" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M222.927 580.115l301.354 328.512c24.354 28.708 20.825 71.724-7.883 96.078s-71.724 20.825-96.078-7.883L19.576 559.963a67.846 67.846 0 01-13.784-20.022 68.03 68.03 0 01-5.977-29.488l.001-.063a68.343 68.343 0 017.265-29.134 68.28 68.28 0 011.384-2.6 67.59 67.59 0 0110.102-13.687L429.966 21.113c25.592-27.611 68.721-29.247 96.331-3.656s29.247 68.721 3.656 96.331L224.088 443.784h730.46c37.647 0 68.166 30.519 68.166 68.166s-30.519 68.166-68.166 68.166H222.927z"></path></g></svg>',h,d,m,v,k,w,E,I=n[4]("geofenceView.description")+"",M,C,D,O=(((ne=n[1])==null?void 0:ne.description)||"")+"",P,F,V,$,G,U,H,j=n[1]&&n[2]&&Dm(n),Q=n[1]&&Rm(n);const W=[XT,WT],Y=[];function q(J,ge){return J[1]?0:1}return V=q(n),$=Y[V]=W[V](n),{c(){e=A("div"),t=A("a"),t.innerHTML=i,r=ee(),s=A("div"),o=A("div"),a=A("a"),a.innerHTML=l,h=ee(),d=A("div"),m=ee(),j&&j.c(),v=ee(),Q&&Q.c(),k=ee(),w=A("div"),E=A("b"),M=he(I),C=ee(),D=A("p"),P=he(O),F=ee(),$.c(),this.h()},l(J){e=R(J,"DIV",{id:!0,class:!0});var ge=T(e);t=R(ge,"A",{class:!0,style:!0,href:!0,"data-svelte-h":!0}),rn(t)!=="svelte-19ebdco"&&(t.innerHTML=i),r=te(ge),s=R(ge,"DIV",{class:!0});var ie=T(s);o=R(ie,"DIV",{class:!0,id:!0});var le=T(o);a=R(le,"A",{class:!0,style:!0,href:!0,"data-svelte-h":!0}),rn(a)!=="svelte-rm7nv0"&&(a.innerHTML=l),h=te(le),d=R(le,"DIV",{id:!0,class:!0}),T(d).forEach(_),m=te(le),j&&j.l(le),v=te(le),Q&&Q.l(le),le.forEach(_),k=te(ie),w=R(ie,"DIV",{class:!0,style:!0});var pe=T(w);E=R(pe,"B",{style:!0});var ye=T(E);M=fe(ye,I),ye.forEach(_),C=te(pe),D=R(pe,"P",{style:!0});var be=T(D);P=fe(be,O),be.forEach(_),pe.forEach(_),F=te(ie),$.l(ie),ie.forEach(_),ge.forEach(_),this.h()},h(){g(t,"class","top-button svelte-g2xqg7"),B(t,"right","0"),g(t,"href",""),g(a,"class","top-button svelte-g2xqg7"),B(a,"left","0"),g(a,"href",""),g(d,"id","geofence-view-map"),g(d,"class","background"),g(o,"class","header svelte-g2xqg7"),g(o,"id","geofence-view-map-parent"),B(E,"font-size","12px"),B(E,"text-transform","uppercase"),B(D,"font-size","18px"),B(D,"white-space","pre-wrap"),g(w,"class","column info-row svelte-g2xqg7"),B(w,"background-color","#445"),B(w,"position","sticky"),B(w,"top","0px"),g(s,"class","panel-scrollable"),g(e,"id","sensor-view"),g(e,"class","panel column rel svelte-g2xqg7")},m(J,ge){Z(J,e,ge),p(e,t),p(e,r),p(e,s),p(s,o),p(o,a),p(o,h),p(o,d),p(o,m),j&&j.m(o,null),p(o,v),Q&&Q.m(o,null),p(s,k),p(s,w),p(w,E),p(E,M),p(w,C),p(w,D),p(D,P),p(s,F),Y[V].m(s,null),G=!0,U||(H=[nt(t,"click",ro(nn.close)),nt(a,"click",ro(n[22]))],U=!0)},p(J,[ge]){var le;J[1]&&J[2]?j?(j.p(J,ge),ge&6&&de(j,1)):(j=Dm(J),j.c(),de(j,1),j.m(o,v)):j&&(bt(),Ie(j,1,1,()=>{j=null}),wt()),J[1]?Q?Q.p(J,ge):(Q=Rm(J),Q.c(),Q.m(o,null)):Q&&(Q.d(1),Q=null),(!G||ge&16)&&I!==(I=J[4]("geofenceView.description")+"")&&Ee(M,I),(!G||ge&2)&&O!==(O=(((le=J[1])==null?void 0:le.description)||"")+"")&&Ee(P,O);let ie=V;V=q(J),V===ie?Y[V].p(J,ge):(bt(),Ie(Y[ie],1,1,()=>{Y[ie]=null}),wt(),$=Y[V],$?$.p(J,ge):($=Y[V]=W[V](J),$.c()),de($,1),$.m(s,null))},i(J){G||(de(j),de($),G=!0)},o(J){Ie(j),Ie($),G=!1},d(J){J&&_(e),j&&j.d(),Q&&Q.d(),Y[V].d(),U=!1,Bn(H)}}}function lL(n,e,t){let i,r,s,o,a,l,h,d,m,v,k=$e,w=()=>(k(),k=Dt(i,ne=>t(9,v=ne)),i);He(n,nn,ne=>t(20,s=ne)),He(n,Nn,ne=>t(4,a=ne)),He(n,Li,ne=>t(7,d=ne)),n.$$.on_destroy.push(()=>k());let{map:E}=e,{mapManager:I}=e,{geofencesService:M}=e,C=M.geofences;He(n,C,ne=>t(21,o=ne));const D=Pn(null);He(n,D,ne=>t(1,r=ne));const O=Pn(!1);He(n,O,ne=>t(8,m=ne));const P=Ra(D,ne=>ne!=null&&ne.startTime?new Date(ne.startTime):null);He(n,P,ne=>t(5,l=ne));const F=Ra(D,ne=>ne!=null&&ne.expirationTime?new Date(ne.expirationTime):null);He(n,F,ne=>t(6,h=ne));let V;function $(){r!=null&&r.fence&&(r.fence.h?E.fitBounds(Ct.latLng(r.fence.v[0]).toBounds(r.fence.h)):E.fitBounds(Ct.latLngBounds(r.fence.v))),ii.settings.fields.geofence_layer_shown.set(!0)}function G(){r&&(M.deleteGeofence(r.id),nn.close())}function U(){const ne=r;ne&&($(),nn.goto({type:Tt.EditGeofence,highlightedPointIndex:new Ot(null),resultCallback:J=>{J.description=J.description&&J.description.trim(),M.updateGeofence(ne.id,J).then(()=>nn.goto({type:Tt.GeofenceView,geofenceId:ne.id}))},geofenceStore:new Ot(ne),geofenceId:ne.id}),ii.settings.fields.geofence_layer_shown.set(!0))}mi(()=>(t(2,V=new jT("geofence-view-map")),()=>{V.destroy()}));const H=()=>nn.goto({type:Tt.Geofences}),j=ne=>$(),Q=ne=>U(),W=()=>requestAnimationFrame(()=>kn(O,m=!1,m)),Y=ne=>G(),q=()=>!m&&kn(O,m=!0,m);return n.$$set=ne=>{"map"in ne&&t(18,E=ne.map),"mapManager"in ne&&t(0,I=ne.mapManager),"geofencesService"in ne&&t(19,M=ne.geofencesService)},n.$$.update=()=>{n.$$.dirty&3670016&&o&&s&&s.type==Tt.GeofenceView&&M.getDetailedGeofence(s.geofenceId).then(ne=>{D.set(ne)}),n.$$.dirty&2&&w(t(3,i=r?null:C.loadingPromiseStore))},[I,r,V,i,a,l,h,d,m,v,C,D,O,P,F,$,G,U,E,M,s,o,H,j,Q,W,Y,q]}class uL extends Wt{constructor(e){super(),Xt(this,e,lL,aL,zt,{map:18,mapManager:0,geofencesService:19})}}class Bm{constructor(e,t){Ge(this,"subscribers",new Set);Ge(this,"parentStore");Ge(this,"field");Ge(this,"__unsubscribe");this.parentStore=e,this.field=t,this.__unsubscribe=this.parentStore.subscribe(()=>{this.subscribers.forEach(i=>{i(this.parentStore.current[this.field])})})}get current(){return this.parentStore.current[this.field]}set(e){this.parentStore.update(t=>(t[this.field]=e,t))}subscribe(e){return this.subscribers.add(e),e(this.parentStore.current[this.field]),()=>{this.subscribers.delete(e)}}update(e){this.parentStore.update(t=>(t[this.field]=e(t[this.field]),t))}onUnmount(){this.__unsubscribe()}onDestroy(){this.onUnmount()}}class Ti extends Error{}function cL(n,e){const i=new fL(n).parse();return new dL(e).render(i)}class hL{constructor(e){Ge(this,"input");Ge(this,"pos",0);this.input=e}lex(){const e=[];let t="";for(;this.pos<this.input.length;){const i=this.input.indexOf("{{",this.pos);if(i===-1){t+=this.input.slice(this.pos);break}t+=this.input.slice(this.pos,i);let r=i+2,s=!1;this.input[r]==="-"&&(s=!0,r++),s&&(t=t.replace(/\s+$/,"")),t.length>0&&(e.push({kind:"text",text:t,trimLeft:!1,trimRight:!1}),t="");const o=this.input.indexOf("}}",r);if(o===-1)throw new Ti("Unclosed template action");let a=o,l=!1;this.input[a-1]==="-"&&(l=!0,a--);const h=this.input.slice(r,a).trim();if(e.push({kind:"action",text:h,trimLeft:s,trimRight:l}),this.pos=o+2,l)for(;this.pos<this.input.length&&/\s/.test(this.input[this.pos]??"");)this.pos++}return t.length>0&&e.push({kind:"text",text:t,trimLeft:!1,trimRight:!1}),e}}class $m{constructor(e){Ge(this,"input");Ge(this,"pos",0);this.input=e}nextToken(){const e=this.pos;this.skipWhitespace();const t=this.pos>e;if(this.pos>=this.input.length)return{kind:"eof",precededByWhitespace:t};const i=this.input[this.pos];if(i===".")return this.pos++,{kind:"dot",precededByWhitespace:t};if(i==="$")return this.pos++,{kind:"dollar",precededByWhitespace:t};if(i===":")return this.input[this.pos+1]==="="?(this.pos+=2,{kind:"colonAssign",precededByWhitespace:t}):(this.pos++,{kind:"colon",precededByWhitespace:t});if(i===",")return this.pos++,{kind:"comma",precededByWhitespace:t};if(i==="(")return this.pos++,{kind:"lparen",precededByWhitespace:t};if(i===")")return this.pos++,{kind:"rparen",precededByWhitespace:t};if(i==='"')return{...this.readString(),precededByWhitespace:t};if(this.isDigit(i)||i==="-"&&this.isDigit(this.input[this.pos+1]??""))return{...this.readNumber(),precededByWhitespace:t};if(this.isIdentStart(i))return{...this.readIdent(),precededByWhitespace:t};throw new Ti(`Unexpected character in template: '${i}'`)}skipWhitespace(){for(;this.pos<this.input.length&&/\s/.test(this.input[this.pos]??"");)this.pos++}isDigit(e){return e>="0"&&e<="9"}isIdentStart(e){return/[A-Za-z_]/.test(e)}isIdentPart(e){return/[A-Za-z0-9_]/.test(e)}readNumber(){const e=this.pos;for(this.input[this.pos]==="-"&&this.pos++;this.pos<this.input.length&&this.isDigit(this.input[this.pos]??"");)this.pos++;if(this.input[this.pos]===".")for(this.pos++;this.pos<this.input.length&&this.isDigit(this.input[this.pos]??"");)this.pos++;return{kind:"number",value:this.input.slice(e,this.pos)}}readString(){let e="";for(this.pos++;this.pos<this.input.length;){const t=this.input[this.pos];if(t==='"')return this.pos++,{kind:"string",value:e};if(t==="\\"){const i=this.input[this.pos+1];i==="n"?(e+=`
`,this.pos+=2):i==='"'?(e+='"',this.pos+=2):i==="\\"?(e+="\\",this.pos+=2):(e+=i,this.pos+=2)}else e+=t,this.pos++}throw new Ti("Unterminated string literal in template")}readIdent(){const e=this.pos;for(this.pos++;this.pos<this.input.length&&this.isIdentPart(this.input[this.pos]??"");)this.pos++;return{kind:"ident",value:this.input.slice(e,this.pos)}}}class fL{constructor(e){Ge(this,"outerTokens");Ge(this,"index",0);const t=new hL(e);this.outerTokens=t.lex()}parse(){return this.parseNodes(()=>!1)}parseNodes(e){const t=[];for(;this.index<this.outerTokens.length;){const i=this.outerTokens[this.index];if(e(i))break;if(i.kind==="text"){t.push({kind:"text",text:i.text}),this.index++;continue}const r=new Vm(new $m(i.text)).parseAction();if(r.type==="if"){t.push(this.parseIfBlock(r.cond));continue}if(r.type==="range"){t.push(this.parseRangeBlock(r));continue}if(r.type==="with"){t.push(this.parseWithBlock(r.value));continue}t.push({kind:"output",expr:r.expr}),this.index++}return t}parseIfBlock(e){this.index++;const t=this.parseNodes(r=>this.isElseOrEnd(r)),i=this.parseElseBranch("if");return{kind:"if",cond:e,thenBranch:t,elseBranch:i}}parseRangeBlock(e){this.index++;const t=this.parseNodes(r=>this.isElseOrEnd(r)),i=this.parseElseBranch("range");return{kind:"range",keyVar:e.keyVar,valueVar:e.valueVar,iterable:e.iterable,body:t,elseBranch:i}}parseWithBlock(e){this.index++;const t=this.parseNodes(r=>this.isElseOrEnd(r)),i=this.parseElseBranch("with");return{kind:"with",value:e,body:t,elseBranch:i}}parseElseBranch(e){if(this.index>=this.outerTokens.length)return[];const t=this.outerTokens[this.index];if(t.kind!=="action")return[];const i=new Vm(new $m(t.text)).parseElseOrEnd();if(i.kind==="end")return this.index++,[];if(i.kind==="else"){this.index++;const r=this.parseNodes(s=>this.isEnd(s));return this.consumeEnd(e),r}return i.kind==="elseif"?[this.parseIfBlock(i.cond)]:[]}isElseOrEnd(e){if(e.kind!=="action")return!1;const t=e.text.trim();return t.startsWith("else")||t==="end"}isEnd(e){return e.kind==="action"&&e.text.trim()==="end"}consumeEnd(e){if(this.index>=this.outerTokens.length||!this.isEnd(this.outerTokens[this.index]))throw new Ti("Missing end for block");this.index++}}class Vm{constructor(e){Ge(this,"lexer");Ge(this,"lookahead");this.lexer=e,this.lookahead=this.lexer.nextToken()}eat(e){if(this.lookahead.kind!==e)throw new Ti(`Expected ${e} but got ${this.lookahead.kind}`);const t=this.lookahead;return this.lookahead=this.lexer.nextToken(),t}match(e){return this.lookahead.kind===e}parseAction(){if(this.match("ident")){const t=this.lookahead.value??"";if(t==="if")return this.eat("ident"),{type:"if",cond:this.parseExpression()};if(t==="range")return this.eat("ident"),this.parseRangeHeader();if(t==="with")return this.eat("ident"),{type:"with",value:this.parseExpression()}}return{type:"output",expr:this.parseExpression()}}parseElseOrEnd(){if(this.match("ident")){const e=this.lookahead.value??"";if(e==="else")return this.eat("ident"),this.match("ident")&&this.lookahead.value==="if"?(this.eat("ident"),{kind:"elseif",cond:this.parseExpression()}):{kind:"else"};if(e==="end")return this.eat("ident"),{kind:"end"}}throw new Ti("Expected else or end")}parseRangeHeader(){let e,t;if(this.match("dollar")){this.eat("dollar");const r=this.eat("ident").value??"";if(this.match("comma")){this.eat("comma"),this.eat("dollar");const s=this.eat("ident").value??"";e=r,t=s}else t=r;this.eat("colonAssign")}const i=this.parseExpression();return{type:"range",keyVar:e,valueVar:t,iterable:i}}parseExpression(){return this.parsePrefix()}parsePrefix(){if(this.match("ident")){const e=this.lookahead.value??"";if(e==="not")return this.eat("ident"),{kind:"logical",op:"not",right:this.parsePrefix()};if(e==="and"||e==="or"){this.eat("ident");const t=this.parsePrefix(),i=this.parsePrefix();return{kind:"logical",op:e,left:t,right:i}}if(this.isCompareOp(e)){this.eat("ident");const t=this.parsePrefix(),i=this.parsePrefix();return{kind:"compare",op:e,left:t,right:i}}}return this.parsePrimary()}isCompareOp(e){return e==="eq"||e==="ne"||e==="lt"||e==="le"||e==="gt"||e==="ge"}parseFieldChain(e){let t=e;for(;this.match("dot")&&!this.lookahead.precededByWhitespace;){this.eat("dot");const i=this.eat("ident").value??"";t={kind:"field",object:t,field:i}}return t}parsePrimary(){if(this.match("number")){const e=this.eat("number");return{kind:"literal",value:Number(e.value)}}if(this.match("string"))return{kind:"literal",value:this.eat("string").value??""};if(this.match("ident")){const e=this.lookahead.value??"";if(e==="true")return this.eat("ident"),{kind:"literal",value:!0};if(e==="false")return this.eat("ident"),{kind:"literal",value:!1};if(e==="nil")return this.eat("ident"),{kind:"literal",value:null};if(e==="and"||e==="or"||e==="not")throw new Ti("Logical operators must appear at the start or between expressions, not as standalone primaries");if(e==="index"){this.eat("ident");const t=this.parsePrimary(),i=this.parsePrimary();return{kind:"index",target:t,index:i}}throw new Ti(`Function calls like '${e}' are not supported in templates`)}if(this.match("dot")){this.eat("dot");let e={kind:"dot"};if(this.match("ident")&&!this.lookahead.precededByWhitespace){const t=this.eat("ident").value??"";e={kind:"field",object:e,field:t}}return this.parseFieldChain(e)}if(this.match("dollar")){this.eat("dollar");let t={kind:"var",name:this.eat("ident").value??""};return this.parseFieldChain(t)}if(this.match("lparen")){this.eat("lparen");const e=this.parseExpression();return this.eat("rparen"),{kind:"group",inner:e}}throw new Ti(`Unexpected token in expression: ${this.lookahead.kind}`)}}class dL{constructor(e){Ge(this,"frames",[]);this.frames.push({dot:e,vars:new Map})}render(e){let t="";for(const i of e)t+=this.renderNode(i);return t}current(){return this.frames[this.frames.length-1]}pushFrame(e){this.frames.push({dot:e,vars:new Map(this.current().vars)})}popFrame(){this.frames.pop()}renderNode(e){switch(e.kind){case"text":return e.text;case"output":return this.stringify(this.evalExpr(e.expr));case"if":return this.truthy(this.evalExpr(e.cond))?this.render(e.thenBranch):this.render(e.elseBranch);case"range":{const t=this.evalExpr(e.iterable),i=this.toIterable(t);if(i.length===0)return this.render(e.elseBranch);let r="";for(const[s,o]of i)this.pushFrame(o),e.keyVar&&this.current().vars.set(e.keyVar,s),e.valueVar&&this.current().vars.set(e.valueVar,o),r+=this.render(e.body),this.popFrame();return r}case"with":{const t=this.evalExpr(e.value);if(!this.truthy(t))return this.render(e.elseBranch);this.pushFrame(t);const i=this.render(e.body);return this.popFrame(),i}}}evalExpr(e){switch(e.kind){case"literal":return e.value;case"dot":return this.current().dot;case"var":{const t=this.current().vars.get(e.name);if(t===void 0)throw new Ti(`Undefined variable $${e.name}`);return t}case"field":{const t=this.evalExpr(e.object);if(t==null)throw new Ti(`Cannot access field '${e.field}' of null/undefined`);if(Object.prototype.hasOwnProperty.call(t,e.field)||e.field in t){const r=t[e.field];if(typeof r=="function")throw new Ti(`Accessing method '${e.field}' as function is not supported`);return r}const i=Object.keys(t);throw console.log("[GoTemplate] Field access failed. Object:",t,"Field:",e.field,"Available:",i),new Ti(`Field '${e.field}' does not exist on object. Available fields: ${i.join(", ")}`)}case"index":{const t=this.evalExpr(e.target),i=this.evalExpr(e.index);if(t==null)throw new Ti("Cannot index null/undefined");if(Array.isArray(t)){if(typeof i!="number")throw new Ti("Array index must be a number");if(i<0||i>=t.length)throw new Ti("Array index out of bounds");return t[i]}if(typeof t=="object"){if(!(i in t))throw new Ti(`Key '${String(i)}' does not exist`);return t[i]}throw new Ti("Cannot index non-object value")}case"logical":{if(e.op==="not")return!this.truthy(this.evalExpr(e.right));if(!e.left)throw new Ti("Logical operator missing left operand");const t=this.truthy(this.evalExpr(e.left));if(e.op==="and")return t&&this.truthy(this.evalExpr(e.right));if(e.op==="or")return t||this.truthy(this.evalExpr(e.right));throw new Ti("Unknown logical op")}case"compare":{const t=this.evalExpr(e.left),i=this.evalExpr(e.right);switch(e.op){case"eq":return t===i;case"ne":return t!==i;case"lt":return this.compare(t,i)<0;case"le":return this.compare(t,i)<=0;case"gt":return this.compare(t,i)>0;case"ge":return this.compare(t,i)>=0}throw new Ti("Unknown compare op")}case"group":return this.evalExpr(e.inner)}}truthy(e){return!!e}compare(e,t){if(typeof e=="number"&&typeof t=="number")return e===t?0:e<t?-1:1;const i=String(e),r=String(t);return i===r?0:i<r?-1:1}stringify(e){return e==null?"":typeof e=="string"?e:typeof e=="number"||typeof e=="boolean"?String(e):JSON.stringify(e)}toIterable(e){if(e==null)return[];if(Array.isArray(e))return e.map((t,i)=>[i,t]);if(typeof e=="object"){const t=[];for(const i of Object.keys(e))t.push([i,e[i]]);return t}throw new Ti("Cannot range over non-iterable value")}}function zm(n,e){const t=n.template.replaceAll("\\n",`
`);return cL(t,e)}class gL{constructor(e){Ge(this,"store");this.store=new Ot(e)}createView(e){return{subscribe:t=>this.store.subscribe(i=>{t(e.read(i))}),set:t=>{const i=e.set(t);return this.store.set(i),e.read(i)},update:t=>{this.store.update(i=>e.set(t(e.read(i))))},current:()=>e.read(this.store.current)}}getBaseStore(){return this.store}get current(){return this.store.current}}var ln=(n=>(n.AREA="area",n.HEIGHT="height",n.NAME="name",n.VALIDITY_PERIOD="validity_period",n.NOTIFICATION="notification",n.BUFFER="buffer",n.BUFFER_NOTIFICATION="buffer_notification",n.REVIEW="review",n))(ln||{}),Fi=(n=>(n.POLYGON="polygon",n.CIRCLE="circle",n))(Fi||{});const gl={"GeoFence.Name":"Geopiirang #1","Drone.Make":"DJI","Drone.Model":"Mavic 3","PilotCoordinates.Lat":"59.436390","PilotCoordinates.Lng":"24.708456"};var as=(n=>(n.ANY_HEIGHT="anyHeight",n.SPECIFIED="specified",n))(as||{});function mL(n){let e,t,i,r,s=n[1]("createGeofence.name.title")+"",o,a,l,h=n[1]("createGeofence.name.desc")+"",d,m,v,k,w=n[1]("createGeofence.name.label")+"",E,I,M,C="*",D,O,P,F;return{c(){e=A("div"),t=A("div"),i=A("span"),r=A("strong"),o=he(s),a=ee(),l=A("p"),d=he(h),m=ee(),v=A("div"),k=A("label"),E=he(w),I=ee(),M=A("span"),M.textContent=C,D=ee(),O=A("input"),this.h()},l(V){e=R(V,"DIV",{class:!0,style:!0});var $=T(e);t=R($,"DIV",{class:!0});var G=T(t);i=R(G,"SPAN",{style:!0});var U=T(i);r=R(U,"STRONG",{});var H=T(r);o=fe(H,s),H.forEach(_),U.forEach(_),a=te(G),l=R(G,"P",{});var j=T(l);d=fe(j,h),j.forEach(_),G.forEach(_),m=te($),v=R($,"DIV",{class:!0,style:!0});var Q=T(v);k=R(Q,"LABEL",{style:!0,for:!0});var W=T(k);E=fe(W,w),I=te(W),M=R(W,"SPAN",{style:!0,"data-svelte-h":!0}),rn(M)!=="svelte-199aewp"&&(M.textContent=C),W.forEach(_),D=te(Q),O=R(Q,"INPUT",{style:!0,type:!0,id:!0,spellcheck:!0,maxlength:!0,class:!0}),Q.forEach(_),$.forEach(_),this.h()},h(){B(i,"font-size","20px"),g(t,"class","column g8"),B(M,"color","red"),B(k,"color","#666"),B(k,"font-size","14px"),g(k,"for","geofence-name"),B(O,"flex","8"),g(O,"type","text"),g(O,"id","geofence-name"),g(O,"spellcheck","false"),O.value=n[2],O.required=!0,g(O,"maxlength","10"),g(O,"class","svelte-102koy0"),g(v,"class","column"),B(v,"gap","2px"),g(e,"class","column g16"),B(e,"padding-inline","16px")},m(V,$){Z(V,e,$),p(e,t),p(t,i),p(i,r),p(r,o),p(t,a),p(t,l),p(l,d),p(e,m),p(e,v),p(v,k),p(k,E),p(k,I),p(k,M),p(v,D),p(v,O),P||(F=nt(O,"input",n[3]),P=!0)},p(V,[$]){$&2&&s!==(s=V[1]("createGeofence.name.title")+"")&&Ee(o,s),$&2&&h!==(h=V[1]("createGeofence.name.desc")+"")&&Ee(d,h),$&2&&w!==(w=V[1]("createGeofence.name.label")+"")&&Ee(E,w),$&4&&O.value!==V[2]&&(O.value=V[2])},i:$e,o:$e,d(V){V&&_(e),P=!1,F()}}}function _L(n,e,t){let i,r,s=$e,o=()=>(s(),s=Dt(a,h=>t(2,r=h)),a);He(n,Nn,h=>t(1,i=h)),n.$$.on_destroy.push(()=>s());let{name:a}=e;o();const l=h=>kn(a,r=h.target.value,r);return n.$$set=h=>{"name"in h&&o(t(0,a=h.name))},[a,i,r,l]}class pL extends Wt{constructor(e){super(),Xt(this,e,_L,mL,zt,{name:0})}}function Gm(n){let e,t,i,r,s=n[7]("createGeofence.height.fromSeaHeight")+"",o,a,l,h,d,m,v,k,w=n[7]("createGeofence.height.meters")+"",E,I,M=n[7]("createGeofence.height.feet")+"",C,D,O,P;return{c(){e=A("div"),t=A("div"),i=A("div"),r=A("label"),o=he(s),a=ee(),l=A("div"),h=A("input"),m=ee(),v=A("select"),k=A("option"),E=he(w),I=A("option"),C=he(M),this.h()},l(F){e=R(F,"DIV",{class:!0});var V=T(e);t=R(V,"DIV",{class:!0});var $=T(t);i=R($,"DIV",{class:!0});var G=T(i);r=R(G,"LABEL",{style:!0,for:!0});var U=T(r);o=fe(U,s),U.forEach(_),a=te(G),l=R(G,"DIV",{class:!0});var H=T(l);h=R(H,"INPUT",{style:!0,class:!0,type:!0,id:!0}),m=te(H),v=R(H,"SELECT",{class:!0});var j=T(v);k=R(j,"OPTION",{class:!0});var Q=T(k);E=fe(Q,w),Q.forEach(_),I=R(j,"OPTION",{class:!0});var W=T(I);C=fe(W,M),W.forEach(_),j.forEach(_),H.forEach(_),G.forEach(_),$.forEach(_),V.forEach(_),this.h()},h(){B(r,"color","#666"),B(r,"font-size","14px"),g(r,"for","min-height"),B(h,"padding-left","8px"),B(h,"width","0"),B(h,"font-family","monospace"),B(h,"font-size","16px"),g(h,"class","grow svelte-oy5d5u"),g(h,"type","text"),g(h,"id","min-height"),h.value=d=n[8]?n[9]:n[10],k.__value="m",fi(k,k.__value),g(k,"class","svelte-oy5d5u"),I.__value="ft",fi(I,I.__value),g(I,"class","svelte-oy5d5u"),g(v,"class","measurement-unit-select svelte-oy5d5u"),g(l,"class","input-container row svelte-oy5d5u"),g(i,"class","column g4 grow"),g(t,"class","heights row center-cross g16"),g(e,"class","column g4")},m(F,V){Z(F,e,V),p(e,t),p(t,i),p(i,r),p(r,o),p(i,a),p(i,l),p(l,h),p(l,m),p(l,v),p(v,k),p(k,E),p(v,I),p(I,C),Cs(v,n[8]?"ft":"m"),O||(P=[nt(h,"focus",yL),nt(h,"input",n[14]),nt(h,"blur",n[15]),nt(h,"keydown",n[16]),nt(v,"change",n[17])],O=!0)},p(F,V){V&128&&s!==(s=F[7]("createGeofence.height.fromSeaHeight")+"")&&Ee(o,s),V&1792&&d!==(d=F[8]?F[9]:F[10])&&h.value!==d&&(h.value=d),V&128&&w!==(w=F[7]("createGeofence.height.meters")+"")&&Ee(E,w),V&128&&M!==(M=F[7]("createGeofence.height.feet")+"")&&Ee(C,M),V&256&&D!==(D=F[8]?"ft":"m")&&Cs(v,F[8]?"ft":"m")},d(F){F&&_(e),O=!1,Bn(P)}}}function vL(n){let e,t,i,r,s=n[7]("createGeofence.height.title")+"",o,a,l,h=n[7]("createGeofence.height.desc")+"",d,m,v,k,w,E,I,M,C,D=n[7]("createGeofence.heightRangeType.specified.title")+"",O,P,F,V,$=n[7]("createGeofence.heightRangeType.specified.desc")+"",G,U,H;function j(Y){n[13](Y)}let Q={id:"height-range-type"};n[5]!==void 0&&(Q.checked=n[5]),w=new so({props:Q}),un.push(()=>jn(w,"checked",j));let W=n[6]==as.SPECIFIED&&Gm(n);return{c(){e=A("div"),t=A("div"),i=A("span"),r=A("strong"),o=he(s),a=ee(),l=A("p"),d=he(h),m=ee(),v=A("div"),k=A("div"),st(w.$$.fragment),I=ee(),M=A("label"),C=A("p"),O=he(D),P=ee(),F=A("p"),V=A("i"),G=he($),U=ee(),W&&W.c(),this.h()},l(Y){e=R(Y,"DIV",{class:!0,style:!0});var q=T(e);t=R(q,"DIV",{class:!0});var ne=T(t);i=R(ne,"SPAN",{style:!0});var J=T(i);r=R(J,"STRONG",{});var ge=T(r);o=fe(ge,s),ge.forEach(_),J.forEach(_),a=te(ne),l=R(ne,"P",{});var ie=T(l);d=fe(ie,h),ie.forEach(_),ne.forEach(_),m=te(q),v=R(q,"DIV",{class:!0});var le=T(v);k=R(le,"DIV",{class:!0,style:!0});var pe=T(k);ot(w.$$.fragment,pe),I=te(pe),M=R(pe,"LABEL",{class:!0,for:!0});var ye=T(M);C=R(ye,"P",{style:!0});var be=T(C);O=fe(be,D),be.forEach(_),P=te(ye),F=R(ye,"P",{style:!0});var re=T(F);V=R(re,"I",{});var me=T(V);G=fe(me,$),me.forEach(_),re.forEach(_),ye.forEach(_),pe.forEach(_),le.forEach(_),U=te(q),W&&W.l(q),q.forEach(_),this.h()},h(){B(i,"font-size","20px"),g(t,"class","column g8"),B(C,"font-weight","600"),B(F,"font-size","14px"),B(F,"color","#666"),g(M,"class","column g4"),g(M,"for","height-range-type"),g(k,"class","row p816 hoverable"),B(k,"gap","12px"),B(k,"align-items","start"),B(k,"border-radius","4px"),g(v,"class","column g8"),g(e,"class","column g16"),B(e,"padding-inline","16px")},m(Y,q){Z(Y,e,q),p(e,t),p(t,i),p(i,r),p(r,o),p(t,a),p(t,l),p(l,d),p(e,m),p(e,v),p(v,k),at(w,k,null),p(k,I),p(k,M),p(M,C),p(C,O),p(M,P),p(M,F),p(F,V),p(V,G),p(e,U),W&&W.m(e,null),H=!0},p(Y,[q]){(!H||q&128)&&s!==(s=Y[7]("createGeofence.height.title")+"")&&Ee(o,s),(!H||q&128)&&h!==(h=Y[7]("createGeofence.height.desc")+"")&&Ee(d,h);const ne={};!E&&q&32&&(E=!0,ne.checked=Y[5],Yn(()=>E=!1)),w.$set(ne),(!H||q&128)&&D!==(D=Y[7]("createGeofence.heightRangeType.specified.title")+"")&&Ee(O,D),(!H||q&128)&&$!==($=Y[7]("createGeofence.heightRangeType.specified.desc")+"")&&Ee(G,$),Y[6]==as.SPECIFIED?W?W.p(Y,q):(W=Gm(Y),W.c(),W.m(e,null)):W&&(W.d(1),W=null)},i(Y){H||(de(w.$$.fragment,Y),H=!0)},o(Y){Ie(w.$$.fragment,Y),H=!1},d(Y){Y&&_(e),lt(w),W&&W.d()}}}const yL=n=>n.target.select();function bL(n,e,t){let i,r=$e,s=()=>(r(),r=Dt(I,Q=>t(6,i=Q)),I),o,a,l=$e,h=()=>(l(),l=Dt(D,Q=>t(8,a=Q)),D),d,m=$e,v=()=>(m(),m=Dt(P,Q=>t(9,d=Q)),P),k,w=$e,E=()=>(w(),w=Dt(O,Q=>t(10,k=Q)),O);He(n,Nn,Q=>t(7,o=Q)),n.$$.on_destroy.push(()=>r()),n.$$.on_destroy.push(()=>l()),n.$$.on_destroy.push(()=>m()),n.$$.on_destroy.push(()=>w());let{heightRangeType:I}=e;s();let{geofence:M}=e,{enforceInputInteger:C}=e,{isMinHeightInFeet:D}=e;h();let{minHeightMeters:O}=e;E();let{minHeightFeet:P}=e;v();let F;function V(Q){const W=+parseInt(Q.target.value),Y=D.current,q=Y?P:O;if(isNaN(W)){O.set(1),Q.target.value=q.current();return}const ne=5e3,J=Math.round(ne/.3048);if(Y&&W>J){O.set(ne),Q.target.value=q.current();return}else if(!Y&&W>ne){O.set(ne),Q.target.value=q.current();return}Q.target.value=q.set(W)}function $(Q){F=Q,t(5,F),t(6,i)}const G=Q=>C(Q),U=Q=>V(Q),H=Q=>Q.key==="Enter"&&V(Q),j=Q=>D.set(Q.target.value==="ft");return n.$$set=Q=>{"heightRangeType"in Q&&s(t(0,I=Q.heightRangeType)),"geofence"in Q&&t(12,M=Q.geofence),"enforceInputInteger"in Q&&t(1,C=Q.enforceInputInteger),"isMinHeightInFeet"in Q&&h(t(2,D=Q.isMinHeightInFeet)),"minHeightMeters"in Q&&E(t(3,O=Q.minHeightMeters)),"minHeightFeet"in Q&&v(t(4,P=Q.minHeightFeet))},n.$$.update=()=>{if(n.$$.dirty&64&&t(5,F=i===as.SPECIFIED),n.$$.dirty&97){const Q=F?as.SPECIFIED:as.ANY_HEIGHT;i!==Q&&I.set(Q)}},[I,C,D,O,P,F,i,o,a,d,k,V,M,$,G,U,H,j]}class wL extends Wt{constructor(e){super(),Xt(this,e,bL,vL,zt,{heightRangeType:0,geofence:12,enforceInputInteger:1,isMinHeightInFeet:2,minHeightMeters:3,minHeightFeet:4})}}function Hm(n,e,t){const i=n.slice();return i[40]=e[t],i[42]=t,i}function Um(n){let e,t,i=Bt(n[7]),r=[];for(let o=0;o<i.length;o+=1)r[o]=jm(Hm(n,i,o));const s=o=>Ie(r[o],1,1,()=>{r[o]=null});return{c(){for(let o=0;o<r.length;o+=1)r[o].c();e=dt()},l(o){for(let a=0;a<r.length;a+=1)r[a].l(o);e=dt()},m(o,a){for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(o,a);Z(o,e,a),t=!0},p(o,a){if(a[0]&241648){i=Bt(o[7]);let l;for(l=0;l<i.length;l+=1){const h=Hm(o,i,l);r[l]?(r[l].p(h,a),de(r[l],1)):(r[l]=jm(h),r[l].c(),de(r[l],1),r[l].m(e.parentNode,e))}for(bt(),l=i.length;l<r.length;l+=1)s(l);wt()}},i(o){if(!t){for(let a=0;a<i.length;a+=1)de(r[a]);t=!0}},o(o){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)Ie(r[a]);t=!1},d(o){o&&_(e),ui(r,o)}}}function kL(n){let e,t,i,r=n[42]+1+"",s,o,a,l,h,d,m,v,k,w;function E(...O){return n[30](n[42],...O)}function I(...O){return n[31](n[42],...O)}function M(...O){return n[32](n[42],...O)}let C=n[6]&&n[6].length>3&&qm(n),D=n[5][n[42]]&&Zm(n);return{c(){e=A("div"),t=A("div"),i=A("p"),s=he(r),o=ee(),a=A("input"),h=ee(),C&&C.c(),d=ee(),m=A("div"),D&&D.c(),this.h()},l(O){e=R(O,"DIV",{class:!0});var P=T(e);t=R(P,"DIV",{class:!0});var F=T(t);i=R(F,"P",{style:!0,class:!0});var V=T(i);s=fe(V,r),V.forEach(_),o=te(F),a=R(F,"INPUT",{style:!0,class:!0,type:!0}),h=te(F),C&&C.l(F),F.forEach(_),d=te(P),m=R(P,"DIV",{class:!0});var $=T(m);D&&D.l($),$.forEach(_),P.forEach(_),this.h()},h(){var O;B(i,"color","#aaa"),B(i,"padding","6px 8px 4px 6px"),B(i,"width","32px"),B(i,"text-align","right"),B(i,"font-size","14px"),g(i,"class","svelte-t1uufd"),B(a,"width","100%"),B(a,"font-family","monospace"),B(a,"font-size","16px"),B(a,"padding-left","8px"),g(a,"class","grow svelte-t1uufd"),g(a,"type","text"),a.value=l=((O=n[6][n[42]])==null?void 0:O.toString())||"",g(t,"class","input-container row grow svelte-t1uufd"),g(m,"class","mgrs-errors-container column svelte-t1uufd"),g(e,"class","input-container-wrapper column grow svelte-t1uufd")},m(O,P){Z(O,e,P),p(e,t),p(t,i),p(i,s),p(t,o),p(t,a),p(t,h),C&&C.m(t,null),p(e,d),p(e,m),D&&D.m(m,null),v=!0,k||(w=[nt(a,"input",function(){Eo(n[4])&&n[4].apply(this,arguments)}),nt(a,"keydown",E),nt(a,"blur",I),nt(a,"focus",M)],k=!0)},p(O,P){var F;n=O,(!v||P[0]&64&&l!==(l=((F=n[6][n[42]])==null?void 0:F.toString())||"")&&a.value!==l)&&(a.value=l),n[6]&&n[6].length>3?C?(C.p(n,P),P[0]&64&&de(C,1)):(C=qm(n),C.c(),de(C,1),C.m(t,null)):C&&(bt(),Ie(C,1,1,()=>{C=null}),wt()),n[5][n[42]]?D?D.p(n,P):(D=Zm(n),D.c(),D.m(m,null)):D&&(D.d(1),D=null)},i(O){v||(de(C),v=!0)},o(O){Ie(C),v=!1},d(O){O&&_(e),C&&C.d(),D&&D.d(),k=!1,Bn(w)}}}function EL(n){let e,t,i=n[42]+1+"",r,s,o,a,l,h,d,m,v,k,w;function E(...F){return n[23](n[42],...F)}function I(...F){return n[24](n[42],...F)}function M(...F){return n[25](n[42],...F)}function C(...F){return n[26](n[42],...F)}function D(...F){return n[27](n[42],...F)}function O(...F){return n[28](n[42],...F)}let P=n[7]&&n[7].length>3&&Ym(n);return{c(){e=A("div"),t=A("p"),r=he(i),s=ee(),o=A("input"),l=ee(),h=A("input"),m=ee(),P&&P.c(),this.h()},l(F){e=R(F,"DIV",{class:!0});var V=T(e);t=R(V,"P",{style:!0,class:!0});var $=T(t);r=fe($,i),$.forEach(_),s=te(V),o=R(V,"INPUT",{style:!0,class:!0,type:!0}),l=te(V),h=R(V,"INPUT",{style:!0,class:!0,type:!0}),m=te(V),P&&P.l(V),V.forEach(_),this.h()},h(){B(t,"color","#aaa"),B(t,"padding","6px 8px 4px 6px"),B(t,"width","32px"),B(t,"text-align","right"),B(t,"font-size","14px"),g(t,"class","svelte-t1uufd"),B(o,"width","0"),B(o,"font-family","monospace"),B(o,"font-size","16px"),g(o,"class","grow svelte-t1uufd"),g(o,"type","text"),o.value=a=n[40].lat.toFixed(6),B(h,"width","0"),B(h,"font-family","monospace"),B(h,"font-size","16px"),g(h,"class","grow svelte-t1uufd"),g(h,"type","text"),h.value=d=n[40].lng.toFixed(6),g(e,"class","input-container row grow svelte-t1uufd")},m(F,V){Z(F,e,V),p(e,t),p(t,r),p(e,s),p(e,o),p(e,l),p(e,h),p(e,m),P&&P.m(e,null),v=!0,k||(w=[nt(o,"keydown",E),nt(o,"blur",I),nt(o,"focus",M),nt(h,"keydown",C),nt(h,"blur",D),nt(h,"focus",O)],k=!0)},p(F,V){n=F,(!v||V[0]&128&&a!==(a=n[40].lat.toFixed(6))&&o.value!==a)&&(o.value=a),(!v||V[0]&128&&d!==(d=n[40].lng.toFixed(6))&&h.value!==d)&&(h.value=d),n[7]&&n[7].length>3?P?(P.p(n,V),V[0]&128&&de(P,1)):(P=Ym(n),P.c(),de(P,1),P.m(e,null)):P&&(bt(),Ie(P,1,1,()=>{P=null}),wt())},i(F){v||(de(P),v=!0)},o(F){Ie(P),v=!1},d(F){F&&_(e),P&&P.d(),k=!1,Bn(w)}}}function qm(n){let e,t;function i(){return n[33](n[42])}return e=new fn({props:{onclick:i,class:"delete row center-cross center",styleInner:"height: 100%;",$$slots:{default:[SL]},$$scope:{ctx:n}}}),{c(){st(e.$$.fragment)},l(r){ot(e.$$.fragment,r)},m(r,s){at(e,r,s),t=!0},p(r,s){n=r;const o={};s[1]&4096&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(r){t||(de(e.$$.fragment,r),t=!0)},o(r){Ie(e.$$.fragment,r),t=!1},d(r){lt(e,r)}}}function SL(n){let e,t;return{c(){e=Re("svg"),t=Re("path"),this.h()},l(i){e=Oe(i,"svg",{style:!0,xmlns:!0,x:!0,y:!0,width:!0,height:!0,viewBox:!0,class:!0});var r=T(e);t=Oe(r,"path",{d:!0,class:!0});var s=T(t);s.forEach(_),r.forEach(_),this.h()},h(){g(t,"d","M 15.125 12.28125 L 12.28125 15.125 L 22.21875 25 L 12.28125 34.875 L 15.125 37.71875 L 25.0625 27.84375 L 35 37.71875 L 37.8125 34.875 L 27.90625 25 L 37.8125 15.125 L 35 12.28125 L 25.0625 22.15625 Z"),g(t,"class","svelte-t1uufd"),B(e,"margin-inline","7px"),B(e,"margin-block","auto"),B(e,"width","18px"),B(e,"height","18px"),B(e,"fill","#d88"),g(e,"xmlns","http://www.w3.org/2000/svg"),g(e,"x","0px"),g(e,"y","0px"),g(e,"width","100"),g(e,"height","100"),g(e,"viewBox","0 0 50 50"),g(e,"class","svelte-t1uufd")},m(i,r){Z(i,e,r),p(e,t)},p:$e,d(i){i&&_(e)}}}function Zm(n){let e,t=n[5][n[42]]+"",i;return{c(){e=A("p"),i=he(t),this.h()},l(r){e=R(r,"P",{class:!0});var s=T(e);i=fe(s,t),s.forEach(_),this.h()},h(){g(e,"class","error-message grow svelte-t1uufd")},m(r,s){Z(r,e,s),p(e,i)},p(r,s){s[0]&32&&t!==(t=r[5][r[42]]+"")&&Ee(i,t)},d(r){r&&_(e)}}}function Ym(n){let e,t;function i(){return n[29](n[42])}return e=new fn({props:{onclick:i,class:"delete row center-cross center",styleInner:"height: 100%;",$$slots:{default:[IL]},$$scope:{ctx:n}}}),{c(){st(e.$$.fragment)},l(r){ot(e.$$.fragment,r)},m(r,s){at(e,r,s),t=!0},p(r,s){n=r;const o={};s[1]&4096&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(r){t||(de(e.$$.fragment,r),t=!0)},o(r){Ie(e.$$.fragment,r),t=!1},d(r){lt(e,r)}}}function IL(n){let e,t;return{c(){e=Re("svg"),t=Re("path"),this.h()},l(i){e=Oe(i,"svg",{style:!0,xmlns:!0,x:!0,y:!0,width:!0,height:!0,viewBox:!0,class:!0});var r=T(e);t=Oe(r,"path",{d:!0,class:!0}),T(t).forEach(_),r.forEach(_),this.h()},h(){g(t,"d","M 15.125 12.28125 L 12.28125 15.125 L 22.21875 25 L 12.28125 34.875 L 15.125 37.71875 L 25.0625 27.84375 L 35 37.71875 L 37.8125 34.875 L 27.90625 25 L 37.8125 15.125 L 35 12.28125 L 25.0625 22.15625 Z"),g(t,"class","svelte-t1uufd"),B(e,"margin-inline","7px"),B(e,"margin-block","auto"),B(e,"width","18px"),B(e,"height","18px"),B(e,"fill","#d88"),g(e,"xmlns","http://www.w3.org/2000/svg"),g(e,"x","0px"),g(e,"y","0px"),g(e,"width","100"),g(e,"height","100"),g(e,"viewBox","0 0 50 50"),g(e,"class","svelte-t1uufd")},m(i,r){Z(i,e,r),p(e,t)},p:$e,d(i){i&&_(e)}}}function jm(n){let e,t,i,r,s,o,a,l;const h=[EL,kL],d=[];function m(k,w){return k[9]?1:0}t=m(n),i=d[t]=h[t](n);function v(){return n[34](n[42])}return{c(){e=A("div"),i.c(),r=ee(),this.h()},l(k){e=R(k,"DIV",{class:!0});var w=T(e);i.l(w),r=te(w),w.forEach(_),this.h()},h(){g(e,"class",s="polygon-point row center-cross g8 width100 "+(n[8]==n[42]?"highlighted":"")+" svelte-t1uufd")},m(k,w){Z(k,e,w),d[t].m(e,null),p(e,r),o=!0,a||(l=[nt(e,"mouseenter",v),nt(e,"mouseleave",n[35])],a=!0)},p(k,w){n=k;let E=t;t=m(n),t===E?d[t].p(n,w):(bt(),Ie(d[E],1,1,()=>{d[E]=null}),wt(),i=d[t],i?i.p(n,w):(i=d[t]=h[t](n),i.c()),de(i,1),i.m(e,r)),(!o||w[0]&256&&s!==(s="polygon-point row center-cross g8 width100 "+(n[8]==n[42]?"highlighted":"")+" svelte-t1uufd"))&&g(e,"class",s)},i(k){o||(de(i),o=!0)},o(k){Ie(i),o=!1},d(k){k&&_(e),d[t].d(),a=!1,Bn(l)}}}function ML(n){let e,t,i,r,s="+",o,a,l,h=n[7]&&Um(n);return{c(){e=A("div"),h&&h.c(),t=ee(),i=A("div"),r=A("button"),r.textContent=s,this.h()},l(d){e=R(d,"DIV",{class:!0});var m=T(e);h&&h.l(m),t=te(m),i=R(m,"DIV",{class:!0,style:!0});var v=T(i);r=R(v,"BUTTON",{style:!0,"data-svelte-h":!0}),rn(r)!=="svelte-1u4zd0r"&&(r.textContent=s),v.forEach(_),m.forEach(_),this.h()},h(){B(r,"width","32px"),B(r,"height","32px"),B(r,"padding","0"),g(i,"class","row"),B(i,"justify-content","end"),B(i,"padding","0px"),g(e,"class","column g8")},m(d,m){Z(d,e,m),h&&h.m(e,null),p(e,t),p(e,i),p(i,r),o=!0,a||(l=[nt(r,"click",n[14]),nt(e,"mouseleave",n[36])],a=!0)},p(d,m){d[7]?h?(h.p(d,m),m[0]&128&&de(h,1)):(h=Um(d),h.c(),de(h,1),h.m(e,t)):h&&(bt(),Ie(h,1,1,()=>{h=null}),wt())},i(d){o||(de(h),o=!0)},o(d){Ie(h),o=!1},d(d){d&&_(e),h&&h.d(),a=!1,Bn(l)}}}function TL(n,e,t){let i,r,s,o,a,l=$e,h=()=>(l(),l=Dt(F,we=>t(6,a=we)),F),d,m=$e,v=()=>(m(),m=Dt(P,we=>t(7,d=we)),P),k,w=$e,E=()=>(w(),w=Dt(V,we=>t(8,k=we)),V),I,M=$e,C=()=>(M(),M=Dt(O,we=>t(9,I=we)),O);He(n,Nn,we=>t(38,i=we)),n.$$.on_destroy.push(()=>l()),n.$$.on_destroy.push(()=>m()),n.$$.on_destroy.push(()=>w()),n.$$.on_destroy.push(()=>M());let{map:D}=e,{displayAsMgrs:O}=e;C();let{polygonCoordinates:P}=e;v();let{polygonCoordinatesMgrs:F}=e;h();let{highlightedPointIndex:V}=e;E();let{updateGeofence:$}=e,{enforceInputInteger:G}=e,{formatMgrsOnInput:U}=e;const H=new Ot(null);He(n,H,we=>t(21,r=we));const j=new Ot(null);He(n,j,we=>t(22,s=we));const Q=i("createGeofence.formatError"),W=new Ot([]);He(n,W,we=>t(5,o=we));let Y={};function q(we){P.update(Te=>Te.length>3?Te.filter((Ae,Ne)=>Ne!==we):Te),F.set(P.current.map(_s)),W.update(Te=>Te.length>3?Te.filter((Ae,Ne)=>Ne!==we):Te),$()}function ne(){const we=P.current;let Te;if(we.length>=2){const Ae=we[we.length-1],Ne=we[we.length-2];Te={lat:(Ae.lat+Ne.lat)/2,lng:(Ae.lng+Ne.lng)/2},P.update(De=>[...De.slice(0,De.length-1),Te,De[De.length-1]])}else Te=D.getCenter(),P.update(Ae=>[...Ae,Te]);F.set(P.current.map(_s)),W.update(Ae=>[...Ae.slice(0,we.length-1),null,Ae[we.length-1]??null]),$()}function J(we,Te){P.update(Ae=>Ae.map((Ne,De)=>De===we?{...Ne,lat:+Te.target.value}:Ne)),$()}function ge(we,Te){P.update(Ae=>Ae.map((Ne,De)=>De===we?{...Ne,lng:+Te.target.value}:Ne)),$()}function ie(we,Te){Y[we]&&clearTimeout(Y[we]);const Ae=Te.target,Ne=Ae.value.split(" ").slice(-2).join(""),De=Ae.value.trim().toUpperCase();let _t=null,Fe=!1;try{if(Ne.length>10)throw new Error;const Pe=Iv.parse(De);F.update(je=>{var Ue;const Ve=[...je];return((Ue=Ve[we])==null?void 0:Ue.toString())!==Pe.toString()&&(Ve[we]=Pe,Fe=!0),Ve}),Ae.value=Pe.toString()}catch{_t=i(Q),F.subscribe(je=>{Ae.value=je[we]})}W.update(Pe=>{const je=[...Pe];return je[we]=_t,je}),Te.type==="blur"&&_t&&(Y[we]=setTimeout(()=>{W.update(Pe=>{const je=[...Pe];return je[we]=null,je})},2e3)),Fe&&!_t&&(P.set(F.current.map(Da)),$())}const le=(we,Te)=>Te.key==="Enter"&&J(we,Te),pe=(we,Te)=>{j.set(null),J(we,Te)},ye=(we,Te)=>{j.set(we),Te.target.select()},be=(we,Te)=>Te.key==="Enter"&&ge(we,Te),re=(we,Te)=>{j.set(null),ge(we,Te)},me=(we,Te)=>{j.set(we),Te.target.select()},ke=we=>q(we),X=(we,Te)=>Te.key==="Enter"&&ie(we,Te),ue=(we,Te)=>{j.set(null),ie(we,Te)},_e=(we,Te)=>{j.set(we),Te.target.select()},oe=we=>q(we),ae=we=>H.set(we),Se=()=>H.set(null),Me=()=>{H.set(null)};return n.$$set=we=>{"map"in we&&t(18,D=we.map),"displayAsMgrs"in we&&C(t(0,O=we.displayAsMgrs)),"polygonCoordinates"in we&&v(t(1,P=we.polygonCoordinates)),"polygonCoordinatesMgrs"in we&&h(t(2,F=we.polygonCoordinatesMgrs)),"highlightedPointIndex"in we&&E(t(3,V=we.highlightedPointIndex)),"updateGeofence"in we&&t(19,$=we.updateGeofence),"enforceInputInteger"in we&&t(20,G=we.enforceInputInteger),"formatMgrsOnInput"in we&&t(4,U=we.formatMgrsOnInput)},n.$$.update=()=>{if(n.$$.dirty[0]&96){const we=(a==null?void 0:a.length)||0,Te=(o==null?void 0:o.length)||0;we!==Te&&W.set(Array(we).fill(null))}n.$$.dirty[0]&6291464&&V.set(s!==null?s:r)},[O,P,F,V,U,o,a,d,k,I,H,j,W,q,ne,J,ge,ie,D,$,G,r,s,le,pe,ye,be,re,me,ke,X,ue,_e,oe,ae,Se,Me]}class LL extends Wt{constructor(e){super(),Xt(this,e,TL,ML,zt,{map:18,displayAsMgrs:0,polygonCoordinates:1,polygonCoordinatesMgrs:2,highlightedPointIndex:3,updateGeofence:19,enforceInputInteger:20,formatMgrsOnInput:4},null,[-1,-1])}}function CL(n){let e,t,i,r;return{c(){e=A("input"),this.h()},l(s){e=R(s,"INPUT",{style:!0,class:!0,type:!0}),this.h()},h(){var s;B(e,"padding-inline","8px"),B(e,"width","100%"),B(e,"font-family","monospace"),B(e,"font-size","16px"),g(e,"class","grow svelte-1slcvaj"),g(e,"type","text"),e.value=t=((s=n[9])==null?void 0:s.toString())||""},m(s,o){Z(s,e,o),i||(r=[nt(e,"input",function(){Eo(n[5])&&n[5].apply(this,arguments)}),nt(e,"keydown",n[24]),nt(e,"blur",n[25]),nt(e,"focus",RL)],i=!0)},p(s,o){var a;n=s,o&512&&t!==(t=((a=n[9])==null?void 0:a.toString())||"")&&e.value!==t&&(e.value=t)},d(s){s&&_(e),i=!1,Bn(r)}}}function PL(n){let e,t,i,r,s,o,a;return{c(){e=A("input"),i=ee(),r=A("input"),this.h()},l(l){e=R(l,"INPUT",{style:!0,class:!0,type:!0}),i=te(l),r=R(l,"INPUT",{style:!0,class:!0,type:!0}),this.h()},h(){B(e,"width","0"),B(e,"font-family","monospace"),B(e,"font-size","16px"),g(e,"class","grow svelte-1slcvaj"),g(e,"type","text"),e.value=t=n[8].lat.toFixed(6),B(r,"width","0"),B(r,"font-family","monospace"),B(r,"font-size","16px"),g(r,"class","grow svelte-1slcvaj"),g(r,"type","text"),r.value=s=n[8].lng.toFixed(6)},m(l,h){Z(l,e,h),Z(l,i,h),Z(l,r,h),o||(a=[nt(e,"keydown",n[20]),nt(e,"blur",n[21]),nt(e,"focus",DL),nt(r,"keydown",n[22]),nt(r,"blur",n[23]),nt(r,"focus",AL)],o=!0)},p(l,h){h&256&&t!==(t=l[8].lat.toFixed(6))&&e.value!==t&&(e.value=t),h&256&&s!==(s=l[8].lng.toFixed(6))&&r.value!==s&&(r.value=s)},d(l){l&&(_(e),_(i),_(r)),o=!1,Bn(a)}}}function Wm(n){let e,t=n[10]&&Xm(n);return{c(){e=A("div"),t&&t.c(),this.h()},l(i){e=R(i,"DIV",{class:!0});var r=T(e);t&&t.l(r),r.forEach(_),this.h()},h(){g(e,"class","mgrs-errors-container column svelte-1slcvaj")},m(i,r){Z(i,e,r),t&&t.m(e,null)},p(i,r){i[10]?t?t.p(i,r):(t=Xm(i),t.c(),t.m(e,null)):t&&(t.d(1),t=null)},d(i){i&&_(e),t&&t.d()}}}function Xm(n){let e,t;return{c(){e=A("p"),t=he(n[10]),this.h()},l(i){e=R(i,"P",{class:!0});var r=T(e);t=fe(r,n[10]),r.forEach(_),this.h()},h(){g(e,"class","error-message grow svelte-1slcvaj")},m(i,r){Z(i,e,r),p(e,t)},p(i,r){r&1024&&Ee(t,i[10])},d(i){i&&_(e)}}}function NL(n){let e,t,i,r,s=n[6]("createGeofence.midPoint")+"",o,a,l,h,d,m,v=n[6]("createGeofence.radius")+"",k,w,E,I,M,C,D="m",O,P;function F(U,H){return U[7]?CL:PL}let V=F(n),$=V(n),G=n[7]&&Wm(n);return{c(){e=A("div"),t=A("div"),i=A("div"),r=A("p"),o=he(s),a=ee(),$.c(),l=ee(),G&&G.c(),h=ee(),d=A("div"),m=A("p"),k=he(v),w=ee(),E=A("input"),M=ee(),C=A("p"),C.textContent=D,this.h()},l(U){e=R(U,"DIV",{class:!0});var H=T(e);t=R(H,"DIV",{class:!0});var j=T(t);i=R(j,"DIV",{class:!0});var Q=T(i);r=R(Q,"P",{style:!0,class:!0});var W=T(r);o=fe(W,s),W.forEach(_),a=te(Q),$.l(Q),Q.forEach(_),l=te(j),G&&G.l(j),j.forEach(_),h=te(H),d=R(H,"DIV",{class:!0});var Y=T(d);m=R(Y,"P",{style:!0,class:!0});var q=T(m);k=fe(q,v),q.forEach(_),w=te(Y),E=R(Y,"INPUT",{style:!0,class:!0,type:!0}),M=te(Y),C=R(Y,"P",{style:!0,class:!0,"data-svelte-h":!0}),rn(C)!=="svelte-1ib1edb"&&(C.textContent=D),Y.forEach(_),H.forEach(_),this.h()},h(){B(r,"color","#aaa"),B(r,"padding","6px 8px 4px 6px"),B(r,"width","110px"),B(r,"text-align","left"),B(r,"font-size","14px"),B(r,"text-transform","uppercase"),g(r,"class","svelte-1slcvaj"),g(i,"class","input-container row grow svelte-1slcvaj"),g(t,"class","input-container=wrapper column"),B(m,"color","#aaa"),B(m,"padding","6px 8px 4px 6px"),B(m,"width","110px"),B(m,"text-align","left"),B(m,"font-size","14px"),B(m,"text-transform","uppercase"),g(m,"class","svelte-1slcvaj"),B(E,"width","0"),B(E,"font-family","monospace"),B(E,"font-size","16px"),g(E,"class","grow svelte-1slcvaj"),g(E,"type","text"),E.value=I=n[11].toFixed(0),B(C,"color","#888"),B(C,"text-align","right"),B(C,"padding","5px 8px"),g(C,"class","svelte-1slcvaj"),g(d,"class","input-container row grow svelte-1slcvaj"),g(e,"class","column g8")},m(U,H){Z(U,e,H),p(e,t),p(t,i),p(i,r),p(r,o),p(i,a),$.m(i,null),p(t,l),G&&G.m(t,null),p(e,h),p(e,d),p(d,m),p(m,k),p(d,w),p(d,E),p(d,M),p(d,C),O||(P=[nt(E,"keydown",n[26]),nt(E,"blur",n[27]),nt(E,"focus",OL),nt(E,"input",n[28])],O=!0)},p(U,[H]){H&64&&s!==(s=U[6]("createGeofence.midPoint")+"")&&Ee(o,s),V===(V=F(U))&&$?$.p(U,H):($.d(1),$=V(U),$&&($.c(),$.m(i,null))),U[7]?G?G.p(U,H):(G=Wm(U),G.c(),G.m(t,null)):G&&(G.d(1),G=null),H&64&&v!==(v=U[6]("createGeofence.radius")+"")&&Ee(k,v),H&2048&&I!==(I=U[11].toFixed(0))&&E.value!==I&&(E.value=I)},i:$e,o:$e,d(U){U&&_(e),$.d(),G&&G.d(),O=!1,Bn(P)}}}const DL=n=>n.target.select(),AL=n=>n.target.select(),RL=n=>{n.target.select()},OL=n=>n.target.select();function xL(n,e,t){let i,r,s=$e,o=()=>(s(),s=Dt(C,me=>t(7,r=me)),C),a,l=$e,h=()=>(l(),l=Dt(D,me=>t(8,a=me)),D),d,m=$e,v=()=>(m(),m=Dt(O,me=>t(9,d=me)),O),k,w,E=$e,I=()=>(E(),E=Dt(P,me=>t(11,w=me)),P);He(n,Nn,me=>t(6,i=me)),n.$$.on_destroy.push(()=>s()),n.$$.on_destroy.push(()=>l()),n.$$.on_destroy.push(()=>m()),n.$$.on_destroy.push(()=>E());let{map:M}=e,{displayAsMgrs:C}=e;o();let{circleCoordinate:D}=e;h();let{circleCoordinateMgrs:O}=e;v();let{circleRadius:P}=e;I();let{highlightedPointIndex:F}=e,{updateGeofence:V}=e,{enforceInputInteger:$}=e,{formatMgrsOnInput:G}=e;const U=i("createGeofence.formatError"),H=new Ot(null);He(n,H,me=>t(10,k=me));let j=null;function Q(me){D.update(ke=>({...ke,lat:+me.target.value})),V()}function W(me){D.update(ke=>({...ke,lng:+me.target.value})),V()}function Y(me){j&&clearTimeout(j);const ke=me.target,X=ke.value.split(" ").slice(-2).join(""),ue=ke.value.trim().toUpperCase();let _e=null,oe=!1;try{if(X.length>10)throw new Error;const ae=Iv.parse(ue);O.update(Se=>(Se==null?void 0:Se.toString())!==ae.toString()?(oe=!0,ae):Se),ke.value=ae.toString()}catch{_e=i(U),O.subscribe(Se=>{Se&&(ke.value=Se.toString())})()}H.set(_e),me.type==="blur"&&_e&&(j=setTimeout(()=>{H.set(null)},2e3)),oe&&!_e&&(D.set(Da(O.current)),V())}function q(me){let ke=Math.max(+parseInt(me.target.value),Ds);isNaN(ke)||ke<Ds?ke=Ds:ke>xl&&(ke=xl),P.set(ke),me.target.value=ke,V()}const ne=me=>me.key==="Enter"&&Q(me),J=me=>Q(me),ge=me=>me.key==="Enter"&&W(me),ie=me=>W(me),le=me=>me.key==="Enter"&&Y(me),pe=me=>{Y(me)},ye=me=>me.key==="Enter"&&q(me),be=me=>q(me),re=me=>$(me);return n.$$set=me=>{"map"in me&&t(17,M=me.map),"displayAsMgrs"in me&&o(t(0,C=me.displayAsMgrs)),"circleCoordinate"in me&&h(t(1,D=me.circleCoordinate)),"circleCoordinateMgrs"in me&&v(t(2,O=me.circleCoordinateMgrs)),"circleRadius"in me&&I(t(3,P=me.circleRadius)),"highlightedPointIndex"in me&&t(18,F=me.highlightedPointIndex),"updateGeofence"in me&&t(19,V=me.updateGeofence),"enforceInputInteger"in me&&t(4,$=me.enforceInputInteger),"formatMgrsOnInput"in me&&t(5,G=me.formatMgrsOnInput)},[C,D,O,P,$,G,i,r,a,d,k,w,H,Q,W,Y,q,M,F,V,ne,J,ge,ie,le,pe,ye,be,re]}class FL extends Wt{constructor(e){super(),Xt(this,e,xL,NL,zt,{map:17,displayAsMgrs:0,circleCoordinate:1,circleCoordinateMgrs:2,circleRadius:3,highlightedPointIndex:18,updateGeofence:19,enforceInputInteger:4,formatMgrsOnInput:5})}}function Km(n,e,t){const i=n.slice();i[17]=e[t];const r=i[11]===i[17];return i[18]=r,i}function Jm(n){let e,t=n[12]("createGeofence.shape."+n[17])+"",i,r,s,o,a;function l(){return n[15](n[17])}return{c(){e=A("button"),i=he(t),r=ee(),this.h()},l(h){e=R(h,"BUTTON",{class:!0});var d=T(e);i=fe(d,t),r=te(d),d.forEach(_),this.h()},h(){g(e,"class",s="grow "+(n[18]?"selected":"outline"))},m(h,d){Z(h,e,d),p(e,i),p(e,r),o||(a=nt(e,"click",l),o=!0)},p(h,d){n=h,d&4096&&t!==(t=n[12]("createGeofence.shape."+n[17])+"")&&Ee(i,t),d&2048&&s!==(s="grow "+(n[18]?"selected":"outline"))&&g(e,"class",s)},d(h){h&&_(e),o=!1,a()}}}function BL(n){let e,t,i,r,s,o,a,l,h,d,m,v,k,w,E,I,M,C,D;return{c(){e=A("p"),t=he("LAT-LON"),r=ee(),s=Re("svg"),o=Re("g"),a=Re("g"),l=Re("g"),h=Re("g"),d=Re("g"),m=Re("rect"),v=Re("g"),k=Re("g"),w=Re("path"),E=Re("path"),I=ee(),M=A("p"),C=he("MGRS"),this.h()},l(O){e=R(O,"P",{class:!0});var P=T(e);t=fe(P,"LAT-LON"),P.forEach(_),r=te(O),s=Oe(O,"svg",{style:!0,viewBox:!0,xmlns:!0,fill:!0});var F=T(s);o=Oe(F,"g",{id:!0,"stroke-width":!0}),T(o).forEach(_),a=Oe(F,"g",{id:!0,"stroke-linecap":!0,"stroke-linejoin":!0}),T(a).forEach(_),l=Oe(F,"g",{id:!0});var V=T(l);h=Oe(V,"g",{id:!0,"data-name":!0});var $=T(h);d=Oe($,"g",{id:!0,"data-name":!0});var G=T(d);m=Oe(G,"rect",{width:!0,height:!0,fill:!0}),T(m).forEach(_),G.forEach(_),v=Oe($,"g",{id:!0,"data-name":!0});var U=T(v);k=Oe(U,"g",{});var H=T(k);w=Oe(H,"path",{d:!0}),T(w).forEach(_),E=Oe(H,"path",{d:!0}),T(E).forEach(_),H.forEach(_),U.forEach(_),$.forEach(_),V.forEach(_),F.forEach(_),I=te(O),M=R(O,"P",{class:!0});var j=T(M);C=fe(j,"MGRS"),j.forEach(_),this.h()},h(){g(e,"class",i=n[13]?"":"selected"),g(o,"id","SVGRepo_bgCarrier"),g(o,"stroke-width","0"),g(a,"id","SVGRepo_tracerCarrier"),g(a,"stroke-linecap","round"),g(a,"stroke-linejoin","round"),g(m,"width","48"),g(m,"height","48"),g(m,"fill","none"),g(d,"id","invisible_box"),g(d,"data-name","invisible box"),g(w,"d","M33.5,23.6a2.1,2.1,0,0,0-2.7-.2,1.9,1.9,0,0,0-.2,3L35.2,31H8a2,2,0,0,0,0,4H35.2l-4.6,4.6a1.9,1.9,0,0,0,.2,3,2.1,2.1,0,0,0,2.7-.2l7.9-8a1.9,1.9,0,0,0,0-2.8Z"),g(E,"d","M14.5,24.4a2.1,2.1,0,0,0,2.7.2,1.9,1.9,0,0,0,.2-3L12.8,17H40a2,2,0,0,0,0-4H12.8l4.6-4.6a1.9,1.9,0,0,0-.2-3,2.1,2.1,0,0,0-2.7.2l-7.9,8a1.9,1.9,0,0,0,0,2.8Z"),g(v,"id","icons_Q2"),g(v,"data-name","icons Q2"),g(h,"id","Layer_2"),g(h,"data-name","Layer 2"),g(l,"id","SVGRepo_iconCarrier"),B(s,"width","12px"),B(s,"height","12px"),B(s,"fill","#aaa"),g(s,"viewBox","0 0 48 48"),g(s,"xmlns","http://www.w3.org/2000/svg"),g(s,"fill","#000000"),g(M,"class",D=n[13]?"selected":"")},m(O,P){Z(O,e,P),p(e,t),Z(O,r,P),Z(O,s,P),p(s,o),p(s,a),p(s,l),p(l,h),p(h,d),p(d,m),p(h,v),p(v,k),p(k,w),p(k,E),Z(O,I,P),Z(O,M,P),p(M,C)},p(O,P){P&8192&&i!==(i=O[13]?"":"selected")&&g(e,"class",i),P&8192&&D!==(D=O[13]?"selected":"")&&g(M,"class",D)},d(O){O&&(_(e),_(r),_(s),_(I),_(M))}}}function $L(n){let e,t;return e=new FL({props:{map:n[0],displayAsMgrs:n[2],circleCoordinate:n[5],circleCoordinateMgrs:n[6],circleRadius:n[7],highlightedPointIndex:n[8],updateGeofence:n[9],enforceInputInteger:n[10],formatMgrsOnInput:t4}}),{c(){st(e.$$.fragment)},l(i){ot(e.$$.fragment,i)},m(i,r){at(e,i,r),t=!0},p(i,r){const s={};r&1&&(s.map=i[0]),r&4&&(s.displayAsMgrs=i[2]),r&32&&(s.circleCoordinate=i[5]),r&64&&(s.circleCoordinateMgrs=i[6]),r&128&&(s.circleRadius=i[7]),r&256&&(s.highlightedPointIndex=i[8]),r&512&&(s.updateGeofence=i[9]),r&1024&&(s.enforceInputInteger=i[10]),e.$set(s)},i(i){t||(de(e.$$.fragment,i),t=!0)},o(i){Ie(e.$$.fragment,i),t=!1},d(i){lt(e,i)}}}function VL(n){let e,t;return e=new LL({props:{map:n[0],displayAsMgrs:n[2],polygonCoordinates:n[3],polygonCoordinatesMgrs:n[4],highlightedPointIndex:n[8],updateGeofence:n[9],enforceInputInteger:n[10],formatMgrsOnInput:t4}}),{c(){st(e.$$.fragment)},l(i){ot(e.$$.fragment,i)},m(i,r){at(e,i,r),t=!0},p(i,r){const s={};r&1&&(s.map=i[0]),r&4&&(s.displayAsMgrs=i[2]),r&8&&(s.polygonCoordinates=i[3]),r&16&&(s.polygonCoordinatesMgrs=i[4]),r&256&&(s.highlightedPointIndex=i[8]),r&512&&(s.updateGeofence=i[9]),r&1024&&(s.enforceInputInteger=i[10]),e.$set(s)},i(i){t||(de(e.$$.fragment,i),t=!0)},o(i){Ie(e.$$.fragment,i),t=!1},d(i){lt(e,i)}}}function zL(n){let e,t,i,r,s,o,a,l,h,d=Bt(Object.values(Fi)),m=[];for(let E=0;E<d.length;E+=1)m[E]=Jm(Km(n,d,E));r=new fn({props:{class:"coord-type row center-cross g8",onclick:n[16],$$slots:{default:[BL]},$$scope:{ctx:n}}});const v=[VL,$L],k=[];function w(E,I){return E[11]==Fi.POLYGON?0:E[11]==Fi.CIRCLE?1:-1}return~(o=w(n))&&(a=k[o]=v[o](n)),{c(){e=A("div");for(let E=0;E<m.length;E+=1)m[E].c();t=ee(),i=A("div"),st(r.$$.fragment),s=ee(),a&&a.c(),l=dt(),this.h()},l(E){e=R(E,"DIV",{class:!0});var I=T(e);for(let C=0;C<m.length;C+=1)m[C].l(I);I.forEach(_),t=te(E),i=R(E,"DIV",{class:!0});var M=T(i);ot(r.$$.fragment,M),M.forEach(_),s=te(E),a&&a.l(E),l=dt(),this.h()},h(){g(e,"class","row g8 w100"),g(i,"class","column center")},m(E,I){Z(E,e,I);for(let M=0;M<m.length;M+=1)m[M]&&m[M].m(e,null);Z(E,t,I),Z(E,i,I),at(r,i,null),Z(E,s,I),~o&&k[o].m(E,I),Z(E,l,I),h=!0},p(E,[I]){if(I&22528){d=Bt(Object.values(Fi));let D;for(D=0;D<d.length;D+=1){const O=Km(E,d,D);m[D]?m[D].p(O,I):(m[D]=Jm(O),m[D].c(),m[D].m(e,null))}for(;D<m.length;D+=1)m[D].d(1);m.length=d.length}const M={};I&4&&(M.onclick=E[16]),I&2105344&&(M.$$scope={dirty:I,ctx:E}),r.$set(M);let C=o;o=w(E),o===C?~o&&k[o].p(E,I):(a&&(bt(),Ie(k[C],1,1,()=>{k[C]=null}),wt()),~o?(a=k[o],a?a.p(E,I):(a=k[o]=v[o](E),a.c()),de(a,1),a.m(l.parentNode,l)):a=null)},i(E){h||(de(r.$$.fragment,E),de(a),h=!0)},o(E){Ie(r.$$.fragment,E),Ie(a),h=!1},d(E){E&&(_(e),_(t),_(i),_(s),_(l)),ui(m,E),lt(r),~o&&k[o].d(E)}}}function t4(n){const e=n.target,t=e.value,i=e.selectionStart||0;let r=t.toUpperCase();const s=(t.substring(0,i).match(/[^\s]/g)||[]).length;let o=r;if(o=o.replace(/^(\d[A-Z])([A-Z]{1})/,"$1 $2"),o=o.replace(/^(\d{2}[A-Z])([A-Z]{1})/,"$1 $2"),o=o.replace(/^(\d{1,2}[A-Z][ \t]*[A-Z]{2})(\d)/,"$1 $2"),t!==o){e.value=o;let a=0,l=0;for(let h=0;h<o.length;h++)if(a++,o[h]!==" "&&l++,l===s){a<o.length&&o[a]===" "&&(i>=t.length||t[i]!==" ")&&a>0&&o[a-1]!==" "&&a++;break}if(!(a===o.length&&l<s&&s>0))if(l<s&&s>0)a=o.length;else if(a===0&&o.length>0&&s>0&&l!==s)a=o.length;else if(s===0&&i>0){a=0;for(let h=0;h<i&&h<o.length&&o[h]===" ";++h)a++}else s===0&&i===0&&(a=0);e.setSelectionRange(a,a)}else r!==t&&(e.value=r,e.setSelectionRange(i,i))}function GL(n,e,t){let i,r=$e,s=()=>(r(),r=Dt(m,$=>t(11,i=$)),m),o,a,l=$e,h=()=>(l(),l=Dt(v,$=>t(13,a=$)),v);He(n,Nn,$=>t(12,o=$)),n.$$.on_destroy.push(()=>r()),n.$$.on_destroy.push(()=>l());let{map:d}=e,{shape:m}=e;s();let{displayAsMgrs:v}=e;h();let{polygonCoordinates:k}=e,{polygonCoordinatesMgrs:w}=e,{circleCoordinate:E}=e,{circleCoordinateMgrs:I}=e,{circleRadius:M}=e,{highlightedPointIndex:C}=e,{updateGeofence:D}=e,{enforceInputInteger:O}=e;function P($){const G=m.current,U=v.current;if($===Fi.POLYGON&&G===Fi.CIRCLE){const H=U?Da(I.current):E.current,j=.005,Q=[{lat:H.lat+j,lng:H.lng+j},{lat:H.lat+j,lng:H.lng-j},{lat:H.lat-j,lng:H.lng-j},{lat:H.lat-j,lng:H.lng+j}];k.set(Q),w.set(Q.map(_s))}else if($===Fi.CIRCLE&&G===Fi.POLYGON){const H=U?w.current.map(Da):k.current;if(H&&H.length>0)try{const j=Bc(H);E.set(j),I.set(_s(j))}catch(j){console.error("Failed to calculate center using getLargestInscribedCircleCenter:",j),H.length>0?(console.warn("Falling back to using the first polygon vertex as the circle center."),E.set(H[0]),I.set(_s(H[0]))):console.warn("Polygon has no vertices, circle center not updated.")}}G!==$&&m.set($),D()}const F=$=>{P($)},V=()=>v.update($=>!$);return n.$$set=$=>{"map"in $&&t(0,d=$.map),"shape"in $&&s(t(1,m=$.shape)),"displayAsMgrs"in $&&h(t(2,v=$.displayAsMgrs)),"polygonCoordinates"in $&&t(3,k=$.polygonCoordinates),"polygonCoordinatesMgrs"in $&&t(4,w=$.polygonCoordinatesMgrs),"circleCoordinate"in $&&t(5,E=$.circleCoordinate),"circleCoordinateMgrs"in $&&t(6,I=$.circleCoordinateMgrs),"circleRadius"in $&&t(7,M=$.circleRadius),"highlightedPointIndex"in $&&t(8,C=$.highlightedPointIndex),"updateGeofence"in $&&t(9,D=$.updateGeofence),"enforceInputInteger"in $&&t(10,O=$.enforceInputInteger)},[d,m,v,k,w,E,I,M,C,D,O,i,o,a,P,F,V]}class HL extends Wt{constructor(e){super(),Xt(this,e,GL,zL,zt,{map:0,shape:1,displayAsMgrs:2,polygonCoordinates:3,polygonCoordinatesMgrs:4,circleCoordinate:5,circleCoordinateMgrs:6,circleRadius:7,highlightedPointIndex:8,updateGeofence:9,enforceInputInteger:10})}}function UL(n){let e,t,i,r,s=n[11]("createGeofence.territory.title")+"",o,a,l,h=n[11]("createGeofence.territory.desc")+"",d,m,v,k;return v=new HL({props:{map:n[0],shape:n[1],displayAsMgrs:n[2],polygonCoordinates:n[3],polygonCoordinatesMgrs:n[4],circleCoordinate:n[5],circleCoordinateMgrs:n[6],circleRadius:n[7],highlightedPointIndex:n[8],updateGeofence:n[9],enforceInputInteger:n[10]}}),{c(){e=A("div"),t=A("div"),i=A("span"),r=A("strong"),o=he(s),a=ee(),l=A("p"),d=he(h),m=ee(),st(v.$$.fragment),this.h()},l(w){e=R(w,"DIV",{class:!0,style:!0});var E=T(e);t=R(E,"DIV",{class:!0});var I=T(t);i=R(I,"SPAN",{style:!0});var M=T(i);r=R(M,"STRONG",{});var C=T(r);o=fe(C,s),C.forEach(_),M.forEach(_),a=te(I),l=R(I,"P",{});var D=T(l);d=fe(D,h),D.forEach(_),I.forEach(_),m=te(E),ot(v.$$.fragment,E),E.forEach(_),this.h()},h(){B(i,"font-size","20px"),g(t,"class","column g8"),g(e,"class","column g16"),B(e,"padding-inline","16px")},m(w,E){Z(w,e,E),p(e,t),p(t,i),p(i,r),p(r,o),p(t,a),p(t,l),p(l,d),p(e,m),at(v,e,null),k=!0},p(w,[E]){(!k||E&2048)&&s!==(s=w[11]("createGeofence.territory.title")+"")&&Ee(o,s),(!k||E&2048)&&h!==(h=w[11]("createGeofence.territory.desc")+"")&&Ee(d,h);const I={};E&1&&(I.map=w[0]),E&2&&(I.shape=w[1]),E&4&&(I.displayAsMgrs=w[2]),E&8&&(I.polygonCoordinates=w[3]),E&16&&(I.polygonCoordinatesMgrs=w[4]),E&32&&(I.circleCoordinate=w[5]),E&64&&(I.circleCoordinateMgrs=w[6]),E&128&&(I.circleRadius=w[7]),E&256&&(I.highlightedPointIndex=w[8]),E&512&&(I.updateGeofence=w[9]),E&1024&&(I.enforceInputInteger=w[10]),v.$set(I)},i(w){k||(de(v.$$.fragment,w),k=!0)},o(w){Ie(v.$$.fragment,w),k=!1},d(w){w&&_(e),lt(v)}}}function qL(n,e,t){let i;He(n,Nn,E=>t(11,i=E));let{map:r}=e,{shape:s}=e,{displayAsMgrs:o}=e,{polygonCoordinates:a}=e,{polygonCoordinatesMgrs:l}=e,{circleCoordinate:h}=e,{circleCoordinateMgrs:d}=e,{circleRadius:m}=e,{highlightedPointIndex:v}=e,{updateGeofence:k}=e,{enforceInputInteger:w}=e;return n.$$set=E=>{"map"in E&&t(0,r=E.map),"shape"in E&&t(1,s=E.shape),"displayAsMgrs"in E&&t(2,o=E.displayAsMgrs),"polygonCoordinates"in E&&t(3,a=E.polygonCoordinates),"polygonCoordinatesMgrs"in E&&t(4,l=E.polygonCoordinatesMgrs),"circleCoordinate"in E&&t(5,h=E.circleCoordinate),"circleCoordinateMgrs"in E&&t(6,d=E.circleCoordinateMgrs),"circleRadius"in E&&t(7,m=E.circleRadius),"highlightedPointIndex"in E&&t(8,v=E.highlightedPointIndex),"updateGeofence"in E&&t(9,k=E.updateGeofence),"enforceInputInteger"in E&&t(10,w=E.enforceInputInteger)},[r,s,o,a,l,h,d,m,v,k,w,i]}class ZL extends Wt{constructor(e){super(),Xt(this,e,qL,UL,zt,{map:0,shape:1,displayAsMgrs:2,polygonCoordinates:3,polygonCoordinatesMgrs:4,circleCoordinate:5,circleCoordinateMgrs:6,circleRadius:7,highlightedPointIndex:8,updateGeofence:9,enforceInputInteger:10})}}function YL(n){let e,t,i,r,s=n[1]("createGeofence.description.title")+"",o,a,l,h=n[1]("createGeofence.description.desc")+"",d,m,v,k,w=n[1]("createGeofence.description.label")+"",E,I,M,C,D,O;return{c(){e=A("div"),t=A("div"),i=A("span"),r=A("strong"),o=he(s),a=ee(),l=A("p"),d=he(h),m=ee(),v=A("div"),k=A("label"),E=he(w),I=ee(),M=A("textarea"),this.h()},l(P){e=R(P,"DIV",{class:!0,style:!0});var F=T(e);t=R(F,"DIV",{class:!0});var V=T(t);i=R(V,"SPAN",{style:!0});var $=T(i);r=R($,"STRONG",{});var G=T(r);o=fe(G,s),G.forEach(_),$.forEach(_),a=te(V),l=R(V,"P",{});var U=T(l);d=fe(U,h),U.forEach(_),V.forEach(_),m=te(F),v=R(F,"DIV",{class:!0,style:!0});var H=T(v);k=R(H,"LABEL",{style:!0,for:!0});var j=T(k);E=fe(j,w),j.forEach(_),I=te(H),M=R(H,"TEXTAREA",{style:!0,spellcheck:!0,maxlength:!0,rows:!0}),T(M).forEach(_),H.forEach(_),F.forEach(_),this.h()},h(){B(i,"font-size","20px"),g(t,"class","column g8"),B(k,"color","#666"),B(k,"font-size","14px"),g(k,"for","geofence-name"),B(M,"flex","2"),B(M,"resize","none"),g(M,"spellcheck","false"),M.value=C=n[2]||"",g(M,"maxlength","200"),g(M,"rows","6"),g(v,"class","column"),B(v,"gap","2px"),g(e,"class","column g16"),B(e,"padding-inline","16px")},m(P,F){Z(P,e,F),p(e,t),p(t,i),p(i,r),p(r,o),p(t,a),p(t,l),p(l,d),p(e,m),p(e,v),p(v,k),p(k,E),p(v,I),p(v,M),D||(O=nt(M,"input",n[3]),D=!0)},p(P,[F]){F&2&&s!==(s=P[1]("createGeofence.description.title")+"")&&Ee(o,s),F&2&&h!==(h=P[1]("createGeofence.description.desc")+"")&&Ee(d,h),F&2&&w!==(w=P[1]("createGeofence.description.label")+"")&&Ee(E,w),F&4&&C!==(C=P[2]||"")&&(M.value=C)},i:$e,o:$e,d(P){P&&_(e),D=!1,O()}}}function jL(n,e,t){let i,r,s=$e,o=()=>(s(),s=Dt(a,h=>t(2,r=h)),a);He(n,Nn,h=>t(1,i=h)),n.$$.on_destroy.push(()=>s());let{description:a}=e;o();const l=h=>kn(a,r=h.target.value,r);return n.$$set=h=>{"description"in h&&o(t(0,a=h.description))},[a,i,r,l]}class WL extends Wt{constructor(e){super(),Xt(this,e,jL,YL,zt,{description:0})}}const XL={version:4,country_calling_codes:{1:["US","AG","AI","AS","BB","BM","BS","CA","DM","DO","GD","GU","JM","KN","KY","LC","MP","MS","PR","SX","TC","TT","VC","VG","VI"],7:["RU","KZ"],20:["EG"],27:["ZA"],30:["GR"],31:["NL"],32:["BE"],33:["FR"],34:["ES"],36:["HU"],39:["IT","VA"],40:["RO"],41:["CH"],43:["AT"],44:["GB","GG","IM","JE"],45:["DK"],46:["SE"],47:["NO","SJ"],48:["PL"],49:["DE"],51:["PE"],52:["MX"],53:["CU"],54:["AR"],55:["BR"],56:["CL"],57:["CO"],58:["VE"],60:["MY"],61:["AU","CC","CX"],62:["ID"],63:["PH"],64:["NZ"],65:["SG"],66:["TH"],81:["JP"],82:["KR"],84:["VN"],86:["CN"],90:["TR"],91:["IN"],92:["PK"],93:["AF"],94:["LK"],95:["MM"],98:["IR"],211:["SS"],212:["MA","EH"],213:["DZ"],216:["TN"],218:["LY"],220:["GM"],221:["SN"],222:["MR"],223:["ML"],224:["GN"],225:["CI"],226:["BF"],227:["NE"],228:["TG"],229:["BJ"],230:["MU"],231:["LR"],232:["SL"],233:["GH"],234:["NG"],235:["TD"],236:["CF"],237:["CM"],238:["CV"],239:["ST"],240:["GQ"],241:["GA"],242:["CG"],243:["CD"],244:["AO"],245:["GW"],246:["IO"],247:["AC"],248:["SC"],249:["SD"],250:["RW"],251:["ET"],252:["SO"],253:["DJ"],254:["KE"],255:["TZ"],256:["UG"],257:["BI"],258:["MZ"],260:["ZM"],261:["MG"],262:["RE","YT"],263:["ZW"],264:["NA"],265:["MW"],266:["LS"],267:["BW"],268:["SZ"],269:["KM"],290:["SH","TA"],291:["ER"],297:["AW"],298:["FO"],299:["GL"],350:["GI"],351:["PT"],352:["LU"],353:["IE"],354:["IS"],355:["AL"],356:["MT"],357:["CY"],358:["FI","AX"],359:["BG"],370:["LT"],371:["LV"],372:["EE"],373:["MD"],374:["AM"],375:["BY"],376:["AD"],377:["MC"],378:["SM"],380:["UA"],381:["RS"],382:["ME"],383:["XK"],385:["HR"],386:["SI"],387:["BA"],389:["MK"],420:["CZ"],421:["SK"],423:["LI"],500:["FK"],501:["BZ"],502:["GT"],503:["SV"],504:["HN"],505:["NI"],506:["CR"],507:["PA"],508:["PM"],509:["HT"],590:["GP","BL","MF"],591:["BO"],592:["GY"],593:["EC"],594:["GF"],595:["PY"],596:["MQ"],597:["SR"],598:["UY"],599:["CW","BQ"],670:["TL"],672:["NF"],673:["BN"],674:["NR"],675:["PG"],676:["TO"],677:["SB"],678:["VU"],679:["FJ"],680:["PW"],681:["WF"],682:["CK"],683:["NU"],685:["WS"],686:["KI"],687:["NC"],688:["TV"],689:["PF"],690:["TK"],691:["FM"],692:["MH"],850:["KP"],852:["HK"],853:["MO"],855:["KH"],856:["LA"],880:["BD"],886:["TW"],960:["MV"],961:["LB"],962:["JO"],963:["SY"],964:["IQ"],965:["KW"],966:["SA"],967:["YE"],968:["OM"],970:["PS"],971:["AE"],972:["IL"],973:["BH"],974:["QA"],975:["BT"],976:["MN"],977:["NP"],992:["TJ"],993:["TM"],994:["AZ"],995:["GE"],996:["KG"],998:["UZ"]},countries:{AC:["247","00","(?:[01589]\\d|[46])\\d{4}",[5,6],0,0,0,0,0,0,0,[["6[2-467]\\d{3}",[5]],["4\\d{4}",[5]],0,0,0,0,["(?:0[1-9]|[1589]\\d)\\d{4}",[6]]]],AD:["376","00","(?:1|6\\d)\\d{7}|[135-9]\\d{5}",[6,8,9],[["(\\d{3})(\\d{3})","$1 $2",["[135-9]"]],["(\\d{4})(\\d{4})","$1 $2",["1"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]]],0,0,0,0,0,0,[["[78]\\d{5}",[6]],["690\\d{6}|[356]\\d{5}",[6,9]],["180[02]\\d{4}",[8]],["[19]\\d{5}",[6]]]],AE:["971","00","(?:[4-7]\\d|9[0-689])\\d{7}|800\\d{2,9}|[2-4679]\\d{7}",[5,6,7,8,9,10,11,12],[["(\\d{3})(\\d{2,9})","$1 $2",["60|8"]],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[236]|[479][2-8]"],"0$1"],["(\\d{3})(\\d)(\\d{5})","$1 $2 $3",["[479]"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["5"],"0$1"]],"0",0,0,0,0,0,[["[2-4679][2-8]\\d{6}",[8]],["5[024-68]\\d{7}",[9]],["400\\d{6}|800\\d{2,9}"],["900[02]\\d{5}",[9]],0,0,["600[25]\\d{5}",[9]],0,0,["700[05]\\d{5}",[9]]]],AF:["93","00","[2-7]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[2-7]"],"0$1"]],"0",0,0,0,0,0,[["(?:[25][0-8]|[34][0-4]|6[0-5])[2-9]\\d{6}"],["7\\d{8}"]]],AG:["1","011","(?:268|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([457]\\d{6})$|1","268$1",0,"268",[["268(?:4(?:6[0-38]|84)|56[0-2])\\d{4}"],["268(?:464|7(?:1[3-9]|[28]\\d|3[0246]|64|7[0-689]))\\d{4}"],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],["900[2-9]\\d{6}"],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}"],0,0,["26840[69]\\d{4}"],["26848[01]\\d{4}"]]],AI:["1","011","(?:264|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2457]\\d{6})$|1","264$1",0,"264",[["264(?:292|4(?:6[12]|9[78]))\\d{4}"],["264(?:235|4(?:69|76)|5(?:3[6-9]|8[1-4])|7(?:29|72))\\d{4}"],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],["900[2-9]\\d{6}"],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}"],0,0,["264724\\d{4}"]]],AL:["355","00","(?:700\\d\\d|900)\\d{3}|8\\d{5,7}|(?:[2-5]|6\\d)\\d{7}",[6,7,8,9],[["(\\d{3})(\\d{3,4})","$1 $2",["80|9"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["4[2-6]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2358][2-5]|4"],"0$1"],["(\\d{3})(\\d{5})","$1 $2",["[23578]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["6"],"0$1"]],"0",0,0,0,0,0,[["4505[0-2]\\d{3}|(?:[2358][16-9]\\d[2-9]|4410)\\d{4}|(?:[2358][2-5][2-9]|4(?:[2-57-9][2-9]|6\\d))\\d{5}",[8]],["6(?:[78][2-9]|9\\d)\\d{6}",[9]],["800\\d{4}",[7]],["900[1-9]\\d\\d",[6]],["700[2-9]\\d{4}",[8]],0,0,0,0,["808[1-9]\\d\\d",[6]]]],AM:["374","00","(?:[1-489]\\d|55|60|77)\\d{6}",[8],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[89]0"],"0 $1"],["(\\d{3})(\\d{5})","$1 $2",["2|3[12]"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["1|47"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["[3-9]"],"0$1"]],"0",0,0,0,0,0,[["(?:(?:1[0-25]|47)\\d|2(?:2[2-46]|3[1-8]|4[2-69]|5[2-7]|6[1-9]|8[1-7])|3[12]2)\\d{5}"],["(?:33|4[1349]|55|77|88|9[13-9])\\d{6}"],["800\\d{5}"],["90[016]\\d{5}"],0,0,0,0,["60(?:2[78]|3[5-9]|4[02-9]|5[0-46-9]|[6-8]\\d|9[0-2])\\d{4}"],["80[1-4]\\d{5}"]]],AO:["244","00","[29]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[29]"]]],0,0,0,0,0,0,[["2\\d(?:[0134][25-9]|[25-9]\\d)\\d{5}"],["9[1-79]\\d{7}"]]],AR:["54","00","(?:11|[89]\\d\\d)\\d{8}|[2368]\\d{9}",[10,11],[["(\\d{4})(\\d{2})(\\d{4})","$1 $2-$3",["2(?:2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(?:3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9])","2(?:[23]02|6(?:[25]|4[6-8])|9(?:[02356]|4[02568]|72|8[23]))|3(?:3[28]|4(?:[04679]|3[5-8]|5[4-68]|8[2379])|5(?:[2467]|3[237]|8[2-5])|7[1-578]|8(?:[2469]|3[2578]|5[4-8]|7[36-8]|8[5-8]))|2(?:2[24-9]|3[1-59]|47)","2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3[78]|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8[23])|7[1-578]|8(?:[2469]|3[278]|5[56][46]|86[3-6]))|2(?:2[24-9]|3[1-59]|47)|38(?:[58][78]|7[378])|3(?:4[35][56]|58[45]|8(?:[38]5|54|76))[4-6]","2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3(?:5(?:4[0-25689]|[56])|[78])|58|8[2379])|5(?:[2467]|3[237]|8(?:[23]|4(?:[45]|60)|5(?:4[0-39]|5|64)))|7[1-578]|8(?:[2469]|3[278]|54(?:4|5[13-7]|6[89])|86[3-6]))|2(?:2[24-9]|3[1-59]|47)|38(?:[58][78]|7[378])|3(?:454|85[56])[46]|3(?:4(?:36|5[56])|8(?:[38]5|76))[4-6]"],"0$1",1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3",["1"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["[68]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2-$3",["[23]"],"0$1",1],["(\\d)(\\d{4})(\\d{2})(\\d{4})","$2 15-$3-$4",["9(?:2[2-469]|3[3-578])","9(?:2(?:2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(?:3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9]))","9(?:2(?:[23]02|6(?:[25]|4[6-8])|9(?:[02356]|4[02568]|72|8[23]))|3(?:3[28]|4(?:[04679]|3[5-8]|5[4-68]|8[2379])|5(?:[2467]|3[237]|8[2-5])|7[1-578]|8(?:[2469]|3[2578]|5[4-8]|7[36-8]|8[5-8])))|92(?:2[24-9]|3[1-59]|47)","9(?:2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3[78]|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8[23])|7[1-578]|8(?:[2469]|3[278]|5(?:[56][46]|[78])|7[378]|8(?:6[3-6]|[78]))))|92(?:2[24-9]|3[1-59]|47)|93(?:4[35][56]|58[45]|8(?:[38]5|54|76))[4-6]","9(?:2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3(?:5(?:4[0-25689]|[56])|[78])|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8(?:[23]|4(?:[45]|60)|5(?:4[0-39]|5|64)))|7[1-578]|8(?:[2469]|3[278]|5(?:4(?:4|5[13-7]|6[89])|[56][46]|[78])|7[378]|8(?:6[3-6]|[78]))))|92(?:2[24-9]|3[1-59]|47)|93(?:4(?:36|5[56])|8(?:[38]5|76))[4-6]"],"0$1",0,"$1 $2 $3-$4"],["(\\d)(\\d{2})(\\d{4})(\\d{4})","$2 15-$3-$4",["91"],"0$1",0,"$1 $2 $3-$4"],["(\\d{3})(\\d{3})(\\d{5})","$1-$2-$3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{4})","$2 15-$3-$4",["9"],"0$1",0,"$1 $2 $3-$4"]],"0",0,"0?(?:(11|2(?:2(?:02?|[13]|2[13-79]|4[1-6]|5[2457]|6[124-8]|7[1-4]|8[13-6]|9[1267])|3(?:02?|1[467]|2[03-6]|3[13-8]|[49][2-6]|5[2-8]|[67])|4(?:7[3-578]|9)|6(?:[0136]|2[24-6]|4[6-8]?|5[15-8])|80|9(?:0[1-3]|[19]|2\\d|3[1-6]|4[02568]?|5[2-4]|6[2-46]|72?|8[23]?))|3(?:3(?:2[79]|6|8[2578])|4(?:0[0-24-9]|[12]|3[5-8]?|4[24-7]|5[4-68]?|6[02-9]|7[126]|8[2379]?|9[1-36-8])|5(?:1|2[1245]|3[237]?|4[1-46-9]|6[2-4]|7[1-6]|8[2-5]?)|6[24]|7(?:[069]|1[1568]|2[15]|3[145]|4[13]|5[14-8]|7[2-57]|8[126])|8(?:[01]|2[15-7]|3[2578]?|4[13-6]|5[4-8]?|6[1-357-9]|7[36-8]?|8[5-8]?|9[124])))15)?","9$1",0,0,[["3(?:7(?:1[15]|81)|8(?:21|4[16]|69|9[12]))[46]\\d{5}|(?:2(?:2(?:2[59]|44|52)|3(?:26|44)|47[35]|9(?:[07]2|2[26]|34|46))|3327)[45]\\d{5}|(?:2(?:657|9(?:54|66))|3(?:48[27]|7(?:55|77)|8(?:65|78)))[2-8]\\d{5}|(?:2(?:284|3(?:02|23)|477|622|920)|3(?:4(?:46|89|92)|541))[2-7]\\d{5}|(?:(?:11[1-8]|670)\\d|2(?:2(?:0[45]|1[2-6]|3[3-6])|3(?:[06]4|7[45])|494|6(?:04|1[2-8]|[36][45]|4[3-6])|80[45]|9(?:[17][4-6]|[48][45]|9[3-6]))|3(?:364|4(?:1[2-8]|[25][4-6]|3[3-6]|84)|5(?:1[2-9]|[38][4-6])|6(?:2[45]|44)|7[069][45]|8(?:0[45]|1[2-7]|3[4-6]|5[3-6]|7[2-6]|8[3-68])))\\d{6}|(?:2(?:2(?:62|81)|320|9(?:42|83))|3(?:329|4(?:62|7[16])|5(?:43|64)|7(?:18|5[17])))[2-6]\\d{5}|2(?:2(?:21|4[23]|6[145]|7[1-4]|8[356]|9[267])|3(?:16|3[13-8]|43|5[346-8]|9[3-5])|6(?:2[46]|4[78]|5[1568])|9(?:03|2[1457-9]|3[1356]|4[08]|[56][23]|82))4\\d{5}|(?:2(?:257|3(?:24|46|92)|9(?:01|23|64))|3(?:4(?:42|64)|5(?:25|37|4[47]|71)|7(?:35|72)|825))[3-6]\\d{5}|(?:2(?:2(?:02|2[3467]|4[156]|5[45]|6[6-8]|91)|3(?:1[47]|25|[45][25]|96)|47[48]|625|932)|3(?:38[2578]|4(?:0[0-24-9]|3[78]|4[457]|58|6[035-9]|72|83|9[136-8])|5(?:2[124]|[368][23]|4[2689]|7[2-6])|7(?:16|2[15]|3[14]|4[13]|5[468]|7[3-5]|8[26])|8(?:2[67]|3[278]|4[3-5]|5[78]|6[1-378]|[78]7|94)))[4-6]\\d{5}",[10]],["93(?:7(?:1[15]|81)|8(?:21|4[16]|69|9[12]))[46]\\d{5}|9(?:2(?:2(?:2[59]|44|52)|3(?:26|44)|47[35]|9(?:[07]2|2[26]|34|46))|3327)[45]\\d{5}|9(?:2(?:657|9(?:54|66))|3(?:48[27]|7(?:55|77)|8(?:65|78)))[2-8]\\d{5}|9(?:2(?:284|3(?:02|23)|477|622|920)|3(?:4(?:46|89|92)|541))[2-7]\\d{5}|(?:675\\d|9(?:11[1-8]\\d|2(?:2(?:0[45]|1[2-6]|3[3-6])|3(?:[06]4|7[45])|494|6(?:04|1[2-8]|[36][45]|4[3-6])|80[45]|9(?:[17][4-6]|[48][45]|9[3-6]))|3(?:364|4(?:1[2-8]|[25][4-6]|3[3-6]|84)|5(?:1[2-9]|[38][4-6])|6(?:2[45]|44)|7[069][45]|8(?:0[45]|1[2-7]|3[4-6]|5[3-6]|7[2-6]|8[3-68]))))\\d{6}|9(?:2(?:2(?:62|81)|320|9(?:42|83))|3(?:329|4(?:62|7[16])|5(?:43|64)|7(?:18|5[17])))[2-6]\\d{5}|92(?:2(?:21|4[23]|6[145]|7[1-4]|8[356]|9[267])|3(?:16|3[13-8]|43|5[346-8]|9[3-5])|6(?:2[46]|4[78]|5[1568])|9(?:03|2[1457-9]|3[1356]|4[08]|[56][23]|82))4\\d{5}|9(?:2(?:257|3(?:24|46|92)|9(?:01|23|64))|3(?:4(?:42|64)|5(?:25|37|4[47]|71)|7(?:35|72)|825))[3-6]\\d{5}|9(?:2(?:2(?:02|2[3467]|4[156]|5[45]|6[6-8]|91)|3(?:1[47]|25|[45][25]|96)|47[48]|625|932)|3(?:38[2578]|4(?:0[0-24-9]|3[78]|4[457]|58|6[035-9]|72|83|9[136-8])|5(?:2[124]|[368][23]|4[2689]|7[2-6])|7(?:16|2[15]|3[14]|4[13]|5[468]|7[3-5]|8[26])|8(?:2[67]|3[278]|4[3-5]|5[78]|6[1-378]|[78]7|94)))[4-6]\\d{5}"],["800\\d{7,8}"],["60[04579]\\d{7}",[10]],0,0,["810\\d{7}",[10]]]],AS:["1","011","(?:[58]\\d\\d|684|900)\\d{7}",[10],0,"1",0,"([267]\\d{6})$|1","684$1",0,"684",[["6846(?:22|33|44|55|77|88|9[19])\\d{4}"],["684(?:2(?:48|5[2468]|7[26])|7(?:3[13]|70|82))\\d{4}"],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],["900[2-9]\\d{6}"],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}"]]],AT:["43","00","1\\d{3,12}|2\\d{6,12}|43(?:(?:0\\d|5[02-9])\\d{3,9}|2\\d{4,5}|[3467]\\d{4}|8\\d{4,6}|9\\d{4,7})|5\\d{4,12}|8\\d{7,12}|9\\d{8,12}|(?:[367]\\d|4[0-24-9])\\d{4,11}",[4,5,6,7,8,9,10,11,12,13],[["(\\d)(\\d{3,12})","$1 $2",["1(?:11|[2-9])"],"0$1"],["(\\d{3})(\\d{2})","$1 $2",["517"],"0$1"],["(\\d{2})(\\d{3,5})","$1 $2",["5[079]"],"0$1"],["(\\d{3})(\\d{3,10})","$1 $2",["(?:31|4)6|51|6(?:48|5[0-3579]|[6-9])|7(?:20|32|8)|[89]","(?:31|4)6|51|6(?:485|5[0-3579]|[6-9])|7(?:20|32|8)|[89]"],"0$1"],["(\\d{4})(\\d{3,9})","$1 $2",["[2-467]|5[2-6]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["5"],"0$1"],["(\\d{2})(\\d{4})(\\d{4,7})","$1 $2 $3",["5"],"0$1"]],"0",0,0,0,0,0,[["1(?:11\\d|[2-9]\\d{3,11})|(?:316|463)\\d{3,10}|648[34]\\d{3,9}|(?:51|66|73)2\\d{3,10}|(?:2(?:1[467]|2[13-8]|5[2357]|6[1-46-8]|7[1-8]|8[124-7]|9[1458])|3(?:1[1-578]|3[23568]|4[5-7]|5[1378]|6[1-38]|8[3-68])|4(?:2[1-8]|35|7[1368]|8[2457])|5(?:2[1-8]|3[357]|4[147]|5[12578]|6[37])|6(?:13|2[1-47]|4[135-7]|5[468])|7(?:2[1-8]|35|4[13478]|5[68]|6[16-8]|7[1-6]|9[45]))\\d{4,10}"],["6(?:485|(?:5[0-3579]|6[013-9]|[7-9]\\d)\\d)\\d{3,9}",[7,8,9,10,11,12,13]],["800\\d{6,10}",[9,10,11,12,13]],["(?:8[69][2-68]|9(?:0[01]|3[019]))\\d{6,10}",[9,10,11,12,13]],0,0,0,0,["5(?:0[1-9]|17|[79]\\d)\\d{2,10}|7[28]0\\d{6,10}",[5,6,7,8,9,10,11,12,13]],["8(?:10|2[018])\\d{6,10}|828\\d{5}",[8,9,10,11,12,13]]]],AU:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d{7}(?:\\d(?:\\d{2})?)?|8[0-24-9]\\d{7})|[2-478]\\d{8}|1\\d{4,7}",[5,6,7,8,9,10,12],[["(\\d{2})(\\d{3,4})","$1 $2",["16"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,4})","$1 $2 $3",["16"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["14|4"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["[2378]"],"(0$1)"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:30|[89])"]]],"0",0,"(183[12])|0",0,0,0,[["(?:(?:2(?:(?:[0-26-9]\\d|3[0-8]|5[0135-9])\\d|4(?:[02-9]\\d|10))|3(?:(?:[0-3589]\\d|6[1-9]|7[0-35-9])\\d|4(?:[0-578]\\d|90))|7(?:[013-57-9]\\d|2[0-8])\\d)\\d\\d|8(?:51(?:0(?:0[03-9]|[12479]\\d|3[2-9]|5[0-8]|6[1-9]|8[0-7])|1(?:[0235689]\\d|1[0-69]|4[0-589]|7[0-47-9])|2(?:0[0-79]|[18][13579]|2[14-9]|3[0-46-9]|[4-6]\\d|7[89]|9[0-4])|[34]\\d\\d)|(?:6[0-8]|[78]\\d)\\d{3}|9(?:[02-9]\\d{3}|1(?:(?:[0-58]\\d|6[0135-9])\\d|7(?:0[0-24-9]|[1-9]\\d)|9(?:[0-46-9]\\d|5[0-79])))))\\d{3}",[9]],["4(?:79[01]|83[0-389]|94[0-478])\\d{5}|4(?:[0-36]\\d|4[047-9]|5[0-25-9]|7[02-8]|8[0-24-9]|9[0-37-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,["163\\d{2,6}",[5,6,7,8,9]],["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",[9]],["13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",[6,8,10,12]]],"0011"],AW:["297","00","(?:[25-79]\\d\\d|800)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[25-9]"]]],0,0,0,0,0,0,[["5(?:2\\d|8[1-9])\\d{4}"],["(?:290|5[69]\\d|6(?:[03]0|22|4[0-2]|[69]\\d)|7(?:[34]\\d|7[07])|9(?:6[45]|9[4-8]))\\d{4}"],["800\\d{4}"],["900\\d{4}"],0,0,0,0,["(?:28\\d|501)\\d{4}"]]],AX:["358","00|99(?:[01469]|5(?:[14]1|3[23]|5[59]|77|88|9[09]))","2\\d{4,9}|35\\d{4,5}|(?:60\\d\\d|800)\\d{4,6}|7\\d{5,11}|(?:[14]\\d|3[0-46-9]|50)\\d{4,8}",[5,6,7,8,9,10,11,12],0,"0",0,0,0,0,"18",[["18[1-8]\\d{3,6}",[6,7,8,9]],["4946\\d{2,6}|(?:4[0-8]|50)\\d{4,8}",[6,7,8,9,10]],["800\\d{4,6}",[7,8,9]],["[67]00\\d{5,6}",[8,9]],0,0,["20\\d{4,8}|60[12]\\d{5,6}|7(?:099\\d{4,5}|5[03-9]\\d{3,7})|20[2-59]\\d\\d|(?:606|7(?:0[78]|1|3\\d))\\d{7}|(?:10|29|3[09]|70[1-5]\\d)\\d{4,8}"]],"00"],AZ:["994","00","365\\d{6}|(?:[124579]\\d|60|88)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["90"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[28]|2|365|46","1[28]|2|365[45]|46","1[28]|2|365(?:4|5[02])|46"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[13-9]"],"0$1"]],"0",0,0,0,0,0,[["(?:2[12]428|3655[02])\\d{4}|(?:2(?:22[0-79]|63[0-28])|3654)\\d{5}|(?:(?:1[28]|46)\\d|2(?:[014-6]2|[23]3))\\d{6}"],["36554\\d{4}|(?:[16]0|4[04]|5[015]|7[07]|99)\\d{7}"],["88\\d{7}"],["900200\\d{3}"]]],BA:["387","00","6\\d{8}|(?:[35689]\\d|49|70)\\d{6}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["6[1-3]|[7-9]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2-$3",["[3-5]|6[56]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["6"],"0$1"]],"0",0,0,0,0,0,[["(?:3(?:[05-79][2-9]|1[4579]|[23][24-9]|4[2-4689]|8[2457-9])|49[2-579]|5(?:0[2-49]|[13][2-9]|[268][2-4679]|4[4689]|5[2-79]|7[2-69]|9[2-4689]))\\d{5}",[8]],["6040\\d{5}|6(?:03|[1-356]|44|7\\d)\\d{6}"],["8[08]\\d{6}",[8]],["9[0246]\\d{6}",[8]],0,0,["703[235]0\\d{3}|70(?:2[0-5]|3[0146]|[56]0)\\d{4}",[8]],0,0,["8[12]\\d{6}",[8]]]],BB:["1","011","(?:246|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","246$1",0,"246",[["246521[0369]\\d{3}|246(?:2(?:2[78]|7[0-4])|4(?:1[024-6]|2\\d|3[2-9])|5(?:20|[34]\\d|54|7[1-3])|6(?:2\\d|38)|7[35]7|9(?:1[89]|63))\\d{4}"],["246(?:(?:2(?:[3568]\\d|4[0-57-9])|3(?:5[2-9]|6[0-6])|4(?:46|5\\d)|69[5-7]|8(?:[2-5]\\d|83))\\d|52(?:1[147]|20))\\d{3}"],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],["(?:246976|900[2-9]\\d\\d)\\d{4}"],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}"],0,["246(?:292|367|4(?:1[7-9]|3[01]|4[47-9]|67)|7(?:1[2-9]|2\\d|3[016]|53))\\d{4}"],0,["24631\\d{5}"]]],BD:["880","00","[1-469]\\d{9}|8[0-79]\\d{7,8}|[2-79]\\d{8}|[2-9]\\d{7}|[3-9]\\d{6}|[57-9]\\d{5}",[6,7,8,9,10],[["(\\d{2})(\\d{4,6})","$1-$2",["31[5-8]|[459]1"],"0$1"],["(\\d{3})(\\d{3,7})","$1-$2",["3(?:[67]|8[013-9])|4(?:6[168]|7|[89][18])|5(?:6[128]|9)|6(?:[15]|28|4[14])|7[2-589]|8(?:0[014-9]|[12])|9[358]|(?:3[2-5]|4[235]|5[2-578]|6[0389]|76|8[3-7]|9[24])1|(?:44|66)[01346-9]"],"0$1"],["(\\d{4})(\\d{3,6})","$1-$2",["[13-9]|2[23]"],"0$1"],["(\\d)(\\d{7,8})","$1-$2",["2"],"0$1"]],"0",0,0,0,0,0,[["(?:4(?:31\\d\\d|423)|5222)\\d{3}(?:\\d{2})?|8332[6-9]\\d\\d|(?:3(?:03[56]|224)|4(?:22[25]|653))\\d{3,4}|(?:3(?:42[47]|529|823)|4(?:027|525|65(?:28|8))|562|6257|7(?:1(?:5[3-5]|6[12]|7[156]|89)|22[589]56|32|42675|52(?:[25689](?:56|8)|[347]8)|71(?:6[1267]|75|89)|92374)|82(?:2[59]|32)56|9(?:03[23]56|23(?:256|373)|31|5(?:1|2[4589]56)))\\d{3}|(?:3(?:02[348]|22[35]|324|422)|4(?:22[67]|32[236-9]|6(?:2[46]|5[57])|953)|5526|6(?:024|6655)|81)\\d{4,5}|(?:2(?:7(?:1[0-267]|2[0-289]|3[0-29]|4[01]|5[1-3]|6[013]|7[0178]|91)|8(?:0[125]|1[1-6]|2[0157-9]|3[1-69]|41|6[1-35]|7[1-5]|8[1-8]|9[0-6])|9(?:0[0-2]|1[0-4]|2[568]|3[3-6]|5[5-7]|6[0136-9]|7[0-7]|8[014-9]))|3(?:0(?:2[025-79]|3[2-4])|181|22[12]|32[2356]|824)|4(?:02[09]|22[348]|32[045]|523|6(?:27|54))|666(?:22|53)|7(?:22[57-9]|42[56]|82[35])8|8(?:0[124-9]|2(?:181|2[02-4679]8)|4[12]|[5-7]2)|9(?:[04]2|2(?:2|328)|81))\\d{4}|(?:2(?:[23]\\d|[45])\\d\\d|3(?:1(?:2[5-7]|[5-7])|425|822)|4(?:033|1\\d|[257]1|332|4(?:2[246]|5[25])|6(?:2[35]|56|62)|8(?:23|54)|92[2-5])|5(?:02[03489]|22[457]|32[35-79]|42[46]|6(?:[18]|53)|724|826)|6(?:023|2(?:2[2-5]|5[3-5]|8)|32[3478]|42[34]|52[47]|6(?:[18]|6(?:2[34]|5[24]))|[78]2[2-5]|92[2-6])|7(?:02|21\\d|[3-589]1|6[12]|72[24])|8(?:217|3[12]|[5-7]1)|9[24]1)\\d{5}|(?:(?:3[2-8]|5[2-57-9]|6[03-589])1|4[4689][18])\\d{5}|[59]1\\d{5}"],["(?:1[13-9]\\d|644)\\d{7}|(?:3[78]|44|66)[02-9]\\d{7}",[10]],["80[03]\\d{7}",[10]],0,0,0,0,0,["96(?:0[469]|1[0-47]|3[389]|43|6[69]|7[78])\\d{6}",[10]]]],BE:["32","00","4\\d{8}|[1-9]\\d{7}",[8,9],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["(?:80|9)0"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[239]|4[23]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[15-8]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["4"],"0$1"]],"0",0,0,0,0,0,[["80[2-8]\\d{5}|(?:1[0-69]|[23][2-8]|4[23]|5\\d|6[013-57-9]|71|8[1-79]|9[2-4])\\d{6}",[8]],["4[5-9]\\d{7}",[9]],["800[1-9]\\d{4}",[8]],["(?:70(?:2[0-57]|3[04-7]|44|6[04-69]|7[0579])|90\\d\\d)\\d{4}",[8]],0,0,["78(?:0[578]|1[014-8]|2[25]|3[15-8]|48|5[05]|60|7[06-8]|9\\d)\\d{4}",[8]],0,0,["7879\\d{4}",[8]]]],BF:["226","00","(?:[025-7]\\d|44)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[024-7]"]]],0,0,0,0,0,0,[["2(?:0(?:49|5[23]|6[5-7]|9[016-9])|4(?:4[569]|5[4-6]|6[5-7]|7[0179])|5(?:[34]\\d|50|6[5-7]))\\d{4}"],["(?:0[1-7]|44|5[0-8]|[67]\\d)\\d{6}"]]],BG:["359","00","00800\\d{7}|[2-7]\\d{6,7}|[89]\\d{6,8}|2\\d{5}",[6,7,8,9,12],[["(\\d)(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["2"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["43[1-6]|70[1-9]"],"0$1"],["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["[356]|4[124-7]|7[1-9]|8[1-6]|9[1-7]"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["(?:70|8)0"],"0$1"],["(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3",["43[1-7]|7"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[48]|9[08]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1"]],"0",0,0,0,0,0,[["2\\d{5,7}|(?:43[1-6]|70[1-9])\\d{4,5}|(?:[36]\\d|4[124-7]|[57][1-9]|8[1-6]|9[1-7])\\d{5,6}",[6,7,8]],["(?:43[07-9]|99[69]\\d)\\d{5}|(?:8[7-9]|98)\\d{7}",[8,9]],["(?:00800\\d\\d|800)\\d{5}",[8,12]],["90\\d{6}",[8]],0,0,0,0,0,["700\\d{5}",[8]]]],BH:["973","00","[136-9]\\d{7}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[13679]|8[02-4679]"]]],0,0,0,0,0,0,[["(?:1(?:3[1356]|6[0156]|7\\d)\\d|6(?:1[16]\\d|500|6(?:0\\d|3[12]|44|55|7[7-9]|88)|9[69][69])|7(?:[07]\\d\\d|1(?:11|78)))\\d{4}"],["(?:3(?:[0-79]\\d|8[0-57-9])\\d|6(?:3(?:00|33|6[16])|441|6(?:3[03-9]|[69]\\d|7[0-689])))\\d{4}"],["8[02369]\\d{6}"],["(?:87|9[0-8])\\d{6}"],0,0,0,0,0,["84\\d{6}"]]],BI:["257","00","(?:[267]\\d|31)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2367]"]]],0,0,0,0,0,0,[["(?:22|31)\\d{6}"],["(?:29|6[124-9]|7[125-9])\\d{6}"]]],BJ:["229","00","(?:01\\d|[24-689])\\d{7}",[8,10],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24-689]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["0"]]],0,0,0,0,0,0,[["2090\\d{4}|(?:012\\d\\d|2(?:02|1[037]|2[45]|3[68]|4\\d))\\d{5}"],["(?:01(?:2[5-9]|[4-69]\\d)|4[0-8]|[56]\\d|9[013-9])\\d{6}"],0,0,0,0,["81\\d{6}",[8]],0,["857[58]\\d{4}",[8]]]],BL:["590","00","(?:590\\d|7090)\\d{5}|(?:69|80|9\\d)\\d{7}",[9],0,"0",0,0,0,0,0,[["590(?:2[7-9]|3[3-7]|5[12]|87)\\d{4}"],["(?:69(?:0\\d\\d|1(?:2[2-9]|3[0-5])|4(?:0[89]|1[2-6]|9\\d)|6(?:1[016-9]|5[0-4]|[67]\\d))|7090[0-4])\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["9(?:(?:39[5-7]|76[018])\\d|475[0-6])\\d{4}"]]],BM:["1","011","(?:441|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","441$1",0,"441",[["441(?:[46]\\d\\d|5(?:4\\d|60|89))\\d{4}"],["441(?:[2378]\\d|5[0-39]|9[02])\\d{5}"],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],["900[2-9]\\d{6}"],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}"]]],BN:["673","00","[2-578]\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-578]"]]],0,0,0,0,0,0,[["22[0-7]\\d{4}|(?:2[013-9]|[34]\\d|5[0-25-9])\\d{5}"],["(?:22[89]|[78]\\d\\d)\\d{4}"],0,0,0,0,0,0,["5[34]\\d{5}"]]],BO:["591","00(?:1\\d)?","8001\\d{5}|(?:[2-467]\\d|50)\\d{6}",[8,9],[["(\\d)(\\d{7})","$1 $2",["[235]|4[46]"]],["(\\d{8})","$1",["[67]"]],["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["8"]]],"0",0,"0(1\\d)?",0,0,0,[["(?:2(?:2\\d\\d|5(?:11|[258]\\d|9[67])|6(?:12|2\\d|9[34])|8(?:2[34]|39|62))|3(?:3\\d\\d|4(?:6\\d|8[24])|8(?:25|42|5[257]|86|9[25])|9(?:[27]\\d|3[2-4]|4[248]|5[24]|6[2-6]))|4(?:4\\d\\d|6(?:11|[24689]\\d|72)))\\d{4}",[8]],["[67]\\d{7}",[8]],["8001[07]\\d{4}",[9]],0,0,0,0,0,["50\\d{6}",[8]]]],BQ:["599","00","(?:[34]1|7\\d)\\d{5}",[7],0,0,0,0,0,0,"[347]",[["(?:318[023]|41(?:6[023]|70)|7(?:1[578]|2[05]|50)\\d)\\d{3}"],["(?:31(?:8[14-8]|9[14578])|416[14-9]|7(?:0[01]|7[07]|8\\d|9[056])\\d)\\d{3}"]]],BR:["55","00(?:1[245]|2[1-35]|31|4[13]|[56]5|99)","[1-467]\\d{9,10}|55[0-46-9]\\d{8}|[34]\\d{7}|55\\d{7,8}|(?:5[0-46-9]|[89]\\d)\\d{7,9}",[8,9,10,11],[["(\\d{4})(\\d{4})","$1-$2",["300|4(?:0[02]|37|86)","300|4(?:0(?:0|20)|370|864)"]],["(\\d{3})(\\d{2,3})(\\d{4})","$1 $2 $3",["(?:[358]|90)0"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3",["(?:[14689][1-9]|2[12478]|3[1-578]|5[13-5]|7[13-579])[2-57]"],"($1)"],["(\\d{2})(\\d{5})(\\d{4})","$1 $2-$3",["[16][1-9]|[2-57-9]"],"($1)"]],"0",0,"(?:0|90)(?:(1[245]|2[1-35]|31|4[13]|[56]5|99)(\\d{10,11}))?","$2",0,0,[["(?:[14689][1-9]|2[12478]|3[1-578]|5[13-5]|7[13-579])[2-5]\\d{7}",[10]],["(?:[14689][1-9]|2[12478]|3[1-578]|5[13-5]|7[13-579])(?:7|9\\d)\\d{7}",[10,11]],["800\\d{6,7}",[9,10]],["[59]00\\d{6,7}",[9,10]],0,0,0,0,0,["(?:30[03]\\d{3}|4(?:0(?:0\\d|20)|370|864))\\d{4}|300\\d{5}",[8,10]]]],BS:["1","011","(?:242|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([3-8]\\d{6})$|1","242$1",0,"242",[["242(?:3(?:02|[236][1-9]|4[0-24-9]|5[0-68]|7[347]|8[0-4]|9[2-467])|461|502|6(?:0[1-5]|12|2[013]|[45]0|7[67]|8[78]|9[89])|7(?:02|88))\\d{4}"],["242(?:3(?:5[79]|7[56]|95)|4(?:[23][1-9]|4[1-35-9]|5[1-8]|6[2-8]|7\\d|81)|5(?:2[45]|3[35]|44|5[1-46-9]|65|77)|6[34]6|7(?:27|38)|8(?:0[1-9]|1[02-9]|2\\d|3[0-4]|[89]9))\\d{4}"],["242300\\d{4}|8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],["900[2-9]\\d{6}"],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}"],0,["242225\\d{4}"]]],BT:["975","00","[17]\\d{7}|[2-8]\\d{6}",[7,8],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[2-68]|7[246]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[67]|7"]]],0,0,0,0,0,0,[["(?:2[3-6]|[34][5-7]|5[236]|6[2-46]|7[246]|8[2-4])\\d{5}",[7]],["(?:1[67]|77)\\d{6}",[8]]]],BW:["267","00","(?:0800|(?:[37]|800)\\d)\\d{6}|(?:[2-6]\\d|90)\\d{5}",[7,8,10],[["(\\d{2})(\\d{5})","$1 $2",["90"]],["(\\d{3})(\\d{4})","$1 $2",["[24-6]|3[15-9]"]],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[37]"]],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["0"]],["(\\d{3})(\\d{4})(\\d{3})","$1 $2 $3",["8"]]],0,0,0,0,0,0,[["(?:2(?:4[0-48]|6[0-24]|9[0578])|3(?:1[0-35-9]|55|[69]\\d|7[013]|81)|4(?:6[03]|7[1267]|9[0-5])|5(?:3[03489]|4[0489]|7[1-47]|88|9[0-49])|6(?:2[1-35]|5[149]|8[013467]))\\d{4}",[7]],["(?:321|7[1-8]\\d)\\d{5}",[8]],["(?:0800|800\\d)\\d{6}",[10]],["90\\d{5}",[7]],0,0,0,0,["79(?:1(?:[0-2]\\d|3[0-8])|2[0-7]\\d)\\d{3}",[8]]]],BY:["375","810","(?:[12]\\d|33|44|902)\\d{7}|8(?:0[0-79]\\d{5,7}|[1-7]\\d{9})|8(?:1[0-489]|[5-79]\\d)\\d{7}|8[1-79]\\d{6,7}|8[0-79]\\d{5}|8\\d{5}",[6,7,8,9,10,11],[["(\\d{3})(\\d{3})","$1 $2",["800"],"8 $1"],["(\\d{3})(\\d{2})(\\d{2,4})","$1 $2 $3",["800"],"8 $1"],["(\\d{4})(\\d{2})(\\d{3})","$1 $2-$3",["1(?:5[169]|6[3-5]|7[179])|2(?:1[35]|2[34]|3[3-5])","1(?:5[169]|6(?:3[1-3]|4|5[125])|7(?:1[3-9]|7[0-24-6]|9[2-7]))|2(?:1[35]|2[34]|3[3-5])"],"8 0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2-$3-$4",["1(?:[56]|7[467])|2[1-3]"],"8 0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2-$3-$4",["[1-4]"],"8 0$1"],["(\\d{3})(\\d{3,4})(\\d{4})","$1 $2 $3",["[89]"],"8 $1"]],"8",0,"0|80?",0,0,0,[["(?:1(?:5(?:1[1-5]|[24]\\d|6[2-4]|9[1-7])|6(?:[235]\\d|4[1-7])|7\\d\\d)|2(?:1(?:[246]\\d|3[0-35-9]|5[1-9])|2(?:[235]\\d|4[0-8])|3(?:[26]\\d|3[02-79]|4[024-7]|5[03-7])))\\d{5}",[9]],["(?:2(?:5[5-79]|9[1-9])|(?:33|44)\\d)\\d{6}",[9]],["800\\d{3,7}|8(?:0[13]|20\\d)\\d{7}"],["(?:810|902)\\d{7}",[10]],0,0,0,0,["249\\d{6}",[9]]],"8~10"],BZ:["501","00","(?:0800\\d|[2-8])\\d{6}",[7,11],[["(\\d{3})(\\d{4})","$1-$2",["[2-8]"]],["(\\d)(\\d{3})(\\d{4})(\\d{3})","$1-$2-$3-$4",["0"]]],0,0,0,0,0,0,[["(?:2(?:[02]\\d|36|[68]0)|[3-58](?:[02]\\d|[68]0)|7(?:[02]\\d|32|[68]0))\\d{4}",[7]],["6[0-35-7]\\d{5}",[7]],["0800\\d{7}",[11]]]],CA:["1","011","[2-9]\\d{9}|3\\d{6}",[7,10],0,"1",0,0,0,0,0,[["(?:2(?:04|[23]6|[48]9|5[07]|63)|3(?:06|43|54|6[578]|82)|4(?:03|1[68]|[26]8|3[178]|50|74)|5(?:06|1[49]|48|79|8[147])|6(?:04|[18]3|39|47|72)|7(?:0[59]|42|53|78|8[02])|8(?:[06]7|19|25|7[39])|9(?:0[25]|42))[2-9]\\d{6}",[10]],["",[10]],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",[10]],["900[2-9]\\d{6}",[10]],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|(?:5(?:2[125-9]|33|44|66|77|88)|6(?:22|33))[2-9]\\d{6}",[10]],0,["310\\d{4}",[7]],0,["600[2-9]\\d{6}",[10]]]],CC:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d{8}(?:\\d{2})?|8[0-24-9]\\d{7})|[148]\\d{8}|1\\d{5,7}",[6,7,8,9,10,12],0,"0",0,"([59]\\d{7})$|0","8$1",0,0,[["8(?:51(?:0(?:02|31|60|89)|1(?:18|76)|223)|91(?:0(?:1[0-2]|29)|1(?:[28]2|50|79)|2(?:10|64)|3(?:[06]8|22)|4[29]8|62\\d|70[23]|959))\\d{3}",[9]],["4(?:79[01]|83[0-389]|94[0-478])\\d{5}|4(?:[0-36]\\d|4[047-9]|5[0-25-9]|7[02-8]|8[0-24-9]|9[0-37-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,0,["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",[9]],["13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",[6,8,10,12]]],"0011"],CD:["243","00","(?:(?:[189]|5\\d)\\d|2)\\d{7}|[1-68]\\d{6}",[7,8,9,10],[["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["88"],"0$1"],["(\\d{2})(\\d{5})","$1 $2",["[1-6]"],"0$1"],["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[89]"],"0$1"],["(\\d{2})(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["5"],"0$1"]],"0",0,0,0,0,0,[["(?:(?:12|573)\\d\\d|276)\\d{5}|[1-6]\\d{6}"],["88\\d{5}|(?:8[0-69]|9[017-9])\\d{7}",[7,9]]]],CF:["236","00","(?:[27]\\d{3}|8776)\\d{4}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[278]"]]],0,0,0,0,0,0,[["2[12]\\d{6}"],["7[024-7]\\d{6}"],0,["8776\\d{4}"]]],CG:["242","00","222\\d{6}|(?:0\\d|80)\\d{7}",[9],[["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["8"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[02]"]]],0,0,0,0,0,0,[["222[1-589]\\d{5}"],["026(?:1[0-5]|6[6-9])\\d{4}|0(?:[14-6]\\d\\d|2(?:40|5[5-8]|6[07-9]))\\d{5}"],0,["80[0-2]\\d{6}"]]],CH:["41","00","8\\d{11}|[2-9]\\d{8}",[9,12],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8[047]|90"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-79]|81"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["8"],"0$1"]],"0",0,0,0,0,0,[["(?:2[12467]|3[1-4]|4[134]|5[256]|6[12]|[7-9]1)\\d{7}",[9]],["(?:6[89]|7[235-9])\\d{7}",[9]],["800\\d{6}",[9]],["90[016]\\d{6}",[9]],["878\\d{6}",[9]],["860\\d{9}",[12]],["5[18]\\d{7}",[9]],["74[0248]\\d{6}",[9]],0,["84[0248]\\d{6}",[9]]]],CI:["225","00","[02]\\d{9}",[10],[["(\\d{2})(\\d{2})(\\d)(\\d{5})","$1 $2 $3 $4",["2"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3 $4",["0"]]],0,0,0,0,0,0,[["2(?:[15]\\d{3}|7(?:2(?:0[23]|1[2357]|2[245]|3[45]|4[3-5])|3(?:06|1[69]|[2-6]7)))\\d{5}"],["0[157]\\d{8}"]]],CK:["682","00","[2-578]\\d{4}",[5],[["(\\d{2})(\\d{3})","$1 $2",["[2-578]"]]],0,0,0,0,0,0,[["(?:2\\d|3[13-7]|4[1-5])\\d{3}"],["[578]\\d{4}"]]],CL:["56","(?:0|1(?:1[0-69]|2[02-5]|5[13-58]|69|7[0167]|8[018]))0","12300\\d{6}|6\\d{9,10}|[2-9]\\d{8}",[9,10,11],[["(\\d{5})(\\d{4})","$1 $2",["219","2196"],"($1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["44"]],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2[1-36]"],"($1)"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["9[2-9]"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["3[2-5]|[47]|5[1-3578]|6[13-57]|8(?:0[1-9]|[1-9])"],"($1)"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["60|8"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]],["(\\d{3})(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3 $4",["60"]]],0,0,0,0,0,0,[["2(?:1982[0-6]|3314[05-9])\\d{3}|(?:2(?:1(?:160|962)|3(?:2\\d\\d|3(?:[03467]\\d|1[0-35-9]|2[1-9]|5[0-24-9]|8[0-3])|600)|646[59])|80[1-9]\\d\\d|9(?:3(?:[0-57-9]\\d\\d|6(?:0[02-9]|[1-9]\\d))|6(?:[0-8]\\d\\d|9(?:[02-79]\\d|1[05-9]))|7[1-9]\\d\\d|9(?:[03-9]\\d\\d|1(?:[0235-9]\\d|4[0-24-9])|2(?:[0-79]\\d|8[0-46-9]))))\\d{4}|(?:22|3[2-5]|[47][1-35]|5[1-3578]|6[13-57]|8[1-9]|9[2458])\\d{7}",[9]],["",[9]],["(?:123|8)00\\d{6}",[9,11]],0,0,0,0,0,["44\\d{7}",[9]],["600\\d{7,8}",[10,11]]]],CM:["237","00","[26]\\d{8}|88\\d{6,7}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["88"]],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[26]|88"]]],0,0,0,0,0,0,[["2(?:22|33)\\d{6}",[9]],["(?:24[23]|6(?:[25-9]\\d|40))\\d{6}",[9]],["88\\d{6,7}"]]],CN:["86","00|1(?:[12]\\d|79)\\d\\d00","(?:(?:1[03-689]|2\\d)\\d\\d|6)\\d{8}|1\\d{10}|[126]\\d{6}(?:\\d(?:\\d{2})?)?|86\\d{5,6}|(?:[3-579]\\d|8[0-57-9])\\d{5,9}",[7,8,9,10,11,12],[["(\\d{2})(\\d{5,6})","$1 $2",["(?:10|2[0-57-9])[19]|3(?:[157]|35|49|9[1-68])|4(?:1[124-9]|2[179]|6[47-9]|7|8[23])|5(?:[1357]|2[37]|4[36]|6[1-46]|80)|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:07|1[236-8]|2[5-7]|[37]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|3|4[13]|5[1-5]|7[0-79]|9[0-35-9])|(?:4[35]|59|85)[1-9]","(?:10|2[0-57-9])(?:1[02]|9[56])|8078|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:1[124-9]|2[179]|[35][1-9]|6[47-9]|7\\d|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|3\\d|4[13]|5[1-5]|7[0-79]|9[0-35-9]))1","10(?:1(?:0|23)|9[56])|2[0-57-9](?:1(?:00|23)|9[56])|80781|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:1[124-9]|2[179]|[35][1-9]|6[47-9]|7\\d|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|3\\d|4[13]|5[1-5]|7[0-79]|9[0-35-9]))12","10(?:1(?:0|23)|9[56])|2[0-57-9](?:1(?:00|23)|9[56])|807812|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:1[124-9]|2[179]|[35][1-9]|6[47-9]|7\\d|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|3\\d|4[13]|5[1-5]|7[0-79]|9[0-35-9]))123","10(?:1(?:0|23)|9[56])|2[0-57-9](?:1(?:00|23)|9[56])|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:1[124-9]|2[179]|[35][1-9]|6[47-9]|7\\d|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:078|1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|3\\d|4[13]|5[1-5]|7[0-79]|9[0-35-9]))123"],"0$1"],["(\\d{3})(\\d{5,6})","$1 $2",["3(?:[157]|35|49|9[1-68])|4(?:[17]|2[179]|6[47-9]|8[23])|5(?:[1357]|2[37]|4[36]|6[1-46]|80)|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]|4[13]|5[1-5])|(?:4[35]|59|85)[1-9]","(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))[19]","85[23](?:10|95)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:10|9[56])","85[23](?:100|95)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:100|9[56])"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["(?:4|80)0"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["10|2(?:[02-57-9]|1[1-9])","10|2(?:[02-57-9]|1[1-9])","10[0-79]|2(?:[02-57-9]|1[1-79])|(?:10|21)8(?:0[1-9]|[1-9])"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["3(?:[3-59]|7[02-68])|4(?:[26-8]|3[3-9]|5[2-9])|5(?:3[03-9]|[468]|7[028]|9[2-46-9])|6|7(?:[0-247]|3[04-9]|5[0-4689]|6[2368])|8(?:[1-358]|9[1-7])|9(?:[013479]|5[1-5])|(?:[34]1|55|79|87)[02-9]"],"0$1",1],["(\\d{3})(\\d{7,8})","$1 $2",["9"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["80"],"0$1",1],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["[3-578]"],"0$1",1],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["1[3-9]"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3 $4",["[12]"],"0$1",1]],"0",0,"(1(?:[12]\\d|79)\\d\\d)|0",0,0,0,[["(?:10(?:[02-79]\\d\\d|[18](?:0[1-9]|[1-9]\\d))|2(?:[02-57-9]\\d{3}|1(?:[18](?:0[1-9]|[1-9]\\d)|[2-79]\\d\\d))|(?:41[03]|8078|9(?:78|94))\\d\\d)\\d{5}|(?:10|2[0-57-9])(?:1(?:00|23)\\d\\d|95\\d{3,4})|(?:41[03]|9(?:78|94))(?:100\\d\\d|95\\d{3,4})|8078123|(?:43[35]|754|851)\\d{7,8}|(?:43[35]|754|851)(?:1(?:00\\d|23)\\d|95\\d{3,4})|(?:3(?:11|7[179])|4(?:[15]1|3[12])|5(?:1\\d|2[37]|3[12]|51|7[13-79]|9[15])|7(?:[39]1|5[57]|6[09])|8(?:71|98))(?:[02-8]\\d{7}|1(?:0(?:0\\d\\d(?:\\d{3})?|[1-9]\\d{5})|[13-9]\\d{6}|2(?:[0-24-9]\\d{5}|3\\d(?:\\d{4})?))|9(?:[0-46-9]\\d{6}|5\\d{3}(?:\\d(?:\\d{2})?)?))|(?:3(?:1[02-9]|35|49|5\\d|7[02-68]|9[1-68])|4(?:1[24-9]|2[179]|3[46-9]|5[2-9]|6[47-9]|7\\d|8[23])|5(?:3[03-9]|4[36]|5[02-9]|6[1-46]|7[028]|80|9[2-46-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[17]\\d|2[248]|3[04-9]|4[3-6]|5[0-3689]|6[2368]|9[02-9])|8(?:1[236-8]|2[5-7]|3\\d|5[2-9]|7[02-9]|8[36-8]|9[1-7])|9(?:0[1-3689]|1[1-79]|3\\d|4[13]|5[1-5]|7[0-79]|9[0-35-9]))(?:[02-8]\\d{6}|1(?:0(?:0\\d\\d(?:\\d{2})?|[1-9]\\d{4})|[13-9]\\d{5}|2(?:[0-24-9]\\d{4}|3\\d(?:\\d{3})?))|9(?:[0-46-9]\\d{5}|5\\d{3,5}))",[7,8,9,10,11]],["1740[0-5]\\d{6}|1(?:[38]\\d|4[57]|[59][0-35-9]|6[25-7]|7[0-35-8])\\d{8}",[11]],["(?:(?:10|21)8|8)00\\d{7}",[10,12]],["16[08]\\d{5}",[8]],0,0,0,0,0,["10(?:10\\d{4}|96\\d{3,4})|400\\d{7}|950\\d{7,8}|(?:2[0-57-9]|3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))96\\d{3,4}",[7,8,9,10,11]]],"00"],CO:["57","00(?:4(?:[14]4|56)|[579])","(?:46|60\\d\\d)\\d{6}|(?:1\\d|[39])\\d{9}",[8,10,11],[["(\\d{4})(\\d{4})","$1 $2",["46"]],["(\\d{3})(\\d{7})","$1 $2",["6|90"],"($1)"],["(\\d{3})(\\d{7})","$1 $2",["3[0-357]|9[14]"]],["(\\d)(\\d{3})(\\d{7})","$1-$2-$3",["1"],"0$1",0,"$1 $2 $3"]],"0",0,"0([3579]|4(?:[14]4|56))?",0,0,0,[["601055(?:[0-4]\\d|50)\\d\\d|6010(?:[0-4]\\d|5[0-4])\\d{4}|(?:46|60(?:[18][1-9]|[24-7][2-9]))\\d{6}",[8,10]],["333301[0-5]\\d{3}|3333(?:00|2[5-9]|[3-9]\\d)\\d{4}|(?:3(?:(?:0[0-5]|1\\d|5[01]|70)\\d|2(?:[0-3]\\d|4[1-9])|3(?:00|3[0-24-9]))|9(?:101|408))\\d{6}",[10]],["1800\\d{7}",[11]],["(?:19(?:0[01]|4[78])|901)\\d{7}",[10,11]]]],CR:["506","00","(?:8\\d|90)\\d{8}|(?:[24-8]\\d{3}|3005)\\d{4}",[8,10],[["(\\d{4})(\\d{4})","$1 $2",["[2-7]|8[3-9]"]],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["[89]"]]],0,0,"(19(?:0[0-2468]|1[09]|20|66|77|99))",0,0,0,[["210[7-9]\\d{4}|2(?:[024-7]\\d|1[1-9])\\d{5}",[8]],["(?:3005\\d|6500[01])\\d{3}|(?:5[07]|6[0-4]|7[0-3]|8[3-9])\\d{6}",[8]],["800\\d{7}",[10]],["90[059]\\d{7}",[10]],0,0,0,0,["(?:210[0-6]|4\\d{3}|5100)\\d{4}",[8]]]],CU:["53","119","(?:[2-7]|8\\d\\d)\\d{7}|[2-47]\\d{6}|[34]\\d{5}",[6,7,8,10],[["(\\d{2})(\\d{4,6})","$1 $2",["2[1-4]|[34]"],"(0$1)"],["(\\d)(\\d{6,7})","$1 $2",["7"],"(0$1)"],["(\\d)(\\d{7})","$1 $2",["[56]"],"0$1"],["(\\d{3})(\\d{7})","$1 $2",["8"],"0$1"]],"0",0,0,0,0,0,[["(?:3[23]|4[89])\\d{4,6}|(?:31|4[36]|8(?:0[25]|78)\\d)\\d{6}|(?:2[1-4]|4[1257]|7\\d)\\d{5,6}"],["(?:5\\d|6[2-4])\\d{6}",[8]],["800\\d{7}",[10]],0,0,0,0,0,0,["807\\d{7}",[10]]]],CV:["238","0","(?:[2-59]\\d\\d|800)\\d{4}",[7],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[2-589]"]]],0,0,0,0,0,0,[["2(?:2[1-7]|3[0-8]|4[12]|5[1256]|6\\d|7[1-3]|8[1-5])\\d{4}"],["(?:36|5[1-389]|9\\d)\\d{5}"],["800\\d{4}"],0,0,0,0,0,["(?:3[3-5]|4[356])\\d{5}"]]],CW:["599","00","(?:[34]1|60|(?:7|9\\d)\\d)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["[3467]"]],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["9[4-8]"]]],0,0,0,0,0,"[69]",[["9(?:4(?:3[0-5]|4[14]|6\\d)|50\\d|7(?:2[014]|3[02-9]|4[4-9]|6[357]|77|8[7-9])|8(?:3[39]|[46]\\d|7[01]|8[57-9]))\\d{4}"],["953[01]\\d{4}|9(?:5[12467]|6[5-9])\\d{5}"],0,0,0,0,0,["955\\d{5}",[8]],0,["60[0-2]\\d{4}",[7]]]],CX:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d{8}(?:\\d{2})?|8[0-24-9]\\d{7})|[148]\\d{8}|1\\d{5,7}",[6,7,8,9,10,12],0,"0",0,"([59]\\d{7})$|0","8$1",0,0,[["8(?:51(?:0(?:01|30|59|88)|1(?:17|46|75)|2(?:22|35))|91(?:00[6-9]|1(?:[28]1|49|78)|2(?:09|63)|3(?:12|26|75)|4(?:56|97)|64\\d|7(?:0[01]|1[0-2])|958))\\d{3}",[9]],["4(?:79[01]|83[0-389]|94[0-478])\\d{5}|4(?:[0-36]\\d|4[047-9]|5[0-25-9]|7[02-8]|8[0-24-9]|9[0-37-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,0,["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",[9]],["13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",[6,8,10,12]]],"0011"],CY:["357","00","(?:[279]\\d|[58]0)\\d{6}",[8],[["(\\d{2})(\\d{6})","$1 $2",["[257-9]"]]],0,0,0,0,0,0,[["2[2-6]\\d{6}"],["9(?:10|[4-79]\\d)\\d{5}"],["800\\d{5}"],["90[09]\\d{5}"],["700\\d{5}"],0,["(?:50|77)\\d{6}"],0,0,["80[1-9]\\d{5}"]]],CZ:["420","00","(?:[2-578]\\d|60)\\d{7}|9\\d{8,11}",[9,10,11,12],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[2-8]|9[015-7]"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3 $4",["96"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]]],0,0,0,0,0,0,[["(?:2\\d|3[1257-9]|4[16-9]|5[13-9])\\d{7}",[9]],["(?:60[1-8]\\d|7(?:0(?:[2-5]\\d|60)|19[0-4]|[2379]\\d\\d))\\d{5}",[9]],["800\\d{6}",[9]],["9(?:0[05689]|76)\\d{6}",[9]],["70[01]\\d{6}",[9]],["9(?:3\\d{9}|6\\d{7,10})"],["9(?:5\\d|7[2-4])\\d{6}",[9]],0,["9[17]0\\d{6}",[9]],["8[134]\\d{7}",[9]]]],DE:["49","00","[2579]\\d{5,14}|49(?:[34]0|69|8\\d)\\d\\d?|49(?:37|49|60|7[089]|9\\d)\\d{1,3}|49(?:2[024-9]|3[2-689]|7[1-7])\\d{1,8}|(?:1|[368]\\d|4[0-8])\\d{3,13}|49(?:[015]\\d|2[13]|31|[46][1-8])\\d{1,9}",[4,5,6,7,8,9,10,11,12,13,14,15],[["(\\d{2})(\\d{3,13})","$1 $2",["3[02]|40|[68]9"],"0$1"],["(\\d{3})(\\d{3,12})","$1 $2",["2(?:0[1-389]|1[124]|2[18]|3[14])|3(?:[35-9][15]|4[015])|906|(?:2[4-9]|4[2-9]|[579][1-9]|[68][1-8])1","2(?:0[1-389]|12[0-8])|3(?:[35-9][15]|4[015])|906|2(?:[13][14]|2[18])|(?:2[4-9]|4[2-9]|[579][1-9]|[68][1-8])1"],"0$1"],["(\\d{4})(\\d{2,11})","$1 $2",["[24-6]|3(?:[3569][02-46-9]|4[2-4679]|7[2-467]|8[2-46-8])|70[2-8]|8(?:0[2-9]|[1-8])|90[7-9]|[79][1-9]","[24-6]|3(?:3(?:0[1-467]|2[127-9]|3[124578]|7[1257-9]|8[1256]|9[145])|4(?:2[135]|4[13578]|9[1346])|5(?:0[14]|2[1-3589]|6[1-4]|7[13468]|8[13568])|6(?:2[1-489]|3[124-6]|6[13]|7[12579]|8[1-356]|9[135])|7(?:2[1-7]|4[145]|6[1-5]|7[1-4])|8(?:21|3[1468]|6|7[1467]|8[136])|9(?:0[12479]|2[1358]|4[134679]|6[1-9]|7[136]|8[147]|9[1468]))|70[2-8]|8(?:0[2-9]|[1-8])|90[7-9]|[79][1-9]|3[68]4[1347]|3(?:47|60)[1356]|3(?:3[46]|46|5[49])[1246]|3[4579]3[1357]"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["138"],"0$1"],["(\\d{5})(\\d{2,10})","$1 $2",["3"],"0$1"],["(\\d{3})(\\d{5,11})","$1 $2",["181"],"0$1"],["(\\d{3})(\\d)(\\d{4,10})","$1 $2 $3",["1(?:3|80)|9"],"0$1"],["(\\d{3})(\\d{7,8})","$1 $2",["1[67]"],"0$1"],["(\\d{3})(\\d{7,12})","$1 $2",["8"],"0$1"],["(\\d{5})(\\d{6})","$1 $2",["185","1850","18500"],"0$1"],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{4})(\\d{7})","$1 $2",["18[68]"],"0$1"],["(\\d{4})(\\d{7})","$1 $2",["15[1279]"],"0$1"],["(\\d{5})(\\d{6})","$1 $2",["15[03568]","15(?:[0568]|31)"],"0$1"],["(\\d{3})(\\d{8})","$1 $2",["18"],"0$1"],["(\\d{3})(\\d{2})(\\d{7,8})","$1 $2 $3",["1(?:6[023]|7)"],"0$1"],["(\\d{4})(\\d{2})(\\d{7})","$1 $2 $3",["15[279]"],"0$1"],["(\\d{3})(\\d{2})(\\d{8})","$1 $2 $3",["15"],"0$1"]],"0",0,0,0,0,0,[["32\\d{9,11}|49[1-6]\\d{10}|322\\d{6}|49[0-7]\\d{3,9}|(?:[34]0|[68]9)\\d{3,13}|(?:2(?:0[1-689]|[1-3569]\\d|4[0-8]|7[1-7]|8[0-7])|3(?:[3569]\\d|4[0-79]|7[1-7]|8[1-8])|4(?:1[02-9]|[2-48]\\d|5[0-6]|6[0-8]|7[0-79])|5(?:0[2-8]|[124-6]\\d|[38][0-8]|[79][0-7])|6(?:0[02-9]|[1-358]\\d|[47][0-8]|6[1-9])|7(?:0[2-8]|1[1-9]|[27][0-7]|3\\d|[4-6][0-8]|8[0-5]|9[013-7])|8(?:0[2-9]|1[0-79]|2\\d|3[0-46-9]|4[0-6]|5[013-9]|6[1-8]|7[0-8]|8[0-24-6])|9(?:0[6-9]|[1-4]\\d|[589][0-7]|6[0-8]|7[0-467]))\\d{3,12}",[5,6,7,8,9,10,11,12,13,14,15]],["15310\\d{6}|1(?:5[0-25-9]\\d|7[013-5])\\d{7}|1(?:6[023]|7[26-9])\\d{7,8}",[10,11]],["800\\d{7,12}",[10,11,12,13,14,15]],["(?:137[7-9]|900(?:[135]|9\\d))\\d{6}",[10,11]],["700\\d{8}",[11]],["1(?:6(?:013|255|399)|7(?:(?:[015]1|[69]3)3|[2-4]55|[78]99))\\d{7,8}|15(?:(?:[03-68]00|113)\\d|2\\d55|7\\d99|9\\d33)\\d{7}",[12,13]],["18(?:1\\d{5,11}|[2-9]\\d{8})",[8,9,10,11,12,13,14]],["16(?:4\\d{1,10}|[89]\\d{1,11})",[4,5,6,7,8,9,10,11,12,13,14]],0,["180\\d{5,11}|13(?:7[1-6]\\d\\d|8)\\d{4}",[7,8,9,10,11,12,13,14]]]],DJ:["253","00","(?:2\\d|77)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[27]"]]],0,0,0,0,0,0,[["2(?:1[2-5]|7[45])\\d{5}"],["77\\d{6}"]]],DK:["45","00","[2-9]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-9]"]]],0,0,0,0,0,0,[["(?:2(?:[0-59][1-9]|[6-8]\\d)|3(?:[0-3][1-9]|4[13]|5[1-58]|6[1347-9]|7\\d|8[1-8]|9[1-79])|4(?:[0-25][1-9]|[34][2-9]|6[13-579]|7[13579]|8[1-47]|9[127])|5(?:[0-36][1-9]|4[146-9]|5[3-57-9]|7[568]|8[1-358]|9[1-69])|6(?:[0135][1-9]|2[1-68]|4[2-8]|6[1689]|[78]\\d|9[15689])|7(?:[0-69][1-9]|7[3-9]|8[147])|8(?:[16-9][1-9]|2[1-58])|9(?:[1-47-9][1-9]|6\\d))\\d{5}"],["(?:2[6-8]|37|6[78]|96)\\d{6}|(?:2[0-59]|3[0-689]|[457]\\d|6[0-69]|8[126-9]|9[1-47-9])[1-9]\\d{5}"],["80\\d{6}"],["90\\d{6}"]]],DM:["1","011","(?:[58]\\d\\d|767|900)\\d{7}",[10],0,"1",0,"([2-7]\\d{6})$|1","767$1",0,"767",[["767(?:2(?:55|66)|4(?:2[01]|4[0-25-9])|50[0-4])\\d{4}"],["767(?:2(?:[2-4689]5|7[5-7])|31[5-7]|61[1-8]|70[1-6])\\d{4}"],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],["900[2-9]\\d{6}"],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}"]]],DO:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,0,0,0,"8001|8[024]9",[["8(?:[04]9[2-9]\\d\\d|29(?:2(?:[0-59]\\d|6[04-9]|7[0-27]|8[0237-9])|3(?:[0-35-9]\\d|4[7-9])|[45]\\d\\d|6(?:[0-27-9]\\d|[3-5][1-9]|6[0135-8])|7(?:0[013-9]|[1-37]\\d|4[1-35689]|5[1-4689]|6[1-57-9]|8[1-79]|9[1-8])|8(?:0[146-9]|1[0-48]|[248]\\d|3[1-79]|5[01589]|6[013-68]|7[124-8]|9[0-8])|9(?:[0-24]\\d|3[02-46-9]|5[0-79]|60|7[0169]|8[57-9]|9[02-9])))\\d{4}"],["8[024]9[2-9]\\d{6}"],["8(?:00(?:14|[2-9]\\d)|(?:33|44|55|66|77|88)[2-9]\\d)\\d{5}"],["900[2-9]\\d{6}"],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}"]]],DZ:["213","00","(?:[1-4]|[5-79]\\d|80)\\d{7}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[1-4]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["9"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-8]"],"0$1"]],"0",0,0,0,0,0,[["9619\\d{5}|(?:1\\d|2[013-79]|3[0-8]|4[013-689])\\d{6}"],["(?:5(?:4[0-29]|5\\d|6[0-3])|6(?:[569]\\d|7[0-6])|7[7-9]\\d)\\d{6}",[9]],["800\\d{6}",[9]],["80[3-689]1\\d{5}",[9]],0,0,0,0,["98[23]\\d{6}",[9]],["80[12]1\\d{5}",[9]]]],EC:["593","00","1\\d{9,10}|(?:[2-7]|9\\d)\\d{7}",[8,9,10,11],[["(\\d)(\\d{3})(\\d{4})","$1 $2-$3",["[2-7]"],"(0$1)",0,"$1-$2-$3"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["9"],"0$1"],["(\\d{4})(\\d{3})(\\d{3,4})","$1 $2 $3",["1"]]],"0",0,0,0,0,0,[["[2-7][2-7]\\d{6}",[8]],["964[0-2]\\d{5}|9(?:39|[57][89]|6[0-36-9]|[89]\\d)\\d{6}",[9]],["1800\\d{7}|1[78]00\\d{6}",[10,11]],0,0,0,0,0,["[2-7]890\\d{4}",[8]]]],EE:["372","00","8\\d{9}|[4578]\\d{7}|(?:[3-8]\\d|90)\\d{5}",[7,8,10],[["(\\d{3})(\\d{4})","$1 $2",["[369]|4[3-8]|5(?:[0-2]|5[0-478]|6[45])|7[1-9]|88","[369]|4[3-8]|5(?:[02]|1(?:[0-8]|95)|5[0-478]|6(?:4[0-4]|5[1-589]))|7[1-9]|88"]],["(\\d{4})(\\d{3,4})","$1 $2",["[45]|8(?:00|[1-49])","[45]|8(?:00[1-9]|[1-49])"]],["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["7"]],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["8"]]],0,0,0,0,0,0,[["(?:3[23589]|4[3-8]|6\\d|7[1-9]|88)\\d{5}",[7]],["(?:5\\d{5}|8(?:1(?:0(?:0(?:00|[178]\\d)|[3-9]\\d\\d)|(?:1(?:0[2-6]|1\\d)|(?:2[0-59]|[3-79]\\d)\\d)\\d)|2(?:0(?:0(?:00|4\\d)|(?:19|[2-7]\\d)\\d)|(?:(?:[124-69]\\d|3[5-9])\\d|7(?:[0-79]\\d|8[13-9])|8(?:[2-6]\\d|7[01]))\\d)|[349]\\d{4}))\\d\\d|5(?:(?:[02]\\d|5[0-478])\\d|1(?:[0-8]\\d|95)|6(?:4[0-4]|5[1-589]))\\d{3}",[7,8]],["800(?:(?:0\\d\\d|1)\\d|[2-9])\\d{3}"],["(?:40\\d\\d|900)\\d{4}",[7,8]],["70[0-2]\\d{5}",[8]]]],EG:["20","00","[189]\\d{8,9}|[24-6]\\d{8}|[135]\\d{7}",[8,9,10],[["(\\d)(\\d{7,8})","$1 $2",["[23]"],"0$1"],["(\\d{2})(\\d{6,7})","$1 $2",["1[35]|[4-6]|8[2468]|9[235-7]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],["(\\d{2})(\\d{8})","$1 $2",["1"],"0$1"]],"0",0,0,0,0,0,[["13[23]\\d{6}|(?:15|57)\\d{6,7}|(?:2\\d|3|4[05-8]|5[05]|6[24-689]|8[2468]|9[235-7])\\d{7}",[8,9]],["1[0-25]\\d{8}",[10]],["800\\d{7}",[10]],["900\\d{7}",[10]]]],EH:["212","00","[5-8]\\d{8}",[9],0,"0",0,0,0,0,"528[89]",[["528[89]\\d{5}"],["(?:6(?:[0-79]\\d|8[0-247-9])|7(?:[0167]\\d|2[0-8]|5[0-3]|8[0-7]))\\d{6}"],["80[0-7]\\d{6}"],["89\\d{7}"],0,0,0,0,["(?:592(?:4[0-2]|93)|80[89]\\d\\d)\\d{4}"]]],ER:["291","00","[178]\\d{6}",[7],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[178]"],"0$1"]],"0",0,0,0,0,0,[["(?:1(?:1[12568]|[24]0|55|6[146])|8\\d\\d)\\d{4}"],["(?:17[1-3]|7\\d\\d)\\d{4}"]]],ES:["34","00","[5-9]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[89]00"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-9]"]]],0,0,0,0,0,0,[["96906(?:0[0-8]|1[1-9]|[2-9]\\d)\\d\\d|9(?:69(?:0[0-57-9]|[1-9]\\d)|73(?:[0-8]\\d|9[1-9]))\\d{4}|(?:8(?:[1356]\\d|[28][0-8]|[47][1-9])|9(?:[135]\\d|[268][0-8]|4[1-9]|7[124-9]))\\d{6}"],["(?:590[16]00\\d|9(?:6906(?:09|10)|7390\\d\\d))\\d\\d|(?:6\\d|7[1-48])\\d{7}"],["[89]00\\d{6}"],["80[367]\\d{6}"],["70\\d{7}"],0,["51\\d{7}"],0,0,["90[12]\\d{6}"]]],ET:["251","00","(?:11|[2-579]\\d)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-579]"],"0$1"]],"0",0,0,0,0,0,[["11667[01]\\d{3}|(?:11(?:1(?:1[124]|2[2-7]|3[1-5]|5[5-8]|8[6-8])|2(?:13|3[6-8]|5[89]|7[05-9]|8[2-6])|3(?:2[01]|3[0-289]|4[1289]|7[1-4]|87)|4(?:1[69]|3[2-49]|4[0-3]|6[5-8]|7\\d)|5(?:1[578]|44|5[0-4])|6(?:1[578]|2[69]|39|4[5-7]|5[0-5]|6[0-59]|8[015-8]))|2(?:2(?:11[1-9]|22[0-7]|33\\d|44[1467]|66[1-68])|5(?:11[124-6]|33[2-8]|44[1467]|55[14]|66[1-3679]|77[124-79]|880))|3(?:3(?:11[0-46-8]|(?:22|55)[0-6]|33[0134689]|44[04]|66[01467])|4(?:44[0-8]|55[0-69]|66[0-3]|77[1-5]))|4(?:6(?:119|22[0-24-7]|33[1-5]|44[13-69]|55[14-689]|660|88[1-4])|7(?:(?:11|22)[1-9]|33[13-7]|44[13-6]|55[1-689]))|5(?:7(?:227|55[05]|(?:66|77)[14-8])|8(?:11[149]|22[013-79]|33[0-68]|44[013-8]|550|66[1-5]|77\\d)))\\d{4}"],["700[1-9]\\d{5}|(?:7(?:0[1-9]|1[0-8]|22|77|86|99)|9\\d\\d)\\d{6}"]]],FI:["358","00|99(?:[01469]|5(?:[14]1|3[23]|5[59]|77|88|9[09]))","[1-35689]\\d{4}|7\\d{10,11}|(?:[124-7]\\d|3[0-46-9])\\d{8}|[1-9]\\d{5,8}",[5,6,7,8,9,10,11,12],[["(\\d{5})","$1",["20[2-59]"],"0$1"],["(\\d{3})(\\d{3,7})","$1 $2",["(?:[1-3]0|[68])0|70[07-9]"],"0$1"],["(\\d{2})(\\d{4,8})","$1 $2",["[14]|2[09]|50|7[135]"],"0$1"],["(\\d{2})(\\d{6,10})","$1 $2",["7"],"0$1"],["(\\d)(\\d{4,9})","$1 $2",["(?:19|[2568])[1-8]|3(?:0[1-9]|[1-9])|9"],"0$1"]],"0",0,0,0,0,"1[03-79]|[2-9]",[["1[3-7][1-8]\\d{3,6}|(?:19[1-8]|[23568][1-8]\\d|9(?:00|[1-8]\\d))\\d{2,6}",[5,6,7,8,9]],["4946\\d{2,6}|(?:4[0-8]|50)\\d{4,8}",[6,7,8,9,10]],["800\\d{4,6}",[7,8,9]],["[67]00\\d{5,6}",[8,9]],0,0,["20\\d{4,8}|60[12]\\d{5,6}|7(?:099\\d{4,5}|5[03-9]\\d{3,7})|20[2-59]\\d\\d|(?:606|7(?:0[78]|1|3\\d))\\d{7}|(?:10|29|3[09]|70[1-5]\\d)\\d{4,8}"]],"00"],FJ:["679","0(?:0|52)","45\\d{5}|(?:0800\\d|[235-9])\\d{6}",[7,11],[["(\\d{3})(\\d{4})","$1 $2",["[235-9]|45"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["0"]]],0,0,0,0,0,0,[["603\\d{4}|(?:3[0-5]|6[25-7]|8[58])\\d{5}",[7]],["(?:[279]\\d|45|5[01568]|8[034679])\\d{5}",[7]],["0800\\d{7}",[11]]],"00"],FK:["500","00","[2-7]\\d{4}",[5],0,0,0,0,0,0,0,[["[2-47]\\d{4}"],["[56]\\d{4}"]]],FM:["691","00","(?:[39]\\d\\d|820)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[389]"]]],0,0,0,0,0,0,[["31(?:00[67]|208|309)\\d\\d|(?:3(?:[2357]0[1-9]|602|804|905)|(?:820|9[2-6]\\d)\\d)\\d{3}"],["31(?:00[67]|208|309)\\d\\d|(?:3(?:[2357]0[1-9]|602|804|905)|(?:820|9[2-7]\\d)\\d)\\d{3}"]]],FO:["298","00","[2-9]\\d{5}",[6],[["(\\d{6})","$1",["[2-9]"]]],0,0,"(10(?:01|[12]0|88))",0,0,0,[["(?:20|[34]\\d|8[19])\\d{4}"],["(?:[27][1-9]|5\\d|9[16])\\d{4}"],["80[257-9]\\d{3}"],["90(?:[13-5][15-7]|2[125-7]|9\\d)\\d\\d"],0,0,0,0,["(?:6[0-36]|88)\\d{4}"]]],FR:["33","00","[1-9]\\d{8}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0 $1"],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[1-79]"],"0$1"]],"0",0,0,0,0,0,[["(?:26[013-9]|59[1-35-9])\\d{6}|(?:[13]\\d|2[0-57-9]|4[1-9]|5[0-8])\\d{7}"],["(?:6(?:[0-24-8]\\d|3[0-8]|9[589])|7[3-9]\\d)\\d{6}"],["80[0-5]\\d{6}"],["836(?:0[0-36-9]|[1-9]\\d)\\d{4}|8(?:1[2-9]|2[2-47-9]|3[0-57-9]|[569]\\d|8[0-35-9])\\d{6}"],0,0,["80[6-9]\\d{6}"],0,["9\\d{8}"],["8(?:1[01]|2[0156]|4[024]|84)\\d{6}"]]],GA:["241","00","(?:[067]\\d|11)\\d{6}|[2-7]\\d{6}",[7,8],[["(\\d)(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-7]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["0"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["11|[67]"],"0$1"]],0,0,"0(11\\d{6}|60\\d{6}|61\\d{6}|6[256]\\d{6}|7[467]\\d{6})","$1",0,0,[["[01]1\\d{6}",[8]],["(?:(?:0[2-7]|7[467])\\d|6(?:0[0-4]|10|[256]\\d))\\d{5}|[2-7]\\d{6}"]]],GB:["44","00","[1-357-9]\\d{9}|[18]\\d{8}|8\\d{6}",[7,9,10],[["(\\d{3})(\\d{4})","$1 $2",["800","8001","80011","800111","8001111"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["845","8454","84546","845464"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["800"],"0$1"],["(\\d{5})(\\d{4,5})","$1 $2",["1(?:38|5[23]|69|76|94)","1(?:(?:38|69)7|5(?:24|39)|768|946)","1(?:3873|5(?:242|39[4-6])|(?:697|768)[347]|9467)"],"0$1"],["(\\d{4})(\\d{5,6})","$1 $2",["1(?:[2-69][02-9]|[78])"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["[25]|7(?:0|6[02-9])","[25]|7(?:0|6(?:[03-9]|2[356]))"],"0$1"],["(\\d{4})(\\d{6})","$1 $2",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[1389]"],"0$1"]],"0",0,0,0,0,0,[["(?:1(?:1(?:3(?:[0-58]\\d\\d|73[0-35])|4(?:(?:[0-5]\\d|70)\\d|69[7-9])|(?:(?:5[0-26-9]|[78][0-49])\\d|6(?:[0-4]\\d|50))\\d)|(?:2(?:(?:0[024-9]|2[3-9]|3[3-79]|4[1-689]|[58][02-9]|6[0-47-9]|7[013-9]|9\\d)\\d|1(?:[0-7]\\d|8[0-3]))|(?:3(?:0\\d|1[0-8]|[25][02-9]|3[02-579]|[468][0-46-9]|7[1-35-79]|9[2-578])|4(?:0[03-9]|[137]\\d|[28][02-57-9]|4[02-69]|5[0-8]|[69][0-79])|5(?:0[1-35-9]|[16]\\d|2[024-9]|3[015689]|4[02-9]|5[03-9]|7[0-35-9]|8[0-468]|9[0-57-9])|6(?:0[034689]|1\\d|2[0-35689]|[38][013-9]|4[1-467]|5[0-69]|6[13-9]|7[0-8]|9[0-24578])|7(?:0[0246-9]|2\\d|3[0236-8]|4[03-9]|5[0-46-9]|6[013-9]|7[0-35-9]|8[024-9]|9[02-9])|8(?:0[35-9]|2[1-57-9]|3[02-578]|4[0-578]|5[124-9]|6[2-69]|7\\d|8[02-9]|9[02569])|9(?:0[02-589]|[18]\\d|2[02-689]|3[1-57-9]|4[2-9]|5[0-579]|6[2-47-9]|7[0-24578]|9[2-57]))\\d)\\d)|2(?:0[013478]|3[0189]|4[017]|8[0-46-9]|9[0-2])\\d{3})\\d{4}|1(?:2(?:0(?:46[1-4]|87[2-9])|545[1-79]|76(?:2\\d|3[1-8]|6[1-6])|9(?:7(?:2[0-4]|3[2-5])|8(?:2[2-8]|7[0-47-9]|8[3-5])))|3(?:6(?:38[2-5]|47[23])|8(?:47[04-9]|64[0157-9]))|4(?:044[1-7]|20(?:2[23]|8\\d)|6(?:0(?:30|5[2-57]|6[1-8]|7[2-8])|140)|8(?:052|87[1-3]))|5(?:2(?:4(?:3[2-79]|6\\d)|76\\d)|6(?:26[06-9]|686))|6(?:06(?:4\\d|7[4-79])|295[5-7]|35[34]\\d|47(?:24|61)|59(?:5[08]|6[67]|74)|9(?:55[0-4]|77[23]))|7(?:26(?:6[13-9]|7[0-7])|(?:442|688)\\d|50(?:2[0-3]|[3-68]2|76))|8(?:27[56]\\d|37(?:5[2-5]|8[239])|843[2-58])|9(?:0(?:0(?:6[1-8]|85)|52\\d)|3583|4(?:66[1-8]|9(?:2[01]|81))|63(?:23|3[1-4])|9561))\\d{3}",[9,10]],["7(?:457[0-57-9]|700[01]|911[028])\\d{5}|7(?:[1-3]\\d\\d|4(?:[0-46-9]\\d|5[0-689])|5(?:0[0-8]|[13-9]\\d|2[0-35-9])|7(?:0[1-9]|[1-7]\\d|8[02-9]|9[0-689])|8(?:[014-9]\\d|[23][0-8])|9(?:[024-9]\\d|1[02-9]|3[0-689]))\\d{6}",[10]],["80[08]\\d{7}|800\\d{6}|8001111"],["(?:8(?:4[2-5]|7[0-3])|9(?:[01]\\d|8[2-49]))\\d{7}|845464\\d",[7,10]],["70\\d{8}",[10]],0,["(?:3[0347]|55)\\d{8}",[10]],["76(?:464|652)\\d{5}|76(?:0[0-28]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}",[10]],["56\\d{8}",[10]]],0," x"],GD:["1","011","(?:473|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","473$1",0,"473",[["473(?:2(?:3[0-2]|69)|3(?:2[89]|86)|4(?:[06]8|3[5-9]|4[0-4]|5[59]|73|90)|63[68]|7(?:58|84)|800|938)\\d{4}"],["473(?:4(?:0[2-79]|1[04-9]|2[0-5]|49|5[6-8])|5(?:2[01]|3[3-8])|901)\\d{4}"],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],["900[2-9]\\d{6}"],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}"]]],GE:["995","00","(?:[3-57]\\d\\d|800)\\d{6}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["70"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["32"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[57]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[348]"],"0$1"]],"0",0,0,0,0,0,[["(?:3(?:[256]\\d|4[124-9]|7[0-4])|4(?:1\\d|2[2-7]|3[1-79]|4[2-8]|7[239]|9[1-7]))\\d{6}"],["5(?:(?:(?:0555|1(?:[17]77|555))[5-9]|757(?:7[7-9]|8[01]))\\d|22252[0-4])\\d\\d|5(?:0(?:0[17]0|505)|1(?:0[01]0|1(?:07|33|51))|2(?:0[02]0|2[25]2)|3(?:0[03]0|3[35]3)|(?:40[04]|900)0|5222)[0-4]\\d{3}|(?:5(?:0(?:0(?:0\\d|11|22|3[0-6]|44|5[05]|77|88|9[09])|(?:[14]\\d|77)\\d|22[02])|1(?:1(?:[03][01]|[124]\\d|5[2-6]|7[0-4])|4\\d\\d)|[23]555|4(?:4\\d\\d|555)|5(?:[0157-9]\\d\\d|200|333|444)|6[89]\\d\\d|7(?:[0147-9]\\d\\d|5(?:00|[57]5))|8(?:0(?:[018]\\d|2[0-4])|5(?:55|8[89])|8(?:55|88))|9(?:090|[1-35-9]\\d\\d))|790\\d\\d)\\d{4}"],["800\\d{6}"],0,0,0,0,0,["70[67]\\d{6}"]]],GF:["594","00","(?:[56]94\\d|7093)\\d{5}|(?:80|9\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-7]|9[47]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[89]"],"0$1"]],"0",0,0,0,0,0,[["594(?:[02-49]\\d|1[0-5]|5[6-9]|6[0-3]|80)\\d{4}"],["(?:694(?:[0-249]\\d|3[0-8])|7093[0-3])\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["9(?:(?:396|76\\d)\\d|476[0-6])\\d{4}"]]],GG:["44","00","(?:1481|[357-9]\\d{3})\\d{6}|8\\d{6}(?:\\d{2})?",[7,9,10],0,"0",0,"([25-9]\\d{5})$|0","1481$1",0,0,[["1481[25-9]\\d{5}",[10]],["7(?:(?:781|839)\\d|911[17])\\d{5}",[10]],["80[08]\\d{7}|800\\d{6}|8001111"],["(?:8(?:4[2-5]|7[0-3])|9(?:[01]\\d|8[0-3]))\\d{7}|845464\\d",[7,10]],["70\\d{8}",[10]],0,["(?:3[0347]|55)\\d{8}",[10]],["76(?:464|652)\\d{5}|76(?:0[0-28]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}",[10]],["56\\d{8}",[10]]]],GH:["233","00","(?:[235]\\d{3}|800)\\d{5}",[8,9],[["(\\d{3})(\\d{5})","$1 $2",["8"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[235]"],"0$1"]],"0",0,0,0,0,0,[["3082[0-5]\\d{4}|3(?:0(?:[237]\\d|8[01])|[167](?:2[0-6]|7\\d|80)|2(?:2[0-5]|7\\d|80)|3(?:2[0-3]|7\\d|80)|4(?:2[013-9]|3[01]|7\\d|80)|5(?:2[0-7]|7\\d|80)|8(?:2[0-2]|7\\d|80)|9(?:[28]0|7\\d))\\d{5}",[9]],["(?:2(?:[0346-9]\\d|5[67])|5(?:[03-7]\\d|9[1-9]))\\d{6}",[9]],["800\\d{5}",[8]]]],GI:["350","00","(?:[25]\\d|60)\\d{6}",[8],[["(\\d{3})(\\d{5})","$1 $2",["2"]]],0,0,0,0,0,0,[["2190[0-2]\\d{3}|2(?:0(?:[02]\\d|3[01])|16[24-9]|2[2-5]\\d)\\d{4}"],["5251[0-4]\\d{3}|(?:5(?:[146-8]\\d\\d|250)|60(?:1[01]|6\\d))\\d{4}"]]],GL:["299","00","(?:19|[2-689]\\d|70)\\d{4}",[6],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["19|[2-9]"]]],0,0,0,0,0,0,[["(?:19|3[1-7]|[68][1-9]|70|9\\d)\\d{4}"],["[245]\\d{5}"],["80\\d{4}"],0,0,0,0,0,["3[89]\\d{4}"]]],GM:["220","00","[2-9]\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]],0,0,0,0,0,0,[["(?:4(?:[23]\\d\\d|4(?:1[024679]|[6-9]\\d))|5(?:5(?:3\\d|4[0-7])|6[67]\\d|7(?:1[04]|2[035]|3[58]|48))|8\\d{3})\\d{3}"],["556\\d{4}|(?:[23679]\\d|4[015]|5[0-489])\\d{5}"]]],GN:["224","00","722\\d{6}|(?:3|6\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["3"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[67]"]]],0,0,0,0,0,0,[["3(?:0(?:24|3[12]|4[1-35-7]|5[13]|6[189]|[78]1|9[1478])|1\\d\\d)\\d{4}",[8]],["6[0-356]\\d{7}",[9]],0,0,0,0,0,0,["722\\d{6}",[9]]]],GP:["590","00","(?:590\\d|7090)\\d{5}|(?:69|80|9\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-79]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0",0,0,0,0,0,[["590(?:0[1-68]|[14][0-24-9]|2[0-68]|3[1-9]|5[3-579]|[68][0-689]|7[08]|9\\d)\\d{4}"],["(?:69(?:0\\d\\d|1(?:2[2-9]|3[0-5])|4(?:0[89]|1[2-6]|9\\d)|6(?:1[016-9]|5[0-4]|[67]\\d))|7090[0-4])\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["9(?:(?:39[5-7]|76[018])\\d|475[0-6])\\d{4}"]]],GQ:["240","00","222\\d{6}|(?:3\\d|55|[89]0)\\d{7}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[235]"]],["(\\d{3})(\\d{6})","$1 $2",["[89]"]]],0,0,0,0,0,0,[["33[0-24-9]\\d[46]\\d{4}|3(?:33|5\\d)\\d[7-9]\\d{4}"],["(?:222|55\\d)\\d{6}"],["80\\d[1-9]\\d{5}"],["90\\d[1-9]\\d{5}"]]],GR:["30","00","5005000\\d{3}|8\\d{9,11}|(?:[269]\\d|70)\\d{8}",[10,11,12],[["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["21|7"]],["(\\d{4})(\\d{6})","$1 $2",["2(?:2|3[2-57-9]|4[2-469]|5[2-59]|6[2-9]|7[2-69]|8[2-49])|5"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[2689]"]],["(\\d{3})(\\d{3,4})(\\d{5})","$1 $2 $3",["8"]]],0,0,0,0,0,0,[["2(?:1\\d\\d|2(?:2[1-46-9]|[36][1-8]|4[1-7]|5[1-4]|7[1-5]|[89][1-9])|3(?:1\\d|2[1-57]|[35][1-3]|4[13]|7[1-7]|8[124-6]|9[1-79])|4(?:1\\d|2[1-8]|3[1-4]|4[13-5]|6[1-578]|9[1-5])|5(?:1\\d|[29][1-4]|3[1-5]|4[124]|5[1-6])|6(?:1\\d|[269][1-6]|3[1245]|4[1-7]|5[13-9]|7[14]|8[1-5])|7(?:1\\d|2[1-5]|3[1-6]|4[1-7]|5[1-57]|6[135]|9[125-7])|8(?:1\\d|2[1-5]|[34][1-4]|9[1-57]))\\d{6}",[10]],["68[57-9]\\d{7}|(?:69|94)\\d{8}",[10]],["800\\d{7,9}"],["90[19]\\d{7}",[10]],["70\\d{8}",[10]],0,["5005000\\d{3}",[10]],0,0,["8(?:0[16]|12|[27]5|50)\\d{7}",[10]]]],GT:["502","00","80\\d{6}|(?:1\\d{3}|[2-7])\\d{7}",[8,11],[["(\\d{4})(\\d{4})","$1 $2",["[2-8]"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]]],0,0,0,0,0,0,[["[267][2-9]\\d{6}",[8]],["(?:[3-5]\\d\\d|80[0-4])\\d{5}",[8]],["18[01]\\d{8}",[11]],["19\\d{9}",[11]]]],GU:["1","011","(?:[58]\\d\\d|671|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","671$1",0,"671",[["671(?:2\\d\\d|3(?:00|3[39]|4[349]|55|6[26])|4(?:00|56|7[1-9]|8[02-9])|5(?:55|6[2-5]|88)|6(?:3[2-578]|4[24-9]|5[34]|78|8[235-9])|7(?:[0479]7|2[0167]|3[45]|8[7-9])|8(?:[2-57-9]8|6[478])|9(?:2[29]|6[79]|7[1279]|8[7-9]|9[78]))\\d{4}"],[""],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],["900[2-9]\\d{6}"],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}"]]],GW:["245","00","[49]\\d{8}|4\\d{6}",[7,9],[["(\\d{3})(\\d{4})","$1 $2",["40"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[49]"]]],0,0,0,0,0,0,[["443\\d{6}",[9]],["9(?:5\\d|6[569]|77)\\d{6}",[9]],0,0,0,0,0,0,["40\\d{5}",[7]]]],GY:["592","001","(?:[2-8]\\d{3}|9008)\\d{3}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]],0,0,0,0,0,0,[["(?:2(?:1[6-9]|2[0-35-9]|3[1-4]|5[3-9]|6\\d|7[0-79])|3(?:2[25-9]|3\\d)|4(?:4[0-24]|5[56])|50[0-6]|77[1-57])\\d{4}"],["(?:510|6\\d\\d|7(?:[0-5]\\d|6[019]|70))\\d{4}"],["(?:289|8(?:00|6[28]|88|99))\\d{4}"],["9008\\d{3}"],0,0,0,0,["515\\d{4}"]]],HK:["852","00(?:30|5[09]|[126-9]?)","8[0-46-9]\\d{6,7}|9\\d{4,7}|(?:[2-7]|9\\d{3})\\d{7}",[5,6,7,8,9,11],[["(\\d{3})(\\d{2,5})","$1 $2",["900","9003"]],["(\\d{4})(\\d{4})","$1 $2",["[2-7]|8[1-4]|9(?:0[1-9]|[1-8])"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]],["(\\d{3})(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]]],0,0,0,0,0,0,[["(?:2(?:[13-9]\\d|2[013-9])\\d|3(?:(?:[1569][0-24-9]|4[0-246-9]|7[0-24-69])\\d|8(?:4[0-8]|[579]\\d|6[0-5]))|58(?:0[1-9]|1[2-9]))\\d{4}",[8]],["(?:4(?:44[0-35-9]|6(?:4[0-57-9]|6[0-4])|7(?:3[0-4]|4[0-48]|6[0-5]))|5(?:35[4-8]|73[0-6]|95[0-8])|6(?:26[013-8]|(?:66|78)[0-5])|70(?:7[1-8]|8[0-8])|84(?:4[0-2]|8[0-35-9])|9(?:29[013-9]|39[014-9]|59[0-4]|899))\\d{4}|(?:4(?:4[0-35-9]|6[0-357-9]|7[0-25])|5(?:[1-59][0-46-9]|6[0-4689]|7[0-246-9])|6(?:0[1-9]|[13-59]\\d|[268][0-57-9]|7[0-79])|70[1-59]|84[0-39]|9(?:0[1-9]|1[02-9]|[2358][0-8]|[467]\\d))\\d{5}",[8]],["800\\d{6}",[9]],["900(?:[0-24-9]\\d{7}|3\\d{1,4})",[5,6,7,8,11]],["8(?:1[0-4679]\\d|2(?:[0-36]\\d|7[0-4])|3(?:[034]\\d|2[09]|70))\\d{4}",[8]],0,["30(?:0[1-9]|[15-7]\\d|2[047]|89)\\d{4}",[8]],["7(?:1(?:0[0-38]|1[0-3679]|3[013]|69|9[0136])|2(?:[02389]\\d|1[18]|7[27-9])|3(?:[0-38]\\d|7[0-369]|9[2357-9])|47\\d|5(?:[178]\\d|5[0-5])|6(?:0[0-7]|2[236-9]|[35]\\d)|7(?:[27]\\d|8[7-9])|8(?:[23689]\\d|7[1-9])|9(?:[025]\\d|6[0-246-8]|7[0-36-9]|8[238]))\\d{4}",[8]]],"00"],HN:["504","00","8\\d{10}|[237-9]\\d{7}",[8,11],[["(\\d{4})(\\d{4})","$1-$2",["[237-9]"]]],0,0,0,0,0,0,[["2(?:2(?:0[0-59]|1[1-9]|[23]\\d|4[02-7]|5[57]|6[245]|7[0135689]|8[01346-9]|9[0-2])|4(?:0[578]|2[3-59]|3[13-9]|4[0-68]|5[1-3589])|5(?:0[2357-9]|1[1-356]|4[03-5]|5\\d|6[014-69]|7[04]|80)|6(?:[056]\\d|17|2[067]|3[047]|4[0-378]|[78][0-8]|9[01])|7(?:0[5-79]|6[46-9]|7[02-9]|8[034]|91)|8(?:79|8[0-357-9]|9[1-57-9]))\\d{4}",[8]],["[37-9]\\d{7}",[8]],["8002\\d{7}",[11]]]],HR:["385","00","[2-69]\\d{8}|80\\d{5,7}|[1-79]\\d{7}|6\\d{6}",[7,8,9],[["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["6[01]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{4})(\\d{3})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["6|7[245]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["9"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-57]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"],"0$1"]],"0",0,0,0,0,0,[["1\\d{7}|(?:2[0-3]|3[1-5]|4[02-47-9]|5[1-3])\\d{6,7}",[8,9]],["9(?:(?:0[1-9]|[12589]\\d)\\d\\d|7(?:[0679]\\d\\d|5(?:[01]\\d|44|55|77|9[5-79])))\\d{4}|98\\d{6}",[8,9]],["80\\d{5,7}"],["6[01459]\\d{6}|6[01]\\d{5}",[7,8]],["7[45]\\d{6}",[8]],0,["62\\d{6,7}|72\\d{6}",[8,9]]]],HT:["509","00","[2-589]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["[2-589]"]]],0,0,0,0,0,0,[["2(?:2\\d|5[1-5]|81|9[149])\\d{5}"],["(?:[34]\\d|5[56])\\d{6}"],["8\\d{7}"],0,0,0,0,0,["9(?:[67][0-4]|8[0-3589]|9\\d)\\d{5}"]]],HU:["36","00","[235-7]\\d{8}|[1-9]\\d{7}",[8,9],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["1"],"(06 $1)"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[27][2-9]|3[2-7]|4[24-9]|5[2-79]|6|8[2-57-9]|9[2-69]"],"(06 $1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-9]"],"06 $1"]],"06",0,0,0,0,0,[["(?:1\\d|[27][2-9]|3[2-7]|4[24-9]|5[2-79]|6[23689]|8[2-57-9]|9[2-69])\\d{6}",[8]],["(?:[257]0|3[01])\\d{7}",[9]],["(?:[48]0\\d|680[29])\\d{5}"],["9[01]\\d{6}",[8]],0,0,["38\\d{7}",[9]],0,["21\\d{7}",[9]]]],ID:["62","00[89]","00[1-9]\\d{9,14}|(?:[1-36]|8\\d{5})\\d{6}|00\\d{9}|[1-9]\\d{8,10}|[2-9]\\d{7}",[7,8,9,10,11,12,13,14,15,16,17],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["15"]],["(\\d{2})(\\d{5,9})","$1 $2",["2[124]|[36]1"],"(0$1)"],["(\\d{3})(\\d{5,7})","$1 $2",["800"],"0$1"],["(\\d{3})(\\d{5,8})","$1 $2",["[2-79]"],"(0$1)"],["(\\d{3})(\\d{3,4})(\\d{3})","$1-$2-$3",["8[1-35-9]"],"0$1"],["(\\d{3})(\\d{6,8})","$1 $2",["1"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["804"],"0$1"],["(\\d{3})(\\d)(\\d{3})(\\d{3})","$1 $2 $3 $4",["80"],"0$1"],["(\\d{3})(\\d{4})(\\d{4,5})","$1-$2-$3",["8"],"0$1"]],"0",0,0,0,0,0,[["2[124]\\d{7,8}|619\\d{8}|2(?:1(?:14|500)|2\\d{3})\\d{3}|61\\d{5,8}|(?:2(?:[35][1-4]|6[0-8]|7[1-6]|8\\d|9[1-8])|3(?:1|[25][1-8]|3[1-68]|4[1-3]|6[1-3568]|7[0-469]|8\\d)|4(?:0[1-589]|1[01347-9]|2[0-36-8]|3[0-24-68]|43|5[1-378]|6[1-5]|7[134]|8[1245])|5(?:1[1-35-9]|2[25-8]|3[124-9]|4[1-3589]|5[1-46]|6[1-8])|6(?:[25]\\d|3[1-69]|4[1-6])|7(?:02|[125][1-9]|[36]\\d|4[1-8]|7[0-36-9])|9(?:0[12]|1[013-8]|2[0-479]|5[125-8]|6[23679]|7[159]|8[01346]))\\d{5,8}",[7,8,9,10,11]],["8[1-35-9]\\d{7,10}",[9,10,11,12]],["00(?:1803\\d{5,11}|7803\\d{7})|(?:177\\d|800)\\d{5,7}",[8,9,10,11,12,13,14,15,16,17]],["809\\d{7}",[10]],0,0,["(?:1500|8071\\d{3})\\d{3}",[7,10]],0,0,["804\\d{7}",[10]]]],IE:["353","00","(?:1\\d|[2569])\\d{6,8}|4\\d{6,9}|7\\d{8}|8\\d{8,9}",[7,8,9,10],[["(\\d{2})(\\d{5})","$1 $2",["2[24-9]|47|58|6[237-9]|9[35-9]"],"(0$1)"],["(\\d{3})(\\d{5})","$1 $2",["[45]0"],"(0$1)"],["(\\d)(\\d{3,4})(\\d{4})","$1 $2 $3",["1"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2569]|4[1-69]|7[14]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["70"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["81"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[78]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["4"],"(0$1)"],["(\\d{2})(\\d)(\\d{3})(\\d{4})","$1 $2 $3 $4",["8"],"0$1"]],"0",0,0,0,0,0,[["(?:1\\d|21)\\d{6,7}|(?:2[24-9]|4(?:0[24]|5\\d|7)|5(?:0[45]|1\\d|8)|6(?:1\\d|[237-9])|9(?:1\\d|[35-9]))\\d{5}|(?:23|4(?:[1-469]|8\\d)|5[23679]|6[4-6]|7[14]|9[04])\\d{7}"],["8(?:22|[35-9]\\d)\\d{6}",[9]],["1800\\d{6}",[10]],["15(?:1[2-8]|[2-8]0|9[089])\\d{6}",[10]],["700\\d{6}",[9]],["88210[1-9]\\d{4}|8(?:[35-79]5\\d\\d|8(?:[013-9]\\d\\d|2(?:[01][1-9]|[2-9]\\d)))\\d{5}",[10]],["818\\d{6}",[9]],0,["76\\d{7}",[9]],["18[59]0\\d{6}",[10]]]],IL:["972","0(?:0|1[2-9])","1\\d{6}(?:\\d{3,5})?|[57]\\d{8}|[1-489]\\d{7}",[7,8,9,10,11,12],[["(\\d{4})(\\d{3})","$1-$2",["125"]],["(\\d{4})(\\d{2})(\\d{2})","$1-$2-$3",["121"]],["(\\d)(\\d{3})(\\d{4})","$1-$2-$3",["[2-489]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["[57]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1-$2-$3",["12"]],["(\\d{4})(\\d{6})","$1-$2",["159"]],["(\\d)(\\d{3})(\\d{3})(\\d{3})","$1-$2-$3-$4",["1[7-9]"]],["(\\d{3})(\\d{1,2})(\\d{3})(\\d{4})","$1-$2 $3-$4",["15"]]],"0",0,0,0,0,0,[["153\\d{8,9}|29[1-9]\\d{5}|(?:2[0-8]|[3489]\\d)\\d{6}",[8,11,12]],["55(?:4(?:[01]0|5[0-2])|57[0-289])\\d{4}|5(?:(?:[0-2][02-9]|[36]\\d|[49][2-9]|8[3-7])\\d|5(?:01|2\\d|3[0-3]|4[34]|5[0-25689]|6[6-8]|7[0-267]|8[7-9]|9[1-9]))\\d{5}",[9]],["1(?:255|80[019]\\d{3})\\d{3}",[7,10]],["1212\\d{4}|1(?:200|9(?:0[0-2]|19))\\d{6}",[8,10]],0,["151\\d{8,9}",[11,12]],["1599\\d{6}",[10]],0,["7(?:38(?:[05]\\d|8[08])|8(?:33|55|77|81)\\d)\\d{4}|7(?:18|2[23]|3[237]|47|6[258]|7\\d|82|9[2-9])\\d{6}",[9]],["1700\\d{6}",[10]]]],IM:["44","00","1624\\d{6}|(?:[3578]\\d|90)\\d{8}",[10],0,"0",0,"([25-8]\\d{5})$|0","1624$1",0,"74576|(?:16|7[56])24",[["1624(?:230|[5-8]\\d\\d)\\d{3}"],["76245[06]\\d{4}|7(?:4576|[59]24\\d|624[0-4689])\\d{5}"],["808162\\d{4}"],["8(?:440[49]06|72299\\d)\\d{3}|(?:8(?:45|70)|90[0167])624\\d{4}"],["70\\d{8}"],0,["3440[49]06\\d{3}|(?:3(?:08162|3\\d{4}|45624|7(?:0624|2299))|55\\d{4})\\d{4}"],0,["56\\d{8}"]]],IN:["91","00","(?:000800|[2-9]\\d\\d)\\d{7}|1\\d{7,12}",[8,9,10,11,12,13],[["(\\d{8})","$1",["5(?:0|2[23]|3[03]|[67]1|88)","5(?:0|2(?:21|3)|3(?:0|3[23])|616|717|888)","5(?:0|2(?:21|3)|3(?:0|3[23])|616|717|8888)"],0,1],["(\\d{4})(\\d{4,5})","$1 $2",["180","1800"],0,1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["140"],0,1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["11|2[02]|33|4[04]|79[1-7]|80[2-46]","11|2[02]|33|4[04]|79(?:[1-6]|7[19])|80(?:[2-4]|6[0-589])","11|2[02]|33|4[04]|79(?:[124-6]|3(?:[02-9]|1[0-24-9])|7(?:1|9[1-6]))|80(?:[2-4]|6[0-589])"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1(?:2[0-249]|3[0-25]|4[145]|[68]|7[1257])|2(?:1[257]|3[013]|4[01]|5[0137]|6[0158]|78|8[1568])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|5[12]|[78]1)|6(?:12|[2-4]1|5[17]|6[13]|80)|7(?:12|3[134]|4[47]|61|88)|8(?:16|2[014]|3[126]|6[136]|7[078]|8[34]|91)|(?:43|59|75)[15]|(?:1[59]|29|67|72)[14]","1(?:2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|674|7(?:(?:2[14]|3[34]|5[15])[2-6]|61[346]|88[0-8])|8(?:70[2-6]|84[235-7]|91[3-7])|(?:1(?:29|60|8[06])|261|552|6(?:12|[2-47]1|5[17]|6[13]|80)|7(?:12|31|4[47])|8(?:16|2[014]|3[126]|6[136]|7[78]|83))[2-7]","1(?:2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|6(?:12(?:[2-6]|7[0-8])|74[2-7])|7(?:(?:2[14]|5[15])[2-6]|3171|61[346]|88(?:[2-7]|82))|8(?:70[2-6]|84(?:[2356]|7[19])|91(?:[3-6]|7[19]))|73[134][2-6]|(?:74[47]|8(?:16|2[014]|3[126]|6[136]|7[78]|83))(?:[2-6]|7[19])|(?:1(?:29|60|8[06])|261|552|6(?:[2-4]1|5[17]|6[13]|7(?:1|4[0189])|80)|7(?:12|88[01]))[2-7]"],"0$1",1],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:[2-479]|5[0235-9])|[2-5]|6(?:1[1358]|2[2457-9]|3[2-5]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[1-6])|7(?:1[013-9]|28|3[129]|4[1-35689]|5[29]|6[02-5]|70)|807","1(?:[2-479]|5[0235-9])|[2-5]|6(?:1[1358]|2(?:[2457]|84|95)|3(?:[2-4]|55)|4[235-7]|5[2-689]|6[24578]|7[235689]|8[1-6])|7(?:1(?:[013-8]|9[6-9])|28[6-8]|3(?:17|2[0-49]|9[2-57])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4|5[0-367])|70[13-7])|807[19]","1(?:[2-479]|5(?:[0236-9]|5[013-9]))|[2-5]|6(?:2(?:84|95)|355|83)|73179|807(?:1|9[1-3])|(?:1552|6(?:1[1358]|2[2457]|3[2-4]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[124-6])\\d|7(?:1(?:[013-8]\\d|9[6-9])|28[6-8]|3(?:2[0-49]|9[2-57])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]\\d|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4\\d|5[0-367])|70[13-7]))[2-7]"],"0$1",1],["(\\d{5})(\\d{5})","$1 $2",["[6-9]"],"0$1",1],["(\\d{4})(\\d{2,4})(\\d{4})","$1 $2 $3",["1(?:6|8[06])","1(?:6|8[06]0)"],0,1],["(\\d{4})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["18"],0,1]],"0",0,0,0,0,0,[["2717(?:[2-7]\\d|95)\\d{4}|(?:271[0-689]|782[0-6])[2-7]\\d{5}|(?:170[24]|2(?:(?:[02][2-79]|90)\\d|80[13468])|(?:3(?:23|80)|683|79[1-7])\\d|4(?:20[24]|72[2-8])|552[1-7])\\d{6}|(?:11|33|4[04]|80)[2-7]\\d{7}|(?:342|674|788)(?:[0189][2-7]|[2-7]\\d)\\d{5}|(?:1(?:2[0-249]|3[0-25]|4[145]|[59][14]|6[014]|7[1257]|8[01346])|2(?:1[257]|3[013]|4[01]|5[0137]|6[0158]|78|8[1568]|9[14])|3(?:26|4[13]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[014-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|6(?:12|[2-47]1|5[17]|6[13]|80)|7(?:12|2[14]|3[134]|4[47]|5[15]|[67]1)|8(?:16|2[014]|3[126]|6[136]|7[078]|8[34]|91))[2-7]\\d{6}|(?:1(?:2[35-8]|3[346-9]|4[236-9]|[59][0235-9]|6[235-9]|7[34689]|8[257-9])|2(?:1[134689]|3[24-8]|4[2-8]|5[25689]|6[2-4679]|7[3-79]|8[2-479]|9[235-9])|3(?:01|1[79]|2[1245]|4[5-8]|5[125689]|6[235-7]|7[157-9]|8[2-46-8])|4(?:1[14578]|2[5689]|3[2-467]|5[4-7]|6[35]|73|8[2689]|9[2389])|5(?:[16][146-9]|2[14-8]|3[1346]|4[14-69]|5[46]|7[2-4]|8[2-8]|9[246])|6(?:1[1358]|2[2457]|3[2-4]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[124-6])|7(?:1[013-9]|2[0235-9]|3[2679]|4[1-35689]|5[2-46-9]|[67][02-9]|8[013-7]|9[089])|8(?:1[1357-9]|2[235-8]|3[03-57-9]|4[0-24-9]|5\\d|6[2457-9]|7[1-6]|8[1256]|9[2-4]))\\d[2-7]\\d{5}",[10]],["(?:61279|7(?:887[02-9]|9(?:313|79[07-9]))|8(?:079[04-9]|(?:84|91)7[02-8]))\\d{5}|(?:6(?:12|[2-47]1|5[17]|6[13]|80)[0189]|7(?:1(?:2[0189]|9[0-5])|2(?:[14][017-9]|8[0-59])|3(?:2[5-8]|[34][017-9]|9[016-9])|4(?:1[015-9]|[29][89]|39|8[389])|5(?:[15][017-9]|2[04-9]|9[7-9])|6(?:0[0-47]|1[0-257-9]|2[0-4]|3[19]|5[4589])|70[0289]|88[089]|97[02-8])|8(?:0(?:6[67]|7[02-8])|70[017-9]|84[01489]|91[0-289]))\\d{6}|(?:7(?:31|4[47])|8(?:16|2[014]|3[126]|6[136]|7[78]|83))(?:[0189]\\d|7[02-8])\\d{5}|(?:6(?:[09]\\d|1[04679]|2[03689]|3[05-9]|4[0489]|50|6[069]|7[07]|8[7-9])|7(?:0\\d|2[0235-79]|3[05-8]|40|5[0346-8]|6[6-9]|7[1-9]|8[0-79]|9[089])|8(?:0[01589]|1[0-57-9]|2[235-9]|3[03-57-9]|[45]\\d|6[02457-9]|7[1-69]|8[0-25-9]|9[02-9])|9\\d\\d)\\d{7}|(?:6(?:(?:1[1358]|2[2457]|3[2-4]|4[235-7]|5[2-689]|6[24578]|8[124-6])\\d|7(?:[235689]\\d|4[0189]))|7(?:1(?:[013-8]\\d|9[6-9])|28[6-8]|3(?:2[0-49]|9[2-5])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]\\d|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4\\d|5[0-367])|70[13-7]|881))[0189]\\d{5}",[10]],["000800\\d{7}|1(?:600\\d{6}|80(?:0\\d{4,9}|3\\d{9}))"],["186[12]\\d{9}",[13]],0,0,["140\\d{7}",[10]],0,0,["1860\\d{7}",[11]]]],IO:["246","00","3\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["3"]]],0,0,0,0,0,0,[["37\\d{5}"],["38\\d{5}"]]],IQ:["964","00","(?:1|7\\d\\d)\\d{7}|[2-6]\\d{7,8}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-6]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"]],"0",0,0,0,0,0,[["1\\d{7}|(?:2[13-5]|3[02367]|4[023]|5[03]|6[026])\\d{6,7}",[8,9]],["7[3-9]\\d{8}",[10]]]],IR:["98","00","[1-9]\\d{9}|(?:[1-8]\\d\\d|9)\\d{3,4}",[4,5,6,7,10],[["(\\d{4,5})","$1",["96"],"0$1"],["(\\d{2})(\\d{4,5})","$1 $2",["(?:1[137]|2[13-68]|3[1458]|4[145]|5[1468]|6[16]|7[1467]|8[13467])[12689]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["9"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["[1-8]"],"0$1"]],"0",0,0,0,0,0,[["(?:1[137]|2[13-68]|3[1458]|4[145]|5[1468]|6[16]|7[1467]|8[13467])(?:[03-57]\\d{7}|[16]\\d{3}(?:\\d{4})?|[289]\\d{3}(?:\\d(?:\\d{3})?)?)|94(?:000[09]|(?:12\\d|30[0-2])\\d|2(?:121|[2689]0\\d)|4(?:111|40\\d))\\d{4}",[6,7,10]],["9(?:(?:0[0-5]|[13]\\d|2[0-3])\\d\\d|9(?:[0-46]\\d\\d|5(?:10|5\\d)|8(?:[12]\\d|88)|9(?:0[0-3]|[19]\\d|21|69|77|8[7-9])))\\d{5}",[10]],0,0,0,0,["96(?:0[12]|2[16-8]|3(?:08|[14]5|[23]|66)|4(?:0|80)|5[01]|6[89]|86|9[19])",[4,5]]]],IS:["354","00|1(?:0(?:01|[12]0)|100)","(?:38\\d|[4-9])\\d{6}",[7,9],[["(\\d{3})(\\d{4})","$1 $2",["[4-9]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["3"]]],0,0,0,0,0,0,[["(?:4(?:1[0-24-69]|2[0-7]|[37][0-8]|4[0-24589]|5[0-68]|6\\d|8[0-36-8])|5(?:05|[156]\\d|2[02578]|3[0-579]|4[03-7]|7[0-2578]|8[0-35-9]|9[013-689])|872)\\d{4}",[7]],["(?:38[589]\\d\\d|6(?:1[1-8]|2[0-6]|3[026-9]|4[014679]|5[0159]|6[0-69]|70|8[06-8]|9\\d)|7(?:5[057]|[6-9]\\d)|8(?:2[0-59]|[3-69]\\d|8[238]))\\d{4}"],["80[0-8]\\d{4}",[7]],["90(?:0\\d|1[5-79]|2[015-79]|3[135-79]|4[125-7]|5[25-79]|7[1-37]|8[0-35-7])\\d{3}",[7]],0,["(?:689|8(?:7[18]|80)|95[48])\\d{4}",[7]],["809\\d{4}",[7]],0,["49[0-24-79]\\d{4}",[7]]],"00"],IT:["39","00","0\\d{5,10}|1\\d{8,10}|3(?:[0-8]\\d{7,10}|9\\d{7,8})|(?:43|55|70)\\d{8}|8\\d{5}(?:\\d{2,4})?",[6,7,8,9,10,11,12],[["(\\d{2})(\\d{4,6})","$1 $2",["0[26]"]],["(\\d{3})(\\d{3,6})","$1 $2",["0[13-57-9][0159]|8(?:03|4[17]|9[2-5])","0[13-57-9][0159]|8(?:03|4[17]|9(?:2|3[04]|[45][0-4]))"]],["(\\d{4})(\\d{2,6})","$1 $2",["0(?:[13-579][2-46-8]|8[236-8])"]],["(\\d{4})(\\d{4})","$1 $2",["894"]],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[26]|5"]],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["1(?:44|[679])|[378]|43"]],["(\\d{3})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[13-57-9][0159]|14"]],["(\\d{2})(\\d{4})(\\d{5})","$1 $2 $3",["0[26]"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["0"]],["(\\d{3})(\\d{4})(\\d{4,5})","$1 $2 $3",["3"]]],0,0,0,0,0,0,[["0669[0-79]\\d{1,6}|0(?:1(?:[0159]\\d|[27][1-5]|31|4[1-4]|6[1356]|8[2-57])|2\\d\\d|3(?:[0159]\\d|2[1-4]|3[12]|[48][1-6]|6[2-59]|7[1-7])|4(?:[0159]\\d|[23][1-9]|4[245]|6[1-5]|7[1-4]|81)|5(?:[0159]\\d|2[1-5]|3[2-6]|4[1-79]|6[4-6]|7[1-578]|8[3-8])|6(?:[0-57-9]\\d|6[0-8])|7(?:[0159]\\d|2[12]|3[1-7]|4[2-46]|6[13569]|7[13-6]|8[1-59])|8(?:[0159]\\d|2[3-578]|3[1-356]|[6-8][1-5])|9(?:[0159]\\d|[238][1-5]|4[12]|6[1-8]|7[1-6]))\\d{2,7}",[6,7,8,9,10,11]],["3[2-9]\\d{7,8}|(?:31|43)\\d{8}",[9,10]],["80(?:0\\d{3}|3)\\d{3}",[6,9]],["(?:0878\\d{3}|89(?:2\\d|3[04]|4(?:[0-4]|[5-9]\\d\\d)|5[0-4]))\\d\\d|(?:1(?:44|6[346])|89(?:38|5[5-9]|9))\\d{6}",[6,8,9,10]],["1(?:78\\d|99)\\d{6}",[9,10]],["3[2-8]\\d{9,10}",[11,12]],0,0,["55\\d{8}",[10]],["84(?:[08]\\d{3}|[17])\\d{3}",[6,9]]]],JE:["44","00","1534\\d{6}|(?:[3578]\\d|90)\\d{8}",[10],0,"0",0,"([0-24-8]\\d{5})$|0","1534$1",0,0,[["1534[0-24-8]\\d{5}"],["7(?:(?:(?:50|82)9|937)\\d|7(?:00[378]|97\\d))\\d{5}"],["80(?:07(?:35|81)|8901)\\d{4}"],["(?:8(?:4(?:4(?:4(?:05|42|69)|703)|5(?:041|800))|7(?:0002|1206))|90(?:066[59]|1810|71(?:07|55)))\\d{4}"],["701511\\d{4}"],0,["(?:3(?:0(?:07(?:35|81)|8901)|3\\d{4}|4(?:4(?:4(?:05|42|69)|703)|5(?:041|800))|7(?:0002|1206))|55\\d{4})\\d{4}"],["76(?:464|652)\\d{5}|76(?:0[0-28]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}"],["56\\d{8}"]]],JM:["1","011","(?:[58]\\d\\d|658|900)\\d{7}",[10],0,"1",0,0,0,0,"658|876",[["8766060\\d{3}|(?:658(?:2(?:[0-8]\\d|9[0-46-9])|[3-9]\\d\\d)|876(?:52[35]|6(?:0[1-3579]|1[0235-9]|[23]\\d|40|5[06]|6[2-589]|7[0-25-9]|8[04]|9[4-9])|7(?:0[2-689]|[1-6]\\d|8[056]|9[45])|9(?:0[1-8]|1[02378]|[2-8]\\d|9[2-468])))\\d{4}"],["(?:658295|876(?:2(?:0[1-9]|[13-9]\\d|2[013-9])|[348]\\d\\d|5(?:0[1-9]|[1-9]\\d)|6(?:4[89]|6[67])|7(?:0[07]|7\\d|8[1-47-9]|9[0-36-9])|9(?:[01]9|9[0579])))\\d{4}"],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],["900[2-9]\\d{6}"],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}"]]],JO:["962","00","(?:(?:[2689]|7\\d)\\d|32|53)\\d{6}",[8,9],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2356]|87"],"(0$1)"],["(\\d{3})(\\d{5,6})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["70"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["7"],"0$1"]],"0",0,0,0,0,0,[["87(?:000|90[01])\\d{3}|(?:2(?:6(?:2[0-35-9]|3[0-578]|4[24-7]|5[0-24-8]|[6-8][023]|9[0-3])|7(?:0[1-79]|10|2[014-7]|3[0-689]|4[019]|5[0-3578]))|32(?:0[1-69]|1[1-35-7]|2[024-7]|3\\d|4[0-3]|[5-7][023])|53(?:0[0-3]|[13][023]|2[0-59]|49|5[0-35-9]|6[15]|7[45]|8[1-6]|9[0-36-9])|6(?:2(?:[05]0|22)|3(?:00|33)|4(?:0[0-25]|1[2-7]|2[0569]|[38][07-9]|4[025689]|6[0-589]|7\\d|9[0-2])|5(?:[01][056]|2[034]|3[0-57-9]|4[178]|5[0-69]|6[0-35-9]|7[1-379]|8[0-68]|9[0239]))|87(?:20|7[078]|99))\\d{4}",[8]],["7(?:[78][0-25-9]|9\\d)\\d{6}",[9]],["80\\d{6}",[8]],["9\\d{7}",[8]],["70\\d{7}",[9]],0,["8(?:10|8\\d)\\d{5}",[8]],["74(?:66|77)\\d{5}",[9]],0,["85\\d{6}",[8]]]],JP:["81","010","00[1-9]\\d{6,14}|[257-9]\\d{9}|(?:00|[1-9]\\d\\d)\\d{6}",[8,9,10,11,12,13,14,15,16,17],[["(\\d{3})(\\d{3})(\\d{3})","$1-$2-$3",["(?:12|57|99)0"],"0$1"],["(\\d{4})(\\d)(\\d{4})","$1-$2-$3",["1(?:26|3[79]|4[56]|5[4-68]|6[3-5])|499|5(?:76|97)|746|8(?:3[89]|47|51)|9(?:80|9[16])","1(?:267|3(?:7[247]|9[278])|466|5(?:47|58|64)|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:76|97)9|7468|8(?:3(?:8[7-9]|96)|477|51[2-9])|9(?:802|9(?:1[23]|69))|1(?:45|58)[67]","1(?:267|3(?:7[247]|9[278])|466|5(?:47|58|64)|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:769|979[2-69])|7468|8(?:3(?:8[7-9]|96[2457-9])|477|51[2-9])|9(?:802|9(?:1[23]|69))|1(?:45|58)[67]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["60"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1-$2-$3",["[36]|4(?:2[09]|7[01])","[36]|4(?:2(?:0|9[02-69])|7(?:0[019]|1))"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["1(?:1|5[45]|77|88|9[69])|2(?:2[1-37]|3[0-269]|4[59]|5|6[24]|7[1-358]|8[1369]|9[0-38])|4(?:[28][1-9]|3[0-57]|[45]|6[248]|7[2-579]|9[29])|5(?:2|3[0459]|4[0-369]|5[29]|8[02389]|9[0-389])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9[2-6])|8(?:2[124589]|3[26-9]|49|51|6|7[0-468]|8[68]|9[019])|9(?:[23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9[1-489])","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2(?:[127]|3[014-9])|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|9[19])|62|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|8[1-9]|9[29])|5(?:2|3(?:[045]|9[0-8])|4[0-369]|5[29]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9[0-2469])|3(?:[29]|60)|49|51|6(?:[0-24]|36|5[0-3589]|7[23]|9[01459])|7[0-468]|8[68])|9(?:[23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9(?:[1289]|3[34]|4[0178]))|(?:264|837)[016-9]|2(?:57|93)[015-9]|(?:25[0468]|422|838)[01]|(?:47[59]|59[89]|8(?:6[68]|9))[019]","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2[127]|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|9(?:17|99))|6(?:2|4[016-9])|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|9[29])|5(?:2|3(?:[045]|9(?:[0-58]|6[4-9]|7[0-35689]))|4[0-369]|5[29]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9[0169])|3(?:[29]|60|7(?:[017-9]|6[6-8]))|49|51|6(?:[0-24]|36[2-57-9]|5(?:[0-389]|5[23])|6(?:[01]|9[178])|7(?:2[2-468]|3[78])|9[0145])|7[0-468]|8[68])|9(?:4[15]|5[138]|7[156]|8[189]|9(?:[1289]|3(?:31|4[357])|4[0178]))|(?:8294|96)[1-3]|2(?:57|93)[015-9]|(?:223|8699)[014-9]|(?:25[0468]|422|838)[01]|(?:48|8292|9[23])[1-9]|(?:47[59]|59[89]|8(?:68|9))[019]"],"0$1"],["(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3",["[14]|[289][2-9]|5[3-9]|7[2-4679]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["800"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[257-9]"],"0$1"]],"0",0,"(000[259]\\d{6})$|(?:(?:003768)0?)|0","$1",0,0,[["(?:1(?:1[235-8]|2[3-6]|3[3-9]|4[2-6]|[58][2-8]|6[2-7]|7[2-9]|9[1-9])|(?:2[2-9]|[36][1-9])\\d|4(?:[2-578]\\d|6[02-8]|9[2-59])|5(?:[2-589]\\d|6[1-9]|7[2-8])|7(?:[25-9]\\d|3[4-9]|4[02-9])|8(?:[2679]\\d|3[2-9]|4[5-9]|5[1-9]|8[03-9])|9(?:[2-58]\\d|[679][1-9]))\\d{6}",[9]],["[7-9]0[1-9]\\d{7}",[10]],["00777(?:[01]|5\\d)\\d\\d|(?:00(?:7778|882[1245])|(?:120|800\\d)\\d\\d)\\d{4}|00(?:37|66|78)\\d{6,13}"],["990\\d{6}",[9]],["60\\d{7}",[9]],0,["570\\d{6}",[9]],["20\\d{8}",[10]],["50[1-9]\\d{7}",[10]]]],KE:["254","000","(?:[17]\\d\\d|900)\\d{6}|(?:2|80)0\\d{6,7}|[4-6]\\d{6,8}",[7,8,9,10],[["(\\d{2})(\\d{5,7})","$1 $2",["[24-6]"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["[17]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[89]"],"0$1"]],"0",0,0,0,0,0,[["(?:4[245]|5[1-79]|6[01457-9])\\d{5,7}|(?:4[136]|5[08]|62)\\d{7}|(?:[24]0|66)\\d{6,7}",[7,8,9]],["(?:1(?:0[0-8]|1[0-7]|2[014]|30)|7\\d\\d)\\d{6}",[9]],["800[02-8]\\d{5,6}",[9,10]],["900[02-9]\\d{5}",[9]]]],KG:["996","00","8\\d{9}|[235-9]\\d{8}",[9,10],[["(\\d{4})(\\d{5})","$1 $2",["3(?:1[346]|[24-79])"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[235-79]|88"],"0$1"],["(\\d{3})(\\d{3})(\\d)(\\d{2,3})","$1 $2 $3 $4",["8"],"0$1"]],"0",0,0,0,0,0,[["312(?:5[0-79]\\d|9(?:[0-689]\\d|7[0-24-9]))\\d{3}|(?:3(?:1(?:2[0-46-8]|3[1-9]|47|[56]\\d)|2(?:22|3[0-479]|6[0-7])|4(?:22|5[6-9]|6\\d)|5(?:22|3[4-7]|59|6\\d)|6(?:22|5[35-7]|6\\d)|7(?:22|3[468]|4[1-9]|59|[67]\\d)|9(?:22|4[1-8]|6\\d))|6(?:09|12|2[2-4])\\d)\\d{5}",[9]],["312(?:58\\d|973)\\d{3}|(?:2(?:0[0-35]|2\\d)|5[0-24-7]\\d|600|7(?:[07]\\d|55)|88[08]|9(?:12|9[05-9]))\\d{6}",[9]],["800\\d{6,7}"]]],KH:["855","00[14-9]","1\\d{9}|[1-9]\\d{7,8}",[8,9,10],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-9]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0",0,0,0,0,0,[["23(?:4(?:[2-4]|[56]\\d)|[568]\\d\\d)\\d{4}|23[236-9]\\d{5}|(?:2[4-6]|3[2-6]|4[2-4]|[5-7][2-5])(?:(?:[237-9]|4[56]|5\\d)\\d{5}|6\\d{5,6})",[8,9]],["(?:(?:1[28]|3[18]|9[67])\\d|6[016-9]|7(?:[07-9]|[16]\\d)|8(?:[013-79]|8\\d))\\d{6}|(?:1\\d|9[0-57-9])\\d{6}|(?:2[3-6]|3[2-6]|4[2-4]|[5-7][2-5])48\\d{5}",[8,9]],["1800(?:1\\d|2[019])\\d{4}",[10]],["1900(?:1\\d|2[09])\\d{4}",[10]]]],KI:["686","00","(?:[37]\\d|6[0-79])\\d{6}|(?:[2-48]\\d|50)\\d{3}",[5,8],0,"0",0,0,0,0,0,[["(?:[24]\\d|3[1-9]|50|65(?:02[12]|12[56]|22[89]|[3-5]00)|7(?:27\\d\\d|3100|5(?:02[12]|12[56]|22[89]|[34](?:00|81)|500))|8[0-5])\\d{3}"],["(?:6200[01]|7(?:310[1-9]|5(?:02[03-9]|12[0-47-9]|22[0-7]|[34](?:0[1-9]|8[02-9])|50[1-9])))\\d{3}|(?:63\\d\\d|7(?:(?:[0146-9]\\d|2[0-689])\\d|3(?:[02-9]\\d|1[1-9])|5(?:[0-2][013-9]|[34][1-79]|5[1-9]|[6-9]\\d)))\\d{4}",[8]],0,0,0,0,0,0,["30(?:0[01]\\d\\d|12(?:11|20))\\d\\d",[8]]]],KM:["269","00","[3478]\\d{6}",[7],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[3478]"]]],0,0,0,0,0,0,[["7[4-7]\\d{5}"],["[34]\\d{6}"],0,["8\\d{6}"]]],KN:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-7]\\d{6})$|1","869$1",0,"869",[["869(?:2(?:29|36)|302|4(?:6[015-9]|70)|56[5-7])\\d{4}"],["869(?:48[89]|55[6-8]|66\\d|76[02-7])\\d{4}"],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],["900[2-9]\\d{6}"],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}"]]],KP:["850","00|99","85\\d{6}|(?:19\\d|[2-7])\\d{7}",[8,10],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2-7]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"]],"0",0,0,0,0,0,[["(?:(?:195|2)\\d|3[19]|4[159]|5[37]|6[17]|7[39]|85)\\d{6}"],["19[1-3]\\d{7}",[10]]]],KR:["82","00(?:[125689]|3(?:[46]5|91)|7(?:00|27|3|55|6[126]))","00[1-9]\\d{8,11}|(?:[12]|5\\d{3})\\d{7}|[13-6]\\d{9}|(?:[1-6]\\d|80)\\d{7}|[3-6]\\d{4,5}|(?:00|7)0\\d{8}",[5,6,8,9,10,11,12,13,14],[["(\\d{2})(\\d{3,4})","$1-$2",["(?:3[1-3]|[46][1-4]|5[1-5])1"],"0$1"],["(\\d{4})(\\d{4})","$1-$2",["1"]],["(\\d)(\\d{3,4})(\\d{4})","$1-$2-$3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["[36]0|8"],"0$1"],["(\\d{2})(\\d{3,4})(\\d{4})","$1-$2-$3",["[1346]|5[1-5]"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[57]"],"0$1"],["(\\d{2})(\\d{5})(\\d{4})","$1-$2-$3",["5"],"0$1"]],"0",0,"0(8(?:[1-46-8]|5\\d\\d))?",0,0,0,[["(?:2|3[1-3]|[46][1-4]|5[1-5])[1-9]\\d{6,7}|(?:3[1-3]|[46][1-4]|5[1-5])1\\d{2,3}",[5,6,8,9,10]],["1(?:05(?:[0-8]\\d|9[0-6])|22[13]\\d)\\d{4,5}|1(?:0[0-46-9]|[16-9]\\d|2[013-9])\\d{6,7}",[9,10]],["00(?:308\\d{6,7}|798\\d{7,9})|(?:00368|[38]0)\\d{7}",[9,11,12,13,14]],["60[2-9]\\d{6}",[9]],["50\\d{8,9}",[10,11]],0,["1(?:5(?:22|33|44|66|77|88|99)|6(?:[07]0|44|6[0168]|88)|8(?:00|33|55|77|99))\\d{4}",[8]],["15\\d{7,8}",[9,10]],["70\\d{8}",[10]]]],KW:["965","00","18\\d{5}|(?:[2569]\\d|41)\\d{6}",[7,8],[["(\\d{4})(\\d{3,4})","$1 $2",["[169]|2(?:[235]|4[1-35-9])|52"]],["(\\d{3})(\\d{5})","$1 $2",["[245]"]]],0,0,0,0,0,0,[["2(?:[23]\\d\\d|4(?:[1-35-9]\\d|44)|5(?:0[034]|[2-46]\\d|5[1-3]|7[1-7]))\\d{4}",[8]],["(?:41\\d\\d|5(?:(?:[05]\\d|1[0-7]|6[56])\\d|2(?:22|5[25])|7(?:55|77)|88[58])|6(?:(?:0[034679]|5[015-9]|6\\d)\\d|1(?:00|11|6[16])|2[26]2|3[36]3|4[46]4|7(?:0[013-9]|[67]\\d)|8[68]8|9(?:[069]\\d|3[039]))|9(?:(?:[04679]\\d|8[057-9])\\d|1(?:00|1[01]|99)|2(?:00|2\\d)|3(?:00|3[03])|5(?:00|5\\d)))\\d{4}",[8]],["18\\d{5}",[7]]]],KY:["1","011","(?:345|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","345$1",0,"345",[["345(?:2(?:22|3[23]|44|66)|333|444|6(?:23|38|40)|7(?:30|4[35-79]|6[6-9]|77)|8(?:00|1[45]|4[89]|88)|9(?:14|4[035-9]))\\d{4}"],["345(?:32[1-9]|42[0-4]|5(?:1[67]|2[5-79]|4[6-9]|50|76)|649|82[56]|9(?:1[679]|2[2-9]|3[06-9]|90))\\d{4}"],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],["(?:345976|900[2-9]\\d\\d)\\d{4}"],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}"]]],KZ:["7","810","(?:33622|8\\d{8})\\d{5}|[78]\\d{9}",[10,14],0,"8",0,0,0,0,"33622|7",[["(?:33622|7(?:1(?:0(?:[23]\\d|4[0-3]|59|63)|1(?:[23]\\d|4[0-79]|59)|2(?:[23]\\d|59)|3(?:2\\d|3[0-79]|4[0-35-9]|59)|4(?:[24]\\d|3[013-9]|5[1-9]|97)|5(?:2\\d|3[1-9]|4[0-7]|59)|6(?:[2-4]\\d|5[19]|61)|72\\d|8(?:[27]\\d|3[1-46-9]|4[0-5]|59))|2(?:1(?:[23]\\d|4[46-9]|5[3469])|2(?:2\\d|3[0679]|46|5[12679])|3(?:[2-4]\\d|5[139])|4(?:2\\d|3[1-35-9]|59)|5(?:[23]\\d|4[0-8]|59|61)|6(?:2\\d|3[1-9]|4[0-4]|59)|7(?:[2379]\\d|40|5[279])|8(?:[23]\\d|4[0-3]|59)|9(?:2\\d|3[124578]|59))))\\d{5}",[10]],["7(?:0[0-25-8]|47|6[0-4]|7[15-8]|85)\\d{7}",[10]],["8(?:00|108\\d{3})\\d{7}"],["809\\d{7}",[10]],["808\\d{7}",[10]],0,0,0,["751\\d{7}",[10]]],"8~10"],LA:["856","00","[23]\\d{9}|3\\d{8}|(?:[235-8]\\d|41)\\d{6}",[8,9,10],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["2[13]|3[14]|[4-8]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["3"],"0$1"],["(\\d{2})(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[23]"],"0$1"]],"0",0,0,0,0,0,[["(?:2[13]|[35-7][14]|41|8[1468])\\d{6}",[8]],["(?:20(?:[23579]\\d|8[78])|30[24]\\d)\\d{6}|30\\d{7}",[9,10]]]],LB:["961","00","[27-9]\\d{7}|[13-9]\\d{6}",[7,8],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[13-69]|7(?:[2-57]|62|8[0-6]|9[04-9])|8[02-9]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[27-9]"]]],"0",0,0,0,0,0,[["7(?:62|8[0-6]|9[04-9])\\d{4}|(?:[14-69]\\d|2(?:[14-69]\\d|[78][1-9])|7[2-57]|8[02-9])\\d{5}"],["(?:(?:3|81)\\d|7(?:[01]\\d|6[013-9]|8[7-9]|9[1-3]))\\d{5}"],0,["9[01]\\d{6}",[8]],0,0,0,0,0,["80\\d{6}",[8]]]],LC:["1","011","(?:[58]\\d\\d|758|900)\\d{7}",[10],0,"1",0,"([2-8]\\d{6})$|1","758$1",0,"758",[["758(?:234|4(?:30|5\\d|6[2-9]|8[0-2])|57[0-2]|(?:63|75)8)\\d{4}"],["758(?:28[4-7]|384|4(?:6[01]|8[4-9])|5(?:1[89]|20|84)|7(?:1[2-9]|2\\d|3[0-3])|812)\\d{4}"],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],["900[2-9]\\d{6}"],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}"]]],LI:["423","00","[68]\\d{8}|(?:[2378]\\d|90)\\d{5}",[7,9],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[2379]|8(?:0[09]|7)","[2379]|8(?:0(?:02|9)|7)"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["69"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]]],"0",0,"(1001)|0",0,0,0,[["(?:2(?:01|1[27]|2[024]|3\\d|6[02-578]|96)|3(?:[24]0|33|7[0135-7]|8[048]|9[0269]))\\d{4}",[7]],["(?:6(?:(?:4[5-9]|5[0-46-9])\\d|6(?:[024-6]\\d|[17]0|3[7-9]))\\d|7(?:[37-9]\\d|42|56))\\d{4}"],["8002[28]\\d\\d|80(?:05\\d|9)\\d{4}"],["90(?:02[258]|1(?:23|3[14])|66[136])\\d\\d",[7]],0,["697(?:42|56|[78]\\d)\\d{4}",[9]],["870(?:28|87)\\d\\d",[7]]]],LK:["94","00","[1-9]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[1-689]"],"0$1"]],"0",0,0,0,0,0,[["(?:12[2-9]|602|8[12]\\d|9(?:1\\d|22|9[245]))\\d{6}|(?:11|2[13-7]|3[1-8]|4[157]|5[12457]|6[35-7])[2-57]\\d{6}"],["7(?:[0-25-8]\\d|4[0-4])\\d{6}"],0,0,0,0,["1973\\d{5}"]]],LR:["231","00","(?:[2457]\\d|33|88)\\d{7}|(?:2\\d|[4-6])\\d{6}",[7,8,9],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["4[67]|[56]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[2-578]"],"0$1"]],"0",0,0,0,0,0,[["2\\d{7}",[8]],["(?:(?:(?:22|33)0|555|7(?:6[01]|7\\d)|88\\d)\\d|4(?:240|[67]))\\d{5}|[56]\\d{6}",[7,9]],0,["332(?:02|[34]\\d)\\d{4}",[9]]]],LS:["266","00","(?:[256]\\d\\d|800)\\d{5}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[2568]"]]],0,0,0,0,0,0,[["2\\d{7}"],["[56]\\d{7}"],["800[1256]\\d{4}"]]],LT:["370","00","(?:[3469]\\d|52|[78]0)\\d{6}",[8],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["52[0-7]"],"(0-$1)",1],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[7-9]"],"0 $1",1],["(\\d{2})(\\d{6})","$1 $2",["37|4(?:[15]|6[1-8])"],"(0-$1)",1],["(\\d{3})(\\d{5})","$1 $2",["[3-6]"],"(0-$1)",1]],"0",0,"[08]",0,0,0,[["(?:3[1478]|4[124-6]|52)\\d{6}"],["6\\d{7}"],["80[02]\\d{5}"],["9(?:0[0239]|10)\\d{5}"],["70[05]\\d{5}"],0,["70[67]\\d{5}"],0,["[89]01\\d{5}"],["808\\d{5}"]]],LU:["352","00","35[013-9]\\d{4,8}|6\\d{8}|35\\d{2,4}|(?:[2457-9]\\d|3[0-46-9])\\d{2,9}",[4,5,6,7,8,9,10,11],[["(\\d{2})(\\d{3})","$1 $2",["2(?:0[2-689]|[2-9])|[3-57]|8(?:0[2-9]|[13-9])|9(?:0[89]|[2-579])"]],["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["2(?:0[2-689]|[2-9])|[3-57]|8(?:0[2-9]|[13-9])|9(?:0[89]|[2-579])"]],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["20[2-689]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{1,2})","$1 $2 $3 $4",["2(?:[0367]|4[3-8])"]],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["80[01]|90[015]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["20"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})(\\d{1,2})","$1 $2 $3 $4 $5",["2(?:[0367]|4[3-8])"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{1,5})","$1 $2 $3 $4",["[3-57]|8[13-9]|9(?:0[89]|[2-579])|(?:2|80)[2-9]"]]],0,0,"(15(?:0[06]|1[12]|[35]5|4[04]|6[26]|77|88|99)\\d)",0,0,0,[["(?:35[013-9]|80[2-9]|90[89])\\d{1,8}|(?:2[2-9]|3[0-46-9]|[457]\\d|8[13-9]|9[2-579])\\d{2,9}"],["6(?:[269][18]|5[1568]|7[189]|81)\\d{6}",[9]],["800\\d{5}",[8]],["90[015]\\d{5}",[8]],0,0,0,0,["20(?:1\\d{5}|[2-689]\\d{1,7})",[4,5,6,7,8,9,10]],["801\\d{5}",[8]]]],LV:["371","00","(?:[268]\\d|90)\\d{6}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[269]|8[01]"]]],0,0,0,0,0,0,[["6\\d{7}"],["2333[0-8]\\d{3}|2(?:[0-24-9]\\d\\d|3(?:0[07]|[14-9]\\d|2[02-9]|3[0-24-9]))\\d{4}"],["80\\d{6}"],["90\\d{6}"],0,0,0,0,0,["81\\d{6}"]]],LY:["218","00","[2-9]\\d{8}",[9],[["(\\d{2})(\\d{7})","$1-$2",["[2-9]"],"0$1"]],"0",0,0,0,0,0,[["(?:2(?:0[56]|[1-6]\\d|7[124579]|8[124])|3(?:1\\d|2[2356])|4(?:[17]\\d|2[1-357]|5[2-4]|8[124])|5(?:[1347]\\d|2[1-469]|5[13-5]|8[1-4])|6(?:[1-479]\\d|5[2-57]|8[1-5])|7(?:[13]\\d|2[13-79])|8(?:[124]\\d|5[124]|84))\\d{6}"],["9[1-6]\\d{7}"]]],MA:["212","00","[5-8]\\d{8}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["5[45]"],"0$1"],["(\\d{4})(\\d{5})","$1-$2",["5(?:2[2-46-9]|3[3-9]|9)|8(?:0[89]|92)"],"0$1"],["(\\d{2})(\\d{7})","$1-$2",["8"],"0$1"],["(\\d{3})(\\d{6})","$1-$2",["[5-7]"],"0$1"]],"0",0,0,0,0,0,[["5(?:2(?:[0-25-79]\\d|3[1-578]|4[02-46-8]|8[0235-7])|3(?:[0-47]\\d|5[02-9]|6[02-8]|8[014-9]|9[3-9])|(?:4[067]|5[03])\\d)\\d{5}"],["(?:6(?:[0-79]\\d|8[0-247-9])|7(?:[0167]\\d|2[0-8]|5[0-3]|8[0-7]))\\d{6}"],["80[0-7]\\d{6}"],["89\\d{7}"],0,0,0,0,["(?:592(?:4[0-2]|93)|80[89]\\d\\d)\\d{4}"]]],MC:["377","00","(?:[3489]|6\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["4"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[389]"]],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["6"],"0$1"]],"0",0,0,0,0,0,[["(?:870|9[2-47-9]\\d)\\d{5}",[8]],["4(?:[469]\\d|5[1-9])\\d{5}|(?:3|6\\d)\\d{7}"],["(?:800|90\\d)\\d{5}",[8]]]],MD:["373","00","(?:[235-7]\\d|[89]0)\\d{6}",[8],[["(\\d{3})(\\d{5})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["22|3"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[25-7]"],"0$1"]],"0",0,0,0,0,0,[["(?:(?:2[1-9]|3[1-79])\\d|5(?:33|5[257]))\\d{5}"],["562\\d{5}|(?:6\\d|7[16-9])\\d{6}"],["800\\d{5}"],["90[056]\\d{5}"],0,0,["803\\d{5}"],0,["3[08]\\d{6}"],["808\\d{5}"]]],ME:["382","00","(?:20|[3-79]\\d)\\d{6}|80\\d{6,7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-9]"],"0$1"]],"0",0,0,0,0,0,[["(?:20[2-8]|3(?:[0-2][2-7]|3[24-7])|4(?:0[2-467]|1[2467])|5(?:0[2467]|1[24-7]|2[2-467]))\\d{5}",[8]],["6(?:[07-9]\\d|3[024]|6[0-25])\\d{5}",[8]],["80(?:[0-2578]|9\\d)\\d{5}"],["9(?:4[1568]|5[178])\\d{5}",[8]],0,0,["77[1-9]\\d{5}",[8]],0,["78[1-49]\\d{5}",[8]]]],MF:["590","00","(?:590\\d|7090)\\d{5}|(?:69|80|9\\d)\\d{7}",[9],0,"0",0,0,0,0,0,[["590(?:0[079]|[14]3|[27][79]|3[03-7]|5[0-268]|87)\\d{4}"],["(?:69(?:0\\d\\d|1(?:2[2-9]|3[0-5])|4(?:0[89]|1[2-6]|9\\d)|6(?:1[016-9]|5[0-4]|[67]\\d))|7090[0-4])\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["9(?:(?:39[5-7]|76[018])\\d|475[0-6])\\d{4}"]]],MG:["261","00","[23]\\d{8}",[9],[["(\\d{2})(\\d{2})(\\d{3})(\\d{2})","$1 $2 $3 $4",["[23]"],"0$1"]],"0",0,"([24-9]\\d{6})$|0","20$1",0,0,[["2072[29]\\d{4}|20(?:2\\d|4[47]|5[3467]|6[279]|7[356]|8[268]|9[2457])\\d{5}"],["3[2-47-9]\\d{7}"],0,0,0,0,0,0,["22\\d{7}"]]],MH:["692","011","329\\d{4}|(?:[256]\\d|45)\\d{5}",[7],[["(\\d{3})(\\d{4})","$1-$2",["[2-6]"]]],"1",0,0,0,0,0,[["(?:247|528|625)\\d{4}"],["(?:(?:23|54)5|329|45[35-8])\\d{4}"],0,0,0,0,0,0,["635\\d{4}"]]],MK:["389","00","[2-578]\\d{7}",[8],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["2|34[47]|4(?:[37]7|5[47]|64)"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[347]"],"0$1"],["(\\d{3})(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["[58]"],"0$1"]],"0",0,0,0,0,0,[["(?:(?:2(?:62|77)0|3444)\\d|4[56]440)\\d{3}|(?:34|4[357])700\\d{3}|(?:2(?:[0-3]\\d|5[0-578]|6[01]|82)|3(?:1[3-68]|[23][2-68]|4[23568])|4(?:[23][2-68]|4[3-68]|5[2568]|6[25-8]|7[24-68]|8[4-68]))\\d{5}"],["7(?:3555|(?:474|9[019]7)7)\\d{3}|7(?:[0-25-8]\\d\\d|3(?:[1-478]\\d|6[01])|4(?:2\\d|60|7[01578])|9(?:[2-4]\\d|5[01]|7[015]))\\d{4}"],["800\\d{5}"],["5\\d{7}"],0,0,0,0,0,["8(?:0[1-9]|[1-9]\\d)\\d{5}"]]],ML:["223","00","[24-9]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24-9]"]]],0,0,0,0,0,0,[["2(?:07[0-8]|12[67])\\d{4}|(?:2(?:02|1[4-689])|4(?:0[0-4]|4[1-59]))\\d{5}"],["2(?:0(?:01|79)|17\\d)\\d{4}|(?:5[0-3]|[679]\\d|8[2-59])\\d{6}"],["80\\d{6}"]]],MM:["95","00","1\\d{5,7}|95\\d{6}|(?:[4-7]|9[0-46-9])\\d{6,8}|(?:2|8\\d)\\d{5,8}",[6,7,8,9,10],[["(\\d)(\\d{2})(\\d{3})","$1 $2 $3",["16|2"],"0$1"],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["4(?:[2-46]|5[3-5])|5|6(?:[1-689]|7[235-7])|7(?:[0-4]|5[2-7])|8[1-5]|(?:60|86)[23]"],"0$1"],["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[12]|452|678|86","[12]|452|6788|86"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[4-7]|8[1-35]"],"0$1"],["(\\d)(\\d{3})(\\d{4,6})","$1 $2 $3",["9(?:2[0-4]|[35-9]|4[137-9])"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["92"],"0$1"],["(\\d)(\\d{5})(\\d{4})","$1 $2 $3",["9"],"0$1"]],"0",0,0,0,0,0,[["(?:1(?:(?:12|[28]\\d|3[56]|7[3-6]|9[0-6])\\d|4(?:2[29]|7[0-2]|83)|6)|2(?:2(?:00|8[34])|4(?:0\\d|22|7[0-2]|83)|51\\d\\d)|4(?:2(?:2\\d\\d|48[013])|3(?:20\\d|4(?:70|83)|56)|420\\d|5(?:2\\d|470))|6(?:0(?:[23]|88\\d)|(?:124|[56]2\\d)\\d|2472|3(?:20\\d|470)|4(?:2[04]\\d|472)|7(?:3\\d\\d|4[67]0|8(?:[01459]\\d|8))))\\d{4}|5(?:2(?:2\\d{5,6}|47[02]\\d{4})|(?:3472|4(?:2(?:1|86)|470)|522\\d|6(?:20\\d|483)|7(?:20\\d|48[01])|8(?:20\\d|47[02])|9(?:20\\d|470))\\d{4})|7(?:(?:0470|4(?:25\\d|470)|5(?:202|470|96\\d))\\d{4}|1(?:20\\d{4,5}|4(?:70|83)\\d{4}))|8(?:1(?:2\\d{5,6}|4(?:10|7[01]\\d)\\d{3})|2(?:2\\d{5,6}|(?:320|490\\d)\\d{3})|(?:3(?:2\\d\\d|470)|4[24-7]|5(?:(?:2\\d|51)\\d|4(?:[1-35-9]\\d|4[0-57-9]))|6[23])\\d{4})|(?:1[2-6]\\d|4(?:2[24-8]|3[2-7]|[46][2-6]|5[3-5])|5(?:[27][2-8]|3[2-68]|4[24-8]|5[23]|6[2-4]|8[24-7]|9[2-7])|6(?:[19]20|42[03-6]|(?:52|7[45])\\d)|7(?:[04][24-8]|[15][2-7]|22|3[2-4])|8(?:1[2-689]|2[2-8]|(?:[35]2|64)\\d))\\d{4}|25\\d{5,6}|(?:2[2-9]|6(?:1[2356]|[24][2-6]|3[24-6]|5[2-4]|6[2-8]|7[235-7]|8[245]|9[24])|8(?:3[24]|5[245]))\\d{4}",[6,7,8,9]],["(?:17[01]|9(?:2(?:[0-4]|[56]\\d\\d)|(?:3(?:[0-36]|4\\d)|(?:6\\d|8[89]|9[4-8])\\d|7(?:3|40|[5-9]\\d))\\d|4(?:(?:[0245]\\d|[1379])\\d|88)|5[0-6])\\d)\\d{4}|9[69]1\\d{6}|9(?:[68]\\d|9[089])\\d{5}",[7,8,9,10]],["80080(?:0[1-9]|2\\d)\\d{3}",[10]],0,0,0,0,0,["1333\\d{4}",[8]]]],MN:["976","001","[12]\\d{7,9}|[5-9]\\d{7}",[8,9,10],[["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["[12]1"],"0$1"],["(\\d{4})(\\d{4})","$1 $2",["[5-9]"]],["(\\d{3})(\\d{5,6})","$1 $2",["[12]2[1-3]"],"0$1"],["(\\d{4})(\\d{5,6})","$1 $2",["[12](?:27|3[2-8]|4[2-68]|5[1-4689])","[12](?:27|3[2-8]|4[2-68]|5[1-4689])[0-3]"],"0$1"],["(\\d{5})(\\d{4,5})","$1 $2",["[12]"],"0$1"]],"0",0,0,0,0,0,[["[12]2[1-3]\\d{5,6}|(?:(?:[12](?:1|27)|5[368])\\d\\d|7(?:0(?:[0-5]\\d|7[078]|80)|128))\\d{4}|[12](?:3[2-8]|4[2-68]|5[1-4689])\\d{6,7}"],["(?:83[01]|92[0139])\\d{5}|(?:5[05]|6[069]|72|8[015689]|9[013-9])\\d{6}",[8]],0,0,0,0,0,0,["712[0-79]\\d{4}|7(?:1[013-9]|[5-9]\\d)\\d{5}",[8]]]],MO:["853","00","0800\\d{3}|(?:28|[68]\\d)\\d{6}",[7,8],[["(\\d{4})(\\d{3})","$1 $2",["0"]],["(\\d{4})(\\d{4})","$1 $2",["[268]"]]],0,0,0,0,0,0,[["(?:28[2-9]|8(?:11|[2-57-9]\\d))\\d{5}",[8]],["6800[0-79]\\d{3}|6(?:[235]\\d\\d|6(?:0[0-5]|[1-9]\\d)|8(?:0[1-9]|[14-8]\\d|2[5-9]|[39][0-4]))\\d{4}",[8]],["0800\\d{3}",[7]]]],MP:["1","011","[58]\\d{9}|(?:67|90)0\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","670$1",0,"670",[["670(?:2(?:3[3-7]|56|8[4-8])|32[1-38]|4(?:33|8[348])|5(?:32|55|88)|6(?:64|70|82)|78[3589]|8[3-9]8|989)\\d{4}"],[""],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],["900[2-9]\\d{6}"],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}"]]],MQ:["596","00","(?:596\\d|7091)\\d{5}|(?:69|[89]\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-79]|8(?:0[6-9]|[36])"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0",0,0,0,0,0,[["(?:596(?:[03-7]\\d|1[05]|2[7-9]|8[0-39]|9[04-9])|80[6-9]\\d\\d|9(?:477[6-9]|767[4589]))\\d{4}"],["(?:69[67]\\d\\d|7091[0-3])\\d{4}"],["80[0-5]\\d{6}"],["8[129]\\d{7}"],0,0,0,0,["9(?:397[0-3]|477[0-5]|76(?:6\\d|7[0-367]))\\d{4}"]]],MR:["222","00","(?:[2-4]\\d\\d|800)\\d{5}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-48]"]]],0,0,0,0,0,0,[["(?:25[08]|35\\d|45[1-7])\\d{5}"],["[2-4][0-46-9]\\d{6}"],["800\\d{5}"]]],MS:["1","011","(?:[58]\\d\\d|664|900)\\d{7}",[10],0,"1",0,"([34]\\d{6})$|1","664$1",0,"664",[["6644(?:1[0-3]|91)\\d{4}"],["664(?:3(?:49|9[1-6])|49[2-6])\\d{4}"],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],["900[2-9]\\d{6}"],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}"]]],MT:["356","00","3550\\d{4}|(?:[2579]\\d\\d|800)\\d{5}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[2357-9]"]]],0,0,0,0,0,0,[["20(?:3[1-4]|6[059])\\d{4}|2(?:0[19]|[1-357]\\d|60)\\d{5}"],["(?:7(?:210|[79]\\d\\d)|9(?:[29]\\d\\d|69[67]|8(?:1[1-3]|89|97)))\\d{4}"],["800(?:02|[3467]\\d)\\d{3}"],["5(?:0(?:0(?:37|43)|(?:6\\d|70|9[0168])\\d)|[12]\\d0[1-5])\\d{3}"],0,0,["501\\d{5}"],["7117\\d{4}"],["3550\\d{4}"]]],MU:["230","0(?:0|[24-7]0|3[03])","(?:[57]|8\\d\\d)\\d{7}|[2-468]\\d{6}",[7,8,10],[["(\\d{3})(\\d{4})","$1 $2",["[2-46]|8[013]"]],["(\\d{4})(\\d{4})","$1 $2",["[57]"]],["(\\d{5})(\\d{5})","$1 $2",["8"]]],0,0,0,0,0,0,[["(?:2(?:[0346-8]\\d|1[0-8])|4(?:[013568]\\d|2[4-8]|71|90)|54(?:[3-5]\\d|71)|6\\d\\d|8(?:14|3[129]))\\d{4}",[7,8]],["5(?:4(?:2[1-389]|7[1-9])|87[15-8])\\d{4}|(?:5(?:2[5-9]|4[3-689]|[57]\\d|8[0-689]|9[0-8])|7(?:0[0-6]|3[013]))\\d{5}",[8]],["802\\d{7}|80[0-2]\\d{4}",[7,10]],["30\\d{5}",[7]],0,0,0,["219\\d{4}",[7]],["3(?:20|9\\d)\\d{4}",[7]]],"020"],MV:["960","0(?:0|19)","(?:800|9[0-57-9]\\d)\\d{7}|[34679]\\d{6}",[7,10],[["(\\d{3})(\\d{4})","$1-$2",["[34679]"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"]]],0,0,0,0,0,0,[["(?:3(?:0[0-4]|3[0-59])|6(?:[58][024689]|6[024-68]|7[02468]))\\d{4}",[7]],["(?:46[46]|[79]\\d\\d)\\d{4}",[7]],["800\\d{7}",[10]],["900\\d{7}",[10]],0,0,["4(?:0[01]|50)\\d{4}",[7]]],"00"],MW:["265","00","(?:[1289]\\d|31|77)\\d{7}|1\\d{6}",[7,9],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["1[2-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[137-9]"],"0$1"]],"0",0,0,0,0,0,[["(?:1[2-9]|2[12]\\d\\d)\\d{5}"],["111\\d{6}|(?:31|77|[89][89])\\d{7}",[9]]]],MX:["52","0[09]","[2-9]\\d{9}",[10],[["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["33|5[56]|81"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[2-9]"]]],0,0,0,0,0,0,[["(?:2(?:0[01]|2\\d|3[1-35-8]|4[13-9]|7[1-689]|8[1-578]|9[467])|3(?:1[1-79]|[2458][1-9]|3\\d|7[1-8]|9[1-5])|4(?:1[1-57-9]|[267][1-9]|3[1-8]|[45]\\d|8[1-35-9]|9[2-689])|5(?:[56]\\d|88|9[1-79])|6(?:1[2-68]|[2-4][1-9]|5[1-36-9]|6[0-57-9]|7[1-7]|8[67]|9[4-8])|7(?:[1346][1-9]|[27]\\d|5[13-9]|8[1-69]|9[17])|8(?:1\\d|2[13-689]|3[1-6]|4[124-6]|6[1246-9]|7[0-378]|9[12479])|9(?:1[346-9]|2[1-4]|3[2-46-8]|5[1348]|[69]\\d|7[12]|8[1-8]))\\d{7}"],["(?:2(?:2\\d|3[1-35-8]|4[13-9]|7[1-689]|8[1-578]|9[467])|3(?:1[1-79]|[2458][1-9]|3\\d|7[1-8]|9[1-5])|4(?:1[1-57-9]|[267][1-9]|3[1-8]|[45]\\d|8[1-35-9]|9[2-689])|5(?:[56]\\d|88|9[1-79])|6(?:1[2-68]|[2-4][1-9]|5[1-36-9]|6[0-57-9]|7[1-7]|8[67]|9[4-8])|7(?:[1346][1-9]|[27]\\d|5[13-9]|8[1-69]|9[17])|8(?:1\\d|2[13-689]|3[1-6]|4[124-6]|6[1246-9]|7[0-378]|9[12479])|9(?:1[346-9]|2[1-4]|3[2-46-8]|5[1348]|[69]\\d|7[12]|8[1-8]))\\d{7}"],["8(?:00|88)\\d{7}"],["900\\d{7}"],["500\\d{7}"],0,0,0,0,["300\\d{7}"]],"00"],MY:["60","00","1\\d{8,9}|(?:3\\d|[4-9])\\d{7}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1-$2 $3",["[4-79]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1-$2 $3",["1(?:[02469]|[378][1-9]|53)|8","1(?:[02469]|[37][1-9]|53|8(?:[1-46-9]|5[7-9]))|8"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1-$2 $3",["3"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3-$4",["1(?:[367]|80)"]],["(\\d{3})(\\d{3})(\\d{4})","$1-$2 $3",["15"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2 $3",["1"],"0$1"]],"0",0,0,0,0,0,[["427[01]\\d{4}|(?:3(?:2[0-36-9]|3[0-368]|4[0-278]|5[0-24-8]|6[0-467]|7[1246-9]|8\\d|9[0-57])\\d|4(?:2[0-689]|[3-79]\\d|8[1-35689])|5(?:2[0-589]|[3468]\\d|5[0-489]|7[1-9]|9[23])|6(?:2[2-9]|3[1357-9]|[46]\\d|5[0-6]|7[0-35-9]|85|9[015-8])|7(?:[2579]\\d|3[03-68]|4[0-8]|6[5-9]|8[0-35-9])|8(?:[24][2-8]|3[2-5]|5[2-7]|6[2-589]|7[2-578]|[89][2-9])|9(?:0[57]|13|[25-7]\\d|[3489][0-8]))\\d{5}",[8,9]],["1(?:1888[689]|4400|8(?:47|8[27])[0-4])\\d{4}|1(?:0(?:[23568]\\d|4[0-6]|7[016-9]|9[0-8])|1(?:[1-5]\\d\\d|6(?:0[5-9]|[1-9]\\d)|7(?:[0-4]\\d|5[0-7]))|(?:[269]\\d|[37][1-9]|4[235-9])\\d|5(?:31|9\\d\\d)|8(?:1[23]|[236]\\d|4[06]|5(?:46|[7-9])|7[016-9]|8[01]|9[0-8]))\\d{5}",[9,10]],["1[378]00\\d{6}",[10]],["1600\\d{6}",[10]],0,0,0,0,["15(?:4(?:6[0-4]\\d|8(?:0[125]|[17]\\d|21|3[01]|4[01589]|5[014]|6[02]))|6(?:32[0-6]|78\\d))\\d{4}",[10]]]],MZ:["258","00","(?:2|8\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["2|8[2-79]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]]],0,0,0,0,0,0,[["2(?:[1346]\\d|5[0-2]|[78][12]|93)\\d{5}",[8]],["8[2-79]\\d{7}",[9]],["800\\d{6}",[9]]]],NA:["264","00","[68]\\d{7,8}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["88"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["6"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["87"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"]],"0",0,0,0,0,0,[["64426\\d{3}|6(?:1(?:2[2-7]|3[01378]|4[0-4])|254|32[0237]|4(?:27|41|5[25])|52[236-8]|626|7(?:2[2-4]|30))\\d{4,5}|6(?:1(?:(?:0\\d|2[0189]|3[24-69]|4[5-9])\\d|17|69|7[014])|2(?:17|5[0-36-8]|69|70)|3(?:17|2[14-689]|34|6[289]|7[01]|81)|4(?:17|2[0-2]|4[06]|5[0137]|69|7[01])|5(?:17|2[0459]|69|7[01])|6(?:17|25|38|42|69|7[01])|7(?:17|2[569]|3[13]|6[89]|7[01]))\\d{4}"],["(?:60|8[1245])\\d{7}",[9]],["80\\d{7}",[9]],["8701\\d{5}",[9]],0,0,0,0,["8(?:3\\d\\d|86)\\d{5}"]]],NC:["687","00","(?:050|[2-57-9]\\d\\d)\\d{3}",[6],[["(\\d{2})(\\d{2})(\\d{2})","$1.$2.$3",["[02-57-9]"]]],0,0,0,0,0,0,[["(?:2[03-9]|3[0-5]|4[1-7]|88)\\d{4}"],["(?:[579]\\d|8[0-79])\\d{4}"],["050\\d{3}"],["36\\d{4}"]]],NE:["227","00","[027-9]\\d{7}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["08"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[089]|2[013]|7[0467]"]]],0,0,0,0,0,0,[["2(?:0(?:20|3[1-8]|4[13-5]|5[14]|6[14578]|7[1-578])|1(?:4[145]|5[14]|6[14-68]|7[169]|88))\\d{4}"],["(?:23|7[0467]|[89]\\d)\\d{6}"],["08\\d{6}"],["09\\d{6}"]]],NF:["672","00","[13]\\d{5}",[6],[["(\\d{2})(\\d{4})","$1 $2",["1[0-3]"]],["(\\d)(\\d{5})","$1 $2",["[13]"]]],0,0,"([0-258]\\d{4})$","3$1",0,0,[["(?:1(?:06|17|28|39)|3[0-2]\\d)\\d{3}"],["(?:14|3[58])\\d{4}"]]],NG:["234","009","(?:20|9\\d)\\d{8}|[78]\\d{9,13}",[10,11,12,13,14],[["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[7-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["20[129]"],"0$1"],["(\\d{4})(\\d{2})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{3})(\\d{4})(\\d{4,5})","$1 $2 $3",["[78]"],"0$1"],["(\\d{3})(\\d{5})(\\d{5,6})","$1 $2 $3",["[78]"],"0$1"]],"0",0,0,0,0,0,[["20(?:[1259]\\d|3[013-9]|4[1-8]|6[024-689]|7[1-79]|8[2-9])\\d{6}",[10]],["(?:702[0-24-9]|819[01])\\d{6}|(?:7(?:0[13-9]|[12]\\d)|8(?:0[1-9]|1[0-8])|9(?:0[1-9]|1[1-6]))\\d{7}",[10]],["800\\d{7,11}"],0,0,0,["700\\d{7,11}"]]],NI:["505","00","(?:1800|[25-8]\\d{3})\\d{4}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[125-8]"]]],0,0,0,0,0,0,[["2\\d{7}"],["(?:5(?:5[0-7]|[78]\\d)|6(?:20|3[035]|4[045]|5[05]|77|8[1-9]|9[059])|(?:7[5-8]|8\\d)\\d)\\d{5}"],["1800\\d{4}"]]],NL:["31","00","(?:[124-7]\\d\\d|3(?:[02-9]\\d|1[0-8]))\\d{6}|8\\d{6,9}|9\\d{6,10}|1\\d{4,5}",[5,6,7,8,9,10,11],[["(\\d{3})(\\d{4,7})","$1 $2",["[89]0"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["66"],"0$1"],["(\\d)(\\d{8})","$1 $2",["6"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["1[16-8]|2[259]|3[124]|4[17-9]|5[124679]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-578]|91"],"0$1"],["(\\d{3})(\\d{3})(\\d{5})","$1 $2 $3",["9"],"0$1"]],"0",0,0,0,0,0,[["(?:1(?:[035]\\d|1[13-578]|6[124-8]|7[24]|8[0-467])|2(?:[0346]\\d|2[2-46-9]|5[125]|9[479])|3(?:[03568]\\d|1[3-8]|2[01]|4[1-8])|4(?:[0356]\\d|1[1-368]|7[58]|8[15-8]|9[23579])|5(?:[0358]\\d|[19][1-9]|2[1-57-9]|4[13-8]|6[126]|7[0-3578])|7\\d\\d)\\d{6}",[9]],["(?:6[1-58]|970\\d)\\d{7}",[9,11]],["800\\d{4,7}",[7,8,9,10]],["90[069]\\d{4,7}",[7,8,9,10]],0,0,["140(?:1[035]|2[0346]|3[03568]|4[0356]|5[0358]|8[458])|(?:140(?:1[16-8]|2[259]|3[124]|4[17-9]|5[124679]|7)|8[478]\\d{6})\\d",[5,6,9]],["66\\d{7}",[9]],["(?:85|91)\\d{7}",[9]]]],NO:["47","00","(?:0|[2-9]\\d{3})\\d{4}",[5,8],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["8"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-79]"]]],0,0,0,0,0,"[02-689]|7[0-8]",[["(?:2[1-4]|3[1-3578]|5[1-35-7]|6[1-4679]|7[0-8])\\d{6}",[8]],["(?:4[015-8]|9\\d)\\d{6}",[8]],["80[01]\\d{5}",[8]],["82[09]\\d{5}",[8]],["880\\d{5}",[8]],["81[23]\\d{5}",[8]],["(?:0[235-9]|81(?:0(?:0[7-9]|1\\d)|5\\d\\d))\\d{3}"],0,["85[0-5]\\d{5}",[8]],["810(?:0[0-6]|[2-8]\\d)\\d{3}",[8]]]],NP:["977","00","(?:1\\d|9)\\d{9}|[1-9]\\d{7}",[8,10,11],[["(\\d)(\\d{7})","$1-$2",["1[2-6]"],"0$1"],["(\\d{2})(\\d{6})","$1-$2",["1[01]|[2-8]|9(?:[1-59]|[67][2-6])"],"0$1"],["(\\d{3})(\\d{7})","$1-$2",["9"]]],"0",0,0,0,0,0,[["(?:1[0-6]\\d|99[02-6])\\d{5}|(?:2[13-79]|3[135-8]|4[146-9]|5[135-7]|6[13-9]|7[15-9]|8[1-46-9]|9[1-7])[2-6]\\d{5}",[8]],["9(?:00|6[0-3]|7[024-6]|8[0-24-68])\\d{7}",[10]],["1(?:66001|800\\d\\d)\\d{5}",[11]]]],NR:["674","00","(?:222|444|(?:55|8\\d)\\d|666|777|999)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[24-9]"]]],0,0,0,0,0,0,[["444\\d{4}"],["(?:222|55[3-9]|666|777|8\\d\\d|999)\\d{4}"]]],NU:["683","00","(?:[4-7]|888\\d)\\d{3}",[4,7],[["(\\d{3})(\\d{4})","$1 $2",["8"]]],0,0,0,0,0,0,[["[47]\\d{3}",[4]],["(?:[56]|888[1-9])\\d{3}"]]],NZ:["64","0(?:0|161)","[1289]\\d{9}|50\\d{5}(?:\\d{2,3})?|[27-9]\\d{7,8}|(?:[34]\\d|6[0-35-9])\\d{6}|8\\d{4,6}",[5,6,7,8,9,10],[["(\\d{2})(\\d{3,8})","$1 $2",["8[1-79]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["50[036-8]|8|90","50(?:[0367]|88)|8|90"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["24|[346]|7[2-57-9]|9[2-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["2(?:10|74)|[589]"],"0$1"],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["1|2[028]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,5})","$1 $2 $3",["2(?:[169]|7[0-35-9])|7"],"0$1"]],"0",0,0,0,0,0,[["240\\d{5}|(?:3[2-79]|[49][2-9]|6[235-9]|7[2-57-9])\\d{6}",[8]],["2(?:[0-27-9]\\d|6)\\d{6,7}|2(?:1\\d|75)\\d{5}",[8,9,10]],["508\\d{6,7}|80\\d{6,8}",[8,9,10]],["(?:1[13-57-9]\\d{5}|50(?:0[08]|30|66|77|88))\\d{3}|90\\d{6,8}",[7,8,9,10]],["70\\d{7}",[9]],0,["8(?:1[16-9]|22|3\\d|4[045]|5[459]|6[235-9]|7[0-3579]|90)\\d{2,7}"]],"00"],OM:["968","00","(?:1505|[279]\\d{3}|500)\\d{4}|800\\d{5,6}",[7,8,9],[["(\\d{3})(\\d{4,6})","$1 $2",["[58]"]],["(\\d{2})(\\d{6})","$1 $2",["2"]],["(\\d{4})(\\d{4})","$1 $2",["[179]"]]],0,0,0,0,0,0,[["2[1-6]\\d{6}",[8]],["(?:1505|90[1-9]\\d)\\d{4}|(?:7[126-9]|9[1-9])\\d{6}",[8]],["8007\\d{4,5}|(?:500|800[05])\\d{4}"],["900\\d{5}",[8]]]],PA:["507","00","(?:00800|8\\d{3})\\d{6}|[68]\\d{7}|[1-57-9]\\d{6}",[7,8,10,11],[["(\\d{3})(\\d{4})","$1-$2",["[1-57-9]"]],["(\\d{4})(\\d{4})","$1-$2",["[68]"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]]],0,0,0,0,0,0,[["(?:1(?:0\\d|1[479]|2[37]|3[0137]|4[17]|5[05]|6[058]|7[0167]|8[2358]|9[1389])|2(?:[0235-79]\\d|1[0-7]|4[013-9]|8[02-9])|3(?:[047-9]\\d|1[0-8]|2[0-5]|33|5[0-35]|6[068])|4(?:00|3[0-579]|4\\d|7[0-57-9])|5(?:[01]\\d|2[0-7]|[56]0|79)|7(?:0[09]|2[0-26-8]|3[03]|4[04]|5[05-9]|6[0156]|7[0-24-9]|8[4-9]|90)|8(?:09|2[89]|3\\d|4[0-24-689]|5[014]|8[02])|9(?:0[5-9]|1[0135-8]|2[036-9]|3[35-79]|40|5[0457-9]|6[05-9]|7[04-9]|8[35-8]|9\\d))\\d{4}",[7]],["(?:1[16]1|21[89]|6\\d{3}|8(?:1[01]|7[23]))\\d{4}",[7,8]],["800\\d{4,5}|(?:00800|800\\d)\\d{6}"],["(?:8(?:22|55|60|7[78]|86)|9(?:00|81))\\d{4}",[7]]]],PE:["51","00|19(?:1[124]|77|90)00","(?:[14-8]|9\\d)\\d{7}",[8,9],[["(\\d{3})(\\d{5})","$1 $2",["80"],"(0$1)"],["(\\d)(\\d{7})","$1 $2",["1"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["[4-8]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"]]],"0",0,0,0,0,0,[["(?:(?:(?:4[34]|5[14])[0-8]|687)\\d|7(?:173|(?:3[0-8]|55)\\d)|8(?:10[05689]|6(?:0[06-9]|1[6-9]|29)|7(?:0[0569]|[56]0)))\\d{4}|(?:1[0-8]|4[12]|5[236]|6[1-7]|7[246]|8[2-4])\\d{6}",[8]],["9\\d{8}",[9]],["800\\d{5}",[8]],["805\\d{5}",[8]],["80[24]\\d{5}",[8]],0,0,0,0,["801\\d{5}",[8]]],"00"," Anexo "],PF:["689","00","4\\d{5}(?:\\d{2})?|8\\d{7,8}",[6,8,9],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["44"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["4|8[7-9]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]]],0,0,0,0,0,0,[["4(?:0[4-689]|9[4-68])\\d{5}",[8]],["8[7-9]\\d{6}",[8]],["80[0-5]\\d{6}",[9]],0,0,0,["44\\d{4}",[6]],0,["499\\d{5}",[8]]]],PG:["675","00|140[1-3]","(?:180|[78]\\d{3})\\d{4}|(?:[2-589]\\d|64)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["18|[2-69]|85"]],["(\\d{4})(\\d{4})","$1 $2",["[78]"]]],0,0,0,0,0,0,[["(?:(?:3[0-2]|4[257]|5[34]|9[78])\\d|64[1-9]|85[02-46-9])\\d{4}",[7]],["(?:7\\d|8[1-38])\\d{6}",[8]],["180\\d{4}",[7]],0,0,0,0,["27[01]\\d{4}",[7]],["2(?:0[0-57]|7[568])\\d{4}",[7]]],"00"],PH:["63","00","(?:[2-7]|9\\d)\\d{8}|2\\d{5}|(?:1800|8)\\d{7,9}",[6,8,9,10,11,12,13],[["(\\d)(\\d{5})","$1 $2",["2"],"(0$1)"],["(\\d{4})(\\d{4,6})","$1 $2",["3(?:23|39|46)|4(?:2[3-6]|[35]9|4[26]|76)|544|88[245]|(?:52|64|86)2","3(?:230|397|461)|4(?:2(?:35|[46]4|51)|396|4(?:22|63)|59[347]|76[15])|5(?:221|446)|642[23]|8(?:622|8(?:[24]2|5[13]))"],"(0$1)"],["(\\d{5})(\\d{4})","$1 $2",["346|4(?:27|9[35])|883","3469|4(?:279|9(?:30|56))|8834"],"(0$1)"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[3-7]|8[2-8]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]],["(\\d{4})(\\d{1,2})(\\d{3})(\\d{4})","$1 $2 $3 $4",["1"]]],"0",0,0,0,0,0,[["(?:(?:2[3-8]|3[2-68]|4[2-9]|5[2-6]|6[2-58]|7[24578])\\d{3}|88(?:22\\d\\d|42))\\d{4}|(?:2|8[2-8]\\d\\d)\\d{5}",[6,8,9,10]],["(?:8(?:1[37]|9[5-8])|9(?:0[5-9]|1[0-24-9]|[235-7]\\d|4[2-9]|8[135-9]|9[1-9]))\\d{7}",[10]],["1800\\d{7,9}",[11,12,13]]]],PK:["92","00","122\\d{6}|[24-8]\\d{10,11}|9(?:[013-9]\\d{8,10}|2(?:[01]\\d\\d|2(?:[06-8]\\d|1[01]))\\d{7})|(?:[2-8]\\d{3}|92(?:[0-7]\\d|8[1-9]))\\d{6}|[24-9]\\d{8}|[89]\\d{7}",[8,9,10,11,12],[["(\\d{3})(\\d{3})(\\d{2,7})","$1 $2 $3",["[89]0"],"0$1"],["(\\d{4})(\\d{5})","$1 $2",["1"]],["(\\d{3})(\\d{6,7})","$1 $2",["2(?:3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(?:2[2-689]|3[23578]|4[3478]|5[2356])|9(?:2[2-8]|3[27-9]|4[2-6]|6[3569]|9[25-8])","9(?:2[3-8]|98)|(?:2(?:3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(?:2[2-689]|3[23578]|4[3478]|5[2356])|9(?:22|3[27-9]|4[2-6]|6[3569]|9[25-7]))[2-9]"],"(0$1)"],["(\\d{2})(\\d{7,8})","$1 $2",["(?:2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91)[2-9]"],"(0$1)"],["(\\d{5})(\\d{5})","$1 $2",["58"],"(0$1)"],["(\\d{3})(\\d{7})","$1 $2",["3"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[24-9]"],"(0$1)"]],"0",0,0,0,0,0,[["(?:(?:21|42)[2-9]|58[126])\\d{7}|(?:2[25]|4[0146-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91)[2-9]\\d{6,7}|(?:2(?:3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(?:2[2-689]|3[23578]|4[3478]|5[2356])|9(?:2[2-8]|3[27-9]|4[2-6]|6[3569]|9[25-8]))[2-9]\\d{5,6}",[9,10]],["3(?:[0-247]\\d|3[0-79]|55|64)\\d{7}",[10]],["800\\d{5}(?:\\d{3})?",[8,11]],["900\\d{5}",[8]],["122\\d{6}",[9]],0,["(?:2(?:[125]|3[2358]|4[2-4]|9[2-8])|4(?:[0-246-9]|5[3479])|5(?:[1-35-7]|4[2-467])|6(?:0[468]|[1-8])|7(?:[14]|2[236])|8(?:[16]|2[2-689]|3[23578]|4[3478]|5[2356])|9(?:1|22|3[27-9]|4[2-6]|6[3569]|9[2-7]))111\\d{6}",[11,12]]]],PL:["48","00","(?:6|8\\d\\d)\\d{7}|[1-9]\\d{6}(?:\\d{2})?|[26]\\d{5}",[6,7,8,9,10],[["(\\d{5})","$1",["19"]],["(\\d{3})(\\d{3})","$1 $2",["11|20|64"]],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["(?:1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])1","(?:1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])19"]],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["64"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["21|39|45|5[0137]|6[0469]|7[02389]|8(?:0[14]|8)"]],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[2-8]|[2-7]|8[1-79]|9[145]"]],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["8"]]],0,0,0,0,0,0,[["47\\d{7}|(?:1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])(?:[02-9]\\d{6}|1(?:[0-8]\\d{5}|9\\d{3}(?:\\d{2})?))",[7,9]],["2131[89]\\d{4}|21(?:1[013-5]|2\\d|3[2-9])\\d{5}|(?:45|5[0137]|6[069]|7[2389]|88)\\d{7}",[9]],["800\\d{6,7}",[9,10]],["70[01346-8]\\d{6}",[9]],0,0,["804\\d{6}",[9]],["64\\d{4,7}",[6,7,8,9]],["39\\d{7}",[9]],["801\\d{6}",[9]]]],PM:["508","00","[45]\\d{5}|(?:708|8\\d\\d)\\d{6}",[6,9],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["[45]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["7"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0",0,0,0,0,0,[["(?:4[1-35-9]|5[0-47-9]|80[6-9]\\d\\d)\\d{4}"],["(?:4[02-489]|5[02-9]|708(?:4[0-5]|5[0-6]))\\d{4}"],["80[0-5]\\d{6}",[9]],["8[129]\\d{7}",[9]]]],PR:["1","011","(?:[589]\\d\\d|787)\\d{7}",[10],0,"1",0,0,0,0,"787|939",[["(?:787|939)[2-9]\\d{6}"],[""],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],["900[2-9]\\d{6}"],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}"]]],PS:["970","00","[2489]2\\d{6}|(?:1\\d|5)\\d{8}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2489]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["5"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0",0,0,0,0,0,[["(?:22[2-47-9]|42[45]|82[014-68]|92[3569])\\d{5}",[8]],["5[69]\\d{7}",[9]],["1800\\d{6}",[10]],0,0,0,0,0,0,["1700\\d{6}",[10]]]],PT:["351","00","1693\\d{5}|(?:[26-9]\\d|30)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["2[12]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["16|[236-9]"]]],0,0,0,0,0,0,[["2(?:[12]\\d|3[1-689]|4[1-59]|[57][1-9]|6[1-35689]|8[1-69]|9[1256])\\d{6}"],["6(?:[06]92(?:30|9\\d)|[35]92(?:[049]\\d|3[034]))\\d{3}|(?:(?:16|6[0356])93|9(?:[1-36]\\d\\d|480))\\d{5}"],["80[02]\\d{6}"],["(?:6(?:0[178]|4[68])\\d|76(?:0[1-57]|1[2-47]|2[237]))\\d{5}"],["884[0-4689]\\d{5}"],["600\\d{6}|6[06]92(?:0\\d|3[349]|49)\\d{3}"],["70(?:38[01]|596|(?:7\\d|8[17])\\d)\\d{4}"],["6(?:222\\d|89(?:00|88|99))\\d{4}"],["30\\d{7}"],["80(?:8\\d|9[1579])\\d{5}"]]],PW:["680","01[12]","(?:[24-8]\\d\\d|345|900)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]],0,0,0,0,0,0,[["(?:2(?:55|77)|345|488|5(?:35|44|87)|6(?:22|54|79)|7(?:33|47)|8(?:24|55|76)|900)\\d{4}"],["(?:(?:46|83)[0-5]|(?:6[2-4689]|78)0)\\d{4}|(?:45|77|88)\\d{5}"]]],PY:["595","00","59\\d{4,6}|9\\d{5,10}|(?:[2-46-8]\\d|5[0-8])\\d{4,7}",[6,7,8,9,10,11],[["(\\d{3})(\\d{3,6})","$1 $2",["[2-9]0"],"0$1"],["(\\d{2})(\\d{5})","$1 $2",["[26]1|3[289]|4[1246-8]|7[1-3]|8[1-36]"],"(0$1)"],["(\\d{3})(\\d{4,5})","$1 $2",["2[279]|3[13-5]|4[359]|5|6(?:[34]|7[1-46-8])|7[46-8]|85"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["2[14-68]|3[26-9]|4[1246-8]|6(?:1|75)|7[1-35]|8[1-36]"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["87"]],["(\\d{3})(\\d{6})","$1 $2",["9(?:[5-79]|8[1-7])"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[2-8]"],"0$1"],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["9"]]],"0",0,0,0,0,0,[["(?:[26]1|3[289]|4[1246-8]|7[1-3]|8[1-36])\\d{5,7}|(?:2(?:2[4-68]|[4-68]\\d|7[15]|9[1-5])|3(?:18|3[167]|4[2357]|51|[67]\\d)|4(?:3[12]|5[13]|9[1-47])|5(?:[1-4]\\d|5[02-4])|6(?:3[1-3]|44|7[1-8])|7(?:4[0-4]|5\\d|6[1-578]|75|8[0-8])|858)\\d{5,6}",[7,8,9]],["9(?:51|6[129]|7[1-6]|8[1-7]|9[1-5])\\d{6}",[9]],["9800\\d{5,7}",[9,10,11]],0,0,0,["[2-9]0\\d{4,7}",[6,7,8,9]],0,["8700[0-4]\\d{4}",[9]]]],QA:["974","00","800\\d{4}|(?:2|800)\\d{6}|(?:0080|[3-7])\\d{7}",[7,8,9,11],[["(\\d{3})(\\d{4})","$1 $2",["2[136]|8"]],["(\\d{4})(\\d{4})","$1 $2",["[3-7]"]]],0,0,0,0,0,0,[["4(?:1111|2022)\\d{3}|4(?:[04]\\d\\d|14[0-6]|999)\\d{4}",[8]],["[35-7]\\d{7}",[8]],["800\\d{4}|(?:0080[01]|800)\\d{6}",[7,9,11]],0,0,0,0,["2[136]\\d{5}",[7]]]],RE:["262","00","709\\d{6}|(?:26|[689]\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[26-9]"],"0$1"]],"0",0,0,0,0,0,[["26(?:2\\d\\d|3(?:0\\d|1[0-6]))\\d{4}"],["(?:69(?:2\\d\\d|3(?:[06][0-6]|1[0-3]|2[0-2]|3[0-39]|4\\d|5[0-5]|7[0-37]|8[0-8]|9[0-479]))|7092[0-3])\\d{4}"],["80\\d{7}"],["89[1-37-9]\\d{6}"],0,0,0,0,["9(?:399[0-3]|479[0-6]|76(?:2[278]|3[0-37]))\\d{4}"],["8(?:1[019]|2[0156]|84|90)\\d{6}"]]],RO:["40","00","(?:[236-8]\\d|90)\\d{7}|[23]\\d{5}",[6,9],[["(\\d{3})(\\d{3})","$1 $2",["2[3-6]","2[3-6]\\d9"],"0$1"],["(\\d{2})(\\d{4})","$1 $2",["219|31"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[23]1"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[236-9]"],"0$1"]],"0",0,0,0,0,0,[["[23][13-6]\\d{7}|(?:2(?:19\\d|[3-6]\\d9)|31\\d\\d)\\d\\d"],["(?:630|702)0\\d{5}|(?:6(?:00|2\\d)|7(?:0[013-9]|1[0-3]|[2-7]\\d|8[03-8]|9[0-39]))\\d{6}",[9]],["800\\d{6}",[9]],["90[0136]\\d{6}",[9]],0,0,["(?:37\\d|80[578])\\d{6}",[9]],0,0,["801\\d{6}",[9]]],0," int "],RS:["381","00","38[02-9]\\d{6,9}|6\\d{7,9}|90\\d{4,8}|38\\d{5,6}|(?:7\\d\\d|800)\\d{3,9}|(?:[12]\\d|3[0-79])\\d{5,10}",[6,7,8,9,10,11,12],[["(\\d{3})(\\d{3,9})","$1 $2",["(?:2[389]|39)0|[7-9]"],"0$1"],["(\\d{2})(\\d{5,10})","$1 $2",["[1-36]"],"0$1"]],"0",0,0,0,0,0,[["(?:11[1-9]\\d|(?:2[389]|39)(?:0[2-9]|[2-9]\\d))\\d{3,8}|(?:1[02-9]|2[0-24-7]|3[0-8])[2-9]\\d{4,9}",[7,8,9,10,11,12]],["6(?:[0-689]|7\\d)\\d{6,7}",[8,9,10]],["800\\d{3,9}"],["(?:78\\d|90[0169])\\d{3,7}",[6,7,8,9,10]],0,0,["7[06]\\d{4,10}"]]],RU:["7","810","8\\d{13}|[347-9]\\d{9}",[10,14],[["(\\d{4})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["7(?:1[0-8]|2[1-9])","7(?:1(?:[0-356]2|4[29]|7|8[27])|2(?:1[23]|[2-9]2))","7(?:1(?:[0-356]2|4[29]|7|8[27])|2(?:13[03-69]|62[013-9]))|72[1-57-9]2"],"8 ($1)",1],["(\\d{5})(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["7(?:1[0-68]|2[1-9])","7(?:1(?:[06][3-6]|[18]|2[35]|[3-5][3-5])|2(?:[13][3-5]|[24-689]|7[457]))","7(?:1(?:0(?:[356]|4[023])|[18]|2(?:3[013-9]|5)|3[45]|43[013-79]|5(?:3[1-8]|4[1-7]|5)|6(?:3[0-35-9]|[4-6]))|2(?:1(?:3[178]|[45])|[24-689]|3[35]|7[457]))|7(?:14|23)4[0-8]|71(?:33|45)[1-79]"],"8 ($1)",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"8 ($1)",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2-$3-$4",["[349]|8(?:[02-7]|1[1-8])"],"8 ($1)",1],["(\\d{4})(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3 $4",["8"],"8 ($1)"]],"8",0,0,0,0,0,[["336(?:[013-9]\\d|2[013-9])\\d{5}|(?:3(?:0[12]|4[1-35-79]|5[1-3]|65|8[1-58]|9[0145])|4(?:01|1[1356]|2[13467]|7[1-5]|8[1-7]|9[1-689])|8(?:1[1-8]|2[01]|3[13-6]|4[0-8]|5[15-7]|6[0-35-79]|7[1-37-9]))\\d{7}",[10]],["9\\d{9}",[10]],["8(?:0[04]|108\\d{3})\\d{7}"],["80[39]\\d{7}",[10]],["808\\d{7}",[10]]],"8~10"],RW:["250","00","(?:06|[27]\\d\\d|[89]00)\\d{6}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["0"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[7-9]"],"0$1"]],"0",0,0,0,0,0,[["(?:06|2[23568]\\d)\\d{6}"],["7[237-9]\\d{7}",[9]],["800\\d{6}",[9]],["900\\d{6}",[9]]]],SA:["966","00","(?:[15]\\d|800|92)\\d{7}",[9,10],[["(\\d{4})(\\d{5})","$1 $2",["9"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["5"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]]],"0",0,0,0,0,0,[["1(?:1\\d|2[24-8]|3[35-8]|4[3-68]|6[2-5]|7[235-7])\\d{6}",[9]],["579[01]\\d{5}|5(?:[013-689]\\d|7[0-8])\\d{6}",[9]],["800\\d{7}",[10]],["925\\d{6}",[9]],0,0,0,0,0,["920\\d{6}",[9]]]],SB:["677","0[01]","[6-9]\\d{6}|[1-6]\\d{4}",[5,7],[["(\\d{2})(\\d{5})","$1 $2",["6[89]|7|8[4-9]|9(?:[1-8]|9[0-8])"]]],0,0,0,0,0,0,[["(?:1[4-79]|[23]\\d|4[0-2]|5[03]|6[0-37])\\d{3}",[5]],["48\\d{3}|(?:(?:6[89]|7[1-9]|8[4-9])\\d|9(?:1[2-9]|2[013-9]|3[0-2]|[46]\\d|5[0-46-9]|7[0-689]|8[0-79]|9[0-8]))\\d{4}"],["1[38]\\d{3}",[5]],0,0,0,0,0,["5[12]\\d{3}",[5]]]],SC:["248","010|0[0-2]","(?:[2489]\\d|64)\\d{5}",[7],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[246]|9[57]"]]],0,0,0,0,0,0,[["4[2-46]\\d{5}"],["2[125-8]\\d{5}"],["800[08]\\d{3}"],["85\\d{5}"],0,0,0,0,["971\\d{4}|(?:64|95)\\d{5}"]],"00"],SD:["249","00","[19]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[19]"],"0$1"]],"0",0,0,0,0,0,[["1(?:5\\d|8[35-7])\\d{6}"],["(?:1[0-2]|9[0-3569])\\d{7}"]]],SE:["46","00","(?:[26]\\d\\d|9)\\d{9}|[1-9]\\d{8}|[1-689]\\d{7}|[1-4689]\\d{6}|2\\d{5}",[6,7,8,9,10,12],[["(\\d{2})(\\d{2,3})(\\d{2})","$1-$2 $3",["20"],"0$1",0,"$1 $2 $3"],["(\\d{3})(\\d{4})","$1-$2",["9(?:00|39|44|9)"],"0$1",0,"$1 $2"],["(\\d{2})(\\d{3})(\\d{2})","$1-$2 $3",["[12][136]|3[356]|4[0246]|6[03]|90[1-9]"],"0$1",0,"$1 $2 $3"],["(\\d)(\\d{2,3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["8"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2,3})(\\d{2})","$1-$2 $3",["1[2457]|2(?:[247-9]|5[0138])|3[0247-9]|4[1357-9]|5[0-35-9]|6(?:[125689]|4[02-57]|7[0-2])|9(?:[125-8]|3[02-5]|4[0-3])"],"0$1",0,"$1 $2 $3"],["(\\d{3})(\\d{2,3})(\\d{3})","$1-$2 $3",["9(?:00|39|44)"],"0$1",0,"$1 $2 $3"],["(\\d{2})(\\d{2,3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["1[13689]|2[0136]|3[1356]|4[0246]|54|6[03]|90[1-9]"],"0$1",0,"$1 $2 $3 $4"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["10|7"],"0$1",0,"$1 $2 $3 $4"],["(\\d)(\\d{3})(\\d{3})(\\d{2})","$1-$2 $3 $4",["8"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1-$2 $3 $4",["[13-5]|2(?:[247-9]|5[0138])|6(?:[124-689]|7[0-2])|9(?:[125-8]|3[02-5]|4[0-3])"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{2})(\\d{3})","$1-$2 $3 $4",["9"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1-$2 $3 $4 $5",["[26]"],"0$1",0,"$1 $2 $3 $4 $5"]],"0",0,0,0,0,0,[["(?:(?:[12][136]|3[356]|4[0246]|6[03]|8\\d)\\d|90[1-9])\\d{4,6}|(?:1(?:2[0-35]|4[0-4]|5[0-25-9]|7[13-6]|[89]\\d)|2(?:2[0-7]|4[0136-8]|5[0138]|7[018]|8[01]|9[0-57])|3(?:0[0-4]|1\\d|2[0-25]|4[056]|7[0-2]|8[0-3]|9[023])|4(?:1[013-8]|3[0135]|5[14-79]|7[0-246-9]|8[0156]|9[0-689])|5(?:0[0-6]|[15][0-5]|2[0-68]|3[0-4]|4\\d|6[03-5]|7[013]|8[0-79]|9[01])|6(?:1[1-3]|2[0-4]|4[02-57]|5[0-37]|6[0-3]|7[0-2]|8[0247]|9[0-356])|9(?:1[0-68]|2\\d|3[02-5]|4[0-3]|5[0-4]|[68][01]|7[0135-8]))\\d{5,6}",[7,8,9]],["7[02369]\\d{7}",[9]],["20\\d{4,7}",[6,7,8,9]],["649\\d{6}|99[1-59]\\d{4}(?:\\d{3})?|9(?:00|39|44)[1-8]\\d{3,6}",[7,8,9,10]],["75[1-8]\\d{6}",[9]],["(?:25[245]|67[3-68])\\d{9}",[12]],["10[1-8]\\d{6}",[9]],["74[02-9]\\d{6}",[9]],0,["77[0-7]\\d{6}",[9]]]],SG:["65","0[0-3]\\d","(?:(?:1\\d|8)\\d\\d|7000)\\d{7}|[3689]\\d{7}",[8,10,11],[["(\\d{4})(\\d{4})","$1 $2",["[369]|8(?:0[1-9]|[1-9])"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]],["(\\d{4})(\\d{4})(\\d{3})","$1 $2 $3",["7"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]]],0,0,0,0,0,0,[["662[0-24-9]\\d{4}|6(?:[0-578]\\d|6[013-57-9]|9[0-35-9])\\d{5}",[8]],["897[0-5]\\d{4}|(?:8(?:0[1-9]|[1-8]\\d|9[0-6])|9[0-8]\\d)\\d{5}",[8]],["(?:18|8)00\\d{7}",[10,11]],["1900\\d{7}",[11]],0,0,["7000\\d{7}",[11]],0,["(?:3[12]\\d|666)\\d{5}",[8]]]],SH:["290","00","(?:[256]\\d|8)\\d{3}",[4,5],0,0,0,0,0,0,"[256]",[["2(?:[0-57-9]\\d|6[4-9])\\d\\d"],["[56]\\d{4}",[5]],0,0,0,0,0,0,["262\\d\\d",[5]]]],SI:["386","00|10(?:22|66|88|99)","[1-7]\\d{7}|8\\d{4,7}|90\\d{4,6}",[5,6,7,8],[["(\\d{2})(\\d{3,6})","$1 $2",["8[09]|9"],"0$1"],["(\\d{3})(\\d{5})","$1 $2",["59|8"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[37][01]|4[0139]|51|6"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[1-57]"],"(0$1)"]],"0",0,0,0,0,0,[["(?:[1-357][2-8]|4[24-8])\\d{6}",[8]],["65(?:[178]\\d|5[56]|6[01])\\d{4}|(?:[37][01]|4[0139]|51|6[489])\\d{6}",[8]],["80\\d{4,6}",[6,7,8]],["89[1-3]\\d{2,5}|90\\d{4,6}"],0,0,0,0,["(?:59\\d\\d|8(?:1(?:[67]\\d|8[0-589])|2(?:0\\d|2[0-37-9]|8[0-2489])|3[389]\\d))\\d{4}",[8]]],"00"],SJ:["47","00","0\\d{4}|(?:[489]\\d|79)\\d{6}",[5,8],0,0,0,0,0,0,"79",[["79\\d{6}",[8]],["(?:4[015-8]|9\\d)\\d{6}",[8]],["80[01]\\d{5}",[8]],["82[09]\\d{5}",[8]],["880\\d{5}",[8]],["81[23]\\d{5}",[8]],["(?:0[235-9]|81(?:0(?:0[7-9]|1\\d)|5\\d\\d))\\d{3}"],0,["85[0-5]\\d{5}",[8]],["810(?:0[0-6]|[2-8]\\d)\\d{3}",[8]]]],SK:["421","00","[2-689]\\d{8}|[2-59]\\d{6}|[2-5]\\d{5}",[6,7,9],[["(\\d)(\\d{2})(\\d{3,4})","$1 $2 $3",["21"],"0$1"],["(\\d{2})(\\d{2})(\\d{2,3})","$1 $2 $3",["[3-5][1-8]1","[3-5][1-8]1[67]"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{2})","$1/$2 $3 $4",["2"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[689]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1/$2 $3 $4",["[3-5]"],"0$1"]],"0",0,0,0,0,0,[["(?:2(?:16|[2-9]\\d{3})|(?:(?:[3-5][1-8]\\d|819)\\d|601[1-5])\\d)\\d{4}|(?:2|[3-5][1-8])1[67]\\d{3}|[3-5][1-8]16\\d\\d"],["909[1-9]\\d{5}|9(?:0[1-8]|1[0-24-9]|4[03-57-9]|5\\d)\\d{6}",[9]],["800\\d{6}",[9]],["9(?:00|[78]\\d)\\d{6}",[9]],0,0,["96\\d{7}",[9]],["9090\\d{3}",[7]],["6(?:02|5[0-4]|9[0-6])\\d{6}",[9]],["8[5-9]\\d{7}",[9]]]],SL:["232","00","(?:[237-9]\\d|66)\\d{6}",[8],[["(\\d{2})(\\d{6})","$1 $2",["[236-9]"],"(0$1)"]],"0",0,0,0,0,0,[["22[2-4][2-9]\\d{4}"],["(?:25|3[0-5]|66|7[1-9]|8[08]|9[09])\\d{6}"]]],SM:["378","00","(?:0549|[5-7]\\d)\\d{6}",[8,10],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-7]"]],["(\\d{4})(\\d{6})","$1 $2",["0"]]],0,0,"([89]\\d{5})$","0549$1",0,0,[["0549(?:8[0157-9]|9\\d)\\d{4}",[10]],["6[16]\\d{6}",[8]],0,["7[178]\\d{6}",[8]],0,0,0,0,["5[158]\\d{6}",[8]]]],SN:["221","00","(?:[378]\\d|93)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[379]"]]],0,0,0,0,0,0,[["3(?:0(?:1[0-2]|80)|282|3(?:8[1-9]|9[3-9])|611)\\d{5}"],["7(?:(?:[06-8]\\d|[19]0|21)\\d|5(?:0[01]|[19]0|2[25]|3[356]|[4-7]\\d|8[35]))\\d{5}"],["800\\d{6}"],["88[4689]\\d{6}"],0,0,0,0,["(?:3(?:392|9[01]\\d)\\d|93(?:3[13]0|929))\\d{4}"],["81[02468]\\d{6}"]]],SO:["252","00","[346-9]\\d{8}|[12679]\\d{7}|[1-5]\\d{6}|[1348]\\d{5}",[6,7,8,9],[["(\\d{2})(\\d{4})","$1 $2",["8[125]"]],["(\\d{6})","$1",["[134]"]],["(\\d)(\\d{6})","$1 $2",["[15]|2[0-79]|3[0-46-8]|4[0-7]"]],["(\\d)(\\d{7})","$1 $2",["(?:2|90)4|[67]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[348]|64|79|90"]],["(\\d{2})(\\d{5,7})","$1 $2",["1|28|6[0-35-9]|7[67]|9[2-9]"]]],"0",0,0,0,0,0,[["(?:1\\d|2[0-79]|3[0-46-8]|4[0-7]|5[57-9])\\d{5}|(?:[134]\\d|8[125])\\d{4}",[6,7]],["(?:(?:15|(?:3[59]|4[89]|6\\d|7[679]|8[08])\\d|9(?:0\\d|[2-9]))\\d|2(?:4\\d|8))\\d{5}|(?:[67]\\d\\d|904)\\d{5}",[7,8,9]]]],SR:["597","00","(?:[2-5]|68|[78]\\d|90)\\d{5}",[6,7],[["(\\d{2})(\\d{2})(\\d{2})","$1-$2-$3",["56"]],["(\\d{3})(\\d{3})","$1-$2",["[2-5]"]],["(\\d{3})(\\d{4})","$1-$2",["[6-9]"]]],0,0,0,0,0,0,[["(?:2[1-3]|3[0-7]|(?:4|68)\\d|5[2-58])\\d{4}"],["(?:7[124-7]|8[1-9])\\d{5}",[7]],["80\\d{5}",[7]],["90\\d{5}",[7]],0,0,0,0,["56\\d{4}",[6]]]],SS:["211","00","[19]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[19]"],"0$1"]],"0",0,0,0,0,0,[["1[89]\\d{7}"],["(?:12|9[1257-9])\\d{7}"]]],ST:["239","00","(?:22|9\\d)\\d{5}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[29]"]]],0,0,0,0,0,0,[["22\\d{5}"],["900[5-9]\\d{3}|9(?:0[1-9]|[89]\\d)\\d{4}"]]],SV:["503","00","[267]\\d{7}|(?:80\\d|900)\\d{4}(?:\\d{4})?",[7,8,11],[["(\\d{3})(\\d{4})","$1 $2",["[89]"]],["(\\d{4})(\\d{4})","$1 $2",["[267]"]],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["[89]"]]],0,0,0,0,0,0,[["2(?:79(?:0[0347-9]|[1-9]\\d)|89(?:0[024589]|[1-9]\\d))\\d{3}|2(?:[1-69]\\d|[78][0-8])\\d{5}",[8]],["[67]\\d{7}",[8]],["800\\d{8}|80[01]\\d{4}",[7,11]],["900\\d{4}(?:\\d{4})?",[7,11]]]],SX:["1","011","7215\\d{6}|(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"(5\\d{6})$|1","721$1",0,"721",[["7215(?:4[2-8]|8[239]|9[056])\\d{4}"],["7215(?:1[02]|2\\d|5[034679]|8[014-8])\\d{4}"],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],["900[2-9]\\d{6}"],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}"]]],SY:["963","00","[1-39]\\d{8}|[1-5]\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-5]"],"0$1",1],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1",1]],"0",0,0,0,0,0,[["21\\d{6,7}|(?:1(?:[14]\\d|[2356])|2[235]|3(?:[13]\\d|4)|4[134]|5[1-3])\\d{6}"],["9[1-9]\\d{7}",[9]]]],SZ:["268","00","0800\\d{4}|(?:[237]\\d|900)\\d{6}",[8,9],[["(\\d{4})(\\d{4})","$1 $2",["[0237]"]],["(\\d{5})(\\d{4})","$1 $2",["9"]]],0,0,0,0,0,0,[["[23][2-5]\\d{6}",[8]],["7[6-9]\\d{6}",[8]],["0800\\d{4}",[8]],["900\\d{6}",[9]],0,0,0,0,["70\\d{6}",[8]]]],TA:["290","00","8\\d{3}",[4],0,0,0,0,0,0,"8",[["8\\d{3}"]]],TC:["1","011","(?:[58]\\d\\d|649|900)\\d{7}",[10],0,"1",0,"([2-479]\\d{6})$|1","649$1",0,"649",[["649(?:266|712|9(?:4\\d|50))\\d{4}"],["649(?:2(?:3[129]|4[1-79])|3\\d\\d|4[34][1-3])\\d{4}"],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],["900[2-9]\\d{6}"],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}"],0,0,0,["649(?:71[01]|966)\\d{4}"]]],TD:["235","00|16","(?:22|30|[689]\\d|77)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[236-9]"]]],0,0,0,0,0,0,[["22(?:[37-9]0|5[0-5]|6[89])\\d{4}"],["(?:30|[69]\\d|77|8[56])\\d{6}"]],"00"],TG:["228","00","[279]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[279]"]]],0,0,0,0,0,0,[["2(?:2[2-7]|3[23]|4[45]|55|6[67]|77)\\d{5}"],["(?:7[0-29]|9[0-36-9])\\d{6}"]]],TH:["66","00[1-9]","(?:001800|[2-57]|[689]\\d)\\d{7}|1\\d{7,9}",[8,9,10,13],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[13-9]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0",0,0,0,0,0,[["(?:1[0689]|2\\d|3[2-9]|4[2-5]|5[2-6]|7[3-7])\\d{6}",[8]],["67(?:1[0-8]|2[4-7])\\d{5}|(?:14|6[1-6]|[89]\\d)\\d{7}",[9]],["(?:001800\\d|1800)\\d{6}",[10,13]],["1900\\d{6}",[10]],0,0,0,0,["6[08]\\d{7}",[9]]]],TJ:["992","810","[0-57-9]\\d{8}",[9],[["(\\d{6})(\\d)(\\d{2})","$1 $2 $3",["331","3317"]],["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["44[02-479]|[34]7"]],["(\\d{4})(\\d)(\\d{4})","$1 $2 $3",["3(?:[1245]|3[12])"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[0-57-9]"]]],0,0,0,0,0,0,[["(?:3(?:1[3-5]|2[245]|3[12]|4[24-7]|5[25]|72)|4(?:46|74|87))\\d{6}"],["(?:33[03-9]|4(?:1[18]|4[02-479])|81[1-9])\\d{6}|(?:[09]\\d|1[0-27-9]|2[0-27]|[34]0|5[05]|7[01578]|8[078])\\d{7}"]],"8~10"],TK:["690","00","[2-47]\\d{3,6}",[4,5,6,7],0,0,0,0,0,0,0,[["(?:2[2-4]|[34]\\d)\\d{2,5}"],["7[2-4]\\d{2,5}"]]],TL:["670","00","7\\d{7}|(?:[2-47]\\d|[89]0)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["[2-489]|70"]],["(\\d{4})(\\d{4})","$1 $2",["7"]]],0,0,0,0,0,0,[["(?:2[1-5]|3[1-9]|4[1-4])\\d{5}",[7]],["7[2-8]\\d{6}",[8]],["80\\d{5}",[7]],["90\\d{5}",[7]],["70\\d{5}",[7]]]],TM:["993","810","(?:[1-6]\\d|71)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2-$3-$4",["12"],"(8 $1)"],["(\\d{3})(\\d)(\\d{2})(\\d{2})","$1 $2-$3-$4",["[1-5]"],"(8 $1)"],["(\\d{2})(\\d{6})","$1 $2",["[67]"],"8 $1"]],"8",0,0,0,0,0,[["(?:1(?:2\\d|3[1-9])|2(?:22|4[0-35-8])|3(?:22|4[03-9])|4(?:22|3[128]|4\\d|6[15])|5(?:22|5[7-9]|6[014-689]))\\d{5}"],["(?:6\\d|71)\\d{6}"]],"8~10"],TN:["216","00","[2-57-9]\\d{7}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2-57-9]"]]],0,0,0,0,0,0,[["81200\\d{3}|(?:3[0-2]|7\\d)\\d{6}"],["3(?:001|[12]40)\\d{4}|(?:(?:[259]\\d|4[0-8])\\d|3(?:1[1-35]|6[0-4]|91))\\d{5}"],["8010\\d{4}"],["88\\d{6}"],0,0,0,0,0,["8[12]10\\d{4}"]]],TO:["676","00","(?:0800|(?:[5-8]\\d\\d|999)\\d)\\d{3}|[2-8]\\d{4}",[5,7],[["(\\d{2})(\\d{3})","$1-$2",["[2-4]|50|6[09]|7[0-24-69]|8[05]"]],["(\\d{4})(\\d{3})","$1 $2",["0"]],["(\\d{3})(\\d{4})","$1 $2",["[5-9]"]]],0,0,0,0,0,0,[["(?:2\\d|3[0-8]|4[0-4]|50|6[09]|7[0-24-69]|8[05])\\d{3}",[5]],["(?:5(?:4[0-5]|5[4-6])|6(?:[09]\\d|3[02]|8[15-9])|(?:7\\d|8[46-9])\\d|999)\\d{4}",[7]],["0800\\d{3}",[7]],0,0,0,0,0,["55[0-37-9]\\d{4}",[7]]]],TR:["90","00","4\\d{6}|8\\d{11,12}|(?:[2-58]\\d\\d|900)\\d{7}",[7,10,12,13],[["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["512|8[01589]|90"],"0$1",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["5(?:[0-59]|61)","5(?:[0-59]|61[06])","5(?:[0-59]|61[06]1)"],"0$1",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24][1-8]|3[1-9]"],"(0$1)",1],["(\\d{3})(\\d{3})(\\d{6,7})","$1 $2 $3",["80"],"0$1",1]],"0",0,0,0,0,0,[["(?:2(?:[13][26]|[28][2468]|[45][268]|[67][246])|3(?:[13][28]|[24-6][2468]|[78][02468]|92)|4(?:[16][246]|[23578][2468]|4[26]))\\d{7}",[10]],["561(?:011|61\\d)\\d{4}|5(?:0[15-7]|1[06]|24|[34]\\d|5[1-59]|9[46])\\d{7}",[10]],["8(?:00\\d{7}(?:\\d{2,3})?|11\\d{7})",[10,12,13]],["(?:8[89]8|900)\\d{7}",[10]],["592(?:21[12]|461)\\d{4}",[10]],0,["444\\d{4}",[7]],["512\\d{7}",[10]],["850\\d{7}",[10]]]],TT:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-46-8]\\d{6})$|1","868$1",0,"868",[["868(?:2(?:01|1[5-9]|[23]\\d|4[0-2])|6(?:0[7-9]|1[02-8]|2[1-9]|[3-69]\\d|7[0-79])|82[124])\\d{4}"],["868(?:(?:2[5-9]|3\\d)\\d|4(?:3[0-6]|[6-9]\\d)|6(?:20|78|8\\d)|7(?:0[1-9]|1[02-9]|[2-9]\\d))\\d{4}"],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],["900[2-9]\\d{6}"],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}"],["868619\\d{4}"]]],TV:["688","00","(?:2|7\\d\\d|90)\\d{4}",[5,6,7],[["(\\d{2})(\\d{3})","$1 $2",["2"]],["(\\d{2})(\\d{4})","$1 $2",["90"]],["(\\d{2})(\\d{5})","$1 $2",["7"]]],0,0,0,0,0,0,[["2[02-9]\\d{3}",[5]],["(?:7[01]\\d|90)\\d{4}",[6,7]]]],TW:["886","0(?:0[25-79]|19)","[2-689]\\d{8}|7\\d{9,10}|[2-8]\\d{7}|2\\d{6}",[7,8,9,10,11],[["(\\d{2})(\\d)(\\d{4})","$1 $2 $3",["202"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[258]0"],"0$1"],["(\\d)(\\d{3,4})(\\d{4})","$1 $2 $3",["[23568]|4(?:0[02-48]|[1-47-9])|7[1-9]","[23568]|4(?:0[2-48]|[1-47-9])|(?:400|7)[1-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[49]"],"0$1"],["(\\d{2})(\\d{4})(\\d{4,5})","$1 $2 $3",["7"],"0$1"]],"0",0,0,0,0,0,[["(?:2[2-8]\\d|370|55[01]|7[1-9])\\d{6}|4(?:(?:0(?:0[1-9]|[2-48]\\d)|1[023]\\d)\\d{4,5}|(?:[239]\\d\\d|4(?:0[56]|12|49))\\d{5})|6(?:[01]\\d{7}|4(?:0[56]|12|24|4[09])\\d{4,5})|8(?:(?:2(?:3\\d|4[0-269]|[578]0|66)|36[24-9]|90\\d\\d)\\d{4}|4(?:0[56]|12|24|4[09])\\d{4,5})|(?:2(?:2(?:0\\d\\d|4(?:0[68]|[249]0|3[0-467]|5[0-25-9]|6[0235689]))|(?:3(?:[09]\\d|1[0-4])|(?:4\\d|5[0-49]|6[0-29]|7[0-5])\\d)\\d)|(?:(?:3[2-9]|5[2-8]|6[0-35-79]|8[7-9])\\d\\d|4(?:2(?:[089]\\d|7[1-9])|(?:3[0-4]|[78]\\d|9[01])\\d))\\d)\\d{3}",[8,9]],["(?:40001[0-2]|9[0-8]\\d{4})\\d{3}",[9]],["80[0-79]\\d{6}|800\\d{5}",[8,9]],["20(?:[013-9]\\d\\d|2)\\d{4}",[7,9]],["99\\d{7}",[9]],0,["50[0-46-9]\\d{6}",[9]],0,["7010(?:[0-2679]\\d|3[0-7]|8[0-5])\\d{5}|70\\d{8}",[10,11]]],0,"#"],TZ:["255","00[056]","(?:[25-8]\\d|41|90)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[24]"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["5"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[67]"],"0$1"]],"0",0,0,0,0,0,[["2[2-8]\\d{7}"],["(?:6[125-9]|7[13-9])\\d{7}"],["80[08]\\d{6}"],["90\\d{7}"],0,0,0,0,["41\\d{7}"],["8(?:40|6[01])\\d{6}"]]],UA:["380","00","[89]\\d{9}|[3-9]\\d{8}",[9,10],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6[12][29]|(?:3[1-8]|4[136-8]|5[12457]|6[49])2|(?:56|65)[24]","6[12][29]|(?:35|4[1378]|5[12457]|6[49])2|(?:56|65)[24]|(?:3[1-46-8]|46)2[013-9]"],"0$1"],["(\\d{4})(\\d{5})","$1 $2",["3[1-8]|4(?:[1367]|[45][6-9]|8[4-6])|5(?:[1-5]|6[0135689]|7[4-6])|6(?:[12][3-7]|[459])","3[1-8]|4(?:[1367]|[45][6-9]|8[4-6])|5(?:[1-5]|6(?:[015689]|3[02389])|7[4-6])|6(?:[12][3-7]|[459])"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[3-7]|89|9[1-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[89]"],"0$1"]],"0",0,0,0,0,0,[["(?:3[1-8]|4[13-8]|5[1-7]|6[12459])\\d{7}",[9]],["790\\d{6}|(?:39|50|6[36-8]|7[1-357]|9[1-9])\\d{7}",[9]],["800[1-8]\\d{5,6}"],["900[239]\\d{5,6}"],0,0,0,0,["89[1-579]\\d{6}",[9]]],"0~0"],UG:["256","00[057]","800\\d{6}|(?:[29]0|[347]\\d)\\d{7}",[9],[["(\\d{4})(\\d{5})","$1 $2",["202","2024"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["[27-9]|4(?:6[45]|[7-9])"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["[34]"],"0$1"]],"0",0,0,0,0,0,[["20(?:(?:240|30[67])\\d|6(?:00[0-2]|30[0-4]))\\d{3}|(?:20(?:[017]\\d|2[5-9]|3[1-4]|5[0-4]|6[15-9])|[34]\\d{3})\\d{5}"],["72[48]0\\d{5}|7(?:[014-8]\\d|2[067]|36|9[0189])\\d{6}"],["800[1-3]\\d{5}"],["90[1-3]\\d{6}"]]],US:["1","011","[2-9]\\d{9}|3\\d{6}",[10],[["(\\d{3})(\\d{4})","$1-$2",["310"],0,1],["(\\d{3})(\\d{3})(\\d{4})","($1) $2-$3",["[2-9]"],0,1,"$1-$2-$3"]],"1",0,0,0,0,0,[["(?:3052(?:0[0-8]|[1-9]\\d)|5056(?:[0-35-9]\\d|4[0-68]))\\d{4}|(?:2742|305[3-9]|472[247-9]|505[2-57-9]|983[2-47-9])\\d{6}|(?:2(?:0[1-35-9]|1[02-9]|2[03-57-9]|3[1459]|4[08]|5[1-46]|6[0279]|7[0269]|8[13])|3(?:0[1-47-9]|1[02-9]|2[0135-79]|3[0-24679]|4[167]|5[0-2]|6[01349]|8[056])|4(?:0[124-9]|1[02-579]|2[3-5]|3[0245]|4[023578]|58|6[349]|7[0589]|8[04])|5(?:0[1-47-9]|1[0235-8]|20|3[0149]|4[01]|5[179]|6[1-47]|7[0-5]|8[0256])|6(?:0[1-35-9]|1[024-9]|2[03689]|3[016]|4[0156]|5[01679]|6[0-279]|78|8[0-29])|7(?:0[1-46-8]|1[2-9]|2[04-8]|3[0-247]|4[0378]|5[47]|6[02359]|7[0-59]|8[156])|8(?:0[1-68]|1[02-8]|2[0168]|3[0-2589]|4[03578]|5[046-9]|6[02-5]|7[028])|9(?:0[1346-9]|1[02-9]|2[0589]|3[0146-8]|4[01357-9]|5[12469]|7[0-3589]|8[04-69]))[2-9]\\d{6}"],[""],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],["900[2-9]\\d{6}"],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}"],0,0,0,["305209\\d{4}"]]],UY:["598","0(?:0|1[3-9]\\d)","0004\\d{2,9}|[1249]\\d{7}|(?:[49]\\d|80)\\d{5}",[6,7,8,9,10,11,12,13],[["(\\d{3})(\\d{3,4})","$1 $2",["0"]],["(\\d{3})(\\d{4})","$1 $2",["[49]0|8"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1"],["(\\d{4})(\\d{4})","$1 $2",["[124]"]],["(\\d{3})(\\d{3})(\\d{2,4})","$1 $2 $3",["0"]],["(\\d{3})(\\d{3})(\\d{3})(\\d{2,4})","$1 $2 $3 $4",["0"]]],"0",0,0,0,0,0,[["(?:1(?:770|9(?:20|[89]7))|(?:2\\d|4[2-7])\\d\\d)\\d{4}",[8]],["9[1-9]\\d{6}",[8]],["0004\\d{2,9}|(?:405|80[05])\\d{4}"],["90[0-8]\\d{4}",[7]]],"00"," int. "],UZ:["998","00","(?:20|33|[5-9]\\d)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[235-9]"]]],0,0,0,0,0,0,[["(?:55\\d\\d|6(?:1(?:22|3[124]|4[1-4]|5[1-3578]|64)|2(?:22|3[0-57-9]|41)|5(?:22|3[3-7]|5[024-8])|[69]\\d\\d|7(?:[23]\\d|7[69]))|7(?:0(?:5[4-9]|6[0146]|7[124-6]|9[135-8])|[168]\\d\\d|2(?:22|3[13-57-9]|4[1-3579]|5[14])|3(?:2\\d|3[1578]|4[1-35-7]|5[1-57]|61)|4(?:2\\d|3[1-579]|7[1-79])|5(?:22|5[1-9]|6[1457])|9(?:22|5[1-9])))\\d{5}"],["(?:(?:[25]0|33|8[78]|9[0-57-9])\\d{3}|6(?:1(?:2(?:2[01]|98)|35[0-4]|50\\d|61[23]|7(?:[01][017]|4\\d|55|9[5-9]))|2(?:(?:11|7\\d)\\d|2(?:[12]1|9[01379])|5(?:[126]\\d|3[0-4]))|5(?:19[01]|2(?:27|9[26])|(?:30|59|7\\d)\\d)|6(?:2(?:1[5-9]|2[0367]|38|41|52|60)|(?:3[79]|9[0-3])\\d|4(?:56|83)|7(?:[07]\\d|1[017]|3[07]|4[047]|5[057]|67|8[0178]|9[79]))|7(?:2(?:24|3[237]|4[5-9]|7[15-8])|5(?:7[12]|8[0589])|7(?:0\\d|[39][07])|9(?:0\\d|7[079])))|7(?:[07]\\d{3}|2(?:2(?:2[79]|95)|3(?:2[5-9]|6[0-6])|57\\d|7(?:0\\d|1[17]|2[27]|3[37]|44|5[057]|66|88))|3(?:2(?:1[0-6]|21|3[469]|7[159])|(?:33|9[4-6])\\d|5(?:0[0-4]|5[579]|9\\d)|7(?:[0-3579]\\d|4[0467]|6[67]|8[078]))|4(?:2(?:29|5[0257]|6[0-7]|7[1-57])|5(?:1[0-4]|8\\d|9[5-9])|7(?:0\\d|1[024589]|2[0-27]|3[0137]|[46][07]|5[01]|7[5-9]|9[079])|9(?:7[015-9]|[89]\\d))|5(?:112|2(?:0\\d|2[29]|[49]4)|3[1568]\\d|52[6-9]|7(?:0[01578]|1[017]|[23]7|4[047]|[5-7]\\d|8[78]|9[079]))|9(?:22[128]|3(?:2[0-4]|7\\d)|57[02569]|7(?:2[05-9]|3[37]|4\\d|60|7[2579]|87|9[07]))))\\d{4}"]]],VA:["39","00","0\\d{5,10}|3[0-8]\\d{7,10}|55\\d{8}|8\\d{5}(?:\\d{2,4})?|(?:1\\d|39)\\d{7,8}",[6,7,8,9,10,11,12],0,0,0,0,0,0,"06698",[["06698\\d{1,6}",[6,7,8,9,10,11]],["3[1-9]\\d{8}|3[2-9]\\d{7}",[9,10]],["80(?:0\\d{3}|3)\\d{3}",[6,9]],["(?:0878\\d{3}|89(?:2\\d|3[04]|4(?:[0-4]|[5-9]\\d\\d)|5[0-4]))\\d\\d|(?:1(?:44|6[346])|89(?:38|5[5-9]|9))\\d{6}",[6,8,9,10]],["1(?:78\\d|99)\\d{6}",[9,10]],["3[2-8]\\d{9,10}",[11,12]],0,0,["55\\d{8}",[10]],["84(?:[08]\\d{3}|[17])\\d{3}",[6,9]]]],VC:["1","011","(?:[58]\\d\\d|784|900)\\d{7}",[10],0,"1",0,"([2-7]\\d{6})$|1","784$1",0,"784",[["784(?:266|3(?:6[6-9]|7\\d|8[0-6])|4(?:38|5[0-36-8]|8[0-8])|5(?:55|7[0-2]|93)|638|784)\\d{4}"],["784(?:4(?:3[0-5]|5[45]|89|9[0-8])|5(?:2[6-9]|3[0-4])|720)\\d{4}"],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],["900[2-9]\\d{6}"],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}"],0,0,0,["78451[0-2]\\d{4}"]]],VE:["58","00","[68]00\\d{7}|(?:[24]\\d|[59]0)\\d{8}",[10],[["(\\d{3})(\\d{7})","$1-$2",["[24-689]"],"0$1"]],"0",0,0,0,0,0,[["(?:2(?:12|3[457-9]|[467]\\d|[58][1-9]|9[1-6])|[4-6]00)\\d{7}"],["4(?:1[24-8]|2[246])\\d{7}"],["800\\d{7}"],["90[01]\\d{7}"],0,0,["501\\d{7}"]]],VG:["1","011","(?:284|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-578]\\d{6})$|1","284$1",0,"284",[["284(?:229|4(?:22|9[45])|774|8(?:52|6[459]))\\d{4}"],["284(?:245|3(?:0[0-3]|4[0-7]|68|9[34])|4(?:4[0-6]|68|9[69])|5(?:4[0-7]|68|9[69]))\\d{4}"],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],["900[2-9]\\d{6}"],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}"]]],VI:["1","011","[58]\\d{9}|(?:34|90)0\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","340$1",0,"340",[["340(?:2(?:0\\d|10|2[06-8]|4[49]|77)|3(?:32|44)|4(?:2[23]|44|7[34]|89)|5(?:1[34]|55)|6(?:2[56]|4[23]|77|9[023])|7(?:1[2-57-9]|2[57]|7\\d)|884|998)\\d{4}"],[""],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],["900[2-9]\\d{6}"],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}"]]],VN:["84","00","[12]\\d{9}|[135-9]\\d{8}|[16]\\d{7}|[16-8]\\d{6}",[7,8,9,10],[["(\\d{2})(\\d{5})","$1 $2",["80"],"0$1",1],["(\\d{4})(\\d{4,6})","$1 $2",["1"],0,1],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["6"],"0$1",1],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[357-9]"],"0$1",1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["2[48]"],"0$1",1],["(\\d{3})(\\d{4})(\\d{3})","$1 $2 $3",["2"],"0$1",1]],"0",0,0,0,0,0,[["2(?:0[3-9]|1[0-689]|2[0-25-9]|[38][2-9]|4[2-8]|5[124-9]|6[0-39]|7[0-7]|9[0-4679])\\d{7}",[10]],["(?:5(?:2[238]|59)|89[6-9]|99[013-9])\\d{6}|(?:3\\d|5[1689]|7[06-9]|8[1-8]|9[0-8])\\d{7}",[9]],["1800\\d{4,6}|12(?:0[13]|28)\\d{4}",[8,9,10]],["1900\\d{4,6}",[8,9,10]],0,0,["(?:[17]99|80\\d)\\d{4}|69\\d{5,6}",[7,8]],0,["672\\d{6}",[9]]]],VU:["678","00","[57-9]\\d{6}|(?:[238]\\d|48)\\d{3}",[5,7],[["(\\d{3})(\\d{4})","$1 $2",["[57-9]"]]],0,0,0,0,0,0,[["(?:38[0-8]|48[4-9])\\d\\d|(?:2[02-9]|3[4-7]|88)\\d{3}",[5]],["(?:[58]\\d|7[013-7])\\d{5}",[7]],["81[18]\\d\\d",[5]],0,0,0,["(?:3[03]|900\\d)\\d{3}"],0,["9(?:0[1-9]|1[01])\\d{4}",[7]]]],WF:["681","00","(?:40|72|8\\d{4})\\d{4}|[89]\\d{5}",[6,9],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["[47-9]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]]],0,0,0,0,0,0,[["72\\d{4}",[6]],["(?:72|8[23])\\d{4}",[6]],["80[0-5]\\d{6}",[9]],0,0,["[48]0\\d{4}",[6]],0,0,["9[23]\\d{4}",[6]]]],WS:["685","0","(?:[2-6]|8\\d{5})\\d{4}|[78]\\d{6}|[68]\\d{5}",[5,6,7,10],[["(\\d{5})","$1",["[2-5]|6[1-9]"]],["(\\d{3})(\\d{3,7})","$1 $2",["[68]"]],["(\\d{2})(\\d{5})","$1 $2",["7"]]],0,0,0,0,0,0,[["6[1-9]\\d{3}|(?:[2-5]|60)\\d{4}",[5,6]],["(?:7[1-35-8]|8(?:[3-7]|9\\d{3}))\\d{5}",[7,10]],["800\\d{3}",[6]]]],XK:["383","00","2\\d{7,8}|3\\d{7,11}|(?:4\\d\\d|[89]00)\\d{5}",[8,9,10,11,12],[["(\\d{3})(\\d{5})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2-4]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2|39"],"0$1"],["(\\d{2})(\\d{7,10})","$1 $2",["3"],"0$1"]],"0",0,0,0,0,0,[["38\\d{6,10}|(?:2[89]|39)(?:0\\d{5,6}|[1-9]\\d{5})"],["4[3-9]\\d{6}",[8]],["800\\d{5}",[8]],["900\\d{5}",[8]]]],YE:["967","00","(?:1|7\\d)\\d{7}|[1-7]\\d{6}",[7,8,9],[["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-6]|7(?:[24-6]|8[0-7])"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["7"],"0$1"]],"0",0,0,0,0,0,[["78[0-7]\\d{4}|17\\d{6}|(?:[12][2-68]|3[2358]|4[2-58]|5[2-6]|6[3-58]|7[24-6])\\d{5}",[7,8]],["7[01378]\\d{7}",[9]]]],YT:["262","00","7093\\d{5}|(?:80|9\\d)\\d{7}|(?:26|63)9\\d{6}",[9],0,"0",0,0,0,0,0,[["269(?:0[0-467]|15|5[0-4]|6\\d|[78]0)\\d{4}"],["(?:639(?:0[0-79]|1[019]|[267]\\d|3[09]|40|5[05-9]|9[04-79])|7093[5-7])\\d{4}"],["80\\d{7}"],0,0,0,0,0,["9(?:(?:39|47)8[01]|769\\d)\\d{4}"]]],ZA:["27","00","[1-79]\\d{8}|8\\d{4,9}",[5,6,7,8,9,10],[["(\\d{2})(\\d{3,4})","$1 $2",["8[1-4]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["8[1-4]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["860"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"]],"0",0,0,0,0,0,[["(?:2(?:0330|4302)|52087)0\\d{3}|(?:1[0-8]|2[1-378]|3[1-69]|4\\d|5[1346-8])\\d{7}",[9]],["(?:1(?:3492[0-25]|4495[0235]|549(?:20|5[01]))|4[34]492[01])\\d{3}|8[1-4]\\d{3,7}|(?:2[27]|47|54)4950\\d{3}|(?:1(?:049[2-4]|9[12]\\d\\d)|(?:50[0-2]|6\\d\\d|7(?:[0-46-9]\\d|5[0-4]))\\d\\d|8(?:5\\d{3}|7(?:08[67]|158|28[5-9]|310)))\\d{4}|(?:1[6-8]|28|3[2-69]|4[025689]|5[36-8])4920\\d{3}|(?:12|[2-5]1)492\\d{4}",[5,6,7,8,9]],["80\\d{7}",[9]],["(?:86[2-9]|9[0-2]\\d)\\d{6}",[9]],0,0,["861\\d{6,7}",[9,10]],0,["87(?:08[0-589]|15[0-79]|28[0-4]|31[1-9])\\d{4}|87(?:[02][0-79]|1[0-46-9]|3[02-9]|[4-9]\\d)\\d{5}",[9]],["860\\d{6}",[9]]]],ZM:["260","00","800\\d{6}|(?:21|[579]\\d|63)\\d{7}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[28]"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["[579]"],"0$1"]],"0",0,0,0,0,0,[["21[1-8]\\d{6}"],["(?:[59][5-8]|7[5-9])\\d{7}"],["800\\d{6}"],0,0,0,0,0,["63\\d{7}"]]],ZW:["263","00","2(?:[0-57-9]\\d{6,8}|6[0-24-9]\\d{6,7})|[38]\\d{9}|[35-8]\\d{8}|[3-6]\\d{7}|[1-689]\\d{6}|[1-3569]\\d{5}|[1356]\\d{4}",[5,6,7,8,9,10],[["(\\d{3})(\\d{3,5})","$1 $2",["2(?:0[45]|2[278]|[49]8)|3(?:[09]8|17)|6(?:[29]8|37|75)|[23][78]|(?:33|5[15]|6[68])[78]"],"0$1"],["(\\d)(\\d{3})(\\d{2,4})","$1 $2 $3",["[49]"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["80"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["24|8[13-59]|(?:2[05-79]|39|5[45]|6[15-8])2","2(?:02[014]|4|[56]20|[79]2)|392|5(?:42|525)|6(?:[16-8]21|52[013])|8[13-59]"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["2(?:1[39]|2[0157]|[378]|[56][14])|3(?:12|29)","2(?:1[39]|2[0157]|[378]|[56][14])|3(?:123|29)"],"0$1"],["(\\d{4})(\\d{6})","$1 $2",["8"],"0$1"],["(\\d{2})(\\d{3,5})","$1 $2",["1|2(?:0[0-36-9]|12|29|[56])|3(?:1[0-689]|[24-6])|5(?:[0236-9]|1[2-4])|6(?:[013-59]|7[0-46-9])|(?:33|55|6[68])[0-69]|(?:29|3[09]|62)[0-79]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["29[013-9]|39|54"],"0$1"],["(\\d{4})(\\d{3,5})","$1 $2",["(?:25|54)8","258|5483"],"0$1"]],"0",0,0,0,0,0,[["(?:1(?:(?:3\\d|9)\\d|[4-8])|2(?:(?:(?:0(?:2[014]|5)|(?:2[0157]|31|84|9)\\d\\d|[56](?:[14]\\d\\d|20)|7(?:[089]|2[03]|[35]\\d\\d))\\d|4(?:2\\d\\d|8))\\d|1(?:2|[39]\\d{4}))|3(?:(?:123|(?:29\\d|92)\\d)\\d\\d|7(?:[19]|[56]\\d))|5(?:0|1[2-478]|26|[37]2|4(?:2\\d{3}|83)|5(?:25\\d\\d|[78])|[689]\\d)|6(?:(?:[16-8]21|28|52[013])\\d\\d|[39])|8(?:[1349]28|523)\\d\\d)\\d{3}|(?:4\\d\\d|9[2-9])\\d{4,5}|(?:(?:2(?:(?:(?:0|8[146])\\d|7[1-7])\\d|2(?:[278]\\d|92)|58(?:2\\d|3))|3(?:[26]|9\\d{3})|5(?:4\\d|5)\\d\\d)\\d|6(?:(?:(?:[0-246]|[78]\\d)\\d|37)\\d|5[2-8]))\\d\\d|(?:2(?:[569]\\d|8[2-57-9])|3(?:[013-59]\\d|8[37])|6[89]8)\\d{3}"],["7(?:[1278]\\d|3[1-9])\\d{6}",[9]],["80(?:[01]\\d|20|8[0-8])\\d{3}",[7]],0,0,0,0,0,["86(?:1[12]|22|30|44|55|77|8[368])\\d{6}",[10]]]]},nonGeographic:{800:["800",0,"(?:00|[1-9]\\d)\\d{6}",[8],[["(\\d{4})(\\d{4})","$1 $2",["\\d"]]],0,0,0,0,0,0,[0,0,["(?:00|[1-9]\\d)\\d{6}"]]],808:["808",0,"[1-9]\\d{7}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[1-9]"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,0,["[1-9]\\d{7}"]]],870:["870",0,"7\\d{11}|[235-7]\\d{8}",[9,12],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[235-7]"]]],0,0,0,0,0,0,[0,["(?:[356]|774[45])\\d{8}|7[6-8]\\d{7}"],0,0,0,0,0,0,["2\\d{8}",[9]]]],878:["878",0,"10\\d{10}",[12],[["(\\d{2})(\\d{5})(\\d{5})","$1 $2 $3",["1"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,["10\\d{10}"]]],881:["881",0,"6\\d{9}|[0-36-9]\\d{8}",[9,10],[["(\\d)(\\d{3})(\\d{5})","$1 $2 $3",["[0-37-9]"]],["(\\d)(\\d{3})(\\d{5,6})","$1 $2 $3",["6"]]],0,0,0,0,0,0,[0,["6\\d{9}|[0-36-9]\\d{8}"]]],882:["882",0,"[13]\\d{6}(?:\\d{2,5})?|[19]\\d{7}|(?:[25]\\d\\d|4)\\d{7}(?:\\d{2})?",[7,8,9,10,11,12],[["(\\d{2})(\\d{5})","$1 $2",["16|342"]],["(\\d{2})(\\d{6})","$1 $2",["49"]],["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["1[36]|9"]],["(\\d{2})(\\d{4})(\\d{3})","$1 $2 $3",["3[23]"]],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["16"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["10|23|3(?:[15]|4[57])|4|51"]],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["34"]],["(\\d{2})(\\d{4,5})(\\d{5})","$1 $2 $3",["[1-35]"]]],0,0,0,0,0,0,[0,["342\\d{4}|(?:337|49)\\d{6}|(?:3(?:2|47|7\\d{3})|50\\d{3})\\d{7}",[7,8,9,10,12]],0,0,0,["348[57]\\d{7}",[11]],0,0,["1(?:3(?:0[0347]|[13][0139]|2[035]|4[013568]|6[0459]|7[06]|8[15-8]|9[0689])\\d{4}|6\\d{5,10})|(?:345\\d|9[89])\\d{6}|(?:10|2(?:3|85\\d)|3(?:[15]|[69]\\d\\d)|4[15-8]|51)\\d{8}"]]],883:["883",0,"(?:[1-4]\\d|51)\\d{6,10}",[8,9,10,11,12],[["(\\d{3})(\\d{3})(\\d{2,8})","$1 $2 $3",["[14]|2[24-689]|3[02-689]|51[24-9]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["510"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["21"]],["(\\d{4})(\\d{4})(\\d{4})","$1 $2 $3",["51[13]"]],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[235]"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,["(?:2(?:00\\d\\d|10)|(?:370[1-9]|51\\d0)\\d)\\d{7}|51(?:00\\d{5}|[24-9]0\\d{4,7})|(?:1[0-79]|2[24-689]|3[02-689]|4[0-4])0\\d{5,9}"]]],888:["888",0,"\\d{11}",[11],[["(\\d{3})(\\d{3})(\\d{5})","$1 $2 $3"]],0,0,0,0,0,0,[0,0,0,0,0,0,["\\d{11}"]]],979:["979",0,"[1359]\\d{8}",[9],[["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["[1359]"]]],0,0,0,0,0,0,[0,0,0,["[1359]\\d{8}"]]]}};function KL(n,e){var t=Array.prototype.slice.call(e);return t.push(XL),n.apply(this,t)}function Qm(n,e){n=n.split("-"),e=e.split("-");for(var t=n[0].split("."),i=e[0].split("."),r=0;r<3;r++){var s=Number(t[r]),o=Number(i[r]);if(s>o)return 1;if(o>s)return-1;if(!isNaN(s)&&isNaN(o))return 1;if(isNaN(s)&&!isNaN(o))return-1}return n[1]&&e[1]?n[1]>e[1]?1:n[1]<e[1]?-1:0:!n[1]&&e[1]?1:n[1]&&!e[1]?-1:0}var JL={}.constructor;function Pa(n){return n!=null&&n.constructor===JL}function Cf(n){"@babel/helpers - typeof";return Cf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cf(n)}function oh(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function QL(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function ah(n,e,t){return e&&QL(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}var eC="1.2.0",tC="1.7.35",e_=" ext. ",nC=/^\d+$/,kr=function(){function n(e){oh(this,n),n4(e),this.metadata=e,i4.call(this,e)}return ah(n,[{key:"getCountries",value:function(){return Object.keys(this.metadata.countries).filter(function(t){return t!=="001"})}},{key:"getCountryMetadata",value:function(t){return this.metadata.countries[t]}},{key:"nonGeographic",value:function(){if(!(this.v1||this.v2||this.v3))return this.metadata.nonGeographic||this.metadata.nonGeographical}},{key:"hasCountry",value:function(t){return this.getCountryMetadata(t)!==void 0}},{key:"hasCallingCode",value:function(t){if(this.getCountryCodesForCallingCode(t))return!0;if(this.nonGeographic()){if(this.nonGeographic()[t])return!0}else{var i=this.countryCallingCodes()[t];if(i&&i.length===1&&i[0]==="001")return!0}}},{key:"isNonGeographicCallingCode",value:function(t){return this.nonGeographic()?!!this.nonGeographic()[t]:!this.getCountryCodesForCallingCode(t)}},{key:"country",value:function(t){return this.selectNumberingPlan(t)}},{key:"selectNumberingPlan",value:function(t,i){if(t&&nC.test(t)&&(i=t,t=null),t&&t!=="001"){if(!this.hasCountry(t))throw new Error("Unknown country: ".concat(t));this.numberingPlan=new t_(this.getCountryMetadata(t),this)}else if(i){if(!this.hasCallingCode(i))throw new Error("Unknown calling code: ".concat(i));this.numberingPlan=new t_(this.getNumberingPlanMetadata(i),this)}else this.numberingPlan=void 0;return this}},{key:"getCountryCodesForCallingCode",value:function(t){var i=this.countryCallingCodes()[t];if(i)return i.length===1&&i[0].length===3?void 0:i}},{key:"getCountryCodeForCallingCode",value:function(t){var i=this.getCountryCodesForCallingCode(t);if(i)return i[0]}},{key:"getNumberingPlanMetadata",value:function(t){var i=this.getCountryCodeForCallingCode(t);if(i)return this.getCountryMetadata(i);if(this.nonGeographic()){var r=this.nonGeographic()[t];if(r)return r}else{var s=this.countryCallingCodes()[t];if(s&&s.length===1&&s[0]==="001")return this.metadata.countries["001"]}}},{key:"countryCallingCode",value:function(){return this.numberingPlan.callingCode()}},{key:"IDDPrefix",value:function(){return this.numberingPlan.IDDPrefix()}},{key:"defaultIDDPrefix",value:function(){return this.numberingPlan.defaultIDDPrefix()}},{key:"nationalNumberPattern",value:function(){return this.numberingPlan.nationalNumberPattern()}},{key:"possibleLengths",value:function(){return this.numberingPlan.possibleLengths()}},{key:"formats",value:function(){return this.numberingPlan.formats()}},{key:"nationalPrefixForParsing",value:function(){return this.numberingPlan.nationalPrefixForParsing()}},{key:"nationalPrefixTransformRule",value:function(){return this.numberingPlan.nationalPrefixTransformRule()}},{key:"leadingDigits",value:function(){return this.numberingPlan.leadingDigits()}},{key:"hasTypes",value:function(){return this.numberingPlan.hasTypes()}},{key:"type",value:function(t){return this.numberingPlan.type(t)}},{key:"ext",value:function(){return this.numberingPlan.ext()}},{key:"countryCallingCodes",value:function(){return this.v1?this.metadata.country_phone_code_to_countries:this.metadata.country_calling_codes}},{key:"chooseCountryByCountryCallingCode",value:function(t){return this.selectNumberingPlan(t)}},{key:"hasSelectedNumberingPlan",value:function(){return this.numberingPlan!==void 0}}]),n}(),t_=function(){function n(e,t){oh(this,n),this.globalMetadataObject=t,this.metadata=e,i4.call(this,t.metadata)}return ah(n,[{key:"callingCode",value:function(){return this.metadata[0]}},{key:"getDefaultCountryMetadataForRegion",value:function(){return this.globalMetadataObject.getNumberingPlanMetadata(this.callingCode())}},{key:"IDDPrefix",value:function(){if(!(this.v1||this.v2))return this.metadata[1]}},{key:"defaultIDDPrefix",value:function(){if(!(this.v1||this.v2))return this.metadata[12]}},{key:"nationalNumberPattern",value:function(){return this.v1||this.v2?this.metadata[1]:this.metadata[2]}},{key:"possibleLengths",value:function(){if(!this.v1)return this.metadata[this.v2?2:3]}},{key:"_getFormats",value:function(t){return t[this.v1?2:this.v2?3:4]}},{key:"formats",value:function(){var t=this,i=this._getFormats(this.metadata)||this._getFormats(this.getDefaultCountryMetadataForRegion())||[];return i.map(function(r){return new iC(r,t)})}},{key:"nationalPrefix",value:function(){return this.metadata[this.v1?3:this.v2?4:5]}},{key:"_getNationalPrefixFormattingRule",value:function(t){return t[this.v1?4:this.v2?5:6]}},{key:"nationalPrefixFormattingRule",value:function(){return this._getNationalPrefixFormattingRule(this.metadata)||this._getNationalPrefixFormattingRule(this.getDefaultCountryMetadataForRegion())}},{key:"_nationalPrefixForParsing",value:function(){return this.metadata[this.v1?5:this.v2?6:7]}},{key:"nationalPrefixForParsing",value:function(){return this._nationalPrefixForParsing()||this.nationalPrefix()}},{key:"nationalPrefixTransformRule",value:function(){return this.metadata[this.v1?6:this.v2?7:8]}},{key:"_getNationalPrefixIsOptionalWhenFormatting",value:function(){return!!this.metadata[this.v1?7:this.v2?8:9]}},{key:"nationalPrefixIsOptionalWhenFormattingInNationalFormat",value:function(){return this._getNationalPrefixIsOptionalWhenFormatting(this.metadata)||this._getNationalPrefixIsOptionalWhenFormatting(this.getDefaultCountryMetadataForRegion())}},{key:"leadingDigits",value:function(){return this.metadata[this.v1?8:this.v2?9:10]}},{key:"types",value:function(){return this.metadata[this.v1?9:this.v2?10:11]}},{key:"hasTypes",value:function(){return this.types()&&this.types().length===0?!1:!!this.types()}},{key:"type",value:function(t){if(this.hasTypes()&&n_(this.types(),t))return new sC(n_(this.types(),t),this)}},{key:"ext",value:function(){return this.v1||this.v2?e_:this.metadata[13]||e_}}]),n}(),iC=function(){function n(e,t){oh(this,n),this._format=e,this.metadata=t}return ah(n,[{key:"pattern",value:function(){return this._format[0]}},{key:"format",value:function(){return this._format[1]}},{key:"leadingDigitsPatterns",value:function(){return this._format[2]||[]}},{key:"nationalPrefixFormattingRule",value:function(){return this._format[3]||this.metadata.nationalPrefixFormattingRule()}},{key:"nationalPrefixIsOptionalWhenFormattingInNationalFormat",value:function(){return!!this._format[4]||this.metadata.nationalPrefixIsOptionalWhenFormattingInNationalFormat()}},{key:"nationalPrefixIsMandatoryWhenFormattingInNationalFormat",value:function(){return this.usesNationalPrefix()&&!this.nationalPrefixIsOptionalWhenFormattingInNationalFormat()}},{key:"usesNationalPrefix",value:function(){return!!(this.nationalPrefixFormattingRule()&&!rC.test(this.nationalPrefixFormattingRule()))}},{key:"internationalFormat",value:function(){return this._format[5]||this.format()}}]),n}(),rC=/^\(?\$1\)?$/,sC=function(){function n(e,t){oh(this,n),this.type=e,this.metadata=t}return ah(n,[{key:"pattern",value:function(){return this.metadata.v1?this.type:this.type[0]}},{key:"possibleLengths",value:function(){if(!this.metadata.v1)return this.type[1]||this.metadata.possibleLengths()}}]),n}();function n_(n,e){switch(e){case"FIXED_LINE":return n[0];case"MOBILE":return n[1];case"TOLL_FREE":return n[2];case"PREMIUM_RATE":return n[3];case"PERSONAL_NUMBER":return n[4];case"VOICEMAIL":return n[5];case"UAN":return n[6];case"PAGER":return n[7];case"VOIP":return n[8];case"SHARED_COST":return n[9]}}function n4(n){if(!n)throw new Error("[libphonenumber-js] `metadata` argument not passed. Check your arguments.");if(!Pa(n)||!Pa(n.countries))throw new Error("[libphonenumber-js] `metadata` argument was passed but it's not a valid metadata. Must be an object having `.countries` child object property. Got ".concat(Pa(n)?"an object of shape: { "+Object.keys(n).join(", ")+" }":"a "+oC(n)+": "+n,"."))}var oC=function(e){return Cf(e)};function f0(n,e){if(e=new kr(e),e.hasCountry(n))return e.country(n).countryCallingCode();throw new Error("Unknown country: ".concat(n))}function i4(n){var e=n.version;typeof e=="number"?(this.v1=e===1,this.v2=e===2,this.v3=e===3,this.v4=e===4):e?Qm(e,eC)===-1?this.v2=!0:Qm(e,tC)===-1?this.v3=!0:this.v4=!0:this.v1=!0}function d0(n,e){return aC(n,void 0,e)}function aC(n,e,t){var i=t.type(e),r=i&&i.possibleLengths()||t.possibleLengths();if(!r)return"IS_POSSIBLE";var s=n.length,o=r[0];return o===s?"IS_POSSIBLE":o>s?"TOO_SHORT":r[r.length-1]<s?"TOO_LONG":r.indexOf(s,1)>=0?"IS_POSSIBLE":"INVALID_LENGTH"}function lC(n,e,t){if(e===void 0&&(e={}),t=new kr(t),e.v2){if(!n.countryCallingCode)throw new Error("Invalid phone number object passed");t.selectNumberingPlan(n.countryCallingCode)}else{if(!n.phone)return!1;if(n.country){if(!t.hasCountry(n.country))throw new Error("Unknown country: ".concat(n.country));t.country(n.country)}else{if(!n.countryCallingCode)throw new Error("Invalid phone number object passed");t.selectNumberingPlan(n.countryCallingCode)}}if(t.possibleLengths())return r4(n.phone||n.nationalNumber,t);if(n.countryCallingCode&&t.isNonGeographicCallingCode(n.countryCallingCode))return!0;throw new Error('Missing "possibleLengths" in metadata. Perhaps the metadata has been generated before v1.0.18.')}function r4(n,e){switch(d0(n,e)){case"IS_POSSIBLE":return!0;default:return!1}}function oo(n,e){return n=n||"",new RegExp("^(?:"+e+")$").test(n)}function uC(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t)return(t=t.call(n)).next.bind(t);if(Array.isArray(n)||(t=cC(n))||e){t&&(n=t);var i=0;return function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cC(n,e){if(n){if(typeof n=="string")return i_(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return i_(n,e)}}function i_(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}var hC=["MOBILE","PREMIUM_RATE","TOLL_FREE","SHARED_COST","VOIP","PERSONAL_NUMBER","PAGER","UAN","VOICEMAIL"];function g0(n,e,t){if(e=e||{},!(!n.country&&!n.countryCallingCode)){t=new kr(t),t.selectNumberingPlan(n.country,n.countryCallingCode);var i=e.v2?n.nationalNumber:n.phone;if(oo(i,t.nationalNumberPattern())){if(Hh(i,"FIXED_LINE",t))return t.type("MOBILE")&&t.type("MOBILE").pattern()===""||!t.type("MOBILE")||Hh(i,"MOBILE",t)?"FIXED_LINE_OR_MOBILE":"FIXED_LINE";for(var r=uC(hC),s;!(s=r()).done;){var o=s.value;if(Hh(i,o,t))return o}}}}function Hh(n,e,t){return e=t.type(e),!e||!e.pattern()||e.possibleLengths()&&e.possibleLengths().indexOf(n.length)<0?!1:oo(n,e.pattern())}function fC(n,e,t){if(e=e||{},t=new kr(t),t.selectNumberingPlan(n.country,n.countryCallingCode),t.hasTypes())return g0(n,e,t.metadata)!==void 0;var i=e.v2?n.nationalNumber:n.phone;return oo(i,t.nationalNumberPattern())}function dC(n,e,t){var i=new kr(t),r=i.getCountryCodesForCallingCode(n);return r?r.filter(function(s){return gC(e,s,t)}):[]}function gC(n,e,t){var i=new kr(t);return i.selectNumberingPlan(e),i.numberingPlan.possibleLengths().indexOf(n.length)>=0}var m0=2,mC=17,_C=3,bs="0-9---",pC="--",vC="/",yC=".",bC=" ",wC="()\\[\\]",kC="~",Uc="".concat(pC).concat(vC).concat(yC).concat(bC).concat(wC).concat(kC),_0="+",EC=new RegExp("(["+bs+"])");function SC(n,e,t,i){if(e){var r=new kr(i);r.selectNumberingPlan(e,t);var s=new RegExp(r.IDDPrefix());if(n.search(s)===0){n=n.slice(n.match(s)[0].length);var o=n.match(EC);if(!(o&&o[1]!=null&&o[1].length>0&&o[1]==="0"))return n}}}function IC(n,e){if(n&&e.numberingPlan.nationalPrefixForParsing()){var t=new RegExp("^(?:"+e.numberingPlan.nationalPrefixForParsing()+")"),i=t.exec(n);if(i){var r,s,o=i.length-1,a=o>0&&i[o];if(e.nationalPrefixTransformRule()&&a)r=n.replace(t,e.nationalPrefixTransformRule()),o>1&&(s=i[1]);else{var l=i[0];r=n.slice(l.length),a&&(s=i[1])}var h;if(a){var d=n.indexOf(i[1]),m=n.slice(0,d);m===e.numberingPlan.nationalPrefix()&&(h=e.numberingPlan.nationalPrefix())}else h=i[0];return{nationalNumber:r,nationalPrefix:h,carrierCode:s}}}return{nationalNumber:n}}function Pf(n,e){var t=IC(n,e),i=t.carrierCode,r=t.nationalNumber;if(r!==n){if(!MC(n,r,e))return{nationalNumber:n};if(e.possibleLengths()&&!TC(r,e))return{nationalNumber:n}}return{nationalNumber:r,carrierCode:i}}function MC(n,e,t){return!(oo(n,t.nationalNumberPattern())&&!oo(e,t.nationalNumberPattern()))}function TC(n,e){switch(d0(n,e)){case"TOO_SHORT":case"INVALID_LENGTH":return!1;default:return!0}}function LC(n,e,t,i){var r=e?f0(e,i):t;if(n.indexOf(r)===0){i=new kr(i),i.selectNumberingPlan(e,t);var s=n.slice(r.length),o=Pf(s,i),a=o.nationalNumber,l=Pf(n,i),h=l.nationalNumber;if(!oo(h,i.nationalNumberPattern())&&oo(a,i.nationalNumberPattern())||d0(h,i)==="TOO_LONG")return{countryCallingCode:r,number:s}}return{number:n}}function s4(n,e,t,i){if(!n)return{};var r;if(n[0]!=="+"){var s=SC(n,e,t,i);if(s&&s!==n)r=!0,n="+"+s;else{if(e||t){var o=LC(n,e,t,i),a=o.countryCallingCode,l=o.number;if(a)return{countryCallingCodeSource:"FROM_NUMBER_WITHOUT_PLUS_SIGN",countryCallingCode:a,number:l}}return{number:n}}}if(n[1]==="0")return{};i=new kr(i);for(var h=2;h-1<=_C&&h<=n.length;){var d=n.slice(1,h);if(i.hasCallingCode(d))return i.selectNumberingPlan(d),{countryCallingCodeSource:r?"FROM_NUMBER_WITH_IDD":"FROM_NUMBER_WITH_PLUS_SIGN",countryCallingCode:d,number:n.slice(h)};h++}return{}}function CC(n){return n.replace(new RegExp("[".concat(Uc,"]+"),"g")," ").trim()}var PC=/(\$\d)/;function NC(n,e,t){var i=t.useInternationalFormat,r=t.withNationalPrefix,s=n.replace(new RegExp(e.pattern()),i?e.internationalFormat():r&&e.nationalPrefixFormattingRule()?e.format().replace(PC,e.nationalPrefixFormattingRule()):e.format());return i?CC(s):s}var DC=/^[\d]+(?:[~\u2053\u223C\uFF5E][\d]+)?$/;function AC(n,e,t){var i=new kr(t);if(i.selectNumberingPlan(n,e),i.defaultIDDPrefix())return i.defaultIDDPrefix();if(DC.test(i.IDDPrefix()))return i.IDDPrefix()}var RC=";ext=",fa=function(e){return"([".concat(bs,"]{1,").concat(e,"})")};function o4(n){var e="20",t="15",i="9",r="6",s="[ \\t,]*",o="[:\\.]?[ \\t,-]*",a="#?",l="(?:e?xt(?:ensi(?:o?|))?n?|??||anexo)",h="(?:[x#~]|int|)",d="[- ]+",m="[ \\t]*",v="(?:,{2}|;)",k=RC+fa(e),w=s+l+o+fa(e)+a,E=s+h+o+fa(i)+a,I=d+fa(r)+"#",M=m+v+o+fa(t)+a,C=m+"(?:,)+"+o+fa(i)+a;return k+"|"+w+"|"+E+"|"+I+"|"+M+"|"+C}var OC="["+bs+"]{"+m0+"}",xC="["+_0+"]{0,1}(?:["+Uc+"]*["+bs+"]){3,}["+Uc+bs+"]*",FC=new RegExp("^["+_0+"]{0,1}(?:["+Uc+"]*["+bs+"]){1,2}$","i"),BC=xC+"(?:"+o4()+")?",$C=new RegExp("^"+OC+"$|^"+BC+"$","i");function VC(n){return n.length>=m0&&$C.test(n)}function zC(n){return FC.test(n)}function GC(n){var e=n.number,t=n.ext;if(!e)return"";if(e[0]!=="+")throw new Error('"formatRFC3966()" expects "number" to be in E.164 format.');return"tel:".concat(e).concat(t?";ext="+t:"")}function HC(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t)return(t=t.call(n)).next.bind(t);if(Array.isArray(n)||(t=UC(n))||e){t&&(n=t);var i=0;return function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function UC(n,e){if(n){if(typeof n=="string")return r_(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return r_(n,e)}}function r_(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function s_(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function o_(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?s_(Object(t),!0).forEach(function(i){qC(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):s_(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function qC(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var a_={formatExtension:function(e,t,i){return"".concat(e).concat(i.ext()).concat(t)}};function ZC(n,e,t,i){if(t?t=o_(o_({},a_),t):t=a_,i=new kr(i),n.country&&n.country!=="001"){if(!i.hasCountry(n.country))throw new Error("Unknown country: ".concat(n.country));i.country(n.country)}else if(n.countryCallingCode)i.selectNumberingPlan(n.countryCallingCode);else return n.phone||"";var r=i.countryCallingCode(),s=t.v2?n.nationalNumber:n.phone,o;switch(e){case"NATIONAL":return s?(o=qc(s,n.carrierCode,"NATIONAL",i,t),Uh(o,n.ext,i,t.formatExtension)):"";case"INTERNATIONAL":return s?(o=qc(s,null,"INTERNATIONAL",i,t),o="+".concat(r," ").concat(o),Uh(o,n.ext,i,t.formatExtension)):"+".concat(r);case"E.164":return"+".concat(r).concat(s);case"RFC3966":return GC({number:"+".concat(r).concat(s),ext:n.ext});case"IDD":if(!t.fromCountry)return;var a=jC(s,n.carrierCode,r,t.fromCountry,i);return Uh(a,n.ext,i,t.formatExtension);default:throw new Error('Unknown "format" argument passed to "formatNumber()": "'.concat(e,'"'))}}function qc(n,e,t,i,r){var s=YC(i.formats(),n);return s?NC(n,s,{useInternationalFormat:t==="INTERNATIONAL",withNationalPrefix:!(s.nationalPrefixIsOptionalWhenFormattingInNationalFormat()&&r&&r.nationalPrefix===!1),carrierCode:e,metadata:i}):n}function YC(n,e){for(var t=HC(n),i;!(i=t()).done;){var r=i.value;if(r.leadingDigitsPatterns().length>0){var s=r.leadingDigitsPatterns()[r.leadingDigitsPatterns().length-1];if(e.search(s)!==0)continue}if(oo(e,r.pattern()))return r}}function Uh(n,e,t,i){return e?i(n,e,t):n}function jC(n,e,t,i,r){var s=f0(i,r.metadata);if(s===t){var o=qc(n,e,"NATIONAL",r);return t==="1"?t+" "+o:o}var a=AC(i,void 0,r.metadata);if(a)return"".concat(a," ").concat(t," ").concat(qc(n,null,"INTERNATIONAL",r))}function l_(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function u_(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?l_(Object(t),!0).forEach(function(i){WC(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):l_(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function WC(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function XC(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function KC(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function JC(n,e,t){return e&&KC(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}var QC=function(){function n(e,t,i){if(XC(this,n),!e)throw new TypeError("First argument is required");if(typeof e!="string")throw new TypeError("First argument must be a string");if(e[0]==="+"&&!t)throw new TypeError("`metadata` argument not passed");if(Pa(t)&&Pa(t.countries)){i=t;var r=e;if(!nP.test(r))throw new Error('Invalid `number` argument passed: must consist of a "+" followed by digits');var s=s4(r,void 0,void 0,i),o=s.countryCallingCode,a=s.number;if(t=a,e=o,!t)throw new Error("Invalid `number` argument passed: too short")}if(!t)throw new TypeError("`nationalNumber` argument is required");if(typeof t!="string")throw new TypeError("`nationalNumber` argument must be a string");n4(i);var l=tP(e,i),h=l.country,d=l.countryCallingCode;this.country=h,this.countryCallingCode=d,this.nationalNumber=t,this.number="+"+this.countryCallingCode+this.nationalNumber,this.getMetadata=function(){return i}}return JC(n,[{key:"setExt",value:function(t){this.ext=t}},{key:"getPossibleCountries",value:function(){return this.country?[this.country]:dC(this.countryCallingCode,this.nationalNumber,this.getMetadata())}},{key:"isPossible",value:function(){return lC(this,{v2:!0},this.getMetadata())}},{key:"isValid",value:function(){return fC(this,{v2:!0},this.getMetadata())}},{key:"isNonGeographic",value:function(){var t=new kr(this.getMetadata());return t.isNonGeographicCallingCode(this.countryCallingCode)}},{key:"isEqual",value:function(t){return this.number===t.number&&this.ext===t.ext}},{key:"getType",value:function(){return g0(this,{v2:!0},this.getMetadata())}},{key:"format",value:function(t,i){return ZC(this,t,i?u_(u_({},i),{},{v2:!0}):{v2:!0},this.getMetadata())}},{key:"formatNational",value:function(t){return this.format("NATIONAL",t)}},{key:"formatInternational",value:function(t){return this.format("INTERNATIONAL",t)}},{key:"getURI",value:function(t){return this.format("RFC3966",t)}}]),n}(),eP=function(e){return/^[A-Z]{2}$/.test(e)};function tP(n,e){var t,i,r=new kr(e);return eP(n)?(t=n,r.selectNumberingPlan(t),i=r.countryCallingCode()):i=n,{country:t,countryCallingCode:i}}var nP=/^\+\d+$/;function Nf(n){"@babel/helpers - typeof";return Nf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nf(n)}function iP(n,e,t){return Object.defineProperty(n,"prototype",{writable:!1}),n}function rP(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function sP(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&Xl(n,e)}function oP(n){var e=l4();return function(){var i=Kl(n),r;if(e){var s=Kl(this).constructor;r=Reflect.construct(i,arguments,s)}else r=i.apply(this,arguments);return aP(this,r)}}function aP(n,e){if(e&&(Nf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return a4(n)}function a4(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Df(n){var e=typeof Map=="function"?new Map:void 0;return Df=function(i){if(i===null||!lP(i))return i;if(typeof i!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(i))return e.get(i);e.set(i,r)}function r(){return vc(i,arguments,Kl(this).constructor)}return r.prototype=Object.create(i.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Xl(r,i)},Df(n)}function vc(n,e,t){return l4()?vc=Reflect.construct:vc=function(r,s,o){var a=[null];a.push.apply(a,s);var l=Function.bind.apply(r,a),h=new l;return o&&Xl(h,o.prototype),h},vc.apply(null,arguments)}function l4(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function lP(n){return Function.toString.call(n).indexOf("[native code]")!==-1}function Xl(n,e){return Xl=Object.setPrototypeOf||function(i,r){return i.__proto__=r,i},Xl(n,e)}function Kl(n){return Kl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Kl(n)}var yo=function(n){sP(t,n);var e=oP(t);function t(i){var r;return rP(this,t),r=e.call(this,i),Object.setPrototypeOf(a4(r),t.prototype),r.name=r.constructor.name,r}return iP(t)}(Df(Error)),c_=new RegExp("(?:"+o4()+")$","i");function uP(n){var e=n.search(c_);if(e<0)return{};for(var t=n.slice(0,e),i=n.match(c_),r=1;r<i.length;){if(i[r])return{number:t,ext:i[r]};r++}}var cP={0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9"};function hP(n){return cP[n]}function fP(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t)return(t=t.call(n)).next.bind(t);if(Array.isArray(n)||(t=dP(n))||e){t&&(n=t);var i=0;return function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dP(n,e){if(n){if(typeof n=="string")return h_(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return h_(n,e)}}function h_(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function f_(n){for(var e="",t=fP(n.split("")),i;!(i=t()).done;){var r=i.value;e+=gP(r,e)||""}return e}function gP(n,e,t){return n==="+"?e?void 0:"+":hP(n)}function mP(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t)return(t=t.call(n)).next.bind(t);if(Array.isArray(n)||(t=_P(n))||e){t&&(n=t);var i=0;return function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _P(n,e){if(n){if(typeof n=="string")return d_(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return d_(n,e)}}function d_(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function pP(n,e){var t=e.countries,i=e.metadata;i=new kr(i);for(var r=mP(t),s;!(s=r()).done;){var o=s.value;if(i.country(o),i.leadingDigits()){if(n&&n.search(i.leadingDigits())===0)return o}else if(g0({phone:n,country:o},void 0,i.metadata))return o}}function vP(n,e){var t=e.nationalNumber,i=e.defaultCountry,r=e.metadata,s=r.getCountryCodesForCallingCode(n);if(s)return s.length===1?s[0]:pP(t,{countries:s,defaultCountry:i,metadata:r.metadata})}var u4="+",yP="[\\-\\.\\(\\)]?",g_="(["+bs+"]|"+yP+")",bP="^\\"+u4+g_+"*["+bs+"]"+g_+"*$",wP=new RegExp(bP,"g"),Af=bs,kP="["+Af+"]+((\\-)*["+Af+"])*",EP="a-zA-Z",SP="["+EP+"]+((\\-)*["+Af+"])*",IP="^("+kP+"\\.)*"+SP+"\\.?$",MP=new RegExp(IP,"g"),m_="tel:",Rf=";phone-context=",TP=";isub=";function LP(n){var e=n.indexOf(Rf);if(e<0)return null;var t=e+Rf.length;if(t>=n.length)return"";var i=n.indexOf(";",t);return i>=0?n.substring(t,i):n.substring(t)}function CP(n){return n===null?!0:n.length===0?!1:wP.test(n)||MP.test(n)}function PP(n,e){var t=e.extractFormattedPhoneNumber,i=LP(n);if(!CP(i))throw new yo("NOT_A_NUMBER");var r;if(i===null)r=t(n)||"";else{r="",i.charAt(0)===u4&&(r+=i);var s=n.indexOf(m_),o;s>=0?o=s+m_.length:o=0;var a=n.indexOf(Rf);r+=n.substring(o,a)}var l=r.indexOf(TP);if(l>0&&(r=r.substring(0,l)),r!=="")return r}var NP=250,DP=new RegExp("["+_0+bs+"]"),AP=new RegExp("[^"+bs+"#]+$");function RP(n,e,t){if(e=e||{},t=new kr(t),e.defaultCountry&&!t.hasCountry(e.defaultCountry))throw e.v2?new yo("INVALID_COUNTRY"):new Error("Unknown country: ".concat(e.defaultCountry));var i=xP(n,e.v2,e.extract),r=i.number,s=i.ext,o=i.error;if(!r){if(e.v2)throw o==="TOO_SHORT"?new yo("TOO_SHORT"):new yo("NOT_A_NUMBER");return{}}var a=BP(r,e.defaultCountry,e.defaultCallingCode,t),l=a.country,h=a.nationalNumber,d=a.countryCallingCode,m=a.countryCallingCodeSource,v=a.carrierCode;if(!t.hasSelectedNumberingPlan()){if(e.v2)throw new yo("INVALID_COUNTRY");return{}}if(!h||h.length<m0){if(e.v2)throw new yo("TOO_SHORT");return{}}if(h.length>mC){if(e.v2)throw new yo("TOO_LONG");return{}}if(e.v2){var k=new QC(d,h,t.metadata);return l&&(k.country=l),v&&(k.carrierCode=v),s&&(k.ext=s),k.__countryCallingCodeSource=m,k}var w=(e.extended?t.hasSelectedNumberingPlan():l)?oo(h,t.nationalNumberPattern()):!1;return e.extended?{country:l,countryCallingCode:d,carrierCode:v,valid:w,possible:w?!0:!!(e.extended===!0&&t.possibleLengths()&&r4(h,t)),phone:h,ext:s}:w?FP(l,h,s):{}}function OP(n,e,t){if(n){if(n.length>NP){if(t)throw new yo("TOO_LONG");return}if(e===!1)return n;var i=n.search(DP);if(!(i<0))return n.slice(i).replace(AP,"")}}function xP(n,e,t){var i=PP(n,{extractFormattedPhoneNumber:function(o){return OP(o,t,e)}});if(!i)return{};if(!VC(i))return zC(i)?{error:"TOO_SHORT"}:{};var r=uP(i);return r.ext?r:{number:i}}function FP(n,e,t){var i={country:n,phone:e};return t&&(i.ext=t),i}function BP(n,e,t,i){var r=s4(f_(n),e,t,i.metadata),s=r.countryCallingCodeSource,o=r.countryCallingCode,a=r.number,l;if(o)i.selectNumberingPlan(o);else if(a&&(e||t))i.selectNumberingPlan(e,t),e&&(l=e),o=t||f0(e,i.metadata);else return{};if(!a)return{countryCallingCodeSource:s,countryCallingCode:o};var h=Pf(f_(a),i),d=h.nationalNumber,m=h.carrierCode,v=vP(o,{nationalNumber:d,defaultCountry:e,metadata:i});return v&&(l=v,v==="001"||i.country(l)),{country:l,countryCallingCode:o,countryCallingCodeSource:s,nationalNumber:d,carrierCode:m}}function __(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function p_(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?__(Object(t),!0).forEach(function(i){$P(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):__(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function $P(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function VP(n,e,t){return RP(n,p_(p_({},e),{},{v2:!0}),t)}function v_(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function zP(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?v_(Object(t),!0).forEach(function(i){GP(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):v_(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function GP(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function HP(n,e){return YP(n)||ZP(n,e)||qP(n,e)||UP()}function UP(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qP(n,e){if(n){if(typeof n=="string")return y_(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return y_(n,e)}}function y_(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function ZP(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i=[],r=!0,s=!1,o,a;try{for(t=t.call(n);!(r=(o=t.next()).done)&&(i.push(o.value),!(e&&i.length===e));r=!0);}catch(l){s=!0,a=l}finally{try{!r&&t.return!=null&&t.return()}finally{if(s)throw a}}return i}}function YP(n){if(Array.isArray(n))return n}function jP(n){var e=Array.prototype.slice.call(n),t=HP(e,4),i=t[0],r=t[1],s=t[2],o=t[3],a,l,h;if(typeof i=="string")a=i;else throw new TypeError("A text for parsing must be a string.");if(!r||typeof r=="string")o?(l=s,h=o):(l=void 0,h=s),r&&(l=zP({defaultCountry:r},l));else if(Pa(r))s?(l=r,h=s):h=r;else throw new Error("Invalid second argument: ".concat(r));return{text:a,options:l,metadata:h}}function WP(){var n=jP(arguments),e=n.text,t=n.options,i=n.metadata;return VP(e,t,i)}function b_(){return KL(WP,arguments)}function w_(n,e,t){const i=n.slice();return i[41]=e[t],i[43]=t,i}function k_(n,e,t){const i=n.slice();return i[44]=e[t],i}function E_(n){var D,O;let e,t,i=n[12]("createGeofence.smsNotification")+"",r,s,o,a=n[12]("createGeofence.smsTemplate")+"",l,h,d,m=(D=n[14])==null?void 0:D.hasPermission(302),v,k=(O=n[14])==null?void 0:O.hasPermission(303),w,E,I=n[16]&&S_(n),M=m&&M_(n),C=k&&L_(n);return{c(){e=A("div"),t=A("p"),r=he(i),s=ee(),o=A("p"),l=he(a),h=ee(),I&&I.c(),d=ee(),M&&M.c(),v=ee(),C&&C.c(),w=dt(),this.h()},l(P){e=R(P,"DIV",{class:!0});var F=T(e);t=R(F,"P",{style:!0});var V=T(t);r=fe(V,i),V.forEach(_),s=te(F),o=R(F,"P",{style:!0});var $=T(o);l=fe($,a),$.forEach(_),F.forEach(_),h=te(P),I&&I.l(P),d=te(P),M&&M.l(P),v=te(P),C&&C.l(P),w=dt(),this.h()},h(){B(t,"font-size","18px"),B(o,"font-size","14px"),B(o,"color","#888"),g(e,"class","column g4")},m(P,F){Z(P,e,F),p(e,t),p(t,r),p(e,s),p(e,o),p(o,l),Z(P,h,F),I&&I.m(P,F),Z(P,d,F),M&&M.m(P,F),Z(P,v,F),C&&C.m(P,F),Z(P,w,F),E=!0},p(P,F){var V,$;(!E||F[0]&4096)&&i!==(i=P[12]("createGeofence.smsNotification")+"")&&Ee(r,i),(!E||F[0]&4096)&&a!==(a=P[12]("createGeofence.smsTemplate")+"")&&Ee(l,a),P[16]?I?I.p(P,F):(I=S_(P),I.c(),I.m(d.parentNode,d)):I&&(I.d(1),I=null),F[0]&16384&&(m=(V=P[14])==null?void 0:V.hasPermission(302)),m?M?M.p(P,F):(M=M_(P),M.c(),M.m(v.parentNode,v)):M&&(M.d(1),M=null),F[0]&16384&&(k=($=P[14])==null?void 0:$.hasPermission(303)),k?C?(C.p(P,F),F[0]&16384&&de(C,1)):(C=L_(P),C.c(),de(C,1),C.m(w.parentNode,w)):C&&(bt(),Ie(C,1,1,()=>{C=null}),wt())},i(P){E||(de(C),E=!0)},o(P){Ie(C),E=!1},d(P){P&&(_(e),_(h),_(d),_(v),_(w)),I&&I.d(P),M&&M.d(P),C&&C.d(P)}}}function S_(n){let e,t=n[9],i=I_(n);return{c(){e=A("div"),i.c(),this.h()},l(r){e=R(r,"DIV",{class:!0});var s=T(e);i.l(s),s.forEach(_),this.h()},h(){g(e,"class","sms-box svelte-1ayjfis")},m(r,s){Z(r,e,s),i.m(e,null)},p(r,s){s[0]&512&&zt(t,t=r[9])?(bt(),Ie(i,1,1,$e),wt(),i=I_(r),i.c(),de(i,1),i.m(e,null)):i.p(r,s)},d(r){r&&_(e),i.d(r)}}}function I_(n){let e,t=zm(n[16],n[10])+"",i,r;return{c(){e=A("p"),i=he(t),this.h()},l(s){e=R(s,"P",{class:!0});var o=T(e);i=fe(o,t),o.forEach(_),this.h()},h(){g(e,"class","svelte-1ayjfis")},m(s,o){Z(s,e,o),p(e,i)},p(s,o){n=s,o[0]&66560&&t!==(t=zm(n[16],n[10])+"")&&Ee(i,t)},i(s){s&&(r||Wc(()=>{r=R4(e,tN,{duration:300,easing:vI,direction:n[17]}),r.start()}))},o:$e,d(s){s&&_(e)}}}function M_(n){let e,t=Bt(n[18]),i=[];for(let r=0;r<t.length;r+=1)i[r]=T_(k_(n,t,r));return{c(){e=A("div");for(let r=0;r<i.length;r+=1)i[r].c();this.h()},l(r){e=R(r,"DIV",{class:!0});var s=T(e);for(let o=0;o<i.length;o+=1)i[o].l(s);s.forEach(_),this.h()},h(){g(e,"class","row g8")},m(r,s){Z(r,e,s);for(let o=0;o<i.length;o+=1)i[o]&&i[o].m(e,null)},p(r,s){if(s[0]&2363904){t=Bt(r[18]);let o;for(o=0;o<t.length;o+=1){const a=k_(r,t,o);i[o]?i[o].p(a,s):(i[o]=T_(a),i[o].c(),i[o].m(e,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=t.length}},d(r){r&&_(e),ui(i,r)}}}function XP(n){let e=n[44]+"",t;return{c(){t=he(e)},l(i){t=fe(i,e)},m(i,r){Z(i,t,r)},p(i,r){r[0]&262144&&e!==(e=i[44]+"")&&Ee(t,e)},d(i){i&&_(t)}}}function KP(n){let e=n[12]("createGeofence.templateEng")+"",t;return{c(){t=he(e)},l(i){t=fe(i,e)},m(i,r){Z(i,t,r)},p(i,r){r[0]&4096&&e!==(e=i[12]("createGeofence.templateEng")+"")&&Ee(t,e)},d(i){i&&_(t)}}}function JP(n){let e=n[12]("createGeofence.templateEst")+"",t;return{c(){t=he(e)},l(i){t=fe(i,e)},m(i,r){Z(i,t,r)},p(i,r){r[0]&4096&&e!==(e=i[12]("createGeofence.templateEst")+"")&&Ee(t,e)},d(i){i&&_(t)}}}function T_(n){let e,t,i,r,s,o,a;function l(v,k){return k[0]&262144&&(t=null),k[0]&262144&&(i=null),t==null&&(t=v[44].toLowerCase()==="et"),t?JP:(i==null&&(i=v[44].toLowerCase()==="en"),i?KP:XP)}let h=l(n,[-1,-1]),d=h(n);function m(){return n[35](n[44])}return{c(){e=A("button"),d.c(),r=ee(),this.h()},l(v){e=R(v,"BUTTON",{class:!0,style:!0});var k=T(e);d.l(k),r=te(k),k.forEach(_),this.h()},h(){g(e,"class",s=n[9]===n[44]?"":"outline"),B(e,"font-size","14px")},m(v,k){Z(v,e,k),d.m(e,null),p(e,r),o||(a=nt(e,"click",m),o=!0)},p(v,k){n=v,h===(h=l(n,k))&&d?d.p(n,k):(d.d(1),d=h(n),d&&(d.c(),d.m(e,r))),k[0]&262656&&s!==(s=n[9]===n[44]?"":"outline")&&g(e,"class",s)},d(v){v&&_(e),d.d(),o=!1,a()}}}function L_(n){var k;let e,t=n[12]("createGeofence.smsRecipients")+"",i,r,s,o,a=(k=n[14])==null?void 0:k.hasPermission(302),l,h=Bt(n[8]),d=[];for(let w=0;w<h.length;w+=1)d[w]=P_(w_(n,h,w));const m=w=>Ie(d[w],1,1,()=>{d[w]=null});let v=a&&N_(n);return{c(){e=A("p"),i=he(t),r=ee(),s=A("div");for(let w=0;w<d.length;w+=1)d[w].c();o=ee(),v&&v.c(),this.h()},l(w){e=R(w,"P",{style:!0});var E=T(e);i=fe(E,t),E.forEach(_),r=te(w),s=R(w,"DIV",{class:!0});var I=T(s);for(let M=0;M<d.length;M+=1)d[M].l(I);o=te(I),v&&v.l(I),I.forEach(_),this.h()},h(){B(e,"font-size","14px"),B(e,"color","#888"),g(s,"class","column g8")},m(w,E){Z(w,e,E),p(e,i),Z(w,r,E),Z(w,s,E);for(let I=0;I<d.length;I+=1)d[I]&&d[I].m(s,null);p(s,o),v&&v.m(s,null),l=!0},p(w,E){var I;if((!l||E[0]&4096)&&t!==(t=w[12]("createGeofence.smsRecipients")+"")&&Ee(i,t),E[0]&369115392){h=Bt(w[8]);let M;for(M=0;M<h.length;M+=1){const C=w_(w,h,M);d[M]?(d[M].p(C,E),de(d[M],1)):(d[M]=P_(C),d[M].c(),de(d[M],1),d[M].m(s,o))}for(bt(),M=h.length;M<d.length;M+=1)m(M);wt()}E[0]&16384&&(a=(I=w[14])==null?void 0:I.hasPermission(302)),a?v?v.p(w,E):(v=N_(w),v.c(),v.m(s,null)):v&&(v.d(1),v=null)},i(w){if(!l){for(let E=0;E<h.length;E+=1)de(d[E]);l=!0}},o(w){d=d.filter(Boolean);for(let E=0;E<d.length;E+=1)Ie(d[E]);l=!1},d(w){w&&(_(e),_(r),_(s)),ui(d,w),v&&v.d()}}}function C_(n){let e,t;function i(){return n[39](n[43])}return e=new fn({props:{onclick:i,class:"delete row center-cross center",styleInner:"height: 100%;",$$slots:{default:[QP]},$$scope:{ctx:n}}}),{c(){st(e.$$.fragment)},l(r){ot(e.$$.fragment,r)},m(r,s){at(e,r,s),t=!0},p(r,s){n=r;const o={};s[1]&65536&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(r){t||(de(e.$$.fragment,r),t=!0)},o(r){Ie(e.$$.fragment,r),t=!1},d(r){lt(e,r)}}}function QP(n){let e,t;return{c(){e=Re("svg"),t=Re("path"),this.h()},l(i){e=Oe(i,"svg",{style:!0,xmlns:!0,x:!0,y:!0,width:!0,height:!0,viewBox:!0,class:!0});var r=T(e);t=Oe(r,"path",{d:!0,class:!0}),T(t).forEach(_),r.forEach(_),this.h()},h(){g(t,"d","M 15.125 12.28125 L 12.28125 15.125 L 22.21875 25 L 12.28125 34.875 L 15.125 37.71875 L 25.0625 27.84375 L 35 37.71875 L 37.8125 34.875 L 27.90625 25 L 37.8125 15.125 L 35 12.28125 L 25.0625 22.15625 Z"),g(t,"class","svelte-1ayjfis"),B(e,"margin-inline","7px"),B(e,"margin-block","auto"),B(e,"width","18px"),B(e,"height","18px"),B(e,"fill","#d88"),g(e,"xmlns","http://www.w3.org/2000/svg"),g(e,"x","0px"),g(e,"y","0px"),g(e,"width","100"),g(e,"height","100"),g(e,"viewBox","0 0 50 50"),g(e,"class","svelte-1ayjfis")},m(i,r){Z(i,e,r),p(e,t)},p:$e,d(i){i&&_(e)}}}function P_(n){var F;let e,t,i,r=n[43]+1+"",s,o,a,l="+372",h,d,m,v,k,w=((F=n[14])==null?void 0:F.hasPermission(302))&&n[43]>0,E,I,M;function C(...V){return n[36](n[43],...V)}function D(...V){return n[37](n[43],...V)}function O(...V){return n[38](n[43],...V)}let P=w&&C_(n);return{c(){e=A("div"),t=A("div"),i=A("p"),s=he(r),o=ee(),a=A("p"),a.textContent=l,h=ee(),d=A("input"),k=ee(),P&&P.c(),this.h()},l(V){e=R(V,"DIV",{class:!0});var $=T(e);t=R($,"DIV",{class:!0});var G=T(t);i=R(G,"P",{style:!0,class:!0});var U=T(i);s=fe(U,r),U.forEach(_),o=te(G),a=R(G,"P",{style:!0,class:!0,"data-svelte-h":!0}),rn(a)!=="svelte-136jwh5"&&(a.textContent=l),h=te(G),d=R(G,"INPUT",{style:!0,class:!0,type:!0,placeholder:!0}),k=te(G),P&&P.l(G),G.forEach(_),$.forEach(_),this.h()},h(){var V;B(i,"color","#aaa"),B(i,"padding","6px 8px 4px 6px"),B(i,"width","32px"),B(i,"text-align","right"),B(i,"font-size","14px"),g(i,"class","svelte-1ayjfis"),B(a,"color","#222"),B(a,"text-align","right"),B(a,"padding","5px 8px 5px 16px"),g(a,"class","svelte-1ayjfis"),B(d,"padding-left","8px"),B(d,"width","0"),B(d,"font-family","monospace"),B(d,"font-size","16px"),g(d,"class","grow svelte-1ayjfis"),g(d,"type","text"),d.value=m=n[41],g(d,"placeholder","5555 5555"),d.disabled=v=!((V=n[14])!=null&&V.hasPermission(302)),g(t,"class","input-container row grow svelte-1ayjfis"),g(e,"class","row center-cross g8 width100")},m(V,$){Z(V,e,$),p(e,t),p(t,i),p(i,s),p(t,o),p(t,a),p(t,h),p(t,d),p(t,k),P&&P.m(t,null),E=!0,I||(M=[nt(d,"input",C),nt(d,"keydown",D),nt(d,"blur",O),nt(d,"focus",nN)],I=!0)},p(V,$){var G,U;n=V,(!E||$[0]&256&&m!==(m=n[41])&&d.value!==m)&&(d.value=m),(!E||$[0]&16384&&v!==(v=!((G=n[14])!=null&&G.hasPermission(302))))&&(d.disabled=v),$[0]&16384&&(w=((U=n[14])==null?void 0:U.hasPermission(302))&&n[43]>0),w?P?(P.p(n,$),$[0]&16384&&de(P,1)):(P=C_(n),P.c(),de(P,1),P.m(t,null)):P&&(bt(),Ie(P,1,1,()=>{P=null}),wt())},i(V){E||(de(P),E=!0)},o(V){Ie(P),E=!1},d(V){V&&_(e),P&&P.d(),I=!1,Bn(M)}}}function N_(n){let e,t,i="+",r,s,o,a,l=n[19]&&!n[11]&&D_(n);return{c(){e=A("div"),t=A("button"),t.textContent=i,r=ee(),l&&l.c(),s=dt(),this.h()},l(h){e=R(h,"DIV",{class:!0,style:!0});var d=T(e);t=R(d,"BUTTON",{style:!0,"data-svelte-h":!0}),rn(t)!=="svelte-1t4e1x9"&&(t.textContent=i),d.forEach(_),r=te(h),l&&l.l(h),s=dt(),this.h()},h(){B(t,"width","32px"),B(t,"height","32px"),B(t,"padding","0"),g(e,"class","row"),B(e,"justify-content","end"),B(e,"padding","0px")},m(h,d){Z(h,e,d),p(e,t),Z(h,r,d),l&&l.m(h,d),Z(h,s,d),o||(a=nt(t,"click",n[27]),o=!0)},p(h,d){h[19]&&!h[11]?l?l.p(h,d):(l=D_(h),l.c(),l.m(s.parentNode,s)):l&&(l.d(1),l=null)},d(h){h&&(_(e),_(r),_(s)),l&&l.d(h),o=!1,a()}}}function D_(n){let e,t=n[12]("createGeofence.errors.invalidPhoneNumber")+"",i;return{c(){e=A("p"),i=he(t),this.h()},l(r){e=R(r,"P",{class:!0});var s=T(e);i=fe(s,t),s.forEach(_),this.h()},h(){g(e,"class","error-message svelte-1ayjfis")},m(r,s){Z(r,e,s),p(e,i)},p(r,s){s[0]&4096&&t!==(t=r[12]("createGeofence.errors.invalidPhoneNumber")+"")&&Ee(i,t)},d(r){r&&_(e)}}}function eN(n){var me,ke,X;let e,t,i,r=(n[7]?n[12]("createGeofence.bufferNotificationMeans"):n[12]("createGeofence.notificationMeans"))+"",s,o,a,l,h,d,m,v,k,w=n[12]("createGeofence.notificationMeansType.audioVisual.title")+"",E,I,M,C,D=n[12]("createGeofence.notificationMeansType.audioVisual.desc"+(n[7]?"Buffer":""))+"",O,P,F,V,$,G,U,H,j=n[12]("createGeofence.notificationMeansType.sms.title")+"",Q,W,Y,q,ne=n[12]("createGeofence.notificationMeansType.sms.desc"+(n[7]?"Buffer":""))+"",J,ge,ie;function le(ue){n[33](ue)}let pe={checkboxClass:"grow dont-shrink",disabled:!((me=n[14])!=null&&me.hasPermission(302)),name:"notification-audiovisual",id:"notification-audiovisual"};n[13]!==void 0&&(pe.checked=n[13]),h=new so({props:pe}),un.push(()=>jn(h,"checked",le));function ye(ue){n[34](ue)}let be={checkboxClass:"grow dont-shrink",disabled:!((ke=n[14])!=null&&ke.hasPermission(302)&&((X=n[14])!=null&&X.hasPermission(303))),name:"notification-sms",id:"notification-sms"};n[15]!==void 0&&(be.checked=n[15]),V=new so({props:be}),un.push(()=>jn(V,"checked",ye));let re=n[15]&&E_(n);return{c(){e=A("div"),t=A("span"),i=A("strong"),s=he(r),o=ee(),a=A("div"),l=A("div"),st(h.$$.fragment),m=ee(),v=A("label"),k=A("p"),E=he(w),I=ee(),M=A("p"),C=A("i"),O=he(D),P=ee(),F=A("div"),st(V.$$.fragment),G=ee(),U=A("label"),H=A("p"),Q=he(j),W=ee(),Y=A("p"),q=A("i"),J=he(ne),ge=ee(),re&&re.c(),this.h()},l(ue){e=R(ue,"DIV",{class:!0,style:!0});var _e=T(e);t=R(_e,"SPAN",{style:!0});var oe=T(t);i=R(oe,"STRONG",{});var ae=T(i);s=fe(ae,r),ae.forEach(_),oe.forEach(_),o=te(_e),a=R(_e,"DIV",{class:!0});var Se=T(a);l=R(Se,"DIV",{class:!0,style:!0});var Me=T(l);ot(h.$$.fragment,Me),m=te(Me),v=R(Me,"LABEL",{class:!0,for:!0});var we=T(v);k=R(we,"P",{style:!0});var Te=T(k);E=fe(Te,w),Te.forEach(_),I=te(we),M=R(we,"P",{style:!0});var Ae=T(M);C=R(Ae,"I",{});var Ne=T(C);O=fe(Ne,D),Ne.forEach(_),Ae.forEach(_),we.forEach(_),Me.forEach(_),P=te(Se),F=R(Se,"DIV",{class:!0,style:!0});var De=T(F);ot(V.$$.fragment,De),G=te(De),U=R(De,"LABEL",{class:!0,for:!0});var _t=T(U);H=R(_t,"P",{style:!0});var Fe=T(H);Q=fe(Fe,j),Fe.forEach(_),W=te(_t),Y=R(_t,"P",{style:!0});var Pe=T(Y);q=R(Pe,"I",{});var je=T(q);J=fe(je,ne),je.forEach(_),Pe.forEach(_),_t.forEach(_),De.forEach(_),Se.forEach(_),ge=te(_e),re&&re.l(_e),_e.forEach(_),this.h()},h(){B(t,"font-size","20px"),B(k,"font-weight","600"),B(M,"font-size","14px"),B(M,"color","#666"),g(v,"class","column g4"),g(v,"for","notification-audiovisual"),g(l,"class","row p816 hoverable"),B(l,"gap","12px"),B(l,"align-items","start"),B(l,"border-radius","4px"),B(H,"font-weight","600"),B(Y,"font-size","14px"),B(Y,"color","#666"),g(U,"class","column g4"),g(U,"for","notification-sms"),g(F,"class","row p816 hoverable"),B(F,"gap","12px"),B(F,"align-items","start"),B(F,"border-radius","4px"),g(a,"class","column g8"),g(e,"class","column g8"),B(e,"padding-inline","16px")},m(ue,_e){Z(ue,e,_e),p(e,t),p(t,i),p(i,s),p(e,o),p(e,a),p(a,l),at(h,l,null),p(l,m),p(l,v),p(v,k),p(k,E),p(v,I),p(v,M),p(M,C),p(C,O),p(a,P),p(a,F),at(V,F,null),p(F,G),p(F,U),p(U,H),p(H,Q),p(U,W),p(U,Y),p(Y,q),p(q,J),p(e,ge),re&&re.m(e,null),ie=!0},p(ue,_e){var Se,Me,we;(!ie||_e[0]&4224)&&r!==(r=(ue[7]?ue[12]("createGeofence.bufferNotificationMeans"):ue[12]("createGeofence.notificationMeans"))+"")&&Ee(s,r);const oe={};_e[0]&16384&&(oe.disabled=!((Se=ue[14])!=null&&Se.hasPermission(302))),!d&&_e[0]&8192&&(d=!0,oe.checked=ue[13],Yn(()=>d=!1)),h.$set(oe),(!ie||_e[0]&4096)&&w!==(w=ue[12]("createGeofence.notificationMeansType.audioVisual.title")+"")&&Ee(E,w),(!ie||_e[0]&4224)&&D!==(D=ue[12]("createGeofence.notificationMeansType.audioVisual.desc"+(ue[7]?"Buffer":""))+"")&&Ee(O,D);const ae={};_e[0]&16384&&(ae.disabled=!((Me=ue[14])!=null&&Me.hasPermission(302)&&((we=ue[14])!=null&&we.hasPermission(303)))),!$&&_e[0]&32768&&($=!0,ae.checked=ue[15],Yn(()=>$=!1)),V.$set(ae),(!ie||_e[0]&4096)&&j!==(j=ue[12]("createGeofence.notificationMeansType.sms.title")+"")&&Ee(Q,j),(!ie||_e[0]&4224)&&ne!==(ne=ue[12]("createGeofence.notificationMeansType.sms.desc"+(ue[7]?"Buffer":""))+"")&&Ee(J,ne),ue[15]?re?(re.p(ue,_e),_e[0]&32768&&de(re,1)):(re=E_(ue),re.c(),de(re,1),re.m(e,null)):re&&(bt(),Ie(re,1,1,()=>{re=null}),wt())},i(ue){ie||(de(h.$$.fragment,ue),de(V.$$.fragment,ue),de(re),ie=!0)},o(ue){Ie(h.$$.fragment,ue),Ie(V.$$.fragment,ue),Ie(re),ie=!1},d(ue){ue&&_(e),lt(h),lt(V),re&&re.d()}}}function tN(n,{duration:e,easing:t,direction:i=1}){return{duration:e,easing:t,css:r=>`transform: translateX(${(1-r)*100*i}%); opacity: ${r};`}}const nN=n=>{n.target.select()};function iN(n,e,t){let i,r,s,o=$e,a=()=>(o(),o=Dt(be,Pe=>t(29,s=Pe)),be),l,h=$e,d=()=>(h(),h=Dt(pe,Pe=>t(8,l=Pe)),pe),m,v,k=$e,w=()=>(k(),k=Dt(ie,Pe=>t(30,v=Pe)),ie),E,I,M=$e,C=()=>(M(),M=Dt(le,Pe=>t(32,I=Pe)),le),D,O,P,F=$e,V=()=>(F(),F=Dt(J,Pe=>t(13,P=Pe)),J),$,G,U=$e,H=()=>(U(),U=Dt(ge,Pe=>t(15,G=Pe)),ge),j,Q,W,Y,q=$e,ne=()=>(q(),q=Dt(ye,Pe=>t(19,Y=Pe)),ye);He(n,So,Pe=>t(40,D=Pe)),He(n,Nn,Pe=>t(12,O=Pe)),He(n,Li,Pe=>t(14,$=Pe)),n.$$.on_destroy.push(()=>o()),n.$$.on_destroy.push(()=>h()),n.$$.on_destroy.push(()=>k()),n.$$.on_destroy.push(()=>M()),n.$$.on_destroy.push(()=>F()),n.$$.on_destroy.push(()=>U()),n.$$.on_destroy.push(()=>q());let{notificationAudiovisual:J}=e;V();let{notificationSms:ge}=e;H();let{availableSmsTemplates:ie}=e;w();let{smsLanguage:le}=e;C();let{smsRecipients:pe}=e;d();let{showValidationErrors:ye}=e;ne();let{geofence:be}=e;a();let{isBuffered:re}=e;const me=new Ot([]);He(n,me,Pe=>t(18,W=Pe)),ie.subscribe(Pe=>{const je=Array.from(Pe.map(Ve=>Ve.languageCode));console.log("Available SMS template languages:",je),me.set(je)});const ke=new Ot(I||(D==="eng"&&me.current[1]?me.current[1]:me.current[0])||"ET");He(n,ke,Pe=>t(9,m=Pe));const X=new Ot(ke.current);He(n,X,Pe=>t(31,E=Pe));const ue=new Ot(1);He(n,ue,Pe=>t(17,Q=Pe));const _e=new Ot(void 0);He(n,_e,Pe=>t(16,j=Pe));function oe(Pe,je){if(!(je!=null&&je.target))return;const Ve=je.target.value,Ue=Ve.replace(/[^0-9\+\s\(\)\-]/g,"");Ve!==Ue&&(je.target.value=Ue),b_("+372 "+Ue,"EE").isValid()&&pe.update(Ke=>Ke.map((We,ze)=>ze===Pe?Ue:We))}function ae(Pe){pe.update(je=>je.length>1?je.filter((Ve,Ue)=>Ue!==Pe):je)}function Se(){pe.update(Pe=>[...Pe,""])}function Me(Pe,je){if(je!=null&&je.target){if(!b_("+372 "+je.target.value,"EE").isValid()){je.target.value=pe.current[Pe];return}pe.update(Ve=>Ve.map((Ue,Ke)=>Ke===Pe?je.target.value:Ue))}}function we(Pe){P=Pe,J.set(P)}function Te(Pe){G=Pe,ge.set(G)}const Ae=Pe=>ke.set(Pe),Ne=(Pe,je)=>oe(Pe,je),De=(Pe,je)=>{je.key==="Enter"&&(Me(Pe,je),je.target.blur())},_t=(Pe,je)=>{Me(Pe,je)},Fe=Pe=>ae(Pe);return n.$$set=Pe=>{"notificationAudiovisual"in Pe&&V(t(0,J=Pe.notificationAudiovisual)),"notificationSms"in Pe&&H(t(1,ge=Pe.notificationSms)),"availableSmsTemplates"in Pe&&w(t(2,ie=Pe.availableSmsTemplates)),"smsLanguage"in Pe&&C(t(3,le=Pe.smsLanguage)),"smsRecipients"in Pe&&d(t(4,pe=Pe.smsRecipients)),"showValidationErrors"in Pe&&ne(t(5,ye=Pe.showValidationErrors)),"geofence"in Pe&&a(t(6,be=Pe.geofence)),"isBuffered"in Pe&&t(7,re=Pe.isBuffered)},n.$$.update=()=>{if(n.$$.dirty[0]&8|n.$$.dirty[1]&2&&I&&I!==ke.current&&ke.set(le.current),n.$$.dirty[0]&1073742344|n.$$.dirty[1]&1){if(m!==E){const Pe=me.current.indexOf(E),je=me.current.indexOf(m);ue.set(je>Pe?1:-1)}X.set(m),_e.set((v==null?void 0:v.find(Pe=>Pe.languageCode===m))??(v==null?void 0:v[0])),_e&&typeof m=="string"&&le.set(m)}n.$$.dirty[0]&256&&t(11,i=l.some(Pe=>Pe&&Pe.trim()!=="")),n.$$.dirty[0]&536870912&&t(10,r={GeoFenceName:s.name.replaceAll(`
`,"\\n")||gl["GeoFence.Name"],Drone:{Make:gl["Drone.Make"],Model:gl["Drone.Model"],PilotCoordinates:{Lat:gl["PilotCoordinates.Lat"],Lng:gl["PilotCoordinates.Lng"]}}})},[J,ge,ie,le,pe,ye,be,re,l,m,r,i,O,P,$,G,j,Q,W,Y,me,ke,X,ue,_e,oe,ae,Se,Me,s,v,E,I,we,Te,Ae,Ne,De,_t,Fe]}class c4 extends Wt{constructor(e){super(),Xt(this,e,iN,eN,zt,{notificationAudiovisual:0,notificationSms:1,availableSmsTemplates:2,smsLanguage:3,smsRecipients:4,showValidationErrors:5,geofence:6,isBuffered:7},null,[-1,-1])}}function rN(n){let e,t;return e=new c4({props:{notificationAudiovisual:n[1],notificationSms:n[2],availableSmsTemplates:n[3],smsLanguage:n[4],smsRecipients:n[5],showValidationErrors:n[6],geofence:n[0],isBuffered:!1}}),{c(){st(e.$$.fragment)},l(i){ot(e.$$.fragment,i)},m(i,r){at(e,i,r),t=!0},p(i,[r]){const s={};r&2&&(s.notificationAudiovisual=i[1]),r&4&&(s.notificationSms=i[2]),r&8&&(s.availableSmsTemplates=i[3]),r&16&&(s.smsLanguage=i[4]),r&32&&(s.smsRecipients=i[5]),r&64&&(s.showValidationErrors=i[6]),r&1&&(s.geofence=i[0]),e.$set(s)},i(i){t||(de(e.$$.fragment,i),t=!0)},o(i){Ie(e.$$.fragment,i),t=!1},d(i){lt(e,i)}}}function sN(n,e,t){let{geofence:i}=e,{primaryNotificationAudiovisual:r}=e,{primaryNotificationSms:s}=e,{availableFenceSmsTemplates:o}=e,{smsLanguage:a}=e,{primarySmsRecipients:l}=e,{showValidationErrors:h}=e;return n.$$set=d=>{"geofence"in d&&t(0,i=d.geofence),"primaryNotificationAudiovisual"in d&&t(1,r=d.primaryNotificationAudiovisual),"primaryNotificationSms"in d&&t(2,s=d.primaryNotificationSms),"availableFenceSmsTemplates"in d&&t(3,o=d.availableFenceSmsTemplates),"smsLanguage"in d&&t(4,a=d.smsLanguage),"primarySmsRecipients"in d&&t(5,l=d.primarySmsRecipients),"showValidationErrors"in d&&t(6,h=d.showValidationErrors)},[i,r,s,o,a,l,h]}class oN extends Wt{constructor(e){super(),Xt(this,e,sN,rN,zt,{geofence:0,primaryNotificationAudiovisual:1,primaryNotificationSms:2,availableFenceSmsTemplates:3,smsLanguage:4,primarySmsRecipients:5,showValidationErrors:6})}}function A_(n){let e,t,i=n[4]("createGeofence.buffer.title")+"",r,s,o,a,l,h,d="m",m,v;return{c(){e=A("div"),t=A("p"),r=he(i),s=ee(),o=A("input"),l=ee(),h=A("p"),h.textContent=d,this.h()},l(k){e=R(k,"DIV",{class:!0});var w=T(e);t=R(w,"P",{style:!0,class:!0});var E=T(t);r=fe(E,i),E.forEach(_),s=te(w),o=R(w,"INPUT",{style:!0,class:!0,type:!0}),l=te(w),h=R(w,"P",{style:!0,class:!0,"data-svelte-h":!0}),rn(h)!=="svelte-1ib1edb"&&(h.textContent=d),w.forEach(_),this.h()},h(){B(t,"color","#aaa"),B(t,"padding","6px 8px 4px 6px"),B(t,"width","110px"),B(t,"text-align","left"),B(t,"font-size","14px"),B(t,"text-transform","uppercase"),g(t,"class","svelte-eazica"),B(o,"width","0"),B(o,"font-family","monospace"),B(o,"font-size","16px"),g(o,"class","grow svelte-eazica"),g(o,"type","text"),o.value=a=n[6].toFixed(0),B(h,"color","#888"),B(h,"text-align","right"),B(h,"padding","5px 8px"),g(h,"class","svelte-eazica"),g(e,"class","input-container row grow svelte-eazica")},m(k,w){Z(k,e,w),p(e,t),p(t,r),p(e,s),p(e,o),p(e,l),p(e,h),m||(v=[nt(o,"keydown",n[17]),nt(o,"blur",n[18]),nt(o,"focus",lN),nt(o,"input",n[19])],m=!0)},p(k,w){w&16&&i!==(i=k[4]("createGeofence.buffer.title")+"")&&Ee(r,i),w&64&&a!==(a=k[6].toFixed(0))&&o.value!==a&&(o.value=a)},d(k){k&&_(e),m=!1,Bn(v)}}}function aN(n){let e,t,i,r,s=n[4]("createGeofence.buffer.title")+"",o,a,l,h=n[4]("createGeofence.buffer.desc")+"",d,m,v,k,w,E;function I(D){n[15](D)}let M={label:n[4]("createGeofence.addAreaOfInterest"),id:"has-buffer",name:"has-buffer",labelClass:"g4"};n[5]!==void 0&&(M.checked=n[5]),v=new so({props:M}),un.push(()=>jn(v,"checked",I)),v.$on("change",n[16]);let C=n[5]&&A_(n);return{c(){e=A("div"),t=A("div"),i=A("span"),r=A("strong"),o=he(s),a=ee(),l=A("p"),d=he(h),m=ee(),st(v.$$.fragment),w=ee(),C&&C.c(),this.h()},l(D){e=R(D,"DIV",{class:!0,style:!0});var O=T(e);t=R(O,"DIV",{class:!0});var P=T(t);i=R(P,"SPAN",{style:!0});var F=T(i);r=R(F,"STRONG",{});var V=T(r);o=fe(V,s),V.forEach(_),F.forEach(_),a=te(P),l=R(P,"P",{});var $=T(l);d=fe($,h),$.forEach(_),P.forEach(_),m=te(O),ot(v.$$.fragment,O),w=te(O),C&&C.l(O),O.forEach(_),this.h()},h(){B(i,"font-size","20px"),g(t,"class","column g8"),g(e,"class","column g16"),B(e,"padding-inline","16px")},m(D,O){Z(D,e,O),p(e,t),p(t,i),p(i,r),p(r,o),p(t,a),p(t,l),p(l,d),p(e,m),at(v,e,null),p(e,w),C&&C.m(e,null),E=!0},p(D,[O]){(!E||O&16)&&s!==(s=D[4]("createGeofence.buffer.title")+"")&&Ee(o,s),(!E||O&16)&&h!==(h=D[4]("createGeofence.buffer.desc")+"")&&Ee(d,h);const P={};O&16&&(P.label=D[4]("createGeofence.addAreaOfInterest")),!k&&O&32&&(k=!0,P.checked=D[5],Yn(()=>k=!1)),v.$set(P),D[5]?C?C.p(D,O):(C=A_(D),C.c(),C.m(e,null)):C&&(C.d(1),C=null)},i(D){E||(de(v.$$.fragment,D),E=!0)},o(D){Ie(v.$$.fragment,D),E=!1},d(D){D&&_(e),lt(v),C&&C.d()}}}const lN=n=>n.target.select();function uN(n,e,t){let i,r,s=$e,o=()=>(s(),s=Dt(d,H=>t(5,r=H)),d),a,l=$e,h=()=>(l(),l=Dt(m,H=>t(6,a=H)),m);He(n,Nn,H=>t(4,i=H)),n.$$.on_destroy.push(()=>s()),n.$$.on_destroy.push(()=>l());let{hasBuffer:d}=e;o();let{bufferRadius:m}=e;h();let{bufferNotificationAudiovisual:v}=e,{bufferNotificationSms:k}=e,{geofence:w}=e,{availableBufferSmsTemplates:E}=e,{smsLanguage:I}=e,{bufferSmsRecipients:M}=e,{availableFenceSmsTemplates:C}=e,{updateGeofence:D}=e,{enforceInputInteger:O}=e;function P(H){let j=Math.max(+parseInt(H.target.value),to);isNaN(j)||j<to?j=to:j>La&&(j=La),j==0&&d.set(!1),m.set(j),H.target.value=j,D()}function F(H){r=H,d.set(r)}const V=H=>D(),$=H=>H.key==="Enter"&&P(H),G=H=>P(H),U=H=>O(H);return n.$$set=H=>{"hasBuffer"in H&&o(t(0,d=H.hasBuffer)),"bufferRadius"in H&&h(t(1,m=H.bufferRadius)),"bufferNotificationAudiovisual"in H&&t(8,v=H.bufferNotificationAudiovisual),"bufferNotificationSms"in H&&t(9,k=H.bufferNotificationSms),"geofence"in H&&t(10,w=H.geofence),"availableBufferSmsTemplates"in H&&t(11,E=H.availableBufferSmsTemplates),"smsLanguage"in H&&t(12,I=H.smsLanguage),"bufferSmsRecipients"in H&&t(13,M=H.bufferSmsRecipients),"availableFenceSmsTemplates"in H&&t(14,C=H.availableFenceSmsTemplates),"updateGeofence"in H&&t(2,D=H.updateGeofence),"enforceInputInteger"in H&&t(3,O=H.enforceInputInteger)},[d,m,D,O,i,r,a,P,v,k,w,E,I,M,C,F,V,$,G,U]}class cN extends Wt{constructor(e){super(),Xt(this,e,uN,aN,zt,{hasBuffer:0,bufferRadius:1,bufferNotificationAudiovisual:8,bufferNotificationSms:9,geofence:10,availableBufferSmsTemplates:11,smsLanguage:12,bufferSmsRecipients:13,availableFenceSmsTemplates:14,updateGeofence:2,enforceInputInteger:3})}}function hN(n){let e,t;return e=new c4({props:{notificationAudiovisual:n[1],notificationSms:n[2],availableSmsTemplates:n[3],smsLanguage:n[4],smsRecipients:n[5],showValidationErrors:n[6],geofence:n[0],isBuffered:!0}}),{c(){st(e.$$.fragment)},l(i){ot(e.$$.fragment,i)},m(i,r){at(e,i,r),t=!0},p(i,[r]){const s={};r&2&&(s.notificationAudiovisual=i[1]),r&4&&(s.notificationSms=i[2]),r&8&&(s.availableSmsTemplates=i[3]),r&16&&(s.smsLanguage=i[4]),r&32&&(s.smsRecipients=i[5]),r&64&&(s.showValidationErrors=i[6]),r&1&&(s.geofence=i[0]),e.$set(s)},i(i){t||(de(e.$$.fragment,i),t=!0)},o(i){Ie(e.$$.fragment,i),t=!1},d(i){lt(e,i)}}}function fN(n,e,t){let{hasBuffer:i}=e,{bufferRadius:r}=e,{geofence:s}=e,{bufferNotificationAudiovisual:o}=e,{bufferNotificationSms:a}=e,{availableBufferSmsTemplates:l}=e,{smsLanguage:h}=e,{bufferSmsRecipients:d}=e,{availableFenceSmsTemplates:m}=e,{showValidationErrors:v}=e;return n.$$set=k=>{"hasBuffer"in k&&t(7,i=k.hasBuffer),"bufferRadius"in k&&t(8,r=k.bufferRadius),"geofence"in k&&t(0,s=k.geofence),"bufferNotificationAudiovisual"in k&&t(1,o=k.bufferNotificationAudiovisual),"bufferNotificationSms"in k&&t(2,a=k.bufferNotificationSms),"availableBufferSmsTemplates"in k&&t(3,l=k.availableBufferSmsTemplates),"smsLanguage"in k&&t(4,h=k.smsLanguage),"bufferSmsRecipients"in k&&t(5,d=k.bufferSmsRecipients),"availableFenceSmsTemplates"in k&&t(9,m=k.availableFenceSmsTemplates),"showValidationErrors"in k&&t(6,v=k.showValidationErrors)},[s,o,a,l,h,d,v,i,r,m]}class dN extends Wt{constructor(e){super(),Xt(this,e,fN,hN,zt,{hasBuffer:7,bufferRadius:8,geofence:0,bufferNotificationAudiovisual:1,bufferNotificationSms:2,availableBufferSmsTemplates:3,smsLanguage:4,bufferSmsRecipients:5,availableFenceSmsTemplates:9,showValidationErrors:6})}}function R_(n){let e,t=n[9]("createGeofence.back")+"",i,r,s;return{c(){e=A("button"),i=he(t),this.h()},l(o){e=R(o,"BUTTON",{class:!0,style:!0});var a=T(e);i=fe(a,t),a.forEach(_),this.h()},h(){g(e,"class","back outline svelte-9htnz1"),B(e,"padding","8px 24px")},m(o,a){Z(o,e,a),p(e,i),r||(s=nt(e,"click",n[11]),r=!0)},p(o,a){a&512&&t!==(t=o[9]("createGeofence.back")+"")&&Ee(i,t)},d(o){o&&_(e),r=!1,s()}}}function O_(n){let e,t=n[9]("createGeofence.save")+"",i,r,s;return{c(){e=A("button"),i=he(t),this.h()},l(o){e=R(o,"BUTTON",{class:!0,style:!0});var a=T(e);i=fe(a,t),a.forEach(_),this.h()},h(){g(e,"class","save svelte-9htnz1"),B(e,"padding","8px 24px"),B(e,"margin-right","8px"),Tn(e,"disabled",n[5]||n[6])},m(o,a){Z(o,e,a),p(e,i),r||(s=nt(e,"click",n[12]),r=!0)},p(o,a){a&512&&t!==(t=o[9]("createGeofence.save")+"")&&Ee(i,t),a&96&&Tn(e,"disabled",o[5]||o[6])},d(o){o&&_(e),r=!1,s()}}}function gN(n){let e,t,i,r,s,o,a,l,h=(n[8]?n[9]("createGeofence.save"):n[9]("createGeofence.next"))+"",d,m,v,k,w=n[7]!==ln.AREA&&R_(n),E=n[0]&&!n[8]&&O_(n);return{c(){e=A("hr"),t=ee(),i=A("div"),w&&w.c(),r=ee(),s=A("div"),o=ee(),E&&E.c(),a=ee(),l=A("button"),d=he(h),this.h()},l(I){e=R(I,"HR",{}),t=te(I),i=R(I,"DIV",{class:!0});var M=T(i);w&&w.l(M),r=te(M),s=R(M,"DIV",{class:!0}),T(s).forEach(_),o=te(M),E&&E.l(M),a=te(M),l=R(M,"BUTTON",{class:!0,style:!0});var C=T(l);d=fe(C,h),C.forEach(_),M.forEach(_),this.h()},h(){g(s,"class","grow"),g(l,"class",m=Ui(n[8]?"save":"")+" svelte-9htnz1"),B(l,"padding","8px 24px"),Tn(l,"disabled",n[5]),g(i,"class","row p16")},m(I,M){Z(I,e,M),Z(I,t,M),Z(I,i,M),w&&w.m(i,null),p(i,r),p(i,s),p(i,o),E&&E.m(i,null),p(i,a),p(i,l),p(l,d),v||(k=nt(l,"click",n[13]),v=!0)},p(I,[M]){I[7]!==ln.AREA?w?w.p(I,M):(w=R_(I),w.c(),w.m(i,r)):w&&(w.d(1),w=null),I[0]&&!I[8]?E?E.p(I,M):(E=O_(I),E.c(),E.m(i,a)):E&&(E.d(1),E=null),M&768&&h!==(h=(I[8]?I[9]("createGeofence.save"):I[9]("createGeofence.next"))+"")&&Ee(d,h),M&256&&m!==(m=Ui(I[8]?"save":"")+" svelte-9htnz1")&&g(l,"class",m),M&288&&Tn(l,"disabled",I[5])},i:$e,o:$e,d(I){I&&(_(e),_(t),_(i)),w&&w.d(),E&&E.d(),v=!1,k()}}}function mN(n,e,t){let i,r,s=$e,o=()=>(s(),s=Dt(h,D=>t(7,r=D)),h),a;He(n,Nn,D=>t(9,a=D)),n.$$.on_destroy.push(()=>s());let{isEditing:l}=e,{screen:h}=e;o();let{onAdvanceScreenClick:d}=e,{submit:m}=e,{goBackScreen:v}=e,{hasBuffer:k}=e,{isNextDisabled:w}=e,{hasInvalidSteps:E}=e;const I=()=>v(),M=()=>!w&&!E&&m(),C=()=>w?d():i?m():d();return n.$$set=D=>{"isEditing"in D&&t(0,l=D.isEditing),"screen"in D&&o(t(1,h=D.screen)),"onAdvanceScreenClick"in D&&t(2,d=D.onAdvanceScreenClick),"submit"in D&&t(3,m=D.submit),"goBackScreen"in D&&t(4,v=D.goBackScreen),"hasBuffer"in D&&t(10,k=D.hasBuffer),"isNextDisabled"in D&&t(5,w=D.isNextDisabled),"hasInvalidSteps"in D&&t(6,E=D.hasInvalidSteps)},n.$$.update=()=>{n.$$.dirty&128&&t(8,i=r===ln.REVIEW)},[l,h,d,m,v,w,E,r,i,a,k,I,M,C]}class _N extends Wt{constructor(e){super(),Xt(this,e,mN,gN,zt,{isEditing:0,screen:1,onAdvanceScreenClick:2,submit:3,goBackScreen:4,hasBuffer:10,isNextDisabled:5,hasInvalidSteps:6})}}function x_(n,e,t){const i=n.slice();i[10]=e[t],i[15]=t;const r=i[15]<i[4];i[11]=r;const s=i[5]===i[10];i[12]=s;const o=i[15]>i[1]||i[15]>i[6];return i[13]=o,i}function pN(n){let e=n[15]+1+"",t;return{c(){t=he(e)},l(i){t=fe(i,e)},m(i,r){Z(i,t,r)},d(i){i&&_(t)}}}function vN(n){let e,t;return{c(){e=Re("svg"),t=Re("polyline"),this.h()},l(i){e=Oe(i,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0,fill:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0});var r=T(e);t=Oe(r,"polyline",{points:!0}),T(t).forEach(_),r.forEach(_),this.h()},h(){g(t,"points","20 6 9 17 4 12"),g(e,"xmlns","http://www.w3.org/2000/svg"),g(e,"width","16"),g(e,"height","16"),g(e,"viewBox","0 0 24 24"),g(e,"fill","none"),g(e,"stroke","white"),g(e,"stroke-width","3"),g(e,"stroke-linecap","round"),g(e,"stroke-linejoin","round")},m(i,r){Z(i,e,r),p(e,t)},d(i){i&&_(e)}}}function yN(n){let e;function t(s,o){return s[11]?vN:pN}let i=t(n),r=i(n);return{c(){r.c(),e=dt()},l(s){r.l(s),e=dt()},m(s,o){r.m(s,o),Z(s,e,o)},p(s,o){i!==(i=t(s))&&(r.d(1),r=i(s),r&&(r.c(),r.m(e.parentNode,e)))},d(s){s&&_(e),r.d(s)}}}function F_(n){let e,t,i,r,s;function o(){return n[9](n[13],n[10])}return t=new fn({props:{class:"tab-button "+(n[12]?"selected":"")+" "+(n[11]?"done":"")+" "+(n[13]?"disabled":""),onclick:o,disabled:n[13],$$slots:{default:[yN]},$$scope:{ctx:n}}}),{c(){e=A("div"),st(t.$$.fragment),i=ee(),this.h()},l(a){e=R(a,"DIV",{class:!0});var l=T(e);ot(t.$$.fragment,l),i=te(l),l.forEach(_),this.h()},h(){g(e,"class",r="progress-step-container "+(n[11]?"done":"")+" "+(n[12]?"selected":"")+" "+(n[13]?"disabled":"")+" svelte-1k2rhd")},m(a,l){Z(a,e,l),at(t,e,null),p(e,i),s=!0},p(a,l){n=a;const h={};l&118&&(h.class="tab-button "+(n[12]?"selected":"")+" "+(n[11]?"done":"")+" "+(n[13]?"disabled":"")),l&71&&(h.onclick=o),l&66&&(h.disabled=n[13]),l&65552&&(h.$$scope={dirty:l,ctx:n}),t.$set(h),(!s||l&118&&r!==(r="progress-step-container "+(n[11]?"done":"")+" "+(n[12]?"selected":"")+" "+(n[13]?"disabled":"")+" svelte-1k2rhd"))&&g(e,"class",r)},i(a){s||(de(t.$$.fragment,a),s=!0)},o(a){Ie(t.$$.fragment,a),s=!1},d(a){a&&_(e),lt(t)}}}function bN(n){let e,t,i=Bt(n[2]),r=[];for(let o=0;o<i.length;o+=1)r[o]=F_(x_(n,i,o));const s=o=>Ie(r[o],1,1,()=>{r[o]=null});return{c(){e=A("div");for(let o=0;o<r.length;o+=1)r[o].c();this.h()},l(o){e=R(o,"DIV",{class:!0});var a=T(e);for(let l=0;l<r.length;l+=1)r[l].l(a);a.forEach(_),this.h()},h(){g(e,"class","progress-bar svelte-1k2rhd")},m(o,a){Z(o,e,a);for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(e,null);t=!0},p(o,[a]){if(a&119){i=Bt(o[2]);let l;for(l=0;l<i.length;l+=1){const h=x_(o,i,l);r[l]?(r[l].p(h,a),de(r[l],1)):(r[l]=F_(h),r[l].c(),de(r[l],1),r[l].m(e,null))}for(bt(),l=i.length;l<r.length;l+=1)s(l);wt()}},i(o){if(!t){for(let a=0;a<i.length;a+=1)de(r[a]);t=!0}},o(o){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)Ie(r[a]);t=!1},d(o){o&&_(e),ui(r,o)}}}function wN(n,e,t){let i,r,s=$e,o=()=>(s(),s=Dt(d,M=>t(5,r=M)),d),a,l=$e,h=()=>(l(),l=Dt(w,M=>t(6,a=M)),w);n.$$.on_destroy.push(()=>s()),n.$$.on_destroy.push(()=>l());let{screen:d}=e;o();let{hasBuffer:m}=e,{maxAllowedScreenIndex:v}=e,{screenOptions:k}=e,{maxVisitedScreenIndex:w}=e;h();const E=Ra(d,M=>k.indexOf(M));He(n,E,M=>t(4,i=M));const I=(M,C)=>{M||d.set(C)};return n.$$set=M=>{"screen"in M&&o(t(0,d=M.screen)),"hasBuffer"in M&&t(8,m=M.hasBuffer),"maxAllowedScreenIndex"in M&&t(1,v=M.maxAllowedScreenIndex),"screenOptions"in M&&t(2,k=M.screenOptions),"maxVisitedScreenIndex"in M&&h(t(3,w=M.maxVisitedScreenIndex))},[d,v,k,w,i,r,a,E,m,I]}class kN extends Wt{constructor(e){super(),Xt(this,e,wN,bN,zt,{screen:0,hasBuffer:8,maxAllowedScreenIndex:1,screenOptions:2,maxVisitedScreenIndex:3})}}function B_(n){let e,t,i=n[5]("createGeofence.validityPeriod.validFrom")+"",r,s,o,a,l,h,d,m,v,k,w,E=n[5]("createGeofence.validityPeriod.validTo")+"",I,M,C,D,O,P,F,V,$;function G(ne){n[17](ne)}let U={min:new Date,max:new Date(new Date().setFullYear(new Date().getFullYear()+10)),id:"valid-from-date",dynamicPositioning:!0,locale:n[6],format:n[8]&&n[8]==="eng"?"dd-MM-yyyy":"dd.MM.yyyy",placeholder:"",closeOnSelection:!0,class:"always-open-above"};n[7]!==void 0&&(U.value=n[7]),a=new zc({props:U}),un.push(()=>jn(a,"value",G));function H(ne){n[18](ne)}let j={idPrefix:"valid-from",minDate:new Date};n[7]!==void 0&&(j.date=n[7]),d=new Gc({props:j}),un.push(()=>jn(d,"date",H)),d.$on("timeChange",n[9]);function Q(ne){n[19](ne)}let W={min:n[7]?new Date(Math.max(n[7].getTime()+1*60*1e3,new Date().getTime()+1*60*1e3)):new Date(new Date().getTime()+1*60*1e3),max:new Date(new Date().setFullYear(new Date().getFullYear()+10)),id:"valid-to-date",dynamicPositioning:!0,locale:n[6],format:n[8]&&n[8]==="eng"?"dd-MM-yyyy":"dd.MM.yyyy",placeholder:"",closeOnSelection:!0,class:"always-open-above"};n[3]!==void 0&&(W.value=n[3]),D=new zc({props:W}),un.push(()=>jn(D,"value",Q));function Y(ne){n[20](ne)}let q={idPrefix:"valid-to",minDate:n[7]?new Date(Math.max(n[7].getTime()+1*60*1e3,new Date().getTime()+1*60*1e3)):new Date(new Date().getTime()+1*60*1e3)};return n[3]!==void 0&&(q.date=n[3]),F=new Gc({props:q}),un.push(()=>jn(F,"date",Y)),F.$on("timeChange",n[10]),{c(){e=A("div"),t=A("label"),r=he(i),s=ee(),o=A("div"),st(a.$$.fragment),h=ee(),st(d.$$.fragment),v=ee(),k=A("div"),w=A("label"),I=he(E),M=ee(),C=A("div"),st(D.$$.fragment),P=ee(),st(F.$$.fragment),this.h()},l(ne){e=R(ne,"DIV",{class:!0});var J=T(e);t=R(J,"LABEL",{for:!0,style:!0});var ge=T(t);r=fe(ge,i),ge.forEach(_),s=te(J),o=R(J,"DIV",{class:!0});var ie=T(o);ot(a.$$.fragment,ie),h=te(ie),ot(d.$$.fragment,ie),ie.forEach(_),J.forEach(_),v=te(ne),k=R(ne,"DIV",{class:!0});var le=T(k);w=R(le,"LABEL",{for:!0,style:!0});var pe=T(w);I=fe(pe,E),pe.forEach(_),M=te(le),C=R(le,"DIV",{class:!0});var ye=T(C);ot(D.$$.fragment,ye),P=te(ye),ot(F.$$.fragment,ye),ye.forEach(_),le.forEach(_),this.h()},h(){g(t,"for","valid-from-date"),B(t,"font-size","14px"),B(t,"color","#666"),g(o,"class","row g8"),g(e,"class","input-container column grow"),g(w,"for","valid-to-date"),B(w,"font-size","14px"),B(w,"color","#666"),g(C,"class","row g8"),g(k,"class","input-container column grow")},m(ne,J){Z(ne,e,J),p(e,t),p(t,r),p(e,s),p(e,o),at(a,o,null),p(o,h),at(d,o,null),Z(ne,v,J),Z(ne,k,J),p(k,w),p(w,I),p(k,M),p(k,C),at(D,C,null),p(C,P),at(F,C,null),$=!0},p(ne,J){(!$||J&32)&&i!==(i=ne[5]("createGeofence.validityPeriod.validFrom")+"")&&Ee(r,i);const ge={};J&64&&(ge.locale=ne[6]),J&256&&(ge.format=ne[8]&&ne[8]==="eng"?"dd-MM-yyyy":"dd.MM.yyyy"),!l&&J&128&&(l=!0,ge.value=ne[7],Yn(()=>l=!1)),a.$set(ge);const ie={};!m&&J&128&&(m=!0,ie.date=ne[7],Yn(()=>m=!1)),d.$set(ie),(!$||J&32)&&E!==(E=ne[5]("createGeofence.validityPeriod.validTo")+"")&&Ee(I,E);const le={};J&128&&(le.min=ne[7]?new Date(Math.max(ne[7].getTime()+1*60*1e3,new Date().getTime()+1*60*1e3)):new Date(new Date().getTime()+1*60*1e3)),J&64&&(le.locale=ne[6]),J&256&&(le.format=ne[8]&&ne[8]==="eng"?"dd-MM-yyyy":"dd.MM.yyyy"),!O&&J&8&&(O=!0,le.value=ne[3],Yn(()=>O=!1)),D.$set(le);const pe={};J&128&&(pe.minDate=ne[7]?new Date(Math.max(ne[7].getTime()+1*60*1e3,new Date().getTime()+1*60*1e3)):new Date(new Date().getTime()+1*60*1e3)),!V&&J&8&&(V=!0,pe.date=ne[3],Yn(()=>V=!1)),F.$set(pe)},i(ne){$||(de(a.$$.fragment,ne),de(d.$$.fragment,ne),de(D.$$.fragment,ne),de(F.$$.fragment,ne),$=!0)},o(ne){Ie(a.$$.fragment,ne),Ie(d.$$.fragment,ne),Ie(D.$$.fragment,ne),Ie(F.$$.fragment,ne),$=!1},d(ne){ne&&(_(e),_(v),_(k)),lt(a),lt(d),lt(D),lt(F)}}}function EN(n){let e,t,i,r,s=n[5]("createGeofence.validityPeriod.title")+"",o,a,l,h,d=n[5]("createGeofence.validityPeriod.desc")+"",m,v,k,w,E,I,M,C,D;function O(G){n[13](G)}let P={label:n[5]("createGeofence.validityPeriod.noValidityPeriod"),id:"validity-period-disabled",name:"validity-period",value:"indefinite"};n[4]!==void 0&&(P.group=n[4]),k=new Wl({props:P}),un.push(()=>jn(k,"group",O)),k.$on("change",n[14]);function F(G){n[15](G)}let V={label:n[5]("createGeofence.validityPeriod.validityPeriod"),id:"validity-period-enabled",name:"validity-period",value:"fixed"};n[4]!==void 0&&(V.group=n[4]),I=new Wl({props:V}),un.push(()=>jn(I,"group",F)),I.$on("change",n[16]);let $=n[4]!=="indefinite"&&B_(n);return{c(){e=A("div"),t=A("div"),i=A("span"),r=A("strong"),o=he(s),a=ee(),l=A("p"),h=new Ua(!1),m=ee(),v=A("div"),st(k.$$.fragment),E=ee(),st(I.$$.fragment),C=ee(),$&&$.c(),this.h()},l(G){e=R(G,"DIV",{class:!0,style:!0});var U=T(e);t=R(U,"DIV",{class:!0});var H=T(t);i=R(H,"SPAN",{style:!0});var j=T(i);r=R(j,"STRONG",{});var Q=T(r);o=fe(Q,s),Q.forEach(_),j.forEach(_),a=te(H),l=R(H,"P",{});var W=T(l);h=qa(W,!1),W.forEach(_),H.forEach(_),m=te(U),v=R(U,"DIV",{class:!0});var Y=T(v);ot(k.$$.fragment,Y),E=te(Y),ot(I.$$.fragment,Y),Y.forEach(_),C=te(U),$&&$.l(U),U.forEach(_),this.h()},h(){B(i,"font-size","20px"),h.a=null,g(t,"class","column g8"),g(v,"class","column g8"),g(e,"class","column g16"),B(e,"padding-inline","16px")},m(G,U){Z(G,e,U),p(e,t),p(t,i),p(i,r),p(r,o),p(t,a),p(t,l),h.m(d,l),p(e,m),p(e,v),at(k,v,null),p(v,E),at(I,v,null),p(e,C),$&&$.m(e,null),D=!0},p(G,[U]){(!D||U&32)&&s!==(s=G[5]("createGeofence.validityPeriod.title")+"")&&Ee(o,s),(!D||U&32)&&d!==(d=G[5]("createGeofence.validityPeriod.desc")+"")&&h.p(d);const H={};U&32&&(H.label=G[5]("createGeofence.validityPeriod.noValidityPeriod")),!w&&U&16&&(w=!0,H.group=G[4],Yn(()=>w=!1)),k.$set(H);const j={};U&32&&(j.label=G[5]("createGeofence.validityPeriod.validityPeriod")),!M&&U&16&&(M=!0,j.group=G[4],Yn(()=>M=!1)),I.$set(j),G[4]!=="indefinite"?$?($.p(G,U),U&16&&de($,1)):($=B_(G),$.c(),de($,1),$.m(e,null)):$&&(bt(),Ie($,1,1,()=>{$=null}),wt())},i(G){D||(de(k.$$.fragment,G),de(I.$$.fragment,G),de($),D=!0)},o(G){Ie(k.$$.fragment,G),Ie(I.$$.fragment,G),Ie($),D=!1},d(G){G&&_(e),lt(k),lt(I),$&&$.d()}}}function Yu(n){n.key.length===1&&/[a-zA-Z]/.test(n.key)&&n.preventDefault()}function SN(n,e,t){let i,r=$e,s=()=>(r(),r=Dt(M,J=>t(3,i=J)),M),o,a=$e,l=()=>(a(),a=Dt(E,J=>t(4,o=J)),E),h,d,m=$e,v=()=>(m(),m=Dt(I,J=>t(7,d=J)),I),k;He(n,Nn,J=>t(5,h=J)),He(n,So,J=>t(8,k=J)),n.$$.on_destroy.push(()=>r()),n.$$.on_destroy.push(()=>a()),n.$$.on_destroy.push(()=>m());let w,{validityPeriod:E}=e;l();let{validFrom:I}=e;v();let{validTo:M}=e;s();function C(){const J=new Date;d&&d.getTime()<J.getTime()&&I.set(J),D()}function D(){const J=new Date,ge=d?new Date(Math.max(d.getTime()+1*60*1e3,J.getTime()+1*60*1e3)):new Date(J.getTime()+1*60*1e3);i&&i.getTime()<ge.getTime()&&M.set(ge)}let O,P;const F=()=>{O=document.getElementById("valid-from-date"),P=document.getElementById("valid-to-date"),O==null||O.addEventListener("keydown",Yu),P==null||P.addEventListener("keydown",Yu),O==null||O.addEventListener("blur",C),P==null||P.addEventListener("blur",D)},V=()=>{O==null||O.removeEventListener("keydown",Yu),P==null||P.removeEventListener("keydown",Yu),O==null||O.removeEventListener("blur",C),P==null||P.removeEventListener("blur",D),O=null,P=null};ls(V);let $=null,G=!1;function U(J){o=J,E.set(o)}const H=()=>E.set("indefinite");function j(J){o=J,E.set(o)}const Q=()=>E.set("fixed");function W(J){d=J,I.set(d)}function Y(J){d=J,I.set(d)}function q(J){i=J,M.set(i)}function ne(J){i=J,M.set(i)}return n.$$set=J=>{"validityPeriod"in J&&l(t(0,E=J.validityPeriod)),"validFrom"in J&&v(t(1,I=J.validFrom)),"validTo"in J&&s(t(2,M=J.validTo))},n.$$.update=()=>{if(n.$$.dirty&16&&typeof window<"u"&&(o!=="indefinite"?Xc().then(F):V()),n.$$.dirty&32){const J=Array(7).fill(null).map((ie,le)=>h(`datepicker.weekdays.${le}`)),ge=Array(12).fill(null).map((ie,le)=>h(`datepicker.months.${le}`));t(6,w={weekdays:J,months:ge,weekStartsOn:1})}if(n.$$.dirty&6172&&o!=="indefinite"&&i){const J=i?`${i.getDate()}-${i.getMonth()}-${i.getFullYear()}`:null;if(J&&J!==$){if(G&&$!==null&&(i.getHours()!==23||i.getMinutes()!==59)){const ge=new Date(i);ge.setHours(23,59,0,0),M.set(ge)}t(11,$=J),t(12,G=!0)}else G||t(12,G=!0)}},[E,I,M,i,o,h,w,d,k,C,D,$,G,U,H,j,Q,W,Y,q,ne]}class IN extends Wt{constructor(e){super(),Xt(this,e,SN,EN,zt,{validityPeriod:0,validFrom:1,validTo:2})}}function $_(n,e,t){const i=n.slice();return i[39]=e[t],i[41]=t,i}function V_(n,e,t){const i=n.slice();return i[39]=e[t],i[41]=t,i}function MN(n){let e,t,i=n[17]("createGeofence.review.noDescription")+"",r;return{c(){e=A("p"),t=A("i"),r=he(i)},l(s){e=R(s,"P",{});var o=T(e);t=R(o,"I",{});var a=T(t);r=fe(a,i),a.forEach(_),o.forEach(_)},m(s,o){Z(s,e,o),p(e,t),p(t,r)},p(s,o){o[0]&131072&&i!==(i=s[17]("createGeofence.review.noDescription")+"")&&Ee(r,i)},d(s){s&&_(e)}}}function TN(n){let e;return{c(){e=A("textarea"),this.h()},l(t){e=R(t,"TEXTAREA",{style:!0,spellcheck:!0,rows:!0}),T(e).forEach(_),this.h()},h(){B(e,"flex","2"),B(e,"resize","none"),e.disabled=!0,g(e,"spellcheck","false"),g(e,"rows","6"),e.value=n[19]},m(t,i){Z(t,e,i)},p(t,i){i[0]&524288&&(e.value=t[19])},d(t){t&&_(e)}}}function LN(n){let e=n[17]("createGeofence.review.noHeight")+"",t;return{c(){t=he(e)},l(i){t=fe(i,e)},m(i,r){Z(i,t,r)},p(i,r){r[0]&131072&&e!==(e=i[17]("createGeofence.review.noHeight")+"")&&Ee(t,e)},d(i){i&&_(t)}}}function CN(n){let e=n[1].current?n[21]+" ft":n[22]+" m",t;return{c(){t=he(e)},l(i){t=fe(i,e)},m(i,r){Z(i,t,r)},p(i,r){r[0]&6291458&&e!==(e=i[1].current?i[21]+" ft":i[22]+" m")&&Ee(t,e)},d(i){i&&_(t)}}}function PN(n){let e=n[17]("createGeofence.review.validFrom")+"",t,i,r=Ci(n[17],new Date(n[24]),!1)+"",s,o,a,l=n[17]("createGeofence.review.validTo")+"",h,d,m=Ci(n[17],new Date(n[25]),!1)+"",v;return{c(){t=he(e),i=ee(),s=he(r),o=A("br"),a=ee(),h=he(l),d=ee(),v=he(m)},l(k){t=fe(k,e),i=te(k),s=fe(k,r),o=R(k,"BR",{}),a=te(k),h=fe(k,l),d=te(k),v=fe(k,m)},m(k,w){Z(k,t,w),Z(k,i,w),Z(k,s,w),Z(k,o,w),Z(k,a,w),Z(k,h,w),Z(k,d,w),Z(k,v,w)},p(k,w){w[0]&131072&&e!==(e=k[17]("createGeofence.review.validFrom")+"")&&Ee(t,e),w[0]&16908288&&r!==(r=Ci(k[17],new Date(k[24]),!1)+"")&&Ee(s,r),w[0]&131072&&l!==(l=k[17]("createGeofence.review.validTo")+"")&&Ee(h,l),w[0]&33685504&&m!==(m=Ci(k[17],new Date(k[25]),!1)+"")&&Ee(v,m)},d(k){k&&(_(t),_(i),_(s),_(o),_(a),_(h),_(d),_(v))}}}function NN(n){let e,t=n[17]("createGeofence.validityPeriod.noValidityPeriod")+"",i;return{c(){e=A("i"),i=he(t)},l(r){e=R(r,"I",{});var s=T(e);i=fe(s,t),s.forEach(_)},m(r,s){Z(r,e,s),p(e,i)},p(r,s){s[0]&131072&&t!==(t=r[17]("createGeofence.validityPeriod.noValidityPeriod")+"")&&Ee(i,t)},d(r){r&&_(e)}}}function z_(n){let e,t,i=n[17]("createGeofence.smsRecipients")+"",r,s,o=Bt(n[28]),a=[];for(let l=0;l<o.length;l+=1)a[l]=G_(V_(n,o,l));return{c(){e=A("div"),t=A("p"),r=he(i),s=ee();for(let l=0;l<a.length;l+=1)a[l].c();this.h()},l(l){e=R(l,"DIV",{class:!0,style:!0});var h=T(e);t=R(h,"P",{style:!0});var d=T(t);r=fe(d,i),d.forEach(_),s=te(h);for(let m=0;m<a.length;m+=1)a[m].l(h);h.forEach(_),this.h()},h(){B(t,"font-size","14px"),B(t,"color","#888"),g(e,"class","column g8"),B(e,"margin-top","8px")},m(l,h){Z(l,e,h),p(e,t),p(t,r),p(e,s);for(let d=0;d<a.length;d+=1)a[d]&&a[d].m(e,null)},p(l,h){if(h[0]&131072&&i!==(i=l[17]("createGeofence.smsRecipients")+"")&&Ee(r,i),h[0]&268435456){o=Bt(l[28]);let d;for(d=0;d<o.length;d+=1){const m=V_(l,o,d);a[d]?a[d].p(m,h):(a[d]=G_(m),a[d].c(),a[d].m(e,null))}for(;d<a.length;d+=1)a[d].d(1);a.length=o.length}},d(l){l&&_(e),ui(a,l)}}}function G_(n){let e,t,i,r=n[41]+1+"",s,o,a,l="+372",h,d,m,v;return{c(){e=A("div"),t=A("div"),i=A("p"),s=he(r),o=ee(),a=A("p"),a.textContent=l,h=ee(),d=A("input"),v=ee(),this.h()},l(k){e=R(k,"DIV",{class:!0});var w=T(e);t=R(w,"DIV",{class:!0});var E=T(t);i=R(E,"P",{style:!0,class:!0});var I=T(i);s=fe(I,r),I.forEach(_),o=te(E),a=R(E,"P",{style:!0,class:!0,"data-svelte-h":!0}),rn(a)!=="svelte-1wxdjjd"&&(a.textContent=l),h=te(E),d=R(E,"INPUT",{style:!0,class:!0,type:!0,placeholder:!0}),E.forEach(_),v=te(w),w.forEach(_),this.h()},h(){B(i,"color","#aaa"),B(i,"padding","6px 8px 4px 6px"),B(i,"width","32px"),B(i,"text-align","right"),B(i,"font-size","14px"),g(i,"class","svelte-i0wz56"),B(a,"color","#222"),B(a,"text-align","right"),B(a,"padding","5px 8px 5px 16px"),g(a,"class","svelte-i0wz56"),B(d,"padding-left","8px"),B(d,"width","0"),B(d,"font-family","monospace"),B(d,"font-size","16px"),g(d,"class","grow svelte-i0wz56"),g(d,"type","text"),d.value=m=n[39],g(d,"placeholder","5555 5555"),d.disabled=!0,g(t,"class","input-container row grow svelte-i0wz56"),g(e,"class","row center-cross g8 width100")},m(k,w){Z(k,e,w),p(e,t),p(t,i),p(i,s),p(t,o),p(t,a),p(t,h),p(t,d),p(e,v)},p(k,w){w[0]&268435456&&m!==(m=k[39])&&d.value!==m&&(d.value=m)},d(k){k&&_(e)}}}function DN(n){let e=n[17]("createGeofence.review.noAreaOfInterest")+"",t;return{c(){t=he(e)},l(i){t=fe(i,e)},m(i,r){Z(i,t,r)},p(i,r){r[0]&131072&&e!==(e=i[17]("createGeofence.review.noAreaOfInterest")+"")&&Ee(t,e)},d(i){i&&_(t)}}}function AN(n){let e=n[17]("createGeofence.review.radius")+"",t,i,r,s;return{c(){t=he(e),i=ee(),r=he(n[31]),s=he(" m")},l(o){t=fe(o,e),i=te(o),r=fe(o,n[31]),s=fe(o," m")},m(o,a){Z(o,t,a),Z(o,i,a),Z(o,r,a),Z(o,s,a)},p(o,a){a[0]&131072&&e!==(e=o[17]("createGeofence.review.radius")+"")&&Ee(t,e),a[1]&1&&Ee(r,o[31])},d(o){o&&(_(t),_(i),_(r),_(s))}}}function H_(n){var O;let e,t,i=n[17]("createGeofence.bufferNotificationMeans")+"",r,s,o,a,l,h,d,m,v,k=n[34].length>0&&n[33]&&((O=n[29])==null?void 0:O.hasPermission(303)),w;function E(P){n[37](P)}let I={checkboxClass:"grow dont-shrink",disabled:!0,name:"buffer-notification-audiovisual",id:"buffer-notification-audiovisual",label:n[17]("createGeofence.notificationMeansType.audioVisual.title")};n[32]!==void 0&&(I.checked=n[32]),o=new so({props:I}),un.push(()=>jn(o,"checked",E));function M(P){n[38](P)}let C={checkboxClass:"grow dont-shrink",disabled:!0,name:"buffer-notification-sms",id:"buffer-notification-sms",label:n[17]("createGeofence.notificationMeansType.sms.title")};n[33]!==void 0&&(C.checked=n[33]),h=new so({props:C}),un.push(()=>jn(h,"checked",M));let D=k&&U_(n);return{c(){e=A("div"),t=A("label"),r=he(i),s=ee(),st(o.$$.fragment),l=ee(),st(h.$$.fragment),m=ee(),v=A("div"),D&&D.c(),this.h()},l(P){e=R(P,"DIV",{class:!0});var F=T(e);t=R(F,"LABEL",{style:!0,for:!0});var V=T(t);r=fe(V,i),V.forEach(_),s=te(F),ot(o.$$.fragment,F),l=te(F),ot(h.$$.fragment,F),m=te(F),v=R(F,"DIV",{class:!0,style:!0});var $=T(v);D&&D.l($),$.forEach(_),F.forEach(_),this.h()},h(){B(t,"font-size","18px"),B(t,"font-weight","bold"),g(t,"for","geofence-buffer-notification"),g(v,"class","column g8"),B(v,"margin-top","8px"),g(e,"class","column g4")},m(P,F){Z(P,e,F),p(e,t),p(t,r),p(e,s),at(o,e,null),p(e,l),at(h,e,null),p(e,m),p(e,v),D&&D.m(v,null),w=!0},p(P,F){var G;(!w||F[0]&131072)&&i!==(i=P[17]("createGeofence.bufferNotificationMeans")+"")&&Ee(r,i);const V={};F[0]&131072&&(V.label=P[17]("createGeofence.notificationMeansType.audioVisual.title")),!a&&F[1]&2&&(a=!0,V.checked=P[32],Yn(()=>a=!1)),o.$set(V);const $={};F[0]&131072&&($.label=P[17]("createGeofence.notificationMeansType.sms.title")),!d&&F[1]&4&&(d=!0,$.checked=P[33],Yn(()=>d=!1)),h.$set($),F[0]&536870912|F[1]&12&&(k=P[34].length>0&&P[33]&&((G=P[29])==null?void 0:G.hasPermission(303))),k?D?D.p(P,F):(D=U_(P),D.c(),D.m(v,null)):D&&(D.d(1),D=null)},i(P){w||(de(o.$$.fragment,P),de(h.$$.fragment,P),w=!0)},o(P){Ie(o.$$.fragment,P),Ie(h.$$.fragment,P),w=!1},d(P){P&&_(e),lt(o),lt(h),D&&D.d()}}}function U_(n){let e,t=n[17]("createGeofence.smsRecipients")+"",i,r,s,o=Bt(n[34]),a=[];for(let l=0;l<o.length;l+=1)a[l]=q_($_(n,o,l));return{c(){e=A("p"),i=he(t),r=ee();for(let l=0;l<a.length;l+=1)a[l].c();s=dt(),this.h()},l(l){e=R(l,"P",{style:!0});var h=T(e);i=fe(h,t),h.forEach(_),r=te(l);for(let d=0;d<a.length;d+=1)a[d].l(l);s=dt(),this.h()},h(){B(e,"font-size","14px"),B(e,"color","#888")},m(l,h){Z(l,e,h),p(e,i),Z(l,r,h);for(let d=0;d<a.length;d+=1)a[d]&&a[d].m(l,h);Z(l,s,h)},p(l,h){if(h[0]&131072&&t!==(t=l[17]("createGeofence.smsRecipients")+"")&&Ee(i,t),h[1]&8){o=Bt(l[34]);let d;for(d=0;d<o.length;d+=1){const m=$_(l,o,d);a[d]?a[d].p(m,h):(a[d]=q_(m),a[d].c(),a[d].m(s.parentNode,s))}for(;d<a.length;d+=1)a[d].d(1);a.length=o.length}},d(l){l&&(_(e),_(r),_(s)),ui(a,l)}}}function q_(n){let e,t,i,r=n[41]+1+"",s,o,a,l="+372",h,d,m,v;return{c(){e=A("div"),t=A("div"),i=A("p"),s=he(r),o=ee(),a=A("p"),a.textContent=l,h=ee(),d=A("input"),v=ee(),this.h()},l(k){e=R(k,"DIV",{class:!0});var w=T(e);t=R(w,"DIV",{class:!0});var E=T(t);i=R(E,"P",{style:!0,class:!0});var I=T(i);s=fe(I,r),I.forEach(_),o=te(E),a=R(E,"P",{style:!0,class:!0,"data-svelte-h":!0}),rn(a)!=="svelte-1ghe0x5"&&(a.textContent=l),h=te(E),d=R(E,"INPUT",{style:!0,class:!0,type:!0,placeholder:!0}),E.forEach(_),v=te(w),w.forEach(_),this.h()},h(){B(i,"color","#aaa"),B(i,"padding","6px 8px 4px 6px"),B(i,"width","32px"),B(i,"text-align","right"),B(i,"font-size","14px"),g(i,"class","svelte-i0wz56"),B(a,"color","#222"),B(a,"text-align","right"),B(a,"padding","5px 8px 5px 16px"),g(a,"class","svelte-i0wz56"),B(d,"padding-left","8px"),B(d,"width","0"),B(d,"font-family","monospace"),B(d,"font-size","16px"),g(d,"class","grow svelte-i0wz56"),g(d,"type","text"),d.value=m=n[39],g(d,"placeholder","5555 5555"),d.disabled=!0,g(t,"class","input-container row grow svelte-i0wz56"),g(e,"class","row center-cross g8 width100")},m(k,w){Z(k,e,w),p(e,t),p(t,i),p(i,s),p(t,o),p(t,a),p(t,h),p(t,d),p(e,v)},p(k,w){w[1]&8&&m!==(m=k[39])&&d.value!==m&&(d.value=m)},d(k){k&&_(e)}}}function RN(n){var Vt;let e,t,i,r,s=n[17]("createGeofence.review.title")+"",o,a,l,h=n[17]("createGeofence.review.desc")+"",d,m,v,k,w,E=n[17]("createGeofence.name.label")+"",I,M,C,D,O,P,F,V=n[17]("createGeofence.description.label")+"",$,G,U,H,j,Q=n[17]("createGeofence.height.title")+"",W,Y,q,ne,J,ge,ie=n[17]("createGeofence.validityPeriod.title")+"",le,pe,ye,be,re,me,ke=n[17]("createGeofence.notificationMeans")+"",X,ue,_e,oe,ae,Se,Me,we,Te=n[28].length>0&&n[27]&&((Vt=n[29])==null?void 0:Vt.hasPermission(303)),Ae,Ne,De,_t=n[17]("createGeofence.buffer.title")+"",Fe,Pe,je,Ve,Ue;function Ke(Mt,Rt){return Mt[19]?TN:MN}let We=Ke(n),ze=We(n);function Et(Mt,Rt){if(Mt[20]===as.SPECIFIED)return CN;if(Mt[20]===as.ANY_HEIGHT)return LN}let rt=Et(n),ft=rt&&rt(n);function Ut(Mt,Rt){return Mt[23]==="indefinite"?NN:PN}let Qe=Ut(n),yt=Qe(n);function mt(Mt){n[35](Mt)}let Ft={checkboxClass:"grow dont-shrink",disabled:!0,name:"primary-notification-audiovisual",id:"primary-notification-audiovisual",label:n[17]("createGeofence.notificationMeansType.audioVisual.title")};n[26]!==void 0&&(Ft.checked=n[26]),_e=new so({props:Ft}),un.push(()=>jn(_e,"checked",mt));function qt(Mt){n[36](Mt)}let vt={checkboxClass:"grow dont-shrink",disabled:!0,name:"primary-notification-sms",id:"primary-notification-sms",label:n[17]("createGeofence.notificationMeansType.sms.title")};n[27]!==void 0&&(vt.checked=n[27]),Se=new so({props:vt}),un.push(()=>jn(Se,"checked",qt));let $t=Te&&z_(n);function dn(Mt,Rt){return Mt[30]?AN:DN}let sn=dn(n),pn=sn(n),Ye=n[30]&&H_(n);return{c(){e=A("div"),t=A("div"),i=A("span"),r=A("strong"),o=he(s),a=ee(),l=A("p"),d=he(h),m=ee(),v=A("div"),k=A("div"),w=A("label"),I=he(E),M=ee(),C=A("p"),D=he(n[18]),O=ee(),P=A("div"),F=A("label"),$=he(V),G=ee(),ze.c(),U=ee(),H=A("div"),j=A("label"),W=he(Q),Y=ee(),q=A("p"),ft&&ft.c(),ne=ee(),J=A("div"),ge=A("label"),le=he(ie),pe=ee(),ye=A("p"),yt.c(),be=ee(),re=A("div"),me=A("label"),X=he(ke),ue=ee(),st(_e.$$.fragment),ae=ee(),st(Se.$$.fragment),we=ee(),$t&&$t.c(),Ae=ee(),Ne=A("div"),De=A("label"),Fe=he(_t),Pe=ee(),je=A("p"),pn.c(),Ve=ee(),Ye&&Ye.c(),this.h()},l(Mt){e=R(Mt,"DIV",{class:!0,style:!0});var Rt=T(e);t=R(Rt,"DIV",{class:!0});var gt=T(t);i=R(gt,"SPAN",{style:!0});var it=T(i);r=R(it,"STRONG",{});var St=T(r);o=fe(St,s),St.forEach(_),it.forEach(_),a=te(gt),l=R(gt,"P",{});var Jt=T(l);d=fe(Jt,h),Jt.forEach(_),gt.forEach(_),m=te(Rt),v=R(Rt,"DIV",{class:!0});var ut=T(v);k=R(ut,"DIV",{class:!0});var jt=T(k);w=R(jt,"LABEL",{style:!0,for:!0});var gn=T(w);I=fe(gn,E),gn.forEach(_),M=te(jt),C=R(jt,"P",{});var Be=T(C);D=fe(Be,n[18]),Be.forEach(_),jt.forEach(_),O=te(ut),P=R(ut,"DIV",{class:!0});var tt=T(P);F=R(tt,"LABEL",{style:!0,for:!0});var en=T(F);$=fe(en,V),en.forEach(_),G=te(tt),ze.l(tt),tt.forEach(_),U=te(ut),H=R(ut,"DIV",{class:!0});var Fn=T(H);j=R(Fn,"LABEL",{style:!0,for:!0});var Vn=T(j);W=fe(Vn,Q),Vn.forEach(_),Y=te(Fn),q=R(Fn,"P",{});var Zt=T(q);ft&&ft.l(Zt),Zt.forEach(_),Fn.forEach(_),ne=te(ut),J=R(ut,"DIV",{class:!0});var cn=T(J);ge=R(cn,"LABEL",{style:!0,for:!0});var Un=T(ge);le=fe(Un,ie),Un.forEach(_),pe=te(cn),ye=R(cn,"P",{});var mn=T(ye);yt.l(mn),mn.forEach(_),cn.forEach(_),be=te(ut),re=R(ut,"DIV",{class:!0});var tn=T(re);me=R(tn,"LABEL",{style:!0,for:!0});var En=T(me);X=fe(En,ke),En.forEach(_),ue=te(tn),ot(_e.$$.fragment,tn),ae=te(tn),ot(Se.$$.fragment,tn),we=te(tn),$t&&$t.l(tn),tn.forEach(_),Ae=te(ut),Ne=R(ut,"DIV",{class:!0});var Ln=T(Ne);De=R(Ln,"LABEL",{style:!0,for:!0});var xt=T(De);Fe=fe(xt,_t),xt.forEach(_),Pe=te(Ln),je=R(Ln,"P",{});var qe=T(je);pn.l(qe),qe.forEach(_),Ln.forEach(_),Ve=te(ut),Ye&&Ye.l(ut),ut.forEach(_),Rt.forEach(_),this.h()},h(){B(i,"font-size","20px"),g(t,"class","column g8"),B(w,"font-size","18px"),B(w,"font-weight","600"),g(w,"for","geofence-name"),g(k,"class","column g4"),B(F,"font-size","18px"),B(F,"font-weight","bold"),g(F,"for","geofence-name"),g(P,"class","column g4"),B(j,"font-size","18px"),B(j,"font-weight","bold"),g(j,"for","geofence-height-range"),g(H,"class","column g4"),B(ge,"font-size","18px"),B(ge,"font-weight","bold"),g(ge,"for","geofence-validity-period"),g(J,"class","column g4"),B(me,"font-size","18px"),B(me,"font-weight","bold"),g(me,"for","geofence-primary-notification"),g(re,"class","column g4"),B(De,"font-size","18px"),B(De,"font-weight","bold"),g(De,"for","geofence-buffer"),g(Ne,"class","column g4"),g(v,"class","column g16"),g(e,"class","column g16"),B(e,"padding-inline","16px")},m(Mt,Rt){Z(Mt,e,Rt),p(e,t),p(t,i),p(i,r),p(r,o),p(t,a),p(t,l),p(l,d),p(e,m),p(e,v),p(v,k),p(k,w),p(w,I),p(k,M),p(k,C),p(C,D),p(v,O),p(v,P),p(P,F),p(F,$),p(P,G),ze.m(P,null),p(v,U),p(v,H),p(H,j),p(j,W),p(H,Y),p(H,q),ft&&ft.m(q,null),p(v,ne),p(v,J),p(J,ge),p(ge,le),p(J,pe),p(J,ye),yt.m(ye,null),p(v,be),p(v,re),p(re,me),p(me,X),p(re,ue),at(_e,re,null),p(re,ae),at(Se,re,null),p(re,we),$t&&$t.m(re,null),p(v,Ae),p(v,Ne),p(Ne,De),p(De,Fe),p(Ne,Pe),p(Ne,je),pn.m(je,null),p(v,Ve),Ye&&Ye.m(v,null),Ue=!0},p(Mt,Rt){var St;(!Ue||Rt[0]&131072)&&s!==(s=Mt[17]("createGeofence.review.title")+"")&&Ee(o,s),(!Ue||Rt[0]&131072)&&h!==(h=Mt[17]("createGeofence.review.desc")+"")&&Ee(d,h),(!Ue||Rt[0]&131072)&&E!==(E=Mt[17]("createGeofence.name.label")+"")&&Ee(I,E),(!Ue||Rt[0]&262144)&&Ee(D,Mt[18]),(!Ue||Rt[0]&131072)&&V!==(V=Mt[17]("createGeofence.description.label")+"")&&Ee($,V),We===(We=Ke(Mt))&&ze?ze.p(Mt,Rt):(ze.d(1),ze=We(Mt),ze&&(ze.c(),ze.m(P,null))),(!Ue||Rt[0]&131072)&&Q!==(Q=Mt[17]("createGeofence.height.title")+"")&&Ee(W,Q),rt===(rt=Et(Mt))&&ft?ft.p(Mt,Rt):(ft&&ft.d(1),ft=rt&&rt(Mt),ft&&(ft.c(),ft.m(q,null))),(!Ue||Rt[0]&131072)&&ie!==(ie=Mt[17]("createGeofence.validityPeriod.title")+"")&&Ee(le,ie),Qe===(Qe=Ut(Mt))&&yt?yt.p(Mt,Rt):(yt.d(1),yt=Qe(Mt),yt&&(yt.c(),yt.m(ye,null))),(!Ue||Rt[0]&131072)&&ke!==(ke=Mt[17]("createGeofence.notificationMeans")+"")&&Ee(X,ke);const gt={};Rt[0]&131072&&(gt.label=Mt[17]("createGeofence.notificationMeansType.audioVisual.title")),!oe&&Rt[0]&67108864&&(oe=!0,gt.checked=Mt[26],Yn(()=>oe=!1)),_e.$set(gt);const it={};Rt[0]&131072&&(it.label=Mt[17]("createGeofence.notificationMeansType.sms.title")),!Me&&Rt[0]&134217728&&(Me=!0,it.checked=Mt[27],Yn(()=>Me=!1)),Se.$set(it),Rt[0]&939524096&&(Te=Mt[28].length>0&&Mt[27]&&((St=Mt[29])==null?void 0:St.hasPermission(303))),Te?$t?$t.p(Mt,Rt):($t=z_(Mt),$t.c(),$t.m(re,null)):$t&&($t.d(1),$t=null),(!Ue||Rt[0]&131072)&&_t!==(_t=Mt[17]("createGeofence.buffer.title")+"")&&Ee(Fe,_t),sn===(sn=dn(Mt))&&pn?pn.p(Mt,Rt):(pn.d(1),pn=sn(Mt),pn&&(pn.c(),pn.m(je,null))),Mt[30]?Ye?(Ye.p(Mt,Rt),Rt[0]&1073741824&&de(Ye,1)):(Ye=H_(Mt),Ye.c(),de(Ye,1),Ye.m(v,null)):Ye&&(bt(),Ie(Ye,1,1,()=>{Ye=null}),wt())},i(Mt){Ue||(de(_e.$$.fragment,Mt),de(Se.$$.fragment,Mt),de(Ye),Ue=!0)},o(Mt){Ie(_e.$$.fragment,Mt),Ie(Se.$$.fragment,Mt),Ie(Ye),Ue=!1},d(Mt){Mt&&_(e),ze.d(),ft&&ft.d(),yt.d(),lt(_e),lt(Se),$t&&$t.d(),pn.d(),Ye&&Ye.d()}}}function ON(n,e,t){let i,r,s=$e,o=()=>(s(),s=Dt(Fe,vt=>t(18,r=vt)),Fe),a,l=$e,h=()=>(l(),l=Dt(Pe,vt=>t(19,a=vt)),Pe),d,m=$e,v=()=>(m(),m=Dt(Ae,vt=>t(20,d=vt)),Ae),k,w=$e,E=()=>(w(),w=Dt(_t,vt=>t(21,k=vt)),_t),I,M=$e,C=()=>(M(),M=Dt(De,vt=>t(22,I=vt)),De),D,O=$e,P=()=>(O(),O=Dt(je,vt=>t(23,D=vt)),je),F,V=$e,$=()=>(V(),V=Dt(Ve,vt=>t(24,F=vt)),Ve),G,U=$e,H=()=>(U(),U=Dt(Ue,vt=>t(25,G=vt)),Ue),j,Q=$e,W=()=>(Q(),Q=Dt(Ke,vt=>t(26,j=vt)),Ke),Y,q=$e,ne=()=>(q(),q=Dt(We,vt=>t(27,Y=vt)),We),J,ge=$e,ie=()=>(ge(),ge=Dt(ze,vt=>t(28,J=vt)),ze),le,pe,ye=$e,be=()=>(ye(),ye=Dt(Ut,vt=>t(30,pe=vt)),Ut),re,me=$e,ke=()=>(me(),me=Dt(Qe,vt=>t(31,re=vt)),Qe),X,ue=$e,_e=()=>(ue(),ue=Dt(Et,vt=>t(32,X=vt)),Et),oe,ae=$e,Se=()=>(ae(),ae=Dt(rt,vt=>t(33,oe=vt)),rt),Me,we=$e,Te=()=>(we(),we=Dt(ft,vt=>t(34,Me=vt)),ft);He(n,Nn,vt=>t(17,i=vt)),He(n,Li,vt=>t(29,le=vt)),n.$$.on_destroy.push(()=>s()),n.$$.on_destroy.push(()=>l()),n.$$.on_destroy.push(()=>m()),n.$$.on_destroy.push(()=>w()),n.$$.on_destroy.push(()=>M()),n.$$.on_destroy.push(()=>O()),n.$$.on_destroy.push(()=>V()),n.$$.on_destroy.push(()=>U()),n.$$.on_destroy.push(()=>Q()),n.$$.on_destroy.push(()=>q()),n.$$.on_destroy.push(()=>ge()),n.$$.on_destroy.push(()=>ye()),n.$$.on_destroy.push(()=>me()),n.$$.on_destroy.push(()=>ue()),n.$$.on_destroy.push(()=>ae()),n.$$.on_destroy.push(()=>we());let{heightRangeType:Ae}=e;v();let{isMinHeightInFeet:Ne}=e,{minHeightMeters:De}=e;C();let{minHeightFeet:_t}=e;E();let{name:Fe}=e;o();let{description:Pe}=e;h();let{validityPeriod:je}=e;P();let{validFrom:Ve}=e;$();let{validTo:Ue}=e;H();let{primaryNotificationAudiovisual:Ke}=e;W();let{primaryNotificationSms:We}=e;ne();let{primarySmsRecipients:ze}=e;ie();let{bufferNotificationAudiovisual:Et}=e;_e();let{bufferNotificationSms:rt}=e;Se();let{bufferSmsRecipients:ft}=e;Te();let{hasBuffer:Ut}=e;be();let{bufferRadius:Qe}=e;ke();function yt(vt){j=vt,Ke.set(j)}function mt(vt){Y=vt,We.set(Y)}function Ft(vt){X=vt,Et.set(X)}function qt(vt){oe=vt,rt.set(oe)}return n.$$set=vt=>{"heightRangeType"in vt&&v(t(0,Ae=vt.heightRangeType)),"isMinHeightInFeet"in vt&&t(1,Ne=vt.isMinHeightInFeet),"minHeightMeters"in vt&&C(t(2,De=vt.minHeightMeters)),"minHeightFeet"in vt&&E(t(3,_t=vt.minHeightFeet)),"name"in vt&&o(t(4,Fe=vt.name)),"description"in vt&&h(t(5,Pe=vt.description)),"validityPeriod"in vt&&P(t(6,je=vt.validityPeriod)),"validFrom"in vt&&$(t(7,Ve=vt.validFrom)),"validTo"in vt&&H(t(8,Ue=vt.validTo)),"primaryNotificationAudiovisual"in vt&&W(t(9,Ke=vt.primaryNotificationAudiovisual)),"primaryNotificationSms"in vt&&ne(t(10,We=vt.primaryNotificationSms)),"primarySmsRecipients"in vt&&ie(t(11,ze=vt.primarySmsRecipients)),"bufferNotificationAudiovisual"in vt&&_e(t(12,Et=vt.bufferNotificationAudiovisual)),"bufferNotificationSms"in vt&&Se(t(13,rt=vt.bufferNotificationSms)),"bufferSmsRecipients"in vt&&Te(t(14,ft=vt.bufferSmsRecipients)),"hasBuffer"in vt&&be(t(15,Ut=vt.hasBuffer)),"bufferRadius"in vt&&ke(t(16,Qe=vt.bufferRadius))},[Ae,Ne,De,_t,Fe,Pe,je,Ve,Ue,Ke,We,ze,Et,rt,ft,Ut,Qe,i,r,a,d,k,I,D,F,G,j,Y,J,le,pe,re,X,oe,Me,yt,mt,Ft,qt]}class xN extends Wt{constructor(e){super(),Xt(this,e,ON,RN,zt,{heightRangeType:0,isMinHeightInFeet:1,minHeightMeters:2,minHeightFeet:3,name:4,description:5,validityPeriod:6,validFrom:7,validTo:8,primaryNotificationAudiovisual:9,primaryNotificationSms:10,primarySmsRecipients:11,bufferNotificationAudiovisual:12,bufferNotificationSms:13,bufferSmsRecipients:14,hasBuffer:15,bufferRadius:16},null,[-1,-1])}}function FN(n){let e,t;return e=new xN({props:{heightRangeType:n[24],isMinHeightInFeet:n[27],minHeightMeters:n[25],minHeightFeet:n[26],name:n[16],description:n[17],validityPeriod:n[28],validFrom:n[29],validTo:n[30],primaryNotificationAudiovisual:n[34],primaryNotificationSms:n[35],primarySmsRecipients:n[38],bufferNotificationAudiovisual:n[39],bufferNotificationSms:n[40],bufferSmsRecipients:n[42],hasBuffer:n[31],bufferRadius:n[32]}}),{c(){st(e.$$.fragment)},l(i){ot(e.$$.fragment,i)},m(i,r){at(e,i,r),t=!0},p:$e,i(i){t||(de(e.$$.fragment,i),t=!0)},o(i){Ie(e.$$.fragment,i),t=!1},d(i){lt(e,i)}}}function BN(n){let e,t;return e=new IN({props:{validityPeriod:n[28],validFrom:n[29],validTo:n[30]}}),{c(){st(e.$$.fragment)},l(i){ot(e.$$.fragment,i)},m(i,r){at(e,i,r),t=!0},p:$e,i(i){t||(de(e.$$.fragment,i),t=!0)},o(i){Ie(e.$$.fragment,i),t=!1},d(i){lt(e,i)}}}function $N(n){let e,t;return e=new dN({props:{hasBuffer:n[31],bufferRadius:n[32],bufferNotificationAudiovisual:n[39],bufferNotificationSms:n[40],geofence:n[1],availableBufferSmsTemplates:n[41],smsLanguage:n[37],bufferSmsRecipients:n[42],availableFenceSmsTemplates:n[36],showValidationErrors:n[14]}}),{c(){st(e.$$.fragment)},l(i){ot(e.$$.fragment,i)},m(i,r){at(e,i,r),t=!0},p(i,r){const s={};r[0]&2&&(s.geofence=i[1]),e.$set(s)},i(i){t||(de(e.$$.fragment,i),t=!0)},o(i){Ie(e.$$.fragment,i),t=!1},d(i){lt(e,i)}}}function VN(n){let e,t;return e=new cN({props:{hasBuffer:n[31],bufferRadius:n[32],bufferNotificationAudiovisual:n[39],bufferNotificationSms:n[40],geofence:n[1],availableBufferSmsTemplates:n[41],smsLanguage:n[37],bufferSmsRecipients:n[42],availableFenceSmsTemplates:n[36],updateGeofence:n[33],enforceInputInteger:p0}}),{c(){st(e.$$.fragment)},l(i){ot(e.$$.fragment,i)},m(i,r){at(e,i,r),t=!0},p(i,r){const s={};r[0]&2&&(s.geofence=i[1]),e.$set(s)},i(i){t||(de(e.$$.fragment,i),t=!0)},o(i){Ie(e.$$.fragment,i),t=!1},d(i){lt(e,i)}}}function zN(n){let e,t;return e=new oN({props:{geofence:n[1],primaryNotificationAudiovisual:n[34],primaryNotificationSms:n[35],smsLanguage:n[37],availableFenceSmsTemplates:n[36],primarySmsRecipients:n[38],showValidationErrors:n[13]}}),{c(){st(e.$$.fragment)},l(i){ot(e.$$.fragment,i)},m(i,r){at(e,i,r),t=!0},p(i,r){const s={};r[0]&2&&(s.geofence=i[1]),e.$set(s)},i(i){t||(de(e.$$.fragment,i),t=!0)},o(i){Ie(e.$$.fragment,i),t=!1},d(i){lt(e,i)}}}function GN(n){let e,t;return e=new wL({props:{heightRangeType:n[24],geofence:n[1],enforceInputInteger:p0,isMinHeightInFeet:n[27],minHeightMeters:n[25],minHeightFeet:n[26]}}),{c(){st(e.$$.fragment)},l(i){ot(e.$$.fragment,i)},m(i,r){at(e,i,r),t=!0},p(i,r){const s={};r[0]&2&&(s.geofence=i[1]),e.$set(s)},i(i){t||(de(e.$$.fragment,i),t=!0)},o(i){Ie(e.$$.fragment,i),t=!1},d(i){lt(e,i)}}}function HN(n){let e,t;return e=new ZL({props:{map:n[0],shape:n[15],displayAsMgrs:n[18],polygonCoordinates:n[19],polygonCoordinatesMgrs:n[20],circleCoordinate:n[21],circleCoordinateMgrs:n[22],circleRadius:n[23],highlightedPointIndex:n[2],updateGeofence:n[33],enforceInputInteger:p0}}),{c(){st(e.$$.fragment)},l(i){ot(e.$$.fragment,i)},m(i,r){at(e,i,r),t=!0},p(i,r){const s={};r[0]&1&&(s.map=i[0]),r[0]&4&&(s.highlightedPointIndex=i[2]),e.$set(s)},i(i){t||(de(e.$$.fragment,i),t=!0)},o(i){Ie(e.$$.fragment,i),t=!1},d(i){lt(e,i)}}}function UN(n){let e,t,i,r,s,o;return e=new pL({props:{name:n[16]}}),s=new WL({props:{description:n[17]}}),{c(){st(e.$$.fragment),t=ee(),i=A("div"),r=ee(),st(s.$$.fragment),this.h()},l(a){ot(e.$$.fragment,a),t=te(a),i=R(a,"DIV",{class:!0}),T(i).forEach(_),r=te(a),ot(s.$$.fragment,a),this.h()},h(){g(i,"class","sep")},m(a,l){at(e,a,l),Z(a,t,l),Z(a,i,l),Z(a,r,l),at(s,a,l),o=!0},p:$e,i(a){o||(de(e.$$.fragment,a),de(s.$$.fragment,a),o=!0)},o(a){Ie(e.$$.fragment,a),Ie(s.$$.fragment,a),o=!1},d(a){a&&(_(t),_(i),_(r)),lt(e,a),lt(s,a)}}}function qN(n){let e,t,i,r,s=(n[9].type===Tt.EditGeofence?n[10]("createGeofence.editGeofence"):n[10]("createGeofence.createGeofence"))+"",o,a,l,h='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M19 5L5 19M5.00001 5L19 19" stroke="#fff" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>',d,m,v,k,w,E,I,M,C,D,O,P,F,V;m=new kN({props:{screen:n[11],hasBuffer:n[31],maxAllowedScreenIndex:n[4],screenOptions:n[5],maxVisitedScreenIndex:n[12]}});const $=[UN,HN,GN,zN,VN,$N,BN,FN],G=[];function U(H,j){return H[6]===ln.NAME?0:H[6]===ln.AREA?1:H[6]===ln.HEIGHT?2:H[6]===ln.NOTIFICATION?3:H[6]===ln.BUFFER?4:H[6]===ln.BUFFER_NOTIFICATION?5:H[6]===ln.VALIDITY_PERIOD?6:H[6]===ln.REVIEW?7:-1}return~(E=U(n))&&(I=G[E]=$[E](n)),O=new _N({props:{isEditing:n[3],screen:n[11],onAdvanceScreenClick:n[45],submit:n[44],goBackScreen:n[46],hasBuffer:n[31],isNextDisabled:n[7],hasInvalidSteps:n[8]}}),{c(){e=A("div"),t=A("div"),i=A("div"),r=A("p"),o=he(s),a=ee(),l=A("a"),l.innerHTML=h,d=ee(),st(m.$$.fragment),v=ee(),k=A("div"),w=A("div"),I&&I.c(),M=ee(),C=A("div"),D=ee(),st(O.$$.fragment),this.h()},l(H){e=R(H,"DIV",{id:!0,class:!0});var j=T(e);t=R(j,"DIV",{class:!0,style:!0});var Q=T(t);i=R(Q,"DIV",{class:!0});var W=T(i);r=R(W,"P",{class:!0});var Y=T(r);o=fe(Y,s),Y.forEach(_),a=te(W),l=R(W,"A",{href:!0,style:!0,"data-svelte-h":!0}),rn(l)!=="svelte-zhuppa"&&(l.innerHTML=h),W.forEach(_),d=te(Q),ot(m.$$.fragment,Q),Q.forEach(_),v=te(j),k=R(j,"DIV",{class:!0});var q=T(k);w=R(q,"DIV",{class:!0,style:!0});var ne=T(w);I&&I.l(ne),ne.forEach(_),M=te(q),C=R(q,"DIV",{class:!0,style:!0}),T(C).forEach(_),D=te(q),ot(O.$$.fragment,q),q.forEach(_),j.forEach(_),this.h()},h(){g(r,"class","title grow svelte-11tc5ef"),g(l,"href",""),B(l,"height","min-content"),B(l,"display","flex"),B(l,"align-items","center"),g(i,"class","row center-cross g8 grow"),g(t,"class","header column g16 p16"),B(t,"background-color","#445"),B(t,"position","sticky"),B(t,"top","0px"),B(t,"padding-block","12px"),g(w,"class","column g16"),B(w,"padding-block","16px"),g(C,"class","sep"),B(C,"border-bottom","transparent"),g(k,"class","panel-scrollable"),g(e,"id","create-geofence"),g(e,"class","panel column rel svelte-11tc5ef")},m(H,j){Z(H,e,j),p(e,t),p(t,i),p(i,r),p(r,o),p(i,a),p(i,l),p(t,d),at(m,t,null),p(e,v),p(e,k),p(k,w),~E&&G[E].m(w,null),p(k,M),p(k,C),p(k,D),at(O,k,null),P=!0,F||(V=nt(l,"click",ro(nn.close)),F=!0)},p(H,j){(!P||j[0]&1536)&&s!==(s=(H[9].type===Tt.EditGeofence?H[10]("createGeofence.editGeofence"):H[10]("createGeofence.createGeofence"))+"")&&Ee(o,s);const Q={};j[0]&16&&(Q.maxAllowedScreenIndex=H[4]),j[0]&32&&(Q.screenOptions=H[5]),m.$set(Q);let W=E;E=U(H),E===W?~E&&G[E].p(H,j):(I&&(bt(),Ie(G[W],1,1,()=>{G[W]=null}),wt()),~E?(I=G[E],I?I.p(H,j):(I=G[E]=$[E](H),I.c()),de(I,1),I.m(w,null)):I=null);const Y={};j[0]&8&&(Y.isEditing=H[3]),j[0]&128&&(Y.isNextDisabled=H[7]),j[0]&256&&(Y.hasInvalidSteps=H[8]),O.$set(Y)},i(H){P||(de(m.$$.fragment,H),de(I),de(O.$$.fragment,H),P=!0)},o(H){Ie(m.$$.fragment,H),Ie(I),Ie(O.$$.fragment,H),P=!1},d(H){H&&_(e),lt(m),~E&&G[E].d(),lt(O),F=!1,V()}}}const ju=.3048;function p0(n){n.target.value=n.target.value.replace(/[^0-9]/g,"")}function ZN(n,e,t){var gt,it,St,Jt,ut,jt,gn;let i,r,s,o,a,l,h,d,m=$e,v=()=>(m(),m=Dt(ie,Be=>t(54,d=Be)),ie),k,w,E,I,M,C,D,O,P,F,V,$,G,U,H,j,Q,W,Y,q;He(n,nn,Be=>t(9,Y=Be)),He(n,Nn,Be=>t(10,q=Be)),n.$$.on_destroy.push(()=>m());let{map:ne}=e,{geofencesService:J}=e,ge=new Ot(ln.AREA);He(n,ge,Be=>t(6,k=Be));let{geofence:ie}=e;v();let{highlightedPointIndex:le=new Ot(null)}=e,{resultCallback:pe}=e,{isEditing:ye}=e,{isContinuing:be}=e,re=new Ot(d.maxVisitedScreenIndex||0);He(n,re,Be=>t(63,F=Be)),mi(()=>{if(!ye){const Be=ie.subscribe(tt=>{J.setInProgressGeofence(tt)});return()=>{Be()}}});const me=Pn(!1),ke=Pn(!1),X=new Ot(d.fence.h?Fi.CIRCLE:Fi.POLYGON),ue=new Bm(ie,"name");He(n,ue,Be=>t(62,P=Be));const _e=new Bm(ie,"description"),oe=new Ot(!1);let ae,Se,Me;if(X.current===Fi.POLYGON){if(d.fence.v&&d.fence.v.length>=3)ae=d.fence.v;else{const Be=((it=(gt=d.fence.v)==null?void 0:gt[0])==null?void 0:it.lat)??ne.getCenter().lat,tt=((Jt=(St=d.fence.v)==null?void 0:St[0])==null?void 0:Jt.lng)??ne.getCenter().lng,en=.005;ae=[{lat:Be+en,lng:tt+en},{lat:Be+en,lng:tt-en},{lat:Be-en,lng:tt-en},{lat:Be-en,lng:tt+en}]}Se=((ut=d.fence.v)==null?void 0:ut[0])??ne.getCenter(),Me=Ds}else{(jt=d.fence.v)!=null&&jt[0]&&typeof d.fence.h=="number"&&d.fence.h>0?(Se=d.fence.v[0],Me=d.fence.h):(Se=((gn=d.fence.v)==null?void 0:gn[0])??ne.getCenter(),Me=Ds);const Be=Se.lat,tt=Se.lng,en=.005;ae=[{lat:Be+en,lng:tt+en},{lat:Be+en,lng:tt-en},{lat:Be-en,lng:tt-en},{lat:Be-en,lng:tt+en}]}const we=new Ot(ae),Te=new Ot(we.current.map(_s)),Ae=new Ot(Se),Ne=new Ot(_s(Ae.current)),De=new Ot(Me),_t=new Ot(d.minHeight?as.SPECIFIED:as.ANY_HEIGHT);He(n,_t,Be=>t(71,W=Be));const Fe=new gL(d.minHeight||100),Pe=Fe.createView({read:Be=>Math.max(1,Be),set:Be=>Math.max(1,Math.round(Be))});He(n,Pe,Be=>t(68,H=Be));const je=Fe.createView({read:Be=>Math.ceil(Math.max(1,Be)/ju),set:Be=>Math.max(1,Math.round(Be*ju))});He(n,je,Be=>t(69,j=Be));const Ve=new Ot(!1);He(n,Ve,Be=>t(70,Q=Be));const Ue=new Ot(d.expirationTime?"fixed":"indefinite"),Ke=new Ot(d.startTime?new Date(d.startTime):new Date);He(n,Ke,Be=>t(61,O=Be));const We=new Ot(d.expirationTime?new Date(d.expirationTime):new Date(new Date().setHours(23,59,0,0)));He(n,We,Be=>t(60,D=Be));const ze=new Ot(!1);He(n,ze,Be=>t(64,V=Be));const Et=new Ot(d.bufferOffset||0);function rt(){oe.current?(we.set(Te.current.map(Da)),Ae.set(Da(Ne.current))):(Te.set(we.current.map(_s)),Ne.set(_s(Ae.current))),ze.current&&Et.current<to&&Et.set(to),ie.update(Be=>({...Be,bufferOffset:ze.current?Et.current:0,fence:{h:X.current===Fi.CIRCLE?De.current||Ds:0,v:X.current===Fi.CIRCLE?[Ae.current]:we.current}}))}let ft=new Ot(!ye&&!be||(d.intrusionContacts?d.intrusionContacts.some(Be=>Be.contactType===mr.AUDIOVISUAL&&!Be.isBuffered):!1));He(n,ft,Be=>t(59,C=Be));let Ut=Pn(!!d.smsLanguage);He(n,Ut,Be=>t(58,M=Be));const Qe=Ra(J.smsTemplates,Be=>(Be==null?void 0:Be.get("f"))||[]);let yt=new Ot(d.smsLanguage||"ET");He(n,yt,Be=>t(55,w=Be));let mt=new Ot((d.intrusionContacts?d.intrusionContacts.filter(Be=>Be.contactType==mr.PHONE&&!Be.isBuffered).map(Be=>{var tt;return((tt=Be.contact)==null?void 0:tt.replace(/^\+372 ?/,""))??""}):[]).filter(Be=>Be!==""));He(n,mt,Be=>t(66,G=Be)),mt.current.length===0&&mt.set([""]);let Ft=new Ot(!ye&&!be||(d.intrusionContacts?d.intrusionContacts.some(Be=>Be.contactType===mr.AUDIOVISUAL&&Be.isBuffered):!1));He(n,Ft,Be=>t(57,I=Be));let qt=Pn(!!d.smsLanguage);He(n,qt,Be=>t(56,E=Be));const vt=Ra(J.smsTemplates,Be=>(Be==null?void 0:Be.get("b"))||[]);let $t=new Ot((d.intrusionContacts?d.intrusionContacts.filter(Be=>Be.contactType==mr.PHONE&&Be.isBuffered).map(Be=>{var tt;return(tt=Be.contact)==null?void 0:tt.replace(/^\+372 ?/,"")}):[]).filter(Be=>!!Be));He(n,$t,Be=>t(65,$=Be)),$t.current.length===0&&$t.set([""]);let dn=Pn(ye&&JSON.stringify($t.current)!==JSON.stringify(mt.current)&&!($t.current.length===1&&$t.current[0]===""));He(n,dn,Be=>t(67,U=Be));function sn(){let Be={name:ue.current,description:_e.current&&_e.current.trim(),fence:{h:X.current===Fi.CIRCLE?De.current:0,v:X.current===Fi.CIRCLE?[Ae.current]:we.current},intrusionContacts:[...mt.current.map(tt=>({contactType:mr.PHONE,contact:tt,isBuffered:!1})).filter(tt=>!!tt.contact).map(tt=>({...tt,contact:"+372 "+tt.contact})),...$t.current.map(tt=>({contactType:mr.PHONE,contact:tt,isBuffered:!0})).filter(tt=>!!tt.contact).map(tt=>({...tt,contact:"+372 "+tt.contact})),...ft.current?[{contactType:mr.AUDIOVISUAL,contact:void 0,isBuffered:!1}]:[],...Ft.current?[{contactType:mr.AUDIOVISUAL,contact:void 0,isBuffered:!0}]:[]],maxHeight:null,active:!0,smsLanguage:M?w:d.smsLanguage||"ET"};return _t.current===as.SPECIFIED?Be.minHeight=Ve.current?Math.round(je.current()*ju):Pe.current():Be.minHeight=0,Et.current&&ze.current?Be.bufferOffset=Et.current:Be.bufferOffset=0,Ue.current==="fixed"&&(Be.expirationTime=We.current.getTime(),Be.startTime=Ke.current.getTime()),Be}function pn(){if(!d.isValid)return!1;const Be=sn();return pe&&pe(Be),console.log("Generated JSON:",Be),nn.close(),!0}function Ye(){k===ln.NOTIFICATION&&h&&M?me.set(!0):k===ln.BUFFER_NOTIFICATION&&h&&E&&ke.set(!0),!h&&Vt()}function Vt(){ge.update(Be=>Be===ln.AREA?ln.HEIGHT:Be===ln.HEIGHT?ln.NAME:Be===ln.NAME?ln.VALIDITY_PERIOD:Be===ln.VALIDITY_PERIOD?ln.NOTIFICATION:Be===ln.NOTIFICATION?ln.BUFFER:Be===ln.BUFFER?ze.current?ln.BUFFER_NOTIFICATION:ln.REVIEW:Be===ln.BUFFER_NOTIFICATION?ln.REVIEW:(Be===ln.REVIEW,pn()&&nn.close(),ln.REVIEW))}function Mt(){ge.update(Be=>Be===ln.REVIEW?ze.current?ln.BUFFER_NOTIFICATION:ln.BUFFER:Be===ln.BUFFER_NOTIFICATION?ln.BUFFER:Be===ln.BUFFER?ln.NOTIFICATION:Be===ln.NOTIFICATION?ln.VALIDITY_PERIOD:Be===ln.VALIDITY_PERIOD?ln.NAME:Be===ln.NAME?ln.HEIGHT:Be===ln.HEIGHT?ln.AREA:Be)}let Rt=!1;return n.$$set=Be=>{"map"in Be&&t(0,ne=Be.map),"geofencesService"in Be&&t(47,J=Be.geofencesService),"geofence"in Be&&v(t(1,ie=Be.geofence)),"highlightedPointIndex"in Be&&t(2,le=Be.highlightedPointIndex),"resultCallback"in Be&&t(48,pe=Be.resultCallback),"isEditing"in Be&&t(3,ye=Be.isEditing),"isContinuing"in Be&&t(49,be=Be.isContinuing)},n.$$.update=()=>{var Be,tt,en,Fn,Vn;if(n.$$.dirty[0]&66&&ie.update(Zt=>({...Zt,isShapeLocked:k!==ln.AREA,isBufferLocked:k!==ln.BUFFER})),n.$$.dirty[0]&3|n.$$.dirty[1]&1769996288|n.$$.dirty[2]&960){const Zt=d,cn=!!(Zt.fence.h&&Zt.fence.h>0);if(X.current===Fi.CIRCLE!==cn&&X.set(cn?Fi.CIRCLE:Fi.POLYGON),ie.update(mn=>({...mn,minHeight:W===as.SPECIFIED?Q?Math.round(j*ju):H:0,startTime:Ue.current==="fixed"?O.toISOString():null,expirationTime:Ue.current==="fixed"?D.toISOString():null,intrusionContacts:[...mt.current.map(tn=>({contactType:mr.PHONE,contact:tn,isBuffered:!1})).filter(tn=>!!tn.contact).map(tn=>({...tn,contact:"+372 "+tn.contact})),...$t.current.map(tn=>({contactType:mr.PHONE,contact:tn,isBuffered:!0})).filter(tn=>!!tn.contact).map(tn=>({...tn,contact:"+372 "+tn.contact})),...ft.current?[{contactType:mr.AUDIOVISUAL,contact:void 0,isBuffered:!1}]:[],...Ft.current?[{contactType:mr.AUDIOVISUAL,contact:void 0,isBuffered:!0}]:[]],smsLanguage:M?w:d.smsLanguage||"ET"})),cn)(Be=Zt.fence.v)!=null&&Be[0]&&(Ae.set(Zt.fence.v[0]),Ne.set(_s(Zt.fence.v[0]))),De.set(Zt.fence.h||Ds);else{if(Zt.fence.v){let mn=[...Zt.fence.v];if(mn.length>3){const tn=mn[0],En=mn[mn.length-1];tn.lat===En.lat&&tn.lng===En.lng&&(mn=mn.slice(0,-1))}if(mn.length>=3){const tn=we.current;(tn.length!==mn.length||tn.some((En,Ln)=>En.lat!==mn[Ln].lat||En.lng!==mn[Ln].lng))&&we.set(mn)}else if(X.current===Fi.POLYGON&&we.current.length<3){const tn=((en=(tt=Zt.fence.v)==null?void 0:tt[0])==null?void 0:en.lat)??ne.getCenter().lat,En=((Vn=(Fn=Zt.fence.v)==null?void 0:Fn[0])==null?void 0:Vn.lng)??ne.getCenter().lng,Ln=.005;we.set([{lat:tn+Ln,lng:En+Ln},{lat:tn+Ln,lng:En-Ln},{lat:tn-Ln,lng:En-Ln},{lat:tn-Ln,lng:En+Ln}])}}Te.set(we.current.map(_s))}const Un=Zt.bufferOffset??0;ze.current&&Et.set(Un),ze.set(Un!==0)}if(n.$$.dirty[2]&48&&(U||$t.set(G)),n.$$.dirty[2]&56&&!U&&JSON.stringify($)!==JSON.stringify(G)&&dn.set(!0),n.$$.dirty[2]&16&&t(53,i=G&&G.length>0&&G.some(Zt=>Zt&&Zt.trim()!=="")),n.$$.dirty[2]&8&&t(52,r=$&&$.length>0&&$.some(Zt=>Zt&&Zt.trim()!=="")),n.$$.dirty[2]&4&&t(5,s=V?Object.values(ln):Object.values(ln).filter(Zt=>Zt!==ln.BUFFER_NOTIFICATION)),n.$$.dirty[0]&98|n.$$.dirty[2]&2){const Zt=s.indexOf(k);Zt>F&&(re.set(Zt),ie.update(cn=>({...cn,maxVisitedScreenIndex:Zt})))}if(n.$$.dirty[1]&2145386496|n.$$.dirty[2]&1&&t(4,o=(()=>{let Zt=0;return!d.isValid||(Zt=1,Zt=2,!P||P.trim()==="")||(Zt=3,!O||!D||O>=D)||(Zt=4,M&&(!w||!i))||!C&&!M||(Zt=5,Zt=6,E&&(!w||!r))||!I&&!E||(Zt=7,Zt=8),Zt})()),n.$$.dirty[1]&2145386496|n.$$.dirty[2]&1&&t(51,a={[ln.AREA]:d.isValid,[ln.HEIGHT]:!0,[ln.NAME]:!!(P&&P.trim()!==""),[ln.VALIDITY_PERIOD]:!!(O&&D&&O<D),[ln.NOTIFICATION]:(C||M)&&(!M||w&&i),[ln.BUFFER]:!0,[ln.BUFFER_NOTIFICATION]:(I||E)&&(!E||w&&r),[ln.REVIEW]:!0}),n.$$.dirty[1]&1048576&&t(8,l=Object.values(a).some(Zt=>!Zt)),n.$$.dirty[0]&112&&t(7,h=s.indexOf(k)>=o),n.$$.dirty[0]&8|n.$$.dirty[1]&8912896&&ye&&!Rt){const Zt=d.intrusionContacts||[],cn=Zt.some(En=>En.contactType===mr.AUDIOVISUAL&&!En.isBuffered),Un=!!d.smsLanguage;!cn&&!Un&&!ft.current&&ft.set(!0);const mn=Zt.some(En=>En.contactType===mr.AUDIOVISUAL&&En.isBuffered),tn=!!d.smsLanguage;!mn&&!tn&&!Ft.current&&Ft.set(!0),t(50,Rt=!0)}},[ne,ie,le,ye,o,s,k,h,l,Y,q,ge,re,me,ke,X,ue,_e,oe,we,Te,Ae,Ne,De,_t,Pe,je,Ve,Ue,Ke,We,ze,Et,rt,ft,Ut,Qe,yt,mt,Ft,qt,vt,$t,dn,pn,Ye,Mt,J,pe,be,Rt,a,r,i,d,w,E,I,M,C,D,O,P,F,V,$,G,U,H,j,Q,W]}class YN extends Wt{constructor(e){super(),Xt(this,e,ZN,qN,zt,{map:0,geofencesService:47,geofence:1,highlightedPointIndex:2,resultCallback:48,isEditing:3,isContinuing:49},null,[-1,-1,-1])}}function Z_(n){let e,t;return e=new ow({props:{map:n[0],geofence:n[1],highlightedPointIndex:n[2]}}),{c(){st(e.$$.fragment)},l(i){ot(e.$$.fragment,i)},m(i,r){at(e,i,r),t=!0},p(i,r){const s={};r&1&&(s.map=i[0]),r&2&&(s.geofence=i[1]),r&4&&(s.highlightedPointIndex=i[2]),e.$set(s)},i(i){t||(de(e.$$.fragment,i),t=!0)},o(i){Ie(e.$$.fragment,i),t=!1},d(i){lt(e,i)}}}function jN(n){let e,t,i=n[3]&&Z_(n);return{c(){i&&i.c(),e=dt()},l(r){i&&i.l(r),e=dt()},m(r,s){i&&i.m(r,s),Z(r,e,s),t=!0},p(r,[s]){r[3]?i?(i.p(r,s),s&8&&de(i,1)):(i=Z_(r),i.c(),de(i,1),i.m(e.parentNode,e)):i&&(bt(),Ie(i,1,1,()=>{i=null}),wt())},i(r){t||(de(i),t=!0)},o(r){Ie(i),t=!1},d(r){r&&_(e),i&&i.d(r)}}}function WN(n,e,t){let i,r=$e,s=()=>(r(),r=Dt(a,h=>t(3,i=h)),a);n.$$.on_destroy.push(()=>r());let{map:o}=e,{geofence:a}=e;s();let{highlightedPointIndex:l}=e;return n.$$set=h=>{"map"in h&&t(0,o=h.map),"geofence"in h&&s(t(1,a=h.geofence)),"highlightedPointIndex"in h&&t(2,l=h.highlightedPointIndex)},[o,a,l,i]}class XN extends Wt{constructor(e){super(),Xt(this,e,WN,jN,zt,{map:0,geofence:1,highlightedPointIndex:2})}}class Fl{constructor(){Ge(this,"subscribers",[]);Ge(this,"wsUnsubscribe",()=>{})}static connect(e){const t=new Fl;return t.wsUnsubscribe=e.subscribe("rp",t.__onIncomingMessage.bind(t),t.__doDisconnect.bind(t)),t}onUnmount(){this.wsUnsubscribe()}__onIncomingMessage(e){const[[t,i,r,s],o]=lu(e,":",4);if(!o){console.warn("RadarDetectionService: Received unparsable packet:",e);return}let a=null,l=null;try{a=JSON.parse(s),l=parseInt(i)}catch(h){console.error("RadarDetectionService: Failed to parse radar detection JSON:",h,s)}if(a!==null&&l!==null&&a.length>0){a.forEach(h=>h.sensorId=l);for(const h of a)for(const d of this.subscribers)d.onUpdate(h)}}__doDisconnect(){this.subscribers.forEach(e=>{e.onDisconnect()})}subscribe(e,t){const i={onUpdate:e,onDisconnect:t};return this.subscribers.push(i),()=>{const r=this.subscribers.indexOf(i);r===-1&&console.warn("RadarDetectionService: Unsubscribing subscriber that was not subscribed"),this.subscribers.splice(r,1)}}}const KN=1*60*1e3;class Ea{constructor(e){Ge(this,"geofencesService");Ge(this,"__intrusionTracker",new Map);Ge(this,"activeIntrusions",new Ot([]));Ge(this,"stopIntrusionCleanupInterval",null);Ge(this,"subscribers",[]);Ge(this,"wsUnsubscribe",()=>{});this.geofencesService=e}static connect(e,t){const i=new Ea(t);return i.wsUnsubscribe=e.subscribe("rp",i.__onIncomingMessage.bind(i),i.__doDisconnect.bind(i)),i.stopIntrusionCleanupInterval=setInterval(()=>{i.__cleanThenNotifyIntrusions()},100),i}onUnmount(){this.stopIntrusionCleanupInterval&&(clearInterval(this.stopIntrusionCleanupInterval),this.stopIntrusionCleanupInterval=null),this.wsUnsubscribe()}__testPointAgainstFence(e,t){if(t.h)return nh({lat:e.geometry.coordinates[1],lng:e.geometry.coordinates[0]},{lat:t.v[0].lat,lng:t.v[0].lng})<=t.h/1e3;{let i=t.v.map(r=>[r.lng,r.lat]);return i.length>0&&(i[0][1]!==i[i.length-1][1]||i[0][0]!==i[i.length-1][0])&&i.push([i[0][0],i[0][1]]),Qf(e,No([i]))}}__checkIntrusion(e){const t=this.geofencesService.geofences.current;if(!t||!e.loc)return!1;const i=Qn([e.loc.lng,e.loc.lat]);for(const r of t.values()){const s=r.startTime&&r.expirationTime?new Date(r.startTime).getTime()<=Date.now()&&new Date(r.expirationTime).getTime()>Date.now():!0;if(r.active&&s&&r.fenceAudiovisual&&this.__isHeightInRange(e.alt,r.minHeight,r.maxHeight)&&this.__testPointAgainstFence(i,r.fence)||r.active&&s&&r.bufferOffset&&r.bufferAudiovisual&&this.__isHeightInRange(e.alt,r.minHeight,r.maxHeight)&&this.__testPointAgainstFence(i,r.buffer))return ii.settings.fields.geofence_layer_shown.set(!0),!0}return!1}__isHeightInRange(e,t,i){return e===null?!1:(t===void 0&&(t=null),i===void 0&&(i=null),t===null&&i===null?!0:t===null?e<=i:i===null?e>=t:e>=t&&e<=i)}__onIncomingMessage(e){const[[t,i,r,s],o]=lu(e,":",4);if(!o){console.warn("RealTimeGeofencedRadarDataService: Received unparsable packet:",e);return}let a=null;try{a=JSON.parse(s)}catch(l){console.error("RealTimeGeofencedRadarDataService: Failed to parse radar detection JSON:",l,s);return}for(const l of a){if(!l||!l.loc)continue;const d=l.c===Vr.UAV?!1:this.__checkIntrusion(l);this.__notifySubscribers(l,d),this.__updateIntrusionTracker(l,d)}}__updateIntrusionTracker(e,t){if(!t){this.__intrusionTracker.delete(e.id);return}const i=Date.now(),r=this.__intrusionTracker.get(e.id);r?(r.lastSeen=i,r.lastLocation=e.loc||r.lastLocation):(console.log(`db20: New intrusion detected for drone (${e.id})`),this.__intrusionTracker.set(e.id,{flightId:e.id,lastSeen:i,lastLocation:e.loc||null}))}__cleanThenNotifyIntrusions(){const e=Date.now();for(const[t,i]of this.__intrusionTracker.entries())e-i.lastSeen>KN&&this.__intrusionTracker.delete(t);this.activeIntrusions.set(this.__intrusionTracker.values().map(t=>({flightId:t.flightId,lastLocation:t.lastLocation})).toArray())}__notifySubscribers(e,t){this.subscribers.forEach(i=>{var r,s;i.onUpdate({id:e.id,loc:((r=e.loc)==null?void 0:r.lat)==0&&((s=e.loc)==null?void 0:s.lng)==0?null:e.loc,alt:e.alt,tid:e.tid,sid:e.sid,ts:e.ts,c:e.c,sensorId:e.sensorId,isIntrusion:t})})}__doDisconnect(){this.subscribers.forEach(e=>{e.onDisconnect()})}subscribe(e,t){const i={onUpdate:e,onDisconnect:t};return this.subscribers.push(i),()=>{const r=this.subscribers.indexOf(i);r===-1&&console.warn("RealTimeGeofencedRadarDataService: Unsubscribing subscriber that was not subscribed"),this.subscribers.splice(r,1)}}}/*! @license DOMPurify 3.3.0 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.0/LICENSE */const{entries:h4,setPrototypeOf:Y_,isFrozen:JN,getPrototypeOf:QN,getOwnPropertyDescriptor:eD}=Object;let{freeze:br,seal:us,create:Of}=Object,{apply:xf,construct:Ff}=typeof Reflect<"u"&&Reflect;br||(br=function(e){return e});us||(us=function(e){return e});xf||(xf=function(e,t){for(var i=arguments.length,r=new Array(i>2?i-2:0),s=2;s<i;s++)r[s-2]=arguments[s];return e.apply(t,r)});Ff||(Ff=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];return new e(...i)});const Wu=wr(Array.prototype.forEach),tD=wr(Array.prototype.lastIndexOf),j_=wr(Array.prototype.pop),ml=wr(Array.prototype.push),nD=wr(Array.prototype.splice),yc=wr(String.prototype.toLowerCase),qh=wr(String.prototype.toString),Zh=wr(String.prototype.match),_l=wr(String.prototype.replace),iD=wr(String.prototype.indexOf),rD=wr(String.prototype.trim),gs=wr(Object.prototype.hasOwnProperty),gr=wr(RegExp.prototype.test),pl=sD(TypeError);function wr(n){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];return xf(n,e,i)}}function sD(n){return function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return Ff(n,t)}}function Zn(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:yc;Y_&&Y_(n,null);let i=e.length;for(;i--;){let r=e[i];if(typeof r=="string"){const s=t(r);s!==r&&(JN(e)||(e[i]=s),r=s)}n[r]=!0}return n}function oD(n){for(let e=0;e<n.length;e++)gs(n,e)||(n[e]=null);return n}function Xs(n){const e=Of(null);for(const[t,i]of h4(n))gs(n,t)&&(Array.isArray(i)?e[t]=oD(i):i&&typeof i=="object"&&i.constructor===Object?e[t]=Xs(i):e[t]=i);return e}function vl(n,e){for(;n!==null;){const i=eD(n,e);if(i){if(i.get)return wr(i.get);if(typeof i.value=="function")return wr(i.value)}n=QN(n)}function t(){return null}return t}const W_=br(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Yh=br(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),jh=br(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),aD=br(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Wh=br(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),lD=br(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),X_=br(["#text"]),K_=br(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Xh=br(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),J_=br(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Xu=br(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),uD=us(/\{\{[\w\W]*|[\w\W]*\}\}/gm),cD=us(/<%[\w\W]*|[\w\W]*%>/gm),hD=us(/\$\{[\w\W]*/gm),fD=us(/^data-[\-\w.\u00B7-\uFFFF]+$/),dD=us(/^aria-[\-\w]+$/),f4=us(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),gD=us(/^(?:\w+script|data):/i),mD=us(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),d4=us(/^html$/i),_D=us(/^[a-z][.\w]*(-[.\w]+)+$/i);var Q_=Object.freeze({__proto__:null,ARIA_ATTR:dD,ATTR_WHITESPACE:mD,CUSTOM_ELEMENT:_D,DATA_ATTR:fD,DOCTYPE_NAME:d4,ERB_EXPR:cD,IS_ALLOWED_URI:f4,IS_SCRIPT_OR_DATA:gD,MUSTACHE_EXPR:uD,TMPLIT_EXPR:hD});const yl={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},pD=function(){return typeof window>"u"?null:window},vD=function(e,t){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let i=null;const r="data-tt-policy-suffix";t&&t.hasAttribute(r)&&(i=t.getAttribute(r));const s="dompurify"+(i?"#"+i:"");try{return e.createPolicy(s,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+s+" could not be created."),null}},ep=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function g4(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:pD();const e=xt=>g4(xt);if(e.version="3.3.0",e.removed=[],!n||!n.document||n.document.nodeType!==yl.document||!n.Element)return e.isSupported=!1,e;let{document:t}=n;const i=t,r=i.currentScript,{DocumentFragment:s,HTMLTemplateElement:o,Node:a,Element:l,NodeFilter:h,NamedNodeMap:d=n.NamedNodeMap||n.MozNamedAttrMap,HTMLFormElement:m,DOMParser:v,trustedTypes:k}=n,w=l.prototype,E=vl(w,"cloneNode"),I=vl(w,"remove"),M=vl(w,"nextSibling"),C=vl(w,"childNodes"),D=vl(w,"parentNode");if(typeof o=="function"){const xt=t.createElement("template");xt.content&&xt.content.ownerDocument&&(t=xt.content.ownerDocument)}let O,P="";const{implementation:F,createNodeIterator:V,createDocumentFragment:$,getElementsByTagName:G}=t,{importNode:U}=i;let H=ep();e.isSupported=typeof h4=="function"&&typeof D=="function"&&F&&F.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:j,ERB_EXPR:Q,TMPLIT_EXPR:W,DATA_ATTR:Y,ARIA_ATTR:q,IS_SCRIPT_OR_DATA:ne,ATTR_WHITESPACE:J,CUSTOM_ELEMENT:ge}=Q_;let{IS_ALLOWED_URI:ie}=Q_,le=null;const pe=Zn({},[...W_,...Yh,...jh,...Wh,...X_]);let ye=null;const be=Zn({},[...K_,...Xh,...J_,...Xu]);let re=Object.seal(Of(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),me=null,ke=null;const X=Object.seal(Of(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let ue=!0,_e=!0,oe=!1,ae=!0,Se=!1,Me=!0,we=!1,Te=!1,Ae=!1,Ne=!1,De=!1,_t=!1,Fe=!0,Pe=!1;const je="user-content-";let Ve=!0,Ue=!1,Ke={},We=null;const ze=Zn({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Et=null;const rt=Zn({},["audio","video","img","source","image","track"]);let ft=null;const Ut=Zn({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Qe="http://www.w3.org/1998/Math/MathML",yt="http://www.w3.org/2000/svg",mt="http://www.w3.org/1999/xhtml";let Ft=mt,qt=!1,vt=null;const $t=Zn({},[Qe,yt,mt],qh);let dn=Zn({},["mi","mo","mn","ms","mtext"]),sn=Zn({},["annotation-xml"]);const pn=Zn({},["title","style","font","a","script"]);let Ye=null;const Vt=["application/xhtml+xml","text/html"],Mt="text/html";let Rt=null,gt=null;const it=t.createElement("form"),St=function(qe){return qe instanceof RegExp||qe instanceof Function},Jt=function(){let qe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(gt&&gt===qe)){if((!qe||typeof qe!="object")&&(qe={}),qe=Xs(qe),Ye=Vt.indexOf(qe.PARSER_MEDIA_TYPE)===-1?Mt:qe.PARSER_MEDIA_TYPE,Rt=Ye==="application/xhtml+xml"?qh:yc,le=gs(qe,"ALLOWED_TAGS")?Zn({},qe.ALLOWED_TAGS,Rt):pe,ye=gs(qe,"ALLOWED_ATTR")?Zn({},qe.ALLOWED_ATTR,Rt):be,vt=gs(qe,"ALLOWED_NAMESPACES")?Zn({},qe.ALLOWED_NAMESPACES,qh):$t,ft=gs(qe,"ADD_URI_SAFE_ATTR")?Zn(Xs(Ut),qe.ADD_URI_SAFE_ATTR,Rt):Ut,Et=gs(qe,"ADD_DATA_URI_TAGS")?Zn(Xs(rt),qe.ADD_DATA_URI_TAGS,Rt):rt,We=gs(qe,"FORBID_CONTENTS")?Zn({},qe.FORBID_CONTENTS,Rt):ze,me=gs(qe,"FORBID_TAGS")?Zn({},qe.FORBID_TAGS,Rt):Xs({}),ke=gs(qe,"FORBID_ATTR")?Zn({},qe.FORBID_ATTR,Rt):Xs({}),Ke=gs(qe,"USE_PROFILES")?qe.USE_PROFILES:!1,ue=qe.ALLOW_ARIA_ATTR!==!1,_e=qe.ALLOW_DATA_ATTR!==!1,oe=qe.ALLOW_UNKNOWN_PROTOCOLS||!1,ae=qe.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Se=qe.SAFE_FOR_TEMPLATES||!1,Me=qe.SAFE_FOR_XML!==!1,we=qe.WHOLE_DOCUMENT||!1,Ne=qe.RETURN_DOM||!1,De=qe.RETURN_DOM_FRAGMENT||!1,_t=qe.RETURN_TRUSTED_TYPE||!1,Ae=qe.FORCE_BODY||!1,Fe=qe.SANITIZE_DOM!==!1,Pe=qe.SANITIZE_NAMED_PROPS||!1,Ve=qe.KEEP_CONTENT!==!1,Ue=qe.IN_PLACE||!1,ie=qe.ALLOWED_URI_REGEXP||f4,Ft=qe.NAMESPACE||mt,dn=qe.MATHML_TEXT_INTEGRATION_POINTS||dn,sn=qe.HTML_INTEGRATION_POINTS||sn,re=qe.CUSTOM_ELEMENT_HANDLING||{},qe.CUSTOM_ELEMENT_HANDLING&&St(qe.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(re.tagNameCheck=qe.CUSTOM_ELEMENT_HANDLING.tagNameCheck),qe.CUSTOM_ELEMENT_HANDLING&&St(qe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(re.attributeNameCheck=qe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),qe.CUSTOM_ELEMENT_HANDLING&&typeof qe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(re.allowCustomizedBuiltInElements=qe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Se&&(_e=!1),De&&(Ne=!0),Ke&&(le=Zn({},X_),ye=[],Ke.html===!0&&(Zn(le,W_),Zn(ye,K_)),Ke.svg===!0&&(Zn(le,Yh),Zn(ye,Xh),Zn(ye,Xu)),Ke.svgFilters===!0&&(Zn(le,jh),Zn(ye,Xh),Zn(ye,Xu)),Ke.mathMl===!0&&(Zn(le,Wh),Zn(ye,J_),Zn(ye,Xu))),qe.ADD_TAGS&&(typeof qe.ADD_TAGS=="function"?X.tagCheck=qe.ADD_TAGS:(le===pe&&(le=Xs(le)),Zn(le,qe.ADD_TAGS,Rt))),qe.ADD_ATTR&&(typeof qe.ADD_ATTR=="function"?X.attributeCheck=qe.ADD_ATTR:(ye===be&&(ye=Xs(ye)),Zn(ye,qe.ADD_ATTR,Rt))),qe.ADD_URI_SAFE_ATTR&&Zn(ft,qe.ADD_URI_SAFE_ATTR,Rt),qe.FORBID_CONTENTS&&(We===ze&&(We=Xs(We)),Zn(We,qe.FORBID_CONTENTS,Rt)),Ve&&(le["#text"]=!0),we&&Zn(le,["html","head","body"]),le.table&&(Zn(le,["tbody"]),delete me.tbody),qe.TRUSTED_TYPES_POLICY){if(typeof qe.TRUSTED_TYPES_POLICY.createHTML!="function")throw pl('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof qe.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw pl('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');O=qe.TRUSTED_TYPES_POLICY,P=O.createHTML("")}else O===void 0&&(O=vD(k,r)),O!==null&&typeof P=="string"&&(P=O.createHTML(""));br&&br(qe),gt=qe}},ut=Zn({},[...Yh,...jh,...aD]),jt=Zn({},[...Wh,...lD]),gn=function(qe){let kt=D(qe);(!kt||!kt.tagName)&&(kt={namespaceURI:Ft,tagName:"template"});const Gt=yc(qe.tagName),Je=yc(kt.tagName);return vt[qe.namespaceURI]?qe.namespaceURI===yt?kt.namespaceURI===mt?Gt==="svg":kt.namespaceURI===Qe?Gt==="svg"&&(Je==="annotation-xml"||dn[Je]):!!ut[Gt]:qe.namespaceURI===Qe?kt.namespaceURI===mt?Gt==="math":kt.namespaceURI===yt?Gt==="math"&&sn[Je]:!!jt[Gt]:qe.namespaceURI===mt?kt.namespaceURI===yt&&!sn[Je]||kt.namespaceURI===Qe&&!dn[Je]?!1:!jt[Gt]&&(pn[Gt]||!ut[Gt]):!!(Ye==="application/xhtml+xml"&&vt[qe.namespaceURI]):!1},Be=function(qe){ml(e.removed,{element:qe});try{D(qe).removeChild(qe)}catch{I(qe)}},tt=function(qe,kt){try{ml(e.removed,{attribute:kt.getAttributeNode(qe),from:kt})}catch{ml(e.removed,{attribute:null,from:kt})}if(kt.removeAttribute(qe),qe==="is")if(Ne||De)try{Be(kt)}catch{}else try{kt.setAttribute(qe,"")}catch{}},en=function(qe){let kt=null,Gt=null;if(Ae)qe="<remove></remove>"+qe;else{const wn=Zh(qe,/^[\r\n\t ]+/);Gt=wn&&wn[0]}Ye==="application/xhtml+xml"&&Ft===mt&&(qe='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+qe+"</body></html>");const Je=O?O.createHTML(qe):qe;if(Ft===mt)try{kt=new v().parseFromString(Je,Ye)}catch{}if(!kt||!kt.documentElement){kt=F.createDocument(Ft,"template",null);try{kt.documentElement.innerHTML=qt?P:Je}catch{}}const It=kt.body||kt.documentElement;return qe&&Gt&&It.insertBefore(t.createTextNode(Gt),It.childNodes[0]||null),Ft===mt?G.call(kt,we?"html":"body")[0]:we?kt.documentElement:It},Fn=function(qe){return V.call(qe.ownerDocument||qe,qe,h.SHOW_ELEMENT|h.SHOW_COMMENT|h.SHOW_TEXT|h.SHOW_PROCESSING_INSTRUCTION|h.SHOW_CDATA_SECTION,null)},Vn=function(qe){return qe instanceof m&&(typeof qe.nodeName!="string"||typeof qe.textContent!="string"||typeof qe.removeChild!="function"||!(qe.attributes instanceof d)||typeof qe.removeAttribute!="function"||typeof qe.setAttribute!="function"||typeof qe.namespaceURI!="string"||typeof qe.insertBefore!="function"||typeof qe.hasChildNodes!="function")},Zt=function(qe){return typeof a=="function"&&qe instanceof a};function cn(xt,qe,kt){Wu(xt,Gt=>{Gt.call(e,qe,kt,gt)})}const Un=function(qe){let kt=null;if(cn(H.beforeSanitizeElements,qe,null),Vn(qe))return Be(qe),!0;const Gt=Rt(qe.nodeName);if(cn(H.uponSanitizeElement,qe,{tagName:Gt,allowedTags:le}),Me&&qe.hasChildNodes()&&!Zt(qe.firstElementChild)&&gr(/<[/\w!]/g,qe.innerHTML)&&gr(/<[/\w!]/g,qe.textContent)||qe.nodeType===yl.progressingInstruction||Me&&qe.nodeType===yl.comment&&gr(/<[/\w]/g,qe.data))return Be(qe),!0;if(!(X.tagCheck instanceof Function&&X.tagCheck(Gt))&&(!le[Gt]||me[Gt])){if(!me[Gt]&&tn(Gt)&&(re.tagNameCheck instanceof RegExp&&gr(re.tagNameCheck,Gt)||re.tagNameCheck instanceof Function&&re.tagNameCheck(Gt)))return!1;if(Ve&&!We[Gt]){const Je=D(qe)||qe.parentNode,It=C(qe)||qe.childNodes;if(It&&Je){const wn=It.length;for(let Cn=wn-1;Cn>=0;--Cn){const oi=E(It[Cn],!0);oi.__removalCount=(qe.__removalCount||0)+1,Je.insertBefore(oi,M(qe))}}}return Be(qe),!0}return qe instanceof l&&!gn(qe)||(Gt==="noscript"||Gt==="noembed"||Gt==="noframes")&&gr(/<\/no(script|embed|frames)/i,qe.innerHTML)?(Be(qe),!0):(Se&&qe.nodeType===yl.text&&(kt=qe.textContent,Wu([j,Q,W],Je=>{kt=_l(kt,Je," ")}),qe.textContent!==kt&&(ml(e.removed,{element:qe.cloneNode()}),qe.textContent=kt)),cn(H.afterSanitizeElements,qe,null),!1)},mn=function(qe,kt,Gt){if(Fe&&(kt==="id"||kt==="name")&&(Gt in t||Gt in it))return!1;if(!(_e&&!ke[kt]&&gr(Y,kt))){if(!(ue&&gr(q,kt))){if(!(X.attributeCheck instanceof Function&&X.attributeCheck(kt,qe))){if(!ye[kt]||ke[kt]){if(!(tn(qe)&&(re.tagNameCheck instanceof RegExp&&gr(re.tagNameCheck,qe)||re.tagNameCheck instanceof Function&&re.tagNameCheck(qe))&&(re.attributeNameCheck instanceof RegExp&&gr(re.attributeNameCheck,kt)||re.attributeNameCheck instanceof Function&&re.attributeNameCheck(kt,qe))||kt==="is"&&re.allowCustomizedBuiltInElements&&(re.tagNameCheck instanceof RegExp&&gr(re.tagNameCheck,Gt)||re.tagNameCheck instanceof Function&&re.tagNameCheck(Gt))))return!1}else if(!ft[kt]){if(!gr(ie,_l(Gt,J,""))){if(!((kt==="src"||kt==="xlink:href"||kt==="href")&&qe!=="script"&&iD(Gt,"data:")===0&&Et[qe])){if(!(oe&&!gr(ne,_l(Gt,J,"")))){if(Gt)return!1}}}}}}}return!0},tn=function(qe){return qe!=="annotation-xml"&&Zh(qe,ge)},En=function(qe){cn(H.beforeSanitizeAttributes,qe,null);const{attributes:kt}=qe;if(!kt||Vn(qe))return;const Gt={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ye,forceKeepAttr:void 0};let Je=kt.length;for(;Je--;){const It=kt[Je],{name:wn,namespaceURI:Cn,value:oi}=It,ri=Rt(wn),ci=oi;let vn=wn==="value"?ci:rD(ci);if(Gt.attrName=ri,Gt.attrValue=vn,Gt.keepAttr=!0,Gt.forceKeepAttr=void 0,cn(H.uponSanitizeAttribute,qe,Gt),vn=Gt.attrValue,Pe&&(ri==="id"||ri==="name")&&(tt(wn,qe),vn=je+vn),Me&&gr(/((--!?|])>)|<\/(style|title|textarea)/i,vn)){tt(wn,qe);continue}if(ri==="attributename"&&Zh(vn,"href")){tt(wn,qe);continue}if(Gt.forceKeepAttr)continue;if(!Gt.keepAttr){tt(wn,qe);continue}if(!ae&&gr(/\/>/i,vn)){tt(wn,qe);continue}Se&&Wu([j,Q,W],Mi=>{vn=_l(vn,Mi," ")});const zn=Rt(qe.nodeName);if(!mn(zn,ri,vn)){tt(wn,qe);continue}if(O&&typeof k=="object"&&typeof k.getAttributeType=="function"&&!Cn)switch(k.getAttributeType(zn,ri)){case"TrustedHTML":{vn=O.createHTML(vn);break}case"TrustedScriptURL":{vn=O.createScriptURL(vn);break}}if(vn!==ci)try{Cn?qe.setAttributeNS(Cn,wn,vn):qe.setAttribute(wn,vn),Vn(qe)?Be(qe):j_(e.removed)}catch{tt(wn,qe)}}cn(H.afterSanitizeAttributes,qe,null)},Ln=function xt(qe){let kt=null;const Gt=Fn(qe);for(cn(H.beforeSanitizeShadowDOM,qe,null);kt=Gt.nextNode();)cn(H.uponSanitizeShadowNode,kt,null),Un(kt),En(kt),kt.content instanceof s&&xt(kt.content);cn(H.afterSanitizeShadowDOM,qe,null)};return e.sanitize=function(xt){let qe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},kt=null,Gt=null,Je=null,It=null;if(qt=!xt,qt&&(xt="<!-->"),typeof xt!="string"&&!Zt(xt))if(typeof xt.toString=="function"){if(xt=xt.toString(),typeof xt!="string")throw pl("dirty is not a string, aborting")}else throw pl("toString is not a function");if(!e.isSupported)return xt;if(Te||Jt(qe),e.removed=[],typeof xt=="string"&&(Ue=!1),Ue){if(xt.nodeName){const oi=Rt(xt.nodeName);if(!le[oi]||me[oi])throw pl("root node is forbidden and cannot be sanitized in-place")}}else if(xt instanceof a)kt=en("<!---->"),Gt=kt.ownerDocument.importNode(xt,!0),Gt.nodeType===yl.element&&Gt.nodeName==="BODY"||Gt.nodeName==="HTML"?kt=Gt:kt.appendChild(Gt);else{if(!Ne&&!Se&&!we&&xt.indexOf("<")===-1)return O&&_t?O.createHTML(xt):xt;if(kt=en(xt),!kt)return Ne?null:_t?P:""}kt&&Ae&&Be(kt.firstChild);const wn=Fn(Ue?xt:kt);for(;Je=wn.nextNode();)Un(Je),En(Je),Je.content instanceof s&&Ln(Je.content);if(Ue)return xt;if(Ne){if(De)for(It=$.call(kt.ownerDocument);kt.firstChild;)It.appendChild(kt.firstChild);else It=kt;return(ye.shadowroot||ye.shadowrootmode)&&(It=U.call(i,It,!0)),It}let Cn=we?kt.outerHTML:kt.innerHTML;return we&&le["!doctype"]&&kt.ownerDocument&&kt.ownerDocument.doctype&&kt.ownerDocument.doctype.name&&gr(d4,kt.ownerDocument.doctype.name)&&(Cn="<!DOCTYPE "+kt.ownerDocument.doctype.name+`>
`+Cn),Se&&Wu([j,Q,W],oi=>{Cn=_l(Cn,oi," ")}),O&&_t?O.createHTML(Cn):Cn},e.setConfig=function(){let xt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Jt(xt),Te=!0},e.clearConfig=function(){gt=null,Te=!1},e.isValidAttribute=function(xt,qe,kt){gt||Jt({});const Gt=Rt(xt),Je=Rt(qe);return mn(Gt,Je,kt)},e.addHook=function(xt,qe){typeof qe=="function"&&ml(H[xt],qe)},e.removeHook=function(xt,qe){if(qe!==void 0){const kt=tD(H[xt],qe);return kt===-1?void 0:nD(H[xt],kt,1)[0]}return j_(H[xt])},e.removeHooks=function(xt){H[xt]=[]},e.removeAllHooks=function(){H=ep()},e}var Kh=g4();function tp(n,e,t){const i=n.slice();return i[11]=e[t],i}function np(n){let e,t,i,r,s="SFC:",o,a,l=n[2]("airZones.surface")+"",h,d,m,v,k="AGL:",w,E,I=n[2]("airZones.aboveGroundLevel")+"",M,C,D,O,P="AMSL:",F,V,$=n[2]("airZones.aboveMeanSeaLevel")+"",G,U,H,j,Q="UNL:",W,Y,q=n[2]("airZones.unlimited")+"",ne;return{c(){e=A("div"),t=A("dl"),i=A("div"),r=A("dt"),r.textContent=s,o=ee(),a=A("dd"),h=he(l),d=ee(),m=A("div"),v=A("dt"),v.textContent=k,w=ee(),E=A("dd"),M=he(I),C=ee(),D=A("div"),O=A("dt"),O.textContent=P,F=ee(),V=A("dd"),G=he($),U=ee(),H=A("div"),j=A("dt"),j.textContent=Q,W=ee(),Y=A("dd"),ne=he(q),this.h()},l(J){e=R(J,"DIV",{class:!0});var ge=T(e);t=R(ge,"DL",{});var ie=T(t);i=R(ie,"DIV",{class:!0});var le=T(i);r=R(le,"DT",{class:!0,"data-svelte-h":!0}),rn(r)!=="svelte-15awobi"&&(r.textContent=s),o=te(le),a=R(le,"DD",{});var pe=T(a);h=fe(pe,l),pe.forEach(_),d=te(le),le.forEach(_),m=R(ie,"DIV",{class:!0});var ye=T(m);v=R(ye,"DT",{class:!0,"data-svelte-h":!0}),rn(v)!=="svelte-127eq80"&&(v.textContent=k),w=te(ye),E=R(ye,"DD",{});var be=T(E);M=fe(be,I),be.forEach(_),C=te(ye),ye.forEach(_),D=R(ie,"DIV",{class:!0});var re=T(D);O=R(re,"DT",{class:!0,"data-svelte-h":!0}),rn(O)!=="svelte-cjzau1"&&(O.textContent=P),F=te(re),V=R(re,"DD",{});var me=T(V);G=fe(me,$),me.forEach(_),U=te(re),re.forEach(_),H=R(ie,"DIV",{class:!0});var ke=T(H);j=R(ke,"DT",{class:!0,"data-svelte-h":!0}),rn(j)!=="svelte-15vdjdb"&&(j.textContent=Q),W=te(ke),Y=R(ke,"DD",{});var X=T(Y);ne=fe(X,q),X.forEach(_),ke.forEach(_),ie.forEach(_),ge.forEach(_),this.h()},h(){g(r,"class","svelte-jw4w36"),g(i,"class","row g8"),g(v,"class","svelte-jw4w36"),g(m,"class","row g8"),g(O,"class","svelte-jw4w36"),g(D,"class","row g8"),g(j,"class","svelte-jw4w36"),g(H,"class","row g8"),g(e,"class","keyword-legend p816 svelte-jw4w36")},m(J,ge){Z(J,e,ge),p(e,t),p(t,i),p(i,r),p(i,o),p(i,a),p(a,h),p(i,d),p(t,m),p(m,v),p(m,w),p(m,E),p(E,M),p(m,C),p(t,D),p(D,O),p(D,F),p(D,V),p(V,G),p(D,U),p(t,H),p(H,j),p(H,W),p(H,Y),p(Y,ne)},p(J,ge){ge&4&&l!==(l=J[2]("airZones.surface")+"")&&Ee(h,l),ge&4&&I!==(I=J[2]("airZones.aboveGroundLevel")+"")&&Ee(M,I),ge&4&&$!==($=J[2]("airZones.aboveMeanSeaLevel")+"")&&Ee(G,$),ge&4&&q!==(q=J[2]("airZones.unlimited")+"")&&Ee(ne,q)},d(J){J&&_(e)}}}function ip(n){let e,t,i=n[2]("airZones.restrictionDescription")+"",r,s,o,a,l,h=n[4](n[11].getLocalisedMessage(n[3]&&kc[n[3]]))+"";return{c(){e=A("div"),t=A("b"),r=he(i),s=he(":"),o=ee(),a=A("p"),l=new Ua(!1),this.h()},l(d){e=R(d,"DIV",{class:!0});var m=T(e);t=R(m,"B",{});var v=T(t);r=fe(v,i),s=fe(v,":"),v.forEach(_),o=te(m),a=R(m,"P",{});var k=T(a);l=qa(k,!1),k.forEach(_),m.forEach(_),this.h()},h(){l.a=null,g(e,"class","column")},m(d,m){Z(d,e,m),p(e,t),p(t,r),p(t,s),p(e,o),p(e,a),l.m(h,a)},p(d,m){m&4&&i!==(i=d[2]("airZones.restrictionDescription")+"")&&Ee(r,i),m&10&&h!==(h=d[4](d[11].getLocalisedMessage(d[3]&&kc[d[3]]))+"")&&l.p(h)},d(d){d&&_(e)}}}function rp(n){let e,t,i=n[2]("airZones.restrictionReason")+"",r,s,o,a,l=n[11].reason+"",h;return{c(){e=A("div"),t=A("b"),r=he(i),s=he(":"),o=ee(),a=A("p"),h=he(l),this.h()},l(d){e=R(d,"DIV",{class:!0});var m=T(e);t=R(m,"B",{});var v=T(t);r=fe(v,i),s=fe(v,":"),v.forEach(_),o=te(m),a=R(m,"P",{});var k=T(a);h=fe(k,l),k.forEach(_),m.forEach(_),this.h()},h(){g(e,"class","column")},m(d,m){Z(d,e,m),p(e,t),p(t,r),p(t,s),p(e,o),p(e,a),p(a,h)},p(d,m){m&4&&i!==(i=d[2]("airZones.restrictionReason")+"")&&Ee(r,i),m&2&&l!==(l=d[11].reason+"")&&Ee(h,l)},d(d){d&&_(e)}}}function sp(n){var O,P,F,V,$,G;let e,t,i=n[2]("airZones.restrictionValidity")+"",r,s,o,a,l=n[2]("airZones.validFrom")+"",h,d,m=Ci(n[2],new Date((F=(P=(O=n[11].feature)==null?void 0:O.properties)==null?void 0:P.applicability[0])==null?void 0:F.startDateTime),!1)+"",v,k,w,E=n[2]("airZones.validTo")+"",I,M,C=Ci(n[2],new Date((G=($=(V=n[11].feature)==null?void 0:V.properties)==null?void 0:$.applicability[0])==null?void 0:G.endDateTime),!1)+"",D;return{c(){e=A("div"),t=A("b"),r=he(i),s=he(":"),o=ee(),a=A("p"),h=he(l),d=ee(),v=he(m),k=A("br"),w=ee(),I=he(E),M=ee(),D=he(C),this.h()},l(U){e=R(U,"DIV",{class:!0});var H=T(e);t=R(H,"B",{});var j=T(t);r=fe(j,i),s=fe(j,":"),j.forEach(_),o=te(H),a=R(H,"P",{});var Q=T(a);h=fe(Q,l),d=te(Q),v=fe(Q,m),k=R(Q,"BR",{}),w=te(Q),I=fe(Q,E),M=te(Q),D=fe(Q,C),Q.forEach(_),H.forEach(_),this.h()},h(){g(e,"class","column")},m(U,H){Z(U,e,H),p(e,t),p(t,r),p(t,s),p(e,o),p(e,a),p(a,h),p(a,d),p(a,v),p(a,k),p(a,w),p(a,I),p(a,M),p(a,D)},p(U,H){var j,Q,W,Y,q,ne;H&4&&i!==(i=U[2]("airZones.restrictionValidity")+"")&&Ee(r,i),H&4&&l!==(l=U[2]("airZones.validFrom")+"")&&Ee(h,l),H&6&&m!==(m=Ci(U[2],new Date((W=(Q=(j=U[11].feature)==null?void 0:j.properties)==null?void 0:Q.applicability[0])==null?void 0:W.startDateTime),!1)+"")&&Ee(v,m),H&4&&E!==(E=U[2]("airZones.validTo")+"")&&Ee(I,E),H&6&&C!==(C=Ci(U[2],new Date((ne=(q=(Y=U[11].feature)==null?void 0:Y.properties)==null?void 0:q.applicability[0])==null?void 0:ne.endDateTime),!1)+"")&&Ee(D,C)},d(U){U&&_(e)}}}function op(n){var pe,ye,be,re,me,ke,X;let e,t,i,r,s=(n[11].name||n[11].identifier)+"",o,a,l,h,d,m=n[2]("airZones.restrictionType."+n[11].restriction)+"",v,k,w,E,I=Ku(n[11].lower,(ye=(pe=n[11].feature)==null?void 0:pe.properties)==null?void 0:ye.lowerMeters)+"",M,C,D=Ku(n[11].upper,(re=(be=n[11].feature)==null?void 0:be.properties)==null?void 0:re.upperMeters)+"",O,P,F,V,$,G,U=n[11].getLocalisedMessage(n[3]&&kc[n[3]]),H,j,Q,W,Y,q;function ne(){return n[7](n[11])}let J=n[0]===n[11]&&np(n),ge=U&&ip(n),ie=n[11].reason&&rp(n),le=((X=(ke=(me=n[11].feature)==null?void 0:me.properties)==null?void 0:ke.applicability[0])==null?void 0:X.permanent)==="NO"&&sp(n);return{c(){e=A("div"),t=A("div"),i=A("div"),r=A("b"),o=he(s),h=ee(),d=A("p"),v=he(m),k=ee(),w=A("p"),E=A("span"),M=he(I),C=he(" - "),O=he(D),P=ee(),F=Re("svg"),V=Re("path"),$=ee(),J&&J.c(),G=ee(),ge&&ge.c(),H=ee(),ie&&ie.c(),j=ee(),le&&le.c(),Q=ee(),W=A("div"),this.h()},l(ue){e=R(ue,"DIV",{class:!0});var _e=T(e);t=R(_e,"DIV",{class:!0,style:!0});var oe=T(t);i=R(oe,"DIV",{class:!0});var ae=T(i);r=R(ae,"B",{style:!0,class:!0,title:!0});var Se=T(r);o=fe(Se,s),Se.forEach(_),h=te(ae),d=R(ae,"P",{style:!0});var Me=T(d);v=fe(Me,m),Me.forEach(_),ae.forEach(_),k=te(oe),w=R(oe,"P",{class:!0});var we=T(w);E=R(we,"SPAN",{});var Te=T(E);M=fe(Te,I),C=fe(Te," - "),O=fe(Te,D),Te.forEach(_),P=te(we),F=Oe(we,"svg",{xmlns:!0,height:!0,viewBox:!0,width:!0,style:!0,fill:!0});var Ae=T(F);V=Oe(Ae,"path",{d:!0}),T(V).forEach(_),Ae.forEach(_),we.forEach(_),$=te(oe),J&&J.l(oe),oe.forEach(_),G=te(_e),ge&&ge.l(_e),H=te(_e),ie&&ie.l(_e),j=te(_e),le&&le.l(_e),_e.forEach(_),Q=te(ue),W=R(ue,"DIV",{class:!0}),T(W).forEach(_),this.h()},h(){B(r,"font-size","20px"),g(r,"class",a=Ui("grow restriction-"+n[11].restriction)+" svelte-jw4w36"),g(r,"title",l=n[11].identifier),B(d,"font-size","14px"),g(i,"class","column grow"),g(V,"d","M440-280h80v-240h-80v240Zm40-320q17 0 28.5-11.5T520-640q0-17-11.5-28.5T480-680q-17 0-28.5 11.5T440-640q0 17 11.5 28.5T480-600Zm0 520q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"),g(F,"xmlns","http://www.w3.org/2000/svg"),g(F,"height","16px"),g(F,"viewBox","0 -960 960 960"),g(F,"width","16px"),B(F,"min-width","16px"),B(F,"min-height","16px"),g(F,"fill","000"),g(w,"class","height-bubble row center-cross g8 hoverable svelte-jw4w36"),g(t,"class","line g8"),B(t,"align-items","start"),B(t,"position","relative"),g(e,"class","column g16 air-zone svelte-jw4w36"),g(W,"class","sep")},m(ue,_e){Z(ue,e,_e),p(e,t),p(t,i),p(i,r),p(r,o),p(i,h),p(i,d),p(d,v),p(t,k),p(t,w),p(w,E),p(E,M),p(E,C),p(E,O),p(w,P),p(w,F),p(F,V),p(t,$),J&&J.m(t,null),p(e,G),ge&&ge.m(e,null),p(e,H),ie&&ie.m(e,null),p(e,j),le&&le.m(e,null),Z(ue,Q,_e),Z(ue,W,_e),Y||(q=[nt(w,"mouseenter",ne),nt(w,"mouseleave",n[8])],Y=!0)},p(ue,_e){var oe,ae,Se,Me,we,Te,Ae;n=ue,_e&2&&s!==(s=(n[11].name||n[11].identifier)+"")&&Ee(o,s),_e&2&&a!==(a=Ui("grow restriction-"+n[11].restriction)+" svelte-jw4w36")&&g(r,"class",a),_e&2&&l!==(l=n[11].identifier)&&g(r,"title",l),_e&6&&m!==(m=n[2]("airZones.restrictionType."+n[11].restriction)+"")&&Ee(v,m),_e&2&&I!==(I=Ku(n[11].lower,(ae=(oe=n[11].feature)==null?void 0:oe.properties)==null?void 0:ae.lowerMeters)+"")&&Ee(M,I),_e&2&&D!==(D=Ku(n[11].upper,(Me=(Se=n[11].feature)==null?void 0:Se.properties)==null?void 0:Me.upperMeters)+"")&&Ee(O,D),n[0]===n[11]?J?J.p(n,_e):(J=np(n),J.c(),J.m(t,null)):J&&(J.d(1),J=null),_e&10&&(U=n[11].getLocalisedMessage(n[3]&&kc[n[3]])),U?ge?ge.p(n,_e):(ge=ip(n),ge.c(),ge.m(e,H)):ge&&(ge.d(1),ge=null),n[11].reason?ie?ie.p(n,_e):(ie=rp(n),ie.c(),ie.m(e,j)):ie&&(ie.d(1),ie=null),((Ae=(Te=(we=n[11].feature)==null?void 0:we.properties)==null?void 0:Te.applicability[0])==null?void 0:Ae.permanent)==="NO"?le?le.p(n,_e):(le=sp(n),le.c(),le.m(e,null)):le&&(le.d(1),le=null)},d(ue){ue&&(_(e),_(Q),_(W)),J&&J.d(),ge&&ge.d(),ie&&ie.d(),le&&le.d(),Y=!1,Bn(q)}}}function yD(n){let e,t,i,r,s=n[2]("airZones.flightRestrictions")+"",o,a,l=n[1].length+"",h,d,m,v,k=n[2]("airZones.atMouseChosenLocation")+"",w,E,I,M='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M19 5L5 19M5.00001 5L19 19" stroke="#fff" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>',C,D,O,P,F,V,$=Bt(n[1]),G=[];for(let U=0;U<$.length;U+=1)G[U]=op(tp(n,$,U));return{c(){e=A("div"),t=A("div"),i=A("div"),r=A("p"),o=he(s),a=he(" ("),h=he(l),d=he(")"),m=ee(),v=A("p"),w=he(k),E=ee(),I=A("button"),I.innerHTML=M,C=ee(),D=A("div"),O=A("div"),P=ee();for(let U=0;U<G.length;U+=1)G[U].c();this.h()},l(U){e=R(U,"DIV",{class:!0});var H=T(e);t=R(H,"DIV",{class:!0,style:!0});var j=T(t);i=R(j,"DIV",{class:!0});var Q=T(i);r=R(Q,"P",{style:!0});var W=T(r);o=fe(W,s),a=fe(W," ("),h=fe(W,l),d=fe(W,")"),W.forEach(_),m=te(Q),v=R(Q,"P",{style:!0});var Y=T(v);w=fe(Y,k),Y.forEach(_),Q.forEach(_),E=te(j),I=R(j,"BUTTON",{class:!0,style:!0,"data-svelte-h":!0}),rn(I)!=="svelte-zio18z"&&(I.innerHTML=M),j.forEach(_),C=te(H),D=R(H,"DIV",{class:!0});var q=T(D);O=R(q,"DIV",{class:!0}),T(O).forEach(_),P=te(q);for(let ne=0;ne<G.length;ne+=1)G[ne].l(q);q.forEach(_),H.forEach(_),this.h()},h(){B(r,"font-size","18px"),B(v,"font-size","12px"),g(i,"class","column grow"),g(I,"class","close"),B(I,"background","none"),B(I,"padding","0"),B(I,"border","none"),B(I,"outline","none"),B(I,"margin","0"),B(I,"height","24px"),g(t,"class","row center-cross info-row svelte-jw4w36"),B(t,"background-color","#445"),g(O,"class","sep"),g(D,"class","panel-scrollable"),g(e,"class","panel column")},m(U,H){Z(U,e,H),p(e,t),p(t,i),p(i,r),p(r,o),p(r,a),p(r,h),p(r,d),p(i,m),p(i,v),p(v,w),p(t,E),p(t,I),p(e,C),p(e,D),p(D,O),p(D,P);for(let j=0;j<G.length;j+=1)G[j]&&G[j].m(D,null);F||(V=nt(I,"click",n[6]),F=!0)},p(U,[H]){if(H&4&&s!==(s=U[2]("airZones.flightRestrictions")+"")&&Ee(o,s),H&2&&l!==(l=U[1].length+"")&&Ee(h,l),H&4&&k!==(k=U[2]("airZones.atMouseChosenLocation")+"")&&Ee(w,k),H&31){$=Bt(U[1]);let j;for(j=0;j<$.length;j+=1){const Q=tp(U,$,j);G[j]?G[j].p(Q,H):(G[j]=op(Q),G[j].c(),G[j].m(D,null))}for(;j<G.length;j+=1)G[j].d(1);G.length=$.length}},i:$e,o:$e,d(U){U&&_(e),ui(G,U),F=!1,V()}}}function Ku(n,e){return n.includes("FT")?`${e} M ${n.includes("SFC")?"SFC":n.includes("AGL")?"AGL":n.includes("AMSL")?"AMSL":""}`:n}function bD(n,e,t){let i,r,s,o;He(n,nn,w=>t(5,r=w)),He(n,Nn,w=>t(2,s=w)),He(n,So,w=>t(3,o=w));const a={ALLOWED_TAGS:["a"],ALLOWED_ATTR:["href"]},l=function(w){w instanceof HTMLElement&&w.tagName==="A"&&(w.setAttribute("target","_blank"),w.setAttribute("rel","noopener noreferrer"))};function h(w){if(!w)return"";Kh.addHook("afterSanitizeAttributes",l);const E=Kh.sanitize(w,a);return Kh.removeHook("afterSanitizeAttributes",l),E}let d=null;const m=()=>nn.close(),v=w=>t(0,d=w),k=()=>t(0,d=null);return n.$$.update=()=>{n.$$.dirty&32&&t(1,i=r.airZones.toSorted((w,E)=>E.restrictionLevel!==w.restrictionLevel?E.restrictionLevel-w.restrictionLevel:(w.lower||0)-(E.lower||0)))},[d,i,s,o,h,r,m,v,k]}class wD extends Wt{constructor(e){super(),Xt(this,e,bD,yD,zt,{})}}class Zc{constructor(){Ge(this,"subscribers",[]);Ge(this,"wsUnsubscribe",()=>{})}static connect(e){const t=new Zc;return t.wsUnsubscribe=e.subscribe("sd",t.__onIncomingMessage.bind(t),t.__doDisconnect.bind(t)),t}onUnmount(){this.wsUnsubscribe()}__onIncomingMessage(e){const[[t,i,r,s],o]=lu(e,":",4);if(!o){console.warn("SignalDetectionService: Received unparsable packet:",e);return}try{const a={...JSON.parse(s),sensorId:parseInt(i)};this.subscribers.forEach(l=>{l.onUpdate(a)})}catch(a){console.error("SignalDetectionService: Failed to parse signal detection JSON:",a,s)}}__doDisconnect(){this.subscribers.forEach(e=>{e.onDisconnect()})}subscribe(e,t){const i={onUpdate:e,onDisconnect:t};return this.subscribers.push(i),()=>{const r=this.subscribers.indexOf(i);r===-1&&console.warn("SignalDetectionService: Unsubscribing subscriber that was not subscribed"),this.subscribers.splice(r,1)}}}const Ju="air-zones-pane";function kD(n,e,t){let i;He(n,lc,h=>t(2,i=h));let{map:r}=e;if(!r.getPane(Ju)){r.createPane(Ju);const h=r.getPane(Ju);h&&(h.style.zIndex="430")}function s(h){h.length!==0&&nn.goto({type:Tt.AirZones,airZones:h})}function o(h){h.setStyle({pane:Ju}),r.addLayer(h),h.on("click",d=>{if(d.originalEvent._stopped)return;const m=[];h.eachLayer(v=>{"__preCalculateBounds"in v&&!v.__preCalculateBounds.contains(d.latlng)||cw(v.feature.geometry,d.latlng)&&m.push(new Yv(v.feature))}),s(m)})}function a(h){r.hasLayer(h)&&r.removeLayer(h),h.off("click")}let l=null;return mi(()=>()=>{l&&(a(l),t(1,l=null)),lc.current&&a(lc.current)}),n.$$set=h=>{"map"in h&&t(0,r=h.map)},n.$$.update=()=>{n.$$.dirty&6&&(l&&a(l),i&&o(i),t(1,l=i))},[r,l,i]}class ED extends Wt{constructor(e){super(),Xt(this,e,kD,null,zt,{map:0})}}class SD{constructor(){Ge(this,"latestFlightSummaries",new Map);Ge(this,"wsManagerUnsubscriber",null)}subscribeToFlight(e){return this.latestFlightSummaries.has(e)||(this.latestFlightSummaries.set(e,new Ot(null)),console.warn(`FlightSummariesService: Subscribed to summaries of an aircraft that has no summaries yet: ${e}`)),this.latestFlightSummaries.get(e)}updateFlightSummary(e,t){var i;this.latestFlightSummaries.has(e)?(i=this.latestFlightSummaries.get(e))==null||i.set(t):this.latestFlightSummaries.set(e,new Ot(t))}updateFromFlights(e){for(const t of e)this.updateFlightSummary(t.id,Gf(t))}updateFromFlightSummaryUpdate(e,t){this.updateFlightSummary(e,H4(t))}startUpdatingFromWSManager(e){this.wsManagerUnsubscriber&&(this.wsManagerUnsubscriber(),console.warn("FlightSummariesService: Replaced existing ACTIVE WebSocket subscription")),this.wsManagerUnsubscriber=e.subscribe("fs",t=>{let i=JSON.parse(t);this.updateFromFlightSummaryUpdate(i.id,i)},()=>{console.warn("FlightSummariesService: WebSocket connection closed, no longer receiving flight summary updates"),this.wsManagerUnsubscriber=null})}onUnmount(){this.wsManagerUnsubscriber&&(this.wsManagerUnsubscriber(),this.wsManagerUnsubscriber=null),this.latestFlightSummaries.clear()}}const Qu="weather-pane",ec="weather-popup-pane";function ID(n,e,t){let i,r;He(n,Vh,I=>t(3,i=I)),He(n,Nn,I=>t(5,r=I));let{map:s}=e,{mapManager:o}=e,a=null,l;if(!s.getPane(Qu)){s.createPane(Qu);const I=s.getPane(Qu);I&&(I.style.zIndex="8000")}if(!s.getPane(ec)){s.createPane(ec);const I=s.getPane(ec);I&&(I.style.zIndex="8400")}const h=o.currentLayer,d=h.subscribe(()=>{w(i,s,h.current.minZoom)});function m(I){const M=I==null?void 0:I.phenomenon,C=M?r("weatherPhenomenon."+M)||M:"";return`
            <b>${I==null?void 0:I.name}</b><br>
            ${C?`<i style="display:inline-flex;color:#666;margin-bottom:4px;">${C}</i><br>`:""}
            <div class="weather-popup-grid">
                ${I!=null&&I.precipitations?`<p>${r("weatherPopup.precipitation")}</p><p>${(I==null?void 0:I.precipitations)??"-"}mm</p>`:""}
                ${I!=null&&I.windSpeed?`<p>${r("weatherPopup.wind")}</p><p>${(I==null?void 0:I.windSpeed)??"-"}m/s</p>`:""}
                ${I!=null&&I.visibility?`<p>${r("weatherPopup.visibility")}</p><p>${(I==null?void 0:I.visibility)??"-"}km</p>`:""}
                ${I!=null&&I.airTemperature?`<p>${r("weatherPopup.temperature")}</p><p>${(I==null?void 0:I.airTemperature)??"-"}C</p>`:""}
                ${I!=null&&I.cloudHeight?`<p>${r("weatherPopup.cloudHeight")}</p><p>${(I==null?void 0:I.cloudHeight)??"-"}m</p>`:""}
                ${I!=null&&I.relativeHumidity?`<p>${r("weatherPopup.humidity")}</p><p>${(I==null?void 0:I.relativeHumidity)??"-"}%</p>`:""}
            </div>
        `}function v(I){I.eachLayer(M=>{var C;M instanceof Ct.Marker&&((C=M.feature)!=null&&C.properties)&&M.bindPopup(m(M.feature.properties),{className:"custom-weather-popup",pane:ec})})}function k(I){I.eachLayer(M=>{M.options&&(M.options.pane=Qu)}),s.addLayer(I),v(I),s.on("zoomend",()=>w(I,s,h.current.minZoom)),w(I,s,h.current.minZoom)}function w(I,M,C){I&&(console.log("Updating weather marker visibility with minZoom:",C),I.eachLayer(D=>{var O;if(D instanceof Ct.Marker){const P=(O=D.feature)==null?void 0:O.properties.phenomenon,F=P&&P.trim()!=="",V=D.getElement();if(!V)return;F||M.getZoom()>=(C||3)*2?V.style.display="block":V.style.display="none"}}))}function E(I){s.hasLayer(I)&&s.removeLayer(I)}return mi(()=>(l=So.subscribe(()=>{i&&v(i)}),()=>{a&&(E(a),t(2,a=null)),Vh.current&&E(Vh.current),l&&l(),d()})),n.$$set=I=>{"map"in I&&t(0,s=I.map),"mapManager"in I&&t(1,o=I.mapManager)},n.$$.update=()=>{n.$$.dirty&12&&(a&&E(a),i&&k(i),t(2,a=i??null))},[s,o,a,i]}class MD extends Wt{constructor(e){super(),Xt(this,e,ID,null,zt,{map:0,mapManager:1})}}function TD(n){let e,t=n[3]("flights.unknownModel")+"",i;return{c(){e=A("b"),i=he(t),this.h()},l(r){e=R(r,"B",{class:!0});var s=T(e);i=fe(s,t),s.forEach(_),this.h()},h(){g(e,"class","svelte-43vc6d")},m(r,s){Z(r,e,s),p(e,i)},p(r,s){s&8&&t!==(t=r[3]("flights.unknownModel")+"")&&Ee(i,t)},d(r){r&&_(e)}}}function LD(n){let e,t=n[3]("flights.unknownDJIModel")+"",i;return{c(){e=A("b"),i=he(t),this.h()},l(r){e=R(r,"B",{class:!0});var s=T(e);i=fe(s,t),s.forEach(_),this.h()},h(){g(e,"class","svelte-43vc6d")},m(r,s){Z(r,e,s),p(e,i)},p(r,s){s&8&&t!==(t=r[3]("flights.unknownDJIModel")+"")&&Ee(i,t)},d(r){r&&_(e)}}}function CD(n){let e,t=n[0].data.mke+"",i;return{c(){e=A("b"),i=he(t),this.h()},l(r){e=R(r,"B",{class:!0});var s=T(e);i=fe(s,t),s.forEach(_),this.h()},h(){g(e,"class","svelte-43vc6d")},m(r,s){Z(r,e,s),p(e,i)},p(r,s){s&1&&t!==(t=r[0].data.mke+"")&&Ee(i,t)},d(r){r&&_(e)}}}function PD(n){let e,t=n[0].data.mke+"",i,r,s=n[0].data.mdl+"",o;return{c(){e=A("b"),i=he(t),r=ee(),o=he(s),this.h()},l(a){e=R(a,"B",{class:!0});var l=T(e);i=fe(l,t),l.forEach(_),r=te(a),o=fe(a,s),this.h()},h(){g(e,"class","svelte-43vc6d")},m(a,l){Z(a,e,l),p(e,i),Z(a,r,l),Z(a,o,l)},p(a,l){l&1&&t!==(t=a[0].data.mke+"")&&Ee(i,t),l&1&&s!==(s=a[0].data.mdl+"")&&Ee(o,s)},d(a){a&&(_(e),_(r),_(o))}}}function ND(n){let e,t=n[0].data.ridn+"",i;return{c(){e=A("b"),i=he(t),this.h()},l(r){e=R(r,"B",{class:!0});var s=T(e);i=fe(s,t),s.forEach(_),this.h()},h(){g(e,"class","svelte-43vc6d")},m(r,s){Z(r,e,s),p(e,i)},p(r,s){s&1&&t!==(t=r[0].data.ridn+"")&&Ee(i,t)},d(r){r&&_(e)}}}function ap(n){let e,t="|",i,r,s=n[3]("flights.region."+n[0].r)+"",o;return{c(){e=A("p"),e.textContent=t,i=ee(),r=A("p"),o=he(s),this.h()},l(a){e=R(a,"P",{class:!0,"data-svelte-h":!0}),rn(e)!=="svelte-1ceyy2c"&&(e.textContent=t),i=te(a),r=R(a,"P",{class:!0});var l=T(r);o=fe(l,s),l.forEach(_),this.h()},h(){g(e,"class","svelte-43vc6d"),g(r,"class","svelte-43vc6d")},m(a,l){Z(a,e,l),Z(a,i,l),Z(a,r,l),p(r,o)},p(a,l){l&9&&s!==(s=a[3]("flights.region."+a[0].r)+"")&&Ee(o,s)},d(a){a&&(_(e),_(i),_(r))}}}function DD(n){let e,t="|",i,r,s=n[3]("history.noLocation")+"",o;return{c(){e=A("p"),e.textContent=t,i=ee(),r=A("p"),o=he(s),this.h()},l(a){e=R(a,"P",{class:!0,"data-svelte-h":!0}),rn(e)!=="svelte-1ceyy2c"&&(e.textContent=t),i=te(a),r=R(a,"P",{class:!0});var l=T(r);o=fe(l,s),l.forEach(_),this.h()},h(){g(e,"class","svelte-43vc6d"),g(r,"class","svelte-43vc6d")},m(a,l){Z(a,e,l),Z(a,i,l),Z(a,r,l),p(r,o)},p(a,l){l&8&&s!==(s=a[3]("history.noLocation")+"")&&Ee(o,s)},d(a){a&&(_(e),_(i),_(r))}}}function lp(n){let e,t,i,r,s,o,a;return{c(){e=A("div"),t=Re("svg"),i=Re("path"),r=ee(),s=A("p"),o=he(n[5]),this.h()},l(l){e=R(l,"DIV",{class:!0,title:!0});var h=T(e);t=Oe(h,"svg",{xmlns:!0,height:!0,viewBox:!0,width:!0,fill:!0,class:!0});var d=T(t);i=Oe(d,"path",{d:!0,class:!0}),T(i).forEach(_),d.forEach(_),r=te(h),s=R(h,"P",{style:!0,class:!0});var m=T(s);o=fe(m,n[5]),m.forEach(_),h.forEach(_),this.h()},h(){g(i,"d","M197-197q-54-55-85.5-127.5T80-480q0-84 31.5-156.5T197-763l57 57q-44 44-69 102t-25 124q0 67 25 125t69 101l-57 57Zm113-113q-32-33-51-76.5T240-480q0-51 19-94.5t51-75.5l57 57q-22 22-34.5 51T320-480q0 33 12.5 62t34.5 51l-57 57Zm170-90q-33 0-56.5-23.5T400-480q0-33 23.5-56.5T480-560q33 0 56.5 23.5T560-480q0 33-23.5 56.5T480-400Zm170 90-57-57q22-22 34.5-51t12.5-62q0-33-12.5-62T593-593l57-57q32 32 51 75.5t19 94.5q0 50-19 93.5T650-310Zm113 113-57-57q44-44 69-102t25-124q0-67-25-125t-69-101l57-57q54 54 85.5 126.5T880-480q0 83-31.5 155.5T763-197Z"),g(i,"class","svelte-43vc6d"),g(t,"xmlns","http://www.w3.org/2000/svg"),g(t,"height","18px"),g(t,"viewBox","0 -960 960 960"),g(t,"width","18px"),g(t,"fill","#888"),g(t,"class","svelte-43vc6d"),B(s,"font-family","monospace"),g(s,"class","svelte-43vc6d"),g(e,"class","row center-cross g4 svelte-43vc6d"),g(e,"title",a=n[5]>1?n[3]("flights.nSensorsDetectedCount",{values:{count:n[5]}}):n[3]("flights.sensorDetectedCount"))},m(l,h){Z(l,e,h),p(e,t),p(t,i),p(e,r),p(e,s),p(s,o)},p(l,h){h&8&&a!==(a=l[5]>1?l[3]("flights.nSensorsDetectedCount",{values:{count:l[5]}}):l[3]("flights.sensorDetectedCount"))&&g(e,"title",a)},d(l){l&&_(e)}}}function up(n){let e,t="|",i,r,s,o,a=n[3]("flights.geofenceIntrusion")+"",l,h,d,m,v=n[0].sum.int.length+"",k;return{c(){e=A("p"),e.textContent=t,i=ee(),r=A("div"),s=Re("svg"),o=Re("title"),l=he(a),h=Re("path"),d=ee(),m=A("p"),k=he(v),this.h()},l(w){e=R(w,"P",{class:!0,"data-svelte-h":!0}),rn(e)!=="svelte-1ceyy2c"&&(e.textContent=t),i=te(w),r=R(w,"DIV",{class:!0});var E=T(r);s=Oe(E,"svg",{xmlns:!0,height:!0,viewBox:!0,width:!0,fill:!0,class:!0});var I=T(s);o=Oe(I,"title",{class:!0});var M=T(o);l=fe(M,a),M.forEach(_),h=Oe(I,"path",{d:!0,class:!0}),T(h).forEach(_),I.forEach(_),d=te(E),m=R(E,"P",{style:!0,class:!0});var C=T(m);k=fe(C,v),C.forEach(_),E.forEach(_),this.h()},h(){g(e,"class","svelte-43vc6d"),g(o,"class","svelte-43vc6d"),g(h,"d","M480-320q17 0 28.5-11.5T520-360q0-17-11.5-28.5T480-400q-17 0-28.5 11.5T440-360q0 17 11.5 28.5T480-320Zm-40-160h80v-200h-80v200Zm40 400q-139-35-229.5-159.5T160-516v-244l320-120 320 120v244q0 152-90.5 276.5T480-80Zm0-84q104-33 172-132t68-220v-189l-240-90-240 90v189q0 121 68 220t172 132Zm0-316Z"),g(h,"class","svelte-43vc6d"),g(s,"xmlns","http://www.w3.org/2000/svg"),g(s,"height","18px"),g(s,"viewBox","0 -960 960 960"),g(s,"width","18px"),g(s,"fill","#E02525"),g(s,"class","svelte-43vc6d"),B(m,"font-family","monospace"),B(m,"color","#E02525"),g(m,"class","svelte-43vc6d"),g(r,"class","row center-cross g4 svelte-43vc6d")},m(w,E){Z(w,e,E),Z(w,i,E),Z(w,r,E),p(r,s),p(s,o),p(o,l),p(s,h),p(r,d),p(r,m),p(m,k)},p(w,E){E&8&&a!==(a=w[3]("flights.geofenceIntrusion")+"")&&Ee(l,a),E&1&&v!==(v=w[0].sum.int.length+"")&&Ee(k,v)},d(w){w&&(_(e),_(i),_(r))}}}function AD(n){let e,t="|",i,r,s,o=n[3]("aircraftView.crackedFwTitle")+"",a,l;return{c(){e=A("p"),e.textContent=t,i=ee(),r=Re("svg"),s=Re("title"),a=he(o),l=Re("path"),this.h()},l(h){e=R(h,"P",{class:!0,"data-svelte-h":!0}),rn(e)!=="svelte-1ceyy2c"&&(e.textContent=t),i=te(h),r=Oe(h,"svg",{class:!0,xmlns:!0,style:!0,viewBox:!0,fill:!0});var d=T(r);s=Oe(d,"title",{class:!0});var m=T(s);a=fe(m,o),m.forEach(_),l=Oe(d,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0,class:!0}),T(l).forEach(_),d.forEach(_),this.h()},h(){g(e,"class","svelte-43vc6d"),g(s,"class","svelte-43vc6d"),g(l,"d","M12 15H12.01M12 12V9M4.98207 19H19.0179C20.5615 19 21.5233 17.3256 20.7455 15.9923L13.7276 3.96153C12.9558 2.63852 11.0442 2.63852 10.2724 3.96153L3.25452 15.9923C2.47675 17.3256 3.43849 19 4.98207 19Z"),g(l,"stroke","#cc614b"),g(l,"stroke-width","2"),g(l,"stroke-linecap","round"),g(l,"stroke-linejoin","round"),g(l,"class","svelte-43vc6d"),g(r,"class","dont-shrink svelte-43vc6d"),g(r,"xmlns","http://www.w3.org/2000/svg"),B(r,"width","18px"),B(r,"height","18px"),g(r,"viewBox","0 0 24 24"),g(r,"fill","none")},m(h,d){Z(h,e,d),Z(h,i,d),Z(h,r,d),p(r,s),p(s,a),p(r,l)},p(h,d){d&8&&o!==(o=h[3]("aircraftView.crackedFwTitle")+"")&&Ee(a,o)},d(h){h&&(_(e),_(i),_(r))}}}function cp(n){let e,t="|",i,r,s=n[0].sum.mh?n[0].sum.mh.toFixed(0)+" m":"",o,a;return{c(){e=A("p"),e.textContent=t,i=ee(),r=A("p"),o=he(s),this.h()},l(l){e=R(l,"P",{class:!0,"data-svelte-h":!0}),rn(e)!=="svelte-1ceyy2c"&&(e.textContent=t),i=te(l),r=R(l,"P",{style:!0,class:!0});var h=T(r);o=fe(h,s),h.forEach(_),this.h()},h(){var l;g(e,"class","svelte-43vc6d"),g(r,"style",a=((l=n[0].sum)==null?void 0:l.mh)>120?"color: #e00; font-weight: 700;":""),g(r,"class","svelte-43vc6d")},m(l,h){Z(l,e,h),Z(l,i,h),Z(l,r,h),p(r,o)},p(l,h){var d;h&1&&s!==(s=l[0].sum.mh?l[0].sum.mh.toFixed(0)+" m":"")&&Ee(o,s),h&1&&a!==(a=((d=l[0].sum)==null?void 0:d.mh)>120?"color: #e00; font-weight: 700;":"")&&g(r,"style",a)},d(l){l&&(_(e),_(i),_(r))}}}function RD(n){var pe,ye;let e,t,i,r,s=Co(n[0].s)+"",o,a,l,h=Vs((n[0].e-n[0].s)/1e3)+"",d,m,v,k,w,E,I,M,C,D,O=(n[4]?n[4].toUpperCase().substring(n[4].length-4):n[3]("flights.noSerialNumberDetected"))+"",P,F,V,$,G,U,H,j;function Q(be,re){return re&1&&(w=null),be[0].data.ridn?ND:be[0].data.mke&&be[0].data.mdl?PD:be[0].data.mke?CD:(w==null&&(w=!!(be[0].data.ser&&be[0].data.ser.startsWith("1581"))),w?LD:TD)}let W=Q(n,-1),Y=W(n),q=n[0].r&&ap(n),ne=!n[6]&&DD(n),J=((pe=n[0].sum)==null?void 0:pe.sen)&&lp(n),ge=n[0].sum.int&&n[0].sum.int.length>0&&up(n),ie=n[7]&&AD(n),le=((ye=n[0].sum)==null?void 0:ye.mh)&&cp(n);return{c(){e=A("div"),t=A("div"),i=A("p"),r=A("b"),o=he(s),a=ee(),l=A("p"),d=he(h),m=ee(),v=A("div"),k=A("p"),Y.c(),I=ee(),M=A("div"),C=A("div"),D=A("p"),P=he(O),F=ee(),q&&q.c(),V=ee(),ne&&ne.c(),$=ee(),G=A("div"),J&&J.c(),U=ee(),ge&&ge.c(),H=ee(),ie&&ie.c(),j=ee(),le&&le.c(),this.h()},l(be){e=R(be,"DIV",{class:!0,style:!0});var re=T(e);t=R(re,"DIV",{class:!0,style:!0});var me=T(t);i=R(me,"P",{style:!0,class:!0});var ke=T(i);r=R(ke,"B",{class:!0});var X=T(r);o=fe(X,s),X.forEach(_),ke.forEach(_),a=te(me),l=R(me,"P",{style:!0,class:!0});var ue=T(l);d=fe(ue,h),ue.forEach(_),me.forEach(_),m=te(re),v=R(re,"DIV",{class:!0});var _e=T(v);k=R(_e,"P",{class:!0,style:!0});var oe=T(k);Y.l(oe),oe.forEach(_),I=te(_e),M=R(_e,"DIV",{class:!0});var ae=T(M);C=R(ae,"DIV",{class:!0,style:!0});var Se=T(C);D=R(Se,"P",{class:!0});var Me=T(D);P=fe(Me,O),Me.forEach(_),F=te(Se),q&&q.l(Se),V=te(Se),ne&&ne.l(Se),Se.forEach(_),$=te(ae),G=R(ae,"DIV",{class:!0,style:!0});var we=T(G);J&&J.l(we),U=te(we),ge&&ge.l(we),H=te(we),ie&&ie.l(we),j=te(we),le&&le.l(we),we.forEach(_),ae.forEach(_),_e.forEach(_),re.forEach(_),this.h()},h(){var be;g(r,"class","svelte-43vc6d"),B(i,"font-size","14px"),g(i,"class","svelte-43vc6d"),B(l,"font-size","10px"),B(l,"color","#666"),g(l,"class","svelte-43vc6d"),g(t,"class","column center-cross svelte-43vc6d"),B(t,"padding-block","3px"),B(t,"min-width","52px"),g(k,"class","truncate svelte-43vc6d"),g(k,"style",E=`color: ${Ga[n[2]][((be=n[0].data)==null?void 0:be.rel)||an.UNKNOWN]}; font-size: 18px;`),g(D,"class","svelte-43vc6d"),g(C,"class","row space-main center-cross g4 svelte-43vc6d"),B(C,"color","#222"),B(C,"width","fit-content"),B(C,"font-size","13px"),g(G,"class","row space-main center-cross g4 svelte-43vc6d"),B(G,"color","#888"),B(G,"width","fit-content"),B(G,"font-size","13px"),g(M,"class","column svelte-43vc6d"),g(v,"class","svelte-43vc6d"),g(e,"class","row width100 info svelte-43vc6d"),B(e,"gap","10px"),B(e,"padding","4px 16px")},m(be,re){Z(be,e,re),p(e,t),p(t,i),p(i,r),p(r,o),p(t,a),p(t,l),p(l,d),p(e,m),p(e,v),p(v,k),Y.m(k,null),p(v,I),p(v,M),p(M,C),p(C,D),p(D,P),p(C,F),q&&q.m(C,null),p(C,V),ne&&ne.m(C,null),p(M,$),p(M,G),J&&J.m(G,null),p(G,U),ge&&ge.m(G,null),p(G,H),ie&&ie.m(G,null),p(G,j),le&&le.m(G,null)},p(be,[re]){var me,ke,X;re&1&&s!==(s=Co(be[0].s)+"")&&Ee(o,s),re&1&&h!==(h=Vs((be[0].e-be[0].s)/1e3)+"")&&Ee(d,h),W===(W=Q(be,re))&&Y?Y.p(be,re):(Y.d(1),Y=W(be),Y&&(Y.c(),Y.m(k,null))),re&5&&E!==(E=`color: ${Ga[be[2]][((me=be[0].data)==null?void 0:me.rel)||an.UNKNOWN]}; font-size: 18px;`)&&g(k,"style",E),re&8&&O!==(O=(be[4]?be[4].toUpperCase().substring(be[4].length-4):be[3]("flights.noSerialNumberDetected"))+"")&&Ee(P,O),be[0].r?q?q.p(be,re):(q=ap(be),q.c(),q.m(C,V)):q&&(q.d(1),q=null),be[6]||ne.p(be,re),(ke=be[0].sum)!=null&&ke.sen?J?J.p(be,re):(J=lp(be),J.c(),J.m(G,U)):J&&(J.d(1),J=null),be[0].sum.int&&be[0].sum.int.length>0?ge?ge.p(be,re):(ge=up(be),ge.c(),ge.m(G,H)):ge&&(ge.d(1),ge=null),be[7]&&ie.p(be,re),(X=be[0].sum)!=null&&X.mh?le?le.p(be,re):(le=cp(be),le.c(),le.m(G,null)):le&&(le.d(1),le=null)},i:$e,o:$e,d(be){be&&_(e),Y.d(),q&&q.d(),ne&&ne.d(),J&&J.d(),ge&&ge.d(),ie&&ie.d(),le&&le.d()}}}function OD(n,e,t){var k,w,E,I,M,C,D,O;let i,r=$e,s=()=>(r(),r=Dt(l,P=>t(2,i=P)),l),o;He(n,Nn,P=>t(3,o=P)),n.$$.on_destroy.push(()=>r());let{flight:a}=e,{iconSet:l}=e;s();const h=Kc(a),d=(w=(k=a.sum)==null?void 0:k.sen)==null?void 0:w.split(",").length,m=(a==null?void 0:a.r)||((E=a==null?void 0:a.sw)==null?void 0:E.lat)!==0&&((I=a==null?void 0:a.sw)==null?void 0:I.lng)!==0&&((M=a==null?void 0:a.ne)==null?void 0:M.lat)!==0&&((C=a==null?void 0:a.ne)==null?void 0:C.lng)!==0,v=((O=(D=a==null?void 0:a.data)==null?void 0:D.mdl)==null?void 0:O.toLowerCase())=="unknown";return n.$$set=P=>{"flight"in P&&t(0,a=P.flight),"iconSet"in P&&s(t(1,l=P.iconSet))},[a,l,i,o,h,d,m,v]}class xD extends Wt{constructor(e){super(),Xt(this,e,OD,RD,zt,{flight:0,iconSet:1})}}function hp(n){let e,t,i,r,s,o,a;return{c(){e=A("div"),t=Re("svg"),i=Re("path"),r=ee(),s=A("p"),o=he(n[4]),this.h()},l(l){e=R(l,"DIV",{class:!0,title:!0});var h=T(e);t=Oe(h,"svg",{xmlns:!0,height:!0,viewBox:!0,width:!0,fill:!0,class:!0});var d=T(t);i=Oe(d,"path",{d:!0,class:!0}),T(i).forEach(_),d.forEach(_),r=te(h),s=R(h,"P",{style:!0,class:!0});var m=T(s);o=fe(m,n[4]),m.forEach(_),h.forEach(_),this.h()},h(){g(i,"d","M197-197q-54-55-85.5-127.5T80-480q0-84 31.5-156.5T197-763l57 57q-44 44-69 102t-25 124q0 67 25 125t69 101l-57 57Zm113-113q-32-33-51-76.5T240-480q0-51 19-94.5t51-75.5l57 57q-22 22-34.5 51T320-480q0 33 12.5 62t34.5 51l-57 57Zm170-90q-33 0-56.5-23.5T400-480q0-33 23.5-56.5T480-560q33 0 56.5 23.5T560-480q0 33-23.5 56.5T480-400Zm170 90-57-57q22-22 34.5-51t12.5-62q0-33-12.5-62T593-593l57-57q32 32 51 75.5t19 94.5q0 50-19 93.5T650-310Zm113 113-57-57q44-44 69-102t25-124q0-67-25-125t-69-101l57-57q54 54 85.5 126.5T880-480q0 83-31.5 155.5T763-197Z"),g(i,"class","svelte-43vc6d"),g(t,"xmlns","http://www.w3.org/2000/svg"),g(t,"height","18px"),g(t,"viewBox","0 -960 960 960"),g(t,"width","18px"),g(t,"fill","#666"),g(t,"class","svelte-43vc6d"),B(s,"font-family","monospace"),g(s,"class","svelte-43vc6d"),g(e,"class","row center-cross g4 svelte-43vc6d"),g(e,"title",a=n[4]>1?n[1]("flights.nSensorsDetectedCount",{values:{count:n[4]}}):n[1]("flights.sensorDetectedCount"))},m(l,h){Z(l,e,h),p(e,t),p(t,i),p(e,r),p(e,s),p(s,o)},p(l,h){h&2&&a!==(a=l[4]>1?l[1]("flights.nSensorsDetectedCount",{values:{count:l[4]}}):l[1]("flights.sensorDetectedCount"))&&g(e,"title",a)},d(l){l&&_(e)}}}function fp(n){let e,t="|",i,r,s,o,a=n[1]("flights.geofenceIntrusion")+"",l,h,d,m,v=n[0].sum.int.length+"",k;return{c(){e=A("p"),e.textContent=t,i=ee(),r=A("div"),s=Re("svg"),o=Re("title"),l=he(a),h=Re("path"),d=ee(),m=A("p"),k=he(v),this.h()},l(w){e=R(w,"P",{class:!0,"data-svelte-h":!0}),rn(e)!=="svelte-1ceyy2c"&&(e.textContent=t),i=te(w),r=R(w,"DIV",{class:!0});var E=T(r);s=Oe(E,"svg",{xmlns:!0,height:!0,viewBox:!0,width:!0,fill:!0,class:!0});var I=T(s);o=Oe(I,"title",{class:!0});var M=T(o);l=fe(M,a),M.forEach(_),h=Oe(I,"path",{d:!0,class:!0}),T(h).forEach(_),I.forEach(_),d=te(E),m=R(E,"P",{style:!0,class:!0});var C=T(m);k=fe(C,v),C.forEach(_),E.forEach(_),this.h()},h(){g(e,"class","svelte-43vc6d"),g(o,"class","svelte-43vc6d"),g(h,"d","M480-320q17 0 28.5-11.5T520-360q0-17-11.5-28.5T480-400q-17 0-28.5 11.5T440-360q0 17 11.5 28.5T480-320Zm-40-160h80v-200h-80v200Zm40 400q-139-35-229.5-159.5T160-516v-244l320-120 320 120v244q0 152-90.5 276.5T480-80Zm0-84q104-33 172-132t68-220v-189l-240-90-240 90v189q0 121 68 220t172 132Zm0-316Z"),g(h,"class","svelte-43vc6d"),g(s,"xmlns","http://www.w3.org/2000/svg"),g(s,"height","18px"),g(s,"viewBox","0 -960 960 960"),g(s,"width","18px"),g(s,"fill","#E02525"),g(s,"class","svelte-43vc6d"),B(m,"font-family","monospace"),B(m,"color","#E02525"),g(m,"class","svelte-43vc6d"),g(r,"class","row center-cross g4 svelte-43vc6d")},m(w,E){Z(w,e,E),Z(w,i,E),Z(w,r,E),p(r,s),p(s,o),p(o,l),p(s,h),p(r,d),p(r,m),p(m,k)},p(w,E){E&2&&a!==(a=w[1]("flights.geofenceIntrusion")+"")&&Ee(l,a),E&1&&v!==(v=w[0].sum.int.length+"")&&Ee(k,v)},d(w){w&&(_(e),_(i),_(r))}}}function dp(n){let e,t="|",i,r,s=n[0].sum.mh?n[0].sum.mh.toFixed(0)+" m":"",o;return{c(){e=A("p"),e.textContent=t,i=ee(),r=A("p"),o=he(s),this.h()},l(a){e=R(a,"P",{class:!0,"data-svelte-h":!0}),rn(e)!=="svelte-1ceyy2c"&&(e.textContent=t),i=te(a),r=R(a,"P",{class:!0});var l=T(r);o=fe(l,s),l.forEach(_),this.h()},h(){g(e,"class","svelte-43vc6d"),g(r,"class","svelte-43vc6d")},m(a,l){Z(a,e,l),Z(a,i,l),Z(a,r,l),p(r,o)},p(a,l){l&1&&s!==(s=a[0].sum.mh?a[0].sum.mh.toFixed(0)+" m":"")&&Ee(o,s)},d(a){a&&(_(e),_(i),_(r))}}}function FD(n){var W,Y;let e,t,i,r,s=Co(n[0].s)+"",o,a,l,h=Vs((n[0].e-n[0].s)/1e3)+"",d,m,v,k,w,E=(n[0].data.cs||n[0].data.icao)+"",I,M,C,D,O,P=(n[3]||!n[2]?n[1]("flights.noSerialNumberDetected"):n[2].toUpperCase())+"",F,V,$,G,U,H=((W=n[0].sum)==null?void 0:W.sen)&&hp(n),j=n[0].sum.int&&n[0].sum.int.length>0&&fp(n),Q=((Y=n[0].sum)==null?void 0:Y.mh)&&dp(n);return{c(){e=A("div"),t=A("div"),i=A("p"),r=A("b"),o=he(s),a=ee(),l=A("p"),d=he(h),m=ee(),v=A("div"),k=A("p"),w=A("b"),I=he(E),M=ee(),C=A("div"),D=A("div"),O=A("p"),F=he(P),V=ee(),$=A("div"),H&&H.c(),G=ee(),j&&j.c(),U=ee(),Q&&Q.c(),this.h()},l(q){e=R(q,"DIV",{class:!0,style:!0});var ne=T(e);t=R(ne,"DIV",{class:!0,style:!0});var J=T(t);i=R(J,"P",{style:!0,class:!0});var ge=T(i);r=R(ge,"B",{class:!0});var ie=T(r);o=fe(ie,s),ie.forEach(_),ge.forEach(_),a=te(J),l=R(J,"P",{style:!0,class:!0});var le=T(l);d=fe(le,h),le.forEach(_),J.forEach(_),m=te(ne),v=R(ne,"DIV",{class:!0});var pe=T(v);k=R(pe,"P",{class:!0});var ye=T(k);w=R(ye,"B",{class:!0});var be=T(w);I=fe(be,E),be.forEach(_),ye.forEach(_),M=te(pe),C=R(pe,"DIV",{class:!0});var re=T(C);D=R(re,"DIV",{class:!0,style:!0});var me=T(D);O=R(me,"P",{class:!0});var ke=T(O);F=fe(ke,P),ke.forEach(_),me.forEach(_),V=te(re),$=R(re,"DIV",{class:!0,style:!0});var X=T($);H&&H.l(X),G=te(X),j&&j.l(X),U=te(X),Q&&Q.l(X),X.forEach(_),re.forEach(_),pe.forEach(_),ne.forEach(_),this.h()},h(){g(r,"class","svelte-43vc6d"),B(i,"font-size","14px"),g(i,"class","svelte-43vc6d"),B(l,"font-size","10px"),B(l,"color","#666"),g(l,"class","svelte-43vc6d"),g(t,"class","column center-cross svelte-43vc6d"),B(t,"padding-block","3px"),B(t,"min-width","52px"),g(w,"class","svelte-43vc6d"),g(k,"class","truncate svelte-43vc6d"),g(O,"class","svelte-43vc6d"),g(D,"class","row space-main center-cross g4 svelte-43vc6d"),B(D,"color","#222"),B(D,"width","fit-content"),B(D,"font-size","13px"),g($,"class","row space-main center-cross g4 svelte-43vc6d"),B($,"color","#888"),B($,"width","fit-content"),B($,"font-size","13px"),g(C,"class","column svelte-43vc6d"),g(v,"class","svelte-43vc6d"),g(e,"class","row width100 info svelte-43vc6d"),B(e,"gap","10px"),B(e,"padding","4px 16px")},m(q,ne){Z(q,e,ne),p(e,t),p(t,i),p(i,r),p(r,o),p(t,a),p(t,l),p(l,d),p(e,m),p(e,v),p(v,k),p(k,w),p(w,I),p(v,M),p(v,C),p(C,D),p(D,O),p(O,F),p(C,V),p(C,$),H&&H.m($,null),p($,G),j&&j.m($,null),p($,U),Q&&Q.m($,null)},p(q,[ne]){var J,ge;ne&1&&s!==(s=Co(q[0].s)+"")&&Ee(o,s),ne&1&&h!==(h=Vs((q[0].e-q[0].s)/1e3)+"")&&Ee(d,h),ne&1&&E!==(E=(q[0].data.cs||q[0].data.icao)+"")&&Ee(I,E),ne&2&&P!==(P=(q[3]||!q[2]?q[1]("flights.noSerialNumberDetected"):q[2].toUpperCase())+"")&&Ee(F,P),(J=q[0].sum)!=null&&J.sen?H?H.p(q,ne):(H=hp(q),H.c(),H.m($,G)):H&&(H.d(1),H=null),q[0].sum.int&&q[0].sum.int.length>0?j?j.p(q,ne):(j=fp(q),j.c(),j.m($,U)):j&&(j.d(1),j=null),(ge=q[0].sum)!=null&&ge.mh?Q?Q.p(q,ne):(Q=dp(q),Q.c(),Q.m($,null)):Q&&(Q.d(1),Q=null)},i:$e,o:$e,d(q){q&&_(e),H&&H.d(),j&&j.d(),Q&&Q.d()}}}function BD(n,e,t){var l,h;let i;He(n,Nn,d=>t(1,i=d));let{flight:r}=e;const s=Kc(r),o=s.length==36&&s.charAt(8)=="-"&&s.charAt(13)=="-"&&s.charAt(18)=="-"&&s.charAt(23)=="-",a=(h=(l=r.sum)==null?void 0:l.sen)==null?void 0:h.split(",").length;return n.$$set=d=>{"flight"in d&&t(0,r=d.flight)},[r,i,s,o,a]}class $D extends Wt{constructor(e){super(),Xt(this,e,BD,FD,zt,{flight:0})}}const VD={aid:(n,e,t)=>{const i=Kc(n);return!!i&&!!e.aids&&e.aids.some(r=>i.toLowerCase().includes(r.toLowerCase()))},geofence_violations:(n,e,t)=>{var i;return((i=n==null?void 0:n.sum)==null?void 0:i.int)!=null&&n.sum.int.length>0},time_range:(n,e,t)=>{const i=new Date(n.s??0),r=new Date(n.e??0);return i>=e.start&&r<=e.end},transponder:(n,e,t)=>n.st===si.DRID,signal_detection:(n,e,t)=>n.st===si.SIGNAL_DETECTION,rectangle_area:(n,e,t)=>{const i=e.ne,r=e.sw,s=n.ne,o=n.sw;return s==null||o==null||i==null||r==null?!1:s.lat<=i.lat&&s.lng<=i.lng&&o.lat>=r.lat&&o.lng>=r.lng},did:(n,e,{sensorsAreas:t})=>{var s;const r=(n.sum.sen||"").split(",");for(const o of r){const a=(s=t.sensors.current)==null?void 0:s.get(Number(o));if(a&&a.type===2)return!0}return!1},rid:(n,e,{sensorsAreas:t})=>{var s;const r=(n.sum.sen||"").split(",");for(const o of r){const a=(s=t.sensors.current)==null?void 0:s.get(Number(o));if(a&&a.type===0)return!0}return!1},radar:(n,e,t)=>n.st===si.RADAR,hostile:(n,e,t)=>"rel"in n.data&&n.data.rel===an.HOSTILE,friendly:(n,e,t)=>"rel"in n.data&&n.data.rel===an.FRIENDLY,neutral:(n,e,t)=>"rel"in n.data&&n.data.rel===an.NEUTRAL,unknown_model:(n,e,t)=>"mdl"in n.data&&(n.data.mdl===null||n.data.mdl.toLowerCase()==="unknown"),location:(n,e,t)=>{var i;return((i=e.locations)==null?void 0:i.includes(n.r||""))??!1},modified:(n,e,t)=>{var s;return"ser"in n.data&&n.data.ser.length==36&&n.data.ser.charAt(8)=="-"&&n.data.ser.charAt(13)=="-"&&n.data.ser.charAt(18)=="-"&&n.data.ser.charAt(23)=="-"&&"mke"in n.data&&n.data.mke=="DJI"&&"mdl"in n.data&&((s=n.data.mdl)==null?void 0:s.toLowerCase())=="unknown"},operator_id:(n,e,t)=>"op"in n.data&&n.data.op!=null&&!!e.operator_ids&&e.operator_ids.some(i=>n.data.op.toLowerCase().includes(i.toLowerCase())),over_height:(n,e,t)=>{var i;return((i=n==null?void 0:n.sum)==null?void 0:i.mh)!=null&&e.height!=null&&n.sum.mh>e.height}};class zD{constructor(e,t,i){Ge(this,"historyCache",new Map);Ge(this,"dayFetchPromise",new Ot(null));Ge(this,"flightSummariesStore");Ge(this,"lastTodayFetchTime",null);Ge(this,"timezoneOffsetMinutes");Ge(this,"sensorsAreas");this.flightSummariesStore=e,this.timezoneOffsetMinutes=t,this.sensorsAreas=i}getDay(e,t){const i=this.historyCache.get(e);if(i!=null){const r=this.__filterFlights(i,t);return Promise.resolve(r)}return this.__fetchFlightsForDate(e).then(r=>this.__filterFlights(r,t))}getDayFromCache(e,t){const i=this.historyCache.get(e);return i!=null?this.__filterFlights(i,t):null}__fetchFlightsForDate(e){if(this.dayFetchPromise.current!=null)return this.dayFetchPromise.current;const t=new Date(e),i=t.getUTCFullYear(),r=String(t.getUTCMonth()+1).padStart(2,"0"),s=String(t.getUTCDate()).padStart(2,"0"),o=`${i}${r}${s}`;return Hr(`/api/v2/history/flights?day=${o}&tz=${(-this.timezoneOffsetMinutes/60).toFixed(2)}&signal=t&mannedAircrafts=f&radar=t`).then(a=>{this.historyCache.set(e,a);const l=new Date,h=Date.UTC(l.getFullYear(),l.getMonth(),l.getDate(),0,0,0,0);return e===h&&(this.lastTodayFetchTime=Date.now()),this.flightSummariesStore.updateFromFlights(a),a})}__filterFlights(e,t){return t==null||t.filters.length===0?[]:e.filter(i=>this.__evaluateFilterGroup(t,i))}__evaluateFilterGroup(e,t){const i=e.operator??"and",r=e.filters.map(s=>this.__isFilterGroup(s)?this.__evaluateFilterGroup(s,t):this.__filterAppliesToFlight(t,s));return i==="and"?r.every(s=>s):r.some(s=>s)}__isFilterGroup(e){return!("type"in e)}__filterAppliesToFlight(e,t){return VD[t.type](e,t,{sensorsAreas:this.sensorsAreas})}revalidateTodaysFlights(){const e=new Date,t=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0);this.__fetchFlightsForDate(t).then(i=>{this.historyCache.set(t,i),this.flightSummariesStore.updateFromFlights(i)})}}function Bl(n){const e=[],t=[],i=[],r=[];return n.did&&n.did.enabled&&t.push({type:"did"}),n.rid&&n.rid.enabled&&t.push({type:"rid"}),n.signal_detection&&n.signal_detection.enabled&&t.push({type:"signal_detection"}),n.radar&&n.radar.enabled&&t.push({type:"radar"}),n.rectangle_area&&n.rectangle_area.enabled&&e.push({type:"rectangle_area",ne:n.rectangle_area.ne,sw:n.rectangle_area.sw}),n.location&&n.location.enabled&&n.location.locations&&e.push({type:"location",locations:n.location.locations}),n.hostile&&n.hostile.enabled&&r.push({type:"hostile"}),n.friendly&&n.friendly.enabled&&r.push({type:"friendly"}),n.neutral&&n.neutral.enabled&&r.push({type:"neutral"}),n.unknown_model&&n.unknown_model.enabled&&e.push({type:"unknown_model"}),n.modified&&n.modified.enabled&&i.push({type:"modified"}),n.geofence_violations&&n.geofence_violations.enabled&&i.push({type:"geofence_violations"}),n.aid&&n.aid.enabled&&n.aid.aids&&n.aid.aids.length>0&&e.push({type:"aid",aids:n.aid.aids}),n.operator_id&&n.operator_id.enabled&&n.operator_id.operator_ids&&n.operator_id.operator_ids.length>0&&e.push({type:"operator_id",operator_ids:n.operator_id.operator_ids}),n.over_height&&n.over_height.enabled&&n.over_height.height!=null&&e.push({type:"over_height",height:n.over_height.height}),t.length===1?e.push(t[0]):e.push({operator:"or",filters:t}),i.length===1?e.push(i[0]):i.length>1&&e.push({operator:"or",filters:i}),r.length===1?e.push(r[0]):r.length>1&&e.push({operator:"or",filters:r}),{operator:"and",filters:e}}function GD(n){let e,t,i,r=n[1]("history.intrusions")+"",s,o,a,l=n[0].intruded+"",h,d,m,v,k,w,E=n[1]("history.hostile")+"",I,M,C,D=n[0].hostile+"",O,P,F,V,$,G,U=n[1]("history.violations")+"",H,j,Q,W=n[0].violations+"",Y;return{c(){e=A("div"),t=A("div"),i=A("p"),s=he(r),o=ee(),a=A("b"),h=he(l),d=ee(),m=A("hr"),v=ee(),k=A("div"),w=A("p"),I=he(E),M=ee(),C=A("b"),O=he(D),P=ee(),F=A("hr"),V=ee(),$=A("div"),G=A("p"),H=he(U),j=ee(),Q=A("b"),Y=he(W),this.h()},l(q){e=R(q,"DIV",{class:!0});var ne=T(e);t=R(ne,"DIV",{class:!0});var J=T(t);i=R(J,"P",{class:!0});var ge=T(i);s=fe(ge,r),ge.forEach(_),o=te(J),a=R(J,"B",{class:!0});var ie=T(a);h=fe(ie,l),ie.forEach(_),J.forEach(_),d=te(ne),m=R(ne,"HR",{style:!0}),v=te(ne),k=R(ne,"DIV",{class:!0});var le=T(k);w=R(le,"P",{class:!0});var pe=T(w);I=fe(pe,E),pe.forEach(_),M=te(le),C=R(le,"B",{class:!0});var ye=T(C);O=fe(ye,D),ye.forEach(_),le.forEach(_),P=te(ne),F=R(ne,"HR",{style:!0}),V=te(ne),$=R(ne,"DIV",{class:!0});var be=T($);G=R(be,"P",{class:!0});var re=T(G);H=fe(re,U),re.forEach(_),j=te(be),Q=R(be,"B",{class:!0});var me=T(Q);Y=fe(me,W),me.forEach(_),be.forEach(_),ne.forEach(_),this.h()},h(){g(i,"class","svelte-tdhl3z"),g(a,"class","svelte-tdhl3z"),g(t,"class","box svelte-tdhl3z"),Tn(t,"highlighted",n[0].intruded>0),B(m,"border-color","#eee"),g(w,"class","svelte-tdhl3z"),g(C,"class","svelte-tdhl3z"),g(k,"class","box svelte-tdhl3z"),Tn(k,"highlighted",n[0].hostile>0),B(F,"border-color","#eee"),g(G,"class","svelte-tdhl3z"),g(Q,"class","svelte-tdhl3z"),g($,"class","box svelte-tdhl3z"),Tn($,"highlighted",n[0].violations>0),g(e,"class","stats svelte-tdhl3z")},m(q,ne){Z(q,e,ne),p(e,t),p(t,i),p(i,s),p(t,o),p(t,a),p(a,h),p(e,d),p(e,m),p(e,v),p(e,k),p(k,w),p(w,I),p(k,M),p(k,C),p(C,O),p(e,P),p(e,F),p(e,V),p(e,$),p($,G),p(G,H),p($,j),p($,Q),p(Q,Y)},p(q,[ne]){ne&2&&r!==(r=q[1]("history.intrusions")+"")&&Ee(s,r),ne&1&&l!==(l=q[0].intruded+"")&&Ee(h,l),ne&1&&Tn(t,"highlighted",q[0].intruded>0),ne&2&&E!==(E=q[1]("history.hostile")+"")&&Ee(I,E),ne&1&&D!==(D=q[0].hostile+"")&&Ee(O,D),ne&1&&Tn(k,"highlighted",q[0].hostile>0),ne&2&&U!==(U=q[1]("history.violations")+"")&&Ee(H,U),ne&1&&W!==(W=q[0].violations+"")&&Ee(Y,W),ne&1&&Tn($,"highlighted",q[0].violations>0)},i:$e,o:$e,d(q){q&&_(e)}}}function HD(n,e,t){let i;He(n,Nn,s=>t(1,i=s));let{statsForDay:r}=e;return n.$$set=s=>{"statsForDay"in s&&t(0,r=s.statsForDay)},[r,i]}class UD extends Wt{constructor(e){super(),Xt(this,e,HD,GD,zt,{statsForDay:0})}}function qD(n){let e,t;return{c(){e=Re("svg"),t=Re("path"),this.h()},l(i){e=Oe(i,"svg",{xmlns:!0,height:!0,viewBox:!0,width:!0,fill:!0});var r=T(e);t=Oe(r,"path",{d:!0}),T(t).forEach(_),r.forEach(_),this.h()},h(){g(t,"d","M560-208 288-480l272-272 88 88-184 184 184 184-88 88Z"),g(e,"xmlns","http://www.w3.org/2000/svg"),g(e,"height","24px"),g(e,"viewBox","0 -960 960 960"),g(e,"width","24px"),g(e,"fill","#444455")},m(i,r){Z(i,e,r),p(e,t)},p:$e,d(i){i&&_(e)}}}function ZD(n){let e,t,i=n[8](`history.flightsCount.${n[15].flights.length===1?"1":n[15].flights.length===0?"0":"n"}`)+"",r;return{c(){e=A("p"),t=he("-- "),r=he(i),this.h()},l(s){e=R(s,"P",{style:!0});var o=T(e);t=fe(o,"-- "),r=fe(o,i),o.forEach(_),this.h()},h(){B(e,"font-weight","700"),B(e,"font-size","10px"),B(e,"color","#9D9D9D")},m(s,o){Z(s,e,o),p(e,t),p(e,r)},p(s,o){o[0]&33024&&i!==(i=s[8](`history.flightsCount.${s[15].flights.length===1?"1":s[15].flights.length===0?"0":"n"}`)+"")&&Ee(r,i)},d(s){s&&_(e)}}}function YD(n){let e,t=n[15].flights.length+"",i,r,s=n[8](`history.flightsCount.${n[15].flights.length===1?"1":n[15].flights.length===0?"0":"n"}`)+"",o;return{c(){e=A("p"),i=he(t),r=ee(),o=he(s),this.h()},l(a){e=R(a,"P",{style:!0});var l=T(e);i=fe(l,t),r=te(l),o=fe(l,s),l.forEach(_),this.h()},h(){B(e,"font-weight","700"),B(e,"font-size","10px"),B(e,"color","#9D9D9D")},m(a,l){Z(a,e,l),p(e,i),p(e,r),p(e,o)},p(a,l){l[0]&32768&&t!==(t=a[15].flights.length+"")&&Ee(i,t),l[0]&33024&&s!==(s=a[8](`history.flightsCount.${a[15].flights.length===1?"1":a[15].flights.length===0?"0":"n"}`)+"")&&Ee(o,s)},d(a){a&&_(e)}}}function jD(n){let e,t;return{c(){e=Re("svg"),t=Re("path"),this.h()},l(i){e=Oe(i,"svg",{xmlns:!0,height:!0,viewBox:!0,width:!0,fill:!0});var r=T(e);t=Oe(r,"path",{d:!0}),T(t).forEach(_),r.forEach(_),this.h()},h(){g(t,"d","M472-480 288-664l88-88 272 272-272 272-88-88 184-184Z"),g(e,"xmlns","http://www.w3.org/2000/svg"),g(e,"height","24px"),g(e,"viewBox","0 -960 960 960"),g(e,"width","24px"),g(e,"fill","#444455")},m(i,r){Z(i,e,r),p(e,t)},p:$e,d(i){i&&_(e)}}}function gp(n){let e,t,i;function r(o){n[30](o)}let s={min:new Date(new Date().setFullYear(new Date().getFullYear()-2)),max:new Date,locale:n[18],browseWithoutSelecting:!0};return n[7]!==void 0&&(s.value=n[7]),e=new J3({props:s}),un.push(()=>jn(e,"value",r)),{c(){st(e.$$.fragment)},l(o){ot(e.$$.fragment,o)},m(o,a){at(e,o,a),i=!0},p(o,a){const l={};a[0]&262144&&(l.locale=o[18]),!t&&a[0]&128&&(t=!0,l.value=o[7],Yn(()=>t=!1)),e.$set(l)},i(o){i||(de(e.$$.fragment,o),i=!0)},o(o){Ie(e.$$.fragment,o),i=!1},d(o){lt(e,o)}}}function WD(n){let e,t,i,r,s,o,a,l=k1(n[8],n[9])+"",h,d,m=n[8]("history.flights")+"",v,k,w,E,I,M,C=n[8]("history.today")+"",D,O,P,F,V,$,G,U,H,j,Q,W,Y,q;i=new fn({props:{class:"row center-cross day-arrow",disabled:n[13]&&!n[14].has(n[9]-Ar)||n[9]-Ar<0,onclick:n[28],$$slots:{default:[qD]},$$scope:{ctx:n}}});function ne(le,pe){var ye;return pe[0]&16896&&(w=null),w==null&&(w=!!((ye=le[14])!=null&&ye.get(le[9]))),w?YD:ZD}let J=ne(n,[-1,-1]),ge=J(n);U=new fn({props:{class:"row center-cross day-arrow",disabled:n[13]&&!n[14].has(n[9]+Ar)||n[9]+Ar>n[6],onclick:n[5],$$slots:{default:[jD]},$$scope:{ctx:n}}});let ie=n[10]&&gp(n);return{c(){e=A("div"),t=A("div"),st(i.$$.fragment),r=ee(),s=A("div"),o=A("div"),a=A("p"),h=he(l),d=ee(),v=he(m),k=ee(),ge.c(),E=ee(),I=A("div"),M=A("button"),D=he(C),P=ee(),F=A("button"),V=Re("svg"),$=Re("path"),G=ee(),st(U.$$.fragment),H=ee(),j=A("div"),ie&&ie.c(),this.h()},l(le){e=R(le,"DIV",{class:!0});var pe=T(e);t=R(pe,"DIV",{class:!0});var ye=T(t);ot(i.$$.fragment,ye),r=te(ye),s=R(ye,"DIV",{class:!0});var be=T(s);o=R(be,"DIV",{class:!0});var re=T(o);a=R(re,"P",{style:!0});var me=T(a);h=fe(me,l),d=te(me),v=fe(me,m),me.forEach(_),k=te(re),ge.l(re),re.forEach(_),E=te(be),I=R(be,"DIV",{class:!0});var ke=T(I);M=R(ke,"BUTTON",{class:!0});var X=T(M);D=fe(X,C),X.forEach(_),P=te(ke),F=R(ke,"BUTTON",{class:!0});var ue=T(F);V=Oe(ue,"svg",{xmlns:!0,height:!0,viewBox:!0,width:!0,fill:!0});var _e=T(V);$=Oe(_e,"path",{d:!0}),T($).forEach(_),_e.forEach(_),ue.forEach(_),ke.forEach(_),be.forEach(_),G=te(ye),ot(U.$$.fragment,ye),ye.forEach(_),H=te(pe),j=R(pe,"DIV",{class:!0,style:!0});var oe=T(j);ie&&ie.l(oe),oe.forEach(_),pe.forEach(_),this.h()},h(){B(a,"font-weight","800"),B(a,"color","#444455"),B(a,"text-transform","uppercase"),g(o,"class","column center-main"),g(M,"class","filter-button hoverable clickable svelte-az61k1"),M.disabled=O=n[9]===n[6],g($,"d","M200-80q-33 0-56.5-23.5T120-160v-560q0-33 23.5-56.5T200-800h40v-80h80v80h320v-80h80v80h40q33 0 56.5 23.5T840-720v560q0 33-23.5 56.5T760-80H200Zm0-80h560v-400H200v400Zm0-480h560v-80H200v80Zm0 0v-80 80Zm280 240q-17 0-28.5-11.5T440-440q0-17 11.5-28.5T480-480q17 0 28.5 11.5T520-440q0 17-11.5 28.5T480-400Zm-160 0q-17 0-28.5-11.5T280-440q0-17 11.5-28.5T320-480q17 0 28.5 11.5T360-440q0 17-11.5 28.5T320-400Zm320 0q-17 0-28.5-11.5T600-440q0-17 11.5-28.5T640-480q17 0 28.5 11.5T680-440q0 17-11.5 28.5T640-400ZM480-240q-17 0-28.5-11.5T440-280q0-17 11.5-28.5T480-320q17 0 28.5 11.5T520-280q0 17-11.5 28.5T480-240Zm-160 0q-17 0-28.5-11.5T280-280q0-17 11.5-28.5T320-320q17 0 28.5 11.5T360-280q0 17-11.5 28.5T320-240Zm320 0q-17 0-28.5-11.5T600-280q0-17 11.5-28.5T640-320q17 0 28.5 11.5T680-280q0 17-11.5 28.5T640-240Z"),g(V,"xmlns","http://www.w3.org/2000/svg"),g(V,"height","24px"),g(V,"viewBox","0 -960 960 960"),g(V,"width","24px"),g(V,"fill","#32515F"),g(F,"class","icon-button svelte-az61k1"),F.disabled=n[13],g(I,"class","row g8 center-cross"),g(s,"class","row g8 space-main width100"),g(t,"class","row center-cross space-main p816 g8"),g(j,"class","day-row-date-picker-portal svelte-az61k1"),g(j,"style",Q=`top: ${n[16]}px; left: ${n[17]}px;`),g(e,"class","day-row-sticky svelte-az61k1")},m(le,pe){Z(le,e,pe),p(e,t),at(i,t,null),p(t,r),p(t,s),p(s,o),p(o,a),p(a,h),p(a,d),p(a,v),p(o,k),ge.m(o,null),p(s,E),p(s,I),p(I,M),p(M,D),p(I,P),p(I,F),p(F,V),p(V,$),n[29](F),p(t,G),at(U,t,null),p(e,H),p(e,j),ie&&ie.m(j,null),n[31](j),W=!0,Y||(q=[nt(M,"click",n[19]),nt(F,"click",n[27]),Vl(XD.call(null,j))],Y=!0)},p(le,pe){const ye={};pe[0]&25088&&(ye.disabled=le[13]&&!le[14].has(le[9]-Ar)||le[9]-Ar<0),pe[0]&16&&(ye.onclick=le[28]),pe[1]&4&&(ye.$$scope={dirty:pe,ctx:le}),i.$set(ye),(!W||pe[0]&768)&&l!==(l=k1(le[8],le[9])+"")&&Ee(h,l),(!W||pe[0]&256)&&m!==(m=le[8]("history.flights")+"")&&Ee(v,m),J===(J=ne(le,pe))&&ge?ge.p(le,pe):(ge.d(1),ge=J(le),ge&&(ge.c(),ge.m(o,null))),(!W||pe[0]&256)&&C!==(C=le[8]("history.today")+"")&&Ee(D,C),(!W||pe[0]&576&&O!==(O=le[9]===le[6]))&&(M.disabled=O),(!W||pe[0]&8192)&&(F.disabled=le[13]);const be={};pe[0]&25152&&(be.disabled=le[13]&&!le[14].has(le[9]+Ar)||le[9]+Ar>le[6]),pe[0]&32&&(be.onclick=le[5]),pe[1]&4&&(be.$$scope={dirty:pe,ctx:le}),U.$set(be),le[10]?ie?(ie.p(le,pe),pe[0]&1024&&de(ie,1)):(ie=gp(le),ie.c(),de(ie,1),ie.m(j,null)):ie&&(bt(),Ie(ie,1,1,()=>{ie=null}),wt()),(!W||pe[0]&196608&&Q!==(Q=`top: ${le[16]}px; left: ${le[17]}px;`))&&g(j,"style",Q)},i(le){W||(de(i.$$.fragment,le),de(U.$$.fragment,le),de(ie),W=!0)},o(le){Ie(i.$$.fragment,le),Ie(U.$$.fragment,le),Ie(ie),W=!1},d(le){le&&_(e),lt(i),ge.d(),n[29](null),lt(U),ie&&ie.d(),n[31](null),Y=!1,Bn(q)}}}function XD(n){const e=n.parentNode,t=document.createComment("datepicker-portal");return e==null||e.insertBefore(t,n),document.body.appendChild(n),{destroy:()=>{var i,r;(i=t.parentNode)==null||i.insertBefore(n,t),(r=t.parentNode)==null||r.removeChild(t)}}}function KD(n){return new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),0,0,0,0)).getTime()}function JD(n,e,t){let i,r,s,o,a=$e,l=()=>(a(),a=Dt($,X=>t(9,o=X)),$),h,d,m=$e,v=()=>(m(),m=Dt(F,X=>t(13,d=X)),F),k,w=$e,E=()=>(w(),w=Dt(V,X=>t(14,k=X)),V),I,M=$e,C=()=>(M(),M=Dt(G,X=>t(15,I=X)),G),D,O,P;He(n,Nn,X=>t(8,s=X)),n.$$.on_destroy.push(()=>a()),n.$$.on_destroy.push(()=>m()),n.$$.on_destroy.push(()=>w()),n.$$.on_destroy.push(()=>M());let{isLoading:F}=e;v();let{computedFlights:V}=e;E();let{selectedDate:$}=e;l();let{flightsForDay:G}=e;C();let{getPreviousDay:U}=e,{getNextDay:H}=e,{today:j}=e;function Q(){q.set(!1),$.set(j)}let W=new Date($.current);const Y=new Ot({weekdays:[],months:[],weekStartsOn:1});He(n,Y,X=>t(18,P=X));const q=new Ot(!1);He(n,q,X=>t(10,h=X));const ne=new Ot(null);He(n,ne,X=>t(11,i=X));const J=new Ot(null);He(n,J,X=>t(12,r=X));const ge=new Ot(0);He(n,ge,X=>t(16,D=X));const ie=new Ot(0);He(n,ie,X=>t(17,O=X));function le(){if(!q.current)return;const X=ne.current;if(X==null)return;const ue=X.getBoundingClientRect(),_e=Math.round(ue.bottom+12);let oe=320;J.current!=null&&(oe=J.current.getBoundingClientRect().width||oe);let ae=Math.round(ue.right-oe);const Se=8;ae=Math.max(Se,Math.min(ae,window.innerWidth-oe-Se)),ge.set(_e),ie.set(ae)}async function pe(){const X=!q.current;q.set(X),X&&(await Xc(),le())}function ye(X){if(!q.current)return;const ue=X.target;ue&&(r!=null&&r.contains(ue)||i!=null&&i.contains(ue))||q.set(!1)}mi(()=>{document.addEventListener("mousedown",ye),window.addEventListener("resize",le),window.addEventListener("scroll",le,!0)}),ls(()=>{document.removeEventListener("mousedown",ye),window.removeEventListener("resize",le),window.removeEventListener("scroll",le,!0)});const be=()=>{U(),le()};function re(X){un[X?"unshift":"push"](()=>{i=X,ne.set(i)})}function me(X){W=X,t(7,W),t(9,o)}function ke(X){un[X?"unshift":"push"](()=>{r=X,J.set(r)})}return n.$$set=X=>{"isLoading"in X&&v(t(0,F=X.isLoading)),"computedFlights"in X&&E(t(1,V=X.computedFlights)),"selectedDate"in X&&l(t(2,$=X.selectedDate)),"flightsForDay"in X&&C(t(3,G=X.flightsForDay)),"getPreviousDay"in X&&t(4,U=X.getPreviousDay),"getNextDay"in X&&t(5,H=X.getNextDay),"today"in X&&t(6,j=X.today)},n.$$.update=()=>{if(n.$$.dirty[0]&512&&t(7,W=new Date(o)),n.$$.dirty[0]&1668&&W&&h){const X=KD(W);X!==o&&($.set(X),q.set(!1))}if(n.$$.dirty[0]&256){const X=Array(7).fill(null).map((_e,oe)=>s(`datepicker.weekdays.${oe}`)),ue=Array(12).fill(null).map((_e,oe)=>s(`datepicker.months.${oe}`));Y.set({weekdays:X,months:ue,weekStartsOn:1})}},[F,V,$,G,U,H,j,W,s,o,h,i,r,d,k,I,D,O,P,Q,Y,q,ne,J,ge,ie,le,pe,be,re,me,ke]}class QD extends Wt{constructor(e){super(),Xt(this,e,JD,WD,zt,{isLoading:0,computedFlights:1,selectedDate:2,flightsForDay:3,getPreviousDay:4,getNextDay:5,today:6},null,[-1,-1])}}function eA(n){let e,t=n[2](`history.filters.${n[0].key}`)+"",i,r,s;return{c(){e=A("button"),i=he(t),this.h()},l(o){e=R(o,"BUTTON",{class:!0});var a=T(e);i=fe(a,t),a.forEach(_),this.h()},h(){g(e,"class","filter-button hoverable clickable svelte-6eo90v"),Tn(e,"active",n[1].enabled)},m(o,a){Z(o,e,a),p(e,i),r||(s=nt(e,"click",function(){Eo(n[0].toggleFunction)&&n[0].toggleFunction.apply(this,arguments)}),r=!0)},p(o,[a]){n=o,a&5&&t!==(t=n[2](`history.filters.${n[0].key}`)+"")&&Ee(i,t),a&2&&Tn(e,"active",n[1].enabled)},i:$e,o:$e,d(o){o&&_(e),r=!1,s()}}}function tA(n,e,t){let i,r;He(n,Nn,a=>t(2,r=a));let{filter:s}=e;const o=s.store;return He(n,o,a=>t(1,i=a)),n.$$set=a=>{"filter"in a&&t(0,s=a.filter)},[s,i,r,o]}class v0 extends Wt{constructor(e){super(),Xt(this,e,tA,eA,zt,{filter:0})}}function mp(n,e,t){const i=n.slice();return i[54]=e[t],i[56]=t,i}function _p(n,e,t){const i=n.slice();return i[14]=e[t],i[58]=t,i}function pp(n){let e,t=Bt(n[0]),i=[];for(let r=0;r<t.length;r+=1)i[r]=yp(_p(n,t,r));return{c(){for(let r=0;r<i.length;r+=1)i[r].c();e=dt()},l(r){for(let s=0;s<i.length;s+=1)i[s].l(r);e=dt()},m(r,s){for(let o=0;o<i.length;o+=1)i[o]&&i[o].m(r,s);Z(r,e,s)},p(r,s){if(s[0]&132897){t=Bt(r[0]);let o;for(o=0;o<t.length;o+=1){const a=_p(r,t,o);i[o]?i[o].p(a,s):(i[o]=yp(a),i[o].c(),i[o].m(e.parentNode,e))}for(;o<i.length;o+=1)i[o].d(1);i.length=t.length}},d(r){r&&_(e),ui(i,r)}}}function nA(n){let e=n[14][n[10]]+"",t;return{c(){t=he(e)},l(i){t=fe(i,e)},m(i,r){Z(i,t,r)},p(i,r){r[0]&1025&&e!==(e=i[14][i[10]]+"")&&Ee(t,e)},d(i){i&&_(t)}}}function iA(n){let e=n[14]+"",t;return{c(){t=he(e)},l(i){t=fe(i,e)},m(i,r){Z(i,t,r)},p(i,r){r[0]&1&&e!==(e=i[14]+"")&&Ee(t,e)},d(i){i&&_(t)}}}function vp(n){let e,t="",i,r;function s(){return n[43](n[58])}return{c(){e=A("span"),e.textContent=t,this.h()},l(o){e=R(o,"SPAN",{class:!0,"data-svelte-h":!0}),rn(e)!=="svelte-12vn9wg"&&(e.textContent=t),this.h()},h(){g(e,"class","svelte-tags-input-tag-remove svelte-b5mxss")},m(o,a){Z(o,e,a),i||(r=nt(e,"pointerdown",s),i=!0)},p(o,a){n=o},d(o){o&&_(e),i=!1,r()}}}function yp(n){let e,t,i,r,s;function o(m,v){return typeof m[14]=="string"?iA:nA}let a=o(n),l=a(n),h=!n[5]&&!n[8]&&vp(n);function d(){return n[44](n[14])}return{c(){e=A("button"),l.c(),t=ee(),h&&h.c(),i=ee(),this.h()},l(m){e=R(m,"BUTTON",{type:!0,class:!0});var v=T(e);l.l(v),t=te(v),h&&h.l(v),i=te(v),v.forEach(_),this.h()},h(){g(e,"type","button"),g(e,"class","svelte-tags-input-tag svelte-b5mxss")},m(m,v){Z(m,e,v),l.m(e,null),p(e,t),h&&h.m(e,null),p(e,i),r||(s=nt(e,"click",d),r=!0)},p(m,v){n=m,a===(a=o(n))&&l?l.p(n,v):(l.d(1),l=a(n),l&&(l.c(),l.m(e,t))),!n[5]&&!n[8]?h?h.p(n,v):(h=vp(n),h.c(),h.m(e,i)):h&&(h.d(1),h=null)},d(m){m&&_(e),l.d(),h&&h.d(),r=!1,s()}}}function bp(n){let e,t,i,r=Bt(n[11]),s=[];for(let o=0;o<r.length;o+=1)s[o]=wp(mp(n,r,o));return{c(){e=A("div"),t=A("ul");for(let o=0;o<s.length;o+=1)s[o].c();this.h()},l(o){e=R(o,"DIV",{class:!0});var a=T(e);t=R(a,"UL",{id:!0,class:!0});var l=T(t);for(let h=0;h<s.length;h+=1)s[h].l(l);l.forEach(_),a.forEach(_),this.h()},h(){g(t,"id",i=n[4]+"_matchs"),g(t,"class","svelte-tags-input-matchs svelte-b5mxss"),g(e,"class","svelte-tags-input-matchs-parent svelte-b5mxss")},m(o,a){Z(o,e,a),p(e,t);for(let l=0;l<s.length;l+=1)s[l]&&s[l].m(t,null)},p(o,a){if(a[0]&75776){r=Bt(o[11]);let l;for(l=0;l<r.length;l+=1){const h=mp(o,r,l);s[l]?s[l].p(h,a):(s[l]=wp(h),s[l].c(),s[l].m(t,null))}for(;l<s.length;l+=1)s[l].d(1);s.length=r.length}a[0]&16&&i!==(i=o[4]+"_matchs")&&g(t,"id",i)},d(o){o&&_(e),ui(s,o)}}}function wp(n){let e,t,i=n[54].search+"",r,s,o;function a(){return n[48](n[54])}return{c(){e=A("li"),t=new Ua(!1),r=ee(),this.h()},l(l){e=R(l,"LI",{tabindex:!0,class:!0});var h=T(e);t=qa(h,!1),r=te(h),h.forEach(_),this.h()},h(){t.a=r,g(e,"tabindex","-1"),g(e,"class","svelte-b5mxss"),Tn(e,"focus",n[56]===n[13])},m(l,h){Z(l,e,h),t.m(i,e),p(e,r),s||(o=nt(e,"pointerdown",ro(a)),s=!0)},p(l,h){n=l,h[0]&2048&&i!==(i=n[54].search+"")&&t.p(i),h[0]&8192&&Tn(e,"focus",n[56]===n[13])},d(l){l&&_(e),s=!1,o()}}}function rA(n){let e,t,i,r,s,o,a,l,h,d,m,v,k=n[0].length>0&&pp(n),w=n[2]&&n[11].length>0&&bp(n);return{c(){e=A("div"),t=A("label"),i=he(n[6]),s=ee(),k&&k.c(),o=ee(),a=A("input"),h=ee(),w&&w.c(),d=dt(),this.h()},l(E){e=R(E,"DIV",{class:!0});var I=T(e);t=R(I,"LABEL",{for:!0,class:!0});var M=T(t);i=fe(M,n[6]),M.forEach(_),s=te(I),k&&k.l(I),o=te(I),a=R(I,"INPUT",{type:!0,id:!0,name:!0,class:!0,placeholder:!0,autocomplete:!0}),I.forEach(_),h=te(E),w&&w.l(E),d=dt(),this.h()},h(){g(t,"for",n[4]),g(t,"class",r=Ui(n[7]?"":"sr-only")+" svelte-b5mxss"),g(a,"type","text"),g(a,"id",n[4]),g(a,"name",n[3]),g(a,"class","svelte-tags-input svelte-b5mxss"),g(a,"placeholder",n[1]),a.disabled=l=n[5]||n[8],g(a,"autocomplete","off"),g(e,"class","svelte-tags-input-layout svelte-b5mxss"),Tn(e,"sti-layout-disable",n[5]),Tn(e,"sti-layout-readonly",n[8])},m(E,I){Z(E,e,I),p(e,t),p(t,i),p(e,s),k&&k.m(e,null),p(e,o),p(e,a),fi(a,n[14]),n[47](e),Z(E,h,I),w&&w.m(E,I),Z(E,d,I),m||(v=[nt(a,"input",n[45]),nt(a,"keydown",n[15]),nt(a,"keyup",n[23]),nt(a,"paste",n[18]),nt(a,"drop",n[19]),nt(a,"focus",n[20]),nt(a,"blur",n[46]),nt(a,"pointerdown",n[22])],m=!0)},p(E,I){I[0]&64&&Ee(i,E[6]),I[0]&16&&g(t,"for",E[4]),I[0]&128&&r!==(r=Ui(E[7]?"":"sr-only")+" svelte-b5mxss")&&g(t,"class",r),E[0].length>0?k?k.p(E,I):(k=pp(E),k.c(),k.m(e,o)):k&&(k.d(1),k=null),I[0]&16&&g(a,"id",E[4]),I[0]&8&&g(a,"name",E[3]),I[0]&2&&g(a,"placeholder",E[1]),I[0]&288&&l!==(l=E[5]||E[8])&&(a.disabled=l),I[0]&16384&&a.value!==E[14]&&fi(a,E[14]),I[0]&32&&Tn(e,"sti-layout-disable",E[5]),I[0]&256&&Tn(e,"sti-layout-readonly",E[8]),E[2]&&E[11].length>0?w?w.p(E,I):(w=bp(E),w.c(),w.m(d.parentNode,d)):w&&(w.d(1),w=null)},i:$e,o:$e,d(E){E&&(_(e),_(h),_(d)),k&&k.d(),n[47](null),w&&w.d(E),m=!1,Bn(v)}}}function sA(n){return window.clipboardData?window.clipboardData.getData("Text"):n.clipboardData?n.clipboardData.getData("text/plain"):""}function oA(n){const e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"};return(""+n).replace(/[&<>"'\/]/g,t=>e[t])}function aA(){return"sti_"+Math.random().toString(36).substring(2,11)}function lA(n,e,t){let i,r,s,o="",a=[],l=Fe=>Fe.replace(/[-\\^$*+?.()|[\]{}]/g,"\\$&"),{tags:h}=e,{addKeys:d}=e,{maxTags:m}=e,{onlyUnique:v}=e,{removeKeys:k}=e,{placeholder:w}=e,{allowPaste:E}=e,{allowDrop:I}=e,{splitWith:M}=e,{autoComplete:C}=e,{autoCompleteFilter:D}=e,{autoCompleteKey:O}=e,{autoCompleteMarkupKey:P}=e,{autoCompleteStartFocused:F}=e,{name:V}=e,{id:$}=e,{allowBlur:G}=e,{disable:U}=e,{minChars:H}=e,{onlyAutocomplete:j}=e,{labelText:Q}=e,{labelShow:W}=e,{readonly:Y}=e,{onTagClick:q}=e,{autoCompleteShowKey:ne}=e,{onTagAdded:J}=e,{onTagRemoved:ge}=e,{cleanOnBlur:ie}=e,{customValidation:le}=e,pe,ye=w;function be(Fe){var Ue;const Pe=document.getElementById(s),Ve=((Ue=Pe==null?void 0:Pe.querySelector("li.focus"))==null?void 0:Ue.textContent)??Fe.target.value;d&&d.forEach(function(Ke){var We;Ke===Fe.keyCode&&(Ve&&Fe.preventDefault(),C&&j&&document.getElementById(s)?re((We=a==null?void 0:a[r])==null?void 0:We.label):re(Ve))}),k&&k.forEach(function(Ke){Ke===Fe.keyCode&&o===""&&(h.pop(),t(0,h),t(11,a=[]),document.getElementById($).readOnly=!1,t(1,w=ye),document.getElementById($).focus())}),Fe.keyCode===40&&C&&document.getElementById(s)?(t(13,r++,r),(r>=a.length||r<0)&&t(13,r=0)):Fe.keyCode===38?(t(13,r--,r),(r<0||r>=a.length)&&t(13,r=a.length-1)):Fe.keyCode===27&&(t(11,a=[]),document.getElementById($).focus())}function re(Fe){if(typeof Fe=="object"&&Fe!==null){if(!O)return console.error("'autoCompleteKey' is necessary if 'autoComplete' result is an array of objects");if(v&&(h==null?void 0:h.find(Ve=>Ve[O]===Fe[O])))return;var Pe=Fe;Fe=Fe[O].trim()}else Fe=Fe.trim();Fe!=""&&(m&&h.length==m||v&&h.includes(Fe)||j&&a.length===0||le&&!le(Fe)||(h.push(Pe||Fe),t(0,h),t(14,o=""),J(Fe,h),t(11,a=[]),t(13,r=i),document.getElementById($).focus(),m&&h.length==m&&(document.getElementById($).readOnly=!0,t(1,w=""))))}function me(Fe){h.splice(Fe,1),ge(h[Fe],h),t(0,h),t(11,a=[]),document.getElementById($).readOnly=!1,t(1,w=ye),document.getElementById($).focus()}function ke(Fe){if(!E)return;Fe.preventDefault();const Pe=sA(Fe);ae(Pe).map(je=>re(je))}function X(Fe){if(!I)return;Fe.preventDefault();const Pe=Fe.dataTransfer.getData("Text");ae(Pe).map(je=>re(je))}function ue(){pe.classList.add("focus")}function _e(Fe,Pe){var je;pe.classList.remove("focus"),G&&(a.length&&r>-1?re((je=a==null?void 0:a[r])==null?void 0:je.label):a.length||(Fe.preventDefault(),re(Pe))),ie&&t(14,o=""),t(11,a=[]),t(13,r=i)}function oe(){H==0&&Me()}function ae(Fe){return Fe.split(M).map(Pe=>Pe.trim())}function Se(Fe,Pe){return oA(Pe).replace(RegExp(l(Fe.toLowerCase()),"i"),"<strong>$&</strong>")}async function Me(Fe){if(!C||m&&h.length>=m)return;let Pe=Fe?Fe.target.value:"",je=[];if(Array.isArray(C)&&(je=C),typeof C=="function"&&(C.constructor.name==="AsyncFunction"?je=await C(Pe):je=C(Pe)),je.constructor.name==="Promise"&&(je=await je),H>0&&Pe==""||Fe&&Fe.keyCode===27||Pe.length<H){t(11,a=[]);return}let Ve=je;if(typeof je[0]=="object"&&je!==null){if(!O)return console.error("'autoCompleteValue' is necessary if 'autoComplete' result is an array of objects");D!==!1&&(Ve=je.filter(Ue=>Ue[O].toLowerCase().includes(Pe.toLowerCase()))),Ve=Ve.map(Ue=>({label:Ue,search:P?Ue[P]:Se(Pe,Ue[O])}))}else D!==!1&&(Ve=je.filter(Ue=>Ue.toLowerCase().includes(Pe.toLowerCase()))),Ve=Ve.map(Ue=>({label:Ue,search:Se(Pe,Ue)}));v===!0&&!O&&(Ve=Ve.filter(Ue=>!h.includes(Ue.label))),t(11,a=Ve)}const we=Fe=>me(Fe),Te=Fe=>q(Fe);function Ae(){o=this.value,t(14,o)}const Ne=Fe=>_e(Fe,o);function De(Fe){un[Fe?"unshift":"push"](()=>{pe=Fe,t(12,pe)})}const _t=Fe=>re(Fe.label);return n.$$set=Fe=>{"tags"in Fe&&t(0,h=Fe.tags),"addKeys"in Fe&&t(24,d=Fe.addKeys),"maxTags"in Fe&&t(25,m=Fe.maxTags),"onlyUnique"in Fe&&t(26,v=Fe.onlyUnique),"removeKeys"in Fe&&t(27,k=Fe.removeKeys),"placeholder"in Fe&&t(1,w=Fe.placeholder),"allowPaste"in Fe&&t(28,E=Fe.allowPaste),"allowDrop"in Fe&&t(29,I=Fe.allowDrop),"splitWith"in Fe&&t(30,M=Fe.splitWith),"autoComplete"in Fe&&t(2,C=Fe.autoComplete),"autoCompleteFilter"in Fe&&t(31,D=Fe.autoCompleteFilter),"autoCompleteKey"in Fe&&t(32,O=Fe.autoCompleteKey),"autoCompleteMarkupKey"in Fe&&t(33,P=Fe.autoCompleteMarkupKey),"autoCompleteStartFocused"in Fe&&t(41,F=Fe.autoCompleteStartFocused),"name"in Fe&&t(3,V=Fe.name),"id"in Fe&&t(4,$=Fe.id),"allowBlur"in Fe&&t(34,G=Fe.allowBlur),"disable"in Fe&&t(5,U=Fe.disable),"minChars"in Fe&&t(35,H=Fe.minChars),"onlyAutocomplete"in Fe&&t(36,j=Fe.onlyAutocomplete),"labelText"in Fe&&t(6,Q=Fe.labelText),"labelShow"in Fe&&t(7,W=Fe.labelShow),"readonly"in Fe&&t(8,Y=Fe.readonly),"onTagClick"in Fe&&t(9,q=Fe.onTagClick),"autoCompleteShowKey"in Fe&&t(10,ne=Fe.autoCompleteShowKey),"onTagAdded"in Fe&&t(37,J=Fe.onTagAdded),"onTagRemoved"in Fe&&t(38,ge=Fe.onTagRemoved),"cleanOnBlur"in Fe&&t(39,ie=Fe.cleanOnBlur),"customValidation"in Fe&&t(40,le=Fe.customValidation)},n.$$.update=()=>{n.$$.dirty[0]&1&&t(0,h=h||[]),n.$$.dirty[0]&16777216&&t(24,d=d||[13]),n.$$.dirty[0]&33554432&&t(25,m=m||!1),n.$$.dirty[0]&67108864&&t(26,v=v||!1),n.$$.dirty[0]&134217728&&t(27,k=k||[8]),n.$$.dirty[0]&2&&t(1,w=w||""),n.$$.dirty[0]&268435456&&t(28,E=E||!1),n.$$.dirty[0]&536870912&&t(29,I=I||!1),n.$$.dirty[0]&1073741824&&t(30,M=M||","),n.$$.dirty[0]&4&&t(2,C=C||!1),n.$$.dirty[1]&1&&t(31,D=typeof D>"u"),n.$$.dirty[1]&2&&t(32,O=O||!1),n.$$.dirty[1]&4&&t(33,P=P||!1),n.$$.dirty[1]&1024&&t(42,i=F?0:-1),n.$$.dirty[0]&8&&t(3,V=V||"svelte-tags-input"),n.$$.dirty[0]&16&&t(4,$=$||aA()),n.$$.dirty[1]&8&&t(34,G=G||!1),n.$$.dirty[0]&32&&t(5,U=U||!1),n.$$.dirty[1]&16&&t(35,H=H??1),n.$$.dirty[1]&32&&t(36,j=j||!1),n.$$.dirty[0]&72&&t(6,Q=Q||V),n.$$.dirty[0]&128&&t(7,W=W||!1),n.$$.dirty[0]&256&&t(8,Y=Y||!1),n.$$.dirty[0]&512&&t(9,q=q||function(){}),n.$$.dirty[0]&1024|n.$$.dirty[1]&2&&t(10,ne=ne||O),n.$$.dirty[1]&64&&t(37,J=J||function(){}),n.$$.dirty[1]&128&&t(38,ge=ge||function(){}),n.$$.dirty[1]&256&&t(39,ie=ie||!1),n.$$.dirty[1]&512&&t(40,le=le||!1),n.$$.dirty[1]&2048&&t(13,r=i),n.$$.dirty[0]&16&&(s=$+"_matchs")},[h,w,C,V,$,U,Q,W,Y,q,ne,a,pe,r,o,be,re,me,ke,X,ue,_e,oe,Me,d,m,v,k,E,I,M,D,O,P,G,H,j,J,ge,ie,le,F,i,we,Te,Ae,Ne,De,_t]}class m4 extends Wt{constructor(e){super(),Xt(this,e,lA,rA,zt,{tags:0,addKeys:24,maxTags:25,onlyUnique:26,removeKeys:27,placeholder:1,allowPaste:28,allowDrop:29,splitWith:30,autoComplete:2,autoCompleteFilter:31,autoCompleteKey:32,autoCompleteMarkupKey:33,autoCompleteStartFocused:41,name:3,id:4,allowBlur:34,disable:5,minChars:35,onlyAutocomplete:36,labelText:6,labelShow:7,readonly:8,onTagClick:9,autoCompleteShowKey:10,onTagAdded:37,onTagRemoved:38,cleanOnBlur:39,customValidation:40},null,[-1,-1])}}function kp(n,e,t){const i=n.slice();return i[65]=e[t],i}function Ep(n,e,t){const i=n.slice();return i[65]=e[t],i}function Sp(n,e,t){const i=n.slice();return i[70]=e[t],i}function Ip(n,e,t){const i=n.slice();return i[65]=e[t],i}function Mp(n){let e,t,i=n[6]("history.filters.labels.serialNumberLabel")+"",r,s,o,a,l,h,d;function m(k){n[34](k)}let v={id:"serial-number-input",addKeys:[9,13,32,188],allowPaste:!0,splitWith:",",onlyUnique:!0,maxTags:10};return n[1]!==void 0&&(v.tags=n[1]),a=new m4({props:v}),un.push(()=>jn(a,"tags",m)),{c(){e=A("div"),t=A("label"),r=he(i),s=ee(),o=A("div"),st(a.$$.fragment),this.h()},l(k){e=R(k,"DIV",{});var w=T(e);t=R(w,"LABEL",{for:!0,style:!0});var E=T(t);r=fe(E,i),E.forEach(_),s=te(w),o=R(w,"DIV",{class:!0,title:!0});var I=T(o);ot(a.$$.fragment,I),I.forEach(_),w.forEach(_),this.h()},h(){g(t,"for","serial-number-input"),B(t,"font-size","12px"),B(t,"color","#666"),B(t,"cursor","default"),g(o,"class","filter-tags-input svelte-79828"),g(o,"title",h=n[6]("history.filters.tooltips.serialNumberTooltip"))},m(k,w){Z(k,e,w),p(e,t),p(t,r),p(e,s),p(e,o),at(a,o,null),d=!0},p(k,w){(!d||w[0]&64)&&i!==(i=k[6]("history.filters.labels.serialNumberLabel")+"")&&Ee(r,i);const E={};!l&&w[0]&2&&(l=!0,E.tags=k[1],Yn(()=>l=!1)),a.$set(E),(!d||w[0]&64&&h!==(h=k[6]("history.filters.tooltips.serialNumberTooltip")))&&g(o,"title",h)},i(k){d||(de(a.$$.fragment,k),d=!0)},o(k){Ie(a.$$.fragment,k),d=!1},d(k){k&&_(e),lt(a)}}}function Tp(n){let e,t,i=n[6]("history.filters.labels.operatorIDLabel")+"",r,s,o,a,l,h,d;function m(k){n[35](k)}let v={id:"operator-id-input",addKeys:[9,13,32,188],allowPaste:!0,splitWith:",",onlyUnique:!0,maxTags:10};return n[2]!==void 0&&(v.tags=n[2]),a=new m4({props:v}),un.push(()=>jn(a,"tags",m)),{c(){e=A("div"),t=A("label"),r=he(i),s=ee(),o=A("div"),st(a.$$.fragment),this.h()},l(k){e=R(k,"DIV",{});var w=T(e);t=R(w,"LABEL",{for:!0,style:!0});var E=T(t);r=fe(E,i),E.forEach(_),s=te(w),o=R(w,"DIV",{class:!0,title:!0});var I=T(o);ot(a.$$.fragment,I),I.forEach(_),w.forEach(_),this.h()},h(){g(t,"for","operator-id-input"),B(t,"font-size","12px"),B(t,"color","#666"),B(t,"cursor","default"),g(o,"class","filter-tags-input svelte-79828"),g(o,"title",h=n[6]("history.filters.tooltips.operatorIDTooltip"))},m(k,w){Z(k,e,w),p(e,t),p(t,r),p(e,s),p(e,o),at(a,o,null),d=!0},p(k,w){(!d||w[0]&64)&&i!==(i=k[6]("history.filters.labels.operatorIDLabel")+"")&&Ee(r,i);const E={};!l&&w[0]&4&&(l=!0,E.tags=k[2],Yn(()=>l=!1)),a.$set(E),(!d||w[0]&64&&h!==(h=k[6]("history.filters.tooltips.operatorIDTooltip")))&&g(o,"title",h)},i(k){d||(de(a.$$.fragment,k),d=!0)},o(k){Ie(a.$$.fragment,k),d=!1},d(k){k&&_(e),lt(a)}}}function Lp(n){let e,t=[],i=new Map,r,s,o,a=Bt(n[7]);const l=h=>h[65].key;for(let h=0;h<a.length;h+=1){let d=Ip(n,a,h),m=l(d);i.set(m,t[h]=Cp(m,d))}return{c(){e=A("div");for(let h=0;h<t.length;h+=1)t[h].c();r=ee(),s=A("div"),this.h()},l(h){e=R(h,"DIV",{class:!0});var d=T(e);for(let m=0;m<t.length;m+=1)t[m].l(d);r=te(d),s=R(d,"DIV",{class:!0}),T(s).forEach(_),d.forEach(_),this.h()},h(){g(s,"class","row-bg svelte-79828"),g(e,"class","top-filters-hiding-row line g4 svelte-79828")},m(h,d){Z(h,e,d);for(let m=0;m<t.length;m+=1)t[m]&&t[m].m(e,null);p(e,r),p(e,s),o=!0},p(h,d){d[0]&448&&(a=Bt(h[7]),bt(),t=vr(t,d,l,1,h,a,i,e,vs,Cp,r,Ip),wt())},i(h){if(!o){for(let d=0;d<a.length;d+=1)de(t[d]);o=!0}},o(h){for(let d=0;d<t.length;d+=1)Ie(t[d]);o=!1},d(h){h&&_(e);for(let d=0;d<t.length;d+=1)t[d].d()}}}function uA(n){let e,t;return e=new v0({props:{filter:n[65]}}),{c(){st(e.$$.fragment)},l(i){ot(e.$$.fragment,i)},m(i,r){at(e,i,r),t=!0},p(i,r){const s={};r[0]&128&&(s.filter=i[65]),e.$set(s)},i(i){t||(de(e.$$.fragment,i),t=!0)},o(i){Ie(e.$$.fragment,i),t=!1},d(i){lt(e,i)}}}function cA(n){let e,t=n[6](`history.filters.${n[65].key}`)+"",i,r,s;return{c(){e=A("button"),i=he(t),this.h()},l(o){e=R(o,"BUTTON",{class:!0});var a=T(e);i=fe(a,t),a.forEach(_),this.h()},h(){var o;g(e,"class","filter-button hoverable clickable svelte-79828"),Tn(e,"active",(o=n[8].locations)==null?void 0:o.includes(n[65].key))},m(o,a){Z(o,e,a),p(e,i),r||(s=nt(e,"click",function(){Eo(n[65].toggleFunction)&&n[65].toggleFunction.apply(this,arguments)}),r=!0)},p(o,a){var l;n=o,a[0]&192&&t!==(t=n[6](`history.filters.${n[65].key}`)+"")&&Ee(i,t),a[0]&384&&Tn(e,"active",(l=n[8].locations)==null?void 0:l.includes(n[65].key))},i:$e,o:$e,d(o){o&&_(e),r=!1,s()}}}function Cp(n,e){let t,i,r,s,o;const a=[cA,uA],l=[];function h(d,m){return d[65].type&&d[65].type==="location"?0:1}return i=h(e),r=l[i]=a[i](e),{key:n,first:null,c(){t=dt(),r.c(),s=dt(),this.h()},l(d){t=dt(),r.l(d),s=dt(),this.h()},h(){this.first=t},m(d,m){Z(d,t,m),l[i].m(d,m),Z(d,s,m),o=!0},p(d,m){e=d;let v=i;i=h(e),i===v?l[i].p(e,m):(bt(),Ie(l[v],1,1,()=>{l[v]=null}),wt(),r=l[i],r?r.p(e,m):(r=l[i]=a[i](e),r.c()),de(r,1),r.m(s.parentNode,s))},i(d){o||(de(r),o=!0)},o(d){Ie(r),o=!1},d(d){d&&(_(t),_(s)),l[i].d(d)}}}function hA(n){let e,t;return{c(){e=Re("svg"),t=Re("path"),this.h()},l(i){e=Oe(i,"svg",{xmlns:!0,height:!0,viewBox:!0,width:!0,fill:!0});var r=T(e);t=Oe(r,"path",{d:!0}),T(t).forEach(_),r.forEach(_),this.h()},h(){g(t,"d","M440-160q-17 0-28.5-11.5T400-200v-240L168-736q-15-20-4.5-42t36.5-22h560q26 0 36.5 22t-4.5 42L560-440v240q0 17-11.5 28.5T520-160h-80Zm40-308 198-252H282l198 252Zm0 0Z"),g(e,"xmlns","http://www.w3.org/2000/svg"),g(e,"height","24px"),g(e,"viewBox","0 -960 960 960"),g(e,"width","24px"),g(e,"fill","#444455")},m(i,r){Z(i,e,r),p(e,t)},d(i){i&&_(e)}}}function fA(n){let e,t;return{c(){e=Re("svg"),t=Re("path"),this.h()},l(i){e=Oe(i,"svg",{xmlns:!0,height:!0,viewBox:!0,width:!0,fill:!0});var r=T(e);t=Oe(r,"path",{d:!0}),T(t).forEach(_),r.forEach(_),this.h()},h(){g(t,"d","m592-481-57-57 143-182H353l-80-80h487q25 0 36 22t-4 42L592-481ZM791-56 560-287v87q0 17-11.5 28.5T520-160h-80q-17 0-28.5-11.5T400-200v-247L56-791l56-57 736 736-57 56ZM535-538Z"),g(e,"xmlns","http://www.w3.org/2000/svg"),g(e,"height","24px"),g(e,"viewBox","0 -960 960 960"),g(e,"width","24px"),g(e,"fill","#444455")},m(i,r){Z(i,e,r),p(e,t)},d(i){i&&_(e)}}}function Pp(n){let e,t,i,r,s,o=n[6]("history.locationFilters")+"",a,l,h,d,m,v=n[6]("history.filters.area")+"",k,w,E,I,M,C,D=n[6]("history.detectionFilters")+"",O,P,F,V,$,G,U,H,j=n[6]("history.violationFilters")+"",Q,W,Y,q,ne,J,ge,ie=Bt(n[21]),le=[];for(let ue=0;ue<ie.length;ue+=1)le[ue]=Np(Sp(n,ie,ue));let pe=Bt(n[22]),ye=[];for(let ue=0;ue<pe.length;ue+=1)ye[ue]=Dp(Ep(n,pe,ue));const be=ue=>Ie(ye[ue],1,1,()=>{ye[ue]=null});let re=Bt(n[23]),me=[];for(let ue=0;ue<re.length;ue+=1)me[ue]=Ap(kp(n,re,ue));const ke=ue=>Ie(me[ue],1,1,()=>{me[ue]=null});let X=n[10]&&Rp(n);return{c(){e=A("div"),t=A("hr"),i=ee(),r=A("div"),s=A("p"),a=he(o),l=ee(),h=A("div");for(let ue=0;ue<le.length;ue+=1)le[ue].c();d=ee(),m=A("button"),k=he(v),w=ee(),E=A("hr"),I=ee(),M=A("div"),C=A("p"),O=he(D),P=ee(),F=A("div");for(let ue=0;ue<ye.length;ue+=1)ye[ue].c();V=ee(),$=A("hr"),G=ee(),U=A("div"),H=A("p"),Q=he(j),W=ee(),Y=A("div");for(let ue=0;ue<me.length;ue+=1)me[ue].c();q=ee(),X&&X.c(),this.h()},l(ue){e=R(ue,"DIV",{class:!0,style:!0});var _e=T(e);t=R(_e,"HR",{}),i=te(_e),r=R(_e,"DIV",{class:!0});var oe=T(r);s=R(oe,"P",{style:!0});var ae=T(s);a=fe(ae,o),ae.forEach(_),l=te(oe),h=R(oe,"DIV",{class:!0});var Se=T(h);for(let Fe=0;Fe<le.length;Fe+=1)le[Fe].l(Se);d=te(Se),m=R(Se,"BUTTON",{class:!0});var Me=T(m);k=fe(Me,v),Me.forEach(_),Se.forEach(_),oe.forEach(_),w=te(_e),E=R(_e,"HR",{}),I=te(_e),M=R(_e,"DIV",{class:!0});var we=T(M);C=R(we,"P",{style:!0});var Te=T(C);O=fe(Te,D),Te.forEach(_),P=te(we),F=R(we,"DIV",{class:!0});var Ae=T(F);for(let Fe=0;Fe<ye.length;Fe+=1)ye[Fe].l(Ae);Ae.forEach(_),we.forEach(_),V=te(_e),$=R(_e,"HR",{}),G=te(_e),U=R(_e,"DIV",{class:!0});var Ne=T(U);H=R(Ne,"P",{style:!0});var De=T(H);Q=fe(De,j),De.forEach(_),W=te(Ne),Y=R(Ne,"DIV",{class:!0});var _t=T(Y);for(let Fe=0;Fe<me.length;Fe+=1)me[Fe].l(_t);q=te(_t),X&&X.l(_t),_t.forEach(_),Ne.forEach(_),_e.forEach(_),this.h()},h(){B(s,"color","#888"),B(s,"font-weight","bold"),B(s,"font-size","12px"),g(m,"class","filter-button hoverable clickable svelte-79828"),Tn(m,"active",n[5].enabled),g(h,"class","row wrap g8 center-cross"),g(r,"class","p816 column g4"),B(C,"color","#888"),B(C,"font-weight","bold"),B(C,"font-size","12px"),g(F,"class","row wrap g8 center-cross"),g(M,"class","p816 column g4"),B(H,"color","#888"),B(H,"font-weight","bold"),B(H,"font-size","12px"),g(Y,"class","row wrap g8 center-cross"),g(U,"class","p816 column g4"),g(e,"class","column g4"),B(e,"padding-bottom","8px")},m(ue,_e){Z(ue,e,_e),p(e,t),p(e,i),p(e,r),p(r,s),p(s,a),p(r,l),p(r,h);for(let oe=0;oe<le.length;oe+=1)le[oe]&&le[oe].m(h,null);p(h,d),p(h,m),p(m,k),p(e,w),p(e,E),p(e,I),p(e,M),p(M,C),p(C,O),p(M,P),p(M,F);for(let oe=0;oe<ye.length;oe+=1)ye[oe]&&ye[oe].m(F,null);p(e,V),p(e,$),p(e,G),p(e,U),p(U,H),p(H,Q),p(U,W),p(U,Y);for(let oe=0;oe<me.length;oe+=1)me[oe]&&me[oe].m(Y,null);p(Y,q),X&&X.m(Y,null),ne=!0,J||(ge=nt(m,"click",n[17]),J=!0)},p(ue,_e){if((!ne||_e[0]&64)&&o!==(o=ue[6]("history.locationFilters")+"")&&Ee(a,o),_e[0]&2359616){ie=Bt(ue[21]);let oe;for(oe=0;oe<ie.length;oe+=1){const ae=Sp(ue,ie,oe);le[oe]?le[oe].p(ae,_e):(le[oe]=Np(ae),le[oe].c(),le[oe].m(h,d))}for(;oe<le.length;oe+=1)le[oe].d(1);le.length=ie.length}if((!ne||_e[0]&64)&&v!==(v=ue[6]("history.filters.area")+"")&&Ee(k,v),(!ne||_e[0]&32)&&Tn(m,"active",ue[5].enabled),(!ne||_e[0]&64)&&D!==(D=ue[6]("history.detectionFilters")+"")&&Ee(O,D),_e[0]&4194304){pe=Bt(ue[22]);let oe;for(oe=0;oe<pe.length;oe+=1){const ae=Ep(ue,pe,oe);ye[oe]?(ye[oe].p(ae,_e),de(ye[oe],1)):(ye[oe]=Dp(ae),ye[oe].c(),de(ye[oe],1),ye[oe].m(F,null))}for(bt(),oe=pe.length;oe<ye.length;oe+=1)be(oe);wt()}if((!ne||_e[0]&64)&&j!==(j=ue[6]("history.violationFilters")+"")&&Ee(Q,j),_e[0]&8388608){re=Bt(ue[23]);let oe;for(oe=0;oe<re.length;oe+=1){const ae=kp(ue,re,oe);me[oe]?(me[oe].p(ae,_e),de(me[oe],1)):(me[oe]=Ap(ae),me[oe].c(),de(me[oe],1),me[oe].m(Y,q))}for(bt(),oe=re.length;oe<me.length;oe+=1)ke(oe);wt()}ue[10]?X?X.p(ue,_e):(X=Rp(ue),X.c(),X.m(Y,null)):X&&(X.d(1),X=null)},i(ue){if(!ne){for(let _e=0;_e<pe.length;_e+=1)de(ye[_e]);for(let _e=0;_e<re.length;_e+=1)de(me[_e]);ne=!0}},o(ue){ye=ye.filter(Boolean);for(let _e=0;_e<ye.length;_e+=1)Ie(ye[_e]);me=me.filter(Boolean);for(let _e=0;_e<me.length;_e+=1)Ie(me[_e]);ne=!1},d(ue){ue&&_(e),ui(le,ue),ui(ye,ue),ui(me,ue),X&&X.d(),J=!1,ge()}}}function Np(n){let e,t=n[6](`history.filters.${n[70]}`)+"",i,r,s;function o(){return n[36](n[70])}return{c(){e=A("button"),i=he(t),this.h()},l(a){e=R(a,"BUTTON",{class:!0});var l=T(e);i=fe(l,t),l.forEach(_),this.h()},h(){var a;g(e,"class","filter-button hoverable clickable svelte-79828"),Tn(e,"active",(a=n[8].locations)==null?void 0:a.includes(n[70]))},m(a,l){Z(a,e,l),p(e,i),r||(s=nt(e,"click",o),r=!0)},p(a,l){var h;n=a,l[0]&64&&t!==(t=n[6](`history.filters.${n[70]}`)+"")&&Ee(i,t),l[0]&2097408&&Tn(e,"active",(h=n[8].locations)==null?void 0:h.includes(n[70]))},d(a){a&&_(e),r=!1,s()}}}function Dp(n){let e,t;return e=new v0({props:{filter:n[65]}}),{c(){st(e.$$.fragment)},l(i){ot(e.$$.fragment,i)},m(i,r){at(e,i,r),t=!0},p:$e,i(i){t||(de(e.$$.fragment,i),t=!0)},o(i){Ie(e.$$.fragment,i),t=!1},d(i){lt(e,i)}}}function Ap(n){let e,t;return e=new v0({props:{filter:n[65]}}),{c(){st(e.$$.fragment)},l(i){ot(e.$$.fragment,i)},m(i,r){at(e,i,r),t=!0},p:$e,i(i){t||(de(e.$$.fragment,i),t=!0)},o(i){Ie(e.$$.fragment,i),t=!1},d(i){lt(e,i)}}}function Rp(n){let e,t,i=n[6]("history.filters.labels.overHeightLabel")+"",r,s,o,a,l,h;return{c(){e=A("div"),t=A("label"),r=he(i),s=ee(),o=A("input"),this.h()},l(d){e=R(d,"DIV",{class:!0});var m=T(e);t=R(m,"LABEL",{for:!0,style:!0});var v=T(t);r=fe(v,i),v.forEach(_),s=te(m),o=R(m,"INPUT",{type:!0,inputmode:!0,pattern:!0,maxlength:!0,max:!0,class:!0,id:!0}),m.forEach(_),this.h()},h(){g(t,"for","over-height-input"),B(t,"font-size","12px"),B(t,"color","#666"),B(t,"cursor","default"),g(o,"type","text"),g(o,"inputmode","numeric"),g(o,"pattern","[0-9]*"),g(o,"maxlength","5"),g(o,"max","10000"),o.value=a=n[10].height??"",g(o,"class","filter-input svelte-79828"),g(o,"id","over-height-input"),g(e,"class","width100")},m(d,m){Z(d,e,m),p(e,t),p(t,r),p(e,s),p(e,o),l||(h=nt(o,"input",n[19]),l=!0)},p(d,m){m[0]&64&&i!==(i=d[6]("history.filters.labels.overHeightLabel")+"")&&Ee(r,i),m[0]&1024&&a!==(a=d[10].height??"")&&o.value!==a&&(o.value=a)},d(d){d&&_(e),l=!1,h()}}}function dA(n){let e,t,i,r,s,o,a,l,h,d,m,v,k,w,E=n[4]&&Mp(n),I=n[3]&&Tp(n),M=n[7].length>0&&Lp(n);function C(F,V){return F[9]?fA:hA}let D=C(n),O=D(n),P=n[9]&&Pp(n);return{c(){e=A("div"),t=A("div"),E&&E.c(),i=ee(),I&&I.c(),r=ee(),s=A("div"),o=A("div"),M&&M.c(),a=ee(),l=A("div"),h=A("button"),O.c(),d=ee(),P&&P.c(),m=dt(),this.h()},l(F){e=R(F,"DIV",{class:!0});var V=T(e);t=R(V,"DIV",{class:!0});var $=T(t);E&&E.l($),i=te($),I&&I.l($),$.forEach(_),V.forEach(_),r=te(F),s=R(F,"DIV",{class:!0,style:!0});var G=T(s);o=R(G,"DIV",{style:!0});var U=T(o);M&&M.l(U),U.forEach(_),a=te(G),l=R(G,"DIV",{class:!0,style:!0});var H=T(l);h=R(H,"BUTTON",{class:!0});var j=T(h);O.l(j),j.forEach(_),H.forEach(_),G.forEach(_),d=te(F),P&&P.l(F),m=dt(),this.h()},h(){g(t,"class","column g4 width100"),g(e,"class","row g8 center-cross p816 space-main"),B(o,"width","calc(100% - 32px)"),g(h,"class","more-filters-button svelte-79828"),g(l,"class","column g8"),B(l,"justify-content","flex-end"),g(s,"class","row"),B(s,"padding","0 8px 8px 16px")},m(F,V){Z(F,e,V),p(e,t),E&&E.m(t,null),p(t,i),I&&I.m(t,null),Z(F,r,V),Z(F,s,V),p(s,o),M&&M.m(o,null),p(s,a),p(s,l),p(l,h),O.m(h,null),Z(F,d,V),P&&P.m(F,V),Z(F,m,V),v=!0,k||(w=nt(h,"click",n[20]),k=!0)},p(F,V){F[4]?E?(E.p(F,V),V[0]&16&&de(E,1)):(E=Mp(F),E.c(),de(E,1),E.m(t,i)):E&&(bt(),Ie(E,1,1,()=>{E=null}),wt()),F[3]?I?(I.p(F,V),V[0]&8&&de(I,1)):(I=Tp(F),I.c(),de(I,1),I.m(t,null)):I&&(bt(),Ie(I,1,1,()=>{I=null}),wt()),F[7].length>0?M?(M.p(F,V),V[0]&128&&de(M,1)):(M=Lp(F),M.c(),de(M,1),M.m(o,null)):M&&(bt(),Ie(M,1,1,()=>{M=null}),wt()),D!==(D=C(F))&&(O.d(1),O=D(F),O&&(O.c(),O.m(h,null))),F[9]?P?(P.p(F,V),V[0]&512&&de(P,1)):(P=Pp(F),P.c(),de(P,1),P.m(m.parentNode,m)):P&&(bt(),Ie(P,1,1,()=>{P=null}),wt())},i(F){v||(de(E),de(I),de(M),de(P),v=!0)},o(F){Ie(E),Ie(I),Ie(M),Ie(P),v=!1},d(F){F&&(_(e),_(r),_(s),_(d),_(m)),E&&E.d(),I&&I.d(),M&&M.d(),O.d(),P&&P.d(F),k=!1,w()}}}let Jh=null;const gA=5;let Nr=null;const _4="drooniradar_history_filter_stats";function Op(){if(typeof localStorage>"u")return{};try{const n=localStorage.getItem(_4);return n?JSON.parse(n):{}}catch(n){return console.warn("Failed to load filter stats:",n),{}}}function mA(n){if(!(typeof localStorage>"u"))try{localStorage.setItem(_4,JSON.stringify(n))}catch(e){console.warn("Failed to save filter stats:",e)}}function _A(n,e,t){let i,r,s,o,a=$e,l=()=>(a(),a=Dt(C,Qe=>t(32,o=Qe)),C),h,d,m,v,k,w,E;He(n,nn,Qe=>t(33,d=Qe)),He(n,Nn,Qe=>t(6,m=Qe)),n.$$.on_destroy.push(()=>a());let{historyfilters:I}=e,{activeFilters:M}=e,{selectedDate:C}=e;l();let{isLoading:D}=e,{today:O}=e,{map:P}=e;const F=I.fields.rectangle_area;He(n,F,Qe=>t(5,h=Qe));const V=I.fields.did,$=I.fields.rid,G=I.fields.signal_detection,U=I.fields.radar,H=I.fields.hostile,j=I.fields.friendly,Q=I.fields.neutral,W=I.fields.unknown_model,Y=I.fields.modified,q=I.fields.location;He(n,q,Qe=>t(8,k=Qe));const ne=I.fields.geofence_violations,J=I.fields.aid;He(n,J,Qe=>t(4,r=Qe));const ge=I.fields.operator_id;He(n,ge,Qe=>t(3,i=Qe));const ie=I.fields.over_height;He(n,ie,Qe=>t(10,E=Qe));const le=new Ot(!1),pe=new Ot(!1);He(n,pe,Qe=>t(9,w=Qe));const ye=new Ot(void 0);function be(){var yt,mt;if(!F.current.enabled){We("rectangle");const Ft=P==null?void 0:P.getCenter();(!((yt=F.current)!=null&&yt.ne)||!((mt=F.current)!=null&&mt.sw))&&Ft&&F.update(qt=>({...qt,ne:{lat:Ft.lat+.01,lng:Ft.lng+.01},sw:{lat:Ft.lat-.01,lng:Ft.lng-.01}})),nn.goto({type:Tt.RectangleHistory,rectangleStore:F}),F.update(qt=>({...qt,enabled:!0})),De()}else F.update(Ft=>({...Ft,ne:null,sw:null,enabled:!1})),ye.current!=null&&(clearTimeout(ye.current),ye.set(void 0)),nn.goto({type:Tt.History}),De()}function re(){const Qe=!V.current.enabled;V.update(yt=>({...yt,enabled:Qe})),Qe&&We("did"),De()}function me(){const Qe=!$.current.enabled;$.update(yt=>({...yt,enabled:Qe})),Qe&&We("rid"),De()}function ke(){const Qe=!G.current.enabled;G.update(yt=>({...yt,enabled:Qe})),Qe&&We("signal_detection"),De()}function X(){const Qe=!U.current.enabled;U.update(yt=>({...yt,enabled:Qe})),Qe&&We("radar"),De()}function ue(Qe){if(!q)return;const yt=q.current&&q.current.locations?q.current.locations.includes(Qe):!1;q.update(mt=>{const Ft=mt&&mt.locations?mt.locations:[],qt=Ft.includes(Qe)?Ft.filter(vt=>vt!==Qe):[...Ft,Qe];return{...mt,locations:qt,enabled:qt.length>0}}),yt||We(`location:${Qe}`),De()}function _e(){const Qe=!H.current.enabled;H.update(yt=>({...yt,enabled:Qe})),Qe&&We("hostile"),De()}function oe(){const Qe=!j.current.enabled;j.update(yt=>({...yt,enabled:Qe})),Qe&&We("friendly"),De()}function ae(){const Qe=!Q.current.enabled;Q.update(yt=>({...yt,enabled:Qe})),Qe&&We("neutral"),De()}function Se(){const Qe=!ne.current.enabled;ne.update(yt=>({...yt,enabled:Qe})),Qe&&We("geofence_violations"),De()}function Me(){const Qe=!W.current.enabled;W.update(yt=>({...yt,enabled:Qe})),Qe&&We("unknown_model"),De()}function we(){const Qe=!Y.current.enabled;Y.update(yt=>({...yt,enabled:Qe})),Qe&&We("modified"),De()}function Te(Qe){const yt=Qe.length>0,mt=!!J.current.enabled;J.update(Ft=>({...Ft,aids:Qe,enabled:yt})),yt&&!mt&&We("aid"),De()}function Ae(Qe){const yt=Qe.length>0,mt=!!ge.current.enabled;ge.update(Ft=>({...Ft,operator_ids:Qe,enabled:yt})),yt&&!mt&&We("operator_id"),De()}function Ne(Qe){const yt=Qe.currentTarget;if(!yt)return;const Ft=yt.value.replace(/\D/g,"").slice(0,5);if(yt.value!==Ft&&(yt.value=Ft),Ft.length===0){ie.update(sn=>({...sn,height:null,enabled:!1})),De();return}const qt=1e4,vt=Number(Ft),$t=Number.isFinite(vt),dn=!!ie.current.enabled;ie.update(sn=>({...sn,height:$t?Math.min(vt,qt):null,enabled:$t})),$t&&!dn&&We("over_height"),De()}function De(){M.set(Bl(I.fullValue.current))}Jh!==null&&kn(C,o=Jh,o),I.fullValue.subscribe(Qe=>{le.current&&(console.log("Storing last selected filters:",Qe),Nr=Qe)});function _t(){pe.set(!pe.current)}const Fe=["tallinn","tartu","harju_county"],Pe=[{key:"did",toggleFunction:re,store:V},{key:"rid",toggleFunction:me,store:$},{key:"signal_detection",toggleFunction:ke,store:G},{key:"radar",toggleFunction:X,store:U}],je=[{key:"hostile",toggleFunction:_e,store:H},{key:"friendly",toggleFunction:oe,store:j},{key:"neutral",toggleFunction:ae,store:Q},{key:"modified",toggleFunction:we,store:Y},{key:"geofenceViolations",toggleFunction:Se,store:ne},{key:"unknownModel",toggleFunction:Me,store:W}],Ve=new Ot(Op());He(n,Ve,Qe=>t(31,s=Qe));const Ue={did:{key:"did",toggleFunction:re,store:V},rid:{key:"rid",toggleFunction:me,store:$},hostile:{key:"hostile",toggleFunction:_e,store:H},friendly:{key:"friendly",toggleFunction:oe,store:j},neutral:{key:"neutral",toggleFunction:ae,store:Q},geofence_violations:{key:"geofenceViolations",toggleFunction:Se,store:ne},unknown_model:{key:"unknownModel",toggleFunction:Me,store:W},modified:{key:"modified",toggleFunction:we,store:Y},signal_detection:{key:"signal_detection",toggleFunction:ke,store:G},radar:{key:"radar",toggleFunction:X,store:U}},Ke=new Ot([]);He(n,Ke,Qe=>t(7,v=Qe)),Ve.subscribe(Qe=>{Ke.set(Object.entries(Qe).sort(([,yt],[,mt])=>mt-yt).slice(0,gA).map(([yt])=>{if(yt.startsWith("location:")){const mt=yt.split(":")[1];return{type:"location",key:mt,toggleFunction:()=>ue(mt),store:q}}return Ue[yt]}).filter(yt=>!!yt))});function We(Qe){Qe==="violations"||Qe==="rectangle"||Ve.update(yt=>{const mt=yt&&yt[Qe]?yt[Qe]+1:1;return{...yt||{},[Qe]:mt}})}mi(()=>{Nr!==null&&(I.fullValue.set(Nr),M.set(Bl(Nr)),Nr.rectangle_area.enabled&&Nr.rectangle_area.ne&&Nr.rectangle_area.sw&&(F.update(Qe=>({...Qe,enabled:!0,ne:Nr==null?void 0:Nr.rectangle_area.ne,sw:Nr==null?void 0:Nr.rectangle_area.sw})),nn.goto({type:Tt.RectangleHistory,rectangleStore:F}),M.set(Bl(I.fullValue.current)))),Ve.set(Op()),le.set(!0)}),ls(()=>{ye!=null&&(clearTimeout(ye.current),ye.set(void 0))});let ze=[],Et=[];function rt(Qe){ze=Qe,t(1,ze),t(4,r)}function ft(Qe){Et=Qe,t(2,Et),t(3,i)}const Ut=Qe=>ue(Qe);return n.$$set=Qe=>{"historyfilters"in Qe&&t(26,I=Qe.historyfilters),"activeFilters"in Qe&&t(27,M=Qe.activeFilters),"selectedDate"in Qe&&l(t(0,C=Qe.selectedDate)),"isLoading"in Qe&&t(28,D=Qe.isLoading),"today"in Qe&&t(29,O=Qe.today),"map"in Qe&&t(30,P=Qe.map)},n.$$.update=()=>{n.$$.dirty[0]&32&&h.enabled&&h.ne&&h.sw&&(ye.current!=null&&clearTimeout(ye.current),F.current.ne!=null&&F.current.sw!=null&&ye.set(window.setTimeout(()=>{De()},500))),n.$$.dirty[0]&32|n.$$.dirty[1]&4&&d.type!==Tt.RectangleHistory&&h.enabled&&(F.update(Qe=>({...Qe,enabled:!1})),De()),n.$$.dirty[1]&2&&(Jh=o),n.$$.dirty[1]&1&&typeof localStorage<"u"&&mA(s),n.$$.dirty[0]&18&&r&&(t(1,ze=J.current.aids),Te(ze)),n.$$.dirty[0]&12&&i&&(t(2,Et=ge.current.operator_ids),Ae(Et))},[C,ze,Et,i,r,h,m,v,k,w,E,F,q,J,ge,ie,pe,be,ue,Ne,_t,Fe,Pe,je,Ve,Ke,I,M,D,O,P,s,o,d,rt,ft,Ut]}class pA extends Wt{constructor(e){super(),Xt(this,e,_A,dA,zt,{historyfilters:26,activeFilters:27,selectedDate:0,isLoading:28,today:29,map:30},null,[-1,-1,-1])}}function xp(n){let e,t=n[1]("flights.region."+n[0].r)+"",i;return{c(){e=A("p"),i=he(t),this.h()},l(r){e=R(r,"P",{class:!0});var s=T(e);i=fe(s,t),s.forEach(_),this.h()},h(){g(e,"class","svelte-43vc6d")},m(r,s){Z(r,e,s),p(e,i)},p(r,s){s&3&&t!==(t=r[1]("flights.region."+r[0].r)+"")&&Ee(i,t)},d(r){r&&_(e)}}}function vA(n){let e,t,i,r,s,o;return{c(){e=A("div"),t=Re("svg"),i=Re("path"),r=ee(),s=A("p"),o=he(n[3]),this.h()},l(a){e=R(a,"DIV",{class:!0,title:!0});var l=T(e);t=Oe(l,"svg",{xmlns:!0,height:!0,viewBox:!0,width:!0,fill:!0,class:!0});var h=T(t);i=Oe(h,"path",{d:!0,class:!0}),T(i).forEach(_),h.forEach(_),r=te(l),s=R(l,"P",{style:!0,class:!0});var d=T(s);o=fe(d,n[3]),d.forEach(_),l.forEach(_),this.h()},h(){g(i,"d","M197-197q-54-55-85.5-127.5T80-480q0-84 31.5-156.5T197-763l57 57q-44 44-69 102t-25 124q0 67 25 125t69 101l-57 57Zm113-113q-32-33-51-76.5T240-480q0-51 19-94.5t51-75.5l57 57q-22 22-34.5 51T320-480q0 33 12.5 62t34.5 51l-57 57Zm170-90q-33 0-56.5-23.5T400-480q0-33 23.5-56.5T480-560q33 0 56.5 23.5T560-480q0 33-23.5 56.5T480-400Zm170 90-57-57q22-22 34.5-51t12.5-62q0-33-12.5-62T593-593l57-57q32 32 51 75.5t19 94.5q0 50-19 93.5T650-310Zm113 113-57-57q44-44 69-102t25-124q0-67-25-125t-69-101l57-57q54 54 85.5 126.5T880-480q0 83-31.5 155.5T763-197Z"),g(i,"class","svelte-43vc6d"),g(t,"xmlns","http://www.w3.org/2000/svg"),g(t,"height","18px"),g(t,"viewBox","0 -960 960 960"),g(t,"width","18px"),g(t,"fill","#888"),g(t,"class","svelte-43vc6d"),B(s,"font-family","monospace"),g(s,"class","svelte-43vc6d"),g(e,"class","row center-cross g4 svelte-43vc6d"),g(e,"title",n[3])},m(a,l){Z(a,e,l),p(e,t),p(t,i),p(e,r),p(e,s),p(s,o)},p:$e,d(a){a&&_(e)}}}function yA(n){let e,t,i,r,s=Co(n[0].s)+"",o,a,l,h=Vs((n[0].e-n[0].s)/1e3)+"",d,m,v,k,w,E=n[0].data.mke+"",I,M,C,D=n[0].data.mdl+"",O,P,F,V,$,G,U=n[0].r&&xp(n),H=n[3]&&vA(n);return{c(){e=A("div"),t=A("div"),i=A("p"),r=A("b"),o=he(s),a=ee(),l=A("p"),d=he(h),m=ee(),v=A("div"),k=A("p"),w=A("b"),I=he(E),M=he(":"),C=ee(),O=he(D),P=ee(),F=A("div"),V=A("div"),U&&U.c(),$=ee(),G=A("div"),H&&H.c(),this.h()},l(j){e=R(j,"DIV",{class:!0,style:!0});var Q=T(e);t=R(Q,"DIV",{class:!0,style:!0});var W=T(t);i=R(W,"P",{style:!0,class:!0});var Y=T(i);r=R(Y,"B",{class:!0});var q=T(r);o=fe(q,s),q.forEach(_),Y.forEach(_),a=te(W),l=R(W,"P",{style:!0,class:!0});var ne=T(l);d=fe(ne,h),ne.forEach(_),W.forEach(_),m=te(Q),v=R(Q,"DIV",{class:!0});var J=T(v);k=R(J,"P",{class:!0,style:!0});var ge=T(k);w=R(ge,"B",{class:!0});var ie=T(w);I=fe(ie,E),M=fe(ie,":"),ie.forEach(_),C=te(ge),O=fe(ge,D),ge.forEach(_),P=te(J),F=R(J,"DIV",{class:!0});var le=T(F);V=R(le,"DIV",{class:!0,style:!0});var pe=T(V);U&&U.l(pe),pe.forEach(_),$=te(le),G=R(le,"DIV",{class:!0,style:!0});var ye=T(G);H&&H.l(ye),ye.forEach(_),le.forEach(_),J.forEach(_),Q.forEach(_),this.h()},h(){g(r,"class","svelte-43vc6d"),B(i,"font-size","14px"),g(i,"class","svelte-43vc6d"),B(l,"font-size","10px"),B(l,"color","#666"),g(l,"class","svelte-43vc6d"),g(t,"class","column center-cross svelte-43vc6d"),B(t,"padding-block","3px"),B(t,"min-width","52px"),g(w,"class","svelte-43vc6d"),g(k,"class","truncate svelte-43vc6d"),g(k,"style","font-size: 18px;"),g(V,"class","row space-main center-cross g4 svelte-43vc6d"),B(V,"color","#222"),B(V,"width","fit-content"),B(V,"font-size","13px"),g(G,"class","row space-main center-cross g4 svelte-43vc6d"),B(G,"color","#888"),B(G,"width","fit-content"),B(G,"font-size","13px"),g(F,"class","column svelte-43vc6d"),g(v,"class","svelte-43vc6d"),g(e,"class","row width100 info svelte-43vc6d"),B(e,"gap","10px"),B(e,"padding","4px 16px")},m(j,Q){Z(j,e,Q),p(e,t),p(t,i),p(i,r),p(r,o),p(t,a),p(t,l),p(l,d),p(e,m),p(e,v),p(v,k),p(k,w),p(w,I),p(w,M),p(k,C),p(k,O),p(v,P),p(v,F),p(F,V),U&&U.m(V,null),p(F,$),p(F,G),H&&H.m(G,null)},p(j,[Q]){Q&1&&s!==(s=Co(j[0].s)+"")&&Ee(o,s),Q&1&&h!==(h=Vs((j[0].e-j[0].s)/1e3)+"")&&Ee(d,h),Q&1&&E!==(E=j[0].data.mke+"")&&Ee(I,E),Q&1&&D!==(D=j[0].data.mdl+"")&&Ee(O,D),j[0].r?U?U.p(j,Q):(U=xp(j),U.c(),U.m(V,null)):U&&(U.d(1),U=null),j[3]&&H.p(j,Q)},i:$e,o:$e,d(j){j&&_(e),U&&U.d(),H&&H.d()}}}function bA(n,e,t){var h,d,m,v;let i,r;He(n,Nn,k=>t(1,r=k));let{sensorsAreas:s}=e,{flight:o}=e;const a=s==null?void 0:s.sensors;He(n,a,k=>t(5,i=k));let l=((v=i==null?void 0:i.get(parseInt(((m=(d=(h=o==null?void 0:o.sum)==null?void 0:h.sen)==null?void 0:d.split(","))==null?void 0:m[0])||"")))==null?void 0:v.name)||null;return n.$$set=k=>{"sensorsAreas"in k&&t(4,s=k.sensorsAreas),"flight"in k&&t(0,o=k.flight)},[o,r,a,l,s]}class wA extends Wt{constructor(e){super(),Xt(this,e,bA,yA,zt,{sensorsAreas:4,flight:0})}}function kA(n){let e,t=n[1]("flights.radarClassification.0")+"",i;return{c(){e=A("b"),i=he(t),this.h()},l(r){e=R(r,"B",{class:!0});var s=T(e);i=fe(s,t),s.forEach(_),this.h()},h(){g(e,"class","svelte-43vc6d")},m(r,s){Z(r,e,s),p(e,i)},p(r,s){s&2&&t!==(t=r[1]("flights.radarClassification.0")+"")&&Ee(i,t)},d(r){r&&_(e)}}}function EA(n){let e,t=n[1]("flights.radarClassification."+n[0].data.cl)+"",i;return{c(){e=A("b"),i=he(t),this.h()},l(r){e=R(r,"B",{class:!0});var s=T(e);i=fe(s,t),s.forEach(_),this.h()},h(){g(e,"class","svelte-43vc6d")},m(r,s){Z(r,e,s),p(e,i)},p(r,s){s&3&&t!==(t=r[1]("flights.radarClassification."+r[0].data.cl)+"")&&Ee(i,t)},d(r){r&&_(e)}}}function Fp(n){let e,t=n[1]("flights.region."+n[0].r)+"",i;return{c(){e=A("p"),i=he(t),this.h()},l(r){e=R(r,"P",{class:!0});var s=T(e);i=fe(s,t),s.forEach(_),this.h()},h(){g(e,"class","svelte-43vc6d")},m(r,s){Z(r,e,s),p(e,i)},p(r,s){s&3&&t!==(t=r[1]("flights.region."+r[0].r)+"")&&Ee(i,t)},d(r){r&&_(e)}}}function SA(n){let e,t,i,r,s,o;return{c(){e=A("div"),t=Re("svg"),i=Re("path"),r=ee(),s=A("p"),o=he(n[3]),this.h()},l(a){e=R(a,"DIV",{class:!0,title:!0});var l=T(e);t=Oe(l,"svg",{xmlns:!0,height:!0,viewBox:!0,width:!0,fill:!0,class:!0});var h=T(t);i=Oe(h,"path",{d:!0,class:!0}),T(i).forEach(_),h.forEach(_),r=te(l),s=R(l,"P",{style:!0,class:!0});var d=T(s);o=fe(d,n[3]),d.forEach(_),l.forEach(_),this.h()},h(){g(i,"d","M197-197q-54-55-85.5-127.5T80-480q0-84 31.5-156.5T197-763l57 57q-44 44-69 102t-25 124q0 67 25 125t69 101l-57 57Zm113-113q-32-33-51-76.5T240-480q0-51 19-94.5t51-75.5l57 57q-22 22-34.5 51T320-480q0 33 12.5 62t34.5 51l-57 57Zm170-90q-33 0-56.5-23.5T400-480q0-33 23.5-56.5T480-560q33 0 56.5 23.5T560-480q0 33-23.5 56.5T480-400Zm170 90-57-57q22-22 34.5-51t12.5-62q0-33-12.5-62T593-593l57-57q32 32 51 75.5t19 94.5q0 50-19 93.5T650-310Zm113 113-57-57q44-44 69-102t25-124q0-67-25-125t-69-101l57-57q54 54 85.5 126.5T880-480q0 83-31.5 155.5T763-197Z"),g(i,"class","svelte-43vc6d"),g(t,"xmlns","http://www.w3.org/2000/svg"),g(t,"height","18px"),g(t,"viewBox","0 -960 960 960"),g(t,"width","18px"),g(t,"fill","#888"),g(t,"class","svelte-43vc6d"),B(s,"font-family","monospace"),g(s,"class","svelte-43vc6d"),g(e,"class","row center-cross g4 svelte-43vc6d"),g(e,"title",n[3])},m(a,l){Z(a,e,l),p(e,t),p(t,i),p(e,r),p(e,s),p(s,o)},p:$e,d(a){a&&_(e)}}}function IA(n){let e,t,i,r,s=Co(n[0].s)+"",o,a,l,h=Vs((n[0].e-n[0].s)/1e3)+"",d,m,v,k,w,E,I,M,C;function D($,G){return $[0].data.cl?EA:kA}let O=D(n),P=O(n),F=n[0].r&&Fp(n),V=n[3]&&SA(n);return{c(){e=A("div"),t=A("div"),i=A("p"),r=A("b"),o=he(s),a=ee(),l=A("p"),d=he(h),m=ee(),v=A("div"),k=A("p"),P.c(),w=ee(),E=A("div"),I=A("div"),F&&F.c(),M=ee(),C=A("div"),V&&V.c(),this.h()},l($){e=R($,"DIV",{class:!0,style:!0});var G=T(e);t=R(G,"DIV",{class:!0,style:!0});var U=T(t);i=R(U,"P",{style:!0,class:!0});var H=T(i);r=R(H,"B",{class:!0});var j=T(r);o=fe(j,s),j.forEach(_),H.forEach(_),a=te(U),l=R(U,"P",{style:!0,class:!0});var Q=T(l);d=fe(Q,h),Q.forEach(_),U.forEach(_),m=te(G),v=R(G,"DIV",{class:!0});var W=T(v);k=R(W,"P",{class:!0,style:!0});var Y=T(k);P.l(Y),Y.forEach(_),w=te(W),E=R(W,"DIV",{class:!0});var q=T(E);I=R(q,"DIV",{class:!0,style:!0});var ne=T(I);F&&F.l(ne),ne.forEach(_),M=te(q),C=R(q,"DIV",{class:!0,style:!0});var J=T(C);V&&V.l(J),J.forEach(_),q.forEach(_),W.forEach(_),G.forEach(_),this.h()},h(){g(r,"class","svelte-43vc6d"),B(i,"font-size","14px"),g(i,"class","svelte-43vc6d"),B(l,"font-size","10px"),B(l,"color","#666"),g(l,"class","svelte-43vc6d"),g(t,"class","column center-cross svelte-43vc6d"),B(t,"padding-block","3px"),B(t,"min-width","52px"),g(k,"class","truncate svelte-43vc6d"),g(k,"style","font-size: 18px;"),g(I,"class","row space-main center-cross g4 svelte-43vc6d"),B(I,"color","#222"),B(I,"width","fit-content"),B(I,"font-size","13px"),g(C,"class","row space-main center-cross g4 svelte-43vc6d"),B(C,"color","#888"),B(C,"width","fit-content"),B(C,"font-size","13px"),g(E,"class","column svelte-43vc6d"),g(v,"class","svelte-43vc6d"),g(e,"class","row width100 info svelte-43vc6d"),B(e,"gap","10px"),B(e,"padding","4px 16px")},m($,G){Z($,e,G),p(e,t),p(t,i),p(i,r),p(r,o),p(t,a),p(t,l),p(l,d),p(e,m),p(e,v),p(v,k),P.m(k,null),p(v,w),p(v,E),p(E,I),F&&F.m(I,null),p(E,M),p(E,C),V&&V.m(C,null)},p($,[G]){G&1&&s!==(s=Co($[0].s)+"")&&Ee(o,s),G&1&&h!==(h=Vs(($[0].e-$[0].s)/1e3)+"")&&Ee(d,h),O===(O=D($))&&P?P.p($,G):(P.d(1),P=O($),P&&(P.c(),P.m(k,null))),$[0].r?F?F.p($,G):(F=Fp($),F.c(),F.m(I,null)):F&&(F.d(1),F=null),$[3]&&V.p($,G)},i:$e,o:$e,d($){$&&_(e),P.d(),F&&F.d(),V&&V.d()}}}function MA(n,e,t){var h,d,m,v;let i,r;He(n,Nn,k=>t(1,r=k));let{sensorsAreas:s}=e,{flight:o}=e;const a=s==null?void 0:s.sensors;He(n,a,k=>t(5,i=k));let l=((v=i==null?void 0:i.get(parseInt(((m=(d=(h=o==null?void 0:o.sum)==null?void 0:h.sen)==null?void 0:d.split(","))==null?void 0:m[0])||"")))==null?void 0:v.name)||null;return n.$$set=k=>{"sensorsAreas"in k&&t(4,s=k.sensorsAreas),"flight"in k&&t(0,o=k.flight)},[o,r,a,l,s]}class TA extends Wt{constructor(e){super(),Xt(this,e,MA,IA,zt,{sensorsAreas:4,flight:0})}}const{Map:LA}=Y4;function Bp(n,e,t){var a;const i=n.slice();i[46]=e[t];const r=i[3]instanceof ni?W3(i[15],i[46]):void 0;i[47]=r;const s=((a=i[6])==null?void 0:a.type)===Tt.History&&(!i[15]||i[15]*1e3>i[46].s&&i[15]*1e3<i[46].e)&&i[3]instanceof ni;i[48]=s;const o=console.log("db99: flight:",i[46]);return i[49]=o,i}function CA(n){const e=n.slice(),t=e[13].stats;e[44]=t;const i=e[13].flights;return e[45]=i,e}function $p(n){let e,t,i;return t=new ws({props:{size:"32",color:"#aa8800"}}),{c(){e=A("div"),st(t.$$.fragment),this.h()},l(r){e=R(r,"DIV",{class:!0});var s=T(e);ot(t.$$.fragment,s),s.forEach(_),this.h()},h(){g(e,"class","loading-overlay column center-cross svelte-btm5jr"),B(e,"top",`${n[11]}px`),B(e,"height",n[12]>0?`${n[12]}px`:"100%")},m(r,s){Z(r,e,s),at(t,e,null),i=!0},p(r,s){s[0]&2048&&B(e,"top",`${r[11]}px`),s[0]&4096&&B(e,"height",r[12]>0?`${r[12]}px`:"100%")},i(r){i||(de(t.$$.fragment,r),i=!0)},o(r){Ie(t.$$.fragment,r),i=!1},d(r){r&&_(e),lt(t)}}}function PA(n){let e,t,i,r=[],s=new LA,o;e=new UD({props:{statsForDay:n[44]}});let a=Bt(n[45]);const l=h=>h[46].id;for(let h=0;h<a.length;h+=1){let d=Bp(n,a,h),m=l(d);s.set(m,r[h]=Vp(m,d))}return{c(){st(e.$$.fragment),t=ee(),i=A("div");for(let h=0;h<r.length;h+=1)r[h].c();this.h()},l(h){ot(e.$$.fragment,h),t=te(h),i=R(h,"DIV",{class:!0});var d=T(i);for(let m=0;m<r.length;m+=1)r[m].l(d);d.forEach(_),this.h()},h(){g(i,"class","flights-wrapper")},m(h,d){at(e,h,d),Z(h,t,d),Z(h,i,d);for(let m=0;m<r.length;m+=1)r[m]&&r[m].m(i,null);o=!0},p(h,d){const m={};d[0]&8192&&(m.statsForDay=h[44]),e.$set(m),d[0]&41035|d[1]&1&&(a=Bt(h[45]),bt(),r=vr(r,d,l,1,h,a,s,i,vs,Vp,null,Bp),wt())},i(h){if(!o){de(e.$$.fragment,h);for(let d=0;d<a.length;d+=1)de(r[d]);o=!0}},o(h){Ie(e.$$.fragment,h);for(let d=0;d<r.length;d+=1)Ie(r[d]);o=!1},d(h){h&&(_(t),_(i)),lt(e,h);for(let d=0;d<r.length;d+=1)r[d].d()}}}function NA(n){let e,t,i=(n[14].enabled?n[8]("history.noFlightsInArea"):n[8]("history.noFlights"))+"",r;return{c(){e=A("div"),t=A("p"),r=he(i),this.h()},l(s){e=R(s,"DIV",{class:!0});var o=T(e);t=R(o,"P",{style:!0});var a=T(t);r=fe(a,i),a.forEach(_),o.forEach(_),this.h()},h(){B(t,"padding","16px"),B(t,"color","#888"),g(e,"class","column center-cross")},m(s,o){Z(s,e,o),p(e,t),p(t,r)},p(s,o){o[0]&16640&&i!==(i=(s[14].enabled?s[8]("history.noFlightsInArea"):s[8]("history.noFlights"))+"")&&Ee(r,i)},i:$e,o:$e,d(s){s&&_(e)}}}function DA(n){let e,t="Unknown flight type";return{c(){e=A("p"),e.textContent=t,this.h()},l(i){e=R(i,"P",{class:!0,"data-svelte-h":!0}),rn(e)!=="svelte-r0gmga"&&(e.textContent=t),this.h()},h(){g(e,"class","p816 svelte-btm5jr")},m(i,r){Z(i,e,r)},p:$e,i:$e,o:$e,d(i){i&&_(e)}}}function AA(n){let e,t;return e=new TA({props:{flight:n[46],sensorsAreas:n[0]}}),{c(){st(e.$$.fragment)},l(i){ot(e.$$.fragment,i)},m(i,r){at(e,i,r),t=!0},p(i,r){const s={};r[0]&8192&&(s.flight=i[46]),r[0]&1&&(s.sensorsAreas=i[0]),e.$set(s)},i(i){t||(de(e.$$.fragment,i),t=!0)},o(i){Ie(e.$$.fragment,i),t=!1},d(i){lt(e,i)}}}function RA(n){let e,t;return e=new xD({props:{flight:n[46],iconSet:n[1]}}),{c(){st(e.$$.fragment)},l(i){ot(e.$$.fragment,i)},m(i,r){at(e,i,r),t=!0},p(i,r){const s={};r[0]&8192&&(s.flight=i[46]),r[0]&2&&(s.iconSet=i[1]),e.$set(s)},i(i){t||(de(e.$$.fragment,i),t=!0)},o(i){Ie(e.$$.fragment,i),t=!1},d(i){lt(e,i)}}}function OA(n){let e,t;return e=new wA({props:{flight:n[46],sensorsAreas:n[0]}}),{c(){st(e.$$.fragment)},l(i){ot(e.$$.fragment,i)},m(i,r){at(e,i,r),t=!0},p(i,r){const s={};r[0]&8192&&(s.flight=i[46]),r[0]&1&&(s.sensorsAreas=i[0]),e.$set(s)},i(i){t||(de(e.$$.fragment,i),t=!0)},o(i){Ie(e.$$.fragment,i),t=!1},d(i){lt(e,i)}}}function xA(n){let e,t;return e=new $D({props:{flight:n[46],iconSet:n[1]}}),{c(){st(e.$$.fragment)},l(i){ot(e.$$.fragment,i)},m(i,r){at(e,i,r),t=!0},p(i,r){const s={};r[0]&8192&&(s.flight=i[46]),r[0]&2&&(s.iconSet=i[1]),e.$set(s)},i(i){t||(de(e.$$.fragment,i),t=!0)},o(i){Ie(e.$$.fragment,i),t=!1},d(i){lt(e,i)}}}function FA(n){let e,t,i,r,s,o,a,l;const h=[xA,OA,RA,AA,DA],d=[];function m(v,k){return v[46].st===si.ADSB?0:v[46].st===si.SIGNAL_DETECTION?1:v[46].st===si.DRID?2:v[46].st===si.RADAR?3:4}return t=m(n),i=d[t]=h[t](n),{c(){e=A("div"),i.c(),r=ee(),s=A("div"),a=ee(),this.h()},l(v){e=R(v,"DIV",{class:!0,style:!0});var k=T(e);i.l(k),r=te(k),s=R(k,"DIV",{class:!0,style:!0}),T(s).forEach(_),k.forEach(_),a=te(v),this.h()},h(){g(s,"class",o="progress "+(n[48]?"is-playing":"")+" svelte-btm5jr"),B(s,"width",n[47]===void 0?"unset":n[47]+"%"),g(e,"class","flight column svelte-btm5jr"),B(e,"height",$A+"px")},m(v,k){Z(v,e,k),d[t].m(e,null),p(e,r),p(e,s),Z(v,a,k),l=!0},p(v,k){let w=t;t=m(v),t===w?d[t].p(v,k):(bt(),Ie(d[w],1,1,()=>{d[w]=null}),wt(),i=d[t],i?i.p(v,k):(i=d[t]=h[t](v),i.c()),de(i,1),i.m(e,r)),(!l||k[0]&41032&&o!==(o="progress "+(v[48]?"is-playing":"")+" svelte-btm5jr"))&&g(s,"class",o),(!l||k[0]&40968)&&B(s,"width",v[47]===void 0?"unset":v[47]+"%")},i(v){l||(de(i),l=!0)},o(v){Ie(i),l=!1},d(v){v&&(_(e),_(a)),d[t].d()}}}function Vp(n,e){let t,i,r;function s(...o){return e[33](e[46],...o)}return i=new fn({props:{class:"rel",onclick:s,$$slots:{default:[FA]},$$scope:{ctx:e}}}),{key:n,first:null,c(){t=dt(),st(i.$$.fragment),this.h()},l(o){t=dt(),ot(i.$$.fragment,o),this.h()},h(){this.first=t},m(o,a){Z(o,t,a),at(i,o,a),r=!0},p(o,a){e=o;const l={};a[0]&8192&&(l.onclick=s),a[0]&41035|a[1]&2097152&&(l.$$scope={dirty:a,ctx:e}),i.$set(l)},i(o){r||(de(i.$$.fragment,o),r=!0)},o(o){Ie(i.$$.fragment,o),r=!1},d(o){o&&_(t),lt(i,o)}}}function BA(n){let e,t,i,r,s=n[8]("history.title")+"",o,a,l,h=n[8]("history.description")+"",d,m,v,k='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M19 5L5 19M5.00001 5L19 19" stroke="#fff" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>',w,E,I,M,C,D,O,P,F,V,$,G,U,H,j,Q,W,Y,q,ne;C=new pA({props:{historyfilters:n[23],activeFilters:n[24],selectedDate:n[17],isLoading:n[26],today:n[16],map:n[2]}}),F=new QD({props:{isLoading:n[26],computedFlights:n[25],selectedDate:n[17],flightsForDay:n[28],getPreviousDay:n[29],getNextDay:n[30],today:n[16]}});let J=n[10]&&$p(n);const ge=[NA,PA],ie=[];function le(ye,be){return ye[13].flights.length===0?0:1}function pe(ye,be){return be===1?CA(ye):ye}return U=le(n),H=ie[U]=ge[U](pe(n,U)),{c(){e=A("div"),t=A("div"),i=A("div"),r=A("p"),o=he(s),a=ee(),l=A("p"),d=he(h),m=ee(),v=A("button"),v.innerHTML=k,w=ee(),E=A("div"),I=A("hr"),M=ee(),st(C.$$.fragment),D=ee(),O=A("div"),P=ee(),st(F.$$.fragment),V=ee(),$=A("div"),J&&J.c(),G=ee(),H.c(),j=ee(),Q=A("div"),this.h()},l(ye){e=R(ye,"DIV",{id:!0,class:!0});var be=T(e);t=R(be,"DIV",{class:!0,style:!0});var re=T(t);i=R(re,"DIV",{class:!0});var me=T(i);r=R(me,"P",{class:!0,style:!0});var ke=T(r);o=fe(ke,s),ke.forEach(_),a=te(me),l=R(me,"P",{style:!0});var X=T(l);d=fe(X,h),X.forEach(_),me.forEach(_),m=te(re),v=R(re,"BUTTON",{class:!0,style:!0,"data-svelte-h":!0}),rn(v)!=="svelte-1gt8p21"&&(v.innerHTML=k),re.forEach(_),w=te(be),E=R(be,"DIV",{class:!0});var ue=T(E);I=R(ue,"HR",{}),M=te(ue),ot(C.$$.fragment,ue),D=te(ue),O=R(ue,"DIV",{class:!0}),T(O).forEach(_),P=te(ue),ot(F.$$.fragment,ue),V=te(ue),$=R(ue,"DIV",{style:!0});var _e=T($);J&&J.l(_e),G=te(_e),H.l(_e),j=te(_e),Q=R(_e,"DIV",{class:!0}),T(Q).forEach(_),_e.forEach(_),ue.forEach(_),be.forEach(_),this.h()},h(){g(r,"class","grow"),B(r,"font-size","18px"),B(l,"font-size","12px"),g(i,"class","column grow"),g(v,"class","close svelte-btm5jr"),B(v,"background","none"),B(v,"padding","0"),B(v,"border","none"),B(v,"outline","none"),B(v,"margin","0"),B(v,"height","24px"),g(t,"class","row center-cross info-row svelte-btm5jr"),B(t,"background-color","#445"),g(O,"class","sep"),g(Q,"class","sep"),g($,"style",W="position: relative; "+(n[10]?"overflow-y: hidden;":"")),g(E,"class","panel-scrollable"),g(e,"id","historic-flights"),g(e,"class","panel column")},m(ye,be){Z(ye,e,be),p(e,t),p(t,i),p(i,r),p(r,o),p(i,a),p(i,l),p(l,d),p(t,m),p(t,v),p(e,w),p(e,E),p(E,I),p(E,M),at(C,E,null),p(E,D),p(E,O),p(E,P),at(F,E,null),p(E,V),p(E,$),J&&J.m($,null),p($,G),ie[U].m($,null),p($,j),p($,Q),n[34](E),n[35](e),Y=!0,q||(ne=[nt(v,"click",n[22]),nt(E,"scroll",n[21])],q=!0)},p(ye,be){(!Y||be[0]&256)&&s!==(s=ye[8]("history.title")+"")&&Ee(o,s),(!Y||be[0]&256)&&h!==(h=ye[8]("history.description")+"")&&Ee(d,h);const re={};be[0]&4&&(re.map=ye[2]),C.$set(re),ye[10]?J?(J.p(ye,be),be[0]&1024&&de(J,1)):(J=$p(ye),J.c(),de(J,1),J.m($,G)):J&&(bt(),Ie(J,1,1,()=>{J=null}),wt());let me=U;U=le(ye),U===me?ie[U].p(pe(ye,U),be):(bt(),Ie(ie[me],1,1,()=>{ie[me]=null}),wt(),H=ie[U],H?H.p(pe(ye,U),be):(H=ie[U]=ge[U](pe(ye,U)),H.c()),de(H,1),H.m($,j)),(!Y||be[0]&1024&&W!==(W="position: relative; "+(ye[10]?"overflow-y: hidden;":"")))&&g($,"style",W)},i(ye){Y||(de(C.$$.fragment,ye),de(F.$$.fragment,ye),de(J),de(H),Y=!0)},o(ye){Ie(C.$$.fragment,ye),Ie(F.$$.fragment,ye),Ie(J),Ie(H),Y=!1},d(ye){ye&&_(e),lt(C),lt(F),J&&J.d(),ie[U].d(),n[34](null),n[35](null),q=!1,Bn(ne)}}}let Qh=null;const $A=68;function VA(n){return Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),0,0,0,0)}function zA(n,e,t){let i,r,s,o,a,l,h,d,m,v,k,w,E,I=$e,M=()=>(I(),I=Dt(i,Se=>t(15,E=Se)),i);He(n,nn,Se=>t(6,r=Se)),He(n,bi,Se=>t(3,s=Se)),He(n,Nn,Se=>t(8,l=Se)),n.$$.on_destroy.push(()=>I());let{sensorsAreas:C}=e,{historyCacheService:D}=e,{iconSet:O}=e,{map:P}=e,F=VA(new Date);const V=new Ot(F);He(n,V,Se=>t(36,o=Se));const $=new Ot(0);He(n,$,Se=>t(12,v=Se));const G=new Ot(0);He(n,G,Se=>t(11,m=Se));const U=new Ot(null);function H(){if(Q.current==null){$.set(0),G.set(0);return}$.set(Q.current.clientHeight),G.set(Q.current.scrollTop)}const j=new Ot(null);He(n,j,Se=>t(7,a=Se));const Q=new Ot(null);He(n,Q,Se=>t(9,h=Se));function W(Se){const Me=Se.target;Me!=null&&(Qh=Me.scrollTop,G.set(Me.scrollTop),$.set(Me.clientHeight))}function Y(){nn.goto(null)}const q=new Ot(null);function ne(){const Se=D.lastTodayFetchTime,Me=Date.now();Se!=null&&Me-Se>6e4&&(D.revalidateTodaysFlights(),be(F,ie.current))}const J={did:{type:"did",enabled:!0},rid:{type:"rid",enabled:!0},signal_detection:{type:"signal_detection",enabled:!1},radar:{type:"radar",enabled:!1},rectangle_area:{type:"rectangle_area",enabled:!1,ne:null,sw:null},geofence_violations:{type:"geofence_violations",enabled:!1},location:{type:"location",locations:null,enabled:!1},unknown_model:{type:"unknown_model",enabled:!1},hostile:{type:"hostile",enabled:!1},friendly:{type:"friendly",enabled:!1},neutral:{type:"neutral",enabled:!1},modified:{type:"modified",enabled:!1},aid:{type:"aid",aids:[],enabled:!1},operator_id:{type:"operator_id",operator_ids:[],enabled:!1},over_height:{type:"over_height",enabled:!1,height:null},time_range:{type:"time_range",start:new Date,end:new Date,enabled:!1},transponder:{type:"transponder",enabled:!1}},ge=new N3({...J,...Nr??{}}),ie=new Ot(Bl(ge.fullValue.current)),le=new Ot(new Map),pe=bc(le,(Se,Me)=>{Me(Se.get(V.current)===void 0)},!0,[V]);He(n,pe,Se=>t(10,d=Se));function ye(Se,Me){if(!Se||Se.length===0)return{intruded:0,hostile:0,violations:0};let we=0,Te=0,Ae=0;for(const Ne of Se)we+=Ne.sum.int.length>0?1:0,Te+="rel"in Ne.data&&Ne.data.rel===an.HOSTILE?1:0,Ae+=Ne.st!==si.ADSB&&(Ne.sum.mh??0)>120?1:0;return{intruded:we,hostile:Te,violations:Ae}}async function be(Se,Me){const we=await D.getDay(Se,Me);le.update(Te=>(Te.set(Se,{flights:we,stats:ye(we)}),Te))}const re=ge.fields.rectangle_area;He(n,re,Se=>t(14,w=Se)),mi(()=>{let Se=[];return Se.push(V.subscribe(Me=>{var we;(we=le.current)!=null&&we.has(Me)||be(Me,ie.current),Q.current!=null&&t(4,Q.current.scrollTop=0,Q)})),Se.push(ie.subscribe(Me=>{le.set(new Map),be(V.current,Me)})),()=>Se.forEach(Me=>Me())});const me=bc(le,(Se,Me)=>{const we=Se.get(V.current);Me(we||{flights:[],stats:{intruded:0,hostile:0,violations:0}})},{flights:[],stats:{intruded:0,hostile:0,violations:0}},[V]);He(n,me,Se=>t(13,k=Se));function ke(){o-Ar<0||pe.current&&!le.current.has(V.current-Ar)||V.update(Se=>Se-Ar)}function X(){o+Ar>F||pe.current&&!le.current.has(V.current+Ar)||V.update(Se=>Se+Ar)}function ue(Se,Me,we=0){var _t,Fe,Pe,je,Ve;let Te=Me.s/1e3-.5;if(we>0){const Ue=Me.e/1e3;Te+=(Ue-Te)*we}const Ae=Gf(Me);Lo.set(Ae),(_t=Se==null?void 0:Se.target)==null||_t.dispatchEvent(new CustomEvent("play-back",{bubbles:!0,detail:{unixTimestamp:Te,flightSummary:Ae}})),((Fe=Me==null?void 0:Me.sw)==null?void 0:Fe.lat)!==0&&((Pe=Me==null?void 0:Me.sw)==null?void 0:Pe.lng)!==0&&((je=Me==null?void 0:Me.ne)==null?void 0:je.lat)!==0&&((Ve=Me==null?void 0:Me.ne)==null?void 0:Ve.lng)!==0&&P.fitBounds(Ct.latLngBounds(Ct.latLng(Me.sw),Ct.latLng(Me.ne)),{duration:1,maxZoom:9,animate:!0});const De=Kc(Me);De&&nn.goto({type:Tt.AircraftView,aid:De,backToHistory:!0})}mi(()=>{var Se;if(H(),U.current!=null&&Q.current!=null&&(U.set(new ResizeObserver(()=>H())),(Se=U.current)==null||Se.observe(Q.current)),ne(),q.set(window.setInterval(ne,6e4)),Qh!==null){const Me=Qh;setTimeout(()=>{Q.current!=null&&(t(4,Q.current.scrollTop=Me,Q),G.set(Me))},0)}(r==null?void 0:r.type)===Tt.History&&r.filters&&(ge.fullValue.set({...ge.fullValue.current,...r.filters}),Bl(ge.fullValue.current))}),ls(()=>{U.current!=null&&(U.current.disconnect(),U.set(null)),q.current!=null&&clearInterval(q.current)});const _e=(Se,Me)=>ue(Me,Se);function oe(Se){un[Se?"unshift":"push"](()=>{h=Se,Q.set(h)})}function ae(Se){un[Se?"unshift":"push"](()=>{a=Se,j.set(a)})}return n.$$set=Se=>{"sensorsAreas"in Se&&t(0,C=Se.sensorsAreas),"historyCacheService"in Se&&t(32,D=Se.historyCacheService),"iconSet"in Se&&t(1,O=Se.iconSet),"map"in Se&&t(2,P=Se.map)},n.$$.update=()=>{n.$$.dirty[0]&8&&M(t(5,i=s instanceof ni?s.paybackTimeStore:null))},[C,O,P,s,Q,i,r,a,l,h,d,m,v,k,w,E,F,V,$,G,j,W,Y,ge,ie,le,pe,re,me,ke,X,ue,D,_e,oe,ae]}class GA extends Wt{constructor(e){super(),Xt(this,e,zA,BA,zt,{sensorsAreas:0,historyCacheService:32,iconSet:1,map:2},null,[-1,-1])}}(function(){var n=L.LineUtil.isFlat?L.LineUtil.isFlat:L.LineUtil._flat;function e(t){var i=[t.latLng([90,180]),t.latLng([90,-180]),t.latLng([-90,-180]),t.latLng([-90,180])];if(t.version<"1.0.0")t.extend(t.Polygon.prototype,{initialize:function(s,o){if(i=o.worldLatLngs?o.worldLatLngs:i,o&&o.invert&&!o.invertMultiPolygon){var a=[];a.push(i),a.push(s[0]),s=a}t.Polyline.prototype.initialize.call(this,s,o),this._initWithHoles(s)},getBounds:function(){return this.options.invert?new t.LatLngBounds(this._holes):new t.LatLngBounds(this.getLatLngs())}}),t.extend(t.MultiPolygon.prototype,{initialize:function(s,o){if(i=o.worldLatLngs?o.worldLatLngs:i,this._layers={},this._options=o,o.invert){o.invertMultiPolygon=!0;var a=[];a.push(i);for(var l in s)a.push(s[l][0]);s=[a]}this.setLatLngs(s)}});else{var r={toGeoJSON:t.Polygon.prototype.toGeoJSON};t.extend(t.Polygon.prototype,{_setLatLngs:function(s){if(this._originalLatLngs=s,n(this._originalLatLngs)&&(this._originalLatLngs=[this._originalLatLngs]),this.options.invert){i=this.options.worldLatLngs?this.options.worldLatLngs:i;var o=[];o.push(i);for(var a in s)o.push(s[a]);s=[o]}t.Polyline.prototype._setLatLngs.call(this,s)},getBounds:function(){return this._originalLatLngs?new t.LatLngBounds(this._originalLatLngs):new t.LatLngBounds(this.getLatLngs())},getLatLngs:function(){return this._originalLatLngs},toGeoJSON:function(s){if(!this.options.invert)return r.toGeoJSON.call(this,s);var o=!n(this._originalLatLngs),a=o&&!n(this._originalLatLngs[0]),l=t.GeoJSON.latLngsToCoords(this._originalLatLngs,a?2:o?1:0,!0,s);return o||(l=[l]),t.GeoJSON.getFeature(this,{type:(a?"Multi":"")+"Polygon",coordinates:l})}})}}typeof define=="function"&&define.amd?define(["leaflet"],function(t){e(t)}):e(L)})();const da="rectangle-history-pane",tc=50,nc=3e5,HA="#1248",UA="#1246",qA=.5;function zr(n){return Number.isFinite(n)}function ic(n,e,t){return!zr(n)||n===0?1:n<e?e/n:n>t?t/n:1}function rc(n,e){const t=Math.max(n.lat,e.lat),i=Math.min(n.lat,e.lat),r=Math.min(n.lng,e.lng),s=Math.max(n.lng,e.lng);return{ne:{lat:t,lng:s},sw:{lat:i,lng:r}}}function ZA(n,e){const t=n.lat,i=e.lat,r=n.lng,s=e.lng;return[{lat:t,lng:(s+r)/2},{lat:(t+i)/2,lng:r},{lat:i,lng:(s+r)/2},{lat:(t+i)/2,lng:s}]}function YA(n,e){const t={lat:n.lat,lng:e.lng},i={lat:e.lat,lng:n.lng},r=[[e.lng,e.lat],[i.lng,i.lat],[n.lng,n.lat],[t.lng,t.lat],[e.lng,e.lat]];return{type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[r]}}}function jA(n,e,t){let i,r=$e,s=()=>(r(),r=Dt(a,U=>t(5,i=U)),a);n.$$.on_destroy.push(()=>r());let{map:o}=e,{rectangleStore:a}=e;s();let l=!1,h=null;const d=[];let m=null,v=!1,k=null;function w(U,H,j){if(!zr(U)||!zr(H))return U;const Q=zr(j)?j:0,W=Ct.latLng(H,Q),Y=Ct.latLng(U,Q),q=W.distanceTo(Y),ne=ic(q,tc,nc);return H+(U-H)*ne}function E(U,H,j){if(!zr(U)||!zr(H))return U;const Q=zr(j)?j:0,W=Ct.latLng(H,Q),Y=Ct.latLng(U,Q),q=W.distanceTo(Y),ne=ic(q,tc,nc);return H+(U-H)*ne}function I(U,H,j){if(!zr(U)||!zr(H))return U;const Q=zr(j)?j:0,W=Ct.latLng(Q,H),q=Ct.latLng(Q,U).distanceTo(W),ne=ic(q,tc,nc);return H+(U-H)*ne}function M(U,H,j){if(!zr(U)||!zr(H))return U;const Q=zr(j)?j:0,W=Ct.latLng(Q,H),q=Ct.latLng(Q,U).distanceTo(W),ne=ic(q,tc,nc);return H+(U-H)*ne}function C(){if(l)return;o.getPane(da)||o.createPane(da);const U=o.getPane(da);U&&(U.style.zIndex="9000",l=!0)}function D(U,H){C();const j=YA(U,H);if(!h){const Q={style:{color:UA,weight:5,dashArray:"10",fillColor:HA,fillOpacity:qA},pane:da,invert:!0,interactive:!1,worldLatLngs:[Ct.latLng([90,360]),Ct.latLng([90,-180]),Ct.latLng([-90,-180]),Ct.latLng([-90,360])]};t(2,h=Ct.geoJSON(j,Q).addTo(o));return}h.clearLayers(),h.addData(j)}function O(U){return Ct.marker([0,0],{icon:P3,draggable:!0,rotationAngle:U,pane:da})}function P(U,H){a.update(j=>{if(!j||!j.ne||!j.sw)return j;const Q=rc(j.ne,j.sw);let{ne:W,sw:Y}=Q;const q=(Q.ne.lat+Q.sw.lat)/2,ne=(Q.ne.lng+Q.sw.lng)/2;if(U==0&&H.lat<=Y.lat)return j;if(U==2&&H.lat>=W.lat)return j;if(U==1&&H.lng<=Y.lng)return j;if(U==3&&H.lng>=W.lng)return j;if(U===0){const ge=w(H.lat,Y.lat,ne);W={...W,lat:ge}}else if(U===2){const ge=E(H.lat,W.lat,ne);Y={...Y,lat:ge}}else if(U===1){const ge=I(H.lng,Y.lng,q);W={...W,lng:ge}}else if(U===3){const ge=M(H.lng,W.lng,q);Y={...Y,lng:ge}}const J=rc(W,Y);return{...j,ne:J.ne,sw:J.sw}})}function F(U){const j=O([0,90,180,270][U]);return j.on("drag",Q=>{P(U,Q.target.getLatLng())}),j.addTo(o),j}function V(){for(C();d.length<4;)d.push(F(d.length))}function $(U=40){if(C(),m)return;const H=Ct.DomUtil.create("div","corner-draggable-icon");H.style.position="relative",H.style.width=U+"px",H.style.height=U+"px",H.innerHTML='<svg style="position: absolute; top: 0px; left: 0px; pointer-events: none;" width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 50 50" fill="none"><path d="M25 3L15.625 12.375V15.5H21.875V21.875H15.5V15.625H12.375L3 25L12.375 34.375H15.5V28.125H21.875V34.5H15.625V37.625L25 47L34.375 37.625V34.5H28.125V28.125H34.5V34.375H37.625L47 25L37.625 15.625H34.5V21.875H28.125V15.5H34.375V12.375L25 3Z" fill="#CCCCCC"/><path fill-rule="evenodd" clip-rule="evenodd" d="M15.625 12.375L25 3L34.375 12.375V15.5H30V20H34.5V15.625H37.625L47 25L37.625 34.375H34.5V30H30V34.5H34.375V37.625L25 47L15.625 37.625V34.5H20V30H15.5V34.375H12.375L3 25L12.375 15.625H15.5V20H20V15.5H15.625V12.375ZM21 12L25 8L29 12H26.5V23.5H38V21L42 25L38 29V26.5H26.5V38H29L25 42L21 38H23.5V26.5H12V29L8 25L12 21V23.5H23.5V12H21Z" fill="#444444"/></svg>';const j=Ct.divIcon({html:H,className:"",iconSize:[U,U],iconAnchor:[U/2,U/2]});t(4,m=Ct.marker([0,0],{icon:j,draggable:!0,pane:da}).addTo(o)),m.on("dragstart",()=>{const Q=a==null?void 0:a.current;!Q.ne||!Q.sw||(v=!0,k={ne:{...Q.ne},sw:{...Q.sw}})}),m.on("mouseover",Q=>{H.innerHTML='<svg style="position: absolute; top: 0px; left: 0px; pointer-events: none;" width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 50 50" fill="none"><path d="M25 3L15.625 12.375V15.5H21.875V21.875H15.5V15.625H12.375L3 25L12.375 34.375H15.5V28.125H21.875V34.5H15.625V37.625L25 47L34.375 37.625V34.5H28.125V28.125H34.5V34.375H37.625L47 25L37.625 15.625H34.5V21.875H28.125V15.5H34.375V12.375L25 3Z" fill="#CCCCCC"/><path fill-rule="evenodd" clip-rule="evenodd" d="M15.625 12.375L25 3L34.375 12.375V15.5H30V20H34.5V15.625H37.625L47 25L37.625 34.375H34.5V30H30V34.5H34.375V37.625L25 47L15.625 37.625V34.5H20V30H15.5V34.375H12.375L3 25L12.375 15.625H15.5V20H20V15.5H15.625V12.375ZM21 12L25 8L29 12H26.5V23.5H38V21L42 25L38 29V26.5H26.5V38H29L25 42L21 38H23.5V26.5H12V29L8 25L12 21V23.5H23.5V12H21Z" fill="#EE6644"/></svg>'}),m.on("mouseout",Q=>{H.innerHTML='<svg style="position: absolute; top: 0px; left: 0px; pointer-events: none;" width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 50 50" fill="none"><path d="M25 3L15.625 12.375V15.5H21.875V21.875H15.5V15.625H12.375L3 25L12.375 34.375H15.5V28.125H21.875V34.5H15.625V37.625L25 47L34.375 37.625V34.5H28.125V28.125H34.5V34.375H37.625L47 25L37.625 15.625H34.5V21.875H28.125V15.5H34.375V12.375L25 3Z" fill="#CCCCCC"/><path fill-rule="evenodd" clip-rule="evenodd" d="M15.625 12.375L25 3L34.375 12.375V15.5H30V20H34.5V15.625H37.625L47 25L37.625 34.375H34.5V30H30V34.5H34.375V37.625L25 47L15.625 37.625V34.5H20V30H15.5V34.375H12.375L3 25L12.375 15.625H15.5V20H20V15.5H15.625V12.375ZM21 12L25 8L29 12H26.5V23.5H38V21L42 25L38 29V26.5H26.5V38H29L25 42L21 38H23.5V26.5H12V29L8 25L12 21V23.5H23.5V12H21Z" fill="#444444"/></svg>'}),m.on("drag",Q=>{if(!k)return;const W={lat:(k.ne.lat+k.sw.lat)/2,lng:(k.ne.lng+k.sw.lng)/2},Y=Q.target.getLatLng(),q=Y.lat-W.lat,ne=Y.lng-W.lng;a.update(J=>{if(!J||!k)return J;const ge={ne:{lat:k.ne.lat+q,lng:k.ne.lng+ne},sw:{lat:k.sw.lat+q,lng:k.sw.lng+ne}},ie=rc(ge.ne,ge.sw);return{...J,...ie}})}),m.on("dragend",()=>{v=!1,k=null}),m.setZIndexOffset(1e3)}function G(U,H){V(),$();const j=ZA(U,H);d.forEach((Q,W)=>{Q.setLatLng(j[W])}),m&&!v&&m.setLatLng({lat:(U.lat+H.lat)/2,lng:(U.lng+H.lng)/2})}return mi(()=>()=>{h==null||h.remove(),t(2,h=null),d.forEach(U=>U.remove()),t(3,d.length=0,d),m==null||m.remove(),t(4,m=null)}),n.$$set=U=>{"map"in U&&t(1,o=U.map),"rectangleStore"in U&&s(t(0,a=U.rectangleStore))},n.$$.update=()=>{if(n.$$.dirty&60)if(i!=null&&i.enabled&&i.ne&&i.sw){const U=rc(i.ne,i.sw);D(U.ne,U.sw),G(U.ne,U.sw)}else h==null||h.remove(),t(2,h=null),d.forEach(U=>U.remove()),t(3,d.length=0,d),m==null||m.remove(),t(4,m=null),v=!1,k=null},[a,o,h,d,m,i]}class WA extends Wt{constructor(e){super(),Xt(this,e,jA,null,zt,{map:1,rectangleStore:0})}}var qo=(n=>(n[n.INTRUSION=0]="INTRUSION",n[n.HOSTILE=1]="HOSTILE",n[n.RADAR_INTRUSION=2]="RADAR_INTRUSION",n))(qo||{});const $l=class $l{constructor(){Ge(this,"__onSilentUntil",new Ot(0));Ge(this,"__alerts",new Ot([]));Ge(this,"newAlerts");Ge(this,"__intrusionsSubscription");Ge(this,"__hostilesSubscription");Ge(this,"__radarIntrusionsSubscription");Ge(this,"__cleanupInterval",setInterval(()=>{$l.__cleanupAlerts(this.__alerts.current)},60*1e3));this.newAlerts=bc(this.__alerts,(e,t)=>t(e.filter(i=>i.firstSeen>this.__onSilentUntil.current&&i.lastAcknowledged===null)),[],[this.__onSilentUntil])}get onSilentUntil(){return this.__onSilentUntil}get alerts(){return this.__alerts}onUnmount(){var e,t,i;(e=this.__intrusionsSubscription)==null||e.call(this),(t=this.__hostilesSubscription)==null||t.call(this),(i=this.__radarIntrusionsSubscription)==null||i.call(this),clearInterval(this.__cleanupInterval)}silenceAlerts(e){const t=Date.now()+e*1e3;this.__onSilentUntil.set(t)}acknowledgeAlerts(){const e=Date.now();this.__alerts.update(t=>(t.forEach(i=>{i.lastAcknowledged=e}),t))}startUpdatingFromIntrusions(e){this.__intrusionsSubscription=e.subscribe(t=>{const i=Date.now(),r=[];t.forEach(s=>{const o=this.__alerts.current.find(l=>l.flightId===s.flightId);if(o){o.lastLocation=s.lastLocation||o.lastLocation,o.lastSeen=i;return}const a={type:0,flightId:s.flightId,aid:s.aid,firstSeen:i,lastSeen:i,lastAcknowledged:null,lastLocation:s.lastLocation||null};r.push(a)}),r.length>0&&this.__alerts.set([...this.__alerts.current,...r])})}startUpdatingFromHostiles(e,t){this.__hostilesSubscription=e.subscribe(i=>{const r=Date.now(),s=[];i.forEach(o=>{var d;const a=this.__alerts.current.find(m=>m.flightId===o.flightId&&m.type===1);if(a){a.lastLocation=o.lastUpdate.dc||o.lastUpdate.pc||a.lastLocation,a.lastSeen=r;return}((d=t==null?void 0:t.get(o.aid))==null?void 0:d.relationship)===an.HOSTILE&&s.push({type:1,flightId:o.flightId,aid:o.aid,firstSeen:r,lastSeen:r,lastAcknowledged:null,lastLocation:o.lastUpdate.dc||o.lastUpdate.pc||null})}),s.length>0&&this.__alerts.set([...this.__alerts.current,...s])})}startUpdatingFromRadarIntrusions(e){this.__radarIntrusionsSubscription=e.subscribe(t=>{const i=Date.now(),r=[];t.forEach(s=>{const o=this.__alerts.current.find(l=>l.flightId===s.flightId&&l.type===2);if(o){o.lastLocation=s.lastLocation||o.lastLocation,o.lastSeen=i;return}const a={type:2,flightId:s.flightId,aid:s.aid,firstSeen:i,lastSeen:i,lastAcknowledged:null,lastLocation:s.lastLocation||null};r.push(a)}),r.length>0&&this.__alerts.set([...this.__alerts.current,...r])})}static __cleanupAlerts(e){const t=Date.now();for(let i=e.length-1;i>=0;i--){const r=e[i];r.lastAcknowledged!==null&&t-r.lastSeen>=$l.CLEANUP_THRESHOLD_MS&&e.splice(i,1)}return e}};Ge($l,"CLEANUP_THRESHOLD_MS",3*60*1e3);let Bf=$l;function Qs(n,e){let t=0;for(let i=0;i<n.length;i++)e(n[i])&&t++;return t}function ef(n){const e=n.slice(),t=Qs(e[2],s=>s.type==qo.INTRUSION);e[10]=t;const i=Qs(e[2],s=>s.type==qo.HOSTILE);e[11]=i;const r=Qs(e[2],s=>s.type==qo.RADAR_INTRUSION);return e[12]=r,e}function zp(n){let e,t,i,r,s,o,a,l,h=n[3]("alert.title")+"",d,m,v=Qs(n[2],n[7])>0,k,w=Qs(n[2],n[6])>0,E,I=Qs(n[2],n[5])>0,M,C,D,O=n[3]("alert.dismiss")+"",P,F,V,$=n[3]("alert.silenceFor5Minutes")+"",G,U,H;function j(J,ge){if(J[11]>0)return JA;if(J[10]>0)return KA;if(J[12]>0)return XA}let Q=j(n),W=Q&&Q(n),Y=v&&Gp(n),q=w&&Hp(n),ne=I&&Up(n);return{c(){e=A("div"),t=A("div"),i=A("div"),W&&W.c(),s=ee(),o=A("div"),a=A("div"),l=A("b"),d=he(h),m=ee(),Y&&Y.c(),k=ee(),q&&q.c(),E=ee(),ne&&ne.c(),M=ee(),C=A("div"),D=A("button"),P=he(O),F=ee(),V=A("button"),G=he($),this.h()},l(J){e=R(J,"DIV",{id:!0,class:!0});var ge=T(e);t=R(ge,"DIV",{id:!0,class:!0,style:!0});var ie=T(t);i=R(ie,"DIV",{class:!0,style:!0});var le=T(i);W&&W.l(le),le.forEach(_),s=te(ie),o=R(ie,"DIV",{class:!0,style:!0});var pe=T(o);a=R(pe,"DIV",{class:!0});var ye=T(a);l=R(ye,"B",{style:!0});var be=T(l);d=fe(be,h),be.forEach(_),m=te(ye),Y&&Y.l(ye),k=te(ye),q&&q.l(ye),E=te(ye),ne&&ne.l(ye),ye.forEach(_),M=te(pe),C=R(pe,"DIV",{class:!0});var re=T(C);D=R(re,"BUTTON",{style:!0});var me=T(D);P=fe(me,O),me.forEach(_),F=te(re),V=R(re,"BUTTON",{class:!0,style:!0});var ke=T(V);G=fe(ke,$),ke.forEach(_),re.forEach(_),pe.forEach(_),ie.forEach(_),ge.forEach(_),this.h()},h(){g(i,"class","row center center-cross"),g(i,"style",r=`background-color: ${n[11]>0?"#c55":"#d9c45d"}; padding: 32px;`),B(l,"font-size","36px"),g(a,"class","column"),B(D,"font-size","24px"),B(D,"font-weight","700"),B(D,"padding","12px 24px"),g(V,"class","outline"),B(V,"font-size","21px"),B(V,"font-weight","700"),B(V,"padding","12px 24px"),g(C,"class","column g8"),g(o,"class","column"),B(o,"gap","36px"),B(o,"padding","48px 64px 48px 48px"),g(t,"id","popup"),g(t,"class","row svelte-4nl44t"),B(t,"overflow","hidden"),g(e,"id","alert-popup-container"),g(e,"class","row center center-cross svelte-4nl44t")},m(J,ge){Z(J,e,ge),p(e,t),p(t,i),W&&W.m(i,null),p(t,s),p(t,o),p(o,a),p(a,l),p(l,d),p(a,m),Y&&Y.m(a,null),p(a,k),q&&q.m(a,null),p(a,E),ne&&ne.m(a,null),p(o,M),p(o,C),p(C,D),p(D,P),p(C,F),p(C,V),p(V,G),U||(H=[nt(D,"click",n[8]),nt(V,"click",n[9])],U=!0)},p(J,ge){Q!==(Q=j(J))&&(W&&W.d(1),W=Q&&Q(J),W&&(W.c(),W.m(i,null))),ge&4&&r!==(r=`background-color: ${J[11]>0?"#c55":"#d9c45d"}; padding: 32px;`)&&g(i,"style",r),ge&8&&h!==(h=J[3]("alert.title")+"")&&Ee(d,h),ge&4&&(v=Qs(J[2],J[7])>0),v?Y?Y.p(J,ge):(Y=Gp(J),Y.c(),Y.m(a,k)):Y&&(Y.d(1),Y=null),ge&4&&(w=Qs(J[2],J[6])>0),w?q?q.p(J,ge):(q=Hp(J),q.c(),q.m(a,E)):q&&(q.d(1),q=null),ge&4&&(I=Qs(J[2],J[5])>0),I?ne?ne.p(J,ge):(ne=Up(J),ne.c(),ne.m(a,null)):ne&&(ne.d(1),ne=null),ge&8&&O!==(O=J[3]("alert.dismiss")+"")&&Ee(P,O),ge&8&&$!==($=J[3]("alert.silenceFor5Minutes")+"")&&Ee(G,$)},d(J){J&&_(e),W&&W.d(),Y&&Y.d(),q&&q.d(),ne&&ne.d(),U=!1,Bn(H)}}}function XA(n){let e,t;return{c(){e=A("img"),this.h()},l(i){e=R(i,"IMG",{src:!0,style:!0}),this.h()},h(){zi(e.src,t="alert_intrusion.gif")||g(e,"src",t),B(e,"width","128px"),B(e,"height","128px"),B(e,"filter","invert()")},m(i,r){Z(i,e,r)},d(i){i&&_(e)}}}function KA(n){let e,t;return{c(){e=A("img"),this.h()},l(i){e=R(i,"IMG",{src:!0,style:!0}),this.h()},h(){zi(e.src,t="alert_intrusion.gif")||g(e,"src",t),B(e,"width","128px"),B(e,"height","128px"),B(e,"filter","invert()")},m(i,r){Z(i,e,r)},d(i){i&&_(e)}}}function JA(n){let e,t;return{c(){e=A("img"),this.h()},l(i){e=R(i,"IMG",{src:!0,style:!0}),this.h()},h(){zi(e.src,t="alert_hostile.gif")||g(e,"src",t),B(e,"width","160px"),B(e,"height","160px"),B(e,"object-fit","cover")},m(i,r){Z(i,e,r)},d(i){i&&_(e)}}}function Gp(n){let e,t,i=Aa(n[3],"alert.message.intrusion",n[10])+"",r;return{c(){e=A("p"),t=he(" "),r=he(i),this.h()},l(s){e=R(s,"P",{style:!0});var o=T(e);t=fe(o," "),r=fe(o,i),o.forEach(_),this.h()},h(){B(e,"font-size","21px"),B(e,"margin-top","8px")},m(s,o){Z(s,e,o),p(e,t),p(e,r)},p(s,o){o&12&&i!==(i=Aa(s[3],"alert.message.intrusion",s[10])+"")&&Ee(r,i)},d(s){s&&_(e)}}}function Hp(n){let e,t,i=Aa(n[3],"alert.message.hostile",n[11])+"",r;return{c(){e=A("p"),t=he(" "),r=he(i),this.h()},l(s){e=R(s,"P",{style:!0});var o=T(e);t=fe(o," "),r=fe(o,i),o.forEach(_),this.h()},h(){B(e,"font-size","21px"),B(e,"margin-top","8px")},m(s,o){Z(s,e,o),p(e,t),p(e,r)},p(s,o){o&12&&i!==(i=Aa(s[3],"alert.message.hostile",s[11])+"")&&Ee(r,i)},d(s){s&&_(e)}}}function Up(n){let e,t,i=Aa(n[3],"alert.message.radarIntrusion",n[12])+"",r;return{c(){e=A("p"),t=he(" "),r=he(i),this.h()},l(s){e=R(s,"P",{style:!0});var o=T(e);t=fe(o," "),r=fe(o,i),o.forEach(_),this.h()},h(){B(e,"font-size","21px"),B(e,"margin-top","8px")},m(s,o){Z(s,e,o),p(e,t),p(e,r)},p(s,o){o&12&&i!==(i=Aa(s[3],"alert.message.radarIntrusion",s[12])+"")&&Ee(r,i)},d(s){s&&_(e)}}}function QA(n){let e,t=n[2].length&&zp(ef(n));return{c(){t&&t.c(),e=dt()},l(i){t&&t.l(i),e=dt()},m(i,r){t&&t.m(i,r),Z(i,e,r)},p(i,[r]){i[2].length?t?t.p(ef(i),r):(t=zp(ef(i)),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:$e,o:$e,d(i){i&&_(e),t&&t.d(i)}}}function eR(n,e,t){let i,r;He(n,Nn,k=>t(3,r=k));const s=5*60;let{alertService:o}=e;const a=o.newAlerts;He(n,a,k=>t(2,i=k));const l=k=>k.type==qo.RADAR_INTRUSION,h=k=>k.type==qo.HOSTILE,d=k=>k.type==qo.INTRUSION,m=()=>o.acknowledgeAlerts(),v=()=>o.silenceAlerts(s);return n.$$set=k=>{"alertService"in k&&t(1,o=k.alertService)},[s,o,i,r,a,l,h,d,m,v]}class tR extends Wt{constructor(e){super(),Xt(this,e,eR,QA,zt,{SILENCE_DURATION_SECS:0,alertService:1})}get SILENCE_DURATION_SECS(){return this.$$.ctx[0]}}function qp(n){let e,t;return e=new NM({props:{map:n[1],sensorsAreas:n[8],healthReportFetcher:n[2]}}),{c(){st(e.$$.fragment)},l(i){ot(e.$$.fragment,i)},m(i,r){at(e,i,r),t=!0},p(i,r){const s={};r[0]&2&&(s.map=i[1]),r[0]&256&&(s.sensorsAreas=i[8]),r[0]&4&&(s.healthReportFetcher=i[2]),e.$set(s)},i(i){t||(de(e.$$.fragment,i),t=!0)},o(i){Ie(e.$$.fragment,i),t=!1},d(i){lt(e,i)}}}function Zp(n){let e=n[6],t,i,r=Yp(n);return{c(){r.c(),t=dt()},l(s){r.l(s),t=dt()},m(s,o){r.m(s,o),Z(s,t,o),i=!0},p(s,o){o[0]&64&&zt(e,e=s[6])?(bt(),Ie(r,1,1,$e),wt(),r=Yp(s),r.c(),de(r,1),r.m(t.parentNode,t)):r.p(s,o)},i(s){i||(de(r),i=!0)},o(s){Ie(r),i=!1},d(s){s&&_(t),r.d(s)}}}function Yp(n){let e,t,i={service:n[6],map:n[1],sensorsAreas:n[8],reactiveDroneRelationService:n[3],iconSet:n[30],dontTimeoutTrackers:n[20]==Gr.HISTORY,playbackSpeed:n[6]instanceof ni?n[6].playbackSpeed:void 0};return e=new Ek({props:i}),n[50](e),{c(){st(e.$$.fragment)},l(r){ot(e.$$.fragment,r)},m(r,s){at(e,r,s),t=!0},p(r,s){const o={};s[0]&64&&(o.service=r[6]),s[0]&2&&(o.map=r[1]),s[0]&256&&(o.sensorsAreas=r[8]),s[0]&8&&(o.reactiveDroneRelationService=r[3]),s[0]&1048576&&(o.dontTimeoutTrackers=r[20]==Gr.HISTORY),s[0]&64&&(o.playbackSpeed=r[6]instanceof ni?r[6].playbackSpeed:void 0),e.$set(o)},i(r){t||(de(e.$$.fragment,r),t=!0)},o(r){Ie(e.$$.fragment,r),t=!1},d(r){n[50](null),lt(e,r)}}}function jp(n){let e=n[7]&&n[6],t,i,r=Wp(n);return{c(){r.c(),t=dt()},l(s){r.l(s),t=dt()},m(s,o){r.m(s,o),Z(s,t,o),i=!0},p(s,o){o[0]&192&&zt(e,e=s[7]&&s[6])?(bt(),Ie(r,1,1,$e),wt(),r=Wp(s),r.c(),de(r,1),r.m(t.parentNode,t)):r.p(s,o)},i(s){i||(de(r),i=!0)},o(s){Ie(r),i=!1},d(s){s&&_(t),r.d(s)}}}function Wp(n){let e,t;return e=new BM({props:{map:n[1],signalService:n[7],iconSet:n[30],playbackSpeed:n[6]instanceof ni?n[6].playbackSpeed:void 0}}),{c(){st(e.$$.fragment)},l(i){ot(e.$$.fragment,i)},m(i,r){at(e,i,r),t=!0},p(i,r){const s={};r[0]&2&&(s.map=i[1]),r[0]&128&&(s.signalService=i[7]),r[0]&64&&(s.playbackSpeed=i[6]instanceof ni?i[6].playbackSpeed:void 0),e.$set(s)},i(i){t||(de(e.$$.fragment,i),t=!0)},o(i){Ie(e.$$.fragment,i),t=!1},d(i){lt(e,i)}}}function Xp(n){let e=n[5],t,i,r=Kp(n);return{c(){r.c(),t=dt()},l(s){r.l(s),t=dt()},m(s,o){r.m(s,o),Z(s,t,o),i=!0},p(s,o){o[0]&32&&zt(e,e=s[5])?(bt(),Ie(r,1,1,$e),wt(),r=Kp(s),r.c(),de(r,1),r.m(t.parentNode,t)):r.p(s,o)},i(s){i||(de(r),i=!0)},o(s){Ie(r),i=!1},d(s){s&&_(t),r.d(s)}}}function Kp(n){let e,t;return e=new HM({props:{map:n[1],radarService:n[5],iconSet:n[30]}}),{c(){st(e.$$.fragment)},l(i){ot(e.$$.fragment,i)},m(i,r){at(e,i,r),t=!0},p(i,r){const s={};r[0]&2&&(s.map=i[1]),r[0]&32&&(s.radarService=i[5]),e.$set(s)},i(i){t||(de(e.$$.fragment,i),t=!0)},o(i){Ie(e.$$.fragment,i),t=!1},d(i){lt(e,i)}}}function Jp(n){let e=n[20],t,i,r=Qp(n);return{c(){r.c(),t=dt()},l(s){r.l(s),t=dt()},m(s,o){r.m(s,o),Z(s,t,o),i=!0},p(s,o){o[0]&1048576&&zt(e,e=s[20])?(bt(),Ie(r,1,1,$e),wt(),r=Qp(s),r.c(),de(r,1),r.m(t.parentNode,t)):r.p(s,o)},i(s){i||(de(r),i=!0)},o(s){Ie(r),i=!1},d(s){s&&_(t),r.d(s)}}}function Qp(n){var i;let e,t;return e=new YT({props:{map:n[1],mapManager:n[13],geofencesService:n[11],ignoredGeofenceId:((i=n[22])==null?void 0:i.type)===Tt.EditGeofence?n[22].geofenceId:void 0}}),{c(){st(e.$$.fragment)},l(r){ot(e.$$.fragment,r)},m(r,s){at(e,r,s),t=!0},p(r,s){var a;const o={};s[0]&2&&(o.map=r[1]),s[0]&8192&&(o.mapManager=r[13]),s[0]&2048&&(o.geofencesService=r[11]),s[0]&4194304&&(o.ignoredGeofenceId=((a=r[22])==null?void 0:a.type)===Tt.EditGeofence?r[22].geofenceId:void 0),e.$set(o)},i(r){t||(de(e.$$.fragment,r),t=!0)},o(r){Ie(e.$$.fragment,r),t=!1},d(r){lt(e,r)}}}function ev(n){let e,t;return e=new ED({props:{map:n[1]}}),{c(){st(e.$$.fragment)},l(i){ot(e.$$.fragment,i)},m(i,r){at(e,i,r),t=!0},p(i,r){const s={};r[0]&2&&(s.map=i[1]),e.$set(s)},i(i){t||(de(e.$$.fragment,i),t=!0)},o(i){Ie(e.$$.fragment,i),t=!1},d(i){lt(e,i)}}}function tv(n){let e,t;return e=new XN({props:{map:n[1],geofence:n[22].geofenceStore,highlightedPointIndex:n[22].highlightedPointIndex}}),{c(){st(e.$$.fragment)},l(i){ot(e.$$.fragment,i)},m(i,r){at(e,i,r),t=!0},p(i,r){const s={};r[0]&2&&(s.map=i[1]),r[0]&4194304&&(s.geofence=i[22].geofenceStore),r[0]&4194304&&(s.highlightedPointIndex=i[22].highlightedPointIndex),e.$set(s)},i(i){t||(de(e.$$.fragment,i),t=!0)},o(i){Ie(e.$$.fragment,i),t=!1},d(i){lt(e,i)}}}function nv(n){let e,t,i;function r(o){n[51](o)}let s={sensorsAreas:n[37]};return n[1]!==void 0&&(s.map=n[1]),e=new xM({props:s}),un.push(()=>jn(e,"map",r)),{c(){st(e.$$.fragment)},l(o){ot(e.$$.fragment,o)},m(o,a){at(e,o,a),i=!0},p(o,a){const l={};!t&&a[0]&2&&(t=!0,l.map=o[1],Yn(()=>t=!1)),e.$set(l)},i(o){i||(de(e.$$.fragment,o),i=!0)},o(o){Ie(e.$$.fragment,o),i=!1},d(o){lt(e,o)}}}function iv(n){let e,t;return e=new MD({props:{map:n[1],mapManager:n[13]}}),{c(){st(e.$$.fragment)},l(i){ot(e.$$.fragment,i)},m(i,r){at(e,i,r),t=!0},p(i,r){const s={};r[0]&2&&(s.map=i[1]),r[0]&8192&&(s.mapManager=i[13]),e.$set(s)},i(i){t||(de(e.$$.fragment,i),t=!0)},o(i){Ie(e.$$.fragment,i),t=!1},d(i){lt(e,i)}}}function rv(n){let e,t;return e=new WA({props:{map:n[1],rectangleStore:n[22].rectangleStore}}),{c(){st(e.$$.fragment)},l(i){ot(e.$$.fragment,i)},m(i,r){at(e,i,r),t=!0},p(i,r){const s={};r[0]&2&&(s.map=i[1]),r[0]&4194304&&(s.rectangleStore=i[22].rectangleStore),e.$set(s)},i(i){t||(de(e.$$.fragment,i),t=!0)},o(i){Ie(e.$$.fragment,i),t=!1},d(i){lt(e,i)}}}function sv(n){let e=n[22].flightId,t,i,r=ov(n);return{c(){r.c(),t=dt()},l(s){r.l(s),t=dt()},m(s,o){r.m(s,o),Z(s,t,o),i=!0},p(s,o){o[0]&4194304&&zt(e,e=s[22].flightId)?(bt(),Ie(r,1,1,$e),wt(),r=ov(s),r.c(),de(r,1),r.m(t.parentNode,t)):r.p(s,o)},i(s){i||(de(r),i=!0)},o(s){Ie(r),i=!1},d(s){s&&_(t),r.d(s)}}}function ov(n){let e,t;return e=new gS({props:{iconSet:n[30],map:n[1],trafficService:n[35],sensorsAreas:n[37],currentDroneRelationService:n[9],reactiveDroneRelationService:n[3],flightSummariesService:n[42],geofencesService:n[11]}}),{c(){st(e.$$.fragment)},l(i){ot(e.$$.fragment,i)},m(i,r){at(e,i,r),t=!0},p(i,r){const s={};r[0]&2&&(s.map=i[1]),r[0]&512&&(s.currentDroneRelationService=i[9]),r[0]&8&&(s.reactiveDroneRelationService=i[3]),r[0]&2048&&(s.geofencesService=i[11]),e.$set(s)},i(i){t||(de(e.$$.fragment,i),t=!0)},o(i){Ie(e.$$.fragment,i),t=!1},d(i){lt(e,i)}}}function av(n){let e,t;return e=new kS({props:{healthReportFetcher:n[2],sensorsAreas:n[8]}}),{c(){st(e.$$.fragment)},l(i){ot(e.$$.fragment,i)},m(i,r){at(e,i,r),t=!0},p(i,r){const s={};r[0]&4&&(s.healthReportFetcher=i[2]),r[0]&256&&(s.sensorsAreas=i[8]),e.$set(s)},i(i){t||(de(e.$$.fragment,i),t=!0)},o(i){Ie(e.$$.fragment,i),t=!1},d(i){lt(e,i)}}}function lv(n){let e=n[22].sensorId,t,i,r=uv(n);return{c(){r.c(),t=dt()},l(s){r.l(s),t=dt()},m(s,o){r.m(s,o),Z(s,t,o),i=!0},p(s,o){o[0]&4194304&&zt(e,e=s[22].sensorId)?(bt(),Ie(r,1,1,$e),wt(),r=uv(s),r.c(),de(r,1),r.m(t.parentNode,t)):r.p(s,o)},i(s){i||(de(r),i=!0)},o(s){Ie(r),i=!1},d(s){s&&_(t),r.d(s)}}}function uv(n){let e,t;return e=new FS({props:{mapManager:n[13],map:n[1],sensorsAreas:n[37],healthReportFetcher:n[2]}}),{c(){st(e.$$.fragment)},l(i){ot(e.$$.fragment,i)},m(i,r){at(e,i,r),t=!0},p(i,r){const s={};r[0]&8192&&(s.mapManager=i[13]),r[0]&2&&(s.map=i[1]),r[0]&4&&(s.healthReportFetcher=i[2]),e.$set(s)},i(i){t||(de(e.$$.fragment,i),t=!0)},o(i){Ie(e.$$.fragment,i),t=!1},d(i){lt(e,i)}}}function cv(n){let e,t;return e=new HT({props:{geofencesService:n[11],map:n[1]}}),{c(){st(e.$$.fragment)},l(i){ot(e.$$.fragment,i)},m(i,r){at(e,i,r),t=!0},p(i,r){const s={};r[0]&2048&&(s.geofencesService=i[11]),r[0]&2&&(s.map=i[1]),e.$set(s)},i(i){t||(de(e.$$.fragment,i),t=!0)},o(i){Ie(e.$$.fragment,i),t=!1},d(i){lt(e,i)}}}function hv(n){var i,r;let e,t;return e=new YN({props:{map:n[1],geofencesService:n[11],geofence:n[22].geofenceStore,highlightedPointIndex:n[22].highlightedPointIndex,resultCallback:n[22].resultCallback,isEditing:((i=n[22])==null?void 0:i.type)===Tt.EditGeofence,isContinuing:((r=n[22])==null?void 0:r.type)===Tt.ContinueCreateGeofence}}),{c(){st(e.$$.fragment)},l(s){ot(e.$$.fragment,s)},m(s,o){at(e,s,o),t=!0},p(s,o){var l,h;const a={};o[0]&2&&(a.map=s[1]),o[0]&2048&&(a.geofencesService=s[11]),o[0]&4194304&&(a.geofence=s[22].geofenceStore),o[0]&4194304&&(a.highlightedPointIndex=s[22].highlightedPointIndex),o[0]&4194304&&(a.resultCallback=s[22].resultCallback),o[0]&4194304&&(a.isEditing=((l=s[22])==null?void 0:l.type)===Tt.EditGeofence),o[0]&4194304&&(a.isContinuing=((h=s[22])==null?void 0:h.type)===Tt.ContinueCreateGeofence),e.$set(a)},i(s){t||(de(e.$$.fragment,s),t=!0)},o(s){Ie(e.$$.fragment,s),t=!1},d(s){lt(e,s)}}}function fv(n){let e=n[22].geofenceId,t,i,r=dv(n);return{c(){r.c(),t=dt()},l(s){r.l(s),t=dt()},m(s,o){r.m(s,o),Z(s,t,o),i=!0},p(s,o){o[0]&4194304&&zt(e,e=s[22].geofenceId)?(bt(),Ie(r,1,1,$e),wt(),r=dv(s),r.c(),de(r,1),r.m(t.parentNode,t)):r.p(s,o)},i(s){i||(de(r),i=!0)},o(s){Ie(r),i=!1},d(s){s&&_(t),r.d(s)}}}function dv(n){let e,t;return e=new uL({props:{map:n[1],mapManager:n[13],geofencesService:n[11]}}),{c(){st(e.$$.fragment)},l(i){ot(e.$$.fragment,i)},m(i,r){at(e,i,r),t=!0},p(i,r){const s={};r[0]&2&&(s.map=i[1]),r[0]&8192&&(s.mapManager=i[13]),r[0]&2048&&(s.geofencesService=i[11]),e.$set(s)},i(i){t||(de(e.$$.fragment,i),t=!0)},o(i){Ie(e.$$.fragment,i),t=!1},d(i){lt(e,i)}}}function gv(n){let e,t;return e=new rI({props:{trafficHistory:n[33],trafficService:n[17],iconSet:n[30],reactiveDroneRelationService:n[3],signalDetectionHistoryService:n[16],sensorsAreas:n[8]}}),{c(){st(e.$$.fragment)},l(i){ot(e.$$.fragment,i)},m(i,r){at(e,i,r),t=!0},p(i,r){const s={};r[0]&131072&&(s.trafficService=i[17]),r[0]&8&&(s.reactiveDroneRelationService=i[3]),r[0]&65536&&(s.signalDetectionHistoryService=i[16]),r[0]&256&&(s.sensorsAreas=i[8]),e.$set(s)},i(i){t||(de(e.$$.fragment,i),t=!0)},o(i){Ie(e.$$.fragment,i),t=!1},d(i){lt(e,i)}}}function mv(n){let e,t;return e=new KM({}),{c(){st(e.$$.fragment)},l(i){ot(e.$$.fragment,i)},m(i,r){at(e,i,r),t=!0},i(i){t||(de(e.$$.fragment,i),t=!0)},o(i){Ie(e.$$.fragment,i),t=!1},d(i){lt(e,i)}}}function _v(n){let e,t;return e=new wT({props:{map:n[1]}}),{c(){st(e.$$.fragment)},l(i){ot(e.$$.fragment,i)},m(i,r){at(e,i,r),t=!0},p(i,r){const s={};r[0]&2&&(s.map=i[1]),e.$set(s)},i(i){t||(de(e.$$.fragment,i),t=!0)},o(i){Ie(e.$$.fragment,i),t=!1},d(i){lt(e,i)}}}function pv(n){let e,t;return e=new ZI({props:{knownDronesService:n[9],iconSet:n[30]}}),{c(){st(e.$$.fragment)},l(i){ot(e.$$.fragment,i)},m(i,r){at(e,i,r),t=!0},p(i,r){const s={};r[0]&512&&(s.knownDronesService=i[9]),e.$set(s)},i(i){t||(de(e.$$.fragment,i),t=!0)},o(i){Ie(e.$$.fragment,i),t=!1},d(i){lt(e,i)}}}function vv(n){let e,t;return e=new wD({}),{c(){st(e.$$.fragment)},l(i){ot(e.$$.fragment,i)},m(i,r){at(e,i,r),t=!0},i(i){t||(de(e.$$.fragment,i),t=!0)},o(i){Ie(e.$$.fragment,i),t=!1},d(i){lt(e,i)}}}function yv(n){let e,t;return e=new GA({props:{sensorsAreas:n[8],historyCacheService:n[0],iconSet:n[30],map:n[1]}}),{c(){st(e.$$.fragment)},l(i){ot(e.$$.fragment,i)},m(i,r){at(e,i,r),t=!0},p(i,r){const s={};r[0]&256&&(s.sensorsAreas=i[8]),r[0]&1&&(s.historyCacheService=i[0]),r[0]&2&&(s.map=i[1]),e.$set(s)},i(i){t||(de(e.$$.fragment,i),t=!0)},o(i){Ie(e.$$.fragment,i),t=!1},d(i){lt(e,i)}}}function nR(n){var H,j,Q,W,Y,q,ne,J,ge,ie,le,pe,ye,be,re,me,ke;let e,t,i,r,s,o,a,l,h,d,m,v=n[1]&&(((H=n[22])==null?void 0:H.type)===Tt.History||((j=n[22])==null?void 0:j.type)===Tt.RectangleHistory)&&!!n[10]&&((Q=n[10])==null?void 0:Q.hasPermission(102))&&n[37]&&n[0],k,w,E=n[1]&&((W=n[22])==null?void 0:W.type)===Tt.AircraftView&&sv(n),I=((Y=n[22])==null?void 0:Y.type)===Tt.Sensors&&n[2]&&n[8]&&av(n),M=(n[1]&&n[13]&&((q=n[22])==null?void 0:q.type)===Tt.SensorView||((ne=n[22])==null?void 0:ne.type)===Tt.SensorRelocating)&&lv(n),C=n[1]&&((J=n[22])==null?void 0:J.type)===Tt.Geofences&&n[11]&&cv(n),D=n[1]&&(((ge=n[22])==null?void 0:ge.type)===Tt.CreateGeofence||((ie=n[22])==null?void 0:ie.type)===Tt.EditGeofence||((le=n[22])==null?void 0:le.type)===Tt.ContinueCreateGeofence)&&n[11]&&hv(n),O=n[1]&&n[13]&&((pe=n[22])==null?void 0:pe.type)===Tt.GeofenceView&&n[11]&&fv(n),P=((ye=n[22])==null?void 0:ye.type)===Tt.DroneList&&n[17]&&n[8]&&gv(n),F=((be=n[22])==null?void 0:be.type)===Tt.Recordings&&mv(),V=((re=n[22])==null?void 0:re.type)===Tt.Account&&!!n[10]&&_v(n),$=((me=n[22])==null?void 0:me.type)===Tt.KnownDrones&&!!n[10]&&n[9]&&pv(n),G=((ke=n[22])==null?void 0:ke.type)===Tt.AirZones&&vv(),U=v&&yv(n);return{c(){E&&E.c(),e=ee(),I&&I.c(),t=ee(),M&&M.c(),i=ee(),C&&C.c(),r=ee(),D&&D.c(),s=ee(),O&&O.c(),o=ee(),P&&P.c(),a=ee(),F&&F.c(),l=ee(),V&&V.c(),h=ee(),$&&$.c(),d=ee(),G&&G.c(),m=ee(),U&&U.c(),k=dt()},l(X){E&&E.l(X),e=te(X),I&&I.l(X),t=te(X),M&&M.l(X),i=te(X),C&&C.l(X),r=te(X),D&&D.l(X),s=te(X),O&&O.l(X),o=te(X),P&&P.l(X),a=te(X),F&&F.l(X),l=te(X),V&&V.l(X),h=te(X),$&&$.l(X),d=te(X),G&&G.l(X),m=te(X),U&&U.l(X),k=dt()},m(X,ue){E&&E.m(X,ue),Z(X,e,ue),I&&I.m(X,ue),Z(X,t,ue),M&&M.m(X,ue),Z(X,i,ue),C&&C.m(X,ue),Z(X,r,ue),D&&D.m(X,ue),Z(X,s,ue),O&&O.m(X,ue),Z(X,o,ue),P&&P.m(X,ue),Z(X,a,ue),F&&F.m(X,ue),Z(X,l,ue),V&&V.m(X,ue),Z(X,h,ue),$&&$.m(X,ue),Z(X,d,ue),G&&G.m(X,ue),Z(X,m,ue),U&&U.m(X,ue),Z(X,k,ue),w=!0},p(X,ue){var _e,oe,ae,Se,Me,we,Te,Ae,Ne,De,_t,Fe,Pe,je,Ve,Ue,Ke;X[1]&&((_e=X[22])==null?void 0:_e.type)===Tt.AircraftView?E?(E.p(X,ue),ue[0]&4194306&&de(E,1)):(E=sv(X),E.c(),de(E,1),E.m(e.parentNode,e)):E&&(bt(),Ie(E,1,1,()=>{E=null}),wt()),((oe=X[22])==null?void 0:oe.type)===Tt.Sensors&&X[2]&&X[8]?I?(I.p(X,ue),ue[0]&4194564&&de(I,1)):(I=av(X),I.c(),de(I,1),I.m(t.parentNode,t)):I&&(bt(),Ie(I,1,1,()=>{I=null}),wt()),X[1]&&X[13]&&((ae=X[22])==null?void 0:ae.type)===Tt.SensorView||((Se=X[22])==null?void 0:Se.type)===Tt.SensorRelocating?M?(M.p(X,ue),ue[0]&4202498&&de(M,1)):(M=lv(X),M.c(),de(M,1),M.m(i.parentNode,i)):M&&(bt(),Ie(M,1,1,()=>{M=null}),wt()),X[1]&&((Me=X[22])==null?void 0:Me.type)===Tt.Geofences&&X[11]?C?(C.p(X,ue),ue[0]&4196354&&de(C,1)):(C=cv(X),C.c(),de(C,1),C.m(r.parentNode,r)):C&&(bt(),Ie(C,1,1,()=>{C=null}),wt()),X[1]&&(((we=X[22])==null?void 0:we.type)===Tt.CreateGeofence||((Te=X[22])==null?void 0:Te.type)===Tt.EditGeofence||((Ae=X[22])==null?void 0:Ae.type)===Tt.ContinueCreateGeofence)&&X[11]?D?(D.p(X,ue),ue[0]&4196354&&de(D,1)):(D=hv(X),D.c(),de(D,1),D.m(s.parentNode,s)):D&&(bt(),Ie(D,1,1,()=>{D=null}),wt()),X[1]&&X[13]&&((Ne=X[22])==null?void 0:Ne.type)===Tt.GeofenceView&&X[11]?O?(O.p(X,ue),ue[0]&4204546&&de(O,1)):(O=fv(X),O.c(),de(O,1),O.m(o.parentNode,o)):O&&(bt(),Ie(O,1,1,()=>{O=null}),wt()),((De=X[22])==null?void 0:De.type)===Tt.DroneList&&X[17]&&X[8]?P?(P.p(X,ue),ue[0]&4325632&&de(P,1)):(P=gv(X),P.c(),de(P,1),P.m(a.parentNode,a)):P&&(bt(),Ie(P,1,1,()=>{P=null}),wt()),((_t=X[22])==null?void 0:_t.type)===Tt.Recordings?F?ue[0]&4194304&&de(F,1):(F=mv(),F.c(),de(F,1),F.m(l.parentNode,l)):F&&(bt(),Ie(F,1,1,()=>{F=null}),wt()),((Fe=X[22])==null?void 0:Fe.type)===Tt.Account&&X[10]?V?(V.p(X,ue),ue[0]&4195328&&de(V,1)):(V=_v(X),V.c(),de(V,1),V.m(h.parentNode,h)):V&&(bt(),Ie(V,1,1,()=>{V=null}),wt()),((Pe=X[22])==null?void 0:Pe.type)===Tt.KnownDrones&&X[10]&&X[9]?$?($.p(X,ue),ue[0]&4195840&&de($,1)):($=pv(X),$.c(),de($,1),$.m(d.parentNode,d)):$&&(bt(),Ie($,1,1,()=>{$=null}),wt()),((je=X[22])==null?void 0:je.type)===Tt.AirZones?G?ue[0]&4194304&&de(G,1):(G=vv(),G.c(),de(G,1),G.m(m.parentNode,m)):G&&(bt(),Ie(G,1,1,()=>{G=null}),wt()),ue[0]&4195331&&(v=X[1]&&(((Ve=X[22])==null?void 0:Ve.type)===Tt.History||((Ue=X[22])==null?void 0:Ue.type)===Tt.RectangleHistory)&&!!X[10]&&((Ke=X[10])==null?void 0:Ke.hasPermission(102))&&X[37]&&X[0]),v?U?(U.p(X,ue),ue[0]&4195331&&de(U,1)):(U=yv(X),U.c(),de(U,1),U.m(k.parentNode,k)):U&&(bt(),Ie(U,1,1,()=>{U=null}),wt())},i(X){w||(de(E),de(I),de(M),de(C),de(D),de(O),de(P),de(F),de(V),de($),de(G),de(U),w=!0)},o(X){Ie(E),Ie(I),Ie(M),Ie(C),Ie(D),Ie(O),Ie(P),Ie(F),Ie(V),Ie($),Ie(G),Ie(U),w=!1},d(X){X&&(_(e),_(t),_(i),_(r),_(s),_(o),_(a),_(l),_(h),_(d),_(m),_(k)),E&&E.d(X),I&&I.d(X),M&&M.d(X),C&&C.d(X),D&&D.d(X),O&&O.d(X),P&&P.d(X),F&&F.d(X),V&&V.d(X),$&&$.d(X),G&&G.d(X),U&&U.d(X)}}}function bv(n){let e,t;return e=new EM({props:{$$slots:{default:[iR]},$$scope:{ctx:n}}}),{c(){st(e.$$.fragment)},l(i){ot(e.$$.fragment,i)},m(i,r){at(e,i,r),t=!0},p(i,r){const s={};r[0]&24578|r[2]&16384&&(s.$$scope={dirty:r,ctx:i}),e.$set(s)},i(i){t||(de(e.$$.fragment,i),t=!0)},o(i){Ie(e.$$.fragment,i),t=!1},d(i){lt(e,i)}}}function iR(n){let e,t,i,r,s;function o(d){n[52](d)}function a(d){n[53](d)}function l(d){n[54](d)}let h={};return n[1]!==void 0&&(h.map=n[1]),n[13]!==void 0&&(h.mapManager=n[13]),n[14]!==void 0&&(h.mapCurrentLayer=n[14]),e=new bM({props:h}),un.push(()=>jn(e,"map",o)),un.push(()=>jn(e,"mapManager",a)),un.push(()=>jn(e,"mapCurrentLayer",l)),{c(){st(e.$$.fragment)},l(d){ot(e.$$.fragment,d)},m(d,m){at(e,d,m),s=!0},p(d,m){const v={};!t&&m[0]&2&&(t=!0,v.map=d[1],Yn(()=>t=!1)),!i&&m[0]&8192&&(i=!0,v.mapManager=d[13],Yn(()=>i=!1)),!r&&m[0]&16384&&(r=!0,v.mapCurrentLayer=d[14],Yn(()=>r=!1)),e.$set(v)},i(d){s||(de(e.$$.fragment,d),s=!0)},o(d){Ie(e.$$.fragment,d),s=!1},d(d){lt(e,d)}}}function wv(n){let e,t;return e=new tR({props:{alertService:n[4]}}),{c(){st(e.$$.fragment)},l(i){ot(e.$$.fragment,i)},m(i,r){at(e,i,r),t=!0},p(i,r){const s={};r[0]&16&&(s.alertService=i[4]),e.$set(s)},i(i){t||(de(e.$$.fragment,i),t=!0)},o(i){Ie(e.$$.fragment,i),t=!1},d(i){lt(e,i)}}}function kv(n){let e,t,i={HANDLE_VISIBLE_OFFSET:sR};return e=new RT({props:i}),n[55](e),{c(){st(e.$$.fragment)},l(r){ot(e.$$.fragment,r)},m(r,s){at(e,r,s),t=!0},p(r,s){const o={};e.$set(o)},i(r){t||(de(e.$$.fragment,r),t=!0)},o(r){Ie(e.$$.fragment,r),t=!1},d(r){n[55](null),lt(e,r)}}}function rR(n){var be,re,me,ke,X,ue,_e,oe,ae,Se,Me,we;let e,t,i,r,s,o=n[1]&&n[8]&&n[19]&&((be=n[10])==null?void 0:be.hasPermission(200)),a,l,h,d,m=n[1]&&n[13]&&n[11]&&n[21]&&((re=n[10])==null?void 0:re.hasPermission(301)),v,k,w,E,I,M,C,D,O,P,F=n[20]==Gr.HISTORY&&((me=n[10])==null?void 0:me.hasPermission(102)),V,$,G,U,H=o&&qp(n),j=n[1]&&n[6]&&n[8]&&Zp(n),Q=n[1]&&n[7]&&n[6]&&jp(n),W=n[1]&&n[5]&&Xp(n),Y=m&&Jp(n),q=n[1]&&n[23]&&ev(n),ne=n[1]&&(((ke=n[22])==null?void 0:ke.type)===Tt.CreateGeofence||((X=n[22])==null?void 0:X.type)===Tt.EditGeofence||((ue=n[22])==null?void 0:ue.type)===Tt.ContinueCreateGeofence)&&tv(n),J=((_e=n[22])==null?void 0:_e.type)===Tt.SensorRelocating&&n[1]&&n[8]&&nv(n),ge=n[1]&&n[13]&&n[10]&&n[24]&&iv(n),ie=n[1]&&((oe=n[22])==null?void 0:oe.type)===Tt.RectangleHistory&&rv(n);C=new qk({props:{service:bi,showButtonRadar:!0,showButtonSensors:!!(n[10]&&((ae=n[10])!=null&&ae.hasPermission(200))),showButtonGeofences:!!(n[10]&&((Se=n[10])!=null&&Se.hasPermission(301))),showButtonHistory:!!(n[10]&&((Me=n[10])!=null&&Me.hasPermission(102))),showButtonKnownDrones:!!(n[10]&&((we=n[10])!=null&&we.hasPermission(22))),showSidebar:!!n[10],$$slots:{default:[nR]},$$scope:{ctx:n}}}),C.$on("history-click",n[45]);let le=n[1]&&n[13]&&bv(n),pe=n[4]&&wv(n),ye=F&&kv(n);return{c(){e=ee(),t=ee(),i=A("div"),r=A("div"),s=ee(),H&&H.c(),a=ee(),j&&j.c(),l=ee(),Q&&Q.c(),h=ee(),W&&W.c(),d=ee(),Y&&Y.c(),v=ee(),q&&q.c(),k=ee(),ne&&ne.c(),w=ee(),J&&J.c(),E=ee(),ge&&ge.c(),I=ee(),ie&&ie.c(),M=ee(),st(C.$$.fragment),D=ee(),le&&le.c(),O=ee(),pe&&pe.c(),P=ee(),ye&&ye.c(),V=dt(),this.h()},l(Te){D4("svelte-brvqj6",document.head).forEach(_),e=te(Te),t=te(Te),i=R(Te,"DIV",{class:!0});var Ne=T(i);r=R(Ne,"DIV",{id:!0,style:!0,class:!0}),T(r).forEach(_),s=te(Ne),H&&H.l(Ne),a=te(Ne),j&&j.l(Ne),l=te(Ne),Q&&Q.l(Ne),h=te(Ne),W&&W.l(Ne),d=te(Ne),Y&&Y.l(Ne),v=te(Ne),q&&q.l(Ne),k=te(Ne),ne&&ne.l(Ne),w=te(Ne),J&&J.l(Ne),E=te(Ne),ge&&ge.l(Ne),I=te(Ne),ie&&ie.l(Ne),M=te(Ne),ot(C.$$.fragment,Ne),D=te(Ne),le&&le.l(Ne),Ne.forEach(_),O=te(Te),pe&&pe.l(Te),P=te(Te),ye&&ye.l(Te),V=dt(),this.h()},h(){document.title="Drooniradar",g(r,"id","map"),B(r,"--gradient-color",n[18]?"128, 0, 0":"0, 0, 0"),g(r,"class","svelte-cops9c"),g(i,"class","viewport svelte-cops9c")},m(Te,Ae){Z(Te,e,Ae),Z(Te,t,Ae),Z(Te,i,Ae),p(i,r),p(i,s),H&&H.m(i,null),p(i,a),j&&j.m(i,null),p(i,l),Q&&Q.m(i,null),p(i,h),W&&W.m(i,null),p(i,d),Y&&Y.m(i,null),p(i,v),q&&q.m(i,null),p(i,k),ne&&ne.m(i,null),p(i,w),J&&J.m(i,null),p(i,E),ge&&ge.m(i,null),p(i,I),ie&&ie.m(i,null),p(i,M),at(C,i,null),p(i,D),le&&le.m(i,null),Z(Te,O,Ae),pe&&pe.m(Te,Ae),Z(Te,P,Ae),ye&&ye.m(Te,Ae),Z(Te,V,Ae),$=!0,G||(U=[Vl(Cc.call(null,document.body,{on:"go-live",cb:n[31]})),Vl(Cc.call(null,document.body,{on:"play-back",cb:n[32]}))],G=!0)},p(Te,Ae){var De,_t,Fe,Pe,je,Ve,Ue,Ke,We,ze,Et,rt;(!$||Ae[0]&262144)&&B(r,"--gradient-color",Te[18]?"128, 0, 0":"0, 0, 0"),Ae[0]&525570&&(o=Te[1]&&Te[8]&&Te[19]&&((De=Te[10])==null?void 0:De.hasPermission(200))),o?H?(H.p(Te,Ae),Ae[0]&525570&&de(H,1)):(H=qp(Te),H.c(),de(H,1),H.m(i,a)):H&&(bt(),Ie(H,1,1,()=>{H=null}),wt()),Te[1]&&Te[6]&&Te[8]?j?(j.p(Te,Ae),Ae[0]&322&&de(j,1)):(j=Zp(Te),j.c(),de(j,1),j.m(i,l)):j&&(bt(),Ie(j,1,1,()=>{j=null}),wt()),Te[1]&&Te[7]&&Te[6]?Q?(Q.p(Te,Ae),Ae[0]&194&&de(Q,1)):(Q=jp(Te),Q.c(),de(Q,1),Q.m(i,h)):Q&&(bt(),Ie(Q,1,1,()=>{Q=null}),wt()),Te[1]&&Te[5]?W?(W.p(Te,Ae),Ae[0]&34&&de(W,1)):(W=Xp(Te),W.c(),de(W,1),W.m(i,d)):W&&(bt(),Ie(W,1,1,()=>{W=null}),wt()),Ae[0]&2108418&&(m=Te[1]&&Te[13]&&Te[11]&&Te[21]&&((_t=Te[10])==null?void 0:_t.hasPermission(301))),m?Y?(Y.p(Te,Ae),Ae[0]&2108418&&de(Y,1)):(Y=Jp(Te),Y.c(),de(Y,1),Y.m(i,v)):Y&&(bt(),Ie(Y,1,1,()=>{Y=null}),wt()),Te[1]&&Te[23]?q?(q.p(Te,Ae),Ae[0]&8388610&&de(q,1)):(q=ev(Te),q.c(),de(q,1),q.m(i,k)):q&&(bt(),Ie(q,1,1,()=>{q=null}),wt()),Te[1]&&(((Fe=Te[22])==null?void 0:Fe.type)===Tt.CreateGeofence||((Pe=Te[22])==null?void 0:Pe.type)===Tt.EditGeofence||((je=Te[22])==null?void 0:je.type)===Tt.ContinueCreateGeofence)?ne?(ne.p(Te,Ae),Ae[0]&4194306&&de(ne,1)):(ne=tv(Te),ne.c(),de(ne,1),ne.m(i,w)):ne&&(bt(),Ie(ne,1,1,()=>{ne=null}),wt()),((Ve=Te[22])==null?void 0:Ve.type)===Tt.SensorRelocating&&Te[1]&&Te[8]?J?(J.p(Te,Ae),Ae[0]&4194562&&de(J,1)):(J=nv(Te),J.c(),de(J,1),J.m(i,E)):J&&(bt(),Ie(J,1,1,()=>{J=null}),wt()),Te[1]&&Te[13]&&Te[10]&&Te[24]?ge?(ge.p(Te,Ae),Ae[0]&16786434&&de(ge,1)):(ge=iv(Te),ge.c(),de(ge,1),ge.m(i,I)):ge&&(bt(),Ie(ge,1,1,()=>{ge=null}),wt()),Te[1]&&((Ue=Te[22])==null?void 0:Ue.type)===Tt.RectangleHistory?ie?(ie.p(Te,Ae),Ae[0]&4194306&&de(ie,1)):(ie=rv(Te),ie.c(),de(ie,1),ie.m(i,M)):ie&&(bt(),Ie(ie,1,1,()=>{ie=null}),wt());const Ne={};Ae[0]&1024&&(Ne.showButtonSensors=!!(Te[10]&&((Ke=Te[10])!=null&&Ke.hasPermission(200)))),Ae[0]&1024&&(Ne.showButtonGeofences=!!(Te[10]&&((We=Te[10])!=null&&We.hasPermission(301)))),Ae[0]&1024&&(Ne.showButtonHistory=!!(Te[10]&&((ze=Te[10])!=null&&ze.hasPermission(102)))),Ae[0]&1024&&(Ne.showButtonKnownDrones=!!(Te[10]&&((Et=Te[10])!=null&&Et.hasPermission(22)))),Ae[0]&1024&&(Ne.showSidebar=!!Te[10]),Ae[0]&4402959|Ae[2]&16384&&(Ne.$$scope={dirty:Ae,ctx:Te}),C.$set(Ne),Te[1]&&Te[13]?le?(le.p(Te,Ae),Ae[0]&8194&&de(le,1)):(le=bv(Te),le.c(),de(le,1),le.m(i,null)):le&&(bt(),Ie(le,1,1,()=>{le=null}),wt()),Te[4]?pe?(pe.p(Te,Ae),Ae[0]&16&&de(pe,1)):(pe=wv(Te),pe.c(),de(pe,1),pe.m(P.parentNode,P)):pe&&(bt(),Ie(pe,1,1,()=>{pe=null}),wt()),Ae[0]&1049600&&(F=Te[20]==Gr.HISTORY&&((rt=Te[10])==null?void 0:rt.hasPermission(102))),F?ye?(ye.p(Te,Ae),Ae[0]&1049600&&de(ye,1)):(ye=kv(Te),ye.c(),de(ye,1),ye.m(V.parentNode,V)):ye&&(bt(),Ie(ye,1,1,()=>{ye=null}),wt())},i(Te){$||(de(H),de(j),de(Q),de(W),de(Y),de(q),de(ne),de(J),de(ge),de(ie),de(C.$$.fragment,Te),de(le),de(pe),de(ye),$=!0)},o(Te){Ie(H),Ie(j),Ie(Q),Ie(W),Ie(Y),Ie(q),Ie(ne),Ie(J),Ie(ge),Ie(ie),Ie(C.$$.fragment,Te),Ie(le),Ie(pe),Ie(ye),$=!1},d(Te){Te&&(_(e),_(t),_(i),_(O),_(P),_(V)),H&&H.d(),j&&j.d(),Q&&Q.d(),W&&W.d(),Y&&Y.d(),q&&q.d(),ne&&ne.d(),J&&J.d(),ge&&ge.d(),ie&&ie.d(),lt(C),le&&le.d(),pe&&pe.d(Te),ye&&ye.d(Te),G=!1,Bn(U)}}}const sR=40;function oR(n,e,t){let i,r,s,o,a,l,h,d,m,v,k,w,E,I,M,C,D,O,P,F,V,$,G;He(n,Ks,Ye=>t(5,a=Ye)),He(n,bi,Ye=>t(6,l=Ye)),He(n,Uo,Ye=>t(7,h=Ye)),He(n,Li,Ye=>t(10,E=Ye)),He(n,Jd,Ye=>t(48,M=Ye)),He(n,za,Ye=>t(20,P=Ye)),He(n,nn,Ye=>t(22,V=Ye));let U;const H=typeof localStorage<"u"?localStorage.getItem("currentIconSet"):null,j=H&&Fc.includes(H)?H:Fc[1],Q=Pn(j);He(n,Q,Ye=>t(49,C=Ye)),mw();let{geofence_layer_shown:W,airzones_layer_shown:Y,sensors_layer_shown:q,weather_layer_shown:ne,icon_set:J}=ii.settings.fields;He(n,W,Ye=>t(21,F=Ye)),He(n,Y,Ye=>t(23,$=Ye)),He(n,q,Ye=>t(19,O=Ye)),He(n,ne,Ye=>t(24,G=Ye)),gk().then(Ye=>{console.log("Connection established:",Ye),kn(Jd,M=Ye,M)}).catch(Ye=>{console.error("Failed to connect:",Ye)});function ie(){l&&M&&!(l instanceof Os||l instanceof os)&&!(a instanceof Ea||a instanceof Fl)&&(I&&w?kn(bi,l=os.connect(M,I,w),l):kn(bi,l=Os.connect(M),l),I?kn(Ks,a=Ea.connect(M,I),a):kn(Ks,a=Fl.connect(M),a),kn(Uo,h=Zc.connect(M),h),Lo.set(null))}function le(Ye){let{unixTimestamp:Vt,paused:Mt,openHistory:Rt,flightSummary:gt}=Ye;if(l){const it=l instanceof ni?l.playbackSpeed.current:DT;Rt===!0&&(Mt=!0),kn(bi,l=null,l),kn(Uo,h=null,h),kn(Ks,a=null,a),gt&&Lo.set(gt),ni.connect(Vt).then(([St,Jt,ut])=>{console.log("Backlog drone data service connected:",St),Mt!==void 0&&St.paused.set(Mt),St.playbackSpeed.set(it),kn(bi,l=St,l),kn(Uo,h=Jt,h),kn(Ks,a=ut,a)}).catch(St=>{console.error("Failed to connect backlog drone data service:",St),ie()})}}const pe=new Ot([]);He(n,pe,Ye=>t(47,s=Ye));const ye=Pn(null);He(n,ye,Ye=>t(63,v=Ye));const be=new rs(null);He(n,be,Ye=>t(17,m=Ye));const re=new rs(null);He(n,re,Ye=>t(16,d=Ye));const me=new rs(null);He(n,me,Ye=>t(8,k=Ye));const ke=new rs(null);He(n,ke,Ye=>t(11,I=Ye));const X=new rs(null);He(n,X,Ye=>t(2,i=Ye));const ue=new rs(null);He(n,ue,Ye=>t(9,w=Ye));const _e=new rs(null);He(n,_e,Ye=>t(3,r=Ye));const oe=new SD;let ae=null;const Se=new rs(null);He(n,Se,Ye=>t(4,o=Ye));const Me=new Yl,we=new Ot(!1),Te=new Ot(!1);He(n,Te,Ye=>t(18,D=Ye));let Ae=!1,Ne=!1;function De(){we.set(za.current==Gr.REAL_TIME&&(Ae||Ne))}const _t=new Yl;bi.subscribe(Ye=>{Ye&&Ye instanceof os&&_t.swap(Ye.activeIntrusions.subscribe(Vt=>{Ae=Vt.length>0,De()}))}),setInterval(()=>{var Ye,Vt;we.current?(Te.set(!Te.current),Te.current&&((Vt=(Ye=Se.current)==null?void 0:Ye.newAlerts)!=null&&Vt.current.length)&&Pe()):Te.set(!1)},710);const Fe=new Audio("/alert.mp3");function Pe(){Fe.pause(),Fe.currentTime=0,Fe.play()}let je,Ve,Ue;const Ke=Pn({lat:0,lng:0}),We=Pn({lat:0,lng:0});let ze=null,Et=ii.settings.fields.base_map_id,rt=null,ft=null,Ut=null;function Qe(Ye,Vt){var gt;Ut&&(Ut(),Ut=null);let Mt;t(1,[je,Ve,Mt]=nr.createMap("map",Ye,Vt),je,t(13,Ve)),je&&(ze=new ZM(je,Li),ze.start());const Rt=it=>{var Jt;const St=(Jt=Ve==null?void 0:Ve.listBaseLayers)==null?void 0:Jt.call(Ve).find(ut=>ut.id===it);St&&(Ve!=null&&Ve.currentLayer)&&Ve.currentLayer.set(St)};Rt(Et.current),rt=((gt=Ve==null?void 0:Ve.currentLayer)==null?void 0:gt.subscribe(it=>{it&&it.id!==Et.current&&Et.set(it.id)}))??null,ft=(Et==null?void 0:Et.subscribe(it=>{var St;it&&(Ve!=null&&Ve.listBaseLayers)&&((St=A4(Ve.currentLayer))==null?void 0:St.id)!==it&&Rt(it)}))??null,je.on("mousemove",it=>{Ke.set(it.latlng)}),je.on("click",it=>{We.set(it.latlng)}),t(14,Ue=Ve.currentLayer),Ut=()=>{Mt(),ze&&(ze.stop(),ze=null),je==null||je.remove(),rt&&rt(),ft&&ft()}}mi(()=>{U4.current.then(()=>{var Vt,Mt,Rt;let Ye;Li.current?Ye=Li.current.profile.country.toLowerCase():Ye="et",Ye=="ee"&&(Ye="et"),console.log("db3: region:",Ye),Qe(Ye,((Rt=(Mt=(Vt=Li.current)==null?void 0:Vt.profile)==null?void 0:Mt.organization)==null?void 0:Rt.mapDefaultCenter)||null)})});let yt;function mt(){le({unixTimestamp:Math.floor(Date.now()/1e3),paused:!0,openHistory:!0})}let Ft;mi(()=>()=>{Ft&&Ft()});function qt(Ye){un[Ye?"unshift":"push"](()=>{U=Ye,t(12,U)})}function vt(Ye){je=Ye,t(1,je)}function $t(Ye){je=Ye,t(1,je)}function dn(Ye){Ve=Ye,t(13,Ve)}function sn(Ye){Ue=Ye,t(14,Ue)}function pn(Ye){un[Ye?"unshift":"push"](()=>{yt=Ye,t(15,yt)})}return n.$$.update=()=>{if(n.$$.dirty[1]&262144&&C&&typeof localStorage<"u"&&localStorage.setItem("currentIconSet",C),n.$$.dirty[0]&1536&&E&&(kn(me,k=new kT(E),k),kn(ke,I=new Hc(E),I),kn(X,i=new LM(E),i),kn(ue,w=new pk(E,Ye=>{var Vt;return(Vt=_e.current)==null?void 0:Vt.updateFromCurrentKnownDrones(Ye)}),w),kn(_e,r=new _k(w),r),nn.goto({type:Tt.DroneList})),n.$$.dirty[0]&2560|n.$$.dirty[1]&131072&&M){let Ye;I&&w?Ye=Promise.resolve(os.connect(M,I,w)):Ye=Promise.resolve(Os.connect(M)),I?kn(Ks,a=Ea.connect(M,I),a):kn(Ks,a=Fl.connect(M),a),Ye.then(Vt=>{kn(bi,l=Vt,l)}).catch(Vt=>{console.error("Failed to connect drone data service:",Vt)}),kn(Uo,h=Zc.connect(M),h)}if(n.$$.dirty[1]&131072&&M&&oe.startUpdatingFromWSManager(M),n.$$.dirty[0]&769&&k&&!ae&&w&&t(0,ae=new zD(oe,new Date().getTimezoneOffset(),k)),n.$$.dirty[0]&64&&l&&(kn(pe,s=[],s),kn(ye,v=null,v),kn(be,m=new Mf(pe,ye,l),m)),n.$$.dirty[0]&128&&kn(re,d=h?new Tf(h):null,d),n.$$.dirty[0]&104)if(l&&l instanceof os&&r&&a&&a instanceof Ea){const Ye=new Bf;Ye.startUpdatingFromIntrusions(l.activeIntrusions),Ye.startUpdatingFromHostiles(pe,r),Ye.startUpdatingFromRadarIntrusions(a.activeIntrusions),Se.set(Ye)}else Se.set(null);n.$$.dirty[0]&18&&o&&Me.swap(o.newAlerts.subscribe(Ye=>{const Vt=Ye.length>0?Ye[Ye.length-1]:null;Vt&&Vt.lastLocation&&je&&je.flyTo(Vt.lastLocation,9,{duration:1,animate:!0})})),n.$$.dirty[0]&8|n.$$.dirty[1]&65536&&s&&r&&(Ne=s.some(Vt=>{var Mt;return Date.now()-Vt.lastUpdateTime<6e4&&((Mt=r==null?void 0:r.get(Vt.aid))==null?void 0:Mt.relationship)===an.HOSTILE}),De()),n.$$.dirty[0]&4|n.$$.dirty[1]&32768&&i&&(Ft&&Ft(),t(46,Ft=Z4(i.latestHealthReport)))},[ae,je,i,r,o,a,l,h,k,w,E,I,U,Ve,Ue,yt,d,m,D,O,P,F,V,$,G,Q,W,Y,q,ne,J,ie,le,pe,ye,be,re,me,ke,X,ue,_e,oe,Se,Te,mt,Ft,s,M,C,qt,vt,$t,dn,sn,pn]}class ER extends Wt{constructor(e){super(),Xt(this,e,oR,rR,zt,{},null,[-1,-1,-1])}}export{ER as component,pR as universal};
